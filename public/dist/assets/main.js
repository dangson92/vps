import{u as ct,a as wt,r as nt,c as p,o as n,b as _,d as V,e,f as Tt,w as ke,n as De,g as N,i as v,j as Ze,t as I,k as Z,F as he,l as we,m as ze,p as U,v as Q,q as Je,s as ie,x as $e,y as Bt,z as lt,A as Be,B as kt,C as Vt,D as At,E as Cs,G as Ts,H as Es,I as Rs}from"./vendor.js";import{L as ns,S as rs,G as mt,B as is,U as As,a as ds,b as Ps,c as xt,C as St,A as Ct,d as Pt,P as us,T as gt,e as Oe,f as Lt,g as cs,F as ps,h as Ls,i as ms,R as Is,I as jt,j as Ut,k as Ds,l as Ms,m as js,E as Nt,n as Xt,o as Us,p as gs,q as Fs,r as Vs,s as Ns,t as zs}from"./icons.js";import{g as vs}from"./tinymce.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const f of m)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&u(g)}).observe(document,{childList:!0,subtree:!0});function r(m){const f={};return m.integrity&&(f.integrity=m.integrity),m.referrerPolicy&&(f.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?f.credentials="include":m.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(m){if(m.ep)return;m.ep=!0;const f=r(m);fetch(m.href,f)}})();const Os={id:"app"},Bs={key:0,class:"min-h-screen"},Hs={key:1,class:"relative flex min-h-screen w-full bg-background-light"},qs={class:"flex w-64 flex-col border-r border-gray-200 bg-white p-4"},Ws={class:"flex flex-col gap-2"},Ys={class:"flex-1"},Ks={class:"flex items-center justify-between border-b border-gray-200 px-10 py-4 bg-white"},Xs={class:"flex items-center gap-4"},Gs={class:"h-10 w-10 rounded-lg border border-gray-300 bg-gray-50 text-gray-800"},Qs={class:"p-6 lg:p-10"},Js={__name:"App",setup(s){const t=ct(),r=wt(),u=()=>{localStorage.removeItem("adminToken"),delete N.defaults.headers.common["X-Admin-Token"],r.push("/login")};return(m,f)=>{const g=nt("router-view"),x=nt("router-link");return n(),p("div",Os,[_(t).path==="/login"?(n(),p("div",Bs,[V(g)])):(n(),p("div",Hs,[e("aside",qs,[f[6]||(f[6]=Tt('<div class="flex items-center gap-3 mb-4"><div class="rounded-full size-10 bg-primary/10"></div><div class="flex flex-col"><h1 class="text-gray-900 text-base font-medium">Admin User</h1><p class="text-gray-500 text-sm">admin@vps.com</p></div></div>',1)),e("nav",Ws,[V(x,{to:"/",class:De(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":_(t).path==="/","hover:bg-gray-100 text-gray-800":_(t).path!=="/"}])},{default:ke(()=>[V(_(ns),{class:"size-4"}),f[0]||(f[0]=e("span",null,"Dashboard",-1))]),_:1},8,["class"]),V(x,{to:"/vps",class:De(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":_(t).path.startsWith("/vps"),"hover:bg-gray-100 text-gray-800":!_(t).path.startsWith("/vps")}])},{default:ke(()=>[V(_(rs),{class:"size-4"}),f[1]||(f[1]=e("span",null,"Servers",-1))]),_:1},8,["class"]),V(x,{to:"/websites",class:De(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":_(t).path.startsWith("/websites"),"hover:bg-gray-100 text-gray-800":!_(t).path.startsWith("/websites")}])},{default:ke(()=>[V(_(mt),{class:"size-4"}),f[2]||(f[2]=e("span",null,"Websites",-1))]),_:1},8,["class"]),V(x,{to:"/monitoring",class:De(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":_(t).path.startsWith("/monitoring"),"hover:bg-gray-100 text-gray-800":!_(t).path.startsWith("/monitoring")}])},{default:ke(()=>[V(_(is),{class:"size-4"}),f[3]||(f[3]=e("span",null,"Monitoring",-1))]),_:1},8,["class"]),V(x,{to:"/profile",class:De(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":_(t).path.startsWith("/profile"),"hover:bg-gray-100 text-gray-800":!_(t).path.startsWith("/profile")}])},{default:ke(()=>[V(_(As),{class:"size-4"}),f[4]||(f[4]=e("span",null,"Profile",-1))]),_:1},8,["class"]),V(x,{to:"/settings",class:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-800 hover:bg-gray-100"},{default:ke(()=>[V(_(ds),{class:"size-4"}),f[5]||(f[5]=e("span",null,"Settings",-1))]),_:1})])]),e("main",Ys,[e("header",Ks,[f[8]||(f[8]=e("h2",{class:"text-lg font-bold"},"Tổng quan Hệ thống",-1)),e("div",Xs,[f[7]||(f[7]=e("input",{class:"form-input h-10 w-64 rounded-lg border border-gray-300 bg-gray-50 px-4",placeholder:"Search"},null,-1)),e("button",Gs,[V(_(Ps),{class:"mx-auto size-5"})]),e("button",{onClick:u,class:"h-10 px-3 rounded-lg border border-gray-300 bg-white text-red-600"}," Logout ")])]),e("div",Qs,[V(g)])])]))])}}},Zs={class:"min-h-screen"},ea={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ta={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},sa={class:"p-6 bg-white border-b border-gray-200"},aa={class:"rounded-xl bg-gray-50 p-6 border border-gray-200"},oa={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},la={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},na={class:"flex items-center justify-between text-gray-500"},ra={class:"text-gray-900 tracking-tight text-3xl font-bold"},ia={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},da={class:"flex items-center justify-between text-gray-500"},ua={class:"text-gray-900 tracking-tight text-3xl font-bold"},ca={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},pa={class:"flex items-center justify-between text-gray-500"},ma={class:"text-red-500 tracking-tight text-3xl font-bold"},ga={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},va={class:"flex items-center justify-between text-gray-500"},fa={class:"text-gray-900 tracking-tight text-3xl font-bold"},ba={__name:"Dashboard",setup(s){const t=v({vpsServers:0,websites:0,onlineWebsites:0,sslEnabled:0});return Ze(async()=>{try{const[u,m]=await Promise.all([N.get("/api/vps"),N.get("/api/websites")]),f=Array.isArray(u.data)?u.data:[],g=Array.isArray(m.data)?m.data:[];t.value.vpsServers=f.length,t.value.websites=g.length,t.value.onlineWebsites=g.filter(x=>x.status==="deployed").length,t.value.sslEnabled=g.filter(x=>x.ssl_enabled).length}catch(u){console.error("Failed to fetch stats:",u)}}),(u,m)=>(n(),p("div",Zs,[e("main",null,[e("div",ea,[e("div",ta,[e("div",sa,[m[4]||(m[4]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Tổng quan Hệ thống",-1)),e("div",aa,[e("div",oa,[e("div",la,[e("div",na,[m[0]||(m[0]=e("p",{class:"text-base font-medium text-gray-800"},"Máy chủ VPS",-1)),V(_(rs),{class:"h-6 w-6 text-gray-600"})]),e("p",ra,I(t.value.vpsServers),1)]),e("div",ia,[e("div",da,[m[1]||(m[1]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web",-1)),V(_(mt),{class:"h-6 w-6 text-gray-600"})]),e("p",ua,I(t.value.websites),1)]),e("div",ca,[e("div",pa,[m[2]||(m[2]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web trực tuyến",-1)),V(_(is),{class:"h-6 w-6 text-red-500"})]),e("p",ma,I(t.value.onlineWebsites),1)]),e("div",ga,[e("div",va,[m[3]||(m[3]=e("p",{class:"text-base font-medium text-gray-800"},"SSL được bật",-1)),V(_(xt),{class:"h-6 w-6 text-gray-600"})]),e("p",fa,I(t.value.sslEnabled),1)])])]),m[5]||(m[5]=Tt('<h2 class="text-gray-900 text-[22px] font-bold tracking-[-0.015em] pb-3 pt-10">Hoạt động gần đây</h2><div class="rounded-xl border border-gray-200 bg-white overflow-hidden"><table class="w-full"><thead><tr class="bg-gray-50"><th class="px-6 py-4 text-left text-gray-600 w-[15%] text-sm font-medium">Hoạt động</th><th class="px-6 py-4 text-left text-gray-600 w-[20%] text-sm font-medium">Người dùng</th><th class="px-6 py-4 text-left text-gray-600 w-[40%] text-sm font-medium">Đối tượng</th><th class="px-6 py-4 text-left text-gray-600 w-[25%] text-sm font-medium">Thời gian</th></tr></thead><tbody class="divide-y divide-gray-200"><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-700">Tạo</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">admin</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;web-server-01&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">5 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700">Thêm</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">hệ thống</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">trang web &#39;example.com&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">15 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-yellow-100 px-3 py-1 text-xs font-medium text-yellow-800">Khởi động lại</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">dev_user</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;db-server-02&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">1 giờ trước</td></tr></tbody></table></div>',2))])])])])]))}},ya={class:"min-h-screen bg-gray-100"},ha={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},xa={class:"px-4 py-6 sm:px-0"},wa={class:"flex justify-between items-center mb-6"},_a={class:"bg-white shadow overflow-hidden sm:rounded-md"},ka={class:"divide-y divide-gray-200"},$a={class:"flex items-center justify-between"},Sa={class:"flex-1"},Ca={class:"text-lg font-medium text-gray-900"},Ta={class:"text-sm text-gray-500"},Ea={class:"mt-2 flex items-center space-x-4 text-sm text-gray-500"},Ra={class:"flex items-center space-x-2"},Aa=["onClick"],Pa=["onClick"],La={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},Ia={class:"bg-white rounded-lg p-6 w-full max-w-md"},Da={class:"text-lg font-medium text-gray-900 mb-4"},Ma={class:"mb-4"},ja={class:"mb-4"},Ua={class:"mb-4"},Fa={class:"mb-4"},Va={class:"mb-4"},Na={class:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-2"},za={key:0,class:"mb-4"},Oa={class:"mt-1 flex gap-2"},Ba=["value"],Ha={class:"mb-4"},qa={class:"flex justify-end space-x-3"},Wa={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},Ya={key:1,class:"fixed bottom-4 right-4 z-50"},Ka={__name:"VpsManagement",setup(s){const t=v(""),r=v(""),u=v([]),m=v(!1),f=v(!1),g=v(null),x=v(""),c=v({name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:"",status:"inactive"}),o=async()=>{try{const $=await N.get("/api/vps");u.value=$.data}catch{t.value="Failed to fetch VPS servers",r.value="error"}},k=$=>{if(!$)return"";let h=String($).trim();return h=h.replace(/^https?:\/\//i,""),h=h.split("/")[0],h=h.split(":")[0],h.trim()},D=$=>{var b;const h=((b=$==null?void 0:$.target)==null?void 0:b.value)||"";h&&(c.value.ssh_key_path=h)},ee=async()=>{var $,h,b,P,T,S;try{if(c.value.ip_address=k(c.value.ip_address),c.value.ssh_key_path=(c.value.ssh_key_path||"").trim(),f.value)await N.put(`/api/vps/${g.value.id}`,c.value),t.value="VPS server updated successfully",r.value="success";else{const ce=(await N.post("/api/vps",c.value)).data;c.value.status&&c.value.status!=="inactive"&&await N.put(`/api/vps/${ce.id}`,{status:c.value.status}),t.value="VPS server created successfully",r.value="success"}z(),o()}catch(C){t.value=((h=($=C==null?void 0:C.response)==null?void 0:$.data)==null?void 0:h.message)||((P=(b=C==null?void 0:C.response)==null?void 0:b.data)==null?void 0:P.error)||((S=(T=C==null?void 0:C.response)==null?void 0:T.data)==null?void 0:S.errors)&&Object.values(C.response.data.errors).flat().join(", ")||"Failed to save VPS server",r.value="error"}},i=$=>{g.value=$,c.value={...$},f.value=!0,x.value=$.worker_key||""},te=async $=>{if(confirm(`Are you sure you want to delete ${$.name}?`))try{await N.delete(`/api/vps/${$.id}`),t.value="VPS server deleted successfully",r.value="success",o()}catch{t.value="Failed to delete VPS server",r.value="error"}},z=()=>{m.value=!1,f.value=!1,g.value=null,c.value={name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:""},x.value=""},de=()=>{x.value&&(navigator.clipboard.writeText(x.value),t.value="Worker key copied",r.value="success")};return Ze(o),($,h)=>(n(),p("div",ya,[e("div",ha,[e("div",xa,[e("div",wa,[h[8]||(h[8]=e("h1",{class:"text-3xl font-bold text-gray-900"},"VPS Servers",-1)),e("button",{onClick:h[0]||(h[0]=b=>m.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Add VPS Server ")]),e("div",_a,[e("ul",ka,[(n(!0),p(he,null,we(u.value,b=>(n(),p("li",{key:b.id,class:"px-6 py-4"},[e("div",$a,[e("div",Sa,[e("h3",Ca,I(b.name),1),e("p",Ta,I(b.ip_address),1),e("div",Ea,[e("span",null,"SSH Port: "+I(b.ssh_port),1),e("span",null,"User: "+I(b.ssh_user),1),e("span",null,"Websites: "+I(b.websites_count),1)])]),e("div",Ra,[e("span",{class:De(["inline-flex items-center gap-1",{"text-green-600":b.status==="active","text-red-600":b.status==="inactive","text-yellow-600":b.status==="error"}])},[b.status==="active"?(n(),ie(_(St),{key:0,class:"size-4"})):b.status==="error"?(n(),ie(_(Ct),{key:1,class:"size-4"})):(n(),ie(_(Pt),{key:2,class:"size-4"})),$e(" "+I(b.status),1)],2),e("button",{onClick:P=>i(b),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},[V(_(us),{class:"size-4"})],8,Aa),e("button",{onClick:P=>te(b),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50",title:"Delete"},[V(_(gt),{class:"size-4"})],8,Pa)])])]))),128))])])])]),m.value||f.value?(n(),p("div",La,[e("div",Ia,[e("h2",Da,I(f.value?"Edit VPS Server":"Add VPS Server"),1),e("form",{onSubmit:ze(ee,["prevent"])},[e("div",Ma,[h[9]||(h[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),U(e("input",{"onUpdate:modelValue":h[1]||(h[1]=b=>c.value.name=b),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,c.value.name]])]),e("div",ja,[h[10]||(h[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"IP Address / Hostname",-1)),U(e("input",{"onUpdate:modelValue":h[2]||(h[2]=b=>c.value.ip_address=b),type:"text",required:"",placeholder:"e.g. 203.0.113.10 or worker.example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,c.value.ip_address]])]),e("div",Ua,[h[11]||(h[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH User",-1)),U(e("input",{"onUpdate:modelValue":h[3]||(h[3]=b=>c.value.ssh_user=b),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,c.value.ssh_user]])]),e("div",Fa,[h[12]||(h[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Port",-1)),U(e("input",{"onUpdate:modelValue":h[4]||(h[4]=b=>c.value.ssh_port=b),type:"number",required:"",min:"1",max:"65535",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,c.value.ssh_port,void 0,{number:!0}]])]),e("div",Va,[h[14]||(h[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Key Path",-1)),e("div",Na,[U(e("input",{"onUpdate:modelValue":h[5]||(h[5]=b=>c.value.ssh_key_path=b),type:"text",placeholder:"/path/to/ssh/key",class:"block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,c.value.ssh_key_path]]),e("select",{onChange:h[6]||(h[6]=b=>D(b)),class:"block w-full border-gray-300 rounded-md shadow-sm"},[...h[13]||(h[13]=[Tt('<option value="">Chọn nhanh đường dẫn</option><option value="/root/.ssh/id_rsa">/root/.ssh/id_rsa</option><option value="/root/.ssh/id_ed25519">/root/.ssh/id_ed25519</option><option value="/home/ubuntu/.ssh/id_rsa">/home/ubuntu/.ssh/id_rsa</option><option value="/home/ubuntu/.ssh/id_ed25519">/home/ubuntu/.ssh/id_ed25519</option><option value="/home/ec2-user/.ssh/id_rsa">/home/ec2-user/.ssh/id_rsa</option><option value="/home/ec2-user/.ssh/id_ed25519">/home/ec2-user/.ssh/id_ed25519</option><option value="/home/admin/.ssh/id_rsa">/home/admin/.ssh/id_rsa</option><option value="/home/admin/.ssh/id_ed25519">/home/admin/.ssh/id_ed25519</option>',9)])],32)])]),f.value?(n(),p("div",za,[h[15]||(h[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Worker Key",-1)),e("div",Oa,[e("input",{value:x.value,readonly:"",class:"flex-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Ba),e("button",{type:"button",onClick:de,class:"px-3 py-2 rounded-md border border-gray-300 bg-gray-50"},"Copy")])])):Z("",!0),e("div",Ha,[h[17]||(h[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),U(e("select",{"onUpdate:modelValue":h[7]||(h[7]=b=>c.value.status=b),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...h[16]||(h[16]=[e("option",{value:"active"},"active",-1),e("option",{value:"inactive"},"inactive",-1),e("option",{value:"error"},"error",-1)])],512),[[Je,c.value.status]])]),e("div",qa,[e("button",{type:"button",onClick:z,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",Wa,I(f.value?"Update":"Create"),1)])],32)])])):Z("",!0),t.value?(n(),p("div",Ya,[e("div",{class:De([r.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},I(t.value),3)])):Z("",!0)]))}},Xa={class:"min-h-screen bg-gray-100"},Ga={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Qa={class:"px-4 py-6 sm:px-0"},Ja={key:0,class:"mb-4"},Za={class:"flex justify-between items-center mb-6"},eo={class:"bg-white shadow sm:rounded-md"},to={class:"divide-y divide-gray-200"},so={class:"flex items-center justify-between"},ao={class:"flex-1"},oo={class:"flex items-center"},lo={class:"text-lg font-medium text-gray-900"},no={class:"text-sm text-gray-500 mt-1"},ro={class:"mt-2 flex items-center space-x-4 text-sm"},io=["title"],uo={class:"flex items-center space-x-2"},co=["href"],po=["href"],mo=["onClick","disabled"],go=["onClick","disabled"],vo=["onClick","disabled"],fo={key:2,class:"relative redeploy-dropdown-container"},bo=["onClick","disabled"],yo={key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50"},ho={class:"py-1"},xo=["onClick"],wo=["onClick"],_o=["onClick"],ko=["onClick","disabled"],$o={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},So={class:"bg-white rounded-lg p-6 w-full max-w-md"},Co={key:0,class:"mb-4 text-sm text-red-600"},To={class:"mb-4"},Eo={class:"mb-4"},Ro={class:"mb-4"},Ao=["value"],Po={key:0,class:"mb-4"},Lo={key:1,class:"mb-4"},Io={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Do={class:"bg-white rounded-lg p-6 w-full max-w-md"},Mo={class:"mb-4"},jo={class:"space-y-2"},Uo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Fo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Vo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},No={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},zo={class:"flex justify-end space-x-3"},Oo=["disabled"],Bo={key:2,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Ho={class:"bg-white rounded-lg p-6 w-full max-w-md"},qo={class:"mb-4"},Wo={class:"space-y-2"},Yo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Ko={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Xo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Go={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Qo={class:"flex justify-end space-x-3"},Jo=["disabled"],Zo={key:0,class:"fixed bottom-4 right-4 z-50"},el={__name:"WebsiteManagement",setup(s){const t=v([]),r=v([]),u=v(!1);v(!1),v(!1),v(!1),v(null),v([]),v(null);const m=v(""),f=v(""),g=v(""),x=v(""),c=v({});let o=null;v(!1);const k=v([]),D=v([]),ee=v([]),i=v([]),te=v({}),z=v([]),de=v(!1),$=v(!1),h=v(null),b=v({template_names:["all"]}),P=v({template_names:["all"]}),T=(A,y="success")=>{g.value=A,x.value=y,setTimeout(()=>{g.value=""},3e3)},S=v({domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",wordpress_template:"basic"});v({path:"",filename:"",title:"",content:""});const C=async()=>{try{const y=(await N.get("/api/websites")).data;y.forEach(oe=>{const se=c.value[oe.id];se&&se!==oe.status&&(oe.status==="deployed"?T(`${oe.domain} deployed`,"success"):oe.status==="error"&&T(`${oe.domain} deploy failed`,"error")),c.value[oe.id]=oe.status});const Y=new Set(y.map(oe=>oe.domain)),X=oe=>{for(const se of Y)if(se!==oe&&oe.endsWith("."+se))return!0;return!1};t.value=y.filter(oe=>!X(oe.domain))}catch{T("Failed to fetch websites","error")}},ce=async()=>{try{const A=await N.get("/api/vps");r.value=A.data.filter(y=>y.status==="active")}catch{}},J=async()=>{var A,y,Y,X;try{await N.post("/api/websites",S.value),T("Website created","success"),m.value="Website created",f.value="success",Ce(),await C()}catch(oe){const se=((y=(A=oe==null?void 0:oe.response)==null?void 0:A.data)==null?void 0:y.message)||((X=(Y=oe==null?void 0:oe.response)==null?void 0:Y.data)==null?void 0:X.error)||"Failed to create website";T(se,"error"),m.value=se,f.value="error"}},W=async A=>{var y,Y,X,oe;try{A.status="deploying",k.value=[...k.value,A.id],await N.post(`/api/websites/${A.id}/deploy`),T("Deployment started","success"),m.value="Deployment started",f.value="success",await C()}catch(se){const Ue=((Y=(y=se==null?void 0:se.response)==null?void 0:y.data)==null?void 0:Y.message)||((oe=(X=se==null?void 0:se.response)==null?void 0:X.data)==null?void 0:oe.error)||"Failed to deploy website";T(Ue,"error"),m.value=Ue,f.value="error",await C()}finally{k.value=k.value.filter(se=>se!==A.id)}},xe=async A=>{var y,Y,X,oe;try{D.value=[...D.value,A.id],await N.post(`/api/websites/${A.id}/ssl`),T("SSL generation started","success"),m.value="SSL generation started",f.value="success",await C()}catch(se){const Ue=((Y=(y=se==null?void 0:se.response)==null?void 0:y.data)==null?void 0:Y.message)||((oe=(X=se==null?void 0:se.response)==null?void 0:X.data)==null?void 0:oe.error)||"Failed to enable SSL";T(Ue,"error"),m.value=Ue,f.value="error"}finally{D.value=D.value.filter(se=>se!==A.id)}},Se=async A=>{var y,Y,X,oe;if(confirm(`Are you sure you want to delete ${A.domain}?`))try{i.value=[...i.value,A.id],await N.delete(`/api/websites/${A.id}`),T("Website deleted","success"),await C()}catch(se){const Ue=((Y=(y=se==null?void 0:se.response)==null?void 0:y.data)==null?void 0:Y.message)||((oe=(X=se==null?void 0:se.response)==null?void 0:X.data)==null?void 0:oe.error)||"Failed to delete website";T(Ue,"error")}finally{i.value=i.value.filter(se=>se!==A.id)}},fe=async A=>{var y,Y,X,oe;try{ee.value=[...ee.value,A.id],await N.post(`/api/websites/${A.id}/deactivate`),T("Website deactivated","success"),m.value="Website deactivated",f.value="success",C()}catch(se){const Ue=((Y=(y=se==null?void 0:se.response)==null?void 0:y.data)==null?void 0:Y.message)||((oe=(X=se==null?void 0:se.response)==null?void 0:X.data)==null?void 0:oe.error)||"Failed to deactivate website";T(Ue,"error"),m.value=Ue,f.value="error"}finally{ee.value=ee.value.filter(se=>se!==A.id)}};v([]);const Ce=()=>{u.value=!1,S.value={domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",wordpress_template:"basic"}};Ze(()=>{C(),ce(),o=setInterval(C,3e3),document.addEventListener("click",A=>{A.target.closest(".redeploy-dropdown-container")||(te.value={})})}),Bt(()=>{o&&clearInterval(o)});const Me=A=>{const y=`/preview/${A.id}`,Y=localStorage.getItem("adminToken")||"",X=new URLSearchParams;Y&&X.set("token",Y),X.set("hide_preview_bar","1");const oe=X.toString();return oe?`${y}?${oe}`:y},Fe=A=>{te.value={...te.value,[A]:!te.value[A]}},je=async A=>{var y,Y;try{z.value=[...z.value,A.id],te.value[A.id]=!1;const X=await N.post(`/api/websites/${A.id}/redeploy-pages`);T(X.data.message||"Pages redeployed successfully","success")}catch(X){const oe=((Y=(y=X==null?void 0:X.response)==null?void 0:y.data)==null?void 0:Y.message)||"Failed to redeploy pages";T(oe,"error")}finally{z.value=z.value.filter(X=>X!==A.id)}},He=A=>{h.value=A,te.value[A.id]=!1,de.value=!0},re=A=>{h.value=A,te.value[A.id]=!1,$.value=!0},le=async()=>{var A,y;if(h.value)try{z.value=[...z.value,h.value.id];const Y=await N.post(`/api/websites/${h.value.id}/redeploy-template-assets`,b.value);T(Y.data.message||"Template assets deployed","success"),de.value=!1}catch(Y){const X=((y=(A=Y==null?void 0:Y.response)==null?void 0:A.data)==null?void 0:y.message)||"Failed to deploy template assets";T(X,"error")}finally{z.value=z.value.filter(Y=>Y!==h.value.id)}},w=async()=>{var A,y;if(h.value)try{z.value=[...z.value,h.value.id];const Y={template_names:(P.value.template_names||[]).length===0?[]:P.value.template_names},X=await N.post(`/api/websites/${h.value.id}/update-pages-template`,Y);T(X.data.message||"Header/footer updated","success"),$.value=!1}catch(Y){const X=((y=(A=Y==null?void 0:Y.response)==null?void 0:A.data)==null?void 0:y.message)||"Failed to update header/footer";T(X,"error")}finally{z.value=z.value.filter(Y=>Y!==h.value.id)}},K=A=>{const y=b.value.template_names||[];y.indexOf(A)===-1?b.value.template_names=[...y,A]:b.value.template_names=y.filter(X=>X!==A),console.log("Redeploy templates:",b.value.template_names)},E=A=>{const y=P.value.template_names||[];y.indexOf(A)===-1?P.value.template_names=[...y,A]:P.value.template_names=y.filter(X=>X!==A),console.log("Update templates:",P.value.template_names)},O=A=>(b.value.template_names||[]).includes(A),ne=A=>(P.value.template_names||[]).includes(A),Ae=()=>{de.value=!1,h.value=null,b.value={template_names:["all"]}},ge=()=>{$.value=!1,h.value=null,P.value={template_names:["all"]}};return(A,y)=>{var X,oe,se,Ue;const Y=nt("router-link");return n(),p(he,null,[e("div",Xa,[e("div",Ga,[e("div",Qa,[m.value?(n(),p("div",Ja,[e("div",{class:De([f.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},I(m.value),3)])):Z("",!0),e("div",Za,[y[14]||(y[14]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Websites",-1)),e("button",{onClick:y[0]||(y[0]=L=>u.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Create Website ")]),e("div",eo,[e("ul",to,[(n(!0),p(he,null,we(t.value,L=>{var Ee;return n(),p("li",{key:L.id,class:"px-6 py-4 relative overflow-visible"},[e("div",so,[e("div",ao,[e("div",oo,[e("h3",lo,I(L.domain),1),e("span",{class:De([{"bg-blue-100 text-blue-800":L.type==="html","bg-green-100 text-green-800":L.type==="wordpress","bg-purple-100 text-purple-800":L.type==="laravel1"},"ml-2 px-2 py-1 text-xs font-medium rounded-full"])},I(L.type),3)]),e("p",no," VPS: "+I(((Ee=L.vps_server)==null?void 0:Ee.name)||"N/A"),1),e("div",ro,[e("span",{class:De(["inline-flex items-center",{"text-blue-600":L.status==="deploying","text-green-600":L.status==="deployed","text-gray-600":L.status==="pending"||L.status==="draft","text-orange-600":L.status==="suspended","text-red-600":L.status==="error"}]),title:L.status},[L.status==="deploying"?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):L.status==="deployed"?(n(),ie(_(St),{key:1,class:"size-4"})):L.status==="pending"||L.status==="draft"?(n(),ie(_(Pt),{key:2,class:"size-4"})):L.status==="suspended"?(n(),ie(_(Lt),{key:3,class:"size-4"})):(n(),ie(_(Ct),{key:4,class:"size-4"}))],10,io),e("span",{class:De(["inline-flex items-center gap-1",L.ssl_enabled?"text-green-600":"text-gray-400"])},[L.ssl_enabled?(n(),ie(_(xt),{key:0,class:"size-4"})):(n(),ie(_(cs),{key:1,class:"size-4"}))],2)])]),e("div",uo,[e("a",{href:(L.ssl_enabled?"https://":"http://")+L.domain,target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Website"},[V(_(mt),{class:"size-4"})],8,co),V(Y,{to:`/websites/${L.id}/pages`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:ke(()=>[V(_(ps),{class:"size-4"})]),_:1},8,["to"]),V(Y,{to:`/websites/${L.id}/folders`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-amber-600 hover:bg-gray-50",title:"Manage Categories"},{default:ke(()=>[V(_(Ls),{class:"size-4"})]),_:1},8,["to"]),V(Y,{to:`/websites/${L.id}/subdomains`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"Manage Subdomains"},{default:ke(()=>[V(_(ns),{class:"size-4"})]),_:1},8,["to"]),V(Y,{to:`/websites/${L.id}/settings`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Website Settings"},{default:ke(()=>[V(_(ds),{class:"size-4"})]),_:1},8,["to"]),e("a",{href:Me(L),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[V(_(Pt),{class:"size-4"})],8,po),e("button",{onClick:Ve=>W(L),disabled:L.status==="deploying"||L.status==="deployed"||k.value.includes(L.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[k.value.includes(L.id)?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):(n(),ie(_(ms),{key:1,class:"size-4"}))],8,mo),L.status==="deployed"?(n(),p("button",{key:0,onClick:Ve=>xe(L),disabled:D.value.includes(L.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[D.value.includes(L.id)?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):(n(),ie(_(xt),{key:1,class:"size-4"}))],8,go)):Z("",!0),L.status==="deployed"||L.status==="error"?(n(),p("button",{key:1,onClick:Ve=>fe(L),disabled:ee.value.includes(L.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[ee.value.includes(L.id)?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):(n(),ie(_(Lt),{key:1,class:"size-4"}))],8,vo)):Z("",!0),L.status==="deployed"&&L.type==="laravel1"?(n(),p("div",fo,[e("button",{onClick:Ve=>Fe(L.id),disabled:z.value.includes(L.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-teal-600 hover:bg-gray-50 disabled:text-gray-400",title:"Redeploy Options"},[z.value.includes(L.id)?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):(n(),ie(_(Is),{key:1,class:"size-4"}))],8,bo),te.value[L.id]?(n(),p("div",yo,[e("div",ho,[e("button",{onClick:Ve=>je(L),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy All Pages ",8,xo),e("button",{onClick:Ve=>He(L),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy Template Assets ",8,wo),e("button",{onClick:Ve=>re(L),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Update Pages Template ",8,_o)])])):Z("",!0)])):Z("",!0),e("button",{onClick:Ve=>Se(L),disabled:i.value.includes(L.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[i.value.includes(L.id)?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):(n(),ie(_(gt),{key:1,class:"size-4"}))],8,ko)])])])}),128))])])])]),u.value?(n(),p("div",$o,[e("div",So,[y[26]||(y[26]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create Website",-1)),r.value.length===0?(n(),p("div",Co,"Chưa có VPS ở trạng thái active. Vào mục Servers để đặt trạng thái active cho VPS hiện tại.")):Z("",!0),e("form",{onSubmit:ze(J,["prevent"])},[e("div",To,[y[15]||(y[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Domain",-1)),U(e("input",{"onUpdate:modelValue":y[1]||(y[1]=L=>S.value.domain=L),type:"text",required:"",placeholder:"example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,S.value.domain]])]),e("div",Eo,[y[17]||(y[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Type",-1)),U(e("select",{"onUpdate:modelValue":y[2]||(y[2]=L=>S.value.type=L),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...y[16]||(y[16]=[e("option",{value:"html"},"HTML Website",-1),e("option",{value:"wordpress"},"WordPress",-1),e("option",{value:"laravel1"},"Laravel 1",-1)])],512),[[Je,S.value.type]])]),e("div",Ro,[y[19]||(y[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),U(e("select",{"onUpdate:modelValue":y[3]||(y[3]=L=>S.value.vps_server_id=L),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[y[18]||(y[18]=e("option",{value:""},"Select VPS Server",-1)),(n(!0),p(he,null,we(r.value,L=>(n(),p("option",{key:L.id,value:L.id},I(L.name)+" ("+I(L.ip_address)+") ",9,Ao))),128))],512),[[Je,S.value.vps_server_id]])]),S.value.type==="wordpress"?(n(),p("div",Po,[y[21]||(y[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"WordPress Template",-1)),U(e("select",{"onUpdate:modelValue":y[4]||(y[4]=L=>S.value.wordpress_template=L),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...y[20]||(y[20]=[e("option",{value:"basic"},"Basic WordPress",-1),e("option",{value:"business"},"Business Theme",-1),e("option",{value:"ecommerce"},"E-commerce Theme",-1)])],512),[[Je,S.value.wordpress_template]])])):Z("",!0),S.value.type==="laravel1"?(n(),p("div",Lo,[y[23]||(y[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template Package",-1)),U(e("select",{"onUpdate:modelValue":y[5]||(y[5]=L=>S.value.template_package=L),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...y[22]||(y[22]=[e("option",{value:"laravel-hotel-1"},"Hotel Template",-1)])],512),[[Je,S.value.template_package]]),y[24]||(y[24]=e("p",{class:"mt-1 text-xs text-gray-500"},"Includes home, listing, and detail pages with shared assets",-1))])):Z("",!0),e("div",{class:"flex justify-end space-x-3"},[e("button",{type:"button",onClick:Ce,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),y[25]||(y[25]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Create ",-1))])],32)])])):Z("",!0),de.value?(n(),p("div",Io,[e("div",Do,[y[33]||(y[33]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Redeploy Template Assets",-1)),e("div",Mo,[y[31]||(y[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",jo,[e("div",{class:"flex items-center cursor-pointer",onClick:y[6]||(y[6]=L=>K("all"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:O("all")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[O("all")?(n(),p("span",Uo,"✓")):Z("",!0)],4),y[27]||(y[27]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:y[7]||(y[7]=L=>K("home"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:O("home")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[O("home")?(n(),p("span",Fo,"✓")):Z("",!0)],4),y[28]||(y[28]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:y[8]||(y[8]=L=>K("listing"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:O("listing")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[O("listing")?(n(),p("span",Vo,"✓")):Z("",!0)],4),y[29]||(y[29]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:y[9]||(y[9]=L=>K("detail"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:O("detail")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[O("detail")?(n(),p("span",No,"✓")):Z("",!0)],4),y[30]||(y[30]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),y[34]||(y[34]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-blue-800"}," Deploys CSS/JS files from the selected templates to all pages. Use this when you update template scripts or styles. ")],-1)),e("div",zo,[e("button",{type:"button",onClick:Ae,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:le,disabled:z.value.includes((X=h.value)==null?void 0:X.id),class:"px-3 py-2 bg-teal-600 text-white text-sm rounded-md hover:bg-teal-700 disabled:opacity-50 flex items-center gap-2"},[z.value.includes((oe=h.value)==null?void 0:oe.id)?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):Z("",!0),y[32]||(y[32]=$e(" Deploy Assets ",-1))],8,Oo)])])])):Z("",!0),$.value?(n(),p("div",Bo,[e("div",Ho,[y[41]||(y[41]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Update Pages Template",-1)),e("div",qo,[y[39]||(y[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",Wo,[e("div",{class:"flex items-center cursor-pointer",onClick:y[10]||(y[10]=L=>E("all"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:ne("all")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[ne("all")?(n(),p("span",Yo,"✓")):Z("",!0)],4),y[35]||(y[35]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:y[11]||(y[11]=L=>E("home"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:ne("home")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[ne("home")?(n(),p("span",Ko,"✓")):Z("",!0)],4),y[36]||(y[36]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:y[12]||(y[12]=L=>E("listing"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:ne("listing")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[ne("listing")?(n(),p("span",Xo,"✓")):Z("",!0)],4),y[37]||(y[37]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:y[13]||(y[13]=L=>E("detail"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:ne("detail")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[ne("detail")?(n(),p("span",Go,"✓")):Z("",!0)],4),y[38]||(y[38]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),y[42]||(y[42]=e("div",{class:"bg-purple-50 border border-purple-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-purple-800"},[$e(" Cập nhật phần header/footer cho "),e("strong",null,"các trang đang dùng template đã chọn"),$e(", sau đó tự động deploy các trang đó. Tính năng này "),e("strong",null,"không"),$e(' cập nhật CSS/JS (dùng mục "Redeploy Template Assets" cho CSS/JS). Với website chính, hệ thống sẽ xếp lịch redeploy Trang chủ và các trang Category liên quan. ')])],-1)),e("div",Qo,[e("button",{type:"button",onClick:ge,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:w,disabled:z.value.includes((se=h.value)==null?void 0:se.id),class:"px-3 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2"},[z.value.includes((Ue=h.value)==null?void 0:Ue.id)?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):Z("",!0),y[40]||(y[40]=$e(" Update header/footer ",-1))],8,Jo)])])])):Z("",!0)]),g.value?(n(),p("div",Zo,[e("div",{class:De([x.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},I(g.value),3)])):Z("",!0)],64)}}},tl={class:"min-h-screen bg-gray-100"},sl={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},al={class:"px-4 py-6 sm:px-0"},ol={class:"flex items-center justify-between mb-6"},ll={class:"text-3xl font-bold text-gray-900"},nl={key:0,class:"ml-2 text-lg text-gray-500"},rl={key:0,class:"mb-4"},il={key:1,class:"text-gray-600"},dl={key:2,class:"mb-4"},ul={class:"inline-flex rounded-md shadow-sm",role:"group"},cl={key:3,class:"bg-white shadow sm:rounded-md p-6 space-y-6"},pl={key:0,class:"space-y-6"},ml={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},gl={class:"mt-2 flex items-center gap-4"},vl={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},fl=["src"],bl={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},yl={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},hl={class:"mt-2 flex items-center gap-4"},xl={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},wl=["src"],_l={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},kl={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},$l={class:"mt-2 flex items-center gap-4"},Sl={class:"h-10 w-10 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},Cl=["src"],Tl={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},El={key:0,class:"text-xs text-gray-500 truncate max-w-[220px]"},Rl={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Al={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Pl={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Ll={key:1,class:"space-y-6"},Il={class:"flex items-center justify-between mb-4"},Dl={class:"space-y-2"},Ml={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},jl=["onDragstart","onDrop"],Ul={class:"p-4"},Fl={class:"flex items-start justify-between gap-4"},Vl={class:"flex items-start gap-3 flex-1 min-w-0"},Nl={class:"flex-1 min-w-0 space-y-2"},zl={class:"flex items-center gap-2"},Ol=["onUpdate:modelValue"],Bl=["onUpdate:modelValue"],Hl={class:"flex items-center gap-2 flex-shrink-0"},ql=["onClick"],Wl=["onClick"],Yl={key:0,class:"mt-4 ml-8 space-y-2 pt-3 border-t border-gray-100"},Kl=["onDragstart","onDrop"],Xl={class:"flex-1 min-w-0 space-y-1"},Gl=["onUpdate:modelValue"],Ql=["onUpdate:modelValue"],Jl=["onClick"],Zl={class:"flex items-center justify-between mb-4"},en={class:"space-y-3"},tn={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},sn=["onDragstart","onDrop"],an={class:"p-4"},on={class:"flex items-start justify-between gap-4 mb-3"},ln={class:"flex items-start gap-3 flex-1 min-w-0"},nn={class:"flex-1 min-w-0"},rn=["onUpdate:modelValue","placeholder"],dn={class:"flex items-center gap-2 flex-shrink-0"},un=["onClick"],cn=["onClick"],pn={key:0,class:"ml-8 space-y-2 pt-3 border-t border-gray-100"},mn=["onDragstart","onDrop"],gn={class:"flex-1 min-w-0 space-y-1"},vn=["onUpdate:modelValue"],fn=["onUpdate:modelValue"],bn=["onClick"],yn={key:1,class:"ml-8 pt-3 border-t border-gray-100"},hn={class:"flex justify-end space-x-3"},xn=["disabled"],wn={key:0,class:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4"},_n={key:1},kn={class:"px-6 py-4 space-y-4"},$n=["value"],Sn={class:"pt-3 border-t border-gray-200"},Cn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},Tn={class:"px-6 py-4 border-b border-gray-200"},En={class:"text-sm text-gray-500 mt-1"},Rn={class:"px-6 py-4 space-y-4"},An=["value"],Pn={class:"pt-3 border-t border-gray-200"},Ln={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},In={class:"px-6 py-4 space-y-4"},Dn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},Mn={class:"px-6 py-4 border-b border-gray-200"},jn={class:"text-sm text-gray-500 mt-1"},Un={class:"px-6 py-4 space-y-4"},Fn=["value"],Vn={class:"pt-3 border-t border-gray-200"},Nn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},zn={__name:"WebsiteSettings",setup(s){const r=ct().params.websiteId,u=v(null),m=v(!0),f=v(!1),g=v(""),x=v(""),c=v("general"),o=v({title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}),k=v(null),D=v(null),ee=v(null),i=v(null),te=v(null),z=v(null),de=Be(()=>(o.value.custom_head_html||"").split(`
`).length||1),$=Be(()=>(o.value.custom_body_html||"").split(`
`).length||1),h=Be(()=>(o.value.custom_footer_html||"").split(`
`).length||1),b=F=>{F==="head"&&k.value&&i.value&&(k.value.scrollTop=i.value.scrollTop),F==="body"&&D.value&&te.value&&(D.value.scrollTop=te.value.scrollTop),F==="footer"&&ee.value&&z.value&&(ee.value.scrollTop=z.value.scrollTop)},P=async()=>{try{const F=await N.get(`/api/websites/${r}`);u.value=F.data}catch{}},T=async()=>{var F,l;try{const ye=(await N.get(`/api/websites/${r}/settings`)).data||{};o.value={title:ye.title||"",logo_header_url:ye.logo_header_url||"",logo_footer_url:ye.logo_footer_url||"",favicon_url:ye.favicon_url||"",custom_head_html:ye.custom_head_html||"",custom_body_html:ye.custom_body_html||"",custom_footer_html:ye.custom_footer_html||"",menu:Array.isArray(ye.menu)?ye.menu:[],footer_links_html:ye.footer_links_html||""},W.value=Array.isArray(ye.menu)?ye.menu:[],Array.isArray(ye.footer_columns)?Ee.value=ye.footer_columns:Ee.value=[]}catch(be){g.value=((l=(F=be==null?void 0:be.response)==null?void 0:F.data)==null?void 0:l.error)||"Failed to load settings",x.value="error"}},S=async()=>{var F,l,be,ye;f.value=!0,g.value="";try{o.value.footer_links_html=Mt(),o.value.footer_columns=Ee.value,await N.put(`/api/websites/${r}/settings`,o.value),g.value="Updated settings",x.value="success"}catch(Re){g.value=((l=(F=Re==null?void 0:Re.response)==null?void 0:F.data)==null?void 0:l.message)||((ye=(be=Re==null?void 0:Re.response)==null?void 0:be.data)==null?void 0:ye.error)||(Re==null?void 0:Re.message)||"Failed to update settings",x.value="error"}finally{f.value=!1}},C=()=>{o.value={title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}},ce=async(F,l)=>{var Re,R,Ie,q;const be=((Re=F==null?void 0:F.target)==null?void 0:Re.files)||[];if(!be.length)return;const ye=new FormData;ye.append("file",be[0]);try{let ue=`/api/websites/${r}/assets/${l}`;const pe=await N.post(ue,ye,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},timeout:6e4}),Ke=((R=pe==null?void 0:pe.data)==null?void 0:R.url)||"";l==="logo-header"?o.value.logo_header_url=Ke:l==="logo-footer"?o.value.logo_footer_url=Ke:l==="favicon"&&(o.value.favicon_url=Ke),g.value="Uploaded "+l,x.value="success"}catch(ue){const pe=((q=(Ie=ue==null?void 0:ue.response)==null?void 0:Ie.data)==null?void 0:q.error)||(ue==null?void 0:ue.message)||"Upload failed";g.value=pe,x.value="error"}finally{F.target.value=""}};Ze(async()=>{await Promise.all([P(),T(),le()]),W.value=Array.isArray(o.value.menu)?[...o.value.menu]:[],Ee.value.length||updateFooterColumnCount(),m.value=!1});const J=v([]),W=v([]),xe=v(!1),Se=v(!1),fe=v(-1),Ce=v(""),Me=v(""),Fe=v(""),je=v(""),He=v(""),re=v(""),le=async()=>{try{const F=await N.get(`/api/websites/${r}/folders`);J.value=F.data||[]}catch{}},w=F=>`/${(F==null?void 0:F.slug)||""}`,K=()=>{if(Ce.value){const F=J.value.find(l=>String(l.id)===String(Ce.value));F&&(Me.value=F.name,Fe.value=w(F))}},E=()=>{if(je.value){const F=J.value.find(l=>String(l.id)===String(je.value));F&&(He.value=F.name,re.value=w(F))}};kt(Ce,K),kt(je,E);const O=()=>{if(!Me.value||!Fe.value){g.value="Vui lòng điền đầy đủ thông tin",x.value="error";return}W.value.push({label:Me.value,url:Fe.value,children:[]}),o.value.menu=W.value,Ce.value="",Me.value="",Fe.value="",xe.value=!1,g.value="Đã thêm menu",x.value="success"},ne=F=>{fe.value=F,Se.value=!0},Ae=()=>{if(!He.value||!re.value){g.value="Vui lòng điền đầy đủ thông tin",x.value="error";return}const F=W.value[fe.value];F&&(F.children=F.children||[],F.children.push({label:He.value,url:re.value}),o.value.menu=W.value,je.value="",He.value="",re.value="",Se.value=!1,g.value="Đã thêm menu con",x.value="success")},ge=()=>{o.value.menu=W.value},A=F=>{W.value.splice(F,1),o.value.menu=W.value},y=(F,l)=>{const be=W.value[F];be&&(be.children.splice(l,1),o.value.menu=W.value)};let Y=-1,X={parent:-1,index:-1};const oe=F=>{Y=F},se=F=>{if(Y===-1||F===Y)return;const l=W.value,[be]=l.splice(Y,1);l.splice(F,0,be),Y=-1,o.value.menu=l},Ue=(F,l)=>{X={parent:F,index:l}},L=(F,l)=>{if(X.parent!==F)return;const be=W.value[F].children||[],ye=X.index;if(ye===l||ye<0)return;const[Re]=be.splice(ye,1);be.splice(l,0,Re),X={parent:-1,index:-1},o.value.menu=W.value},Ee=v([]),Ve=v(!1),M=v(!1),a=v(-1),j=v(""),H=v(""),d=v(""),G=v("");kt(H,()=>{if(H.value){const F=J.value.find(l=>String(l.id)===String(H.value));F&&(d.value=F.name,G.value=w(F))}});const Ne=()=>{Ee.value.push({title:j.value||"",links:[]}),j.value="",Ve.value=!1,g.value="Đã thêm cột footer",x.value="success"},ae=F=>{a.value=F,M.value=!0},Pe=()=>{if(!d.value||!G.value){g.value="Vui lòng điền đầy đủ thông tin",x.value="error";return}const F=Ee.value[a.value];F&&(F.links.push({label:d.value,url:G.value}),H.value="",d.value="",G.value="",M.value=!1,g.value="Đã thêm liên kết footer",x.value="success")},Te=F=>{Ee.value.splice(F,1)},We=()=>{},et=(F,l)=>{const be=Ee.value[F];be&&be.links.splice(l,1)};let tt=-1;const vt=F=>{tt=F},qe=F=>{if(tt===-1||F===tt)return;const l=Ee.value,[be]=l.splice(tt,1);l.splice(F,0,be),tt=-1};let Ye={column:-1,index:-1};const ft=(F,l)=>{Ye={column:F,index:l}},rt=(F,l)=>{if(Ye.column!==F)return;const be=Ee.value[F].links||[],ye=Ye.index;if(ye===l||ye<0)return;const[Re]=be.splice(ye,1);be.splice(l,0,Re),Ye={column:-1,index:-1}},Mt=()=>{const F=Ee.value;if(!F.length)return"";let l='<div class="grid grid-cols-'+F.length+' gap-6">';for(const be of F){l+="<div>",be.title&&(l+='<div class="font-medium mb-2">'+be.title+"</div>"),l+='<ul class="space-y-1">';const ye=be.links||[];for(const Re of ye)l+='<li><a href="'+(Re.url||"#")+'" class="text-gray-600 hover:text-gray-900">'+(Re.label||"")+"</a></li>";l+="</ul>",l+="</div>"}return l+="</div>",l};return(F,l)=>{var ye,Re;const be=nt("router-link");return n(),p("div",tl,[e("div",sl,[e("div",al,[e("div",ol,[e("h1",ll,[l[40]||(l[40]=$e(" Website Settings ",-1)),u.value?(n(),p("span",nl,I(u.value.domain),1)):Z("",!0)]),V(be,{to:"/websites",class:"px-3 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:ke(()=>[...l[41]||(l[41]=[$e("Back",-1)])]),_:1})]),g.value?(n(),p("div",rl,[e("div",{class:De([x.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},I(g.value),3)])):Z("",!0),m.value?(n(),p("div",il,"Loading...")):(n(),p("div",dl,[e("div",ul,[e("button",{type:"button",onClick:l[0]||(l[0]=R=>c.value="general"),class:De([c.value==="general"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-l-md hover:bg-gray-50"])},"Cài đặt chung",2),e("button",{type:"button",onClick:l[1]||(l[1]=R=>c.value="navigation"),class:De([c.value==="navigation"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-r-md hover:bg-gray-50"])},"Menu Header & Footer",2)])])),m.value?Z("",!0):(n(),p("div",cl,[c.value==="general"?(n(),p("div",pl,[e("div",null,[l[42]||(l[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề",-1)),U(e("input",{"onUpdate:modelValue":l[2]||(l[2]=R=>o.value.title=R),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Website title"},null,512),[[Q,o.value.title]])]),e("div",ml,[e("div",null,[l[44]||(l[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Header",-1)),e("div",gl,[e("div",vl,[o.value.logo_header_url?(n(),p("img",{key:0,src:o.value.logo_header_url,class:"object-contain h-full w-full"},null,8,fl)):(n(),ie(_(jt),{key:1,class:"size-6 text-gray-400"}))]),e("label",bl,[V(_(Ut),{class:"size-4 mr-2"}),l[43]||(l[43]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:l[3]||(l[3]=R=>ce(R,"logo-header")),class:"hidden"},null,32)]),o.value.logo_header_url?(n(),p("span",yl,I(o.value.logo_header_url),1)):Z("",!0)])]),e("div",null,[l[46]||(l[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Footer",-1)),e("div",hl,[e("div",xl,[o.value.logo_footer_url?(n(),p("img",{key:0,src:o.value.logo_footer_url,class:"object-contain h-full w-full"},null,8,wl)):(n(),ie(_(jt),{key:1,class:"size-6 text-gray-400"}))]),e("label",_l,[V(_(Ut),{class:"size-4 mr-2"}),l[45]||(l[45]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:l[4]||(l[4]=R=>ce(R,"logo-footer")),class:"hidden"},null,32)]),o.value.logo_footer_url?(n(),p("span",kl,I(o.value.logo_footer_url),1)):Z("",!0)])])]),e("div",null,[l[48]||(l[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Favicon",-1)),e("div",$l,[e("div",Sl,[o.value.favicon_url?(n(),p("img",{key:0,src:o.value.favicon_url,class:"object-contain h-full w-full"},null,8,Cl)):(n(),ie(_(jt),{key:1,class:"size-5 text-gray-400"}))]),e("label",Tl,[V(_(Ut),{class:"size-4 mr-2"}),l[47]||(l[47]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".ico,.png,.jpg,.jpeg,.svg",onChange:l[5]||(l[5]=R=>ce(R,"favicon")),class:"hidden"},null,32)]),o.value.favicon_url?(n(),p("span",El,I(o.value.favicon_url),1)):Z("",!0)])]),e("div",null,[l[49]||(l[49]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào header",-1)),e("div",Rl,[e("div",{ref_key:"gutterHead",ref:k,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(n(!0),p(he,null,we(de.value,R=>(n(),p("div",{key:R,class:"leading-6"},I(R),1))),128))],512),U(e("textarea",{ref_key:"codeHead",ref:i,"onUpdate:modelValue":l[6]||(l[6]=R=>o.value.custom_head_html=R),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:l[7]||(l[7]=R=>b("head"))},null,544),[[Q,o.value.custom_head_html]])])]),e("div",null,[l[50]||(l[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào body",-1)),e("div",Al,[e("div",{ref_key:"gutterBody",ref:D,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(n(!0),p(he,null,we($.value,R=>(n(),p("div",{key:R,class:"leading-6"},I(R),1))),128))],512),U(e("textarea",{ref_key:"codeBody",ref:te,"onUpdate:modelValue":l[8]||(l[8]=R=>o.value.custom_body_html=R),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<div>...</div>",onScroll:l[9]||(l[9]=R=>b("body"))},null,544),[[Q,o.value.custom_body_html]])])]),e("div",null,[l[51]||(l[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào footer",-1)),e("div",Pl,[e("div",{ref_key:"gutterFooter",ref:ee,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(n(!0),p(he,null,we(h.value,R=>(n(),p("div",{key:R,class:"leading-6"},I(R),1))),128))],512),U(e("textarea",{ref_key:"codeFooter",ref:z,"onUpdate:modelValue":l[10]||(l[10]=R=>o.value.custom_footer_html=R),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:l[11]||(l[11]=R=>b("footer"))},null,544),[[Q,o.value.custom_footer_html]])])])])):Z("",!0),c.value==="navigation"?(n(),p("div",Ll,[e("div",null,[e("div",Il,[l[53]||(l[53]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Menu Header"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:l[12]||(l[12]=R=>xe.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...l[52]||(l[52]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),$e(" Thêm menu ",-1)])])]),e("div",Dl,[W.value.length===0?(n(),p("div",Ml,[...l[54]||(l[54]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có menu nào. Click "Thêm menu" để bắt đầu.',-1)])])):Z("",!0),(n(!0),p(he,null,we(W.value,(R,Ie)=>(n(),p("div",{key:Ie,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:q=>oe(Ie),onDragover:l[14]||(l[14]=ze(()=>{},["prevent"])),onDrop:q=>se(Ie)},[e("div",Ul,[e("div",Fl,[e("div",Vl,[l[55]||(l[55]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",Nl,[e("div",zl,[U(e("input",{"onUpdate:modelValue":q=>R.label=q,onInput:ge,type:"text",class:"flex-1 px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu"},null,40,Ol),[[Q,R.label]])]),U(e("input",{"onUpdate:modelValue":q=>R.url=q,onInput:ge,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL (ví dụ: /khach-san)"},null,40,Bl),[[Q,R.url]])])]),e("div",Hl,[e("button",{type:"button",onClick:q=>ne(Ie),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm menu con"},[...l[56]||(l[56]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,ql),e("button",{type:"button",onClick:q=>A(Ie),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa"},[...l[57]||(l[57]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Wl)])]),R.children&&R.children.length>0?(n(),p("div",Yl,[(n(!0),p(he,null,we(R.children,(q,ue)=>(n(),p("div",{key:ue,class:"flex items-center gap-3 group",draggable:"true",onDragstart:pe=>Ue(Ie,ue),onDragover:l[13]||(l[13]=ze(()=>{},["prevent"])),onDrop:pe=>L(Ie,ue)},[l[59]||(l[59]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),l[60]||(l[60]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("div",Xl,[U(e("input",{"onUpdate:modelValue":pe=>q.label=pe,onInput:ge,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu con"},null,40,Gl),[[Q,q.label]]),U(e("input",{"onUpdate:modelValue":pe=>q.url=pe,onInput:ge,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,Ql),[[Q,q.url]])]),e("button",{type:"button",onClick:pe=>y(Ie,ue),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...l[58]||(l[58]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Jl)],40,Kl))),128))])):Z("",!0)])],40,jl))),128))])]),e("div",null,[e("div",Zl,[l[62]||(l[62]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Footer"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:l[15]||(l[15]=R=>Ve.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...l[61]||(l[61]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),$e(" Thêm cột ",-1)])])]),e("div",en,[Ee.value.length===0?(n(),p("div",tn,[...l[63]||(l[63]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có cột footer nào. Click "Thêm cột" để bắt đầu.',-1)])])):Z("",!0),(n(!0),p(he,null,we(Ee.value,(R,Ie)=>(n(),p("div",{key:Ie,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:q=>vt(Ie),onDragover:l[17]||(l[17]=ze(()=>{},["prevent"])),onDrop:q=>qe(Ie)},[e("div",an,[e("div",on,[e("div",ln,[l[64]||(l[64]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",nn,[U(e("input",{"onUpdate:modelValue":q=>R.title=q,onInput:We,type:"text",class:"w-full px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:`Tiêu đề cột ${Ie+1}`},null,40,rn),[[Q,R.title]])])]),e("div",dn,[e("button",{type:"button",onClick:q=>ae(Ie),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm liên kết"},[...l[65]||(l[65]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,un),e("button",{type:"button",onClick:q=>Te(Ie),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa cột"},[...l[66]||(l[66]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,cn)])]),R.links&&R.links.length>0?(n(),p("div",pn,[(n(!0),p(he,null,we(R.links,(q,ue)=>(n(),p("div",{key:ue,class:"flex items-center gap-3 group",draggable:"true",onDragstart:pe=>ft(Ie,ue),onDragover:l[16]||(l[16]=ze(()=>{},["prevent"])),onDrop:pe=>rt(Ie,ue)},[l[68]||(l[68]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),l[69]||(l[69]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),e("div",gn,[U(e("input",{"onUpdate:modelValue":pe=>q.label=pe,onInput:We,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên liên kết"},null,40,vn),[[Q,q.label]]),U(e("input",{"onUpdate:modelValue":pe=>q.url=pe,onInput:We,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,fn),[[Q,q.url]])]),e("button",{type:"button",onClick:pe=>et(Ie,ue),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...l[67]||(l[67]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,bn)],40,mn))),128))])):(n(),p("div",yn,[...l[70]||(l[70]=[e("p",{class:"text-xs text-gray-400 italic"},"Chưa có liên kết",-1)])]))])],40,sn))),128))])])])):Z("",!0),e("div",hn,[e("button",{type:"button",onClick:C,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Reset"),e("button",{type:"button",onClick:S,disabled:f.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2"},[f.value?(n(),p("span",wn)):(n(),p("span",_n,"Save"))],8,xn)])]))])]),xe.value?(n(),p("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:l[23]||(l[23]=R=>xe.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:l[22]||(l[22]=ze(()=>{},["stop"]))},[l[75]||(l[75]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu mới")],-1)),e("div",kn,[e("div",null,[l[72]||(l[72]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),U(e("select",{"onUpdate:modelValue":l[18]||(l[18]=R=>Ce.value=R),class:"w-full rounded-md border-gray-300 text-sm"},[l[71]||(l[71]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(n(!0),p(he,null,we(J.value,R=>(n(),p("option",{key:R.id,value:R.id},I(R.name),9,$n))),128))],512),[[Je,Ce.value]])]),e("div",Sn,[l[73]||(l[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu",-1)),U(e("input",{"onUpdate:modelValue":l[19]||(l[19]=R=>Me.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn"},null,512),[[Q,Me.value]])]),e("div",null,[l[74]||(l[74]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),U(e("input",{"onUpdate:modelValue":l[20]||(l[20]=R=>Fe.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san"},null,512),[[Q,Fe.value]])])]),e("div",Cn,[e("button",{type:"button",onClick:l[21]||(l[21]=R=>xe.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:O,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):Z("",!0),Se.value?(n(),p("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:l[29]||(l[29]=R=>Se.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:l[28]||(l[28]=ze(()=>{},["stop"]))},[e("div",Tn,[l[77]||(l[77]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu con",-1)),e("p",En,[l[76]||(l[76]=$e("Thêm vào: ",-1)),e("strong",null,I((ye=W.value[fe.value])==null?void 0:ye.label),1)])]),e("div",Rn,[e("div",null,[l[79]||(l[79]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),U(e("select",{"onUpdate:modelValue":l[24]||(l[24]=R=>je.value=R),class:"w-full rounded-md border-gray-300 text-sm"},[l[78]||(l[78]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(n(!0),p(he,null,we(J.value,R=>(n(),p("option",{key:R.id,value:R.id},I(R.name),9,An))),128))],512),[[Je,je.value]])]),e("div",Pn,[l[80]||(l[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu con",-1)),U(e("input",{"onUpdate:modelValue":l[25]||(l[25]=R=>He.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn 5 sao"},null,512),[[Q,He.value]])]),e("div",null,[l[81]||(l[81]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),U(e("input",{"onUpdate:modelValue":l[26]||(l[26]=R=>re.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san-5-sao"},null,512),[[Q,re.value]])])]),e("div",Ln,[e("button",{type:"button",onClick:l[27]||(l[27]=R=>Se.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:Ae,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):Z("",!0),Ve.value?(n(),p("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:l[33]||(l[33]=R=>Ve.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:l[32]||(l[32]=ze(()=>{},["stop"]))},[l[83]||(l[83]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm cột footer mới")],-1)),e("div",In,[e("div",null,[l[82]||(l[82]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tiêu đề cột",-1)),U(e("input",{"onUpdate:modelValue":l[30]||(l[30]=R=>j.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Thông tin"},null,512),[[Q,j.value]])])]),e("div",Dn,[e("button",{type:"button",onClick:l[31]||(l[31]=R=>Ve.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:Ne,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):Z("",!0),M.value?(n(),p("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:l[39]||(l[39]=R=>M.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:l[38]||(l[38]=ze(()=>{},["stop"]))},[e("div",Mn,[l[85]||(l[85]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm liên kết footer",-1)),e("p",jn,[l[84]||(l[84]=$e("Thêm vào: ",-1)),e("strong",null,I(((Re=Ee.value[a.value])==null?void 0:Re.title)||`Cột ${a.value+1}`),1)])]),e("div",Un,[e("div",null,[l[87]||(l[87]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),U(e("select",{"onUpdate:modelValue":l[34]||(l[34]=R=>H.value=R),class:"w-full rounded-md border-gray-300 text-sm"},[l[86]||(l[86]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(n(!0),p(he,null,we(J.value,R=>(n(),p("option",{key:R.id,value:R.id},I(R.name),9,Fn))),128))],512),[[Je,H.value]])]),e("div",Vn,[l[88]||(l[88]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên liên kết",-1)),U(e("input",{"onUpdate:modelValue":l[35]||(l[35]=R=>d.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Giới thiệu"},null,512),[[Q,d.value]])]),e("div",null,[l[89]||(l[89]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),U(e("input",{"onUpdate:modelValue":l[36]||(l[36]=R=>G.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /gioi-thieu"},null,512),[[Q,G.value]])])]),e("div",Nn,[e("button",{type:"button",onClick:l[37]||(l[37]=R=>M.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:Pe,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):Z("",!0)])}}};var fs={exports:{}},me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht=Symbol.for("react.transitional.element"),On=Symbol.for("react.portal"),Bn=Symbol.for("react.fragment"),Hn=Symbol.for("react.strict_mode"),qn=Symbol.for("react.profiler"),Wn=Symbol.for("react.consumer"),Yn=Symbol.for("react.context"),Kn=Symbol.for("react.forward_ref"),Xn=Symbol.for("react.suspense"),Gn=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),Qn=Symbol.for("react.activity"),Gt=Symbol.iterator;function Jn(s){return s===null||typeof s!="object"?null:(s=Gt&&s[Gt]||s["@@iterator"],typeof s=="function"?s:null)}var ys={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hs=Object.assign,xs={};function _t(s,t,r){this.props=s,this.context=t,this.refs=xs,this.updater=r||ys}_t.prototype.isReactComponent={};_t.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};_t.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function ws(){}ws.prototype=_t.prototype;function qt(s,t,r){this.props=s,this.context=t,this.refs=xs,this.updater=r||ys}var Wt=qt.prototype=new ws;Wt.constructor=qt;hs(Wt,_t.prototype);Wt.isPureReactComponent=!0;var Qt=Array.isArray;function zt(){}var Le={H:null,A:null,T:null,S:null},_s=Object.prototype.hasOwnProperty;function Yt(s,t,r){var u=r.ref;return{$$typeof:Ht,type:s,key:t,ref:u!==void 0?u:null,props:r}}function Zn(s,t){return Yt(s.type,t,s.props)}function Kt(s){return typeof s=="object"&&s!==null&&s.$$typeof===Ht}function er(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(r){return t[r]})}var Jt=/\/+/g;function Ft(s,t){return typeof s=="object"&&s!==null&&s.key!=null?er(""+s.key):t.toString(36)}function tr(s){switch(s.status){case"fulfilled":return s.value;case"rejected":throw s.reason;default:switch(typeof s.status=="string"?s.then(zt,zt):(s.status="pending",s.then(function(t){s.status==="pending"&&(s.status="fulfilled",s.value=t)},function(t){s.status==="pending"&&(s.status="rejected",s.reason=t)})),s.status){case"fulfilled":return s.value;case"rejected":throw s.reason}}throw s}function bt(s,t,r,u,m){var f=typeof s;(f==="undefined"||f==="boolean")&&(s=null);var g=!1;if(s===null)g=!0;else switch(f){case"bigint":case"string":case"number":g=!0;break;case"object":switch(s.$$typeof){case Ht:case On:g=!0;break;case bs:return g=s._init,bt(g(s._payload),t,r,u,m)}}if(g)return m=m(s),g=u===""?"."+Ft(s,0):u,Qt(m)?(r="",g!=null&&(r=g.replace(Jt,"$&/")+"/"),bt(m,t,r,"",function(o){return o})):m!=null&&(Kt(m)&&(m=Zn(m,r+(m.key==null||s&&s.key===m.key?"":(""+m.key).replace(Jt,"$&/")+"/")+g)),t.push(m)),1;g=0;var x=u===""?".":u+":";if(Qt(s))for(var c=0;c<s.length;c++)u=s[c],f=x+Ft(u,c),g+=bt(u,t,r,f,m);else if(c=Jn(s),typeof c=="function")for(s=c.call(s),c=0;!(u=s.next()).done;)u=u.value,f=x+Ft(u,c++),g+=bt(u,t,r,f,m);else if(f==="object"){if(typeof s.then=="function")return bt(tr(s),t,r,u,m);throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return g}function Et(s,t,r){if(s==null)return s;var u=[],m=0;return bt(s,u,"","",function(f){return t.call(r,f,m++)}),u}function sr(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(r){(s._status===0||s._status===-1)&&(s._status=1,s._result=r)},function(r){(s._status===0||s._status===-1)&&(s._status=2,s._result=r)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var Zt=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ar={map:Et,forEach:function(s,t,r){Et(s,function(){t.apply(this,arguments)},r)},count:function(s){var t=0;return Et(s,function(){t++}),t},toArray:function(s){return Et(s,function(t){return t})||[]},only:function(s){if(!Kt(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};me.Activity=Qn;me.Children=ar;me.Component=_t;me.Fragment=Bn;me.Profiler=qn;me.PureComponent=qt;me.StrictMode=Hn;me.Suspense=Xn;me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Le;me.__COMPILER_RUNTIME={__proto__:null,c:function(s){return Le.H.useMemoCache(s)}};me.cache=function(s){return function(){return s.apply(null,arguments)}};me.cacheSignal=function(){return null};me.cloneElement=function(s,t,r){if(s==null)throw Error("The argument must be a React element, but you passed "+s+".");var u=hs({},s.props),m=s.key;if(t!=null)for(f in t.key!==void 0&&(m=""+t.key),t)!_s.call(t,f)||f==="key"||f==="__self"||f==="__source"||f==="ref"&&t.ref===void 0||(u[f]=t[f]);var f=arguments.length-2;if(f===1)u.children=r;else if(1<f){for(var g=Array(f),x=0;x<f;x++)g[x]=arguments[x+2];u.children=g}return Yt(s.type,m,u)};me.createContext=function(s){return s={$$typeof:Yn,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null},s.Provider=s,s.Consumer={$$typeof:Wn,_context:s},s};me.createElement=function(s,t,r){var u,m={},f=null;if(t!=null)for(u in t.key!==void 0&&(f=""+t.key),t)_s.call(t,u)&&u!=="key"&&u!=="__self"&&u!=="__source"&&(m[u]=t[u]);var g=arguments.length-2;if(g===1)m.children=r;else if(1<g){for(var x=Array(g),c=0;c<g;c++)x[c]=arguments[c+2];m.children=x}if(s&&s.defaultProps)for(u in g=s.defaultProps,g)m[u]===void 0&&(m[u]=g[u]);return Yt(s,f,m)};me.createRef=function(){return{current:null}};me.forwardRef=function(s){return{$$typeof:Kn,render:s}};me.isValidElement=Kt;me.lazy=function(s){return{$$typeof:bs,_payload:{_status:-1,_result:s},_init:sr}};me.memo=function(s,t){return{$$typeof:Gn,type:s,compare:t===void 0?null:t}};me.startTransition=function(s){var t=Le.T,r={};Le.T=r;try{var u=s(),m=Le.S;m!==null&&m(r,u),typeof u=="object"&&u!==null&&typeof u.then=="function"&&u.then(zt,Zt)}catch(f){Zt(f)}finally{t!==null&&r.types!==null&&(t.types=r.types),Le.T=t}};me.unstable_useCacheRefresh=function(){return Le.H.useCacheRefresh()};me.use=function(s){return Le.H.use(s)};me.useActionState=function(s,t,r){return Le.H.useActionState(s,t,r)};me.useCallback=function(s,t){return Le.H.useCallback(s,t)};me.useContext=function(s){return Le.H.useContext(s)};me.useDebugValue=function(){};me.useDeferredValue=function(s,t){return Le.H.useDeferredValue(s,t)};me.useEffect=function(s,t){return Le.H.useEffect(s,t)};me.useEffectEvent=function(s){return Le.H.useEffectEvent(s)};me.useId=function(){return Le.H.useId()};me.useImperativeHandle=function(s,t,r){return Le.H.useImperativeHandle(s,t,r)};me.useInsertionEffect=function(s,t){return Le.H.useInsertionEffect(s,t)};me.useLayoutEffect=function(s,t){return Le.H.useLayoutEffect(s,t)};me.useMemo=function(s,t){return Le.H.useMemo(s,t)};me.useOptimistic=function(s,t){return Le.H.useOptimistic(s,t)};me.useReducer=function(s,t,r){return Le.H.useReducer(s,t,r)};me.useRef=function(s){return Le.H.useRef(s)};me.useState=function(s){return Le.H.useState(s)};me.useSyncExternalStore=function(s,t,r){return Le.H.useSyncExternalStore(s,t,r)};me.useTransition=function(){return Le.H.useTransition()};me.version="19.2.0";fs.exports=me;var ht=fs.exports;const B=vs(ht);var ks={exports:{}},Ge={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var or=ht;function $s(s){var t="https://react.dev/errors/"+s;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ut(){}var Xe={d:{f:ut,r:function(){throw Error($s(522))},D:ut,C:ut,L:ut,m:ut,X:ut,S:ut,M:ut},p:0,findDOMNode:null},lr=Symbol.for("react.portal");function nr(s,t,r){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lr,key:u==null?null:""+u,children:s,containerInfo:t,implementation:r}}var $t=or.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Dt(s,t){if(s==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ge.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Xe;Ge.createPortal=function(s,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error($s(299));return nr(s,t,null,r)};Ge.flushSync=function(s){var t=$t.T,r=Xe.p;try{if($t.T=null,Xe.p=2,s)return s()}finally{$t.T=t,Xe.p=r,Xe.d.f()}};Ge.preconnect=function(s,t){typeof s=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Xe.d.C(s,t))};Ge.prefetchDNS=function(s){typeof s=="string"&&Xe.d.D(s)};Ge.preinit=function(s,t){if(typeof s=="string"&&t&&typeof t.as=="string"){var r=t.as,u=Dt(r,t.crossOrigin),m=typeof t.integrity=="string"?t.integrity:void 0,f=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;r==="style"?Xe.d.S(s,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:u,integrity:m,fetchPriority:f}):r==="script"&&Xe.d.X(s,{crossOrigin:u,integrity:m,fetchPriority:f,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ge.preinitModule=function(s,t){if(typeof s=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var r=Dt(t.as,t.crossOrigin);Xe.d.M(s,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Xe.d.M(s)};Ge.preload=function(s,t){if(typeof s=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var r=t.as,u=Dt(r,t.crossOrigin);Xe.d.L(s,r,{crossOrigin:u,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ge.preloadModule=function(s,t){if(typeof s=="string")if(t){var r=Dt(t.as,t.crossOrigin);Xe.d.m(s,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Xe.d.m(s)};Ge.requestFormReset=function(s){Xe.d.r(s)};Ge.unstable_batchedUpdates=function(s,t){return s(t)};Ge.useFormState=function(s,t,r){return $t.H.useFormState(s,t,r)};Ge.useFormStatus=function(){return $t.H.useHostTransitionStatus()};Ge.version="19.2.0";function Ss(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ss)}catch(s){console.error(s)}}Ss(),ks.exports=Ge;var rr=ks.exports;const ir=vs(rr);var dr=s=>{switch(s){case"success":return pr;case"info":return gr;case"warning":return mr;case"error":return vr;default:return null}},ur=Array(12).fill(0),cr=({visible:s,className:t})=>B.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":s},B.createElement("div",{className:"sonner-spinner"},ur.map((r,u)=>B.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${u}`})))),pr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),mr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),gr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),vr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},B.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),B.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),br=()=>{let[s,t]=B.useState(document.hidden);return B.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),s},Ot=1,yr=class{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{let t=this.subscribers.indexOf(s);this.subscribers.splice(t,1)}),this.publish=s=>{this.subscribers.forEach(t=>t(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var t;let{message:r,...u}=s,m=typeof(s==null?void 0:s.id)=="number"||((t=s.id)==null?void 0:t.length)>0?s.id:Ot++,f=this.toasts.find(x=>x.id===m),g=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(m)&&this.dismissedToasts.delete(m),f?this.toasts=this.toasts.map(x=>x.id===m?(this.publish({...x,...s,id:m,title:r}),{...x,...s,id:m,dismissible:g,title:r}):x):this.addToast({title:r,...u,dismissible:g,id:m}),m},this.dismiss=s=>(this.dismissedToasts.add(s),s||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:s,dismiss:!0})),s),this.message=(s,t)=>this.create({...t,message:s}),this.error=(s,t)=>this.create({...t,message:s,type:"error"}),this.success=(s,t)=>this.create({...t,type:"success",message:s}),this.info=(s,t)=>this.create({...t,type:"info",message:s}),this.warning=(s,t)=>this.create({...t,type:"warning",message:s}),this.loading=(s,t)=>this.create({...t,type:"loading",message:s}),this.promise=(s,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:s,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let u=s instanceof Promise?s:s(),m=r!==void 0,f,g=u.then(async c=>{if(f=["resolve",c],B.isValidElement(c))m=!1,this.create({id:r,type:"default",message:c});else if(xr(c)&&!c.ok){m=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,k=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:o,description:k})}else if(t.success!==void 0){m=!1;let o=typeof t.success=="function"?await t.success(c):t.success,k=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:o,description:k})}}).catch(async c=>{if(f=["reject",c],t.error!==void 0){m=!1;let o=typeof t.error=="function"?await t.error(c):t.error,k=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:o,description:k})}}).finally(()=>{var c;m&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),x=()=>new Promise((c,o)=>g.then(()=>f[0]==="reject"?o(f[1]):c(f[1])).catch(o));return typeof r!="string"&&typeof r!="number"?{unwrap:x}:Object.assign(r,{unwrap:x})},this.custom=(s,t)=>{let r=(t==null?void 0:t.id)||Ot++;return this.create({jsx:s(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Qe=new yr,hr=(s,t)=>{let r=(t==null?void 0:t.id)||Ot++;return Qe.addToast({title:s,...t,id:r}),r},xr=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",wr=hr,_r=()=>Qe.toasts,kr=()=>Qe.getActiveToasts(),yt=Object.assign(wr,{success:Qe.success,info:Qe.info,warning:Qe.warning,error:Qe.error,custom:Qe.custom,message:Qe.message,promise:Qe.promise,dismiss:Qe.dismiss,loading:Qe.loading},{getHistory:_r,getToasts:kr});function $r(s,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],u=document.createElement("style");u.type="text/css",t==="top"&&r.firstChild?r.insertBefore(u,r.firstChild):r.appendChild(u),u.styleSheet?u.styleSheet.cssText=s:u.appendChild(document.createTextNode(s))}$r(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Rt(s){return s.label!==void 0}var Sr=3,Cr="32px",Tr="16px",es=4e3,Er=356,Rr=14,Ar=20,Pr=200;function ot(...s){return s.filter(Boolean).join(" ")}function Lr(s){let[t,r]=s.split("-"),u=[];return t&&u.push(t),r&&u.push(r),u}var Ir=s=>{var t,r,u,m,f,g,x,c,o,k,D;let{invert:ee,toast:i,unstyled:te,interacting:z,setHeights:de,visibleToasts:$,heights:h,index:b,toasts:P,expanded:T,removeToast:S,defaultRichColors:C,closeButton:ce,style:J,cancelButtonStyle:W,actionButtonStyle:xe,className:Se="",descriptionClassName:fe="",duration:Ce,position:Me,gap:Fe,loadingIcon:je,expandByDefault:He,classNames:re,icons:le,closeButtonAriaLabel:w="Close toast",pauseWhenPageIsHidden:K}=s,[E,O]=B.useState(null),[ne,Ae]=B.useState(null),[ge,A]=B.useState(!1),[y,Y]=B.useState(!1),[X,oe]=B.useState(!1),[se,Ue]=B.useState(!1),[L,Ee]=B.useState(!1),[Ve,M]=B.useState(0),[a,j]=B.useState(0),H=B.useRef(i.duration||Ce||es),d=B.useRef(null),G=B.useRef(null),ve=b===0,Ne=b+1<=$,ae=i.type,Pe=i.dismissible!==!1,Te=i.className||"",We=i.descriptionClassName||"",et=B.useMemo(()=>h.findIndex(q=>q.toastId===i.id)||0,[h,i.id]),tt=B.useMemo(()=>{var q;return(q=i.closeButton)!=null?q:ce},[i.closeButton,ce]),vt=B.useMemo(()=>i.duration||Ce||es,[i.duration,Ce]),qe=B.useRef(0),Ye=B.useRef(0),ft=B.useRef(0),rt=B.useRef(null),[Mt,F]=Me.split("-"),l=B.useMemo(()=>h.reduce((q,ue,pe)=>pe>=et?q:q+ue.height,0),[h,et]),be=br(),ye=i.invert||ee,Re=ae==="loading";Ye.current=B.useMemo(()=>et*Fe+l,[et,l]),B.useEffect(()=>{H.current=vt},[vt]),B.useEffect(()=>{A(!0)},[]),B.useEffect(()=>{let q=G.current;if(q){let ue=q.getBoundingClientRect().height;return j(ue),de(pe=>[{toastId:i.id,height:ue,position:i.position},...pe]),()=>de(pe=>pe.filter(Ke=>Ke.toastId!==i.id))}},[de,i.id]),B.useLayoutEffect(()=>{if(!ge)return;let q=G.current,ue=q.style.height;q.style.height="auto";let pe=q.getBoundingClientRect().height;q.style.height=ue,j(pe),de(Ke=>Ke.find(st=>st.toastId===i.id)?Ke.map(st=>st.toastId===i.id?{...st,height:pe}:st):[{toastId:i.id,height:pe,position:i.position},...Ke])},[ge,i.title,i.description,de,i.id]);let R=B.useCallback(()=>{Y(!0),M(Ye.current),de(q=>q.filter(ue=>ue.toastId!==i.id)),setTimeout(()=>{S(i)},Pr)},[i,S,de,Ye]);B.useEffect(()=>{if(i.promise&&ae==="loading"||i.duration===1/0||i.type==="loading")return;let q;return T||z||K&&be?(()=>{if(ft.current<qe.current){let ue=new Date().getTime()-qe.current;H.current=H.current-ue}ft.current=new Date().getTime()})():H.current!==1/0&&(qe.current=new Date().getTime(),q=setTimeout(()=>{var ue;(ue=i.onAutoClose)==null||ue.call(i,i),R()},H.current)),()=>clearTimeout(q)},[T,z,i,ae,K,be,R]),B.useEffect(()=>{i.delete&&R()},[R,i.delete]);function Ie(){var q,ue,pe;return le!=null&&le.loading?B.createElement("div",{className:ot(re==null?void 0:re.loader,(q=i==null?void 0:i.classNames)==null?void 0:q.loader,"sonner-loader"),"data-visible":ae==="loading"},le.loading):je?B.createElement("div",{className:ot(re==null?void 0:re.loader,(ue=i==null?void 0:i.classNames)==null?void 0:ue.loader,"sonner-loader"),"data-visible":ae==="loading"},je):B.createElement(cr,{className:ot(re==null?void 0:re.loader,(pe=i==null?void 0:i.classNames)==null?void 0:pe.loader),visible:ae==="loading"})}return B.createElement("li",{tabIndex:0,ref:G,className:ot(Se,Te,re==null?void 0:re.toast,(t=i==null?void 0:i.classNames)==null?void 0:t.toast,re==null?void 0:re.default,re==null?void 0:re[ae],(r=i==null?void 0:i.classNames)==null?void 0:r[ae]),"data-sonner-toast":"","data-rich-colors":(u=i.richColors)!=null?u:C,"data-styled":!(i.jsx||i.unstyled||te),"data-mounted":ge,"data-promise":!!i.promise,"data-swiped":L,"data-removed":y,"data-visible":Ne,"data-y-position":Mt,"data-x-position":F,"data-index":b,"data-front":ve,"data-swiping":X,"data-dismissible":Pe,"data-type":ae,"data-invert":ye,"data-swipe-out":se,"data-swipe-direction":ne,"data-expanded":!!(T||He&&ge),style:{"--index":b,"--toasts-before":b,"--z-index":P.length-b,"--offset":`${y?Ve:Ye.current}px`,"--initial-height":He?"auto":`${a}px`,...J,...i.style},onDragEnd:()=>{oe(!1),O(null),rt.current=null},onPointerDown:q=>{Re||!Pe||(d.current=new Date,M(Ye.current),q.target.setPointerCapture(q.pointerId),q.target.tagName!=="BUTTON"&&(oe(!0),rt.current={x:q.clientX,y:q.clientY}))},onPointerUp:()=>{var q,ue,pe,Ke;if(se||!Pe)return;rt.current=null;let st=Number(((q=G.current)==null?void 0:q.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),it=Number(((ue=G.current)==null?void 0:ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),pt=new Date().getTime()-((pe=d.current)==null?void 0:pe.getTime()),at=E==="x"?st:it,dt=Math.abs(at)/pt;if(Math.abs(at)>=Ar||dt>.11){M(Ye.current),(Ke=i.onDismiss)==null||Ke.call(i,i),Ae(E==="x"?st>0?"right":"left":it>0?"down":"up"),R(),Ue(!0),Ee(!1);return}oe(!1),O(null)},onPointerMove:q=>{var ue,pe,Ke,st;if(!rt.current||!Pe||((ue=window.getSelection())==null?void 0:ue.toString().length)>0)return;let it=q.clientY-rt.current.y,pt=q.clientX-rt.current.x,at=(pe=s.swipeDirections)!=null?pe:Lr(Me);!E&&(Math.abs(pt)>1||Math.abs(it)>1)&&O(Math.abs(pt)>Math.abs(it)?"x":"y");let dt={x:0,y:0};E==="y"?(at.includes("top")||at.includes("bottom"))&&(at.includes("top")&&it<0||at.includes("bottom")&&it>0)&&(dt.y=it):E==="x"&&(at.includes("left")||at.includes("right"))&&(at.includes("left")&&pt<0||at.includes("right")&&pt>0)&&(dt.x=pt),(Math.abs(dt.x)>0||Math.abs(dt.y)>0)&&Ee(!0),(Ke=G.current)==null||Ke.style.setProperty("--swipe-amount-x",`${dt.x}px`),(st=G.current)==null||st.style.setProperty("--swipe-amount-y",`${dt.y}px`)}},tt&&!i.jsx?B.createElement("button",{"aria-label":w,"data-disabled":Re,"data-close-button":!0,onClick:Re||!Pe?()=>{}:()=>{var q;R(),(q=i.onDismiss)==null||q.call(i,i)},className:ot(re==null?void 0:re.closeButton,(m=i==null?void 0:i.classNames)==null?void 0:m.closeButton)},(f=le==null?void 0:le.close)!=null?f:fr):null,i.jsx||ht.isValidElement(i.title)?i.jsx?i.jsx:typeof i.title=="function"?i.title():i.title:B.createElement(B.Fragment,null,ae||i.icon||i.promise?B.createElement("div",{"data-icon":"",className:ot(re==null?void 0:re.icon,(g=i==null?void 0:i.classNames)==null?void 0:g.icon)},i.promise||i.type==="loading"&&!i.icon?i.icon||Ie():null,i.type!=="loading"?i.icon||(le==null?void 0:le[ae])||dr(ae):null):null,B.createElement("div",{"data-content":"",className:ot(re==null?void 0:re.content,(x=i==null?void 0:i.classNames)==null?void 0:x.content)},B.createElement("div",{"data-title":"",className:ot(re==null?void 0:re.title,(c=i==null?void 0:i.classNames)==null?void 0:c.title)},typeof i.title=="function"?i.title():i.title),i.description?B.createElement("div",{"data-description":"",className:ot(fe,We,re==null?void 0:re.description,(o=i==null?void 0:i.classNames)==null?void 0:o.description)},typeof i.description=="function"?i.description():i.description):null),ht.isValidElement(i.cancel)?i.cancel:i.cancel&&Rt(i.cancel)?B.createElement("button",{"data-button":!0,"data-cancel":!0,style:i.cancelButtonStyle||W,onClick:q=>{var ue,pe;Rt(i.cancel)&&Pe&&((pe=(ue=i.cancel).onClick)==null||pe.call(ue,q),R())},className:ot(re==null?void 0:re.cancelButton,(k=i==null?void 0:i.classNames)==null?void 0:k.cancelButton)},i.cancel.label):null,ht.isValidElement(i.action)?i.action:i.action&&Rt(i.action)?B.createElement("button",{"data-button":!0,"data-action":!0,style:i.actionButtonStyle||xe,onClick:q=>{var ue,pe;Rt(i.action)&&((pe=(ue=i.action).onClick)==null||pe.call(ue,q),!q.defaultPrevented&&R())},className:ot(re==null?void 0:re.actionButton,(D=i==null?void 0:i.classNames)==null?void 0:D.actionButton)},i.action.label):null))};function ts(){if(typeof window>"u"||typeof document>"u")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function Dr(s,t){let r={};return[s,t].forEach((u,m)=>{let f=m===1,g=f?"--mobile-offset":"--offset",x=f?Tr:Cr;function c(o){["top","right","bottom","left"].forEach(k=>{r[`${g}-${k}`]=typeof o=="number"?`${o}px`:o})}typeof u=="number"||typeof u=="string"?c(u):typeof u=="object"?["top","right","bottom","left"].forEach(o=>{u[o]===void 0?r[`${g}-${o}`]=x:r[`${g}-${o}`]=typeof u[o]=="number"?`${u[o]}px`:u[o]}):c(x)}),r}ht.forwardRef(function(s,t){let{invert:r,position:u="bottom-right",hotkey:m=["altKey","KeyT"],expand:f,closeButton:g,className:x,offset:c,mobileOffset:o,theme:k="light",richColors:D,duration:ee,style:i,visibleToasts:te=Sr,toastOptions:z,dir:de=ts(),gap:$=Rr,loadingIcon:h,icons:b,containerAriaLabel:P="Notifications",pauseWhenPageIsHidden:T}=s,[S,C]=B.useState([]),ce=B.useMemo(()=>Array.from(new Set([u].concat(S.filter(K=>K.position).map(K=>K.position)))),[S,u]),[J,W]=B.useState([]),[xe,Se]=B.useState(!1),[fe,Ce]=B.useState(!1),[Me,Fe]=B.useState(k!=="system"?k:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),je=B.useRef(null),He=m.join("+").replace(/Key/g,"").replace(/Digit/g,""),re=B.useRef(null),le=B.useRef(!1),w=B.useCallback(K=>{C(E=>{var O;return(O=E.find(ne=>ne.id===K.id))!=null&&O.delete||Qe.dismiss(K.id),E.filter(({id:ne})=>ne!==K.id)})},[]);return B.useEffect(()=>Qe.subscribe(K=>{if(K.dismiss){C(E=>E.map(O=>O.id===K.id?{...O,delete:!0}:O));return}setTimeout(()=>{ir.flushSync(()=>{C(E=>{let O=E.findIndex(ne=>ne.id===K.id);return O!==-1?[...E.slice(0,O),{...E[O],...K},...E.slice(O+1)]:[K,...E]})})})}),[]),B.useEffect(()=>{if(k!=="system"){Fe(k);return}if(k==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Fe("dark"):Fe("light")),typeof window>"u")return;let K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:E})=>{Fe(E?"dark":"light")})}catch{K.addListener(({matches:O})=>{try{Fe(O?"dark":"light")}catch(ne){console.error(ne)}})}},[k]),B.useEffect(()=>{S.length<=1&&Se(!1)},[S]),B.useEffect(()=>{let K=E=>{var O,ne;m.every(Ae=>E[Ae]||E.code===Ae)&&(Se(!0),(O=je.current)==null||O.focus()),E.code==="Escape"&&(document.activeElement===je.current||(ne=je.current)!=null&&ne.contains(document.activeElement))&&Se(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[m]),B.useEffect(()=>{if(je.current)return()=>{re.current&&(re.current.focus({preventScroll:!0}),re.current=null,le.current=!1)}},[je.current]),B.createElement("section",{ref:t,"aria-label":`${P} ${He}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ce.map((K,E)=>{var O;let[ne,Ae]=K.split("-");return S.length?B.createElement("ol",{key:K,dir:de==="auto"?ts():de,tabIndex:-1,ref:je,className:x,"data-sonner-toaster":!0,"data-theme":Me,"data-y-position":ne,"data-lifted":xe&&S.length>1&&!f,"data-x-position":Ae,style:{"--front-toast-height":`${((O=J[0])==null?void 0:O.height)||0}px`,"--width":`${Er}px`,"--gap":`${$}px`,...i,...Dr(c,o)},onBlur:ge=>{le.current&&!ge.currentTarget.contains(ge.relatedTarget)&&(le.current=!1,re.current&&(re.current.focus({preventScroll:!0}),re.current=null))},onFocus:ge=>{ge.target instanceof HTMLElement&&ge.target.dataset.dismissible==="false"||le.current||(le.current=!0,re.current=ge.relatedTarget)},onMouseEnter:()=>Se(!0),onMouseMove:()=>Se(!0),onMouseLeave:()=>{fe||Se(!1)},onDragEnd:()=>Se(!1),onPointerDown:ge=>{ge.target instanceof HTMLElement&&ge.target.dataset.dismissible==="false"||Ce(!0)},onPointerUp:()=>Ce(!1)},S.filter(ge=>!ge.position&&E===0||ge.position===K).map((ge,A)=>{var y,Y;return B.createElement(Ir,{key:ge.id,icons:b,index:A,toast:ge,defaultRichColors:D,duration:(y=z==null?void 0:z.duration)!=null?y:ee,className:z==null?void 0:z.className,descriptionClassName:z==null?void 0:z.descriptionClassName,invert:r,visibleToasts:te,closeButton:(Y=z==null?void 0:z.closeButton)!=null?Y:g,interacting:fe,position:K,style:z==null?void 0:z.style,unstyled:z==null?void 0:z.unstyled,classNames:z==null?void 0:z.classNames,cancelButtonStyle:z==null?void 0:z.cancelButtonStyle,actionButtonStyle:z==null?void 0:z.actionButtonStyle,removeToast:w,toasts:S.filter(X=>X.position==ge.position),heights:J.filter(X=>X.position==ge.position),setHeights:W,expandByDefault:f,gap:$,loadingIcon:h,expanded:xe,pauseWhenPageIsHidden:T,swipeDirections:s.swipeDirections})})):null}))});const Mr={class:"min-h-screen bg-gray-100"},jr={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Ur={class:"px-4 py-6 sm:px-0"},Fr={class:"bg-white shadow rounded-lg p-6 mb-6"},Vr={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Nr={class:"flex flex-col items-center gap-2"},zr={class:"inline-flex items-center gap-2 text-blue-600"},Or={class:"text-2xl font-bold"},Br={class:"flex flex-col items-center gap-2"},Hr={class:"inline-flex items-center gap-2 text-green-600"},qr={class:"text-2xl font-bold"},Wr={class:"flex flex-col items-center gap-2"},Yr={class:"inline-flex items-center gap-2 text-red-600"},Kr={class:"text-2xl font-bold"},Xr={class:"flex flex-col items-center gap-2"},Gr={class:"inline-flex items-center gap-2 text-purple-600"},Qr={class:"text-2xl font-bold"},Jr={class:"bg-white shadow rounded-lg p-6"},Zr={class:"flex justify-between items-center mb-4"},ei={class:"space-y-4"},ti={class:"flex justify-between items-start mb-2"},si={class:"font-medium text-gray-900"},ai={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},oi={class:"font-medium"},li={class:"font-medium"},ni={class:"font-medium"},ri={class:"font-medium"},ii={key:0,class:"mt-4"},di={class:"grid grid-cols-7 gap-1 text-xs"},ui={class:"text-gray-500"},ci={class:"font-medium"},pi={__name:"Monitoring",setup(s){const t=v({total_websites:0,online_websites:0,offline_websites:0}),r=v([]),u=v("7days"),m=Be(()=>r.value.filter(c=>c.ssl_enabled).length),f=async()=>{try{const c=await N.get("/api/monitoring/uptime");t.value=c.data}catch{yt.error("Failed to fetch uptime statistics")}},g=async()=>{try{const k=(await N.get("/api/websites")).data.map(async D=>{try{const ee=await N.get(`/api/monitoring/stats/${D.id}?period=${u.value}`);return{...D,...ee.data.summary}}catch{return{...D,total_visits:0,total_unique_visitors:0,total_bandwidth:"0 B",average_response_time:0,uptime_percentage:0,daily_stats:[]}}});r.value=await Promise.all(k)}catch{yt.error("Failed to fetch website statistics")}},x=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"});return Ze(()=>{f(),g()}),(c,o)=>(n(),p("div",Mr,[e("div",jr,[e("div",Ur,[o[13]||(o[13]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-6"},"Monitoring",-1)),e("div",Fr,[o[5]||(o[5]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"System Overview",-1)),e("div",Vr,[e("div",Nr,[e("div",zr,[V(_(mt),{class:"size-5"}),e("span",Or,I(t.value.total_websites),1)]),o[1]||(o[1]=e("p",{class:"text-sm text-gray-500"},"Total Websites",-1))]),e("div",Br,[e("div",Hr,[V(_(St),{class:"size-5"}),e("span",qr,I(t.value.online_websites),1)]),o[2]||(o[2]=e("p",{class:"text-sm text-gray-500"},"Online",-1))]),e("div",Wr,[e("div",Yr,[V(_(Ct),{class:"size-5"}),e("span",Kr,I(t.value.offline_websites),1)]),o[3]||(o[3]=e("p",{class:"text-sm text-gray-500"},"Offline",-1))]),e("div",Xr,[e("div",Gr,[V(_(xt),{class:"size-5"}),e("span",Qr,I(m.value),1)]),o[4]||(o[4]=e("p",{class:"text-sm text-gray-500"},"SSL Enabled",-1))])])]),e("div",Jr,[e("div",Zr,[o[7]||(o[7]=e("h2",{class:"text-lg font-medium text-gray-900"},"Website Statistics",-1)),U(e("select",{"onUpdate:modelValue":o[0]||(o[0]=k=>u.value=k),onChange:g,class:"border-gray-300 rounded-md shadow-sm"},[...o[6]||(o[6]=[e("option",{value:"24hours"},"Last 24 Hours",-1),e("option",{value:"7days"},"Last 7 Days",-1),e("option",{value:"30days"},"Last 30 Days",-1),e("option",{value:"90days"},"Last 90 Days",-1)])],544),[[Je,u.value]])]),e("div",ei,[(n(!0),p(he,null,we(r.value,k=>(n(),p("div",{key:k.id,class:"border rounded-lg p-4"},[e("div",ti,[e("h3",si,I(k.domain),1),e("span",{class:De(["inline-flex items-center gap-1",k.current_is_online?"text-green-600":"text-red-600"])},[k.current_is_online?(n(),ie(_(St),{key:0,class:"size-4"})):(n(),ie(_(Ct),{key:1,class:"size-4"})),$e(" "+I(k.current_is_online?"Online":"Offline"),1)],2)]),e("div",ai,[e("div",null,[o[8]||(o[8]=e("p",{class:"text-gray-500"},"Visits",-1)),e("p",oi,I(k.total_visits),1)]),e("div",null,[o[9]||(o[9]=e("p",{class:"text-gray-500"},"Unique Visitors",-1)),e("p",li,I(k.total_unique_visitors),1)]),e("div",null,[o[10]||(o[10]=e("p",{class:"text-gray-500"},"Bandwidth",-1)),e("p",ni,I(k.total_bandwidth),1)]),e("div",null,[o[11]||(o[11]=e("p",{class:"text-gray-500"},"Avg Response Time",-1)),e("p",ri,I(k.average_response_time)+"ms",1)])]),k.daily_stats&&k.daily_stats.length>0?(n(),p("div",ii,[o[12]||(o[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Daily Stats",-1)),e("div",di,[(n(!0),p(he,null,we(k.daily_stats,D=>(n(),p("div",{key:D.date,class:"text-center"},[e("div",ui,I(x(D.date)),1),e("div",ci,I(D.visits),1)]))),128))])])):Z("",!0)]))),128))])])])])]))}},mi={class:"p-8 max-w-7xl mx-auto"},gi={class:"flex flex-wrap gap-2 mb-4"},vi={class:"flex flex-wrap justify-between items-start gap-4 mb-6"},fi={class:"flex justify-between items-center gap-4 p-4 bg-white rounded-lg border border-slate-200 mb-6"},bi={class:"flex gap-2 items-center"},yi={class:"relative w-72"},hi={class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"},xi={class:"bg-white rounded-lg border border-slate-200"},wi={key:0,class:"px-6 py-4 text-sm text-gray-500"},_i={key:1,class:"flex flex-col"},ki={class:"list-none"},$i={class:"grid grid-cols-12 gap-4 items-center px-6 py-4 cursor-pointer hover:bg-slate-50"},Si={class:"col-span-6 flex items-center gap-3"},Ci={class:"flex flex-col"},Ti={class:"text-slate-800 text-sm font-medium"},Ei={class:"text-slate-500 text-xs"},Ri={class:"col-span-3 text-sm text-slate-600"},Ai={class:"col-span-1 text-sm text-slate-600"},Pi={class:"col-span-2 flex justify-end gap-2 text-slate-500"},Li=["onClick"],Ii=["onClick"],Di=["onClick"],Mi={class:"pl-10 bg-slate-50/50"},ji={class:"col-span-6 flex items-center gap-2 text-sm text-slate-700"},Ui={class:"col-span-3 text-sm text-slate-600"},Fi={class:"col-span-1 text-sm text-slate-600"},Vi={class:"col-span-2 flex justify-end gap-2 text-slate-500"},Ni=["onClick"],zi=["onClick"],Oi=["onClick"],Bi={__name:"FoldersManagement",setup(s){const r=ct().params.websiteId,u=v([]),m=v(null),f=v(!1),g=v(""),x=v(""),c=v(""),o=async()=>{f.value=!0,g.value="";try{const[$,h]=await Promise.all([N.get(`/api/websites/${r}`),N.get(`/api/websites/${r}/folders`)]);m.value=$.data;const P=(h.data||[]).map(T=>({...T,id:Number(T.id),parent_id:T.parent_id==null?null:Number(T.parent_id)}));u.value=P}finally{f.value=!1}},k=$=>{const h=$.id,b=ee($.id),P=b?`/preview/folder/${h}/${b}`:`/preview/folder/${h}`,T=localStorage.getItem("adminToken")||"";if(!T){window.open(P,"_blank");return}const S=`${P}?token=${encodeURIComponent(T)}`;window.open(S,"_blank")},D=$=>{if(!m.value)return;const h=ee($.id);if(!h)return;const b=m.value.domain.split("."),P=b.length>2?b.slice(-2).join("."):m.value.domain,S=`${m.value.ssl_enabled?"https://":"http://"}${P}/${h}`;window.open(S,"_blank")},ee=$=>{const h=new Map((u.value||[]).map(T=>[String(T.id),T]));let b=h.get(String($));const P=[];for(;b&&(b.slug&&P.unshift(b.slug),!(!b.parent_id||(b=h.get(String(b.parent_id)),b&&String(b.id)===String($)))););return P.join("/")},i=Be(()=>{const $=[...u.value||[]],h=new Map($.map(J=>[String(J.id),J])),b=J=>J.sort((W,xe)=>(W.name||"").localeCompare(xe.name||"")),P=J=>$.filter(W=>String(W.parent_id)===String(J)),T=J=>!J.parent_id||!h.has(String(J.parent_id))||String(J.parent_id)===String(J.id),S=b($.filter(T)),C=[],ce=(J,W)=>{C.push({...J,depth:W}),b(P(J.id)).forEach(xe=>ce(xe,W+1))};return S.forEach(J=>ce(J,0)),C}),te=Be(()=>{const $=(c.value||"").trim().toLowerCase(),h=i.value,b=new Set(h.filter(S=>S.depth===0).map(S=>S.id));if(!$)return h.filter(S=>b.has(S.id));const P=h.filter(S=>(S.name||"").toLowerCase().includes($)||(S.slug||"").toLowerCase().includes($)),T=new Set(P.map(S=>{let C=S;for(;C&&C.depth>0;){const ce=h.find(J=>String(J.id)===String(C.parent_id));if(!ce)break;C=ce}return C?C.id:S.id}));return h.filter(S=>S.depth===0&&T.has(S.id))}),z=$=>{const h=(c.value||"").trim().toLowerCase(),P=i.value.filter(T=>String(T.parent_id)===String($));return h?P.filter(T=>(T.name||"").toLowerCase().includes(h)||(T.slug||"").toLowerCase().includes(h)):P},de=async $=>{var h,b;g.value="",x.value="";try{await N.delete(`/api/websites/${r}/folders/${$.id}`),u.value=(u.value||[]).filter(P=>P.id!==$.id),g.value="Đã xóa thư mục",x.value="success"}catch(P){g.value=((b=(h=P==null?void 0:P.response)==null?void 0:h.data)==null?void 0:b.error)||"Không thể xóa thư mục",x.value="error"}};return Ze(o),($,h)=>{const b=nt("router-link");return n(),p("div",mi,[e("div",gi,[V(b,{to:"/",class:"text-slate-500 text-sm font-medium hover:text-primary"},{default:ke(()=>[...h[1]||(h[1]=[$e("Bảng điều khiển",-1)])]),_:1}),h[2]||(h[2]=e("span",{class:"text-slate-500 text-sm font-medium"},"/",-1)),h[3]||(h[3]=e("span",{class:"text-slate-800 text-sm font-medium"},"Danh mục",-1))]),e("div",vi,[h[5]||(h[5]=e("div",{class:"flex flex-col gap-2"},[e("h1",{class:"text-slate-900 text-3xl font-bold leading-tight tracking-tight"},"Quản lý Danh mục"),e("p",{class:"text-slate-500 text-base"},"Thêm, sửa đổi và tổ chức các danh mục.")],-1)),V(b,{to:`/websites/${_(r)}/folders/new`,class:"flex items-center justify-center rounded-lg h-10 bg-primary text-white gap-2 text-sm font-bold px-4 hover:bg-primary/90"},{default:ke(()=>[...h[4]||(h[4]=[e("span",null,"Tạo thư mục",-1)])]),_:1},8,["to"])]),e("div",fi,[e("div",bi,[e("div",yi,[e("span",hi,[V(_(Ds),{class:"size-4"})]),U(e("input",{"onUpdate:modelValue":h[0]||(h[0]=P=>c.value=P),class:"w-full pl-10 pr-4 py-2 text-sm border border-slate-300 rounded-lg bg-background-light focus:ring-primary focus:border-primary",placeholder:"Tìm danh mục...",type:"text"},null,512),[[Q,c.value]])]),e("button",{type:"button",onClick:o,class:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg"},[V(_(Ms),{class:"size-5"})])]),V(b,{to:`/websites/${_(r)}/pages`,class:"text-sm text-primary"},{default:ke(()=>[...h[6]||(h[6]=[$e("Quay lại Pages",-1)])]),_:1},8,["to"])]),e("div",xi,[h[7]||(h[7]=Tt('<div class="grid grid-cols-12 gap-4 px-6 py-3 border-b border-slate-200"><div class="col-span-6 text-xs font-semibold text-slate-500 uppercase">Tên danh mục</div><div class="col-span-3 text-xs font-semibold text-slate-500 uppercase">Slug</div><div class="col-span-1 text-xs font-semibold text-slate-500 uppercase">Số page</div><div class="col-span-2 text-xs font-semibold text-slate-500 uppercase text-right">Hành động</div></div>',1)),f.value?(n(),p("div",wi,"Đang tải...")):(n(),p("div",_i,[(n(!0),p(he,null,we(te.value,P=>(n(),p("details",{key:P.id,class:"group border-b border-slate-200",open:""},[e("summary",ki,[e("div",$i,[e("div",Si,[V(_(js),{class:"size-4 text-slate-500 group-open:rotate-90 transition-transform"}),e("div",Ci,[e("p",Ti,I(P.name),1),e("p",Ei,I(z(P.id).length)+" danh mục con",1)])]),e("div",Ri,"/"+I(ee(P.id)),1),e("div",Ai,I(P.pages_count??0),1),e("div",Pi,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:ze(T=>k(P),["stop"])},[V(_(Nt),{class:"size-4"})],8,Li),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:ze(T=>D(P),["stop"])},[V(_(mt),{class:"size-4"})],8,Ii),V(b,{to:`/websites/${_(r)}/folders/${P.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:ke(()=>[V(_(Xt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:ze(T=>de(P),["stop"])},[V(_(gt),{class:"size-4"})],8,Di)])])]),e("div",Mi,[(n(!0),p(he,null,we(z(P.id),T=>(n(),p("div",{key:T.id,class:"grid grid-cols-12 gap-4 items-center px-6 py-3 border-t border-slate-200"},[e("div",ji,[V(_(Us),{class:"size-5 text-slate-400 -ml-1"}),e("span",null,I(T.name),1)]),e("div",Ui,"/"+I(ee(T.id)),1),e("div",Fi,I(T.pages_count??0),1),e("div",Vi,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:S=>k(T)},[V(_(Nt),{class:"size-4"})],8,Ni),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:S=>D(T)},[V(_(mt),{class:"size-4"})],8,zi),V(b,{to:`/websites/${_(r)}/folders/${T.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:ke(()=>[V(_(Xt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:S=>de(T)},[V(_(gt),{class:"size-4"})],8,Oi)])]))),128))])]))),128))])),g.value?(n(),p("div",{key:2,class:De(["px-6 py-3 text-sm",x.value==="error"?"text-red-600":"text-green-600"])},I(g.value),3)):Z("",!0)])])}}},Hi={class:"p-6"},qi={class:"max-w-xl mx-auto"},Wi={class:"flex items-center justify-between mb-4"},Yi={class:"text-xl font-semibold"},Ki=["value"],Xi={class:"flex justify-end gap-2"},Gi=["disabled"],ss={__name:"FolderEdit",setup(s){const t=ct(),r=wt(),u=t.params.websiteId,m=t.params.folderId,f=v(t.name==="FolderCreate"),g=v([]),x=v(""),c=v(""),o=v(null),k=v(!1),D=v(!1),ee=v(""),i=v(""),te=async()=>{const S=((await N.get(`/api/websites/${u}/folders`)).data||[]).map(C=>({...C,id:Number(C.id),parent_id:C.parent_id==null?null:Number(C.parent_id)}));g.value=S},z=P=>(P||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),de=()=>{k.value||(c.value=z(x.value))},$=Be(()=>{const P=[...g.value||[]],T=new Map(P.map(fe=>[String(fe.id),fe])),S=fe=>fe.sort((Ce,Me)=>(Ce.name||"").localeCompare(Me.name||"")),C=fe=>P.filter(Ce=>String(Ce.parent_id)===String(fe)),ce=fe=>!fe.parent_id||!T.has(String(fe.parent_id))||String(fe.parent_id)===String(fe.id),J=S(P.filter(ce)),W=[],xe=(fe,Ce)=>{W.push({...fe,depth:Ce}),S(C(fe.id)).forEach(Me=>xe(Me,Ce+1))};return J.forEach(fe=>xe(fe,0)),W.filter(fe=>String(fe.id)!==String(m))}),h=()=>{if(!m||f.value)return;const P=(g.value||[]).find(T=>T.id===Number(m));P&&(x.value=P.name||"",c.value=P.slug||"",o.value=P.parent_id==null?null:Number(P.parent_id))},b=async()=>{var P,T,S,C,ce;D.value=!0,ee.value="";try{const J={name:x.value,slug:c.value,parent_id:o.value==null?null:Number(o.value)};let W;f.value?W=await N.post(`/api/websites/${u}/folders`,J):W=await N.put(`/api/websites/${u}/folders/${m}`,J),ee.value="Đã lưu thư mục",i.value="success",f.value?r.push(`/websites/${u}/folders`):(o.value=((P=W==null?void 0:W.data)==null?void 0:P.parent_id)==null?null:Number(W.data.parent_id),await te(),h())}catch(J){ee.value=((S=(T=J==null?void 0:J.response)==null?void 0:T.data)==null?void 0:S.message)||((ce=(C=J==null?void 0:J.response)==null?void 0:C.data)==null?void 0:ce.error)||"Lưu thư mục thất bại",i.value="error"}finally{D.value=!1}};return Ze(async()=>{await te(),h()}),(P,T)=>{const S=nt("router-link");return n(),p("div",Hi,[e("div",qi,[e("div",Wi,[e("h1",Yi,I(f.value?"Tạo thư mục":"Sửa thư mục"),1),V(S,{to:`/websites/${_(u)}/folders`,class:"text-sm text-primary"},{default:ke(()=>[...T[4]||(T[4]=[$e("Quay lại danh sách",-1)])]),_:1},8,["to"])]),e("form",{onSubmit:ze(b,["prevent"]),class:"bg-white border border-gray-200 rounded-md p-4 space-y-4"},[e("div",null,[T[5]||(T[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),U(e("input",{"onUpdate:modelValue":T[0]||(T[0]=C=>x.value=C),onInput:de,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[Q,x.value]])]),e("div",null,[T[6]||(T[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),U(e("input",{"onUpdate:modelValue":T[1]||(T[1]=C=>c.value=C),onInput:T[2]||(T[2]=C=>k.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[Q,c.value]]),T[7]||(T[7]=e("div",{class:"text-xs text-gray-500 mt-1"},"Sẽ tự thêm số nếu trùng trong domain",-1))]),e("div",null,[T[9]||(T[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),U(e("select",{"onUpdate:modelValue":T[3]||(T[3]=C=>o.value=C),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[T[8]||(T[8]=e("option",{value:null},"(Không có)",-1)),(n(!0),p(he,null,we($.value,C=>(n(),p("option",{key:C.id,value:C.id},I("↳ ".repeat(C.depth)+C.name),9,Ki))),128))],512),[[Je,o.value]])]),e("div",Xi,[V(S,{to:`/websites/${_(u)}/folders`,class:"px-4 py-2 border border-gray-300 rounded-md"},{default:ke(()=>[...T[10]||(T[10]=[$e("Hủy",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:D.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md disabled:bg-blue-400"},I(f.value?"Tạo":"Lưu"),9,Gi)]),ee.value?(n(),p("div",{key:0,class:De(["text-sm",i.value==="error"?"text-red-600":"text-green-600"])},I(ee.value),3)):Z("",!0)],32)])])}}},Qi={class:"max-w-3xl mx-auto"},Ji={key:0,class:"mb-6 rounded-md border border-green-200 bg-green-50 px-4 py-3 text-green-700"},Zi={key:1,class:"mb-6 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-red-700"},ed={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},td={class:"grid grid-cols-1 gap-4"},sd={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},ad={class:"grid grid-cols-1 gap-4"},od={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},ld={class:"grid grid-cols-1 gap-4"},nd={class:"flex justify-end"},rd=["disabled"],id={__name:"Settings",setup(s){const t=v({APP_NAME:"",APP_URL:"",SSL_EMAIL:"",CLOUDFLARE_API_TOKEN:"",CLOUDFLARE_ZONE_ID:""}),r=v(!1),u=v(""),m=v(""),f=async()=>{try{const{data:x}=await N.get("/api/settings");t.value={...t.value,...x}}catch{m.value="Không tải được cài đặt"}},g=async()=>{var x,c;r.value=!0,m.value="",u.value="";try{await N.put("/api/settings",t.value),u.value="Đã lưu cài đặt thành công"}catch(o){const k=((c=(x=o==null?void 0:o.response)==null?void 0:x.data)==null?void 0:c.error)||"Lưu cài đặt thất bại";m.value=k}finally{r.value=!1}};return Ze(f),(x,c)=>(n(),p("div",Qi,[c[13]||(c[13]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Cài đặt hệ thống",-1)),u.value?(n(),p("div",Ji,I(u.value),1)):Z("",!0),m.value?(n(),p("div",Zi,I(m.value),1)):Z("",!0),e("form",{onSubmit:ze(g,["prevent"])},[e("div",ed,[c[7]||(c[7]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Ứng dụng",-1)),e("div",td,[e("div",null,[c[5]||(c[5]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_NAME",-1)),U(e("input",{"onUpdate:modelValue":c[0]||(c[0]=o=>t.value.APP_NAME=o),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"VPS Manager"},null,512),[[Q,t.value.APP_NAME]])]),e("div",null,[c[6]||(c[6]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_URL",-1)),U(e("input",{"onUpdate:modelValue":c[1]||(c[1]=o=>t.value.APP_URL=o),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"https://vps.yourdomain.com"},null,512),[[Q,t.value.APP_URL]])])])]),e("div",sd,[c[9]||(c[9]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"SSL",-1)),e("div",ad,[e("div",null,[c[8]||(c[8]=e("label",{class:"block text-sm text-gray-600 mb-1"},"SSL_EMAIL",-1)),U(e("input",{"onUpdate:modelValue":c[2]||(c[2]=o=>t.value.SSL_EMAIL=o),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"admin@yourdomain.com"},null,512),[[Q,t.value.SSL_EMAIL]])])])]),e("div",od,[c[12]||(c[12]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Cloudflare",-1)),e("div",ld,[e("div",null,[c[10]||(c[10]=e("label",{class:"block text-sm text-gray-600 mb-1"},"CLOUDFLARE_API_TOKEN",-1)),U(e("input",{"onUpdate:modelValue":c[3]||(c[3]=o=>t.value.CLOUDFLARE_API_TOKEN=o),class:"w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[Q,t.value.CLOUDFLARE_API_TOKEN]])]),e("div",null,[c[11]||(c[11]=e("label",{class:"block text-sm text-gray-600 mb-1"},"CLOUDFLARE_ZONE_ID",-1)),U(e("input",{"onUpdate:modelValue":c[4]||(c[4]=o=>t.value.CLOUDFLARE_ZONE_ID=o),class:"w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[Q,t.value.CLOUDFLARE_ZONE_ID]])])])]),e("div",nd,[e("button",{type:"submit",onClick:ze(g,["prevent"]),disabled:r.value,class:De(["bg-blue-600 text-white px-4 py-2 rounded-md",{"opacity-50 cursor-not-allowed":r.value}])},I(r.value?"Đang lưu...":"Lưu cài đặt"),11,rd)])],32)]))}},dd={class:"min-h-screen bg-gray-100"},ud={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},cd={class:"px-4 py-6 sm:px-0"},pd={class:"flex justify-between items-center mb-6"},md={class:"text-3xl font-bold text-gray-900"},gd={class:"flex items-center gap-2"},vd=["disabled","title"],fd={class:"bg-white shadow rounded-lg p-6"},bd={class:"space-y-4"},yd={class:"flex justify-between items-start"},hd={class:"inline-flex items-center gap-2 mb-2"},xd=["checked","onChange"],wd={class:"font-medium"},_d={class:"text-sm text-gray-500"},kd={class:"text-sm text-gray-500"},$d={class:"text-sm text-gray-500"},Sd={class:"flex gap-2"},Cd=["href"],Td=["href"],Ed=["onClick","disabled"],Rd={key:0,class:"text-center text-gray-500"},Ad={__name:"PagesManagement",setup(s){const r=ct().params.websiteId,u=v(null),m=v([]),f=v([]),g=v([]),x=v([]),c=v(!1),o=v("");v(!1);const k=Be(()=>{const S=o.value.trim().toLowerCase();return S?m.value.filter(C=>(C.title||"").toLowerCase().includes(S)||(C.path||"").toLowerCase().includes(S)):m.value}),D=async()=>{const S=await N.get(`/api/websites/${r}`);u.value=S.data},ee=async()=>{const S=await N.get(`/api/websites/${r}/pages`);m.value=S.data.map(C=>({...C,__site:u.value}))},i=async()=>{const S=await N.get("/api/websites");f.value=S.data||[]},te=Be(()=>{var C;return(((C=u.value)==null?void 0:C.domain)||"").trim().replace(/^[^.]+\./,"")}),z=Be(()=>{const S=te.value;return S&&(f.value||[]).find(C=>String(C.domain||"").trim()===S)||null}),de=Be(()=>{const S=u.value;return S&&String(S.domain||"").trim().split(".").length>2&&z.value?`/websites/${z.value.id}/subdomains`:"/websites"}),$=async S=>{if(confirm(`Delete page ${S.path}?`))try{x.value=[...x.value,S.id],await N.delete(`/api/pages/${S.id}`),yt.success("Page deleted"),g.value=g.value.filter(C=>C!==S.id),await ee()}catch{yt.error("Failed to delete page")}finally{x.value=x.value.filter(C=>C!==S.id)}},h=S=>{const C=S.__site||u.value;if(!C)return"#";const ce=(C.ssl_enabled?"https://":"http://")+C.domain,J=S.path||"/",W=S.filename||"";if(W.toLowerCase()==="index.html")return ce+J;const xe=J.endsWith("/")?"":"/";return ce+J+xe+W},b=S=>{const C=S.__site||u.value;if(!C)return"#";const ce=C.id,J=((S==null?void 0:S.path)||"/").trim(),W=J==="/"?`/preview/${ce}`:`/preview/${ce}${J.startsWith("/")?"":"/"}${J}`,xe=localStorage.getItem("adminToken")||"";if(!xe)return W;const Se=W.includes("?")?"&":"?";return`${W}${Se}token=${encodeURIComponent(xe)}`},P=S=>{const C=S.id;g.value.includes(C)?g.value=g.value.filter(ce=>ce!==C):g.value=[...g.value,C]},T=async()=>{if(g.value.length!==0&&confirm(`Delete ${g.value.length} selected pages?`)){c.value=!0;try{const S=[...g.value];await Promise.all(S.map(async C=>{x.value=[...x.value,C];try{await N.delete(`/api/pages/${C}`)}finally{x.value=x.value.filter(ce=>ce!==C)}})),yt.success("Selected pages deleted"),g.value=[],await ee()}catch{yt.error("Failed to delete selected pages")}finally{c.value=!1}}};return Ze(async()=>{await D(),await ee(),await i()}),(S,C)=>{var J;const ce=nt("router-link");return n(),p("div",dd,[e("div",ud,[e("div",cd,[e("div",pd,[e("h1",md,I(((J=u.value)==null?void 0:J.domain)||"..."),1),e("div",gd,[V(ce,{to:de.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Back"},{default:ke(()=>[...C[1]||(C[1]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5"}),e("path",{d:"M12 19l-7-7 7-7"})],-1)])]),_:1},8,["to"]),U(e("input",{"onUpdate:modelValue":C[0]||(C[0]=W=>o.value=W),placeholder:"Search",class:"h-9 w-56 rounded-md border border-gray-300 px-3"},null,512),[[Q,o.value]]),V(ce,{to:`/websites/${_(r)}/pages/new`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Add Page"},{default:ke(()=>[...C[2]||(C[2]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])]),_:1},8,["to"]),e("button",{onClick:T,disabled:g.value.length===0||c.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:`Delete Selected (${g.value.length})`},[c.value?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):(n(),ie(_(gt),{key:1,class:"size-4"}))],8,vd)])]),e("div",fd,[e("div",bd,[(n(!0),p(he,null,we(k.value,W=>{var xe,Se;return n(),p("div",{key:W.id,class:"border rounded-lg p-4"},[e("div",yd,[e("div",null,[e("label",hd,[e("input",{type:"checkbox",checked:g.value.includes(W.id),onChange:fe=>P(W)},null,40,xd)]),e("h4",wd,I(W.title||"(No title)"),1),e("p",_d,"Path: "+I(W.path),1),e("p",kd,"File: "+I(W.filename),1),e("p",$d,"Website: "+I((xe=W.__site)==null?void 0:xe.domain),1)]),e("div",Sd,[e("a",{href:h(W),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Live"},[V(_(gs),{class:"size-4"})],8,Cd),e("a",{href:b(W),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[...C[3]||(C[3]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,Td),V(ce,{to:`/websites/${((Se=W.__site)==null?void 0:Se.id)||_(r)}/pages/${W.id}`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},{default:ke(()=>[V(_(us),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:fe=>$(W),disabled:x.value.includes(W.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[x.value.includes(W.id)?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):(n(),ie(_(gt),{key:1,class:"size-4"}))],8,Ed)])])])}),128)),k.value.length===0?(n(),p("div",Rd,"No pages found")):Z("",!0)])])])])])}}},Pd="modulepreload",Ld=function(s){return"/"+s},as={},_e=function(t,r,u){let m=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),x=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));m=Promise.allSettled(r.map(c=>{if(c=Ld(c),c in as)return;as[c]=!0;const o=c.endsWith(".css"),k=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${k}`))return;const D=document.createElement("link");if(D.rel=o?"stylesheet":Pd,o||(D.as="script"),D.crossOrigin="",D.href=c,x&&D.setAttribute("nonce",x),document.head.appendChild(D),o)return new Promise((ee,i)=>{D.addEventListener("load",ee),D.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${c}`)))})}))}function f(g){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=g,window.dispatchEvent(x),!x.defaultPrevented)throw g}return m.then(g=>{for(const x of g||[])x.status==="rejected"&&f(x.reason);return t().catch(f)})},Id={class:"min-h-screen bg-gray-100"},Dd={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},Md={class:"px-4 py-6 sm:px-0"},jd={class:"flex justify-between items-center mb-6"},Ud={class:"text-3xl font-bold text-gray-900"},Fd={class:"flex items-center gap-2"},Vd=["href"],Nd=["href"],zd={class:"bg-white shadow rounded-lg p-6"},Od={class:"mb-4"},Bd={class:"mb-4"},Hd={class:"mb-4"},qd={class:"mb-4"},Wd={class:"flex items-center justify-between"},Yd={class:"flex items-center gap-3"},Kd={class:"mt-1 border border-gray-300 rounded-md p-3 space-y-3"},Xd={class:"space-y-1"},Gd=["disabled","onClick"],Qd=["value","onChange"],Jd={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Zd={class:"bg-white rounded-lg shadow p-6 w-full max-w-md"},eu={class:"flex items-center justify-between mb-4"},tu={class:"space-y-3"},su=["value"],au={class:"pt-2 border-t border-gray-200"},ou={class:"text-xs text-gray-600"},lu={class:"flex justify-end gap-2 mt-6"},nu={class:"mb-4"},ru={key:0,class:"mb-4 space-y-4"},iu={key:1,class:"mb-4 space-y-4"},du={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},uu={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},cu={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},pu=["value"],mu={class:"text-sm"},gu={class:"space-y-3"},vu={class:"flex items-center gap-2"},fu={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},bu=["onClick"],yu=["onUpdate:modelValue"],hu=["onUpdate:modelValue"],xu={class:"space-y-3"},wu={class:"flex items-center gap-2"},_u={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},ku=["onClick"],$u=["onUpdate:modelValue"],Su=["onUpdate:modelValue"],Cu={key:2,class:"mb-4"},Tu={key:3,class:"mb-4"},Eu={key:0,class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Ru={class:"flex justify-end gap-3"},Au=["disabled"],Pu={key:0,class:"inline-flex items-center gap-2"},Lu={key:1},os={__name:"PageEdit",setup(s){const t=ct(),r=wt(),u=t.params.websiteId,m=t.params.pageId,f=v(t.name==="PageCreate"||m==="new"||!m),g=v("blank"),x=v(!1),c=v(""),o=v({title:"",location:"",phone:"",galleryRaw:"",about1:"",pageContent:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),k=v([]),D=v([]),ee=v(null),i=v(""),te=v(null),z=v(!1),de=v(""),$=v(!1);v(null),v(""),v(""),v(null);const h=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],b=v({path:"",filename:"",title:"",content:""}),P=v(null),T=v([]),S=v(null),C=v(!1),ce=v(null),J=v(null),W=async()=>{if(f.value)return;const a=(await N.get(`/api/pages/${m}`)).data;if(b.value={path:a.path,filename:a.filename,title:a.title||"",content:a.content||""},a.template_type){if(g.value=a.template_type,x.value=!!a.template_type,(a.template_type==="hotel-detail"||a.template_type==="hotel-detail-1")&&a.template_data){let j=a.template_data.galleryRaw||"";!j&&Array.isArray(a.template_data.gallery)&&(j=a.template_data.gallery.join(`
`)),o.value={title:a.template_data.title||"",location:a.template_data.location||a.template_data.location_text||"",phone:a.template_data.phone||"",galleryRaw:j,about1:a.template_data.about1||"",amenities:Array.isArray(a.template_data.amenities)?a.template_data.amenities:[],info:Array.isArray(a.template_data.info)?a.template_data.info:[{subject:"",description:""},{subject:"",description:""}],faqs:Array.isArray(a.template_data.faqs)?a.template_data.faqs:[{q:"",a:""},{q:"",a:""}]}}}else g.value="blank",x.value=!1;D.value=(a.folders||[]).map(j=>Number(j.id)),ee.value=a.primary_folder_id==null?null:Number(a.primary_folder_id)},xe=async()=>{const M=(b.value.title||"").trim();let a="";try{a=(await N.get("/templates/laravel-hotel-1/page/index.html")).data||""}catch{a='<!DOCTYPE html><html><head><meta charset="utf-8"><title>{{TITLE}}</title></head><body></body></html>'}let j="",H="";try{j=(await N.get("/templates/_shared/header.html")).data||""}catch{}try{H=(await N.get("/templates/_shared/footer.html")).data||""}catch{}j&&(a=a.replace(/<header[^>]*>[\s\S]*?<\/header>/i,j)),H&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(a)?a=a.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,H):/<\/body>/i.test(a)?a=a.replace(/<\/body>/i,H+"</body>"):a+=`
`+H);const d={title:M||"Page",content:o.value.pageContent||""},G=`<script type="application/json" id="page-data">${JSON.stringify(d)}<\/script>`;return a=a.replace(/<\/body>/i,G+`
</body>`),a=a.replace(/<title>[^<]*<\/title>/i,`<title>${d.title}</title>`),a||'<!DOCTYPE html><html><head><meta charset="utf-8"><title>'+(M||"Page")+'</title></head><body><div id="page-content">'+(o.value.pageContent||"")+"</div></body></html>"},Se=async()=>{const M=(o.value.galleryRaw||"").split(`
`).map(qe=>qe.trim()).filter(Boolean),j=(D.value||[]).reduce((qe,Ye)=>{if(qe==null)return Ye;const ft=O(qe);return O(Ye)>ft?Ye:qe},null),H=E(j),d=H.length>1?[H[0],H[H.length-1]]:H,G=(b.value.title||"").trim(),ve=["Home",...d.map(qe=>qe.name||""),G];let ae=(await N.get("/templates/hotel-detail-1/index.html")).data||"",Pe="",Te="";try{Pe=(await N.get("/templates/_shared/header.html")).data||""}catch{}try{Te=(await N.get("/templates/_shared/footer.html")).data||""}catch{}Pe&&(ae=ae.replace(/<header[^>]*>[\s\S]*?<\/header>/i,Pe)),Te&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(ae)?ae=ae.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,Te):/<\/body>/i.test(ae)?ae=ae.replace(/<\/body>/i,Te+"</body>"):ae+=`
`+Te);const We=o.value.amenities||[],et=M.map(qe=>String(qe).replace(/<\/script>/gi,"<\\/script>")),tt={title:G||"Hotel",location:o.value.location||"",location_text:o.value.location||"",phone:o.value.phone||"",about1:o.value.about1||"",amenities:We,faqs:o.value.faqs||[],info:o.value.info||[],gallery:et,breadcrumb_items:ve.filter(Boolean)},vt=`<script type="application/json" id="page-data">${JSON.stringify(tt)}<\/script>`;return ae=ae.replace("{{GALLERY_DATA_SCRIPT}}",vt),ae=ae.replace(/<title>[^<]*<\/title>/i,`<title>${tt.title}</title>`),ae},fe=async()=>{const M=await N.get(`/api/websites/${u}`);P.value=M.data},Ce=async()=>{try{const M=await N.get("/api/websites");T.value=M.data||[]}catch{T.value=[]}},Me=Be(()=>{const M=P.value;if(!M)return"/websites";const a=(M.domain||"").trim(),j=a.replace(/^[^.]+\./,"");if(j&&j!==a){const H=(T.value||[]).find(d=>String(d.domain).trim()===j);if(H&&H.id)return`/websites/${H.id}/subdomains`}return"/websites"}),Fe=async()=>{try{const M=await N.get("/api/settings");S.value=M.data||{}}catch{S.value={}}},je=async()=>{const j=((await N.get(`/api/websites/${u}/folders`)).data||[]).map(H=>({...H,id:Number(H.id),parent_id:H.parent_id==null?null:Number(H.parent_id)}));k.value=j},He=async()=>{const M=(i.value||"").trim();if(!M)return;let a=(de.value||"").trim();a||(a=Ae(M));const j={name:M,slug:a};te.value&&(j.parent_id=Number(te.value));const d=(await N.post(`/api/websites/${u}/folders`,j)).data;k.value=[...k.value,d],D.value=[...D.value,d.id],i.value="",te.value=null,de.value="",$.value=!1,z.value=!1},re=async()=>{var M,a,j,H;C.value=!0;try{if(f.value){let d;if(g.value==="blank"?d=c.value||b.value.content||"":g.value==="page"?d=await xe():d=await Se(),b.value.content=d,b.value.filename=(b.value.filename||"index.html").trim(),!(b.value.path||"").trim()){const ae=(D.value||[]).reduce((Te,We)=>{if(Te==null)return We;const et=O(Te);return O(We)>et?We:Te},null),Pe=ee.value||ae;if(Pe){const Te=K(Pe);Te&&(b.value.path=`/${Te}`)}}b.value.path||(b.value.path="/");const ve={...b.value};if(g.value==="page")ve.template_type="page",ve.template_data={title:(b.value.title||"").trim()||"Page",content:o.value.pageContent||""};else if(g.value!=="blank"){ve.template_type=g.value;const Ne=(o.value.galleryRaw||"").split(`
`).map(ae=>ae.trim()).filter(Boolean);ve.template_data={title:(o.value.title||b.value.title||"").trim()||"Hotel",location:o.value.location||"",location_text:o.value.location||"",phone:o.value.phone||"",about1:o.value.about1||"",amenities:o.value.amenities||[],faqs:o.value.faqs||[],info:o.value.info||[],gallery:Ne,galleryRaw:o.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(o.value.title||"").trim()].filter(Boolean)}}else ve.template_type="blank",ve.template_data=null;ve.folder_ids=[...D.value],ve.primary_folder_id=ee.value,await N.post(`/api/websites/${u}/pages`,ve)}else{const d={...b.value};let G;if(g.value==="blank"?G=b.value.content||"":g.value==="page"?G=await xe():G=await Se(),d.content=G,d.filename=(d.filename||"index.html").trim(),g.value==="page")d.template_type="page",d.template_data={title:(b.value.title||"").trim()||"Page",content:o.value.pageContent||""};else if(g.value!=="blank"){d.template_type=g.value;const Ne=(o.value.galleryRaw||"").split(`
`).map(ae=>ae.trim()).filter(Boolean);d.template_data={title:(o.value.title||b.value.title||"").trim()||"Hotel",location:o.value.location||"",location_text:o.value.location||"",phone:o.value.phone||"",about1:o.value.about1||"",amenities:o.value.amenities||[],faqs:o.value.faqs||[],info:o.value.info||[],gallery:Ne,galleryRaw:o.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(o.value.title||"").trim()].filter(Boolean)}}else d.template_type="blank",d.template_data=null;if(!(d.path||"").trim()){const ae=(D.value||[]).reduce((Te,We)=>{if(Te==null)return We;const et=O(Te);return O(We)>et?We:Te},null),Pe=ee.value||ae;if(Pe){const Te=K(Pe);Te&&(d.path=`/${Te}`)}}d.path||(d.path="/"),d.folder_ids=[...D.value],d.primary_folder_id=ee.value,await N.put(`/api/pages/${m}`,d)}r.push(`/websites/${u}/pages`)}catch(d){const G=((a=(M=d==null?void 0:d.response)==null?void 0:M.data)==null?void 0:a.message)||((H=(j=d==null?void 0:d.response)==null?void 0:j.data)==null?void 0:H.error)||(d==null?void 0:d.message)||"Lưu trang thất bại";alert(G)}finally{C.value=!1}},le=()=>{if(!P.value)return"#";const M=(P.value.ssl_enabled?"https://":"http://")+P.value.domain,a=b.value.path||"/",j=b.value.filename||"",H=a.endsWith("/")?"":"/";return j.toLowerCase()==="index.html"?M+a:M+a+H+j},w=()=>{var ve;if(!P.value)return"#";const M=(((ve=S.value)==null?void 0:ve.APP_URL)||(P.value.ssl_enabled?"https://":"http://")+P.value.domain).replace(/\/$/,""),a=(b.value.path||"/").trim();let j;if(a==="/"||a==="")j=`${M}/preview/${P.value.id}`;else{const Ne=a.replace(/^\//,"");j=`${M}/preview/${P.value.id}/${encodeURIComponent(Ne)}`}const H=localStorage.getItem("adminToken"),d=new URLSearchParams;H&&d.set("token",H),d.set("hide_preview_bar","1"),d.set("v",String(Date.now()));const G=d.toString();return G?`${j}?${G}`:j},K=M=>{if(!M)return"";const a=new Map((k.value||[]).map(d=>[String(d.id),d]));let j=a.get(String(M));const H=[];for(;j&&(j.slug&&H.unshift(j.slug),!(!j.parent_id||(j=a.get(String(j.parent_id)),j&&String(j.id)===String(M)))););return H.join("/")},E=M=>{if(!M)return[];const a=new Map((k.value||[]).map(G=>[String(G.id),G])),j=[],H=new Set;let d=a.get(String(M));for(;d&&!H.has(d.id)&&(j.unshift(d),H.add(d.id),!!d.parent_id);)d=a.get(String(d.parent_id));return j},O=M=>{let a=0;const j=k.value||[],H=new Map(j.map(G=>[String(G.id),G]));let d=j.find(G=>String(G.id)===String(M));for(;d&&d.parent_id!=null;)a+=1,d=H.get(String(d.parent_id));return a},ne=Be(()=>{const M=[...k.value||[]],a=new Map(M.map(ae=>[String(ae.id),ae])),j=ae=>ae.sort((Pe,Te)=>(Pe.name||"").localeCompare(Te.name||"")),H=ae=>M.filter(Pe=>String(Pe.parent_id)===String(ae)),d=ae=>!ae.parent_id||!a.has(String(ae.parent_id))||String(ae.parent_id)===String(ae.id),G=j(M.filter(d)),ve=[],Ne=(ae,Pe)=>{ve.push({...ae,depth:Pe}),j(H(ae.id)).forEach(Te=>Ne(Te,Pe+1))};return G.forEach(ae=>Ne(ae,0)),ve}),Ae=M=>(M||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),ge=()=>{$.value||(de.value=Ae(i.value))},A=M=>{if(ee.value===M){ee.value=null;return}ee.value||(ee.value=M)},y=M=>{if(D.value.includes(M)){const a=k.value.find(j=>j.id===M);if(a&&a.parent_id){const j=H=>{if(!H)return;D.value.includes(H)||D.value.push(H);const d=k.value.find(G=>G.id===H);d&&d.parent_id&&j(d.parent_id)};j(a.parent_id)}}ee.value&&!D.value.includes(ee.value)&&(ee.value=null)},Y=()=>{o.value.faqs=[...o.value.faqs||[],{q:"",a:""}]},X=()=>{o.value.info=[...o.value.info||[],{subject:"",description:""}]},oe=M=>{o.value.faqs=(o.value.faqs||[]).filter((a,j)=>j!==M)},se=M=>{o.value.info=(o.value.info||[]).filter((a,j)=>j!==M)},Ue=Be(()=>{const a=(b.value.content||"").split(`
`).length;return a>0?a:1}),L=()=>{ce.value&&J.value&&(ce.value.scrollTop=J.value.scrollTop)},Ee=async()=>{if(window.tinymce)return;const{default:M}=await _e(async()=>{const{default:a}=await import("./tinymce.js").then(j=>j.t);return{default:a}},[]);await _e(()=>import("./tinymce-plugins.js").then(a=>a.i),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.a),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.q),[]),await _e(()=>import("./tinymce-skins.js").then(a=>a.s),[]),await _e(()=>import("./tinymce-skins.js").then(a=>a.c),[]),await _e(()=>import("./tinymce-skins.js").then(a=>a.a),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.b),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.c),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.d),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.e),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.f),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.g),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.h),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.j),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.k),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.l),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.m),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.n),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.o),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.p),[]),window.tinymce=M},Ve=async()=>{await Vt();const M=document.getElementById("page-content-editor");if(M){await Ee();const a=window.tinymce.get("page-content-editor");a&&a.remove(),M.value=o.value.pageContent||"",window.tinymce.init({selector:"#page-content-editor",menubar:!0,plugins:"link lists table image code charmap anchor searchreplace visualblocks fullscreen insertdatetime media help wordcount",toolbar:"undo redo | formatselect | bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media table | charmap anchor | code fullscreen | help",height:500,table_toolbar:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",image_title:!0,automatic_uploads:!1,file_picker_types:"image",content_style:"body { font-family: Arial, sans-serif; font-size: 14px; }",setup:j=>{j.on("Change KeyUp SetContent",()=>{o.value.pageContent=j.getContent()||""})}}).then(j=>{const H=j&&j[0];H&&(o.value.pageContent||"").trim()&&H.setContent(o.value.pageContent)})}};return kt(g,async M=>{M==="page"&&await Ve()}),Ze(async()=>{await Fe(),await Promise.all([fe(),Ce()]),await je(),await W(),await Vt();const M=document.getElementById("about1-editor");M&&(await Ee(),M.value=o.value.about1||"",window.tinymce.init({selector:"#about1-editor",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:a=>{a.on("Change KeyUp SetContent",()=>{o.value.about1=a.getContent()||""})}}).then(a=>{const j=a&&a[0];j&&(o.value.about1||"").trim()&&j.setContent(o.value.about1)})),g.value==="page"&&await Ve()}),Bt(()=>{if(window.tinymce){const M=window.tinymce.get("about1-editor");M&&M.remove();const a=window.tinymce.get("page-content-editor");a&&a.remove()}}),(M,a)=>{var H;const j=nt("router-link");return n(),p("div",Id,[e("div",Dd,[e("div",Md,[e("div",jd,[e("h1",Ud,I(f.value?"Create Page":"Edit Page"),1),e("div",Fd,[f.value?Z("",!0):(n(),p("a",{key:0,href:le(),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[V(_(gs),{class:"size-4"})],8,Vd)),f.value?Z("",!0):(n(),p("a",{key:1,href:w(),target:"_blank",class:"px-3 h-9 inline-flex items-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 text-sm"},"Preview",8,Nd)),V(j,{to:Me.value,class:"px-4 py-2 rounded-md border border-gray-300 bg-white"},{default:ke(()=>[...a[20]||(a[20]=[$e("Back",-1)])]),_:1},8,["to"])])]),e("div",zd,[e("form",{onSubmit:ze(re,["prevent"]),novalidate:""},[e("div",Od,[a[21]||(a[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Path",-1)),U(e("input",{"onUpdate:modelValue":a[0]||(a[0]=d=>b.value.path=d),type:"text",placeholder:"/about-us",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,b.value.path]])]),e("div",Bd,[a[22]||(a[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Filename",-1)),U(e("input",{"onUpdate:modelValue":a[1]||(a[1]=d=>b.value.filename=d),type:"text",placeholder:"index.html",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,b.value.filename]])]),e("div",Hd,[a[23]||(a[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Title",-1)),U(e("input",{"onUpdate:modelValue":a[2]||(a[2]=d=>b.value.title=d),onInput:a[3]||(a[3]=d=>o.value.title=b.value.title),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[Q,b.value.title]])]),e("div",qd,[e("div",Wd,[a[25]||(a[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thư mục",-1)),e("div",Yd,[V(j,{to:`/websites/${_(u)}/folders`,class:"text-sm text-primary"},{default:ke(()=>[...a[24]||(a[24]=[$e("Quản lý thư mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:a[4]||(a[4]=d=>z.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",Kd,[e("div",Xd,[a[26]||(a[26]=e("label",{class:"text-sm text-gray-700"},"Chọn thư mục",-1)),(n(!0),p(he,null,we(ne.value,d=>(n(),p("div",{key:d.id,class:"flex items-center gap-2 cursor-pointer"},[e("button",{type:"button",class:"text-yellow-500 text-xs",disabled:ee.value&&ee.value!==d.id,onClick:G=>A(d.id)},I(ee.value===d.id?"★":"☆"),9,Gd),U(e("input",{type:"checkbox",value:d.id,"onUpdate:modelValue":a[5]||(a[5]=G=>D.value=G),onChange:G=>y(d.id),class:"rounded cursor-pointer"},null,40,Qd),[[At,D.value]]),e("span",{class:"text-sm",style:lt({paddingLeft:(d.depth>0?d.depth*16:0)+"px"})},I("↳ ".repeat(d.depth))+I(d.name),5)]))),128))])]),z.value?(n(),p("div",Jd,[e("div",Zd,[e("div",eu,[a[27]||(a[27]=e("h3",{class:"text-lg font-semibold"},"Tạo thư mục",-1)),e("button",{type:"button",onClick:a[6]||(a[6]=d=>z.value=!1),class:"text-gray-500"},"✕")]),e("div",tu,[e("div",null,[a[28]||(a[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),U(e("input",{"onUpdate:modelValue":a[7]||(a[7]=d=>i.value=d),onInput:ge,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[Q,i.value]])]),e("div",null,[a[29]||(a[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),U(e("input",{"onUpdate:modelValue":a[8]||(a[8]=d=>de.value=d),onInput:a[9]||(a[9]=d=>$.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[Q,de.value]])]),e("div",null,[a[31]||(a[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),U(e("select",{"onUpdate:modelValue":a[10]||(a[10]=d=>te.value=d),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[a[30]||(a[30]=e("option",{value:null},"(Không có)",-1)),(n(!0),p(he,null,we(ne.value,d=>(n(),p("option",{key:d.id,value:d.id},I("↳ ".repeat(d.depth)+d.name),9,su))),128))],512),[[Je,te.value]])]),e("div",au,[e("div",ou,[a[33]||(a[33]=$e("Sửa/Xóa chi tiết vui lòng vào trang ",-1)),V(j,{to:`/websites/${_(u)}/folders`,class:"text-primary"},{default:ke(()=>[...a[32]||(a[32]=[$e("Quản lý thư mục",-1)])]),_:1},8,["to"])])])]),e("div",lu,[e("button",{type:"button",onClick:a[11]||(a[11]=d=>z.value=!1),class:"px-4 py-2 rounded-md border border-gray-300"},"Hủy"),e("button",{type:"button",onClick:He,class:"px-4 py-2 bg-blue-600 text-white rounded-md"},"Tạo")])])])):Z("",!0)]),e("div",nu,[a[35]||(a[35]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),U(e("select",{"onUpdate:modelValue":a[12]||(a[12]=d=>g.value=d),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...a[34]||(a[34]=[e("option",{value:null},"Auto (theo website)",-1),Tt('<option value="blank">Custom HTML</option><optgroup label="Templates trong package"><option value="home">Home Template</option><option value="listing">Listing Template</option><option value="detail">Detail Template</option><option value="page">Page Template</option></optgroup>',2)])],512),[[Je,g.value]]),a[36]||(a[36]=e("p",{class:"mt-1 text-xs text-gray-500"}," Auto: Tự động chọn template phù hợp. Custom HTML: Tự viết HTML. Templates: Chọn template có sẵn trong package. ",-1))]),g.value==="page"?(n(),p("div",ru,[...a[37]||(a[37]=[e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Nội dung trang"),e("textarea",{id:"page-content-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)])])):Z("",!0),g.value==="detail"?(n(),p("div",iu,[e("div",du,[e("div",null,[a[38]||(a[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),U(e("input",{"onUpdate:modelValue":a[13]||(a[13]=d=>o.value.location=d),type:"text",placeholder:"Sunny Isles, Florida, United States hoặc iframe Google Maps embed",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,o.value.location]])]),e("div",null,[a[39]||(a[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),U(e("input",{"onUpdate:modelValue":a[14]||(a[14]=d=>o.value.phone=d),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,o.value.phone]])])]),e("div",null,[a[40]||(a[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),U(e("textarea",{"onUpdate:modelValue":a[15]||(a[15]=d=>o.value.galleryRaw=d),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,o.value.galleryRaw]])]),a[46]||(a[46]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[a[41]||(a[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",uu,[e("div",cu,[(n(),p(he,null,we(h,d=>e("label",{key:d,class:"inline-flex items-center gap-2 cursor-pointer"},[U(e("input",{type:"checkbox",value:d,"onUpdate:modelValue":a[16]||(a[16]=G=>o.value.amenities=G),class:"rounded cursor-pointer border-gray-300"},null,8,pu),[[At,o.value.amenities]]),e("span",mu,I(d),1)])),64))])])]),e("div",gu,[e("div",{class:"flex items-center justify-between"},[a[42]||(a[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:X,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),p(he,null,we(o.value.info,(d,G)=>(n(),p("div",{key:G,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",vu,[e("span",fu,I(G+1),1),a[43]||(a[43]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:ve=>se(G),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,bu)]),U(e("input",{"onUpdate:modelValue":ve=>d.subject=ve,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,yu),[[Q,d.subject]]),U(e("textarea",{"onUpdate:modelValue":ve=>d.description=ve,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,hu),[[Q,d.description]])]))),128))]),e("div",xu,[e("div",{class:"flex items-center justify-between"},[a[44]||(a[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:Y,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),p(he,null,we(o.value.faqs,(d,G)=>(n(),p("div",{key:G,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",wu,[e("span",_u,I(G+1),1),a[45]||(a[45]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:ve=>oe(G),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,ku)]),U(e("input",{"onUpdate:modelValue":ve=>d.q=ve,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,$u),[[Q,d.q]]),U(e("textarea",{"onUpdate:modelValue":ve=>d.a=ve,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Su),[[Q,d.a]])]))),128))])])):Z("",!0),f.value&&g.value==="blank"?(n(),p("div",Cu,[a[47]||(a[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),U(e("textarea",{"onUpdate:modelValue":a[17]||(a[17]=d=>c.value=d),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm font-mono"},null,512),[[Q,c.value]])])):Z("",!0),(g.value==="blank"||!f.value&&!x.value)&&g.value!=="page"?(n(),p("div",Tu,[a[48]||(a[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Content",-1)),((H=P.value)==null?void 0:H.type)==="html"&&(!f.value||g.value==="blank")?(n(),p("div",Eu,[e("div",{ref_key:"gutterRef",ref:ce,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(n(!0),p(he,null,we(Ue.value,d=>(n(),p("div",{key:d,class:"px-2 text-xs text-gray-500 leading-6"},I(d),1))),128))],512),U(e("textarea",{ref_key:"codeRef",ref:J,"onUpdate:modelValue":a[18]||(a[18]=d=>b.value.content=d),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:L},null,544),[[Q,b.value.content]])])):U((n(),p("textarea",{key:1,"onUpdate:modelValue":a[19]||(a[19]=d=>b.value.content=d),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512)),[[Q,b.value.content]])])):Z("",!0),e("div",Ru,[V(j,{to:Me.value,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:ke(()=>[...a[49]||(a[49]=[$e("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:C.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[C.value?(n(),p("span",Pu,[V(_(Oe),{class:"size-4 animate-spin"}),$e(" "+I(f.value?"Creating...":"Saving..."),1)])):(n(),p("span",Lu,I(f.value?"Create":"Save"),1))],8,Au)])],32)])])])])}}},Iu={class:"relative flex min-h-screen w-full flex-col bg-gray-100"},Du={class:"flex flex-1 items-center justify-center p-4 lg:p-6"},Mu={class:"flex w-full max-w-6xl justify-center"},ju={class:"grid w-full grid-cols-1 gap-8 lg:gap-16"},Uu={class:"flex flex-col justify-center"},Fu={class:"mx-auto flex w-full max-w-md flex-col"},Vu={class:"flex items-center gap-3 pb-8"},Nu={class:"flex flex-col gap-2"},zu={class:"relative flex items-center"},Ou={class:"flex flex-col gap-2"},Bu={class:"relative flex items-center"},Hu=["type"],qu=["disabled"],Wu={key:0,class:"inline-flex items-center gap-2"},Yu={key:1},Ku={key:0,class:"text-sm text-red-600"},Xu={__name:"Login",setup(s){const t=wt(),r=v(""),u=v(""),m=v(!1),f=v(""),g=v(!1),x=async()=>{var c,o;m.value=!0,f.value="";try{const D=(await N.post("/api/login",{username:r.value,password:u.value})).data.token;localStorage.setItem("adminToken",D),N.defaults.headers.common["X-Admin-Token"]=D,document.cookie=`X-Admin-Token=${D}; path=/; max-age=${60*60*24}; samesite=None; secure`,document.cookie=`adminToken=${D}; path=/; max-age=${60*60*24}; samesite=None; secure`,t.push("/")}catch(k){f.value=((o=(c=k==null?void 0:k.response)==null?void 0:c.data)==null?void 0:o.error)||"Đăng nhập thất bại"}finally{m.value=!1}};return(c,o)=>(n(),p("div",Iu,[e("div",Du,[e("div",Mu,[e("div",ju,[e("div",Uu,[e("div",Fu,[e("div",Vu,[V(_(Fs),{class:"size-8 text-blue-600"}),o[3]||(o[3]=e("span",{class:"text-xl font-semibold text-gray-800"},"VPS Manager",-1))]),o[7]||(o[7]=e("div",{class:"flex flex-col gap-1.5"},[e("p",{class:"text-gray-900 text-3xl font-bold tracking-tight"},"Đăng nhập vào Bảng điều khiển"),e("p",{class:"text-gray-500 text-base"},"Quản lý các máy chủ ảo của bạn một cách hiệu quả.")],-1)),e("form",{onSubmit:ze(x,["prevent"]),class:"flex flex-col gap-5 pt-8"},[e("label",Nu,[o[4]||(o[4]=e("p",{class:"text-gray-900 text-sm font-medium"},"Email / Tên người dùng",-1)),e("div",zu,[V(_(Vs),{class:"absolute left-3.5 size-4 text-gray-400"}),U(e("input",{"onUpdate:modelValue":o[0]||(o[0]=k=>r.value=k),type:"text",required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-4",placeholder:"nhapemail@example.com"},null,512),[[Q,r.value]])])]),e("label",Ou,[o[5]||(o[5]=e("p",{class:"text-gray-900 text-sm font-medium"},"Mật khẩu",-1)),e("div",Bu,[V(_(Ns),{class:"absolute left-3.5 size-4 text-gray-400"}),U(e("input",{type:g.value?"text":"password","onUpdate:modelValue":o[1]||(o[1]=k=>u.value=k),required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-11",placeholder:"••••••••"},null,8,Hu),[[Cs,u.value]]),e("button",{type:"button",onClick:o[2]||(o[2]=k=>g.value=!g.value),class:"absolute right-0 h-full px-3.5 text-gray-400 hover:text-gray-600"},[g.value?(n(),ie(_(zs),{key:1,class:"size-5"})):(n(),ie(_(Nt),{key:0,class:"size-5"}))])])]),e("button",{type:"submit",disabled:m.value,class:"flex h-12 w-full items-center justify-center rounded-lg bg-blue-600 px-6 text-base font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500/50"},[m.value?(n(),p("span",Wu,[V(_(Oe),{class:"size-4 animate-spin"}),o[6]||(o[6]=$e(" Đang đăng nhập... ",-1))])):(n(),p("span",Yu,"Đăng Nhập"))],8,qu),f.value?(n(),p("p",Ku,I(f.value),1)):Z("",!0)],32)])])])])]),o[8]||(o[8]=e("footer",{class:"flex justify-center p-4"},[e("p",{class:"text-sm text-gray-500"},"© 2024 VPS Manager. Đã đăng ký bản quyền.")],-1))]))}},Gu={class:"min-h-screen bg-gray-100"},Qu={class:"max-w-3xl mx-auto py-6 sm:px-6 lg:px-8"},Ju={class:"px-4 py-6 sm:px-0"},Zu={class:"bg-white rounded-lg shadow p-6"},ec={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},tc={class:"flex justify-end gap-3 mt-6"},sc=["disabled"],ac={key:0,class:"inline-flex items-center gap-2"},oc={key:1},lc={__name:"AdminProfile",setup(s){const t=wt(),r=v({ADMIN_NAME:"",ADMIN_EMAIL:"",ADMIN_USERNAME:"",ADMIN_PASSWORD:""}),u=v(!1),m=v(""),f=v("success"),g=async()=>{const k=(await N.get("/api/settings")).data||{};r.value.ADMIN_NAME=k.ADMIN_NAME||"",r.value.ADMIN_EMAIL=k.ADMIN_EMAIL||"",r.value.ADMIN_USERNAME=k.ADMIN_USERNAME||"",r.value.ADMIN_PASSWORD=k.ADMIN_PASSWORD||""},x=async()=>{var o,k;u.value=!0,m.value="";try{await N.put("/api/settings",r.value),m.value="Đã lưu, vui lòng đăng nhập lại",f.value="success",localStorage.removeItem("adminToken"),delete N.defaults.headers.common["X-Admin-Token"],t.push("/login")}catch(D){m.value=((k=(o=D==null?void 0:D.response)==null?void 0:o.data)==null?void 0:k.error)||"Lưu thất bại",f.value="error"}finally{u.value=!1}},c=()=>{localStorage.removeItem("adminToken"),delete N.defaults.headers.common["X-Admin-Token"],t.push("/login")};return Ze(g),(o,k)=>(n(),p("div",Gu,[e("div",Qu,[e("div",Ju,[e("div",Zu,[k[9]||(k[9]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Thông tin quản trị",-1)),e("form",{onSubmit:ze(x,["prevent"])},[e("div",ec,[e("div",null,[k[4]||(k[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên",-1)),U(e("input",{"onUpdate:modelValue":k[0]||(k[0]=D=>r.value.ADMIN_NAME=D),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_NAME]])]),e("div",null,[k[5]||(k[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),U(e("input",{"onUpdate:modelValue":k[1]||(k[1]=D=>r.value.ADMIN_EMAIL=D),type:"email",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_EMAIL]])]),e("div",null,[k[6]||(k[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tài khoản",-1)),U(e("input",{"onUpdate:modelValue":k[2]||(k[2]=D=>r.value.ADMIN_USERNAME=D),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_USERNAME]])]),e("div",null,[k[7]||(k[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Mật khẩu",-1)),U(e("input",{"onUpdate:modelValue":k[3]||(k[3]=D=>r.value.ADMIN_PASSWORD=D),type:"password",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_PASSWORD]])])]),e("div",tc,[e("button",{type:"button",onClick:c,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Logout"),e("button",{type:"submit",disabled:u.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[u.value?(n(),p("span",ac,[V(_(Oe),{class:"size-4 animate-spin"}),k[8]||(k[8]=$e(" Đang lưu... ",-1))])):(n(),p("span",oc,"Lưu"))],8,sc)]),m.value?(n(),p("p",{key:0,class:De([f.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},I(m.value),3)):Z("",!0)],32)])])])]))}},nc={class:"min-h-screen bg-gray-100"},rc={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},ic={class:"px-4 py-6 sm:px-0"},dc={class:"flex justify-between items-center mb-6"},uc={class:"text-3xl font-bold text-gray-900"},cc={class:"bg-white shadow rounded-lg p-6"},pc={class:"space-y-4"},mc={class:"flex justify-between items-start"},gc={class:"font-medium"},vc={class:"text-sm text-gray-500"},fc={class:"mt-2 flex items-center space-x-4 text-sm"},bc=["title"],yc={class:"flex gap-2"},hc=["onClick","disabled"],xc=["onClick","disabled"],wc=["onClick","disabled"],_c=["href"],kc=["onClick","disabled"],$c={key:0,class:"text-center text-gray-500"},Sc={__name:"SubdomainsManagement",setup(s){const r=ct().params.websiteId,u=v(""),m=v([]),f=v([]),g=v([]),x=v([]),c=v([]),o=async()=>{const te=await N.get(`/api/websites/${r}`);u.value=te.data.domain;const de=(await N.get("/api/websites")).data||[];m.value=de.filter($=>$.domain.endsWith("."+u.value))};Ze(o);const k=async te=>{var z,de,$,h;try{f.value=[...f.value,te.id],await N.post(`/api/websites/${te.id}/deploy`);let b=0;for(;b<60&&(await new Promise(T=>setTimeout(T,2e3)),(await N.get(`/api/websites/${te.id}`)).data.status==="deploying");)b++;await o(),alert(`✓ Deploy thành công cho ${te.domain}`)}catch(b){const P=((de=(z=b==null?void 0:b.response)==null?void 0:z.data)==null?void 0:de.message)||((h=($=b==null?void 0:b.response)==null?void 0:$.data)==null?void 0:h.error)||"Deploy thất bại";alert(`✗ ${P}`)}finally{f.value=f.value.filter(b=>b!==te.id)}},D=async te=>{if(confirm(`Delete subdomain ${te.domain}?`))try{g.value=[...g.value,te.id],await N.delete(`/api/websites/${te.id}`),await o()}finally{g.value=g.value.filter(z=>z!==te.id)}},ee=async te=>{var z,de,$,h;try{x.value=[...x.value,te.id],await N.post(`/api/websites/${te.id}/ssl`),await o(),alert(`✓ SSL đã được cài đặt thành công cho ${te.domain}`)}catch(b){const P=((de=(z=b==null?void 0:b.response)==null?void 0:z.data)==null?void 0:de.message)||((h=($=b==null?void 0:b.response)==null?void 0:$.data)==null?void 0:h.error)||"Cài đặt SSL thất bại";alert(`✗ ${P}`)}finally{x.value=x.value.filter(b=>b!==te.id)}},i=async te=>{if(confirm(`Deactivate subdomain ${te.domain}?`))try{c.value=[...c.value,te.id],await N.post(`/api/websites/${te.id}/deactivate`),await o()}finally{c.value=c.value.filter(z=>z!==te.id)}};return(te,z)=>{const de=nt("router-link");return n(),p("div",nc,[e("div",rc,[e("div",ic,[e("div",dc,[e("h1",uc,"Subdomains of "+I(u.value),1),V(de,{to:`/websites/${_(r)}/subdomains/new`,class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"},{default:ke(()=>[...z[0]||(z[0]=[$e("Create Subdomain",-1)])]),_:1},8,["to"])]),e("div",cc,[e("div",pc,[(n(!0),p(he,null,we(m.value,$=>{var h;return n(),p("div",{key:$.id,class:"border rounded-lg p-4"},[e("div",mc,[e("div",null,[e("h4",gc,I($.domain),1),e("p",vc,"Server: "+I(((h=$.vps_server)==null?void 0:h.name)||"N/A"),1),e("div",fc,[e("span",{class:De(["inline-flex items-center",{"text-blue-600":$.status==="deploying","text-green-600":$.status==="deployed","text-gray-600":$.status==="pending"||$.status==="draft","text-orange-600":$.status==="suspended","text-red-600":$.status==="error"}]),title:$.status},[$.status==="deploying"?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):$.status==="deployed"?(n(),ie(_(St),{key:1,class:"size-4"})):$.status==="pending"||$.status==="draft"?(n(),ie(_(Pt),{key:2,class:"size-4"})):$.status==="suspended"?(n(),ie(_(Lt),{key:3,class:"size-4"})):(n(),ie(_(Ct),{key:4,class:"size-4"}))],10,bc),e("span",{class:De(["inline-flex items-center gap-1",$.ssl_enabled?"text-green-600":"text-gray-400"])},[$.ssl_enabled?(n(),ie(_(xt),{key:0,class:"size-4"})):(n(),ie(_(cs),{key:1,class:"size-4"}))],2)])]),e("div",yc,[V(de,{to:`/websites/${$.id}/pages`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:ke(()=>[V(_(ps),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:b=>k($),disabled:f.value.includes($.id)||$.status==="deployed",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[f.value.includes($.id)?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):(n(),ie(_(ms),{key:1,class:"size-4"}))],8,hc),$.status==="deployed"?(n(),p("button",{key:0,onClick:b=>ee($),disabled:x.value.includes($.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[x.value.includes($.id)?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):(n(),ie(_(xt),{key:1,class:"size-4"}))],8,xc)):Z("",!0),$.status==="deployed"||$.status==="error"?(n(),p("button",{key:1,onClick:b=>i($),disabled:c.value.includes($.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[c.value.includes($.id)?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):(n(),ie(_(Lt),{key:1,class:"size-4"}))],8,wc)):Z("",!0),e("a",{href:($.ssl_enabled?"https://":"http://")+$.domain,target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[V(_(mt),{class:"size-4"})],8,_c),e("button",{onClick:b=>D($),disabled:g.value.includes($.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[g.value.includes($.id)?(n(),ie(_(Oe),{key:0,class:"size-4 animate-spin"})):(n(),ie(_(gt),{key:1,class:"size-4"}))],8,kc)])])])}),128)),m.value.length===0?(n(),p("div",$c,"No subdomains found")):Z("",!0)])])])])])}}},Cc={class:"min-h-screen bg-gray-100"},Tc={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},Ec={class:"px-4 py-6 sm:px-0"},Rc={class:"bg-white rounded-lg shadow p-6"},Ac={class:"text-sm text-gray-600 mb-4"},Pc={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Lc={class:"text-xs text-gray-500 mt-1"},Ic={class:"md:col-span-2"},Dc=["value"],Mc={class:"mt-4"},jc={key:0,class:"mt-4"},Uc={class:"flex items-center justify-between mb-2"},Fc={class:"flex items-center gap-3"},Vc={class:"border border-gray-300 rounded-md p-3 max-h-48 overflow-auto"},Nc={key:0,class:"text-sm text-gray-500"},zc={key:1,class:"space-y-2"},Oc=["value","onChange"],Bc={class:"mt-6"},Hc={key:0,class:"mt-4 space-y-4"},qc={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wc={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},Yc={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},Kc=["value"],Xc={class:"text-sm"},Gc={class:"space-y-3"},Qc={class:"flex items-center gap-2"},Jc={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},Zc=["onClick"],ep=["onUpdate:modelValue"],tp=["onUpdate:modelValue"],sp={class:"space-y-3"},ap={class:"flex items-center gap-2"},op={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},lp=["onClick"],np=["onUpdate:modelValue"],rp=["onUpdate:modelValue"],ip={key:1,class:"mt-4"},dp={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},up={class:"flex justify-end gap-3 mt-6"},cp=["disabled"],pp={key:0,class:"inline-flex items-center gap-2"},mp={key:1},gp={__name:"SubdomainEdit",setup(s){const t=ct(),r=wt(),u=t.params.websiteId,m=v(""),f=v(null),g=v([]),x=v([]),c=v(!1);v(""),v(""),v(null),v(!1);const o=v([]),k=v({sub:"",vps_server_id:""}),D=v("blank"),ee=v(""),i=v({title:"",location:"",phone:"",galleryRaw:"",about1:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),te=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],z=v(null),de=v(null),$=v(!1),h=v(""),b=v(""),P=le=>le.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"d").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),T=Be(()=>P(k.value.sub||"")),S=Be(()=>(T.value?`${T.value}.`:"")+m.value),C=Be(()=>{const w=(ee.value||"").split(`
`).length;return w>0?w:1}),ce=Be(()=>{const le=[...x.value||[]],w=new Map(le.map(A=>[String(A.id),A])),K=A=>A.sort((y,Y)=>(y.name||"").localeCompare(Y.name||"")),E=A=>le.filter(y=>String(y.parent_id)===String(A)),O=A=>!A.parent_id||!w.has(String(A.parent_id))||String(A.parent_id)===String(A.id),ne=K(le.filter(O)),Ae=[],ge=(A,y)=>{Ae.push({...A,depth:y}),K(E(A.id)).forEach(Y=>ge(Y,y+1))};return ne.forEach(A=>ge(A,0)),Ae}),J=le=>{if(o.value.includes(le)){const w=x.value.find(K=>K.id===le);if(w&&w.parent_id){const K=E=>{if(!E)return;o.value.includes(E)||o.value.push(E);const O=x.value.find(ne=>ne.id===E);O&&O.parent_id&&K(O.parent_id)};K(w.parent_id)}}},W=()=>{z.value&&de.value&&(z.value.scrollTop=de.value.scrollTop)},xe=async()=>{const le=(i.value.galleryRaw||"").split(`
`).map(X=>X.trim()).filter(Boolean),w=(i.value.title||"").trim(),K=["Home","Stays",w];let O=(await N.get("/templates/hotel-detail-1/index.html")).data||"",ne="",Ae="";try{ne=(await N.get("/templates/_shared/header.html")).data||""}catch{}try{Ae=(await N.get("/templates/_shared/footer.html")).data||""}catch{}ne&&(O=O.replace(/<header[^>]*>[\s\S]*?<\/header>/i,ne)),Ae&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(O)?O=O.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,Ae):/<\/body>/i.test(O)?O=O.replace(/<\/body>/i,Ae+"</body>"):O+=`
`+Ae);const ge=i.value.amenities||[],A=le.map(X=>String(X).replace(/<\/script>/gi,"<\\/script>")),y={title:w||"Hotel",location:i.value.location||"",location_text:i.value.location||"",phone:i.value.phone||"",about1:i.value.about1||"",amenities:ge,faqs:i.value.faqs||[],info:i.value.info||[],gallery:A,breadcrumb_items:K.filter(Boolean)},Y=`<script type="application/json" id="page-data">${JSON.stringify(y)}<\/script>`;return O=O.replace("{{GALLERY_DATA_SCRIPT}}",Y),O=O.replace(/<title>[^<]*<\/title>/i,`<title>${y.title}</title>`),O},Se=()=>{i.value.faqs=[...i.value.faqs||[],{q:"",a:""}]},fe=()=>{i.value.info=[...i.value.info||[],{subject:"",description:""}]},Ce=le=>{i.value.faqs=(i.value.faqs||[]).filter((w,K)=>K!==le)},Me=le=>{i.value.info=(i.value.info||[]).filter((w,K)=>K!==le)},Fe=async()=>{var le,w,K,E,O,ne,Ae,ge,A,y,Y,X,oe,se,Ue;$.value=!0,h.value="";try{const L="Stays",Ee=k.value.vps_server_id;if(!Ee){h.value="Chưa chọn VPS Server",b.value="error",$.value=!1;return}const Ve={domain:S.value,type:((le=f.value)==null?void 0:le.type)||"html",vps_server_id:Ee};let M;try{M=(await N.post("/api/websites",Ve)).data}catch(d){const G=((K=(w=d==null?void 0:d.response)==null?void 0:w.data)==null?void 0:K.message)||((O=(E=d==null?void 0:d.response)==null?void 0:E.data)==null?void 0:O.error)||"";if(((ne=d==null?void 0:d.response)==null?void 0:ne.status)===409||/domain/i.test(G)){if(M=((await N.get("/api/websites")).data||[]).find(Ne=>Ne.domain===S.value),!M)throw d}else throw d}let a,j=null;if(D.value==="blank")a=ee.value;else{a=await xe();const d=(i.value.galleryRaw||"").split(`
`).map(G=>G.trim()).filter(Boolean);j={title:(i.value.title||"").trim()||"Hotel",location:i.value.location||"",location_text:i.value.location||"",phone:i.value.phone||"",about1:i.value.about1||"",amenities:i.value.amenities||[],faqs:i.value.faqs||[],info:i.value.info||[],gallery:d,breadcrumb_items:["Home","Stays",(i.value.title||"").trim()].filter(Boolean)}}const H={path:"/",filename:"index.html",title:D.value==="blank"?i.value.title||"":i.value.title,content:a};D.value!=="blank"&&(H.template_type=D.value,H.template_data=j),o.value.length>0&&(H.folder_ids=o.value);try{await N.post(`/api/websites/${M.id}/pages`,H)}catch(d){const G=((ge=(Ae=d==null?void 0:d.response)==null?void 0:Ae.data)==null?void 0:ge.message)||((y=(A=d==null?void 0:d.response)==null?void 0:A.data)==null?void 0:y.error)||"";if(((Y=d==null?void 0:d.response)==null?void 0:Y.status)===409||/path/i.test(G)){const Ne=((await N.get(`/api/websites/${M.id}/pages`)).data||[]).find(ae=>(ae.path||"/")==="/"&&(ae.filename||"").toLowerCase()==="index.html");Ne&&await N.put(`/api/pages/${Ne.id}`,H)}else if(/Failed to write page/i.test(G)){const ve=`subdomainDraft:${M.id}`;localStorage.setItem(ve,JSON.stringify(H))}}h.value="Subdomain created. Deploy to go online.",b.value="success",r.push(`/websites/${u}/subdomains`)}catch(L){h.value=((oe=(X=L==null?void 0:L.response)==null?void 0:X.data)==null?void 0:oe.message)||((Ue=(se=L==null?void 0:L.response)==null?void 0:se.data)==null?void 0:Ue.error)||"Failed to create subdomain",b.value="error"}finally{$.value=!1}},je=async()=>{var K;const le=await N.get(`/api/websites/${u}`);f.value=le.data,m.value=f.value.domain;const w=await N.get("/api/vps");g.value=w.data.filter(E=>E.status==="active"),(K=f.value)!=null&&K.vps_server_id&&(k.value.vps_server_id=f.value.vps_server_id);try{const E=await N.get(`/api/websites/${u}/folders`);x.value=E.data||[]}catch(E){console.error("Failed to load folders:",E)}},He=async()=>{if(window.tinymce)return;const{default:le}=await _e(async()=>{const{default:w}=await import("./tinymce.js").then(K=>K.t);return{default:w}},[]);await _e(()=>import("./tinymce-plugins.js").then(w=>w.i),[]),await _e(()=>import("./tinymce-plugins.js").then(w=>w.a),[]),await _e(()=>import("./tinymce-plugins.js").then(w=>w.q),[]),await _e(()=>import("./tinymce-skins.js").then(w=>w.s),[]),await _e(()=>import("./tinymce-skins.js").then(w=>w.c),[]),await _e(()=>import("./tinymce-skins.js").then(w=>w.a),[]),await _e(()=>import("./tinymce-plugins.js").then(w=>w.b),[]),await _e(()=>import("./tinymce-plugins.js").then(w=>w.c),[]),window.tinymce=le},re=async()=>{await He(),await Vt();const le=document.getElementById("about1-editor-sub");le&&(le.value=i.value.about1||"",window.tinymce.init({selector:"#about1-editor-sub",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:w=>{w.on("Change KeyUp SetContent",()=>{i.value.about1=w.getContent()||""})}}).then(w=>{const K=w&&w[0];K&&(i.value.about1||"").trim()&&K.setContent(i.value.about1)}))};return Ze(async()=>{await je(),D.value==="hotel-detail-1"&&await re()}),kt(D,async le=>{if(le==="hotel-detail-1")await re();else if(window.tinymce){const w=window.tinymce.get("about1-editor-sub");w&&w.remove()}}),Bt(()=>{if(window.tinymce){const le=window.tinymce.get("about1-editor-sub");le&&le.remove()}}),(le,w)=>{const K=nt("router-link");return n(),p("div",Cc,[e("div",Tc,[e("div",Ec,[e("div",Rc,[w[32]||(w[32]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Create Subdomain",-1)),e("p",Ac,"Parent: "+I(m.value),1),e("form",{onSubmit:ze(Fe,["prevent"])},[e("div",Pc,[e("div",null,[w[11]||(w[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Subdomain",-1)),U(e("input",{"onUpdate:modelValue":w[0]||(w[0]=E=>k.value.sub=E),type:"text",required:"",placeholder:"hotel",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,k.value.sub]]),e("p",Lc,"Sẽ tạo domain: "+I(S.value),1)]),e("div",Ic,[w[13]||(w[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),U(e("select",{"onUpdate:modelValue":w[1]||(w[1]=E=>k.value.vps_server_id=E),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[w[12]||(w[12]=e("option",{value:""},"Select VPS Server",-1)),(n(!0),p(he,null,we(g.value,E=>(n(),p("option",{value:E.id,key:E.id},I(E.name)+" ("+I(E.ip_address)+")",9,Dc))),128))],512),[[Je,k.value.vps_server_id]])])]),e("div",Mc,[w[15]||(w[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),U(e("select",{"onUpdate:modelValue":w[2]||(w[2]=E=>D.value=E),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...w[14]||(w[14]=[e("option",{value:"blank"},"HTML mặc định",-1),e("option",{value:"hotel-detail-1"},"Hotel Detail 1",-1)])],512),[[Je,D.value]])]),D.value==="hotel-detail-1"?(n(),p("div",jc,[e("div",Uc,[w[17]||(w[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Danh mục (chọn nhiều)",-1)),e("div",Fc,[V(K,{to:`/websites/${_(u)}/folders`,class:"text-sm text-primary"},{default:ke(()=>[...w[16]||(w[16]=[$e("Quản lý danh mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:w[3]||(w[3]=E=>c.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",Vc,[x.value.length===0?(n(),p("div",Nc,"Không có danh mục")):(n(),p("div",zc,[(n(!0),p(he,null,we(ce.value,E=>(n(),p("label",{key:E.id,class:"flex items-center gap-2 cursor-pointer"},[U(e("input",{type:"checkbox",value:E.id,"onUpdate:modelValue":w[4]||(w[4]=O=>o.value=O),onChange:O=>J(E.id),class:"rounded cursor-pointer"},null,40,Oc),[[At,o.value]]),e("span",{class:"text-sm",style:lt({paddingLeft:(E.depth>0?E.depth*16:0)+"px"})},I("↳ ".repeat(E.depth))+I(E.name),5)]))),128))]))])])):Z("",!0),e("div",Bc,[w[29]||(w[29]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Nội dung template",-1)),D.value==="hotel-detail-1"?(n(),p("div",Hc,[e("div",qc,[e("div",null,[w[18]||(w[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề khách sạn",-1)),U(e("input",{"onUpdate:modelValue":w[5]||(w[5]=E=>i.value.title=E),type:"text",placeholder:"Azure Breeze Resort",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.title]])]),e("div",null,[w[19]||(w[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),U(e("input",{"onUpdate:modelValue":w[6]||(w[6]=E=>i.value.location=E),type:"text",placeholder:"Sunny Isles, Florida, United States",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.location]])]),e("div",null,[w[20]||(w[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),U(e("input",{"onUpdate:modelValue":w[7]||(w[7]=E=>i.value.phone=E),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.phone]])])]),e("div",null,[w[21]||(w[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),U(e("textarea",{"onUpdate:modelValue":w[8]||(w[8]=E=>i.value.galleryRaw=E),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.galleryRaw]])]),w[27]||(w[27]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor-sub",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[w[22]||(w[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",Wc,[e("div",Yc,[(n(),p(he,null,we(te,E=>e("label",{key:E,class:"inline-flex items-center gap-2 cursor-pointer"},[U(e("input",{type:"checkbox",value:E,"onUpdate:modelValue":w[9]||(w[9]=O=>i.value.amenities=O),class:"rounded cursor-pointer border-gray-300"},null,8,Kc),[[At,i.value.amenities]]),e("span",Xc,I(E),1)])),64))])])]),e("div",Gc,[e("div",{class:"flex items-center justify-between"},[w[23]||(w[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:fe,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),p(he,null,we(i.value.info,(E,O)=>(n(),p("div",{key:O,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",Qc,[e("span",Jc,I(O+1),1),w[24]||(w[24]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:ne=>Me(O),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,Zc)]),U(e("input",{"onUpdate:modelValue":ne=>E.subject=ne,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,ep),[[Q,E.subject]]),U(e("textarea",{"onUpdate:modelValue":ne=>E.description=ne,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,tp),[[Q,E.description]])]))),128))]),e("div",sp,[e("div",{class:"flex items-center justify-between"},[w[25]||(w[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:Se,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),p(he,null,we(i.value.faqs,(E,O)=>(n(),p("div",{key:O,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",ap,[e("span",op,I(O+1),1),w[26]||(w[26]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:ne=>Ce(O),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,lp)]),U(e("input",{"onUpdate:modelValue":ne=>E.q=ne,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,np),[[Q,E.q]]),U(e("textarea",{"onUpdate:modelValue":ne=>E.a=ne,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,rp),[[Q,E.a]])]))),128))])])):D.value==="blank"?(n(),p("div",ip,[w[28]||(w[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),e("div",dp,[e("div",{ref_key:"gutterRef",ref:z,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(n(!0),p(he,null,we(C.value,E=>(n(),p("div",{key:E,class:"px-2 text-xs text-gray-500 leading-6"},I(E),1))),128))],512),U(e("textarea",{ref_key:"codeRef",ref:de,"onUpdate:modelValue":w[10]||(w[10]=E=>ee.value=E),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:W},null,544),[[Q,ee.value]])])])):Z("",!0)]),e("div",up,[V(K,{to:`/websites/${_(u)}/subdomains`,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:ke(()=>[...w[30]||(w[30]=[$e("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:$.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[$.value?(n(),p("span",pp,[V(_(Oe),{class:"size-4 animate-spin"}),w[31]||(w[31]=$e(" Creating... ",-1))])):(n(),p("span",mp,"Create Subdomain"))],8,cp)]),h.value?(n(),p("p",{key:1,class:De([b.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},I(h.value),3)):Z("",!0)],32)])])])])}}},vp=[{path:"/login",name:"Login",component:Xu},{path:"/",name:"Dashboard",component:ba},{path:"/vps",name:"VpsManagement",component:Ka},{path:"/websites",name:"WebsiteManagement",component:el},{path:"/websites/:websiteId/settings",name:"WebsiteSettings",component:zn},{path:"/websites/:websiteId/pages",name:"PagesManagement",component:Ad},{path:"/websites/:websiteId/pages/new",name:"PageCreate",component:os},{path:"/websites/:websiteId/pages/:pageId",name:"PageEdit",component:os},{path:"/websites/:websiteId/folders",name:"FoldersManagement",component:Bi},{path:"/websites/:websiteId/folders/new",name:"FolderCreate",component:ss},{path:"/websites/:websiteId/folders/:folderId",name:"FolderEdit",component:ss},{path:"/websites/:websiteId/subdomains",name:"SubdomainsManagement",component:Sc},{path:"/websites/:websiteId/subdomains/new",name:"SubdomainEdit",component:gp},{path:"/profile",name:"AdminProfile",component:lc},{path:"/monitoring",name:"Monitoring",component:pi},{path:"/settings",name:"Settings",component:id}],It=Ts({history:Es(),routes:vp}),ls=localStorage.getItem("adminToken");ls&&(N.defaults.headers.common["X-Admin-Token"]=ls);N.interceptors.response.use(s=>s,s=>{var r;if(((r=s==null?void 0:s.response)==null?void 0:r.status)===401){try{localStorage.removeItem("adminToken"),delete N.defaults.headers.common["X-Admin-Token"]}catch{}It.currentRoute.value.path!=="/login"&&It.push("/login")}return Promise.reject(s)});It.beforeEach((s,t,r)=>{const u=!!localStorage.getItem("adminToken");if(!u&&s.path!=="/login")return r("/login");if(u&&s.path==="/login")return r("/");r()});Rs(Js).use(It).mount("#app");
