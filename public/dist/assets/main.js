import{u as pt,a as ht,r as nt,c as i,o as a,b as $,d as J,e,f as xt,w as je,n as Ie,g as z,i as m,j as Ze,t as A,k as W,F as fe,l as be,m as Be,p as N,v as oe,q as We,s as de,x as we,y as Ht,z as ot,A as Me,B as _t,C as gt,D as rs,E as zt,G as Ts,H as js,I as Es,J as Fs}from"./vendor.js";import{L as is,S as ds,G as vt,B as us,U as As,a as cs,b as Ls,c as mt,C as Ct,A as St,d as At,P as ps,T as ct,e as Re,f as kt,g as ms,F as gs,h as Rs,i as Nt,R as Ms,I as Pt,j as Ut,k as Is,l as Ps,m as Us,E as Vt,n as Jt,o as Ds,p as vs,q as zs,r as Ns,s as Vs,t as Os}from"./icons.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))g(v);new MutationObserver(v=>{for(const y of v)if(y.type==="childList")for(const f of y.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&g(f)}).observe(document,{childList:!0,subtree:!0});function c(v){const y={};return v.integrity&&(y.integrity=v.integrity),v.referrerPolicy&&(y.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?y.credentials="include":v.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function g(v){if(v.ep)return;v.ep=!0;const y=c(v);fetch(v.href,y)}})();const Bs={id:"app"},Hs={key:0,class:"min-h-screen"},qs={key:1,class:"relative flex min-h-screen w-full bg-background-light"},Ws={class:"flex w-64 flex-col border-r border-gray-200 bg-white p-4"},Ys={class:"flex flex-col gap-2"},Ks={class:"flex-1"},Xs={class:"flex items-center justify-between border-b border-gray-200 px-10 py-4 bg-white"},Js={class:"flex items-center gap-4"},Gs={class:"h-10 w-10 rounded-lg border border-gray-300 bg-gray-50 text-gray-800"},Qs={class:"p-6 lg:p-10"},Zs={__name:"App",setup(t){const s=pt(),c=ht(),g=()=>{localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"],c.push("/login")};return(v,y)=>{const f=nt("router-view"),C=nt("router-link");return a(),i("div",Bs,[$(s).path==="/login"?(a(),i("div",Hs,[J(f)])):(a(),i("div",qs,[e("aside",Ws,[y[6]||(y[6]=xt('<div class="flex items-center gap-3 mb-4"><div class="rounded-full size-10 bg-primary/10"></div><div class="flex flex-col"><h1 class="text-gray-900 text-base font-medium">Admin User</h1><p class="text-gray-500 text-sm">admin@vps.com</p></div></div>',1)),e("nav",Ys,[J(C,{to:"/",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":$(s).path==="/","hover:bg-gray-100 text-gray-800":$(s).path!=="/"}])},{default:je(()=>[J($(is),{class:"size-4"}),y[0]||(y[0]=e("span",null,"Dashboard",-1))]),_:1},8,["class"]),J(C,{to:"/vps",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":$(s).path.startsWith("/vps"),"hover:bg-gray-100 text-gray-800":!$(s).path.startsWith("/vps")}])},{default:je(()=>[J($(ds),{class:"size-4"}),y[1]||(y[1]=e("span",null,"Servers",-1))]),_:1},8,["class"]),J(C,{to:"/websites",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":$(s).path.startsWith("/websites"),"hover:bg-gray-100 text-gray-800":!$(s).path.startsWith("/websites")}])},{default:je(()=>[J($(vt),{class:"size-4"}),y[2]||(y[2]=e("span",null,"Websites",-1))]),_:1},8,["class"]),J(C,{to:"/monitoring",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":$(s).path.startsWith("/monitoring"),"hover:bg-gray-100 text-gray-800":!$(s).path.startsWith("/monitoring")}])},{default:je(()=>[J($(us),{class:"size-4"}),y[3]||(y[3]=e("span",null,"Monitoring",-1))]),_:1},8,["class"]),J(C,{to:"/profile",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":$(s).path.startsWith("/profile"),"hover:bg-gray-100 text-gray-800":!$(s).path.startsWith("/profile")}])},{default:je(()=>[J($(As),{class:"size-4"}),y[4]||(y[4]=e("span",null,"Profile",-1))]),_:1},8,["class"]),J(C,{to:"/settings",class:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-800 hover:bg-gray-100"},{default:je(()=>[J($(cs),{class:"size-4"}),y[5]||(y[5]=e("span",null,"Settings",-1))]),_:1})])]),e("main",Ks,[e("header",Xs,[y[8]||(y[8]=e("h2",{class:"text-lg font-bold"},"Tổng quan Hệ thống",-1)),e("div",Js,[y[7]||(y[7]=e("input",{class:"form-input h-10 w-64 rounded-lg border border-gray-300 bg-gray-50 px-4",placeholder:"Search"},null,-1)),e("button",Gs,[J($(Ls),{class:"mx-auto size-5"})]),e("button",{onClick:g,class:"h-10 px-3 rounded-lg border border-gray-300 bg-white text-red-600"}," Logout ")])]),e("div",Qs,[J(f)])])]))])}}},ea={class:"min-h-screen"},ta={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},sa={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},aa={class:"p-6 bg-white border-b border-gray-200"},la={class:"rounded-xl bg-gray-50 p-6 border border-gray-200"},oa={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},na={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},ra={class:"flex items-center justify-between text-gray-500"},ia={class:"text-gray-900 tracking-tight text-3xl font-bold"},da={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},ua={class:"flex items-center justify-between text-gray-500"},ca={class:"text-gray-900 tracking-tight text-3xl font-bold"},pa={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},ma={class:"flex items-center justify-between text-gray-500"},ga={class:"text-red-500 tracking-tight text-3xl font-bold"},va={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},fa={class:"flex items-center justify-between text-gray-500"},ba={class:"text-gray-900 tracking-tight text-3xl font-bold"},ya={__name:"Dashboard",setup(t){const s=m({vpsServers:0,websites:0,onlineWebsites:0,sslEnabled:0});return Ze(async()=>{try{const[g,v]=await Promise.all([z.get("/api/vps"),z.get("/api/websites")]),y=Array.isArray(g.data)?g.data:[],f=Array.isArray(v.data)?v.data:[];s.value.vpsServers=y.length,s.value.websites=f.length,s.value.onlineWebsites=f.filter(C=>C.status==="deployed").length,s.value.sslEnabled=f.filter(C=>C.ssl_enabled).length}catch(g){console.error("Failed to fetch stats:",g)}}),(g,v)=>(a(),i("div",ea,[e("main",null,[e("div",ta,[e("div",sa,[e("div",aa,[v[4]||(v[4]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Tổng quan Hệ thống",-1)),e("div",la,[e("div",oa,[e("div",na,[e("div",ra,[v[0]||(v[0]=e("p",{class:"text-base font-medium text-gray-800"},"Máy chủ VPS",-1)),J($(ds),{class:"h-6 w-6 text-gray-600"})]),e("p",ia,A(s.value.vpsServers),1)]),e("div",da,[e("div",ua,[v[1]||(v[1]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web",-1)),J($(vt),{class:"h-6 w-6 text-gray-600"})]),e("p",ca,A(s.value.websites),1)]),e("div",pa,[e("div",ma,[v[2]||(v[2]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web trực tuyến",-1)),J($(us),{class:"h-6 w-6 text-red-500"})]),e("p",ga,A(s.value.onlineWebsites),1)]),e("div",va,[e("div",fa,[v[3]||(v[3]=e("p",{class:"text-base font-medium text-gray-800"},"SSL được bật",-1)),J($(mt),{class:"h-6 w-6 text-gray-600"})]),e("p",ba,A(s.value.sslEnabled),1)])])]),v[5]||(v[5]=xt('<h2 class="text-gray-900 text-[22px] font-bold tracking-[-0.015em] pb-3 pt-10">Hoạt động gần đây</h2><div class="rounded-xl border border-gray-200 bg-white overflow-hidden"><table class="w-full"><thead><tr class="bg-gray-50"><th class="px-6 py-4 text-left text-gray-600 w-[15%] text-sm font-medium">Hoạt động</th><th class="px-6 py-4 text-left text-gray-600 w-[20%] text-sm font-medium">Người dùng</th><th class="px-6 py-4 text-left text-gray-600 w-[40%] text-sm font-medium">Đối tượng</th><th class="px-6 py-4 text-left text-gray-600 w-[25%] text-sm font-medium">Thời gian</th></tr></thead><tbody class="divide-y divide-gray-200"><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-700">Tạo</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">admin</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;web-server-01&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">5 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700">Thêm</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">hệ thống</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">trang web &#39;example.com&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">15 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-yellow-100 px-3 py-1 text-xs font-medium text-yellow-800">Khởi động lại</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">dev_user</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;db-server-02&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">1 giờ trước</td></tr></tbody></table></div>',2))])])])])]))}},ha={class:"min-h-screen bg-gray-100"},xa={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},wa={class:"px-4 py-6 sm:px-0"},_a={class:"flex justify-between items-center mb-6"},ka={class:"bg-white shadow overflow-hidden sm:rounded-md"},$a={class:"divide-y divide-gray-200"},Ca={class:"flex items-center justify-between"},Sa={class:"flex-1"},Ta={class:"text-lg font-medium text-gray-900"},ja={class:"text-sm text-gray-500"},Ea={class:"mt-2 flex items-center space-x-4 text-sm text-gray-500"},Fa={class:"flex items-center space-x-2"},Aa=["onClick"],La=["onClick"],Ra={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},Ma={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ia={class:"text-lg font-medium text-gray-900 mb-4"},Pa={class:"mb-4"},Ua={class:"mb-4"},Da={class:"mb-4"},za={class:"mb-4"},Na={class:"mb-4"},Va={class:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-2"},Oa={key:0,class:"mb-4"},Ba={class:"mt-1 flex gap-2"},Ha=["value"],qa={class:"mb-4"},Wa={class:"flex justify-end space-x-3"},Ya={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},Ka={key:1,class:"fixed bottom-4 right-4 z-50"},Xa={__name:"VpsManagement",setup(t){const s=m(""),c=m(""),g=m([]),v=m(!1),y=m(!1),f=m(null),C=m(""),k=m({name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:"",status:"inactive"}),l=async()=>{try{const V=await z.get("/api/vps");g.value=V.data}catch{s.value="Failed to fetch VPS servers",c.value="error"}},w=V=>{if(!V)return"";let h=String(V).trim();return h=h.replace(/^https?:\/\//i,""),h=h.split("/")[0],h=h.split(":")[0],h.trim()},P=V=>{var x;const h=((x=V==null?void 0:V.target)==null?void 0:x.value)||"";h&&(k.value.ssh_key_path=h)},Q=async()=>{var V,h,x,O,I,K;try{if(k.value.ip_address=w(k.value.ip_address),k.value.ssh_key_path=(k.value.ssh_key_path||"").trim(),y.value)await z.put(`/api/vps/${f.value.id}`,k.value),s.value="VPS server updated successfully",c.value="success";else{const ve=(await z.post("/api/vps",k.value)).data;k.value.status&&k.value.status!=="inactive"&&await z.put(`/api/vps/${ve.id}`,{status:k.value.status}),s.value="VPS server created successfully",c.value="success"}T(),l()}catch(ae){s.value=((h=(V=ae==null?void 0:ae.response)==null?void 0:V.data)==null?void 0:h.message)||((O=(x=ae==null?void 0:ae.response)==null?void 0:x.data)==null?void 0:O.error)||((K=(I=ae==null?void 0:ae.response)==null?void 0:I.data)==null?void 0:K.errors)&&Object.values(ae.response.data.errors).flat().join(", ")||"Failed to save VPS server",c.value="error"}},d=V=>{f.value=V,k.value={...V},y.value=!0,C.value=V.worker_key||""},ee=async V=>{if(confirm(`Are you sure you want to delete ${V.name}?`))try{await z.delete(`/api/vps/${V.id}`),s.value="VPS server deleted successfully",c.value="success",l()}catch{s.value="Failed to delete VPS server",c.value="error"}},T=()=>{v.value=!1,y.value=!1,f.value=null,k.value={name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:""},C.value=""},q=()=>{C.value&&(navigator.clipboard.writeText(C.value),s.value="Worker key copied",c.value="success")};return Ze(l),(V,h)=>(a(),i("div",ha,[e("div",xa,[e("div",wa,[e("div",_a,[h[8]||(h[8]=e("h1",{class:"text-3xl font-bold text-gray-900"},"VPS Servers",-1)),e("button",{onClick:h[0]||(h[0]=x=>v.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Add VPS Server ")]),e("div",ka,[e("ul",$a,[(a(!0),i(fe,null,be(g.value,x=>(a(),i("li",{key:x.id,class:"px-6 py-4"},[e("div",Ca,[e("div",Sa,[e("h3",Ta,A(x.name),1),e("p",ja,A(x.ip_address),1),e("div",Ea,[e("span",null,"SSH Port: "+A(x.ssh_port),1),e("span",null,"User: "+A(x.ssh_user),1),e("span",null,"Websites: "+A(x.websites_count),1)])]),e("div",Fa,[e("span",{class:Ie(["inline-flex items-center gap-1",{"text-green-600":x.status==="active","text-red-600":x.status==="inactive","text-yellow-600":x.status==="error"}])},[x.status==="active"?(a(),de($(Ct),{key:0,class:"size-4"})):x.status==="error"?(a(),de($(St),{key:1,class:"size-4"})):(a(),de($(At),{key:2,class:"size-4"})),we(" "+A(x.status),1)],2),e("button",{onClick:O=>d(x),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},[J($(ps),{class:"size-4"})],8,Aa),e("button",{onClick:O=>ee(x),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50",title:"Delete"},[J($(ct),{class:"size-4"})],8,La)])])]))),128))])])])]),v.value||y.value?(a(),i("div",Ra,[e("div",Ma,[e("h2",Ia,A(y.value?"Edit VPS Server":"Add VPS Server"),1),e("form",{onSubmit:Be(Q,["prevent"])},[e("div",Pa,[h[9]||(h[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),N(e("input",{"onUpdate:modelValue":h[1]||(h[1]=x=>k.value.name=x),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,k.value.name]])]),e("div",Ua,[h[10]||(h[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"IP Address / Hostname",-1)),N(e("input",{"onUpdate:modelValue":h[2]||(h[2]=x=>k.value.ip_address=x),type:"text",required:"",placeholder:"e.g. 203.0.113.10 or worker.example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,k.value.ip_address]])]),e("div",Da,[h[11]||(h[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH User",-1)),N(e("input",{"onUpdate:modelValue":h[3]||(h[3]=x=>k.value.ssh_user=x),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,k.value.ssh_user]])]),e("div",za,[h[12]||(h[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Port",-1)),N(e("input",{"onUpdate:modelValue":h[4]||(h[4]=x=>k.value.ssh_port=x),type:"number",required:"",min:"1",max:"65535",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,k.value.ssh_port,void 0,{number:!0}]])]),e("div",Na,[h[14]||(h[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Key Path",-1)),e("div",Va,[N(e("input",{"onUpdate:modelValue":h[5]||(h[5]=x=>k.value.ssh_key_path=x),type:"text",placeholder:"/path/to/ssh/key",class:"block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,k.value.ssh_key_path]]),e("select",{onChange:h[6]||(h[6]=x=>P(x)),class:"block w-full border-gray-300 rounded-md shadow-sm"},[...h[13]||(h[13]=[xt('<option value="">Chọn nhanh đường dẫn</option><option value="/root/.ssh/id_rsa">/root/.ssh/id_rsa</option><option value="/root/.ssh/id_ed25519">/root/.ssh/id_ed25519</option><option value="/home/ubuntu/.ssh/id_rsa">/home/ubuntu/.ssh/id_rsa</option><option value="/home/ubuntu/.ssh/id_ed25519">/home/ubuntu/.ssh/id_ed25519</option><option value="/home/ec2-user/.ssh/id_rsa">/home/ec2-user/.ssh/id_rsa</option><option value="/home/ec2-user/.ssh/id_ed25519">/home/ec2-user/.ssh/id_ed25519</option><option value="/home/admin/.ssh/id_rsa">/home/admin/.ssh/id_rsa</option><option value="/home/admin/.ssh/id_ed25519">/home/admin/.ssh/id_ed25519</option>',9)])],32)])]),y.value?(a(),i("div",Oa,[h[15]||(h[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Worker Key",-1)),e("div",Ba,[e("input",{value:C.value,readonly:"",class:"flex-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Ha),e("button",{type:"button",onClick:q,class:"px-3 py-2 rounded-md border border-gray-300 bg-gray-50"},"Copy")])])):W("",!0),e("div",qa,[h[17]||(h[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),N(e("select",{"onUpdate:modelValue":h[7]||(h[7]=x=>k.value.status=x),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...h[16]||(h[16]=[e("option",{value:"active"},"active",-1),e("option",{value:"inactive"},"inactive",-1),e("option",{value:"error"},"error",-1)])],512),[[We,k.value.status]])]),e("div",Wa,[e("button",{type:"button",onClick:T,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",Ya,A(y.value?"Update":"Create"),1)])],32)])])):W("",!0),s.value?(a(),i("div",Ka,[e("div",{class:Ie([c.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},A(s.value),3)])):W("",!0)]))}},Ja={class:"min-h-screen bg-gray-100"},Ga={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Qa={class:"px-4 py-6 sm:px-0"},Za={key:0,class:"mb-4"},el={class:"flex justify-between items-center mb-6"},tl={class:"bg-white shadow sm:rounded-md"},sl={class:"divide-y divide-gray-200"},al={class:"flex items-center justify-between"},ll={class:"flex-1"},ol={class:"flex items-center"},nl={class:"text-lg font-medium text-gray-900"},rl={class:"text-sm text-gray-500 mt-1"},il={class:"mt-2 flex items-center space-x-4 text-sm"},dl=["title"],ul={class:"flex items-center space-x-2"},cl=["href"],pl=["href"],ml=["onClick","disabled"],gl=["onClick","disabled"],vl=["onClick","disabled"],fl={key:2,class:"relative redeploy-dropdown-container"},bl=["onClick","disabled"],yl={key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50"},hl={class:"py-1"},xl=["onClick"],wl=["onClick"],_l=["onClick"],kl=["onClick","disabled"],$l={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},Cl={class:"bg-white rounded-lg p-6 w-full max-w-md"},Sl={key:0,class:"mb-4 text-sm text-red-600"},Tl={class:"mb-4"},jl={class:"mb-4"},El={class:"mb-4"},Fl=["value"],Al={class:"mb-4"},Ll=["value"],Rl={key:0,class:"mb-4"},Ml={key:1,class:"mb-4"},Il={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Pl={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ul={class:"mb-4"},Dl={class:"space-y-2"},zl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Nl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Vl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Ol={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Bl={class:"flex justify-end space-x-3"},Hl=["disabled"],ql={key:2,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Wl={class:"bg-white rounded-lg p-6 w-full max-w-md"},Yl={class:"mb-4"},Kl={class:"space-y-2"},Xl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Jl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Gl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Ql={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Zl={class:"flex justify-end space-x-3"},eo=["disabled"],to={key:0,class:"fixed bottom-4 right-4 z-50"},so={__name:"WebsiteManagement",setup(t){const s=m([]),c=m([]),g=m(!1);m(!1),m(!1),m(!1),m(null),m([]),m(null);const v=m(""),y=m(""),f=m(""),C=m(""),k=m({});let l=null;m(!1);const w=m([]),P=m([]),Q=m([]),d=m([]),ee=m({}),T=m([]),q=m(!1),V=m(!1),h=m(null),x=m({template_names:["all"]}),O=m({template_names:["all"]}),I=(L,p="success")=>{f.value=L,C.value=p,setTimeout(()=>{f.value=""},3e3)},K=m({domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",cloudflare_account_id:null,wordpress_template:"basic"}),ae=m([]);m({path:"",filename:"",title:"",content:""});const ve=async()=>{try{const p=(await z.get("/api/websites")).data;p.forEach(ue=>{const re=k.value[ue.id];re&&re!==ue.status&&(ue.status==="deployed"?I(`${ue.domain} deployed`,"success"):ue.status==="error"&&I(`${ue.domain} deploy failed`,"error")),k.value[ue.id]=ue.status});const te=new Set(p.map(ue=>ue.domain)),ce=ue=>{for(const re of te)if(re!==ue&&ue.endsWith("."+re))return!0;return!1};s.value=p.filter(ue=>!ce(ue.domain))}catch{I("Failed to fetch websites","error")}},pe=async()=>{try{const L=await z.get("/api/vps");c.value=L.data.filter(p=>p.status==="active")}catch{}},Se=async()=>{var L,p,te,ce;try{await z.post("/api/websites",K.value),I("Website created","success"),v.value="Website created",y.value="success",Le(),await ve()}catch(ue){const re=((p=(L=ue==null?void 0:ue.response)==null?void 0:L.data)==null?void 0:p.message)||((ce=(te=ue==null?void 0:ue.response)==null?void 0:te.data)==null?void 0:ce.error)||"Failed to create website";I(re,"error"),v.value=re,y.value="error"}},Ue=async L=>{var p,te,ce,ue;try{L.status="deploying",w.value=[...w.value,L.id],await z.post(`/api/websites/${L.id}/deploy`),I("Deployment started","success"),v.value="Deployment started",y.value="success",await ve()}catch(re){const Te=((te=(p=re==null?void 0:re.response)==null?void 0:p.data)==null?void 0:te.message)||((ue=(ce=re==null?void 0:re.response)==null?void 0:ce.data)==null?void 0:ue.error)||"Failed to deploy website";I(Te,"error"),v.value=Te,y.value="error",await ve()}finally{w.value=w.value.filter(re=>re!==L.id)}},Ae=async L=>{var p,te,ce,ue;try{P.value=[...P.value,L.id],await z.post(`/api/websites/${L.id}/ssl`),I("SSL generation started","success"),v.value="SSL generation started",y.value="success",await ve()}catch(re){const Te=((te=(p=re==null?void 0:re.response)==null?void 0:p.data)==null?void 0:te.message)||((ue=(ce=re==null?void 0:re.response)==null?void 0:ce.data)==null?void 0:ue.error)||"Failed to enable SSL";I(Te,"error"),v.value=Te,y.value="error"}finally{P.value=P.value.filter(re=>re!==L.id)}},he=async L=>{var p,te,ce,ue;if(confirm(`Are you sure you want to delete ${L.domain}?`))try{d.value=[...d.value,L.id],await z.delete(`/api/websites/${L.id}`),I("Website deleted","success"),await ve()}catch(re){const Te=((te=(p=re==null?void 0:re.response)==null?void 0:p.data)==null?void 0:te.message)||((ue=(ce=re==null?void 0:re.response)==null?void 0:ce.data)==null?void 0:ue.error)||"Failed to delete website";I(Te,"error")}finally{d.value=d.value.filter(re=>re!==L.id)}},xe=async L=>{var p,te,ce,ue;try{Q.value=[...Q.value,L.id],await z.post(`/api/websites/${L.id}/deactivate`),I("Website deactivated","success"),v.value="Website deactivated",y.value="success",ve()}catch(re){const Te=((te=(p=re==null?void 0:re.response)==null?void 0:p.data)==null?void 0:te.message)||((ue=(ce=re==null?void 0:re.response)==null?void 0:ce.data)==null?void 0:ue.error)||"Failed to deactivate website";I(Te,"error"),v.value=Te,y.value="error"}finally{Q.value=Q.value.filter(re=>re!==L.id)}};m([]);const Le=()=>{g.value=!1,K.value={domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",wordpress_template:"basic"}},ze=async()=>{try{const{data:L}=await z.get("/api/cloudflare-accounts");ae.value=L;const p=L.find(te=>te.is_default);p&&!K.value.cloudflare_account_id&&(K.value.cloudflare_account_id=p.id)}catch(L){console.error("Failed to load Cloudflare accounts",L)}};Ze(()=>{ve(),pe(),ze(),l=setInterval(ve,3e3),document.addEventListener("click",L=>{L.target.closest(".redeploy-dropdown-container")||(ee.value={})})}),Ht(()=>{l&&clearInterval(l)});const Ne=L=>{const p=`/preview/${L.id}`,te=localStorage.getItem("adminToken")||"",ce=new URLSearchParams;te&&ce.set("token",te),ce.set("hide_preview_bar","1");const ue=ce.toString();return ue?`${p}?${ue}`:p},Ve=L=>{ee.value={...ee.value,[L]:!ee.value[L]}},me=async L=>{var p,te;try{T.value=[...T.value,L.id],ee.value[L.id]=!1;const ce=await z.post(`/api/websites/${L.id}/redeploy-pages`);I(ce.data.message||"Pages redeployed successfully","success")}catch(ce){const ue=((te=(p=ce==null?void 0:ce.response)==null?void 0:p.data)==null?void 0:te.message)||"Failed to redeploy pages";I(ue,"error")}finally{T.value=T.value.filter(ce=>ce!==L.id)}},ne=L=>{h.value=L,ee.value[L.id]=!1,q.value=!0},E=L=>{h.value=L,ee.value[L.id]=!1,V.value=!0},F=async()=>{var L,p;if(h.value)try{T.value=[...T.value,h.value.id];const te=await z.post(`/api/websites/${h.value.id}/redeploy-template-assets`,x.value);I(te.data.message||"Template assets deployed","success"),q.value=!1}catch(te){const ce=((p=(L=te==null?void 0:te.response)==null?void 0:L.data)==null?void 0:p.message)||"Failed to deploy template assets";I(ce,"error")}finally{T.value=T.value.filter(te=>te!==h.value.id)}},u=async()=>{var L,p;if(h.value)try{T.value=[...T.value,h.value.id];const te={template_names:(O.value.template_names||[]).length===0?[]:O.value.template_names},ce=await z.post(`/api/websites/${h.value.id}/update-pages-template`,te);I(ce.data.message||"Header/footer updated","success"),V.value=!1}catch(te){const ce=((p=(L=te==null?void 0:te.response)==null?void 0:L.data)==null?void 0:p.message)||"Failed to update header/footer";I(ce,"error")}finally{T.value=T.value.filter(te=>te!==h.value.id)}},_=L=>{const p=x.value.template_names||[];p.indexOf(L)===-1?x.value.template_names=[...p,L]:x.value.template_names=p.filter(ce=>ce!==L),console.log("Redeploy templates:",x.value.template_names)},o=L=>{const p=O.value.template_names||[];p.indexOf(L)===-1?O.value.template_names=[...p,L]:O.value.template_names=p.filter(ce=>ce!==L),console.log("Update templates:",O.value.template_names)},b=L=>(x.value.template_names||[]).includes(L),j=L=>(O.value.template_names||[]).includes(L),S=()=>{q.value=!1,h.value=null,x.value={template_names:["all"]}},Y=()=>{V.value=!1,h.value=null,O.value={template_names:["all"]}};return(L,p)=>{var ce,ue,re,Te;const te=nt("router-link");return a(),i(fe,null,[e("div",Ja,[e("div",Ga,[e("div",Qa,[v.value?(a(),i("div",Za,[e("div",{class:Ie([y.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},A(v.value),3)])):W("",!0),e("div",el,[p[15]||(p[15]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Websites",-1)),e("button",{onClick:p[0]||(p[0]=U=>g.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Create Website ")]),e("div",tl,[e("ul",sl,[(a(!0),i(fe,null,be(s.value,U=>{var B;return a(),i("li",{key:U.id,class:"px-6 py-4 relative overflow-visible"},[e("div",al,[e("div",ll,[e("div",ol,[e("h3",nl,A(U.domain),1),e("span",{class:Ie([{"bg-blue-100 text-blue-800":U.type==="html","bg-green-100 text-green-800":U.type==="wordpress","bg-purple-100 text-purple-800":U.type==="laravel1"},"ml-2 px-2 py-1 text-xs font-medium rounded-full"])},A(U.type),3)]),e("p",rl," VPS: "+A(((B=U.vps_server)==null?void 0:B.name)||"N/A"),1),e("div",il,[e("span",{class:Ie(["inline-flex items-center",{"text-blue-600":U.status==="deploying","text-green-600":U.status==="deployed","text-gray-600":U.status==="pending"||U.status==="draft","text-orange-600":U.status==="suspended","text-red-600":U.status==="error"}]),title:U.status},[U.status==="deploying"?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):U.status==="deployed"?(a(),de($(Ct),{key:1,class:"size-4"})):U.status==="pending"||U.status==="draft"?(a(),de($(At),{key:2,class:"size-4"})):U.status==="suspended"?(a(),de($(kt),{key:3,class:"size-4"})):(a(),de($(St),{key:4,class:"size-4"}))],10,dl),e("span",{class:Ie(["inline-flex items-center gap-1",U.ssl_enabled?"text-green-600":"text-gray-400"])},[U.ssl_enabled?(a(),de($(mt),{key:0,class:"size-4"})):(a(),de($(ms),{key:1,class:"size-4"}))],2)])]),e("div",ul,[e("a",{href:(U.ssl_enabled?"https://":"http://")+U.domain,target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Website"},[J($(vt),{class:"size-4"})],8,cl),J(te,{to:`/websites/${U.id}/pages`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:je(()=>[J($(gs),{class:"size-4"})]),_:1},8,["to"]),J(te,{to:`/websites/${U.id}/folders`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-amber-600 hover:bg-gray-50",title:"Manage Categories"},{default:je(()=>[J($(Rs),{class:"size-4"})]),_:1},8,["to"]),J(te,{to:`/websites/${U.id}/subdomains`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"Manage Subdomains"},{default:je(()=>[J($(is),{class:"size-4"})]),_:1},8,["to"]),J(te,{to:`/websites/${U.id}/settings`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Website Settings"},{default:je(()=>[J($(cs),{class:"size-4"})]),_:1},8,["to"]),e("a",{href:Ne(U),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[J($(At),{class:"size-4"})],8,pl),e("button",{onClick:r=>Ue(U),disabled:U.status==="deploying"||U.status==="deployed"||w.value.includes(U.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[w.value.includes(U.id)?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(Nt),{key:1,class:"size-4"}))],8,ml),U.status==="deployed"?(a(),i("button",{key:0,onClick:r=>Ae(U),disabled:P.value.includes(U.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[P.value.includes(U.id)?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(mt),{key:1,class:"size-4"}))],8,gl)):W("",!0),U.status==="deployed"||U.status==="error"?(a(),i("button",{key:1,onClick:r=>xe(U),disabled:Q.value.includes(U.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[Q.value.includes(U.id)?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(kt),{key:1,class:"size-4"}))],8,vl)):W("",!0),U.status==="deployed"&&U.type==="laravel1"?(a(),i("div",fl,[e("button",{onClick:r=>Ve(U.id),disabled:T.value.includes(U.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-teal-600 hover:bg-gray-50 disabled:text-gray-400",title:"Redeploy Options"},[T.value.includes(U.id)?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(Ms),{key:1,class:"size-4"}))],8,bl),ee.value[U.id]?(a(),i("div",yl,[e("div",hl,[e("button",{onClick:r=>me(U),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy All Pages ",8,xl),e("button",{onClick:r=>ne(U),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy Template Assets ",8,wl),e("button",{onClick:r=>E(U),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Update Pages Template ",8,_l)])])):W("",!0)])):W("",!0),e("button",{onClick:r=>he(U),disabled:d.value.includes(U.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[d.value.includes(U.id)?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(ct),{key:1,class:"size-4"}))],8,kl)])])])}),128))])])])]),g.value?(a(),i("div",$l,[e("div",Cl,[p[30]||(p[30]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create Website",-1)),c.value.length===0?(a(),i("div",Sl,"Chưa có VPS ở trạng thái active. Vào mục Servers để đặt trạng thái active cho VPS hiện tại.")):W("",!0),e("form",{onSubmit:Be(Se,["prevent"])},[e("div",Tl,[p[16]||(p[16]=e("label",{class:"block text-sm font-medium text-gray-700"},"Domain",-1)),N(e("input",{"onUpdate:modelValue":p[1]||(p[1]=U=>K.value.domain=U),type:"text",required:"",placeholder:"example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,K.value.domain]])]),e("div",jl,[p[18]||(p[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Type",-1)),N(e("select",{"onUpdate:modelValue":p[2]||(p[2]=U=>K.value.type=U),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...p[17]||(p[17]=[e("option",{value:"html"},"HTML Website",-1),e("option",{value:"wordpress"},"WordPress",-1),e("option",{value:"laravel1"},"Laravel 1",-1)])],512),[[We,K.value.type]])]),e("div",El,[p[20]||(p[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),N(e("select",{"onUpdate:modelValue":p[3]||(p[3]=U=>K.value.vps_server_id=U),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[p[19]||(p[19]=e("option",{value:""},"Select VPS Server",-1)),(a(!0),i(fe,null,be(c.value,U=>(a(),i("option",{key:U.id,value:U.id},A(U.name)+" ("+A(U.ip_address)+") ",9,Fl))),128))],512),[[We,K.value.vps_server_id]])]),e("div",Al,[p[22]||(p[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Cloudflare Account",-1)),N(e("select",{"onUpdate:modelValue":p[4]||(p[4]=U=>K.value.cloudflare_account_id=U),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[p[21]||(p[21]=e("option",{value:null},"Select Account (optional)",-1)),(a(!0),i(fe,null,be(ae.value,U=>(a(),i("option",{key:U.id,value:U.id},A(U.name)+" - "+A(U.email),9,Ll))),128))],512),[[We,K.value.cloudflare_account_id]]),p[23]||(p[23]=e("p",{class:"mt-1 text-xs text-gray-500"},"Chọn Cloudflare account để quản lý DNS và SSL cho website này",-1))]),K.value.type==="wordpress"?(a(),i("div",Rl,[p[25]||(p[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"WordPress Template",-1)),N(e("select",{"onUpdate:modelValue":p[5]||(p[5]=U=>K.value.wordpress_template=U),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...p[24]||(p[24]=[e("option",{value:"basic"},"Basic WordPress",-1),e("option",{value:"business"},"Business Theme",-1),e("option",{value:"ecommerce"},"E-commerce Theme",-1)])],512),[[We,K.value.wordpress_template]])])):W("",!0),K.value.type==="laravel1"?(a(),i("div",Ml,[p[27]||(p[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template Package",-1)),N(e("select",{"onUpdate:modelValue":p[6]||(p[6]=U=>K.value.template_package=U),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...p[26]||(p[26]=[e("option",{value:"laravel-hotel-1"},"Hotel Template",-1)])],512),[[We,K.value.template_package]]),p[28]||(p[28]=e("p",{class:"mt-1 text-xs text-gray-500"},"Includes home, listing, and detail pages with shared assets",-1))])):W("",!0),e("div",{class:"flex justify-end space-x-3"},[e("button",{type:"button",onClick:Le,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),p[29]||(p[29]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Create ",-1))])],32)])])):W("",!0),q.value?(a(),i("div",Il,[e("div",Pl,[p[37]||(p[37]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Redeploy Template Assets",-1)),e("div",Ul,[p[35]||(p[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",Dl,[e("div",{class:"flex items-center cursor-pointer",onClick:p[7]||(p[7]=U=>_("all"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:b("all")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[b("all")?(a(),i("span",zl,"✓")):W("",!0)],4),p[31]||(p[31]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[8]||(p[8]=U=>_("home"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:b("home")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[b("home")?(a(),i("span",Nl,"✓")):W("",!0)],4),p[32]||(p[32]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[9]||(p[9]=U=>_("listing"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:b("listing")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[b("listing")?(a(),i("span",Vl,"✓")):W("",!0)],4),p[33]||(p[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[10]||(p[10]=U=>_("detail"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:b("detail")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[b("detail")?(a(),i("span",Ol,"✓")):W("",!0)],4),p[34]||(p[34]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),p[38]||(p[38]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-blue-800"}," Deploys CSS/JS files from the selected templates to all pages. Use this when you update template scripts or styles. ")],-1)),e("div",Bl,[e("button",{type:"button",onClick:S,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:F,disabled:T.value.includes((ce=h.value)==null?void 0:ce.id),class:"px-3 py-2 bg-teal-600 text-white text-sm rounded-md hover:bg-teal-700 disabled:opacity-50 flex items-center gap-2"},[T.value.includes((ue=h.value)==null?void 0:ue.id)?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):W("",!0),p[36]||(p[36]=we(" Deploy Assets ",-1))],8,Hl)])])])):W("",!0),V.value?(a(),i("div",ql,[e("div",Wl,[p[45]||(p[45]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Update Pages Template",-1)),e("div",Yl,[p[43]||(p[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",Kl,[e("div",{class:"flex items-center cursor-pointer",onClick:p[11]||(p[11]=U=>o("all"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:j("all")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[j("all")?(a(),i("span",Xl,"✓")):W("",!0)],4),p[39]||(p[39]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[12]||(p[12]=U=>o("home"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:j("home")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[j("home")?(a(),i("span",Jl,"✓")):W("",!0)],4),p[40]||(p[40]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[13]||(p[13]=U=>o("listing"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:j("listing")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[j("listing")?(a(),i("span",Gl,"✓")):W("",!0)],4),p[41]||(p[41]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[14]||(p[14]=U=>o("detail"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:j("detail")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[j("detail")?(a(),i("span",Ql,"✓")):W("",!0)],4),p[42]||(p[42]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),p[46]||(p[46]=e("div",{class:"bg-purple-50 border border-purple-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-purple-800"},[we(" Cập nhật phần header/footer cho "),e("strong",null,"các trang đang dùng template đã chọn"),we(", sau đó tự động deploy các trang đó. Tính năng này "),e("strong",null,"không"),we(' cập nhật CSS/JS (dùng mục "Redeploy Template Assets" cho CSS/JS). Với website chính, hệ thống sẽ xếp lịch redeploy Trang chủ và các trang Category liên quan. ')])],-1)),e("div",Zl,[e("button",{type:"button",onClick:Y,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:u,disabled:T.value.includes((re=h.value)==null?void 0:re.id),class:"px-3 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2"},[T.value.includes((Te=h.value)==null?void 0:Te.id)?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):W("",!0),p[44]||(p[44]=we(" Update header/footer ",-1))],8,eo)])])])):W("",!0)]),f.value?(a(),i("div",to,[e("div",{class:Ie([C.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},A(f.value),3)])):W("",!0)],64)}}},ao={class:"min-h-screen bg-gray-100"},lo={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},oo={class:"px-4 py-6 sm:px-0"},no={class:"flex items-center justify-between mb-6"},ro={class:"text-3xl font-bold text-gray-900"},io={key:0,class:"ml-2 text-lg text-gray-500"},uo={key:0,class:"mb-4"},co={key:1,class:"text-gray-600"},po={key:2,class:"mb-4"},mo={class:"inline-flex rounded-md shadow-sm",role:"group"},go={key:3,class:"bg-white shadow sm:rounded-md p-6 space-y-6"},vo={key:0,class:"space-y-6"},fo=["value"],bo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},yo={class:"mt-2 flex items-center gap-4"},ho={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},xo=["src"],wo={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},_o={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},ko={class:"mt-2 flex items-center gap-4"},$o={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},Co=["src"],So={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},To={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},jo={class:"mt-2 flex items-center gap-4"},Eo={class:"h-10 w-10 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},Fo=["src"],Ao={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},Lo={key:0,class:"text-xs text-gray-500 truncate max-w-[220px]"},Ro={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Mo={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Io={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Po={key:1,class:"space-y-6"},Uo={class:"flex items-center justify-between mb-4"},Do={class:"space-y-2"},zo={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},No=["onDragstart","onDrop"],Vo={class:"p-4"},Oo={class:"flex items-start justify-between gap-4"},Bo={class:"flex items-start gap-3 flex-1 min-w-0"},Ho={class:"flex-1 min-w-0 space-y-2"},qo={class:"flex items-center gap-2"},Wo=["onUpdate:modelValue"],Yo=["onUpdate:modelValue"],Ko={class:"flex items-center gap-2 flex-shrink-0"},Xo=["onClick"],Jo=["onClick"],Go={key:0,class:"mt-4 ml-8 space-y-2 pt-3 border-t border-gray-100"},Qo=["onDragstart","onDrop"],Zo={class:"flex-1 min-w-0 space-y-1"},en=["onUpdate:modelValue"],tn=["onUpdate:modelValue"],sn=["onClick"],an={class:"flex items-center justify-between mb-4"},ln={class:"space-y-3"},on={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},nn=["onDragstart","onDrop"],rn={class:"p-4"},dn={class:"flex items-start justify-between gap-4 mb-3"},un={class:"flex items-start gap-3 flex-1 min-w-0"},cn={class:"flex-1 min-w-0"},pn=["onUpdate:modelValue","placeholder"],mn={class:"flex items-center gap-2 flex-shrink-0"},gn=["onClick"],vn=["onClick"],fn={key:0,class:"ml-8 space-y-2 pt-3 border-t border-gray-100"},bn=["onDragstart","onDrop"],yn={class:"flex-1 min-w-0 space-y-1"},hn=["onUpdate:modelValue"],xn=["onUpdate:modelValue"],wn=["onClick"],_n={key:1,class:"ml-8 pt-3 border-t border-gray-100"},kn={class:"flex justify-end space-x-3"},$n=["disabled"],Cn={key:0,class:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4"},Sn={key:1},Tn={class:"px-6 py-4 space-y-4"},jn=["value"],En={class:"pt-3 border-t border-gray-200"},Fn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},An={class:"px-6 py-4 border-b border-gray-200"},Ln={class:"text-sm text-gray-500 mt-1"},Rn={class:"px-6 py-4 space-y-4"},Mn=["value"],In={class:"pt-3 border-t border-gray-200"},Pn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},Un={class:"px-6 py-4 space-y-4"},Dn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},zn={class:"px-6 py-4 border-b border-gray-200"},Nn={class:"text-sm text-gray-500 mt-1"},Vn={class:"px-6 py-4 space-y-4"},On=["value"],Bn={class:"pt-3 border-t border-gray-200"},Hn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},qn={__name:"WebsiteSettings",setup(t){const c=pt().params.websiteId,g=m(null),v=m(!0),y=m(!1),f=m(""),C=m(""),k=m("general"),l=m({title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}),w=m([]),P=m(null),Q=m(null),d=m(null),ee=m(null),T=m(null),q=m(null),V=m(null),h=Me(()=>(l.value.custom_head_html||"").split(`
`).length||1),x=Me(()=>(l.value.custom_body_html||"").split(`
`).length||1),O=Me(()=>(l.value.custom_footer_html||"").split(`
`).length||1),I=H=>{H==="head"&&Q.value&&T.value&&(Q.value.scrollTop=T.value.scrollTop),H==="body"&&d.value&&q.value&&(d.value.scrollTop=q.value.scrollTop),H==="footer"&&ee.value&&V.value&&(ee.value.scrollTop=V.value.scrollTop)},K=async()=>{try{const H=await z.get(`/api/websites/${c}`);g.value=H.data,P.value=H.data.cloudflare_account_id}catch{}},ae=async()=>{try{const H=await z.get("/api/cloudflare-accounts");w.value=H.data||[]}catch(H){console.error("Failed to fetch Cloudflare accounts:",H)}},ve=async()=>{var H,n;try{await z.put(`/api/websites/${c}`,{cloudflare_account_id:P.value}),f.value="Cloudflare account đã được cập nhật",C.value="success"}catch(_e){f.value=((n=(H=_e==null?void 0:_e.response)==null?void 0:H.data)==null?void 0:n.message)||"Không thể cập nhật Cloudflare account",C.value="error"}},pe=async()=>{var H,n;try{const G=(await z.get(`/api/websites/${c}/settings`)).data||{};l.value={title:G.title||"",logo_header_url:G.logo_header_url||"",logo_footer_url:G.logo_footer_url||"",favicon_url:G.favicon_url||"",custom_head_html:G.custom_head_html||"",custom_body_html:G.custom_body_html||"",custom_footer_html:G.custom_footer_html||"",menu:Array.isArray(G.menu)?G.menu:[],footer_links_html:G.footer_links_html||""},xe.value=Array.isArray(G.menu)?G.menu:[],Array.isArray(G.footer_columns)?D.value=G.footer_columns:D.value=[]}catch(_e){f.value=((n=(H=_e==null?void 0:_e.response)==null?void 0:H.data)==null?void 0:n.error)||"Failed to load settings",C.value="error"}},Se=async()=>{var H,n,_e,G;y.value=!0,f.value="";try{l.value.footer_links_html=It(),l.value.footer_columns=D.value,await z.put(`/api/websites/${c}/settings`,l.value),f.value="Updated settings",C.value="success"}catch(ge){f.value=((n=(H=ge==null?void 0:ge.response)==null?void 0:H.data)==null?void 0:n.message)||((G=(_e=ge==null?void 0:ge.response)==null?void 0:_e.data)==null?void 0:G.error)||(ge==null?void 0:ge.message)||"Failed to update settings",C.value="error"}finally{y.value=!1}},Ue=()=>{l.value={title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}},Ae=async(H,n)=>{var ge,M,Ce,ke;const _e=((ge=H==null?void 0:H.target)==null?void 0:ge.files)||[];if(!_e.length)return;const G=new FormData;G.append("file",_e[0]);try{let Ee=`/api/websites/${c}/assets/${n}`;const Fe=await z.post(Ee,G,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},timeout:6e4}),Ye=((M=Fe==null?void 0:Fe.data)==null?void 0:M.url)||"";n==="logo-header"?l.value.logo_header_url=Ye:n==="logo-footer"?l.value.logo_footer_url=Ye:n==="favicon"&&(l.value.favicon_url=Ye),f.value="Uploaded "+n,C.value="success"}catch(Ee){const Fe=((ke=(Ce=Ee==null?void 0:Ee.response)==null?void 0:Ce.data)==null?void 0:ke.error)||(Ee==null?void 0:Ee.message)||"Upload failed";f.value=Fe,C.value="error"}finally{H.target.value=""}};Ze(async()=>{await Promise.all([K(),pe(),_(),ae()]),xe.value=Array.isArray(l.value.menu)?[...l.value.menu]:[],v.value=!1});const he=m([]),xe=m([]),Le=m(!1),ze=m(!1),Ne=m(-1),Ve=m(""),me=m(""),ne=m(""),E=m(""),F=m(""),u=m(""),_=async()=>{try{const H=await z.get(`/api/websites/${c}/folders`);he.value=H.data||[]}catch{}},o=H=>`/${(H==null?void 0:H.slug)||""}`,b=()=>{if(Ve.value){const H=he.value.find(n=>String(n.id)===String(Ve.value));H&&(me.value=H.name,ne.value=o(H))}},j=()=>{if(E.value){const H=he.value.find(n=>String(n.id)===String(E.value));H&&(F.value=H.name,u.value=o(H))}};_t(Ve,b),_t(E,j);const S=()=>{if(!me.value||!ne.value){f.value="Vui lòng điền đầy đủ thông tin",C.value="error";return}xe.value.push({label:me.value,url:ne.value,children:[]}),l.value.menu=xe.value,Ve.value="",me.value="",ne.value="",Le.value=!1,f.value="Đã thêm menu",C.value="success"},Y=H=>{Ne.value=H,ze.value=!0},L=()=>{if(!F.value||!u.value){f.value="Vui lòng điền đầy đủ thông tin",C.value="error";return}const H=xe.value[Ne.value];H&&(H.children=H.children||[],H.children.push({label:F.value,url:u.value}),l.value.menu=xe.value,E.value="",F.value="",u.value="",ze.value=!1,f.value="Đã thêm menu con",C.value="success")},p=()=>{l.value.menu=xe.value},te=H=>{xe.value.splice(H,1),l.value.menu=xe.value},ce=(H,n)=>{const _e=xe.value[H];_e&&(_e.children.splice(n,1),l.value.menu=xe.value)};let ue=-1,re={parent:-1,index:-1};const Te=H=>{ue=H},U=H=>{if(ue===-1||H===ue)return;const n=xe.value,[_e]=n.splice(ue,1);n.splice(H,0,_e),ue=-1,l.value.menu=n},B=(H,n)=>{re={parent:H,index:n}},r=(H,n)=>{if(re.parent!==H)return;const _e=xe.value[H].children||[],G=re.index;if(G===n||G<0)return;const[ge]=_e.splice(G,1);_e.splice(n,0,ge),re={parent:-1,index:-1},l.value.menu=xe.value},D=m([]),le=m(!1),R=m(!1),X=m(-1),ie=m(""),De=m(""),se=m(""),$e=m("");_t(De,()=>{if(De.value){const H=he.value.find(n=>String(n.id)===String(De.value));H&&(se.value=H.name,$e.value=o(H))}});const tt=()=>{D.value.push({title:ie.value||"",links:[]}),ie.value="",le.value=!1,f.value="Đã thêm cột footer",C.value="success"},Oe=H=>{X.value=H,R.value=!0},Je=()=>{if(!se.value||!$e.value){f.value="Vui lòng điền đầy đủ thông tin",C.value="error";return}const H=D.value[X.value];H&&(H.links.push({label:se.value,url:$e.value}),De.value="",se.value="",$e.value="",R.value=!1,f.value="Đã thêm liên kết footer",C.value="success")},at=H=>{D.value.splice(H,1)},He=()=>{},et=(H,n)=>{const _e=D.value[H];_e&&_e.links.splice(n,1)};let lt=-1;const rt=H=>{lt=H},Mt=H=>{if(lt===-1||H===lt)return;const n=D.value,[_e]=n.splice(lt,1);n.splice(H,0,_e),lt=-1};let ft={column:-1,index:-1};const Tt=(H,n)=>{ft={column:H,index:n}},jt=(H,n)=>{if(ft.column!==H)return;const _e=D.value[H].links||[],G=ft.index;if(G===n||G<0)return;const[ge]=_e.splice(G,1);_e.splice(n,0,ge),ft={column:-1,index:-1}},It=()=>{const H=D.value;if(!H.length)return"";let n='<div class="grid grid-cols-'+H.length+' gap-6">';for(const _e of H){n+="<div>",_e.title&&(n+='<div class="font-medium mb-2">'+_e.title+"</div>"),n+='<ul class="space-y-1">';const G=_e.links||[];for(const ge of G)n+='<li><a href="'+(ge.url||"#")+'" class="text-gray-600 hover:text-gray-900">'+(ge.label||"")+"</a></li>";n+="</ul>",n+="</div>"}return n+="</div>",n};return(H,n)=>{var G,ge;const _e=nt("router-link");return a(),i("div",ao,[e("div",lo,[e("div",oo,[e("div",no,[e("h1",ro,[n[41]||(n[41]=we(" Website Settings ",-1)),g.value?(a(),i("span",io,A(g.value.domain),1)):W("",!0)]),J(_e,{to:"/websites",class:"px-3 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:je(()=>[...n[42]||(n[42]=[we("Back",-1)])]),_:1})]),f.value?(a(),i("div",uo,[e("div",{class:Ie([C.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},A(f.value),3)])):W("",!0),v.value?(a(),i("div",co,"Loading...")):(a(),i("div",po,[e("div",mo,[e("button",{type:"button",onClick:n[0]||(n[0]=M=>k.value="general"),class:Ie([k.value==="general"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-l-md hover:bg-gray-50"])},"Cài đặt chung",2),e("button",{type:"button",onClick:n[1]||(n[1]=M=>k.value="navigation"),class:Ie([k.value==="navigation"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-r-md hover:bg-gray-50"])},"Menu Header & Footer",2)])])),v.value?W("",!0):(a(),i("div",go,[k.value==="general"?(a(),i("div",vo,[e("div",null,[n[43]||(n[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề",-1)),N(e("input",{"onUpdate:modelValue":n[2]||(n[2]=M=>l.value.title=M),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Website title"},null,512),[[oe,l.value.title]])]),e("div",null,[n[45]||(n[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Cloudflare Account",-1)),N(e("select",{"onUpdate:modelValue":n[3]||(n[3]=M=>P.value=M),onChange:ve,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[n[44]||(n[44]=e("option",{value:null},"-- Không sử dụng Cloudflare (dùng bản ghi *) --",-1)),(a(!0),i(fe,null,be(w.value,M=>(a(),i("option",{key:M.id,value:M.id},A(M.email),9,fo))),128))],544),[[We,P.value]]),n[46]||(n[46]=e("p",{class:"mt-1 text-sm text-gray-500"},"Chọn Cloudflare account để quản lý DNS cho website này. Để trống nếu đã có wildcard DNS record",-1))]),e("div",bo,[e("div",null,[n[48]||(n[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Header",-1)),e("div",yo,[e("div",ho,[l.value.logo_header_url?(a(),i("img",{key:0,src:l.value.logo_header_url,class:"object-contain h-full w-full"},null,8,xo)):(a(),de($(Pt),{key:1,class:"size-6 text-gray-400"}))]),e("label",wo,[J($(Ut),{class:"size-4 mr-2"}),n[47]||(n[47]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:n[4]||(n[4]=M=>Ae(M,"logo-header")),class:"hidden"},null,32)]),l.value.logo_header_url?(a(),i("span",_o,A(l.value.logo_header_url),1)):W("",!0)])]),e("div",null,[n[50]||(n[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Footer",-1)),e("div",ko,[e("div",$o,[l.value.logo_footer_url?(a(),i("img",{key:0,src:l.value.logo_footer_url,class:"object-contain h-full w-full"},null,8,Co)):(a(),de($(Pt),{key:1,class:"size-6 text-gray-400"}))]),e("label",So,[J($(Ut),{class:"size-4 mr-2"}),n[49]||(n[49]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:n[5]||(n[5]=M=>Ae(M,"logo-footer")),class:"hidden"},null,32)]),l.value.logo_footer_url?(a(),i("span",To,A(l.value.logo_footer_url),1)):W("",!0)])])]),e("div",null,[n[52]||(n[52]=e("label",{class:"block text-sm font-medium text-gray-700"},"Favicon",-1)),e("div",jo,[e("div",Eo,[l.value.favicon_url?(a(),i("img",{key:0,src:l.value.favicon_url,class:"object-contain h-full w-full"},null,8,Fo)):(a(),de($(Pt),{key:1,class:"size-5 text-gray-400"}))]),e("label",Ao,[J($(Ut),{class:"size-4 mr-2"}),n[51]||(n[51]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".ico,.png,.jpg,.jpeg,.svg",onChange:n[6]||(n[6]=M=>Ae(M,"favicon")),class:"hidden"},null,32)]),l.value.favicon_url?(a(),i("span",Lo,A(l.value.favicon_url),1)):W("",!0)])]),e("div",null,[n[53]||(n[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào header",-1)),e("div",Ro,[e("div",{ref_key:"gutterHead",ref:Q,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(a(!0),i(fe,null,be(h.value,M=>(a(),i("div",{key:M,class:"leading-6"},A(M),1))),128))],512),N(e("textarea",{ref_key:"codeHead",ref:T,"onUpdate:modelValue":n[7]||(n[7]=M=>l.value.custom_head_html=M),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:n[8]||(n[8]=M=>I("head"))},null,544),[[oe,l.value.custom_head_html]])])]),e("div",null,[n[54]||(n[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào body",-1)),e("div",Mo,[e("div",{ref_key:"gutterBody",ref:d,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(a(!0),i(fe,null,be(x.value,M=>(a(),i("div",{key:M,class:"leading-6"},A(M),1))),128))],512),N(e("textarea",{ref_key:"codeBody",ref:q,"onUpdate:modelValue":n[9]||(n[9]=M=>l.value.custom_body_html=M),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<div>...</div>",onScroll:n[10]||(n[10]=M=>I("body"))},null,544),[[oe,l.value.custom_body_html]])])]),e("div",null,[n[55]||(n[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào footer",-1)),e("div",Io,[e("div",{ref_key:"gutterFooter",ref:ee,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(a(!0),i(fe,null,be(O.value,M=>(a(),i("div",{key:M,class:"leading-6"},A(M),1))),128))],512),N(e("textarea",{ref_key:"codeFooter",ref:V,"onUpdate:modelValue":n[11]||(n[11]=M=>l.value.custom_footer_html=M),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:n[12]||(n[12]=M=>I("footer"))},null,544),[[oe,l.value.custom_footer_html]])])])])):W("",!0),k.value==="navigation"?(a(),i("div",Po,[e("div",null,[e("div",Uo,[n[57]||(n[57]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Menu Header"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:n[13]||(n[13]=M=>Le.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...n[56]||(n[56]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),we(" Thêm menu ",-1)])])]),e("div",Do,[xe.value.length===0?(a(),i("div",zo,[...n[58]||(n[58]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có menu nào. Click "Thêm menu" để bắt đầu.',-1)])])):W("",!0),(a(!0),i(fe,null,be(xe.value,(M,Ce)=>(a(),i("div",{key:Ce,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:ke=>Te(Ce),onDragover:n[15]||(n[15]=Be(()=>{},["prevent"])),onDrop:ke=>U(Ce)},[e("div",Vo,[e("div",Oo,[e("div",Bo,[n[59]||(n[59]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",Ho,[e("div",qo,[N(e("input",{"onUpdate:modelValue":ke=>M.label=ke,onInput:p,type:"text",class:"flex-1 px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu"},null,40,Wo),[[oe,M.label]])]),N(e("input",{"onUpdate:modelValue":ke=>M.url=ke,onInput:p,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL (ví dụ: /khach-san)"},null,40,Yo),[[oe,M.url]])])]),e("div",Ko,[e("button",{type:"button",onClick:ke=>Y(Ce),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm menu con"},[...n[60]||(n[60]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,Xo),e("button",{type:"button",onClick:ke=>te(Ce),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa"},[...n[61]||(n[61]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Jo)])]),M.children&&M.children.length>0?(a(),i("div",Go,[(a(!0),i(fe,null,be(M.children,(ke,Ee)=>(a(),i("div",{key:Ee,class:"flex items-center gap-3 group",draggable:"true",onDragstart:Fe=>B(Ce,Ee),onDragover:n[14]||(n[14]=Be(()=>{},["prevent"])),onDrop:Fe=>r(Ce,Ee)},[n[63]||(n[63]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),n[64]||(n[64]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("div",Zo,[N(e("input",{"onUpdate:modelValue":Fe=>ke.label=Fe,onInput:p,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu con"},null,40,en),[[oe,ke.label]]),N(e("input",{"onUpdate:modelValue":Fe=>ke.url=Fe,onInput:p,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,tn),[[oe,ke.url]])]),e("button",{type:"button",onClick:Fe=>ce(Ce,Ee),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...n[62]||(n[62]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,sn)],40,Qo))),128))])):W("",!0)])],40,No))),128))])]),e("div",null,[e("div",an,[n[66]||(n[66]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Footer"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:n[16]||(n[16]=M=>le.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...n[65]||(n[65]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),we(" Thêm cột ",-1)])])]),e("div",ln,[D.value.length===0?(a(),i("div",on,[...n[67]||(n[67]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có cột footer nào. Click "Thêm cột" để bắt đầu.',-1)])])):W("",!0),(a(!0),i(fe,null,be(D.value,(M,Ce)=>(a(),i("div",{key:Ce,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:ke=>rt(Ce),onDragover:n[18]||(n[18]=Be(()=>{},["prevent"])),onDrop:ke=>Mt(Ce)},[e("div",rn,[e("div",dn,[e("div",un,[n[68]||(n[68]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",cn,[N(e("input",{"onUpdate:modelValue":ke=>M.title=ke,onInput:He,type:"text",class:"w-full px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:`Tiêu đề cột ${Ce+1}`},null,40,pn),[[oe,M.title]])])]),e("div",mn,[e("button",{type:"button",onClick:ke=>Oe(Ce),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm liên kết"},[...n[69]||(n[69]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,gn),e("button",{type:"button",onClick:ke=>at(Ce),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa cột"},[...n[70]||(n[70]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,vn)])]),M.links&&M.links.length>0?(a(),i("div",fn,[(a(!0),i(fe,null,be(M.links,(ke,Ee)=>(a(),i("div",{key:Ee,class:"flex items-center gap-3 group",draggable:"true",onDragstart:Fe=>Tt(Ce,Ee),onDragover:n[17]||(n[17]=Be(()=>{},["prevent"])),onDrop:Fe=>jt(Ce,Ee)},[n[72]||(n[72]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),n[73]||(n[73]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),e("div",yn,[N(e("input",{"onUpdate:modelValue":Fe=>ke.label=Fe,onInput:He,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên liên kết"},null,40,hn),[[oe,ke.label]]),N(e("input",{"onUpdate:modelValue":Fe=>ke.url=Fe,onInput:He,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,xn),[[oe,ke.url]])]),e("button",{type:"button",onClick:Fe=>et(Ce,Ee),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...n[71]||(n[71]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,wn)],40,bn))),128))])):(a(),i("div",_n,[...n[74]||(n[74]=[e("p",{class:"text-xs text-gray-400 italic"},"Chưa có liên kết",-1)])]))])],40,nn))),128))])])])):W("",!0),e("div",kn,[e("button",{type:"button",onClick:Ue,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Reset"),e("button",{type:"button",onClick:Se,disabled:y.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2"},[y.value?(a(),i("span",Cn)):(a(),i("span",Sn,"Save"))],8,$n)])]))])]),Le.value?(a(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n[24]||(n[24]=M=>Le.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:n[23]||(n[23]=Be(()=>{},["stop"]))},[n[79]||(n[79]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu mới")],-1)),e("div",Tn,[e("div",null,[n[76]||(n[76]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),N(e("select",{"onUpdate:modelValue":n[19]||(n[19]=M=>Ve.value=M),class:"w-full rounded-md border-gray-300 text-sm"},[n[75]||(n[75]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(a(!0),i(fe,null,be(he.value,M=>(a(),i("option",{key:M.id,value:M.id},A(M.name),9,jn))),128))],512),[[We,Ve.value]])]),e("div",En,[n[77]||(n[77]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu",-1)),N(e("input",{"onUpdate:modelValue":n[20]||(n[20]=M=>me.value=M),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn"},null,512),[[oe,me.value]])]),e("div",null,[n[78]||(n[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),N(e("input",{"onUpdate:modelValue":n[21]||(n[21]=M=>ne.value=M),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san"},null,512),[[oe,ne.value]])])]),e("div",Fn,[e("button",{type:"button",onClick:n[22]||(n[22]=M=>Le.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:S,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):W("",!0),ze.value?(a(),i("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n[30]||(n[30]=M=>ze.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:n[29]||(n[29]=Be(()=>{},["stop"]))},[e("div",An,[n[81]||(n[81]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu con",-1)),e("p",Ln,[n[80]||(n[80]=we("Thêm vào: ",-1)),e("strong",null,A((G=xe.value[Ne.value])==null?void 0:G.label),1)])]),e("div",Rn,[e("div",null,[n[83]||(n[83]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),N(e("select",{"onUpdate:modelValue":n[25]||(n[25]=M=>E.value=M),class:"w-full rounded-md border-gray-300 text-sm"},[n[82]||(n[82]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(a(!0),i(fe,null,be(he.value,M=>(a(),i("option",{key:M.id,value:M.id},A(M.name),9,Mn))),128))],512),[[We,E.value]])]),e("div",In,[n[84]||(n[84]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu con",-1)),N(e("input",{"onUpdate:modelValue":n[26]||(n[26]=M=>F.value=M),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn 5 sao"},null,512),[[oe,F.value]])]),e("div",null,[n[85]||(n[85]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),N(e("input",{"onUpdate:modelValue":n[27]||(n[27]=M=>u.value=M),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san-5-sao"},null,512),[[oe,u.value]])])]),e("div",Pn,[e("button",{type:"button",onClick:n[28]||(n[28]=M=>ze.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:L,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):W("",!0),le.value?(a(),i("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n[34]||(n[34]=M=>le.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:n[33]||(n[33]=Be(()=>{},["stop"]))},[n[87]||(n[87]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm cột footer mới")],-1)),e("div",Un,[e("div",null,[n[86]||(n[86]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tiêu đề cột",-1)),N(e("input",{"onUpdate:modelValue":n[31]||(n[31]=M=>ie.value=M),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Thông tin"},null,512),[[oe,ie.value]])])]),e("div",Dn,[e("button",{type:"button",onClick:n[32]||(n[32]=M=>le.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:tt,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):W("",!0),R.value?(a(),i("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n[40]||(n[40]=M=>R.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:n[39]||(n[39]=Be(()=>{},["stop"]))},[e("div",zn,[n[89]||(n[89]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm liên kết footer",-1)),e("p",Nn,[n[88]||(n[88]=we("Thêm vào: ",-1)),e("strong",null,A(((ge=D.value[X.value])==null?void 0:ge.title)||`Cột ${X.value+1}`),1)])]),e("div",Vn,[e("div",null,[n[91]||(n[91]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),N(e("select",{"onUpdate:modelValue":n[35]||(n[35]=M=>De.value=M),class:"w-full rounded-md border-gray-300 text-sm"},[n[90]||(n[90]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(a(!0),i(fe,null,be(he.value,M=>(a(),i("option",{key:M.id,value:M.id},A(M.name),9,On))),128))],512),[[We,De.value]])]),e("div",Bn,[n[92]||(n[92]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên liên kết",-1)),N(e("input",{"onUpdate:modelValue":n[36]||(n[36]=M=>se.value=M),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Giới thiệu"},null,512),[[oe,se.value]])]),e("div",null,[n[93]||(n[93]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),N(e("input",{"onUpdate:modelValue":n[37]||(n[37]=M=>$e.value=M),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /gioi-thieu"},null,512),[[oe,$e.value]])])]),e("div",Hn,[e("button",{type:"button",onClick:n[38]||(n[38]=M=>R.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:Je,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):W("",!0)])}}};function fs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bs={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt=Symbol.for("react.transitional.element"),Wn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),Kn=Symbol.for("react.strict_mode"),Xn=Symbol.for("react.profiler"),Jn=Symbol.for("react.consumer"),Gn=Symbol.for("react.context"),Qn=Symbol.for("react.forward_ref"),Zn=Symbol.for("react.suspense"),er=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),tr=Symbol.for("react.activity"),Gt=Symbol.iterator;function sr(t){return t===null||typeof t!="object"?null:(t=Gt&&t[Gt]||t["@@iterator"],typeof t=="function"?t:null)}var hs={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xs=Object.assign,ws={};function wt(t,s,c){this.props=t,this.context=s,this.refs=ws,this.updater=c||hs}wt.prototype.isReactComponent={};wt.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};wt.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _s(){}_s.prototype=wt.prototype;function Wt(t,s,c){this.props=t,this.context=s,this.refs=ws,this.updater=c||hs}var Yt=Wt.prototype=new _s;Yt.constructor=Wt;xs(Yt,wt.prototype);Yt.isPureReactComponent=!0;var Qt=Array.isArray;function Ot(){}var Pe={H:null,A:null,T:null,S:null},ks=Object.prototype.hasOwnProperty;function Kt(t,s,c){var g=c.ref;return{$$typeof:qt,type:t,key:s,ref:g!==void 0?g:null,props:c}}function ar(t,s){return Kt(t.type,s,t.props)}function Xt(t){return typeof t=="object"&&t!==null&&t.$$typeof===qt}function lr(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(c){return s[c]})}var Zt=/\/+/g;function Dt(t,s){return typeof t=="object"&&t!==null&&t.key!=null?lr(""+t.key):s.toString(36)}function or(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Ot,Ot):(t.status="pending",t.then(function(s){t.status==="pending"&&(t.status="fulfilled",t.value=s)},function(s){t.status==="pending"&&(t.status="rejected",t.reason=s)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function bt(t,s,c,g,v){var y=typeof t;(y==="undefined"||y==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(y){case"bigint":case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case qt:case Wn:f=!0;break;case ys:return f=t._init,bt(f(t._payload),s,c,g,v)}}if(f)return v=v(t),f=g===""?"."+Dt(t,0):g,Qt(v)?(c="",f!=null&&(c=f.replace(Zt,"$&/")+"/"),bt(v,s,c,"",function(l){return l})):v!=null&&(Xt(v)&&(v=ar(v,c+(v.key==null||t&&t.key===v.key?"":(""+v.key).replace(Zt,"$&/")+"/")+f)),s.push(v)),1;f=0;var C=g===""?".":g+":";if(Qt(t))for(var k=0;k<t.length;k++)g=t[k],y=C+Dt(g,k),f+=bt(g,s,c,y,v);else if(k=sr(t),typeof k=="function")for(t=k.call(t),k=0;!(g=t.next()).done;)g=g.value,y=C+Dt(g,k++),f+=bt(g,s,c,y,v);else if(y==="object"){if(typeof t.then=="function")return bt(or(t),s,c,g,v);throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.")}return f}function Et(t,s,c){if(t==null)return t;var g=[],v=0;return bt(t,g,"","",function(y){return s.call(c,y,v++)}),g}function nr(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(c){(t._status===0||t._status===-1)&&(t._status=1,t._result=c)},function(c){(t._status===0||t._status===-1)&&(t._status=2,t._result=c)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var es=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},rr={map:Et,forEach:function(t,s,c){Et(t,function(){s.apply(this,arguments)},c)},count:function(t){var s=0;return Et(t,function(){s++}),s},toArray:function(t){return Et(t,function(s){return s})||[]},only:function(t){if(!Xt(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Activity=tr;ye.Children=rr;ye.Component=wt;ye.Fragment=Yn;ye.Profiler=Xn;ye.PureComponent=Wt;ye.StrictMode=Kn;ye.Suspense=Zn;ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pe;ye.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Pe.H.useMemoCache(t)}};ye.cache=function(t){return function(){return t.apply(null,arguments)}};ye.cacheSignal=function(){return null};ye.cloneElement=function(t,s,c){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var g=xs({},t.props),v=t.key;if(s!=null)for(y in s.key!==void 0&&(v=""+s.key),s)!ks.call(s,y)||y==="key"||y==="__self"||y==="__source"||y==="ref"&&s.ref===void 0||(g[y]=s[y]);var y=arguments.length-2;if(y===1)g.children=c;else if(1<y){for(var f=Array(y),C=0;C<y;C++)f[C]=arguments[C+2];g.children=f}return Kt(t.type,v,g)};ye.createContext=function(t){return t={$$typeof:Gn,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:Jn,_context:t},t};ye.createElement=function(t,s,c){var g,v={},y=null;if(s!=null)for(g in s.key!==void 0&&(y=""+s.key),s)ks.call(s,g)&&g!=="key"&&g!=="__self"&&g!=="__source"&&(v[g]=s[g]);var f=arguments.length-2;if(f===1)v.children=c;else if(1<f){for(var C=Array(f),k=0;k<f;k++)C[k]=arguments[k+2];v.children=C}if(t&&t.defaultProps)for(g in f=t.defaultProps,f)v[g]===void 0&&(v[g]=f[g]);return Kt(t,y,v)};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:Qn,render:t}};ye.isValidElement=Xt;ye.lazy=function(t){return{$$typeof:ys,_payload:{_status:-1,_result:t},_init:nr}};ye.memo=function(t,s){return{$$typeof:er,type:t,compare:s===void 0?null:s}};ye.startTransition=function(t){var s=Pe.T,c={};Pe.T=c;try{var g=t(),v=Pe.S;v!==null&&v(c,g),typeof g=="object"&&g!==null&&typeof g.then=="function"&&g.then(Ot,es)}catch(y){es(y)}finally{s!==null&&c.types!==null&&(s.types=c.types),Pe.T=s}};ye.unstable_useCacheRefresh=function(){return Pe.H.useCacheRefresh()};ye.use=function(t){return Pe.H.use(t)};ye.useActionState=function(t,s,c){return Pe.H.useActionState(t,s,c)};ye.useCallback=function(t,s){return Pe.H.useCallback(t,s)};ye.useContext=function(t){return Pe.H.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t,s){return Pe.H.useDeferredValue(t,s)};ye.useEffect=function(t,s){return Pe.H.useEffect(t,s)};ye.useEffectEvent=function(t){return Pe.H.useEffectEvent(t)};ye.useId=function(){return Pe.H.useId()};ye.useImperativeHandle=function(t,s,c){return Pe.H.useImperativeHandle(t,s,c)};ye.useInsertionEffect=function(t,s){return Pe.H.useInsertionEffect(t,s)};ye.useLayoutEffect=function(t,s){return Pe.H.useLayoutEffect(t,s)};ye.useMemo=function(t,s){return Pe.H.useMemo(t,s)};ye.useOptimistic=function(t,s){return Pe.H.useOptimistic(t,s)};ye.useReducer=function(t,s,c){return Pe.H.useReducer(t,s,c)};ye.useRef=function(t){return Pe.H.useRef(t)};ye.useState=function(t){return Pe.H.useState(t)};ye.useSyncExternalStore=function(t,s,c){return Pe.H.useSyncExternalStore(t,s,c)};ye.useTransition=function(){return Pe.H.useTransition()};ye.version="19.2.0";bs.exports=ye;var yt=bs.exports;const Z=fs(yt);var $s={exports:{}},Xe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ir=yt;function Cs(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ut(){}var Ke={d:{f:ut,r:function(){throw Error(Cs(522))},D:ut,C:ut,L:ut,m:ut,X:ut,S:ut,M:ut},p:0,findDOMNode:null},dr=Symbol.for("react.portal");function ur(t,s,c){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dr,key:g==null?null:""+g,children:t,containerInfo:s,implementation:c}}var $t=ir.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Rt(t,s){if(t==="font")return"";if(typeof s=="string")return s==="use-credentials"?s:""}Xe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ke;Xe.createPortal=function(t,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)throw Error(Cs(299));return ur(t,s,null,c)};Xe.flushSync=function(t){var s=$t.T,c=Ke.p;try{if($t.T=null,Ke.p=2,t)return t()}finally{$t.T=s,Ke.p=c,Ke.d.f()}};Xe.preconnect=function(t,s){typeof t=="string"&&(s?(s=s.crossOrigin,s=typeof s=="string"?s==="use-credentials"?s:"":void 0):s=null,Ke.d.C(t,s))};Xe.prefetchDNS=function(t){typeof t=="string"&&Ke.d.D(t)};Xe.preinit=function(t,s){if(typeof t=="string"&&s&&typeof s.as=="string"){var c=s.as,g=Rt(c,s.crossOrigin),v=typeof s.integrity=="string"?s.integrity:void 0,y=typeof s.fetchPriority=="string"?s.fetchPriority:void 0;c==="style"?Ke.d.S(t,typeof s.precedence=="string"?s.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:y}):c==="script"&&Ke.d.X(t,{crossOrigin:g,integrity:v,fetchPriority:y,nonce:typeof s.nonce=="string"?s.nonce:void 0})}};Xe.preinitModule=function(t,s){if(typeof t=="string")if(typeof s=="object"&&s!==null){if(s.as==null||s.as==="script"){var c=Rt(s.as,s.crossOrigin);Ke.d.M(t,{crossOrigin:c,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0})}}else s==null&&Ke.d.M(t)};Xe.preload=function(t,s){if(typeof t=="string"&&typeof s=="object"&&s!==null&&typeof s.as=="string"){var c=s.as,g=Rt(c,s.crossOrigin);Ke.d.L(t,c,{crossOrigin:g,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0,type:typeof s.type=="string"?s.type:void 0,fetchPriority:typeof s.fetchPriority=="string"?s.fetchPriority:void 0,referrerPolicy:typeof s.referrerPolicy=="string"?s.referrerPolicy:void 0,imageSrcSet:typeof s.imageSrcSet=="string"?s.imageSrcSet:void 0,imageSizes:typeof s.imageSizes=="string"?s.imageSizes:void 0,media:typeof s.media=="string"?s.media:void 0})}};Xe.preloadModule=function(t,s){if(typeof t=="string")if(s){var c=Rt(s.as,s.crossOrigin);Ke.d.m(t,{as:typeof s.as=="string"&&s.as!=="script"?s.as:void 0,crossOrigin:c,integrity:typeof s.integrity=="string"?s.integrity:void 0})}else Ke.d.m(t)};Xe.requestFormReset=function(t){Ke.d.r(t)};Xe.unstable_batchedUpdates=function(t,s){return t(s)};Xe.useFormState=function(t,s,c){return $t.H.useFormState(t,s,c)};Xe.useFormStatus=function(){return $t.H.useHostTransitionStatus()};Xe.version="19.2.0";function Ss(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ss)}catch(t){console.error(t)}}Ss(),$s.exports=Xe;var cr=$s.exports;const pr=fs(cr);var mr=t=>{switch(t){case"success":return fr;case"info":return yr;case"warning":return br;case"error":return hr;default:return null}},gr=Array(12).fill(0),vr=({visible:t,className:s})=>Z.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},Z.createElement("div",{className:"sonner-spinner"},gr.map((c,g)=>Z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${g}`})))),fr=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),br=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),yr=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),hr=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),xr=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),wr=()=>{let[t,s]=Z.useState(document.hidden);return Z.useEffect(()=>{let c=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",c),()=>window.removeEventListener("visibilitychange",c)},[]),t},Bt=1,_r=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;let{message:c,...g}=t,v=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:Bt++,y=this.toasts.find(C=>C.id===v),f=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(v)&&this.dismissedToasts.delete(v),y?this.toasts=this.toasts.map(C=>C.id===v?(this.publish({...C,...t,id:v,title:c}),{...C,...t,id:v,dismissible:f,title:c}):C):this.addToast({title:c,...g,dismissible:f,id:v}),v},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(s=>{this.subscribers.forEach(c=>c({id:s.id,dismiss:!0}))}),this.subscribers.forEach(s=>s({id:t,dismiss:!0})),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let c;s.loading!==void 0&&(c=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));let g=t instanceof Promise?t:t(),v=c!==void 0,y,f=g.then(async k=>{if(y=["resolve",k],Z.isValidElement(k))v=!1,this.create({id:c,type:"default",message:k});else if($r(k)&&!k.ok){v=!1;let l=typeof s.error=="function"?await s.error(`HTTP error! status: ${k.status}`):s.error,w=typeof s.description=="function"?await s.description(`HTTP error! status: ${k.status}`):s.description;this.create({id:c,type:"error",message:l,description:w})}else if(s.success!==void 0){v=!1;let l=typeof s.success=="function"?await s.success(k):s.success,w=typeof s.description=="function"?await s.description(k):s.description;this.create({id:c,type:"success",message:l,description:w})}}).catch(async k=>{if(y=["reject",k],s.error!==void 0){v=!1;let l=typeof s.error=="function"?await s.error(k):s.error,w=typeof s.description=="function"?await s.description(k):s.description;this.create({id:c,type:"error",message:l,description:w})}}).finally(()=>{var k;v&&(this.dismiss(c),c=void 0),(k=s.finally)==null||k.call(s)}),C=()=>new Promise((k,l)=>f.then(()=>y[0]==="reject"?l(y[1]):k(y[1])).catch(l));return typeof c!="string"&&typeof c!="number"?{unwrap:C}:Object.assign(c,{unwrap:C})},this.custom=(t,s)=>{let c=(s==null?void 0:s.id)||Bt++;return this.create({jsx:t(c),id:c,...s}),c},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ge=new _r,kr=(t,s)=>{let c=(s==null?void 0:s.id)||Bt++;return Ge.addToast({title:t,...s,id:c}),c},$r=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Cr=kr,Sr=()=>Ge.toasts,Tr=()=>Ge.getActiveToasts(),Qe=Object.assign(Cr,{success:Ge.success,info:Ge.info,warning:Ge.warning,error:Ge.error,custom:Ge.custom,message:Ge.message,promise:Ge.promise,dismiss:Ge.dismiss,loading:Ge.loading},{getHistory:Sr,getToasts:Tr});function jr(t,{insertAt:s}={}){if(typeof document>"u")return;let c=document.head||document.getElementsByTagName("head")[0],g=document.createElement("style");g.type="text/css",s==="top"&&c.firstChild?c.insertBefore(g,c.firstChild):c.appendChild(g),g.styleSheet?g.styleSheet.cssText=t:g.appendChild(document.createTextNode(t))}jr(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ft(t){return t.label!==void 0}var Er=3,Fr="32px",Ar="16px",ts=4e3,Lr=356,Rr=14,Mr=20,Ir=200;function st(...t){return t.filter(Boolean).join(" ")}function Pr(t){let[s,c]=t.split("-"),g=[];return s&&g.push(s),c&&g.push(c),g}var Ur=t=>{var s,c,g,v,y,f,C,k,l,w,P;let{invert:Q,toast:d,unstyled:ee,interacting:T,setHeights:q,visibleToasts:V,heights:h,index:x,toasts:O,expanded:I,removeToast:K,defaultRichColors:ae,closeButton:ve,style:pe,cancelButtonStyle:Se,actionButtonStyle:Ue,className:Ae="",descriptionClassName:he="",duration:xe,position:Le,gap:ze,loadingIcon:Ne,expandByDefault:Ve,classNames:me,icons:ne,closeButtonAriaLabel:E="Close toast",pauseWhenPageIsHidden:F}=t,[u,_]=Z.useState(null),[o,b]=Z.useState(null),[j,S]=Z.useState(!1),[Y,L]=Z.useState(!1),[p,te]=Z.useState(!1),[ce,ue]=Z.useState(!1),[re,Te]=Z.useState(!1),[U,B]=Z.useState(0),[r,D]=Z.useState(0),le=Z.useRef(d.duration||xe||ts),R=Z.useRef(null),X=Z.useRef(null),ie=x===0,De=x+1<=V,se=d.type,$e=d.dismissible!==!1,qe=d.className||"",tt=d.descriptionClassName||"",Oe=Z.useMemo(()=>h.findIndex(G=>G.toastId===d.id)||0,[h,d.id]),Je=Z.useMemo(()=>{var G;return(G=d.closeButton)!=null?G:ve},[d.closeButton,ve]),at=Z.useMemo(()=>d.duration||xe||ts,[d.duration,xe]),He=Z.useRef(0),et=Z.useRef(0),lt=Z.useRef(0),rt=Z.useRef(null),[Mt,ft]=Le.split("-"),Tt=Z.useMemo(()=>h.reduce((G,ge,M)=>M>=Oe?G:G+ge.height,0),[h,Oe]),jt=wr(),It=d.invert||Q,H=se==="loading";et.current=Z.useMemo(()=>Oe*ze+Tt,[Oe,Tt]),Z.useEffect(()=>{le.current=at},[at]),Z.useEffect(()=>{S(!0)},[]),Z.useEffect(()=>{let G=X.current;if(G){let ge=G.getBoundingClientRect().height;return D(ge),q(M=>[{toastId:d.id,height:ge,position:d.position},...M]),()=>q(M=>M.filter(Ce=>Ce.toastId!==d.id))}},[q,d.id]),Z.useLayoutEffect(()=>{if(!j)return;let G=X.current,ge=G.style.height;G.style.height="auto";let M=G.getBoundingClientRect().height;G.style.height=ge,D(M),q(Ce=>Ce.find(ke=>ke.toastId===d.id)?Ce.map(ke=>ke.toastId===d.id?{...ke,height:M}:ke):[{toastId:d.id,height:M,position:d.position},...Ce])},[j,d.title,d.description,q,d.id]);let n=Z.useCallback(()=>{L(!0),B(et.current),q(G=>G.filter(ge=>ge.toastId!==d.id)),setTimeout(()=>{K(d)},Ir)},[d,K,q,et]);Z.useEffect(()=>{if(d.promise&&se==="loading"||d.duration===1/0||d.type==="loading")return;let G;return I||T||F&&jt?(()=>{if(lt.current<He.current){let ge=new Date().getTime()-He.current;le.current=le.current-ge}lt.current=new Date().getTime()})():le.current!==1/0&&(He.current=new Date().getTime(),G=setTimeout(()=>{var ge;(ge=d.onAutoClose)==null||ge.call(d,d),n()},le.current)),()=>clearTimeout(G)},[I,T,d,se,F,jt,n]),Z.useEffect(()=>{d.delete&&n()},[n,d.delete]);function _e(){var G,ge,M;return ne!=null&&ne.loading?Z.createElement("div",{className:st(me==null?void 0:me.loader,(G=d==null?void 0:d.classNames)==null?void 0:G.loader,"sonner-loader"),"data-visible":se==="loading"},ne.loading):Ne?Z.createElement("div",{className:st(me==null?void 0:me.loader,(ge=d==null?void 0:d.classNames)==null?void 0:ge.loader,"sonner-loader"),"data-visible":se==="loading"},Ne):Z.createElement(vr,{className:st(me==null?void 0:me.loader,(M=d==null?void 0:d.classNames)==null?void 0:M.loader),visible:se==="loading"})}return Z.createElement("li",{tabIndex:0,ref:X,className:st(Ae,qe,me==null?void 0:me.toast,(s=d==null?void 0:d.classNames)==null?void 0:s.toast,me==null?void 0:me.default,me==null?void 0:me[se],(c=d==null?void 0:d.classNames)==null?void 0:c[se]),"data-sonner-toast":"","data-rich-colors":(g=d.richColors)!=null?g:ae,"data-styled":!(d.jsx||d.unstyled||ee),"data-mounted":j,"data-promise":!!d.promise,"data-swiped":re,"data-removed":Y,"data-visible":De,"data-y-position":Mt,"data-x-position":ft,"data-index":x,"data-front":ie,"data-swiping":p,"data-dismissible":$e,"data-type":se,"data-invert":It,"data-swipe-out":ce,"data-swipe-direction":o,"data-expanded":!!(I||Ve&&j),style:{"--index":x,"--toasts-before":x,"--z-index":O.length-x,"--offset":`${Y?U:et.current}px`,"--initial-height":Ve?"auto":`${r}px`,...pe,...d.style},onDragEnd:()=>{te(!1),_(null),rt.current=null},onPointerDown:G=>{H||!$e||(R.current=new Date,B(et.current),G.target.setPointerCapture(G.pointerId),G.target.tagName!=="BUTTON"&&(te(!0),rt.current={x:G.clientX,y:G.clientY}))},onPointerUp:()=>{var G,ge,M,Ce;if(ce||!$e)return;rt.current=null;let ke=Number(((G=X.current)==null?void 0:G.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ee=Number(((ge=X.current)==null?void 0:ge.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Fe=new Date().getTime()-((M=R.current)==null?void 0:M.getTime()),Ye=u==="x"?ke:Ee,dt=Math.abs(Ye)/Fe;if(Math.abs(Ye)>=Mr||dt>.11){B(et.current),(Ce=d.onDismiss)==null||Ce.call(d,d),b(u==="x"?ke>0?"right":"left":Ee>0?"down":"up"),n(),ue(!0),Te(!1);return}te(!1),_(null)},onPointerMove:G=>{var ge,M,Ce,ke;if(!rt.current||!$e||((ge=window.getSelection())==null?void 0:ge.toString().length)>0)return;let Ee=G.clientY-rt.current.y,Fe=G.clientX-rt.current.x,Ye=(M=t.swipeDirections)!=null?M:Pr(Le);!u&&(Math.abs(Fe)>1||Math.abs(Ee)>1)&&_(Math.abs(Fe)>Math.abs(Ee)?"x":"y");let dt={x:0,y:0};u==="y"?(Ye.includes("top")||Ye.includes("bottom"))&&(Ye.includes("top")&&Ee<0||Ye.includes("bottom")&&Ee>0)&&(dt.y=Ee):u==="x"&&(Ye.includes("left")||Ye.includes("right"))&&(Ye.includes("left")&&Fe<0||Ye.includes("right")&&Fe>0)&&(dt.x=Fe),(Math.abs(dt.x)>0||Math.abs(dt.y)>0)&&Te(!0),(Ce=X.current)==null||Ce.style.setProperty("--swipe-amount-x",`${dt.x}px`),(ke=X.current)==null||ke.style.setProperty("--swipe-amount-y",`${dt.y}px`)}},Je&&!d.jsx?Z.createElement("button",{"aria-label":E,"data-disabled":H,"data-close-button":!0,onClick:H||!$e?()=>{}:()=>{var G;n(),(G=d.onDismiss)==null||G.call(d,d)},className:st(me==null?void 0:me.closeButton,(v=d==null?void 0:d.classNames)==null?void 0:v.closeButton)},(y=ne==null?void 0:ne.close)!=null?y:xr):null,d.jsx||yt.isValidElement(d.title)?d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title:Z.createElement(Z.Fragment,null,se||d.icon||d.promise?Z.createElement("div",{"data-icon":"",className:st(me==null?void 0:me.icon,(f=d==null?void 0:d.classNames)==null?void 0:f.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||_e():null,d.type!=="loading"?d.icon||(ne==null?void 0:ne[se])||mr(se):null):null,Z.createElement("div",{"data-content":"",className:st(me==null?void 0:me.content,(C=d==null?void 0:d.classNames)==null?void 0:C.content)},Z.createElement("div",{"data-title":"",className:st(me==null?void 0:me.title,(k=d==null?void 0:d.classNames)==null?void 0:k.title)},typeof d.title=="function"?d.title():d.title),d.description?Z.createElement("div",{"data-description":"",className:st(he,tt,me==null?void 0:me.description,(l=d==null?void 0:d.classNames)==null?void 0:l.description)},typeof d.description=="function"?d.description():d.description):null),yt.isValidElement(d.cancel)?d.cancel:d.cancel&&Ft(d.cancel)?Z.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||Se,onClick:G=>{var ge,M;Ft(d.cancel)&&$e&&((M=(ge=d.cancel).onClick)==null||M.call(ge,G),n())},className:st(me==null?void 0:me.cancelButton,(w=d==null?void 0:d.classNames)==null?void 0:w.cancelButton)},d.cancel.label):null,yt.isValidElement(d.action)?d.action:d.action&&Ft(d.action)?Z.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||Ue,onClick:G=>{var ge,M;Ft(d.action)&&((M=(ge=d.action).onClick)==null||M.call(ge,G),!G.defaultPrevented&&n())},className:st(me==null?void 0:me.actionButton,(P=d==null?void 0:d.classNames)==null?void 0:P.actionButton)},d.action.label):null))};function ss(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Dr(t,s){let c={};return[t,s].forEach((g,v)=>{let y=v===1,f=y?"--mobile-offset":"--offset",C=y?Ar:Fr;function k(l){["top","right","bottom","left"].forEach(w=>{c[`${f}-${w}`]=typeof l=="number"?`${l}px`:l})}typeof g=="number"||typeof g=="string"?k(g):typeof g=="object"?["top","right","bottom","left"].forEach(l=>{g[l]===void 0?c[`${f}-${l}`]=C:c[`${f}-${l}`]=typeof g[l]=="number"?`${g[l]}px`:g[l]}):k(C)}),c}yt.forwardRef(function(t,s){let{invert:c,position:g="bottom-right",hotkey:v=["altKey","KeyT"],expand:y,closeButton:f,className:C,offset:k,mobileOffset:l,theme:w="light",richColors:P,duration:Q,style:d,visibleToasts:ee=Er,toastOptions:T,dir:q=ss(),gap:V=Rr,loadingIcon:h,icons:x,containerAriaLabel:O="Notifications",pauseWhenPageIsHidden:I}=t,[K,ae]=Z.useState([]),ve=Z.useMemo(()=>Array.from(new Set([g].concat(K.filter(F=>F.position).map(F=>F.position)))),[K,g]),[pe,Se]=Z.useState([]),[Ue,Ae]=Z.useState(!1),[he,xe]=Z.useState(!1),[Le,ze]=Z.useState(w!=="system"?w:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ne=Z.useRef(null),Ve=v.join("+").replace(/Key/g,"").replace(/Digit/g,""),me=Z.useRef(null),ne=Z.useRef(!1),E=Z.useCallback(F=>{ae(u=>{var _;return(_=u.find(o=>o.id===F.id))!=null&&_.delete||Ge.dismiss(F.id),u.filter(({id:o})=>o!==F.id)})},[]);return Z.useEffect(()=>Ge.subscribe(F=>{if(F.dismiss){ae(u=>u.map(_=>_.id===F.id?{..._,delete:!0}:_));return}setTimeout(()=>{pr.flushSync(()=>{ae(u=>{let _=u.findIndex(o=>o.id===F.id);return _!==-1?[...u.slice(0,_),{...u[_],...F},...u.slice(_+1)]:[F,...u]})})})}),[]),Z.useEffect(()=>{if(w!=="system"){ze(w);return}if(w==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ze("dark"):ze("light")),typeof window>"u")return;let F=window.matchMedia("(prefers-color-scheme: dark)");try{F.addEventListener("change",({matches:u})=>{ze(u?"dark":"light")})}catch{F.addListener(({matches:_})=>{try{ze(_?"dark":"light")}catch(o){console.error(o)}})}},[w]),Z.useEffect(()=>{K.length<=1&&Ae(!1)},[K]),Z.useEffect(()=>{let F=u=>{var _,o;v.every(b=>u[b]||u.code===b)&&(Ae(!0),(_=Ne.current)==null||_.focus()),u.code==="Escape"&&(document.activeElement===Ne.current||(o=Ne.current)!=null&&o.contains(document.activeElement))&&Ae(!1)};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[v]),Z.useEffect(()=>{if(Ne.current)return()=>{me.current&&(me.current.focus({preventScroll:!0}),me.current=null,ne.current=!1)}},[Ne.current]),Z.createElement("section",{ref:s,"aria-label":`${O} ${Ve}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ve.map((F,u)=>{var _;let[o,b]=F.split("-");return K.length?Z.createElement("ol",{key:F,dir:q==="auto"?ss():q,tabIndex:-1,ref:Ne,className:C,"data-sonner-toaster":!0,"data-theme":Le,"data-y-position":o,"data-lifted":Ue&&K.length>1&&!y,"data-x-position":b,style:{"--front-toast-height":`${((_=pe[0])==null?void 0:_.height)||0}px`,"--width":`${Lr}px`,"--gap":`${V}px`,...d,...Dr(k,l)},onBlur:j=>{ne.current&&!j.currentTarget.contains(j.relatedTarget)&&(ne.current=!1,me.current&&(me.current.focus({preventScroll:!0}),me.current=null))},onFocus:j=>{j.target instanceof HTMLElement&&j.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,me.current=j.relatedTarget)},onMouseEnter:()=>Ae(!0),onMouseMove:()=>Ae(!0),onMouseLeave:()=>{he||Ae(!1)},onDragEnd:()=>Ae(!1),onPointerDown:j=>{j.target instanceof HTMLElement&&j.target.dataset.dismissible==="false"||xe(!0)},onPointerUp:()=>xe(!1)},K.filter(j=>!j.position&&u===0||j.position===F).map((j,S)=>{var Y,L;return Z.createElement(Ur,{key:j.id,icons:x,index:S,toast:j,defaultRichColors:P,duration:(Y=T==null?void 0:T.duration)!=null?Y:Q,className:T==null?void 0:T.className,descriptionClassName:T==null?void 0:T.descriptionClassName,invert:c,visibleToasts:ee,closeButton:(L=T==null?void 0:T.closeButton)!=null?L:f,interacting:he,position:F,style:T==null?void 0:T.style,unstyled:T==null?void 0:T.unstyled,classNames:T==null?void 0:T.classNames,cancelButtonStyle:T==null?void 0:T.cancelButtonStyle,actionButtonStyle:T==null?void 0:T.actionButtonStyle,removeToast:E,toasts:K.filter(p=>p.position==j.position),heights:pe.filter(p=>p.position==j.position),setHeights:Se,expandByDefault:y,gap:V,loadingIcon:h,expanded:Ue,pauseWhenPageIsHidden:I,swipeDirections:t.swipeDirections})})):null}))});const zr={class:"min-h-screen bg-gray-100"},Nr={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Vr={class:"px-4 py-6 sm:px-0"},Or={class:"bg-white shadow rounded-lg p-6 mb-6"},Br={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Hr={class:"flex flex-col items-center gap-2"},qr={class:"inline-flex items-center gap-2 text-blue-600"},Wr={class:"text-2xl font-bold"},Yr={class:"flex flex-col items-center gap-2"},Kr={class:"inline-flex items-center gap-2 text-green-600"},Xr={class:"text-2xl font-bold"},Jr={class:"flex flex-col items-center gap-2"},Gr={class:"inline-flex items-center gap-2 text-red-600"},Qr={class:"text-2xl font-bold"},Zr={class:"flex flex-col items-center gap-2"},ei={class:"inline-flex items-center gap-2 text-purple-600"},ti={class:"text-2xl font-bold"},si={class:"bg-white shadow rounded-lg p-6"},ai={class:"flex justify-between items-center mb-4"},li={class:"space-y-4"},oi={class:"flex justify-between items-start mb-2"},ni={class:"font-medium text-gray-900"},ri={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},ii={class:"font-medium"},di={class:"font-medium"},ui={class:"font-medium"},ci={class:"font-medium"},pi={key:0,class:"mt-4"},mi={class:"grid grid-cols-7 gap-1 text-xs"},gi={class:"text-gray-500"},vi={class:"font-medium"},fi={__name:"Monitoring",setup(t){const s=m({total_websites:0,online_websites:0,offline_websites:0}),c=m([]),g=m("7days"),v=Me(()=>c.value.filter(k=>k.ssl_enabled).length),y=async()=>{try{const k=await z.get("/api/monitoring/uptime");s.value=k.data}catch{Qe.error("Failed to fetch uptime statistics")}},f=async()=>{try{const w=(await z.get("/api/websites")).data.map(async P=>{try{const Q=await z.get(`/api/monitoring/stats/${P.id}?period=${g.value}`);return{...P,...Q.data.summary}}catch{return{...P,total_visits:0,total_unique_visitors:0,total_bandwidth:"0 B",average_response_time:0,uptime_percentage:0,daily_stats:[]}}});c.value=await Promise.all(w)}catch{Qe.error("Failed to fetch website statistics")}},C=k=>new Date(k).toLocaleDateString("en-US",{month:"short",day:"numeric"});return Ze(()=>{y(),f()}),(k,l)=>(a(),i("div",zr,[e("div",Nr,[e("div",Vr,[l[13]||(l[13]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-6"},"Monitoring",-1)),e("div",Or,[l[5]||(l[5]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"System Overview",-1)),e("div",Br,[e("div",Hr,[e("div",qr,[J($(vt),{class:"size-5"}),e("span",Wr,A(s.value.total_websites),1)]),l[1]||(l[1]=e("p",{class:"text-sm text-gray-500"},"Total Websites",-1))]),e("div",Yr,[e("div",Kr,[J($(Ct),{class:"size-5"}),e("span",Xr,A(s.value.online_websites),1)]),l[2]||(l[2]=e("p",{class:"text-sm text-gray-500"},"Online",-1))]),e("div",Jr,[e("div",Gr,[J($(St),{class:"size-5"}),e("span",Qr,A(s.value.offline_websites),1)]),l[3]||(l[3]=e("p",{class:"text-sm text-gray-500"},"Offline",-1))]),e("div",Zr,[e("div",ei,[J($(mt),{class:"size-5"}),e("span",ti,A(v.value),1)]),l[4]||(l[4]=e("p",{class:"text-sm text-gray-500"},"SSL Enabled",-1))])])]),e("div",si,[e("div",ai,[l[7]||(l[7]=e("h2",{class:"text-lg font-medium text-gray-900"},"Website Statistics",-1)),N(e("select",{"onUpdate:modelValue":l[0]||(l[0]=w=>g.value=w),onChange:f,class:"border-gray-300 rounded-md shadow-sm"},[...l[6]||(l[6]=[e("option",{value:"24hours"},"Last 24 Hours",-1),e("option",{value:"7days"},"Last 7 Days",-1),e("option",{value:"30days"},"Last 30 Days",-1),e("option",{value:"90days"},"Last 90 Days",-1)])],544),[[We,g.value]])]),e("div",li,[(a(!0),i(fe,null,be(c.value,w=>(a(),i("div",{key:w.id,class:"border rounded-lg p-4"},[e("div",oi,[e("h3",ni,A(w.domain),1),e("span",{class:Ie(["inline-flex items-center gap-1",w.current_is_online?"text-green-600":"text-red-600"])},[w.current_is_online?(a(),de($(Ct),{key:0,class:"size-4"})):(a(),de($(St),{key:1,class:"size-4"})),we(" "+A(w.current_is_online?"Online":"Offline"),1)],2)]),e("div",ri,[e("div",null,[l[8]||(l[8]=e("p",{class:"text-gray-500"},"Visits",-1)),e("p",ii,A(w.total_visits),1)]),e("div",null,[l[9]||(l[9]=e("p",{class:"text-gray-500"},"Unique Visitors",-1)),e("p",di,A(w.total_unique_visitors),1)]),e("div",null,[l[10]||(l[10]=e("p",{class:"text-gray-500"},"Bandwidth",-1)),e("p",ui,A(w.total_bandwidth),1)]),e("div",null,[l[11]||(l[11]=e("p",{class:"text-gray-500"},"Avg Response Time",-1)),e("p",ci,A(w.average_response_time)+"ms",1)])]),w.daily_stats&&w.daily_stats.length>0?(a(),i("div",pi,[l[12]||(l[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Daily Stats",-1)),e("div",mi,[(a(!0),i(fe,null,be(w.daily_stats,P=>(a(),i("div",{key:P.date,class:"text-center"},[e("div",gi,A(C(P.date)),1),e("div",vi,A(P.visits),1)]))),128))])])):W("",!0)]))),128))])])])])]))}},bi={class:"p-8 max-w-7xl mx-auto"},yi={class:"flex flex-wrap gap-2 mb-4"},hi={class:"flex flex-wrap justify-between items-start gap-4 mb-6"},xi={class:"flex justify-between items-center gap-4 p-4 bg-white rounded-lg border border-slate-200 mb-6"},wi={class:"flex gap-2 items-center"},_i={class:"relative w-72"},ki={class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"},$i={class:"bg-white rounded-lg border border-slate-200"},Ci={key:0,class:"px-6 py-4 text-sm text-gray-500"},Si={key:1,class:"flex flex-col"},Ti={class:"list-none"},ji={class:"grid grid-cols-12 gap-4 items-center px-6 py-4 cursor-pointer hover:bg-slate-50"},Ei={class:"col-span-6 flex items-center gap-3"},Fi={class:"flex flex-col"},Ai={class:"text-slate-800 text-sm font-medium"},Li={class:"text-slate-500 text-xs"},Ri={class:"col-span-3 text-sm text-slate-600"},Mi={class:"col-span-1 text-sm text-slate-600"},Ii={class:"col-span-2 flex justify-end gap-2 text-slate-500"},Pi=["onClick"],Ui=["onClick"],Di=["onClick"],zi={class:"pl-10 bg-slate-50/50"},Ni={class:"col-span-6 flex items-center gap-2 text-sm text-slate-700"},Vi={class:"col-span-3 text-sm text-slate-600"},Oi={class:"col-span-1 text-sm text-slate-600"},Bi={class:"col-span-2 flex justify-end gap-2 text-slate-500"},Hi=["onClick"],qi=["onClick"],Wi=["onClick"],Yi={__name:"FoldersManagement",setup(t){const c=pt().params.websiteId,g=m([]),v=m(null),y=m(!1),f=m(""),C=m(""),k=m(""),l=async()=>{y.value=!0,f.value="";try{const[V,h]=await Promise.all([z.get(`/api/websites/${c}`),z.get(`/api/websites/${c}/folders`)]);v.value=V.data;const O=(h.data||[]).map(I=>({...I,id:Number(I.id),parent_id:I.parent_id==null?null:Number(I.parent_id)}));g.value=O}finally{y.value=!1}},w=V=>{const h=V.id,x=Q(V.id),O=x?`/preview/folder/${h}/${x}`:`/preview/folder/${h}`,I=localStorage.getItem("adminToken")||"";if(!I){window.open(O,"_blank");return}const K=`${O}?token=${encodeURIComponent(I)}`;window.open(K,"_blank")},P=V=>{if(!v.value)return;const h=Q(V.id);if(!h)return;const x=v.value.domain.split("."),O=x.length>2?x.slice(-2).join("."):v.value.domain,K=`${v.value.ssl_enabled?"https://":"http://"}${O}/${h}`;window.open(K,"_blank")},Q=V=>{const h=new Map((g.value||[]).map(I=>[String(I.id),I]));let x=h.get(String(V));const O=[];for(;x&&(x.slug&&O.unshift(x.slug),!(!x.parent_id||(x=h.get(String(x.parent_id)),x&&String(x.id)===String(V)))););return O.join("/")},d=Me(()=>{const V=[...g.value||[]],h=new Map(V.map(pe=>[String(pe.id),pe])),x=pe=>pe.sort((Se,Ue)=>(Se.name||"").localeCompare(Ue.name||"")),O=pe=>V.filter(Se=>String(Se.parent_id)===String(pe)),I=pe=>!pe.parent_id||!h.has(String(pe.parent_id))||String(pe.parent_id)===String(pe.id),K=x(V.filter(I)),ae=[],ve=(pe,Se)=>{ae.push({...pe,depth:Se}),x(O(pe.id)).forEach(Ue=>ve(Ue,Se+1))};return K.forEach(pe=>ve(pe,0)),ae}),ee=Me(()=>{const V=(k.value||"").trim().toLowerCase(),h=d.value,x=new Set(h.filter(K=>K.depth===0).map(K=>K.id));if(!V)return h.filter(K=>x.has(K.id));const O=h.filter(K=>(K.name||"").toLowerCase().includes(V)||(K.slug||"").toLowerCase().includes(V)),I=new Set(O.map(K=>{let ae=K;for(;ae&&ae.depth>0;){const ve=h.find(pe=>String(pe.id)===String(ae.parent_id));if(!ve)break;ae=ve}return ae?ae.id:K.id}));return h.filter(K=>K.depth===0&&I.has(K.id))}),T=V=>{const h=(k.value||"").trim().toLowerCase(),O=d.value.filter(I=>String(I.parent_id)===String(V));return h?O.filter(I=>(I.name||"").toLowerCase().includes(h)||(I.slug||"").toLowerCase().includes(h)):O},q=async V=>{var h,x;f.value="",C.value="";try{await z.delete(`/api/websites/${c}/folders/${V.id}`),g.value=(g.value||[]).filter(O=>O.id!==V.id),f.value="Đã xóa thư mục",C.value="success"}catch(O){f.value=((x=(h=O==null?void 0:O.response)==null?void 0:h.data)==null?void 0:x.error)||"Không thể xóa thư mục",C.value="error"}};return Ze(l),(V,h)=>{const x=nt("router-link");return a(),i("div",bi,[e("div",yi,[J(x,{to:"/",class:"text-slate-500 text-sm font-medium hover:text-primary"},{default:je(()=>[...h[1]||(h[1]=[we("Bảng điều khiển",-1)])]),_:1}),h[2]||(h[2]=e("span",{class:"text-slate-500 text-sm font-medium"},"/",-1)),h[3]||(h[3]=e("span",{class:"text-slate-800 text-sm font-medium"},"Danh mục",-1))]),e("div",hi,[h[5]||(h[5]=e("div",{class:"flex flex-col gap-2"},[e("h1",{class:"text-slate-900 text-3xl font-bold leading-tight tracking-tight"},"Quản lý Danh mục"),e("p",{class:"text-slate-500 text-base"},"Thêm, sửa đổi và tổ chức các danh mục.")],-1)),J(x,{to:`/websites/${$(c)}/folders/new`,class:"flex items-center justify-center rounded-lg h-10 bg-primary text-white gap-2 text-sm font-bold px-4 hover:bg-primary/90"},{default:je(()=>[...h[4]||(h[4]=[e("span",null,"Tạo thư mục",-1)])]),_:1},8,["to"])]),e("div",xi,[e("div",wi,[e("div",_i,[e("span",ki,[J($(Is),{class:"size-4"})]),N(e("input",{"onUpdate:modelValue":h[0]||(h[0]=O=>k.value=O),class:"w-full pl-10 pr-4 py-2 text-sm border border-slate-300 rounded-lg bg-background-light focus:ring-primary focus:border-primary",placeholder:"Tìm danh mục...",type:"text"},null,512),[[oe,k.value]])]),e("button",{type:"button",onClick:l,class:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg"},[J($(Ps),{class:"size-5"})])]),J(x,{to:`/websites/${$(c)}/pages`,class:"text-sm text-primary"},{default:je(()=>[...h[6]||(h[6]=[we("Quay lại Pages",-1)])]),_:1},8,["to"])]),e("div",$i,[h[7]||(h[7]=xt('<div class="grid grid-cols-12 gap-4 px-6 py-3 border-b border-slate-200"><div class="col-span-6 text-xs font-semibold text-slate-500 uppercase">Tên danh mục</div><div class="col-span-3 text-xs font-semibold text-slate-500 uppercase">Slug</div><div class="col-span-1 text-xs font-semibold text-slate-500 uppercase">Số page</div><div class="col-span-2 text-xs font-semibold text-slate-500 uppercase text-right">Hành động</div></div>',1)),y.value?(a(),i("div",Ci,"Đang tải...")):(a(),i("div",Si,[(a(!0),i(fe,null,be(ee.value,O=>(a(),i("details",{key:O.id,class:"group border-b border-slate-200",open:""},[e("summary",Ti,[e("div",ji,[e("div",Ei,[J($(Us),{class:"size-4 text-slate-500 group-open:rotate-90 transition-transform"}),e("div",Fi,[e("p",Ai,A(O.name),1),e("p",Li,A(T(O.id).length)+" danh mục con",1)])]),e("div",Ri,"/"+A(Q(O.id)),1),e("div",Mi,A(O.pages_count??0),1),e("div",Ii,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:Be(I=>w(O),["stop"])},[J($(Vt),{class:"size-4"})],8,Pi),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:Be(I=>P(O),["stop"])},[J($(vt),{class:"size-4"})],8,Ui),J(x,{to:`/websites/${$(c)}/folders/${O.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:je(()=>[J($(Jt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:Be(I=>q(O),["stop"])},[J($(ct),{class:"size-4"})],8,Di)])])]),e("div",zi,[(a(!0),i(fe,null,be(T(O.id),I=>(a(),i("div",{key:I.id,class:"grid grid-cols-12 gap-4 items-center px-6 py-3 border-t border-slate-200"},[e("div",Ni,[J($(Ds),{class:"size-5 text-slate-400 -ml-1"}),e("span",null,A(I.name),1)]),e("div",Vi,"/"+A(Q(I.id)),1),e("div",Oi,A(I.pages_count??0),1),e("div",Bi,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:K=>w(I)},[J($(Vt),{class:"size-4"})],8,Hi),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:K=>P(I)},[J($(vt),{class:"size-4"})],8,qi),J(x,{to:`/websites/${$(c)}/folders/${I.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:je(()=>[J($(Jt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:K=>q(I)},[J($(ct),{class:"size-4"})],8,Wi)])]))),128))])]))),128))])),f.value?(a(),i("div",{key:2,class:Ie(["px-6 py-3 text-sm",C.value==="error"?"text-red-600":"text-green-600"])},A(f.value),3)):W("",!0)])])}}},Ki={class:"p-6"},Xi={class:"max-w-xl mx-auto"},Ji={class:"flex items-center justify-between mb-4"},Gi={class:"text-xl font-semibold"},Qi=["value"],Zi={class:"flex justify-end gap-2"},ed=["disabled"],as={__name:"FolderEdit",setup(t){const s=pt(),c=ht(),g=s.params.websiteId,v=s.params.folderId,y=m(s.name==="FolderCreate"),f=m([]),C=m(""),k=m(""),l=m(null),w=m(!1),P=m(!1),Q=m(""),d=m(""),ee=async()=>{const K=((await z.get(`/api/websites/${g}/folders`)).data||[]).map(ae=>({...ae,id:Number(ae.id),parent_id:ae.parent_id==null?null:Number(ae.parent_id)}));f.value=K},T=O=>(O||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),q=()=>{w.value||(k.value=T(C.value))},V=Me(()=>{const O=[...f.value||[]],I=new Map(O.map(he=>[String(he.id),he])),K=he=>he.sort((xe,Le)=>(xe.name||"").localeCompare(Le.name||"")),ae=he=>O.filter(xe=>String(xe.parent_id)===String(he)),ve=he=>!he.parent_id||!I.has(String(he.parent_id))||String(he.parent_id)===String(he.id),pe=K(O.filter(ve)),Se=[],Ue=(he,xe)=>{Se.push({...he,depth:xe}),K(ae(he.id)).forEach(Le=>Ue(Le,xe+1))};return pe.forEach(he=>Ue(he,0)),Se.filter(he=>String(he.id)!==String(v))}),h=()=>{if(!v||y.value)return;const O=(f.value||[]).find(I=>I.id===Number(v));O&&(C.value=O.name||"",k.value=O.slug||"",l.value=O.parent_id==null?null:Number(O.parent_id))},x=async()=>{var O,I,K,ae,ve;P.value=!0,Q.value="";try{const pe={name:C.value,slug:k.value,parent_id:l.value==null?null:Number(l.value)};let Se;y.value?Se=await z.post(`/api/websites/${g}/folders`,pe):Se=await z.put(`/api/websites/${g}/folders/${v}`,pe),Q.value="Đã lưu thư mục",d.value="success",y.value?c.push(`/websites/${g}/folders`):(l.value=((O=Se==null?void 0:Se.data)==null?void 0:O.parent_id)==null?null:Number(Se.data.parent_id),await ee(),h())}catch(pe){Q.value=((K=(I=pe==null?void 0:pe.response)==null?void 0:I.data)==null?void 0:K.message)||((ve=(ae=pe==null?void 0:pe.response)==null?void 0:ae.data)==null?void 0:ve.error)||"Lưu thư mục thất bại",d.value="error"}finally{P.value=!1}};return Ze(async()=>{await ee(),h()}),(O,I)=>{const K=nt("router-link");return a(),i("div",Ki,[e("div",Xi,[e("div",Ji,[e("h1",Gi,A(y.value?"Tạo thư mục":"Sửa thư mục"),1),J(K,{to:`/websites/${$(g)}/folders`,class:"text-sm text-primary"},{default:je(()=>[...I[4]||(I[4]=[we("Quay lại danh sách",-1)])]),_:1},8,["to"])]),e("form",{onSubmit:Be(x,["prevent"]),class:"bg-white border border-gray-200 rounded-md p-4 space-y-4"},[e("div",null,[I[5]||(I[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),N(e("input",{"onUpdate:modelValue":I[0]||(I[0]=ae=>C.value=ae),onInput:q,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[oe,C.value]])]),e("div",null,[I[6]||(I[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),N(e("input",{"onUpdate:modelValue":I[1]||(I[1]=ae=>k.value=ae),onInput:I[2]||(I[2]=ae=>w.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[oe,k.value]]),I[7]||(I[7]=e("div",{class:"text-xs text-gray-500 mt-1"},"Sẽ tự thêm số nếu trùng trong domain",-1))]),e("div",null,[I[9]||(I[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),N(e("select",{"onUpdate:modelValue":I[3]||(I[3]=ae=>l.value=ae),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[I[8]||(I[8]=e("option",{value:null},"(Không có)",-1)),(a(!0),i(fe,null,be(V.value,ae=>(a(),i("option",{key:ae.id,value:ae.id},A("↳ ".repeat(ae.depth)+ae.name),9,Qi))),128))],512),[[We,l.value]])]),e("div",Zi,[J(K,{to:`/websites/${$(g)}/folders`,class:"px-4 py-2 border border-gray-300 rounded-md"},{default:je(()=>[...I[10]||(I[10]=[we("Hủy",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:P.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md disabled:bg-blue-400"},A(y.value?"Tạo":"Lưu"),9,ed)]),Q.value?(a(),i("div",{key:0,class:Ie(["text-sm",d.value==="error"?"text-red-600":"text-green-600"])},A(Q.value),3)):W("",!0)],32)])])}}},td={class:"max-w-3xl mx-auto"},sd={key:0,class:"mb-6 rounded-md border border-green-200 bg-green-50 px-4 py-3 text-green-700"},ad={key:1,class:"mb-6 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-red-700"},ld={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},od={class:"grid grid-cols-1 gap-4"},nd={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},rd={class:"grid grid-cols-1 gap-4"},id={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},dd={class:"flex items-center justify-between mb-4"},ud={key:0,class:"text-sm text-gray-500"},cd={key:1,class:"space-y-3"},pd={class:"flex items-start justify-between"},md={class:"flex-1"},gd={class:"flex items-center gap-2"},vd={class:"font-semibold text-gray-900"},fd={key:0,class:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded"},bd={class:"text-sm text-gray-600 mt-1"},yd={class:"flex items-center gap-2"},hd=["onClick"],xd=["onClick"],wd={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},_d={class:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md"},kd={class:"flex items-center justify-between mb-4"},$d={class:"space-y-3"},Cd={class:"flex items-center gap-2"},Sd={class:"flex justify-end gap-2 mt-6"},Td={class:"flex justify-end"},jd=["disabled"],Ed={__name:"Settings",setup(t){const s=m({APP_NAME:"",APP_URL:"",SSL_EMAIL:""}),c=m(!1),g=m(""),v=m(""),y=m([]),f=m(!1),C=m({name:"",email:"",api_key:"",is_default:!1}),k=async()=>{try{const{data:ee}=await z.get("/api/settings");s.value={...s.value,...ee}}catch{v.value="Không tải được cài đặt"}},l=async()=>{try{const{data:ee}=await z.get("/api/cloudflare-accounts");y.value=ee}catch(ee){console.error("Failed to load Cloudflare accounts",ee)}},w=async()=>{var ee,T;try{await z.post("/api/cloudflare-accounts",C.value),g.value="Đã thêm Cloudflare account thành công",f.value=!1,C.value={name:"",email:"",api_key:"",is_default:!1},await l()}catch(q){const V=((T=(ee=q==null?void 0:q.response)==null?void 0:ee.data)==null?void 0:T.error)||"Thêm account thất bại";v.value=V}},P=async ee=>{try{await z.post(`/api/cloudflare-accounts/${ee}/set-default`),g.value="Đã set account mặc định",await l()}catch{v.value="Set default thất bại"}},Q=async ee=>{var T,q;if(confirm("Bạn có chắc muốn xóa account này?"))try{await z.delete(`/api/cloudflare-accounts/${ee}`),g.value="Đã xóa account",await l()}catch(V){const h=((q=(T=V==null?void 0:V.response)==null?void 0:T.data)==null?void 0:q.error)||"Xóa account thất bại";v.value=h}},d=async()=>{var ee,T;c.value=!0,v.value="",g.value="";try{await z.put("/api/settings",s.value),g.value="Đã lưu cài đặt thành công"}catch(q){const V=((T=(ee=q==null?void 0:q.response)==null?void 0:ee.data)==null?void 0:T.error)||"Lưu cài đặt thất bại";v.value=V}finally{c.value=!1}};return Ze(async()=>{await k(),await l()}),(ee,T)=>(a(),i("div",td,[T[21]||(T[21]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Cài đặt hệ thống",-1)),g.value?(a(),i("div",sd,A(g.value),1)):W("",!0),v.value?(a(),i("div",ad,A(v.value),1)):W("",!0),e("form",{onSubmit:Be(d,["prevent"])},[e("div",ld,[T[12]||(T[12]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Ứng dụng",-1)),e("div",od,[e("div",null,[T[10]||(T[10]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_NAME",-1)),N(e("input",{"onUpdate:modelValue":T[0]||(T[0]=q=>s.value.APP_NAME=q),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"VPS Manager"},null,512),[[oe,s.value.APP_NAME]])]),e("div",null,[T[11]||(T[11]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_URL",-1)),N(e("input",{"onUpdate:modelValue":T[1]||(T[1]=q=>s.value.APP_URL=q),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"https://vps.yourdomain.com"},null,512),[[oe,s.value.APP_URL]])])])]),e("div",nd,[T[14]||(T[14]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"SSL",-1)),e("div",rd,[e("div",null,[T[13]||(T[13]=e("label",{class:"block text-sm text-gray-600 mb-1"},"SSL_EMAIL",-1)),N(e("input",{"onUpdate:modelValue":T[2]||(T[2]=q=>s.value.SSL_EMAIL=q),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"admin@yourdomain.com"},null,512),[[oe,s.value.SSL_EMAIL]])])])]),e("div",id,[e("div",dd,[T[15]||(T[15]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Cloudflare Accounts",-1)),e("button",{type:"button",onClick:T[3]||(T[3]=q=>f.value=!0),class:"bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm"},"+ Thêm Account")]),y.value.length===0?(a(),i("div",ud,"Chưa có Cloudflare account nào")):(a(),i("div",cd,[(a(!0),i(fe,null,be(y.value,q=>(a(),i("div",{key:q.id,class:"border border-gray-200 rounded-lg p-4"},[e("div",pd,[e("div",md,[e("div",gd,[e("h3",vd,A(q.name),1),q.is_default?(a(),i("span",fd,"Default")):W("",!0)]),e("p",bd,A(q.email),1)]),e("div",yd,[q.is_default?W("",!0):(a(),i("button",{key:0,type:"button",onClick:V=>P(q.id),class:"text-xs text-blue-600 hover:text-blue-800"},"Set Default",8,hd)),e("button",{type:"button",onClick:V=>Q(q.id),class:"text-xs text-red-600 hover:text-red-800"},"Xóa",8,xd)])])]))),128))]))]),f.value?(a(),i("div",wd,[e("div",_d,[e("div",kd,[T[16]||(T[16]=e("h3",{class:"text-lg font-semibold"},"Thêm Cloudflare Account",-1)),e("button",{type:"button",onClick:T[4]||(T[4]=q=>f.value=!1),class:"text-gray-500"},"✕")]),e("div",$d,[e("div",null,[T[17]||(T[17]=e("label",{class:"block text-sm text-gray-700 mb-1"},"Tên tài khoản",-1)),N(e("input",{"onUpdate:modelValue":T[5]||(T[5]=q=>C.value.name=q),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"Cloudflare Account 1"},null,512),[[oe,C.value.name]])]),e("div",null,[T[18]||(T[18]=e("label",{class:"block text-sm text-gray-700 mb-1"},"Email",-1)),N(e("input",{"onUpdate:modelValue":T[6]||(T[6]=q=>C.value.email=q),type:"email",class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"admin@example.com"},null,512),[[oe,C.value.email]])]),e("div",null,[T[19]||(T[19]=e("label",{class:"block text-sm text-gray-700 mb-1"},"API Key",-1)),N(e("input",{"onUpdate:modelValue":T[7]||(T[7]=q=>C.value.api_key=q),type:"password",class:"w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[oe,C.value.api_key]])]),e("div",Cd,[N(e("input",{"onUpdate:modelValue":T[8]||(T[8]=q=>C.value.is_default=q),type:"checkbox",id:"is-default",class:"rounded"},null,512),[[gt,C.value.is_default]]),T[20]||(T[20]=e("label",{for:"is-default",class:"text-sm text-gray-700"},"Set làm account mặc định",-1))])]),e("div",Sd,[e("button",{type:"button",onClick:T[9]||(T[9]=q=>f.value=!1),class:"px-4 py-2 rounded-md border border-gray-300"},"Hủy"),e("button",{type:"button",onClick:w,class:"px-4 py-2 bg-blue-600 text-white rounded-md"},"Thêm")])])])):W("",!0),e("div",Td,[e("button",{type:"submit",onClick:Be(d,["prevent"]),disabled:c.value,class:Ie(["bg-blue-600 text-white px-4 py-2 rounded-md",{"opacity-50 cursor-not-allowed":c.value}])},A(c.value?"Đang lưu...":"Lưu cài đặt"),11,jd)])],32)]))}},Fd={class:"min-h-screen bg-gray-100"},Ad={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Ld={class:"px-4 py-6 sm:px-0"},Rd={class:"flex justify-between items-center mb-6"},Md={class:"text-3xl font-bold text-gray-900"},Id={class:"flex items-center gap-2"},Pd=["disabled","title"],Ud={class:"bg-white shadow rounded-lg p-6"},Dd={class:"space-y-4"},zd={class:"flex justify-between items-start"},Nd={class:"inline-flex items-center gap-2 mb-2"},Vd=["checked","onChange"],Od={class:"font-medium"},Bd={class:"text-sm text-gray-500"},Hd={class:"text-sm text-gray-500"},qd={class:"text-sm text-gray-500"},Wd={class:"flex gap-2"},Yd=["href"],Kd=["href"],Xd=["onClick","disabled"],Jd={key:0,class:"text-center text-gray-500"},Gd={class:"bg-white rounded-lg shadow-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Qd={class:"space-y-4"},Zd={key:0,class:"text-sm text-green-600 mt-2"},eu={key:0,class:"border-t pt-4"},tu={key:1,class:"border-t pt-4"},su={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},au={class:"text-sm font-medium text-gray-700 w-32 shrink-0"},lu=["onUpdate:modelValue"],ou=["value"],nu={key:0,class:"bg-gray-50 rounded-md p-4 mt-4"},ru={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs"},iu={class:"font-medium text-gray-600"},du={class:"ml-2 text-gray-800"},uu={key:2,class:"border-t pt-4"},cu={class:"border border-gray-300 rounded-md p-3 max-h-48 overflow-auto"},pu=["value"],mu={class:"text-sm"},gu={class:"text-sm space-y-1"},vu={class:"text-green-600"},fu={class:"text-blue-600"},bu={class:"text-gray-600"},yu={key:0,class:"mt-2"},hu={class:"text-xs text-red-600 mt-1 max-h-32 overflow-y-auto"},xu={class:"flex justify-end gap-3 pt-4 border-t"},wu=["disabled"],_u={__name:"PagesManagement",setup(t){const c=pt().params.websiteId,g=m(null),v=m([]),y=m([]),f=m([]),C=m([]),k=m(!1),l=m("");m(!1);const w=m(!1),P=m(null),Q=m(!1),d=m(null),ee=m([]),T=m([]),q=m([]),V=m("detail"),h={detail:{name:{label:"Title",jsonField:"name"},address:{label:"Địa điểm",jsonField:"address"},about:{label:"Giới thiệu",jsonField:"about"},images:{label:"Ảnh gallery",jsonField:"images"},facilities:{label:"Amenities",jsonField:"facilities"},faqs:{label:"FAQs",jsonField:"faqs"},houseRules:{label:"Useful Information",jsonField:"houseRules"}},blank:{name:{label:"Title",jsonField:"name"},content:{label:"Content",jsonField:"content"}},home:{name:{label:"Title",jsonField:"name"},about:{label:"About",jsonField:"about"},services:{label:"Services",jsonField:"services"},testimonials:{label:"Testimonials",jsonField:"testimonials"}},listing:{name:{label:"Title",jsonField:"name"},items:{label:"Items",jsonField:"items"},filters:{label:"Filters",jsonField:"filters"}}},x=m({name:{label:"Title",jsonField:"name"},address:{label:"Địa điểm",jsonField:"address"},about:{label:"Giới thiệu",jsonField:"about"},images:{label:"Ảnh gallery",jsonField:"images"},facilities:{label:"Amenities",jsonField:"facilities"},faqs:{label:"FAQs",jsonField:"faqs"},houseRules:{label:"Useful Information",jsonField:"houseRules"}}),O=Me(()=>x.value),I=Me(()=>{const o=l.value.trim().toLowerCase();return o?v.value.filter(b=>(b.title||"").toLowerCase().includes(o)||(b.path||"").toLowerCase().includes(o)):v.value}),K=Me(()=>P.value&&P.value.length>0?P.value[0]:null),ae=Me(()=>P.value&&P.value.length>0&&x.value.name.jsonField),ve=async()=>{const o=await z.get(`/api/websites/${c}`);g.value=o.data},pe=async()=>{const o=await z.get(`/api/websites/${c}/pages`);v.value=o.data.map(b=>({...b,__site:g.value}))},Se=async()=>{const o=await z.get("/api/websites");y.value=o.data||[]},Ue=Me(()=>{var b;return(((b=g.value)==null?void 0:b.domain)||"").trim().replace(/^[^.]+\./,"")}),Ae=Me(()=>{const o=Ue.value;return o&&(y.value||[]).find(b=>String(b.domain||"").trim()===o)||null}),he=Me(()=>{const o=g.value;return o&&String(o.domain||"").trim().split(".").length>2&&Ae.value?`/websites/${Ae.value.id}/subdomains`:"/websites"}),xe=async o=>{if(confirm(`Delete page ${o.path}?`))try{C.value=[...C.value,o.id],await z.delete(`/api/pages/${o.id}`),Qe.success("Page deleted"),f.value=f.value.filter(b=>b!==o.id),await pe()}catch{Qe.error("Failed to delete page")}finally{C.value=C.value.filter(b=>b!==o.id)}},Le=o=>{const b=o.__site||g.value;if(!b)return"#";const j=(b.ssl_enabled?"https://":"http://")+b.domain,S=o.path||"/",Y=o.filename||"";if(Y.toLowerCase()==="index.html")return j+S;const L=S.endsWith("/")?"":"/";return j+S+L+Y},ze=o=>{const b=o.__site||g.value;if(!b)return"#";const j=b.id,S=((o==null?void 0:o.path)||"/").trim(),Y=S==="/"?`/preview/${j}`:`/preview/${j}${S.startsWith("/")?"":"/"}${S}`,L=localStorage.getItem("adminToken")||"";if(!L)return Y;const p=Y.includes("?")?"&":"?";return`${Y}${p}token=${encodeURIComponent(L)}`},Ne=o=>{const b=o.id;f.value.includes(b)?f.value=f.value.filter(j=>j!==b):f.value=[...f.value,b]},Ve=async()=>{if(f.value.length!==0&&confirm(`Delete ${f.value.length} selected pages?`)){k.value=!0;try{const o=[...f.value];await Promise.all(o.map(async b=>{C.value=[...C.value,b];try{await z.delete(`/api/pages/${b}`)}finally{C.value=C.value.filter(j=>j!==b)}})),Qe.success("Selected pages deleted"),f.value=[],await pe()}catch{Qe.error("Failed to delete selected pages")}finally{k.value=!1}}},me=async()=>{try{const o=await z.get(`/api/websites/${c}/folders`);ee.value=o.data||[]}catch(o){console.error("Failed to load folders:",o)}},ne=o=>{const b=o.target.files[0];if(!b)return;const j=new FileReader;j.onload=S=>{try{const Y=JSON.parse(S.target.result);let L=Y;if(Array.isArray(Y)&&Y.length>0&&Y[0].result&&(L=Y.map(p=>p.result)),P.value=L,d.value=null,L.length>0){const p=L[0],te=Object.keys(p);q.value=te,E()}Qe.success(`Loaded ${L.length} items from file`)}catch(Y){Qe.error("Invalid JSON file"),console.error(Y)}},j.readAsText(b)},E=()=>{const o=h[V.value]||h.detail;x.value=JSON.parse(JSON.stringify(o));const b=q.value;if(V.value==="detail"){const j={name:b.find(S=>S.toLowerCase().includes("name")||S.toLowerCase().includes("title")),address:b.find(S=>S.toLowerCase().includes("address")||S.toLowerCase().includes("location")),about:b.find(S=>S.toLowerCase().includes("about")||S.toLowerCase().includes("description")),rating:b.find(S=>S.toLowerCase().includes("rating")||S.toLowerCase().includes("score")),images:b.find(S=>S.toLowerCase().includes("image")||S.toLowerCase().includes("photo")),facilities:b.find(S=>S.toLowerCase().includes("facilit")||S.toLowerCase().includes("amenity")),faqs:b.find(S=>S.toLowerCase().includes("faq")||S.toLowerCase().includes("question")),houseRules:b.find(S=>S.toLowerCase().includes("rule")||S.toLowerCase().includes("policy"))};Object.keys(j).forEach(S=>{j[S]&&x.value[S]&&(x.value[S].jsonField=j[S])})}else if(V.value==="blank"){const j={name:b.find(S=>S.toLowerCase().includes("name")||S.toLowerCase().includes("title")),content:b.find(S=>S.toLowerCase().includes("content")||S.toLowerCase().includes("description")||S.toLowerCase().includes("body"))};Object.keys(j).forEach(S=>{j[S]&&x.value[S]&&(x.value[S].jsonField=j[S])})}else if(V.value==="home"){const j={name:b.find(S=>S.toLowerCase().includes("name")||S.toLowerCase().includes("title")),about:b.find(S=>S.toLowerCase().includes("about")||S.toLowerCase().includes("description")),services:b.find(S=>S.toLowerCase().includes("service")),testimonials:b.find(S=>S.toLowerCase().includes("testimonial")||S.toLowerCase().includes("review"))};Object.keys(j).forEach(S=>{j[S]&&x.value[S]&&(x.value[S].jsonField=j[S])})}else if(V.value==="listing"){const j={name:b.find(S=>S.toLowerCase().includes("name")||S.toLowerCase().includes("title")),items:b.find(S=>S.toLowerCase().includes("item")||S.toLowerCase().includes("list")),filters:b.find(S=>S.toLowerCase().includes("filter")||S.toLowerCase().includes("category"))};Object.keys(j).forEach(S=>{j[S]&&x.value[S]&&(x.value[S].jsonField=j[S])})}},F=o=>{if(!K.value||!o)return"-";const b=K.value[o];return Array.isArray(b)?`${b.length} items`:typeof b=="object"&&b!==null?JSON.stringify(b).substring(0,50)+"...":String(b||"-").substring(0,100)},u=()=>{w.value=!1,setTimeout(()=>{w.value||(P.value=null,d.value=null,q.value=[],T.value=[],V.value="detail")},300)},_=async()=>{var o,b;if(P.value){Q.value=!0,d.value=null;try{const j=P.value.map(Y=>{const L={};return Object.keys(x.value).forEach(p=>{const te=x.value[p].jsonField;te&&Y[te]!==void 0&&(L[p]=Y[te])}),L}),S=await z.post(`/api/websites/${c}/pages/import`,{data:j,folder_ids:T.value,template_type:V.value});d.value=S.data,Qe.success(`Import completed: ${S.data.stats.created} created, ${S.data.stats.updated} updated`),await pe()}catch(j){Qe.error("Import failed: "+(((b=(o=j.response)==null?void 0:o.data)==null?void 0:b.message)||j.message)),console.error(j)}finally{Q.value=!1}}};return Ze(async()=>{await ve(),await pe(),await Se(),await me()}),(o,b)=>{var S;const j=nt("router-link");return a(),i("div",Fd,[e("div",Ad,[e("div",Ld,[e("div",Rd,[e("h1",Md,A(((S=g.value)==null?void 0:S.domain)||"..."),1),e("div",Id,[J(j,{to:he.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Back"},{default:je(()=>[...b[5]||(b[5]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5"}),e("path",{d:"M12 19l-7-7 7-7"})],-1)])]),_:1},8,["to"]),N(e("input",{"onUpdate:modelValue":b[0]||(b[0]=Y=>l.value=Y),placeholder:"Search",class:"h-9 w-56 rounded-md border border-gray-300 px-3"},null,512),[[oe,l.value]]),e("button",{onClick:b[1]||(b[1]=Y=>w.value=!0),class:"h-9 px-3 flex items-center justify-center gap-1 rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50",title:"Import Pages"},[...b[6]||(b[6]=[xt('<svg viewBox="0 0 24 24" class="size-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg><span class="text-sm">Import</span>',2)])]),J(j,{to:`/websites/${$(c)}/pages/new`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Add Page"},{default:je(()=>[...b[7]||(b[7]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])]),_:1},8,["to"]),e("button",{onClick:Ve,disabled:f.value.length===0||k.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:`Delete Selected (${f.value.length})`},[k.value?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(ct),{key:1,class:"size-4"}))],8,Pd)])]),e("div",Ud,[e("div",Dd,[(a(!0),i(fe,null,be(I.value,Y=>{var L,p;return a(),i("div",{key:Y.id,class:"border rounded-lg p-4"},[e("div",zd,[e("div",null,[e("label",Nd,[e("input",{type:"checkbox",checked:f.value.includes(Y.id),onChange:te=>Ne(Y)},null,40,Vd)]),e("h4",Od,A(Y.title||"(No title)"),1),e("p",Bd,"Path: "+A(Y.path),1),e("p",Hd,"File: "+A(Y.filename),1),e("p",qd,"Website: "+A((L=Y.__site)==null?void 0:L.domain),1)]),e("div",Wd,[e("a",{href:Le(Y),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Live"},[J($(vs),{class:"size-4"})],8,Yd),e("a",{href:ze(Y),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[...b[8]||(b[8]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,Kd),J(j,{to:`/websites/${((p=Y.__site)==null?void 0:p.id)||$(c)}/pages/${Y.id}`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},{default:je(()=>[J($(ps),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:te=>xe(Y),disabled:C.value.includes(Y.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[C.value.includes(Y.id)?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(ct),{key:1,class:"size-4"}))],8,Xd)])])])}),128)),I.value.length===0?(a(),i("div",Jd,"No pages found")):W("",!0)])]),w.value?(a(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:b[4]||(b[4]=Be(Y=>w.value=!1,["self"]))},[e("div",Gd,[e("div",{class:"flex justify-between items-center mb-4"},[b[10]||(b[10]=e("h2",{class:"text-xl font-bold"},"Import Pages from JSON",-1)),e("button",{onClick:u,class:"text-gray-500 hover:text-gray-700"},[...b[9]||(b[9]=[e("svg",{viewBox:"0 0 24 24",class:"size-6",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18"}),e("path",{d:"M6 6l12 12"})],-1)])])]),e("div",Qd,[e("div",null,[b[11]||(b[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"1"),we(" Upload JSON File ")])],-1)),e("input",{type:"file",onChange:ne,accept:".json",class:"block w-full text-sm text-gray-500 cursor-pointer file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 file:cursor-pointer"},null,32),P.value?(a(),i("p",Zd,"✓ Loaded "+A(P.value.length)+" items",1)):W("",!0)]),P.value?(a(),i("div",eu,[b[13]||(b[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"2"),we(" Select Template Type ")])],-1)),N(e("select",{"onUpdate:modelValue":b[2]||(b[2]=Y=>V.value=Y),onChange:E,class:"w-full md:w-1/2 border-gray-300 rounded-md text-sm cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400"},[...b[12]||(b[12]=[e("option",{value:"detail"},"Hotel Detail",-1),e("option",{value:"blank"},"Blank (HTML)",-1),e("option",{value:"home"},"Home Page",-1),e("option",{value:"listing"},"Listing Page",-1)])],544),[[We,V.value]]),b[14]||(b[14]=e("p",{class:"text-xs text-gray-500 mt-1"},"Select which template to use for imported pages",-1))])):W("",!0),P.value&&q.value.length>0?(a(),i("div",tu,[b[17]||(b[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"3"),we(" Map JSON Fields to Template Fields ")])],-1)),e("div",su,[(a(!0),i(fe,null,be(O.value,(Y,L)=>(a(),i("div",{key:L,class:"flex items-center gap-3"},[e("label",au,A(Y.label)+":",1),N(e("select",{"onUpdate:modelValue":p=>Y.jsonField=p,class:"flex-1 text-sm border-gray-300 rounded-md cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 transition-colors"},[b[15]||(b[15]=e("option",{value:null},"-- Skip --",-1)),(a(!0),i(fe,null,be(q.value,p=>(a(),i("option",{key:p,value:p},A(p),9,ou))),128))],8,lu),[[We,Y.jsonField]])]))),128))]),K.value?(a(),i("div",nu,[b[16]||(b[16]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-2"},"Preview (First Item):",-1)),e("div",ru,[(a(!0),i(fe,null,be(O.value,(Y,L)=>N((a(),i("div",{key:L},[e("span",iu,A(Y.label)+":",1),e("span",du,A(F(Y.jsonField)),1)])),[[rs,Y.jsonField]])),128))])])):W("",!0)])):W("",!0),P.value&&ee.value.length>0?(a(),i("div",uu,[b[18]||(b[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"4"),we(" Assign to Folders (optional) ")])],-1)),e("div",cu,[(a(!0),i(fe,null,be(ee.value,Y=>(a(),i("label",{key:Y.id,class:"flex items-center gap-2 cursor-pointer mb-2"},[N(e("input",{type:"checkbox",value:Y.id,"onUpdate:modelValue":b[3]||(b[3]=L=>T.value=L),class:"rounded cursor-pointer"},null,8,pu),[[gt,T.value]]),e("span",mu,A(Y.name),1)]))),128))])])):W("",!0),d.value?(a(),i("div",{key:3,class:Ie(["p-4 rounded-md border-t pt-4",d.value.stats.errors.length>0?"bg-yellow-50":"bg-green-50"])},[b[20]||(b[20]=e("p",{class:"font-medium mb-2"},"Import Results:",-1)),e("ul",gu,[e("li",null,"Total: "+A(d.value.stats.total),1),e("li",vu,"Created: "+A(d.value.stats.created),1),e("li",fu,"Updated: "+A(d.value.stats.updated),1),e("li",bu,"Skipped: "+A(d.value.stats.skipped),1)]),d.value.stats.errors.length>0?(a(),i("div",yu,[b[19]||(b[19]=e("p",{class:"text-sm font-medium text-red-600"},"Errors:",-1)),e("ul",hu,[(a(!0),i(fe,null,be(d.value.stats.errors,(Y,L)=>(a(),i("li",{key:L},A(Y.title)+": "+A(Y.error),1))),128))])])):W("",!0)],2)):W("",!0),e("div",xu,[e("button",{onClick:u,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},A(d.value?"Close":"Cancel"),1),d.value?W("",!0):(a(),i("button",{key:0,onClick:_,disabled:!ae.value||Q.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2"},[Q.value?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):W("",!0),e("span",null,A(Q.value?"Importing...":"Import"),1)],8,wu))])])])])):W("",!0)])])])}}},ku={class:"min-h-screen bg-gray-100"},$u={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},Cu={class:"px-4 py-6 sm:px-0"},Su={class:"flex justify-between items-center mb-6"},Tu={class:"text-3xl font-bold text-gray-900"},ju={class:"flex items-center gap-2"},Eu=["href"],Fu=["href"],Au={class:"bg-white shadow rounded-lg p-6"},Lu={class:"mb-4"},Ru={class:"mb-4"},Mu={class:"mb-4"},Iu={class:"mb-4"},Pu={class:"flex items-center justify-between"},Uu={class:"flex items-center gap-3"},Du={class:"mt-1 border border-gray-300 rounded-md p-3 space-y-3"},zu={class:"space-y-1"},Nu=["disabled","onClick"],Vu=["value","onChange"],Ou={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Bu={class:"bg-white rounded-lg shadow p-6 w-full max-w-md"},Hu={class:"flex items-center justify-between mb-4"},qu={class:"space-y-3"},Wu=["value"],Yu={class:"pt-2 border-t border-gray-200"},Ku={class:"text-xs text-gray-600"},Xu={class:"flex justify-end gap-2 mt-6"},Ju={class:"mb-4"},Gu={key:0,class:"mb-4 space-y-4"},Qu={key:1,class:"mb-4 space-y-4"},Zu={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ec={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},tc={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},sc=["value"],ac={class:"text-sm"},lc={class:"space-y-3"},oc={class:"flex items-center gap-2"},nc={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},rc=["onClick"],ic=["onUpdate:modelValue"],dc=["onUpdate:modelValue"],uc={class:"space-y-3"},cc={class:"flex items-center gap-2"},pc={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},mc=["onClick"],gc=["onUpdate:modelValue"],vc=["onUpdate:modelValue"],fc={key:2,class:"mb-4"},bc={key:3,class:"mb-4"},yc={key:0,class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},hc={class:"flex justify-end gap-3"},xc=["disabled"],wc={key:0,class:"inline-flex items-center gap-2"},_c={key:1},ls={__name:"PageEdit",setup(t){const s=pt(),c=ht(),g=s.params.websiteId,v=s.params.pageId,y=m(s.name==="PageCreate"||v==="new"||!v),f=m("blank"),C=m(!1),k=m(""),l=m({title:"",location:"",phone:"",galleryRaw:"",about1:"",pageContent:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),w=m([]),P=m([]),Q=m(null),d=m(""),ee=m(null),T=m(!1),q=m(""),V=m(!1);m(null),m(""),m(""),m(null);const h=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],x=m({path:"",filename:"",title:"",content:""}),O=m(null),I=m([]),K=m(null),ae=m(!1),ve=m(null),pe=m(null),Se=async()=>{if(y.value)return;const r=(await z.get(`/api/pages/${v}`)).data;if(x.value={path:r.path,filename:r.filename,title:r.title||"",content:r.content||""},r.template_type){if(C.value=!!r.template_type,r.template_type==="page"&&r.template_data)l.value={...l.value,pageContent:r.template_data.content||""};else if((r.template_type==="hotel-detail"||r.template_type==="hotel-detail-1"||r.template_type==="detail")&&r.template_data){let D=r.template_data.galleryRaw||"";!D&&Array.isArray(r.template_data.gallery)&&(D=r.template_data.gallery.join(`
`)),l.value={title:r.template_data.title||"",location:r.template_data.location||r.template_data.location_text||"",phone:r.template_data.phone||"",galleryRaw:D,about1:r.template_data.about1||"",pageContent:"",amenities:Array.isArray(r.template_data.amenities)?r.template_data.amenities:[],info:Array.isArray(r.template_data.info)?r.template_data.info:[{subject:"",description:""},{subject:"",description:""}],faqs:Array.isArray(r.template_data.faqs)?r.template_data.faqs:[{q:"",a:""},{q:"",a:""}]}}f.value=r.template_type}else f.value="blank",C.value=!1;P.value=(r.folders||[]).map(D=>Number(D.id)),Q.value=r.primary_folder_id==null?null:Number(r.primary_folder_id)},Ue=async()=>{const B=(x.value.title||"").trim();let r="";try{r=(await z.get("/templates/laravel-hotel-1/page/index.html")).data||""}catch{r='<!DOCTYPE html><html><head><meta charset="utf-8"><title>{{TITLE}}</title></head><body></body></html>'}let D="",le="";try{D=(await z.get("/templates/_shared/header.html")).data||""}catch{}try{le=(await z.get("/templates/_shared/footer.html")).data||""}catch{}D&&(r=r.replace(/<header[^>]*>[\s\S]*?<\/header>/i,D)),le&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(r)?r=r.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,le):/<\/body>/i.test(r)?r=r.replace(/<\/body>/i,le+"</body>"):r+=`
`+le);const R={title:B||"Page",content:l.value.pageContent||""},X=`<script type="application/json" id="page-data">${JSON.stringify(R)}<\/script>`;return r=r.replace(/<\/head>/i,X+`
</head>`),r=r.replace(/<title>[^<]*<\/title>/i,`<title>${R.title}</title>`),r||'<!DOCTYPE html><html><head><meta charset="utf-8"><title>'+(B||"Page")+'</title></head><body><div id="page-content">'+(l.value.pageContent||"")+"</div></body></html>"},Ae=async()=>{const B=(l.value.galleryRaw||"").split(`
`).map(He=>He.trim()).filter(Boolean),D=(P.value||[]).reduce((He,et)=>{if(He==null)return et;const lt=_(He);return _(et)>lt?et:He},null),le=u(D),R=le.length>1?[le[0],le[le.length-1]]:le,X=(x.value.title||"").trim(),ie=["Home",...R.map(He=>He.name||""),X];let se=(await z.get("/templates/laravel-hotel-1/detail/index.html")).data||"",$e="",qe="";try{$e=(await z.get("/templates/_shared/header.html")).data||""}catch{}try{qe=(await z.get("/templates/_shared/footer.html")).data||""}catch{}$e&&(se=se.replace(/<header[^>]*>[\s\S]*?<\/header>/i,$e)),qe&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(se)?se=se.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,qe):/<\/body>/i.test(se)?se=se.replace(/<\/body>/i,qe+"</body>"):se+=`
`+qe);const tt=l.value.amenities||[],Oe=B.map(He=>String(He).replace(/<\/script>/gi,"<\\/script>")),Je={title:X||"Hotel",location:l.value.location||"",location_text:l.value.location||"",phone:l.value.phone||"",about1:l.value.about1||"",amenities:tt,faqs:l.value.faqs||[],info:l.value.info||[],gallery:Oe,breadcrumb_items:ie.filter(Boolean)},at=`<script type="application/json" id="page-data">${JSON.stringify(Je)}<\/script>`;return se=se.replace("{{GALLERY_DATA_SCRIPT}}",at),se=se.replace(/<title>[^<]*<\/title>/i,`<title>${Je.title}</title>`),se},he=async()=>{const B=await z.get(`/api/websites/${g}`);O.value=B.data},xe=async()=>{try{const B=await z.get("/api/websites");I.value=B.data||[]}catch{I.value=[]}},Le=Me(()=>{const B=O.value;if(!B)return"/websites";const r=(B.domain||"").trim(),D=r.replace(/^[^.]+\./,"");if(D&&D!==r){const le=(I.value||[]).find(R=>String(R.domain).trim()===D);if(le&&le.id)return`/websites/${le.id}/subdomains`}return"/websites"}),ze=async()=>{try{const B=await z.get("/api/settings");K.value=B.data||{}}catch{K.value={}}},Ne=async()=>{const D=((await z.get(`/api/websites/${g}/folders`)).data||[]).map(le=>({...le,id:Number(le.id),parent_id:le.parent_id==null?null:Number(le.parent_id)}));w.value=D},Ve=async()=>{const B=(d.value||"").trim();if(!B)return;let r=(q.value||"").trim();r||(r=b(B));const D={name:B,slug:r};ee.value&&(D.parent_id=Number(ee.value));const R=(await z.post(`/api/websites/${g}/folders`,D)).data;w.value=[...w.value,R],P.value=[...P.value,R.id],d.value="",ee.value=null,q.value="",V.value=!1,T.value=!1},me=async()=>{var B,r,D,le,R;ae.value=!0;try{const X=(B=window.tinymce)==null?void 0:B.get("page-content-editor");if(X&&(l.value.pageContent=X.getContent()||""),y.value){let ie;if(f.value==="blank"?ie=k.value||x.value.content||"":f.value==="page"?ie=await Ue():ie=await Ae(),x.value.content=ie,x.value.filename=(x.value.filename||"index.html").trim(),!(x.value.path||"").trim()){const qe=(P.value||[]).reduce((Oe,Je)=>{if(Oe==null)return Je;const at=_(Oe);return _(Je)>at?Je:Oe},null),tt=Q.value||qe;if(tt){const Oe=F(tt);Oe&&(x.value.path=`/${Oe}`)}}x.value.path||(x.value.path="/");const se={...x.value};if(f.value==="page")se.template_type="page",se.template_data={title:(x.value.title||"").trim()||"Page",content:l.value.pageContent||""};else if(f.value!=="blank"){se.template_type=f.value;const $e=(l.value.galleryRaw||"").split(`
`).map(qe=>qe.trim()).filter(Boolean);se.template_data={title:(l.value.title||x.value.title||"").trim()||"Hotel",location:l.value.location||"",location_text:l.value.location||"",phone:l.value.phone||"",about1:l.value.about1||"",amenities:l.value.amenities||[],faqs:l.value.faqs||[],info:l.value.info||[],gallery:$e,galleryRaw:l.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(l.value.title||"").trim()].filter(Boolean)}}else se.template_type="blank",se.template_data=null;se.folder_ids=[...P.value],se.primary_folder_id=Q.value,await z.post(`/api/websites/${g}/pages`,se)}else{const ie={...x.value};let De;if(f.value==="blank"?De=x.value.content||"":f.value==="page"?De=await Ue():De=await Ae(),ie.content=De,ie.filename=(ie.filename||"index.html").trim(),f.value==="page")ie.template_type="page",ie.template_data={title:(x.value.title||"").trim()||"Page",content:l.value.pageContent||""};else if(f.value!=="blank"){ie.template_type=f.value;const $e=(l.value.galleryRaw||"").split(`
`).map(qe=>qe.trim()).filter(Boolean);ie.template_data={title:(l.value.title||x.value.title||"").trim()||"Hotel",location:l.value.location||"",location_text:l.value.location||"",phone:l.value.phone||"",about1:l.value.about1||"",amenities:l.value.amenities||[],faqs:l.value.faqs||[],info:l.value.info||[],gallery:$e,galleryRaw:l.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(l.value.title||"").trim()].filter(Boolean)}}else ie.template_type="blank",ie.template_data=null;if(!(ie.path||"").trim()){const qe=(P.value||[]).reduce((Oe,Je)=>{if(Oe==null)return Je;const at=_(Oe);return _(Je)>at?Je:Oe},null),tt=Q.value||qe;if(tt){const Oe=F(tt);Oe&&(ie.path=`/${Oe}`)}}ie.path||(ie.path="/"),ie.folder_ids=[...P.value],ie.primary_folder_id=Q.value,await z.put(`/api/pages/${v}`,ie)}c.push(`/websites/${g}/pages`)}catch(X){const ie=((D=(r=X==null?void 0:X.response)==null?void 0:r.data)==null?void 0:D.message)||((R=(le=X==null?void 0:X.response)==null?void 0:le.data)==null?void 0:R.error)||(X==null?void 0:X.message)||"Lưu trang thất bại";alert(ie)}finally{ae.value=!1}},ne=()=>{if(!O.value)return"#";const B=(O.value.ssl_enabled?"https://":"http://")+O.value.domain,r=x.value.path||"/",D=x.value.filename||"",le=r.endsWith("/")?"":"/";return D.toLowerCase()==="index.html"?B+r:B+r+le+D},E=()=>{var ie;if(!O.value)return"#";const B=(((ie=K.value)==null?void 0:ie.APP_URL)||(O.value.ssl_enabled?"https://":"http://")+O.value.domain).replace(/\/$/,""),r=(x.value.path||"/").trim();let D;if(r==="/"||r==="")D=`${B}/preview/${O.value.id}`;else{const De=r.replace(/^\//,"");D=`${B}/preview/${O.value.id}/${encodeURIComponent(De)}`}const le=localStorage.getItem("adminToken"),R=new URLSearchParams;le&&R.set("token",le),R.set("hide_preview_bar","1"),R.set("v",String(Date.now()));const X=R.toString();return X?`${D}?${X}`:D},F=B=>{if(!B)return"";const r=new Map((w.value||[]).map(R=>[String(R.id),R]));let D=r.get(String(B));const le=[];for(;D&&(D.slug&&le.unshift(D.slug),!(!D.parent_id||(D=r.get(String(D.parent_id)),D&&String(D.id)===String(B)))););return le.join("/")},u=B=>{if(!B)return[];const r=new Map((w.value||[]).map(X=>[String(X.id),X])),D=[],le=new Set;let R=r.get(String(B));for(;R&&!le.has(R.id)&&(D.unshift(R),le.add(R.id),!!R.parent_id);)R=r.get(String(R.parent_id));return D},_=B=>{let r=0;const D=w.value||[],le=new Map(D.map(X=>[String(X.id),X]));let R=D.find(X=>String(X.id)===String(B));for(;R&&R.parent_id!=null;)r+=1,R=le.get(String(R.parent_id));return r},o=Me(()=>{const B=[...w.value||[]],r=new Map(B.map(se=>[String(se.id),se])),D=se=>se.sort(($e,qe)=>($e.name||"").localeCompare(qe.name||"")),le=se=>B.filter($e=>String($e.parent_id)===String(se)),R=se=>!se.parent_id||!r.has(String(se.parent_id))||String(se.parent_id)===String(se.id),X=D(B.filter(R)),ie=[],De=(se,$e)=>{ie.push({...se,depth:$e}),D(le(se.id)).forEach(qe=>De(qe,$e+1))};return X.forEach(se=>De(se,0)),ie}),b=B=>(B||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),j=()=>{V.value||(q.value=b(d.value))},S=B=>{if(Q.value===B){Q.value=null;return}Q.value||(Q.value=B)},Y=B=>{if(P.value.includes(B)){const r=w.value.find(D=>D.id===B);if(r&&r.parent_id){const D=le=>{if(!le)return;P.value.includes(le)||P.value.push(le);const R=w.value.find(X=>X.id===le);R&&R.parent_id&&D(R.parent_id)};D(r.parent_id)}}Q.value&&!P.value.includes(Q.value)&&(Q.value=null)},L=()=>{l.value.faqs=[...l.value.faqs||[],{q:"",a:""}]},p=()=>{l.value.info=[...l.value.info||[],{subject:"",description:""}]},te=B=>{l.value.faqs=(l.value.faqs||[]).filter((r,D)=>D!==B)},ce=B=>{l.value.info=(l.value.info||[]).filter((r,D)=>D!==B)},ue=Me(()=>{const r=(x.value.content||"").split(`
`).length;return r>0?r:1}),re=()=>{ve.value&&pe.value&&(ve.value.scrollTop=pe.value.scrollTop)},Te=async()=>{if(!window.tinymce){if(!document.querySelector('script[src*="tinymce.min.js"]')){const B=document.createElement("script");B.src="/dist/tinymce/tinymce.min.js",document.head.appendChild(B),await new Promise((r,D)=>{B.onload=r,B.onerror=D})}await new Promise(B=>{const r=()=>{window.tinymce?B():setTimeout(r,50)};r()})}},U=async()=>{await zt(),await new Promise(D=>setTimeout(D,100));const B=document.getElementById("page-content-editor");if(!B)return;await Te();const r=window.tinymce.get("page-content-editor");r&&r.remove(),B.value=l.value.pageContent||"",window.tinymce.init({selector:"#page-content-editor",base_url:"/dist/tinymce",suffix:".min",menubar:!0,plugins:"link lists table image code charmap anchor searchreplace visualblocks fullscreen insertdatetime media help wordcount",toolbar:"undo redo | formatselect | bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media table | charmap anchor | code fullscreen | help",height:500,table_toolbar:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",image_title:!0,automatic_uploads:!1,file_picker_types:"image",content_style:"body { font-family: Arial, sans-serif; font-size: 14px; }",setup:D=>{D.on("Change KeyUp SetContent",()=>{l.value.pageContent=D.getContent()||""})}}).then(D=>{const le=D&&D[0];le&&(l.value.pageContent||"").trim()&&le.setContent(l.value.pageContent)})};return _t(f,async B=>{B==="page"&&await U()}),Ze(async()=>{await ze(),await Promise.all([he(),xe()]),await Ne(),await Se(),await zt();const B=document.getElementById("about1-editor");B&&(await Te(),B.value=l.value.about1||"",window.tinymce.init({selector:"#about1-editor",base_url:"/dist/tinymce",suffix:".min",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:r=>{r.on("Change KeyUp SetContent",()=>{l.value.about1=r.getContent()||""})}}).then(r=>{const D=r&&r[0];D&&(l.value.about1||"").trim()&&D.setContent(l.value.about1)})),f.value==="page"&&await U()}),Ht(()=>{if(window.tinymce){const B=window.tinymce.get("about1-editor");B&&B.remove();const r=window.tinymce.get("page-content-editor");r&&r.remove()}}),(B,r)=>{var le;const D=nt("router-link");return a(),i("div",ku,[e("div",$u,[e("div",Cu,[e("div",Su,[e("h1",Tu,A(y.value?"Create Page":"Edit Page"),1),e("div",ju,[y.value?W("",!0):(a(),i("a",{key:0,href:ne(),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[J($(vs),{class:"size-4"})],8,Eu)),y.value?W("",!0):(a(),i("a",{key:1,href:E(),target:"_blank",class:"px-3 h-9 inline-flex items-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 text-sm"},"Preview",8,Fu)),J(D,{to:Le.value,class:"px-4 py-2 rounded-md border border-gray-300 bg-white"},{default:je(()=>[...r[20]||(r[20]=[we("Back",-1)])]),_:1},8,["to"])])]),e("div",Au,[e("form",{onSubmit:Be(me,["prevent"]),novalidate:""},[e("div",Lu,[r[21]||(r[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Path",-1)),N(e("input",{"onUpdate:modelValue":r[0]||(r[0]=R=>x.value.path=R),type:"text",placeholder:"/about-us",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,x.value.path]])]),e("div",Ru,[r[22]||(r[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Filename",-1)),N(e("input",{"onUpdate:modelValue":r[1]||(r[1]=R=>x.value.filename=R),type:"text",placeholder:"index.html",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,x.value.filename]])]),e("div",Mu,[r[23]||(r[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Title",-1)),N(e("input",{"onUpdate:modelValue":r[2]||(r[2]=R=>x.value.title=R),onInput:r[3]||(r[3]=R=>l.value.title=x.value.title),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[oe,x.value.title]])]),e("div",Iu,[e("div",Pu,[r[25]||(r[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thư mục",-1)),e("div",Uu,[J(D,{to:`/websites/${$(g)}/folders`,class:"text-sm text-primary"},{default:je(()=>[...r[24]||(r[24]=[we("Quản lý thư mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:r[4]||(r[4]=R=>T.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",Du,[e("div",zu,[r[26]||(r[26]=e("label",{class:"text-sm text-gray-700"},"Chọn thư mục",-1)),(a(!0),i(fe,null,be(o.value,R=>(a(),i("div",{key:R.id,class:"flex items-center gap-2 cursor-pointer"},[e("button",{type:"button",class:"text-yellow-500 text-xs",disabled:Q.value&&Q.value!==R.id,onClick:X=>S(R.id)},A(Q.value===R.id?"★":"☆"),9,Nu),N(e("input",{type:"checkbox",value:R.id,"onUpdate:modelValue":r[5]||(r[5]=X=>P.value=X),onChange:X=>Y(R.id),class:"rounded cursor-pointer"},null,40,Vu),[[gt,P.value]]),e("span",{class:"text-sm",style:ot({paddingLeft:(R.depth>0?R.depth*16:0)+"px"})},A("↳ ".repeat(R.depth))+A(R.name),5)]))),128))])]),T.value?(a(),i("div",Ou,[e("div",Bu,[e("div",Hu,[r[27]||(r[27]=e("h3",{class:"text-lg font-semibold"},"Tạo thư mục",-1)),e("button",{type:"button",onClick:r[6]||(r[6]=R=>T.value=!1),class:"text-gray-500"},"✕")]),e("div",qu,[e("div",null,[r[28]||(r[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),N(e("input",{"onUpdate:modelValue":r[7]||(r[7]=R=>d.value=R),onInput:j,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[oe,d.value]])]),e("div",null,[r[29]||(r[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),N(e("input",{"onUpdate:modelValue":r[8]||(r[8]=R=>q.value=R),onInput:r[9]||(r[9]=R=>V.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[oe,q.value]])]),e("div",null,[r[31]||(r[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),N(e("select",{"onUpdate:modelValue":r[10]||(r[10]=R=>ee.value=R),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[r[30]||(r[30]=e("option",{value:null},"(Không có)",-1)),(a(!0),i(fe,null,be(o.value,R=>(a(),i("option",{key:R.id,value:R.id},A("↳ ".repeat(R.depth)+R.name),9,Wu))),128))],512),[[We,ee.value]])]),e("div",Yu,[e("div",Ku,[r[33]||(r[33]=we("Sửa/Xóa chi tiết vui lòng vào trang ",-1)),J(D,{to:`/websites/${$(g)}/folders`,class:"text-primary"},{default:je(()=>[...r[32]||(r[32]=[we("Quản lý thư mục",-1)])]),_:1},8,["to"])])])]),e("div",Xu,[e("button",{type:"button",onClick:r[11]||(r[11]=R=>T.value=!1),class:"px-4 py-2 rounded-md border border-gray-300"},"Hủy"),e("button",{type:"button",onClick:Ve,class:"px-4 py-2 bg-blue-600 text-white rounded-md"},"Tạo")])])])):W("",!0)]),e("div",Ju,[r[35]||(r[35]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),N(e("select",{"onUpdate:modelValue":r[12]||(r[12]=R=>f.value=R),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...r[34]||(r[34]=[e("option",{value:null},"Auto (theo website)",-1),xt('<option value="blank">Custom HTML</option><optgroup label="Templates trong package"><option value="home">Home Template</option><option value="listing">Listing Template</option><option value="detail">Detail Template</option><option value="page">Page Template</option></optgroup>',2)])],512),[[We,f.value]]),r[36]||(r[36]=e("p",{class:"mt-1 text-xs text-gray-500"}," Auto: Tự động chọn template phù hợp. Custom HTML: Tự viết HTML. Templates: Chọn template có sẵn trong package. ",-1))]),f.value==="page"?(a(),i("div",Gu,[...r[37]||(r[37]=[e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Nội dung trang"),e("textarea",{id:"page-content-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)])])):W("",!0),f.value==="detail"?(a(),i("div",Qu,[e("div",Zu,[e("div",null,[r[38]||(r[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),N(e("input",{"onUpdate:modelValue":r[13]||(r[13]=R=>l.value.location=R),type:"text",placeholder:"Sunny Isles, Florida, United States hoặc iframe Google Maps embed",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,l.value.location]])]),e("div",null,[r[39]||(r[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),N(e("input",{"onUpdate:modelValue":r[14]||(r[14]=R=>l.value.phone=R),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,l.value.phone]])])]),e("div",null,[r[40]||(r[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),N(e("textarea",{"onUpdate:modelValue":r[15]||(r[15]=R=>l.value.galleryRaw=R),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,l.value.galleryRaw]])]),r[46]||(r[46]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[r[41]||(r[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",ec,[e("div",tc,[(a(),i(fe,null,be(h,R=>e("label",{key:R,class:"inline-flex items-center gap-2 cursor-pointer"},[N(e("input",{type:"checkbox",value:R,"onUpdate:modelValue":r[16]||(r[16]=X=>l.value.amenities=X),class:"rounded cursor-pointer border-gray-300"},null,8,sc),[[gt,l.value.amenities]]),e("span",ac,A(R),1)])),64))])])]),e("div",lc,[e("div",{class:"flex items-center justify-between"},[r[42]||(r[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:p,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(a(!0),i(fe,null,be(l.value.info,(R,X)=>(a(),i("div",{key:X,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",oc,[e("span",nc,A(X+1),1),r[43]||(r[43]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:ie=>ce(X),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,rc)]),N(e("input",{"onUpdate:modelValue":ie=>R.subject=ie,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,ic),[[oe,R.subject]]),N(e("textarea",{"onUpdate:modelValue":ie=>R.description=ie,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,dc),[[oe,R.description]])]))),128))]),e("div",uc,[e("div",{class:"flex items-center justify-between"},[r[44]||(r[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:L,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(a(!0),i(fe,null,be(l.value.faqs,(R,X)=>(a(),i("div",{key:X,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",cc,[e("span",pc,A(X+1),1),r[45]||(r[45]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:ie=>te(X),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,mc)]),N(e("input",{"onUpdate:modelValue":ie=>R.q=ie,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,gc),[[oe,R.q]]),N(e("textarea",{"onUpdate:modelValue":ie=>R.a=ie,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,vc),[[oe,R.a]])]))),128))])])):W("",!0),y.value&&f.value==="blank"?(a(),i("div",fc,[r[47]||(r[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),N(e("textarea",{"onUpdate:modelValue":r[17]||(r[17]=R=>k.value=R),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm font-mono"},null,512),[[oe,k.value]])])):W("",!0),(f.value==="blank"||!y.value&&!C.value)&&f.value!=="page"?(a(),i("div",bc,[r[48]||(r[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Content",-1)),((le=O.value)==null?void 0:le.type)==="html"&&(!y.value||f.value==="blank")?(a(),i("div",yc,[e("div",{ref_key:"gutterRef",ref:ve,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(a(!0),i(fe,null,be(ue.value,R=>(a(),i("div",{key:R,class:"px-2 text-xs text-gray-500 leading-6"},A(R),1))),128))],512),N(e("textarea",{ref_key:"codeRef",ref:pe,"onUpdate:modelValue":r[18]||(r[18]=R=>x.value.content=R),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:re},null,544),[[oe,x.value.content]])])):N((a(),i("textarea",{key:1,"onUpdate:modelValue":r[19]||(r[19]=R=>x.value.content=R),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512)),[[oe,x.value.content]])])):W("",!0),e("div",hc,[J(D,{to:Le.value,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:je(()=>[...r[49]||(r[49]=[we("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:ae.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[ae.value?(a(),i("span",wc,[J($(Re),{class:"size-4 animate-spin"}),we(" "+A(y.value?"Creating...":"Saving..."),1)])):(a(),i("span",_c,A(y.value?"Create":"Save"),1))],8,xc)])],32)])])])])}}},kc={class:"relative flex min-h-screen w-full flex-col bg-gray-100"},$c={class:"flex flex-1 items-center justify-center p-4 lg:p-6"},Cc={class:"flex w-full max-w-6xl justify-center"},Sc={class:"grid w-full grid-cols-1 gap-8 lg:gap-16"},Tc={class:"flex flex-col justify-center"},jc={class:"mx-auto flex w-full max-w-md flex-col"},Ec={class:"flex items-center gap-3 pb-8"},Fc={class:"flex flex-col gap-2"},Ac={class:"relative flex items-center"},Lc={class:"flex flex-col gap-2"},Rc={class:"relative flex items-center"},Mc=["type"],Ic=["disabled"],Pc={key:0,class:"inline-flex items-center gap-2"},Uc={key:1},Dc={key:0,class:"text-sm text-red-600"},zc={__name:"Login",setup(t){const s=ht(),c=m(""),g=m(""),v=m(!1),y=m(""),f=m(!1),C=async()=>{var k,l;v.value=!0,y.value="";try{const P=(await z.post("/api/login",{username:c.value,password:g.value})).data.token;localStorage.setItem("adminToken",P),z.defaults.headers.common["X-Admin-Token"]=P,document.cookie=`X-Admin-Token=${P}; path=/; max-age=${60*60*24}; samesite=None; secure`,document.cookie=`adminToken=${P}; path=/; max-age=${60*60*24}; samesite=None; secure`,s.push("/")}catch(w){y.value=((l=(k=w==null?void 0:w.response)==null?void 0:k.data)==null?void 0:l.error)||"Đăng nhập thất bại"}finally{v.value=!1}};return(k,l)=>(a(),i("div",kc,[e("div",$c,[e("div",Cc,[e("div",Sc,[e("div",Tc,[e("div",jc,[e("div",Ec,[J($(zs),{class:"size-8 text-blue-600"}),l[3]||(l[3]=e("span",{class:"text-xl font-semibold text-gray-800"},"VPS Manager",-1))]),l[7]||(l[7]=e("div",{class:"flex flex-col gap-1.5"},[e("p",{class:"text-gray-900 text-3xl font-bold tracking-tight"},"Đăng nhập vào Bảng điều khiển"),e("p",{class:"text-gray-500 text-base"},"Quản lý các máy chủ ảo của bạn một cách hiệu quả.")],-1)),e("form",{onSubmit:Be(C,["prevent"]),class:"flex flex-col gap-5 pt-8"},[e("label",Fc,[l[4]||(l[4]=e("p",{class:"text-gray-900 text-sm font-medium"},"Email / Tên người dùng",-1)),e("div",Ac,[J($(Ns),{class:"absolute left-3.5 size-4 text-gray-400"}),N(e("input",{"onUpdate:modelValue":l[0]||(l[0]=w=>c.value=w),type:"text",required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-4",placeholder:"nhapemail@example.com"},null,512),[[oe,c.value]])])]),e("label",Lc,[l[5]||(l[5]=e("p",{class:"text-gray-900 text-sm font-medium"},"Mật khẩu",-1)),e("div",Rc,[J($(Vs),{class:"absolute left-3.5 size-4 text-gray-400"}),N(e("input",{type:f.value?"text":"password","onUpdate:modelValue":l[1]||(l[1]=w=>g.value=w),required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-11",placeholder:"••••••••"},null,8,Mc),[[Ts,g.value]]),e("button",{type:"button",onClick:l[2]||(l[2]=w=>f.value=!f.value),class:"absolute right-0 h-full px-3.5 text-gray-400 hover:text-gray-600"},[f.value?(a(),de($(Os),{key:1,class:"size-5"})):(a(),de($(Vt),{key:0,class:"size-5"}))])])]),e("button",{type:"submit",disabled:v.value,class:"flex h-12 w-full items-center justify-center rounded-lg bg-blue-600 px-6 text-base font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500/50"},[v.value?(a(),i("span",Pc,[J($(Re),{class:"size-4 animate-spin"}),l[6]||(l[6]=we(" Đang đăng nhập... ",-1))])):(a(),i("span",Uc,"Đăng Nhập"))],8,Ic),y.value?(a(),i("p",Dc,A(y.value),1)):W("",!0)],32)])])])])]),l[8]||(l[8]=e("footer",{class:"flex justify-center p-4"},[e("p",{class:"text-sm text-gray-500"},"© 2024 VPS Manager. Đã đăng ký bản quyền.")],-1))]))}},Nc={class:"min-h-screen bg-gray-100"},Vc={class:"max-w-3xl mx-auto py-6 sm:px-6 lg:px-8"},Oc={class:"px-4 py-6 sm:px-0"},Bc={class:"bg-white rounded-lg shadow p-6"},Hc={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qc={class:"flex justify-end gap-3 mt-6"},Wc=["disabled"],Yc={key:0,class:"inline-flex items-center gap-2"},Kc={key:1},Xc={__name:"AdminProfile",setup(t){const s=ht(),c=m({ADMIN_NAME:"",ADMIN_EMAIL:"",ADMIN_USERNAME:"",ADMIN_PASSWORD:""}),g=m(!1),v=m(""),y=m("success"),f=async()=>{const w=(await z.get("/api/settings")).data||{};c.value.ADMIN_NAME=w.ADMIN_NAME||"",c.value.ADMIN_EMAIL=w.ADMIN_EMAIL||"",c.value.ADMIN_USERNAME=w.ADMIN_USERNAME||"",c.value.ADMIN_PASSWORD=w.ADMIN_PASSWORD||""},C=async()=>{var l,w;g.value=!0,v.value="";try{await z.put("/api/settings",c.value),v.value="Đã lưu, vui lòng đăng nhập lại",y.value="success",localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"],s.push("/login")}catch(P){v.value=((w=(l=P==null?void 0:P.response)==null?void 0:l.data)==null?void 0:w.error)||"Lưu thất bại",y.value="error"}finally{g.value=!1}},k=()=>{localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"],s.push("/login")};return Ze(f),(l,w)=>(a(),i("div",Nc,[e("div",Vc,[e("div",Oc,[e("div",Bc,[w[9]||(w[9]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Thông tin quản trị",-1)),e("form",{onSubmit:Be(C,["prevent"])},[e("div",Hc,[e("div",null,[w[4]||(w[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên",-1)),N(e("input",{"onUpdate:modelValue":w[0]||(w[0]=P=>c.value.ADMIN_NAME=P),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,c.value.ADMIN_NAME]])]),e("div",null,[w[5]||(w[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),N(e("input",{"onUpdate:modelValue":w[1]||(w[1]=P=>c.value.ADMIN_EMAIL=P),type:"email",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,c.value.ADMIN_EMAIL]])]),e("div",null,[w[6]||(w[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tài khoản",-1)),N(e("input",{"onUpdate:modelValue":w[2]||(w[2]=P=>c.value.ADMIN_USERNAME=P),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,c.value.ADMIN_USERNAME]])]),e("div",null,[w[7]||(w[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Mật khẩu",-1)),N(e("input",{"onUpdate:modelValue":w[3]||(w[3]=P=>c.value.ADMIN_PASSWORD=P),type:"password",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,c.value.ADMIN_PASSWORD]])])]),e("div",qc,[e("button",{type:"button",onClick:k,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Logout"),e("button",{type:"submit",disabled:g.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[g.value?(a(),i("span",Yc,[J($(Re),{class:"size-4 animate-spin"}),w[8]||(w[8]=we(" Đang lưu... ",-1))])):(a(),i("span",Kc,"Lưu"))],8,Wc)]),v.value?(a(),i("p",{key:0,class:Ie([y.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},A(v.value),3)):W("",!0)],32)])])])]))}},Jc={class:"min-h-screen bg-gray-100"},Gc={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Qc={class:"px-4 py-6 sm:px-0"},Zc={class:"flex justify-between items-center mb-6"},ep={class:"text-3xl font-bold text-gray-900"},tp={class:"flex items-center gap-2"},sp={class:"bg-white shadow rounded-lg p-6"},ap={key:0,class:"mb-3 flex items-center justify-between pb-3 border-b"},lp={class:"flex items-center gap-3"},op=["checked"],np={key:0,class:"flex items-center gap-2 ml-2 pl-2 border-l border-gray-300"},rp={class:"text-sm font-medium text-blue-900"},ip={key:0,class:"flex gap-2"},dp=["disabled"],up=["disabled"],cp=["disabled"],pp=["disabled"],mp={class:"space-y-4"},gp={class:"flex items-start gap-3"},vp=["value"],fp={class:"flex-1 flex justify-between items-start"},bp={class:"font-medium"},yp={class:"text-sm text-gray-500"},hp={class:"mt-2 flex items-center space-x-4 text-sm"},xp=["title"],wp={class:"flex gap-2"},_p=["onClick","disabled"],kp=["onClick","disabled"],$p=["onClick","disabled"],Cp=["href"],Sp=["onClick","disabled"],Tp={key:0,class:"text-center text-gray-500"},jp={class:"bg-white rounded-lg shadow-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Ep={class:"space-y-4"},Fp={key:0,class:"text-sm text-green-600 mt-2"},Ap={key:0,class:"border-t pt-4"},Lp={key:1,class:"border-t pt-4"},Rp={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Mp={class:"text-sm font-medium text-gray-700 w-32 shrink-0"},Ip=["onUpdate:modelValue"],Pp=["value"],Up={key:0,class:"bg-gray-50 rounded-md p-4 mt-4"},Dp={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs"},zp={class:"font-medium text-gray-600"},Np={class:"ml-2 text-gray-800"},Vp={class:"text-sm space-y-1"},Op={class:"text-green-600"},Bp={class:"text-gray-600"},Hp={key:0,class:"mt-2"},qp={class:"text-xs text-red-600 mt-1 max-h-32 overflow-y-auto"},Wp={class:"flex justify-end gap-3 pt-4 border-t"},Yp=["disabled"],Kp={__name:"SubdomainsManagement",setup(t){const c=pt().params.websiteId,g=m(""),v=m([]),y=m([]),f=m([]),C=m([]),k=m([]),l=m([]),w=m(!1),P=m(!1),Q=m(null),d=m(!1),ee=m(null),T=m([]),q=m("detail"),V={detail:{name:{label:"Title",jsonField:"name"},address:{label:"Địa điểm",jsonField:"address"},about:{label:"Giới thiệu",jsonField:"about"},images:{label:"Ảnh gallery",jsonField:"images"},facilities:{label:"Amenities",jsonField:"facilities"},faqs:{label:"FAQs",jsonField:"faqs"},houseRules:{label:"Useful Information",jsonField:"houseRules"}},blank:{name:{label:"Title",jsonField:"name"},content:{label:"Content",jsonField:"content"}},home:{name:{label:"Title",jsonField:"name"},about:{label:"About",jsonField:"about"},services:{label:"Services",jsonField:"services"},testimonials:{label:"Testimonials",jsonField:"testimonials"}},listing:{name:{label:"Title",jsonField:"name"},items:{label:"Items",jsonField:"items"},filters:{label:"Filters",jsonField:"filters"}}},h=m({name:{label:"Title",jsonField:"name"},address:{label:"Địa điểm",jsonField:"address"},about:{label:"Giới thiệu",jsonField:"about"},images:{label:"Ảnh gallery",jsonField:"images"},facilities:{label:"Amenities",jsonField:"facilities"},faqs:{label:"FAQs",jsonField:"faqs"},houseRules:{label:"Useful Information",jsonField:"houseRules"}}),x=Me(()=>h.value),O=Me(()=>v.value.length>0&&l.value.length===v.value.length),I=Me(()=>Q.value&&Q.value.length>0?Q.value[0]:null),K=Me(()=>Q.value&&Q.value.length>0&&h.value.name.jsonField),ae=()=>{O.value?l.value=[]:l.value=v.value.map(F=>F.id)},ve=async()=>{const F=await z.get(`/api/websites/${c}`);g.value=F.data.domain;const _=(await z.get("/api/websites")).data||[];v.value=_.filter(o=>o.domain.endsWith("."+g.value))};Ze(ve);const pe=async F=>{var u,_,o,b;try{y.value=[...y.value,F.id],await z.post(`/api/websites/${F.id}/deploy`);let j=0;for(;j<60&&(await new Promise(Y=>setTimeout(Y,2e3)),(await z.get(`/api/websites/${F.id}`)).data.status==="deploying");)j++;await ve(),alert(`✓ Deploy thành công cho ${F.domain}`)}catch(j){const S=((_=(u=j==null?void 0:j.response)==null?void 0:u.data)==null?void 0:_.message)||((b=(o=j==null?void 0:j.response)==null?void 0:o.data)==null?void 0:b.error)||"Deploy thất bại";alert(`✗ ${S}`)}finally{y.value=y.value.filter(j=>j!==F.id)}},Se=async F=>{if(confirm(`Delete subdomain ${F.domain}?`))try{f.value=[...f.value,F.id],await z.delete(`/api/websites/${F.id}`),await ve()}finally{f.value=f.value.filter(u=>u!==F.id)}},Ue=async F=>{var u,_,o,b;try{C.value=[...C.value,F.id],await z.post(`/api/websites/${F.id}/ssl`),await ve(),alert(`✓ SSL đã được cài đặt thành công cho ${F.domain}`)}catch(j){const S=((_=(u=j==null?void 0:j.response)==null?void 0:u.data)==null?void 0:_.message)||((b=(o=j==null?void 0:j.response)==null?void 0:o.data)==null?void 0:b.error)||"Cài đặt SSL thất bại";alert(`✗ ${S}`)}finally{C.value=C.value.filter(j=>j!==F.id)}},Ae=async F=>{if(confirm(`Deactivate subdomain ${F.domain}?`))try{k.value=[...k.value,F.id],await z.post(`/api/websites/${F.id}/deactivate`),await ve()}finally{k.value=k.value.filter(u=>u!==F.id)}},he=async()=>{var F,u;if(l.value.length!==0&&confirm(`Deploy ${l.value.length} subdomains?`))try{w.value=!0;const _=await z.post("/api/websites/bulk/deploy",{website_ids:l.value});l.value=[];const o=_.data.message||"Operations queued successfully";alert(`✓ ${o}

The page will refresh automatically to show progress.`),setTimeout(()=>{ve()},3e3)}catch(_){const o=((u=(F=_==null?void 0:_.response)==null?void 0:F.data)==null?void 0:u.message)||"Bulk deploy failed";alert(`✗ ${o}`)}finally{w.value=!1}},xe=async()=>{var F,u;if(l.value.length!==0&&confirm(`Install SSL for ${l.value.length} subdomains?`))try{w.value=!0;const _=await z.post("/api/websites/bulk/ssl",{website_ids:l.value});l.value=[];const o=_.data.message||"Operations queued successfully";alert(`✓ ${o}

The page will refresh automatically to show progress.`),setTimeout(()=>{ve()},3e3)}catch(_){const o=((u=(F=_==null?void 0:_.response)==null?void 0:F.data)==null?void 0:u.message)||"Bulk SSL installation failed";alert(`✗ ${o}`)}finally{w.value=!1}},Le=async()=>{var F,u;if(l.value.length!==0&&confirm(`Deactivate ${l.value.length} subdomains?`))try{w.value=!0;const _=await z.post("/api/websites/bulk/deactivate",{website_ids:l.value});l.value=[];const o=_.data.message||"Operations queued successfully";alert(`✓ ${o}

The page will refresh automatically to show progress.`),setTimeout(()=>{ve()},3e3)}catch(_){const o=((u=(F=_==null?void 0:_.response)==null?void 0:F.data)==null?void 0:u.message)||"Bulk deactivate failed";alert(`✗ ${o}`)}finally{w.value=!1}},ze=async()=>{var F,u;if(l.value.length!==0&&confirm(`DELETE ${l.value.length} subdomains? This action cannot be undone!`))try{w.value=!0;const _=await z.post("/api/websites/bulk/delete",{website_ids:l.value});l.value=[];const o=_.data.message||"Operations queued successfully";alert(`✓ ${o}

The page will refresh automatically to show progress.`),setTimeout(()=>{ve()},3e3)}catch(_){const o=((u=(F=_==null?void 0:_.response)==null?void 0:F.data)==null?void 0:u.message)||"Bulk delete failed";alert(`✗ ${o}`)}finally{w.value=!1}},Ne=F=>{const u=F.target.files[0];if(!u)return;const _=new FileReader;_.onload=o=>{try{const b=JSON.parse(o.target.result);let j=b;if(Array.isArray(b)&&b.length>0&&b[0].result&&(j=b.map(S=>S.result)),Q.value=j,ee.value=null,j.length>0){const S=j[0],Y=Object.keys(S);T.value=Y,Ve()}Qe.success(`Loaded ${j.length} items from file`)}catch(b){Qe.error("Invalid JSON file"),console.error(b)}},_.readAsText(u)},Ve=()=>{const F=V[q.value]||V.detail;h.value=JSON.parse(JSON.stringify(F));const u=T.value;if(q.value==="detail"){const _={name:u.find(o=>o.toLowerCase().includes("name")||o.toLowerCase().includes("title")),address:u.find(o=>o.toLowerCase().includes("address")||o.toLowerCase().includes("location")),about:u.find(o=>o.toLowerCase().includes("about")||o.toLowerCase().includes("description")),rating:u.find(o=>o.toLowerCase().includes("rating")||o.toLowerCase().includes("score")),images:u.find(o=>o.toLowerCase().includes("image")||o.toLowerCase().includes("photo")),facilities:u.find(o=>o.toLowerCase().includes("facilit")||o.toLowerCase().includes("amenity")),faqs:u.find(o=>o.toLowerCase().includes("faq")||o.toLowerCase().includes("question")),houseRules:u.find(o=>o.toLowerCase().includes("rule")||o.toLowerCase().includes("policy"))};Object.keys(_).forEach(o=>{_[o]&&h.value[o]&&(h.value[o].jsonField=_[o])})}else if(q.value==="blank"){const _={name:u.find(o=>o.toLowerCase().includes("name")||o.toLowerCase().includes("title")),content:u.find(o=>o.toLowerCase().includes("content")||o.toLowerCase().includes("description")||o.toLowerCase().includes("body"))};Object.keys(_).forEach(o=>{_[o]&&h.value[o]&&(h.value[o].jsonField=_[o])})}else if(q.value==="home"){const _={name:u.find(o=>o.toLowerCase().includes("name")||o.toLowerCase().includes("title")),about:u.find(o=>o.toLowerCase().includes("about")||o.toLowerCase().includes("description")),services:u.find(o=>o.toLowerCase().includes("service")),testimonials:u.find(o=>o.toLowerCase().includes("testimonial")||o.toLowerCase().includes("review"))};Object.keys(_).forEach(o=>{_[o]&&h.value[o]&&(h.value[o].jsonField=_[o])})}else if(q.value==="listing"){const _={name:u.find(o=>o.toLowerCase().includes("name")||o.toLowerCase().includes("title")),items:u.find(o=>o.toLowerCase().includes("item")||o.toLowerCase().includes("list")),filters:u.find(o=>o.toLowerCase().includes("filter")||o.toLowerCase().includes("category"))};Object.keys(_).forEach(o=>{_[o]&&h.value[o]&&(h.value[o].jsonField=_[o])})}},me=F=>{if(!I.value||!F)return"-";const u=I.value[F];return Array.isArray(u)?`${u.length} items`:typeof u=="object"&&u!==null?JSON.stringify(u).substring(0,50)+"...":String(u||"-").substring(0,100)},ne=()=>{P.value=!1,setTimeout(()=>{P.value||(Q.value=null,ee.value=null,T.value=[],q.value="detail")},300)},E=async()=>{var u,_,o,b;if(!Q.value||!g.value)return;d.value=!0,ee.value=null;const F={total:Q.value.length,created:0,skipped:0,errors:[]};try{const S=(await z.get(`/api/websites/${c}`)).data.vps_server_id;for(const Y of Q.value)try{const L={};Object.keys(h.value).forEach(U=>{const B=h.value[U].jsonField;B&&Y[B]!==void 0&&(L[U]=Y[B])});const p=L.name;if(!p){F.skipped++,F.errors.push({domain:"Unknown",error:"Missing title"});continue}const ce=`${p.toLowerCase().replace(/[àáạảãâầấậẩẫăằắặẳẵ]/g,"a").replace(/[èéẹẻẽêềếệểễ]/g,"e").replace(/[ìíịỉĩ]/g,"i").replace(/[òóọỏõôồốộổỗơờớợởỡ]/g,"o").replace(/[ùúụủũưừứựửữ]/g,"u").replace(/[ỳýỵỷỹ]/g,"y").replace(/đ/g,"d").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-")}.${g.value}`;if(v.value.some(U=>U.domain===ce)){F.skipped++,F.errors.push({domain:ce,error:"Subdomain already exists"});continue}const Te=(await z.post("/api/websites",{domain:ce,type:"laravel1",template_package:"laravel-hotel-1",vps_server_id:S})).data.id;await z.post(`/api/websites/${Te}/pages/import`,{data:[L],folder_ids:[],template_type:q.value}),F.created++}catch(L){F.skipped++,F.errors.push({domain:mapped.name||"Unknown",error:((_=(u=L.response)==null?void 0:u.data)==null?void 0:_.message)||L.message})}ee.value=F,Qe.success(`Import completed: ${F.created} subdomains created`),await ve()}catch(j){Qe.error("Import failed: "+(((b=(o=j.response)==null?void 0:o.data)==null?void 0:b.message)||j.message)),console.error(j)}finally{d.value=!1}};return(F,u)=>{const _=nt("router-link");return a(),i("div",Jc,[e("div",Gc,[e("div",Qc,[e("div",Zc,[e("h1",ep,"Subdomains of "+A(g.value),1),e("div",tp,[e("button",{onClick:u[0]||(u[0]=o=>P.value=!0),class:"px-4 py-2 border border-gray-300 rounded-md text-green-600 hover:bg-gray-50 flex items-center gap-2"},[...u[4]||(u[4]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),e("span",null,"Import",-1)])]),J(_,{to:`/websites/${$(c)}/subdomains/new`,class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"},{default:je(()=>[...u[5]||(u[5]=[we("Create Subdomain",-1)])]),_:1},8,["to"])])]),e("div",sp,[v.value.length>0?(a(),i("div",ap,[e("div",lp,[e("input",{type:"checkbox",checked:O.value,onChange:ae,class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,op),e("label",{class:"text-sm text-gray-700 font-medium cursor-pointer",onClick:ae},"Select All"),l.value.length>0?(a(),i("div",np,[e("span",rp,A(l.value.length)+" selected",1),e("button",{onClick:u[1]||(u[1]=o=>l.value=[]),class:"text-sm text-blue-600 hover:text-blue-800"},"Clear")])):W("",!0)]),l.value.length>0?(a(),i("div",ip,[e("button",{onClick:he,disabled:w.value,class:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-1"},[w.value?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(Nt),{key:1,class:"size-4"})),u[6]||(u[6]=we(" Deploy ",-1))],8,dp),e("button",{onClick:xe,disabled:w.value,class:"px-3 py-1.5 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 flex items-center gap-1"},[w.value?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(mt),{key:1,class:"size-4"})),u[7]||(u[7]=we(" SSL ",-1))],8,up),e("button",{onClick:Le,disabled:w.value,class:"px-3 py-1.5 text-sm bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:bg-gray-400 flex items-center gap-1"},[w.value?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(kt),{key:1,class:"size-4"})),u[8]||(u[8]=we(" Deactivate ",-1))],8,cp),e("button",{onClick:ze,disabled:w.value,class:"px-3 py-1.5 text-sm bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-1"},[w.value?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(ct),{key:1,class:"size-4"})),u[9]||(u[9]=we(" Delete ",-1))],8,pp)])):W("",!0)])):W("",!0),e("div",mp,[(a(!0),i(fe,null,be(v.value,o=>{var b;return a(),i("div",{key:o.id,class:"border rounded-lg p-4"},[e("div",gp,[N(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":u[2]||(u[2]=j=>l.value=j),class:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,8,vp),[[gt,l.value]]),e("div",fp,[e("div",null,[e("h4",bp,A(o.domain),1),e("p",yp,"Server: "+A(((b=o.vps_server)==null?void 0:b.name)||"N/A"),1),e("div",hp,[e("span",{class:Ie(["inline-flex items-center",{"text-blue-600":o.status==="deploying","text-green-600":o.status==="deployed","text-gray-600":o.status==="pending"||o.status==="draft","text-orange-600":o.status==="suspended","text-red-600":o.status==="error"}]),title:o.status},[o.status==="deploying"?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):o.status==="deployed"?(a(),de($(Ct),{key:1,class:"size-4"})):o.status==="pending"||o.status==="draft"?(a(),de($(At),{key:2,class:"size-4"})):o.status==="suspended"?(a(),de($(kt),{key:3,class:"size-4"})):(a(),de($(St),{key:4,class:"size-4"}))],10,xp),e("span",{class:Ie(["inline-flex items-center gap-1",o.ssl_enabled?"text-green-600":"text-gray-400"])},[o.ssl_enabled?(a(),de($(mt),{key:0,class:"size-4"})):(a(),de($(ms),{key:1,class:"size-4"}))],2)])]),e("div",wp,[J(_,{to:`/websites/${o.id}/pages`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:je(()=>[J($(gs),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:j=>pe(o),disabled:y.value.includes(o.id)||o.status==="deployed",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[y.value.includes(o.id)?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(Nt),{key:1,class:"size-4"}))],8,_p),o.status==="deployed"?(a(),i("button",{key:0,onClick:j=>Ue(o),disabled:C.value.includes(o.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[C.value.includes(o.id)?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(mt),{key:1,class:"size-4"}))],8,kp)):W("",!0),o.status==="deployed"||o.status==="error"?(a(),i("button",{key:1,onClick:j=>Ae(o),disabled:k.value.includes(o.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[k.value.includes(o.id)?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(kt),{key:1,class:"size-4"}))],8,$p)):W("",!0),e("a",{href:(o.ssl_enabled?"https://":"http://")+o.domain,target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[J($(vt),{class:"size-4"})],8,Cp),e("button",{onClick:j=>Se(o),disabled:f.value.includes(o.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[f.value.includes(o.id)?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):(a(),de($(ct),{key:1,class:"size-4"}))],8,Sp)])])])])}),128)),v.value.length===0?(a(),i("div",Tp,"No subdomains found")):W("",!0)])]),P.value?(a(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:Be(ne,["self"])},[e("div",jp,[e("div",{class:"flex justify-between items-center mb-4"},[u[11]||(u[11]=e("h2",{class:"text-xl font-bold"},"Import Subdomains from JSON",-1)),e("button",{onClick:ne,class:"text-gray-500 hover:text-gray-700"},[...u[10]||(u[10]=[e("svg",{viewBox:"0 0 24 24",class:"size-6",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18"}),e("path",{d:"M6 6l12 12"})],-1)])])]),e("div",Ep,[e("div",null,[u[12]||(u[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"1"),we(" Upload JSON File ")])],-1)),e("input",{type:"file",onChange:Ne,accept:".json",class:"block w-full text-sm text-gray-500 cursor-pointer file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 file:cursor-pointer"},null,32),Q.value?(a(),i("p",Fp,"✓ Loaded "+A(Q.value.length)+" items",1)):W("",!0),u[13]||(u[13]=e("p",{class:"text-xs text-gray-500 mt-1"},"Each item will create a new subdomain with initial page",-1))]),Q.value?(a(),i("div",Ap,[u[15]||(u[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"2"),we(" Select Template Type ")])],-1)),N(e("select",{"onUpdate:modelValue":u[3]||(u[3]=o=>q.value=o),onChange:Ve,class:"w-full md:w-1/2 border-gray-300 rounded-md text-sm cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400"},[...u[14]||(u[14]=[e("option",{value:"detail"},"Hotel Detail",-1),e("option",{value:"blank"},"Blank (HTML)",-1),e("option",{value:"home"},"Home Page",-1),e("option",{value:"listing"},"Listing Page",-1)])],544),[[We,q.value]]),u[16]||(u[16]=e("p",{class:"text-xs text-gray-500 mt-1"},"Select which template to use for imported pages",-1))])):W("",!0),Q.value&&T.value.length>0?(a(),i("div",Lp,[u[19]||(u[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"3"),we(" Map JSON Fields to Page Template Fields ")])],-1)),e("div",Rp,[(a(!0),i(fe,null,be(x.value,(o,b)=>(a(),i("div",{key:b,class:"flex items-center gap-3"},[e("label",Mp,A(o.label)+":",1),N(e("select",{"onUpdate:modelValue":j=>o.jsonField=j,class:"flex-1 text-sm border-gray-300 rounded-md cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 transition-colors"},[u[17]||(u[17]=e("option",{value:null},"-- Skip --",-1)),(a(!0),i(fe,null,be(T.value,j=>(a(),i("option",{key:j,value:j},A(j),9,Pp))),128))],8,Ip),[[We,o.jsonField]])]))),128))]),I.value?(a(),i("div",Up,[u[18]||(u[18]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-2"},"Preview (First Item):",-1)),e("div",Dp,[(a(!0),i(fe,null,be(x.value,(o,b)=>N((a(),i("div",{key:b},[e("span",zp,A(o.label)+":",1),e("span",Np,A(me(o.jsonField)),1)])),[[rs,o.jsonField]])),128))])])):W("",!0)])):W("",!0),ee.value?(a(),i("div",{key:2,class:Ie(["p-4 rounded-md border-t pt-4",ee.value.errors.length>0?"bg-yellow-50":"bg-green-50"])},[u[21]||(u[21]=e("p",{class:"font-medium mb-2"},"Import Results:",-1)),e("ul",Vp,[e("li",null,"Total: "+A(ee.value.total),1),e("li",Op,"Created: "+A(ee.value.created),1),e("li",Bp,"Skipped: "+A(ee.value.skipped),1)]),ee.value.errors.length>0?(a(),i("div",Hp,[u[20]||(u[20]=e("p",{class:"text-sm font-medium text-red-600"},"Errors:",-1)),e("ul",qp,[(a(!0),i(fe,null,be(ee.value.errors,(o,b)=>(a(),i("li",{key:b},A(o.domain)+": "+A(o.error),1))),128))])])):W("",!0)],2)):W("",!0),e("div",Wp,[e("button",{onClick:ne,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},A(ee.value?"Close":"Cancel"),1),ee.value?W("",!0):(a(),i("button",{key:0,onClick:E,disabled:!K.value||d.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2"},[d.value?(a(),de($(Re),{key:0,class:"size-4 animate-spin"})):W("",!0),e("span",null,A(d.value?"Importing...":"Import Subdomains"),1)],8,Yp))])])])])):W("",!0)])])])}}},Xp="modulepreload",Jp=function(t){return"/"+t},os={},it=function(s,c,g){let v=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),C=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));v=Promise.allSettled(c.map(k=>{if(k=Jp(k),k in os)return;os[k]=!0;const l=k.endsWith(".css"),w=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${k}"]${w}`))return;const P=document.createElement("link");if(P.rel=l?"stylesheet":Xp,l||(P.as="script"),P.crossOrigin="",P.href=k,C&&P.setAttribute("nonce",C),document.head.appendChild(P),l)return new Promise((Q,d)=>{P.addEventListener("load",Q),P.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${k}`)))})}))}function y(f){const C=new Event("vite:preloadError",{cancelable:!0});if(C.payload=f,window.dispatchEvent(C),!C.defaultPrevented)throw f}return v.then(f=>{for(const C of f||[])C.status==="rejected"&&y(C.reason);return s().catch(y)})},Gp={class:"min-h-screen bg-gray-100"},Qp={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},Zp={class:"px-4 py-6 sm:px-0"},em={class:"bg-white rounded-lg shadow p-6"},tm={class:"text-sm text-gray-600 mb-4"},sm={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},am={class:"text-xs text-gray-500 mt-1"},lm={class:"md:col-span-2"},om=["value"],nm={class:"mt-4"},rm={key:0,class:"mt-4"},im={class:"flex items-center justify-between mb-2"},dm={class:"flex items-center gap-3"},um={class:"border border-gray-300 rounded-md p-3 max-h-48 overflow-auto"},cm={key:0,class:"text-sm text-gray-500"},pm={key:1,class:"space-y-2"},mm=["value","onChange"],gm={class:"mt-6"},vm={key:0,class:"mt-4 space-y-4"},fm={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bm={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},ym={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},hm=["value"],xm={class:"text-sm"},wm={class:"space-y-3"},_m={class:"flex items-center gap-2"},km={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},$m=["onClick"],Cm=["onUpdate:modelValue"],Sm=["onUpdate:modelValue"],Tm={class:"space-y-3"},jm={class:"flex items-center gap-2"},Em={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},Fm=["onClick"],Am=["onUpdate:modelValue"],Lm=["onUpdate:modelValue"],Rm={key:1,class:"mt-4"},Mm={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Im={class:"flex justify-end gap-3 mt-6"},Pm=["disabled"],Um={key:0,class:"inline-flex items-center gap-2"},Dm={key:1},zm={__name:"SubdomainEdit",setup(t){const s=pt(),c=ht(),g=s.params.websiteId,v=m(""),y=m(null),f=m([]),C=m([]),k=m(!1);m(""),m(""),m(null),m(!1);const l=m([]),w=m({sub:"",vps_server_id:""}),P=m("blank"),Q=m(""),d=m({title:"",location:"",phone:"",galleryRaw:"",about1:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),ee=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],T=m(null),q=m(null),V=m(!1),h=m(""),x=m(""),O=ne=>ne.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"d").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),I=Me(()=>O(w.value.sub||"")),K=Me(()=>(I.value?`${I.value}.`:"")+v.value),ae=Me(()=>{const E=(Q.value||"").split(`
`).length;return E>0?E:1}),ve=Me(()=>{const ne=[...C.value||[]],E=new Map(ne.map(S=>[String(S.id),S])),F=S=>S.sort((Y,L)=>(Y.name||"").localeCompare(L.name||"")),u=S=>ne.filter(Y=>String(Y.parent_id)===String(S)),_=S=>!S.parent_id||!E.has(String(S.parent_id))||String(S.parent_id)===String(S.id),o=F(ne.filter(_)),b=[],j=(S,Y)=>{b.push({...S,depth:Y}),F(u(S.id)).forEach(L=>j(L,Y+1))};return o.forEach(S=>j(S,0)),b}),pe=ne=>{if(l.value.includes(ne)){const E=C.value.find(F=>F.id===ne);if(E&&E.parent_id){const F=u=>{if(!u)return;l.value.includes(u)||l.value.push(u);const _=C.value.find(o=>o.id===u);_&&_.parent_id&&F(_.parent_id)};F(E.parent_id)}}},Se=()=>{T.value&&q.value&&(T.value.scrollTop=q.value.scrollTop)},Ue=async()=>{const ne=(d.value.galleryRaw||"").split(`
`).map(p=>p.trim()).filter(Boolean),E=(d.value.title||"").trim(),F=["Home","Stays",E];let _=(await z.get("/templates/laravel-hotel-1/detail/index.html")).data||"",o="",b="";try{o=(await z.get("/templates/_shared/header.html")).data||""}catch{}try{b=(await z.get("/templates/_shared/footer.html")).data||""}catch{}o&&(_=_.replace(/<header[^>]*>[\s\S]*?<\/header>/i,o)),b&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(_)?_=_.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,b):/<\/body>/i.test(_)?_=_.replace(/<\/body>/i,b+"</body>"):_+=`
`+b);const j=d.value.amenities||[],S=ne.map(p=>String(p).replace(/<\/script>/gi,"<\\/script>")),Y={title:E||"Hotel",location:d.value.location||"",location_text:d.value.location||"",phone:d.value.phone||"",about1:d.value.about1||"",amenities:j,faqs:d.value.faqs||[],info:d.value.info||[],gallery:S,breadcrumb_items:F.filter(Boolean)},L=`<script type="application/json" id="page-data">${JSON.stringify(Y)}<\/script>`;return _=_.replace("{{GALLERY_DATA_SCRIPT}}",L),_=_.replace(/<title>[^<]*<\/title>/i,`<title>${Y.title}</title>`),_},Ae=()=>{d.value.faqs=[...d.value.faqs||[],{q:"",a:""}]},he=()=>{d.value.info=[...d.value.info||[],{subject:"",description:""}]},xe=ne=>{d.value.faqs=(d.value.faqs||[]).filter((E,F)=>F!==ne)},Le=ne=>{d.value.info=(d.value.info||[]).filter((E,F)=>F!==ne)},ze=async()=>{var ne,E,F,u,_,o,b,j,S,Y,L,p,te,ce,ue,re;V.value=!0,h.value="";try{const Te="Stays",U=w.value.vps_server_id;if(!U){h.value="Chưa chọn VPS Server",x.value="error",V.value=!1;return}const B={domain:K.value,type:((ne=y.value)==null?void 0:ne.type)||"html",vps_server_id:U};((E=y.value)==null?void 0:E.type)==="laravel1"&&(B.template_package="laravel-hotel-1");let r;try{r=(await z.post("/api/websites",B)).data}catch(X){const ie=((u=(F=X==null?void 0:X.response)==null?void 0:F.data)==null?void 0:u.message)||((o=(_=X==null?void 0:X.response)==null?void 0:_.data)==null?void 0:o.error)||"";if(((b=X==null?void 0:X.response)==null?void 0:b.status)===409||/domain/i.test(ie)){if(r=((await z.get("/api/websites")).data||[]).find(se=>se.domain===K.value),!r)throw X}else throw X}let D,le=null;if(P.value==="blank")D=Q.value;else{D=await Ue();const X=(d.value.galleryRaw||"").split(`
`).map(ie=>ie.trim()).filter(Boolean);le={title:(d.value.title||"").trim()||"Hotel",location:d.value.location||"",location_text:d.value.location||"",phone:d.value.phone||"",about1:d.value.about1||"",amenities:d.value.amenities||[],faqs:d.value.faqs||[],info:d.value.info||[],gallery:X,breadcrumb_items:["Home","Stays",(d.value.title||"").trim()].filter(Boolean)}}const R={path:"/",filename:"index.html",title:P.value==="blank"?d.value.title||"":d.value.title,content:D};P.value!=="blank"&&(R.template_type=P.value,R.template_data=le),l.value.length>0&&(R.folder_ids=l.value);try{await z.post(`/api/websites/${r.id}/pages`,R)}catch(X){const ie=((S=(j=X==null?void 0:X.response)==null?void 0:j.data)==null?void 0:S.message)||((L=(Y=X==null?void 0:X.response)==null?void 0:Y.data)==null?void 0:L.error)||"";if(((p=X==null?void 0:X.response)==null?void 0:p.status)===409||/path/i.test(ie)){const se=((await z.get(`/api/websites/${r.id}/pages`)).data||[]).find($e=>($e.path||"/")==="/"&&($e.filename||"").toLowerCase()==="index.html");se&&await z.put(`/api/pages/${se.id}`,R)}else if(/Failed to write page/i.test(ie)){const De=`subdomainDraft:${r.id}`;localStorage.setItem(De,JSON.stringify(R))}}h.value="Subdomain created. Deploy to go online.",x.value="success",c.push(`/websites/${g}/subdomains`)}catch(Te){h.value=((ce=(te=Te==null?void 0:Te.response)==null?void 0:te.data)==null?void 0:ce.message)||((re=(ue=Te==null?void 0:Te.response)==null?void 0:ue.data)==null?void 0:re.error)||"Failed to create subdomain",x.value="error"}finally{V.value=!1}},Ne=async()=>{var F;const ne=await z.get(`/api/websites/${g}`);y.value=ne.data,v.value=y.value.domain;const E=await z.get("/api/vps");f.value=E.data.filter(u=>u.status==="active"),(F=y.value)!=null&&F.vps_server_id&&(w.value.vps_server_id=y.value.vps_server_id);try{const u=await z.get(`/api/websites/${g}/folders`);C.value=u.data||[]}catch(u){console.error("Failed to load folders:",u)}},Ve=async()=>{if(window.tinymce)return;const{default:ne}=await it(async()=>{const{default:E}=await import("./tinymce.js").then(F=>F.t);return{default:E}},[]);await it(()=>import("./index.js").then(E=>E.i),[]),await it(()=>import("./index2.js").then(E=>E.i),[]),await it(()=>import("./model.js"),[]),await it(()=>import("./skin.js"),[]),await it(()=>import("./content.js"),[]),await it(()=>import("./content2.js"),[]),await it(()=>import("./index3.js").then(E=>E.i),[]),await it(()=>import("./index4.js").then(E=>E.i),[]),window.tinymce=ne},me=async()=>{await Ve(),await zt();const ne=document.getElementById("about1-editor-sub");ne&&(ne.value=d.value.about1||"",window.tinymce.init({selector:"#about1-editor-sub",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:E=>{E.on("Change KeyUp SetContent",()=>{d.value.about1=E.getContent()||""})}}).then(E=>{const F=E&&E[0];F&&(d.value.about1||"").trim()&&F.setContent(d.value.about1)}))};return Ze(async()=>{await Ne(),P.value==="detail"&&await me()}),_t(P,async ne=>{if(ne==="detail")await me();else if(window.tinymce){const E=window.tinymce.get("about1-editor-sub");E&&E.remove()}}),Ht(()=>{if(window.tinymce){const ne=window.tinymce.get("about1-editor-sub");ne&&ne.remove()}}),(ne,E)=>{const F=nt("router-link");return a(),i("div",Gp,[e("div",Qp,[e("div",Zp,[e("div",em,[E[32]||(E[32]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Create Subdomain",-1)),e("p",tm,"Parent: "+A(v.value),1),e("form",{onSubmit:Be(ze,["prevent"])},[e("div",sm,[e("div",null,[E[11]||(E[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Subdomain",-1)),N(e("input",{"onUpdate:modelValue":E[0]||(E[0]=u=>w.value.sub=u),type:"text",required:"",placeholder:"hotel",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,w.value.sub]]),e("p",am,"Sẽ tạo domain: "+A(K.value),1)]),e("div",lm,[E[13]||(E[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),N(e("select",{"onUpdate:modelValue":E[1]||(E[1]=u=>w.value.vps_server_id=u),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[E[12]||(E[12]=e("option",{value:""},"Select VPS Server",-1)),(a(!0),i(fe,null,be(f.value,u=>(a(),i("option",{value:u.id,key:u.id},A(u.name)+" ("+A(u.ip_address)+")",9,om))),128))],512),[[We,w.value.vps_server_id]])])]),e("div",nm,[E[15]||(E[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),N(e("select",{"onUpdate:modelValue":E[2]||(E[2]=u=>P.value=u),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...E[14]||(E[14]=[e("option",{value:"blank"},"HTML mặc định",-1),e("option",{value:"detail"},"Hotel Detail",-1)])],512),[[We,P.value]])]),P.value==="detail"?(a(),i("div",rm,[e("div",im,[E[17]||(E[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Danh mục (chọn nhiều)",-1)),e("div",dm,[J(F,{to:`/websites/${$(g)}/folders`,class:"text-sm text-primary"},{default:je(()=>[...E[16]||(E[16]=[we("Quản lý danh mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:E[3]||(E[3]=u=>k.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",um,[C.value.length===0?(a(),i("div",cm,"Không có danh mục")):(a(),i("div",pm,[(a(!0),i(fe,null,be(ve.value,u=>(a(),i("label",{key:u.id,class:"flex items-center gap-2 cursor-pointer"},[N(e("input",{type:"checkbox",value:u.id,"onUpdate:modelValue":E[4]||(E[4]=_=>l.value=_),onChange:_=>pe(u.id),class:"rounded cursor-pointer"},null,40,mm),[[gt,l.value]]),e("span",{class:"text-sm",style:ot({paddingLeft:(u.depth>0?u.depth*16:0)+"px"})},A("↳ ".repeat(u.depth))+A(u.name),5)]))),128))]))])])):W("",!0),e("div",gm,[E[29]||(E[29]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Nội dung template",-1)),P.value==="detail"?(a(),i("div",vm,[e("div",fm,[e("div",null,[E[18]||(E[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề khách sạn",-1)),N(e("input",{"onUpdate:modelValue":E[5]||(E[5]=u=>d.value.title=u),type:"text",placeholder:"Azure Breeze Resort",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,d.value.title]])]),e("div",null,[E[19]||(E[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),N(e("input",{"onUpdate:modelValue":E[6]||(E[6]=u=>d.value.location=u),type:"text",placeholder:"Sunny Isles, Florida, United States",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,d.value.location]])]),e("div",null,[E[20]||(E[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),N(e("input",{"onUpdate:modelValue":E[7]||(E[7]=u=>d.value.phone=u),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,d.value.phone]])])]),e("div",null,[E[21]||(E[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),N(e("textarea",{"onUpdate:modelValue":E[8]||(E[8]=u=>d.value.galleryRaw=u),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,d.value.galleryRaw]])]),E[27]||(E[27]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor-sub",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[E[22]||(E[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",bm,[e("div",ym,[(a(),i(fe,null,be(ee,u=>e("label",{key:u,class:"inline-flex items-center gap-2 cursor-pointer"},[N(e("input",{type:"checkbox",value:u,"onUpdate:modelValue":E[9]||(E[9]=_=>d.value.amenities=_),class:"rounded cursor-pointer border-gray-300"},null,8,hm),[[gt,d.value.amenities]]),e("span",xm,A(u),1)])),64))])])]),e("div",wm,[e("div",{class:"flex items-center justify-between"},[E[23]||(E[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:he,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(a(!0),i(fe,null,be(d.value.info,(u,_)=>(a(),i("div",{key:_,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",_m,[e("span",km,A(_+1),1),E[24]||(E[24]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:o=>Le(_),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,$m)]),N(e("input",{"onUpdate:modelValue":o=>u.subject=o,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Cm),[[oe,u.subject]]),N(e("textarea",{"onUpdate:modelValue":o=>u.description=o,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Sm),[[oe,u.description]])]))),128))]),e("div",Tm,[e("div",{class:"flex items-center justify-between"},[E[25]||(E[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:Ae,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(a(!0),i(fe,null,be(d.value.faqs,(u,_)=>(a(),i("div",{key:_,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",jm,[e("span",Em,A(_+1),1),E[26]||(E[26]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:o=>xe(_),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,Fm)]),N(e("input",{"onUpdate:modelValue":o=>u.q=o,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Am),[[oe,u.q]]),N(e("textarea",{"onUpdate:modelValue":o=>u.a=o,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Lm),[[oe,u.a]])]))),128))])])):P.value==="blank"?(a(),i("div",Rm,[E[28]||(E[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),e("div",Mm,[e("div",{ref_key:"gutterRef",ref:T,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(a(!0),i(fe,null,be(ae.value,u=>(a(),i("div",{key:u,class:"px-2 text-xs text-gray-500 leading-6"},A(u),1))),128))],512),N(e("textarea",{ref_key:"codeRef",ref:q,"onUpdate:modelValue":E[10]||(E[10]=u=>Q.value=u),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:Se},null,544),[[oe,Q.value]])])])):W("",!0)]),e("div",Im,[J(F,{to:`/websites/${$(g)}/subdomains`,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:je(()=>[...E[30]||(E[30]=[we("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:V.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[V.value?(a(),i("span",Um,[J($(Re),{class:"size-4 animate-spin"}),E[31]||(E[31]=we(" Creating... ",-1))])):(a(),i("span",Dm,"Create Subdomain"))],8,Pm)]),h.value?(a(),i("p",{key:1,class:Ie([x.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},A(h.value),3)):W("",!0)],32)])])])])}}},Nm=[{path:"/login",name:"Login",component:zc},{path:"/",name:"Dashboard",component:ya},{path:"/vps",name:"VpsManagement",component:Xa},{path:"/websites",name:"WebsiteManagement",component:so},{path:"/websites/:websiteId/settings",name:"WebsiteSettings",component:qn},{path:"/websites/:websiteId/pages",name:"PagesManagement",component:_u},{path:"/websites/:websiteId/pages/new",name:"PageCreate",component:ls},{path:"/websites/:websiteId/pages/:pageId",name:"PageEdit",component:ls},{path:"/websites/:websiteId/folders",name:"FoldersManagement",component:Yi},{path:"/websites/:websiteId/folders/new",name:"FolderCreate",component:as},{path:"/websites/:websiteId/folders/:folderId",name:"FolderEdit",component:as},{path:"/websites/:websiteId/subdomains",name:"SubdomainsManagement",component:Kp},{path:"/websites/:websiteId/subdomains/new",name:"SubdomainEdit",component:zm},{path:"/profile",name:"AdminProfile",component:Xc},{path:"/monitoring",name:"Monitoring",component:fi},{path:"/settings",name:"Settings",component:Ed}],Lt=js({history:Es(),routes:Nm}),ns=localStorage.getItem("adminToken");ns&&(z.defaults.headers.common["X-Admin-Token"]=ns);z.interceptors.response.use(t=>t,t=>{var c;if(((c=t==null?void 0:t.response)==null?void 0:c.status)===401){try{localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"]}catch{}Lt.currentRoute.value.path!=="/login"&&Lt.push("/login")}return Promise.reject(t)});Lt.beforeEach((t,s,c)=>{const g=!!localStorage.getItem("adminToken");if(!g&&t.path!=="/login")return c("/login");if(g&&t.path==="/login")return c("/");c()});Fs(Zs).use(Lt).mount("#app");export{fs as g};
