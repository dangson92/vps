import{u as pt,a as wt,r as nt,c,o as n,b as w,d as N,e,f as Tt,w as _e,n as je,g as z,i as g,j as et,t as L,k as Z,F as he,l as we,m as Ve,p as F,v as Q,q as Je,s as de,x as ke,y as Bt,z as lt,A as qe,B as kt,C as Nt,D as At,E as Cs,G as Ts,H as Es,I as Rs}from"./vendor.js";import{L as ns,S as rs,G as gt,B as is,U as As,a as ds,b as Ms,c as xt,C as St,A as Ct,d as Mt,P as us,T as vt,e as Be,f as jt,g as cs,F as ps,h as js,i as ms,R as Ps,I as Ut,j as Ft,k as Ls,l as Is,m as Us,E as zt,n as Xt,o as Fs,p as gs,q as Ds,r as Ns,s as zs,t as Vs}from"./icons.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const v of p)if(v.type==="childList")for(const m of v.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&d(m)}).observe(document,{childList:!0,subtree:!0});function r(p){const v={};return p.integrity&&(v.integrity=p.integrity),p.referrerPolicy&&(v.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?v.credentials="include":p.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function d(p){if(p.ep)return;p.ep=!0;const v=r(p);fetch(p.href,v)}})();const Os={id:"app"},Bs={key:0,class:"min-h-screen"},Hs={key:1,class:"relative flex min-h-screen w-full bg-background-light"},qs={class:"flex w-64 flex-col border-r border-gray-200 bg-white p-4"},Ws={class:"flex flex-col gap-2"},Ys={class:"flex-1"},Ks={class:"flex items-center justify-between border-b border-gray-200 px-10 py-4 bg-white"},Xs={class:"flex items-center gap-4"},Gs={class:"h-10 w-10 rounded-lg border border-gray-300 bg-gray-50 text-gray-800"},Qs={class:"p-6 lg:p-10"},Js={__name:"App",setup(t){const s=pt(),r=wt(),d=()=>{localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"],r.push("/login")};return(p,v)=>{const m=nt("router-view"),x=nt("router-link");return n(),c("div",Os,[w(s).path==="/login"?(n(),c("div",Bs,[N(m)])):(n(),c("div",Hs,[e("aside",qs,[v[6]||(v[6]=Tt('<div class="flex items-center gap-3 mb-4"><div class="rounded-full size-10 bg-primary/10"></div><div class="flex flex-col"><h1 class="text-gray-900 text-base font-medium">Admin User</h1><p class="text-gray-500 text-sm">admin@vps.com</p></div></div>',1)),e("nav",Ws,[N(x,{to:"/",class:je(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":w(s).path==="/","hover:bg-gray-100 text-gray-800":w(s).path!=="/"}])},{default:_e(()=>[N(w(ns),{class:"size-4"}),v[0]||(v[0]=e("span",null,"Dashboard",-1))]),_:1},8,["class"]),N(x,{to:"/vps",class:je(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":w(s).path.startsWith("/vps"),"hover:bg-gray-100 text-gray-800":!w(s).path.startsWith("/vps")}])},{default:_e(()=>[N(w(rs),{class:"size-4"}),v[1]||(v[1]=e("span",null,"Servers",-1))]),_:1},8,["class"]),N(x,{to:"/websites",class:je(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":w(s).path.startsWith("/websites"),"hover:bg-gray-100 text-gray-800":!w(s).path.startsWith("/websites")}])},{default:_e(()=>[N(w(gt),{class:"size-4"}),v[2]||(v[2]=e("span",null,"Websites",-1))]),_:1},8,["class"]),N(x,{to:"/monitoring",class:je(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":w(s).path.startsWith("/monitoring"),"hover:bg-gray-100 text-gray-800":!w(s).path.startsWith("/monitoring")}])},{default:_e(()=>[N(w(is),{class:"size-4"}),v[3]||(v[3]=e("span",null,"Monitoring",-1))]),_:1},8,["class"]),N(x,{to:"/profile",class:je(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":w(s).path.startsWith("/profile"),"hover:bg-gray-100 text-gray-800":!w(s).path.startsWith("/profile")}])},{default:_e(()=>[N(w(As),{class:"size-4"}),v[4]||(v[4]=e("span",null,"Profile",-1))]),_:1},8,["class"]),N(x,{to:"/settings",class:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-800 hover:bg-gray-100"},{default:_e(()=>[N(w(ds),{class:"size-4"}),v[5]||(v[5]=e("span",null,"Settings",-1))]),_:1})])]),e("main",Ys,[e("header",Ks,[v[8]||(v[8]=e("h2",{class:"text-lg font-bold"},"Tổng quan Hệ thống",-1)),e("div",Xs,[v[7]||(v[7]=e("input",{class:"form-input h-10 w-64 rounded-lg border border-gray-300 bg-gray-50 px-4",placeholder:"Search"},null,-1)),e("button",Gs,[N(w(Ms),{class:"mx-auto size-5"})]),e("button",{onClick:d,class:"h-10 px-3 rounded-lg border border-gray-300 bg-white text-red-600"}," Logout ")])]),e("div",Qs,[N(m)])])]))])}}},Zs={class:"min-h-screen"},ea={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ta={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},sa={class:"p-6 bg-white border-b border-gray-200"},aa={class:"rounded-xl bg-gray-50 p-6 border border-gray-200"},oa={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},la={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},na={class:"flex items-center justify-between text-gray-500"},ra={class:"text-gray-900 tracking-tight text-3xl font-bold"},ia={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},da={class:"flex items-center justify-between text-gray-500"},ua={class:"text-gray-900 tracking-tight text-3xl font-bold"},ca={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},pa={class:"flex items-center justify-between text-gray-500"},ma={class:"text-red-500 tracking-tight text-3xl font-bold"},ga={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},va={class:"flex items-center justify-between text-gray-500"},fa={class:"text-gray-900 tracking-tight text-3xl font-bold"},ba={__name:"Dashboard",setup(t){const s=g({vpsServers:0,websites:0,onlineWebsites:0,sslEnabled:0});return et(async()=>{try{const[d,p]=await Promise.all([z.get("/api/vps"),z.get("/api/websites")]),v=Array.isArray(d.data)?d.data:[],m=Array.isArray(p.data)?p.data:[];s.value.vpsServers=v.length,s.value.websites=m.length,s.value.onlineWebsites=m.filter(x=>x.status==="deployed").length,s.value.sslEnabled=m.filter(x=>x.ssl_enabled).length}catch(d){console.error("Failed to fetch stats:",d)}}),(d,p)=>(n(),c("div",Zs,[e("main",null,[e("div",ea,[e("div",ta,[e("div",sa,[p[4]||(p[4]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Tổng quan Hệ thống",-1)),e("div",aa,[e("div",oa,[e("div",la,[e("div",na,[p[0]||(p[0]=e("p",{class:"text-base font-medium text-gray-800"},"Máy chủ VPS",-1)),N(w(rs),{class:"h-6 w-6 text-gray-600"})]),e("p",ra,L(s.value.vpsServers),1)]),e("div",ia,[e("div",da,[p[1]||(p[1]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web",-1)),N(w(gt),{class:"h-6 w-6 text-gray-600"})]),e("p",ua,L(s.value.websites),1)]),e("div",ca,[e("div",pa,[p[2]||(p[2]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web trực tuyến",-1)),N(w(is),{class:"h-6 w-6 text-red-500"})]),e("p",ma,L(s.value.onlineWebsites),1)]),e("div",ga,[e("div",va,[p[3]||(p[3]=e("p",{class:"text-base font-medium text-gray-800"},"SSL được bật",-1)),N(w(xt),{class:"h-6 w-6 text-gray-600"})]),e("p",fa,L(s.value.sslEnabled),1)])])]),p[5]||(p[5]=Tt('<h2 class="text-gray-900 text-[22px] font-bold tracking-[-0.015em] pb-3 pt-10">Hoạt động gần đây</h2><div class="rounded-xl border border-gray-200 bg-white overflow-hidden"><table class="w-full"><thead><tr class="bg-gray-50"><th class="px-6 py-4 text-left text-gray-600 w-[15%] text-sm font-medium">Hoạt động</th><th class="px-6 py-4 text-left text-gray-600 w-[20%] text-sm font-medium">Người dùng</th><th class="px-6 py-4 text-left text-gray-600 w-[40%] text-sm font-medium">Đối tượng</th><th class="px-6 py-4 text-left text-gray-600 w-[25%] text-sm font-medium">Thời gian</th></tr></thead><tbody class="divide-y divide-gray-200"><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-700">Tạo</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">admin</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;web-server-01&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">5 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700">Thêm</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">hệ thống</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">trang web &#39;example.com&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">15 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-yellow-100 px-3 py-1 text-xs font-medium text-yellow-800">Khởi động lại</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">dev_user</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;db-server-02&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">1 giờ trước</td></tr></tbody></table></div>',2))])])])])]))}},ya={class:"min-h-screen bg-gray-100"},ha={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},xa={class:"px-4 py-6 sm:px-0"},wa={class:"flex justify-between items-center mb-6"},_a={class:"bg-white shadow overflow-hidden sm:rounded-md"},ka={class:"divide-y divide-gray-200"},$a={class:"flex items-center justify-between"},Sa={class:"flex-1"},Ca={class:"text-lg font-medium text-gray-900"},Ta={class:"text-sm text-gray-500"},Ea={class:"mt-2 flex items-center space-x-4 text-sm text-gray-500"},Ra={class:"flex items-center space-x-2"},Aa=["onClick"],Ma=["onClick"],ja={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},Pa={class:"bg-white rounded-lg p-6 w-full max-w-md"},La={class:"text-lg font-medium text-gray-900 mb-4"},Ia={class:"mb-4"},Ua={class:"mb-4"},Fa={class:"mb-4"},Da={class:"mb-4"},Na={class:"mb-4"},za={class:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-2"},Va={key:0,class:"mb-4"},Oa={class:"mt-1 flex gap-2"},Ba=["value"],Ha={class:"mb-4"},qa={class:"flex justify-end space-x-3"},Wa={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},Ya={key:1,class:"fixed bottom-4 right-4 z-50"},Ka={__name:"VpsManagement",setup(t){const s=g(""),r=g(""),d=g([]),p=g(!1),v=g(!1),m=g(null),x=g(""),u=g({name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:"",status:"inactive"}),a=async()=>{try{const $=await z.get("/api/vps");d.value=$.data}catch{s.value="Failed to fetch VPS servers",r.value="error"}},_=$=>{if(!$)return"";let y=String($).trim();return y=y.replace(/^https?:\/\//i,""),y=y.split("/")[0],y=y.split(":")[0],y.trim()},I=$=>{var f;const y=((f=$==null?void 0:$.target)==null?void 0:f.value)||"";y&&(u.value.ssh_key_path=y)},te=async()=>{var $,y,f,M,T,S;try{if(u.value.ip_address=_(u.value.ip_address),u.value.ssh_key_path=(u.value.ssh_key_path||"").trim(),v.value)await z.put(`/api/vps/${m.value.id}`,u.value),s.value="VPS server updated successfully",r.value="success";else{const pe=(await z.post("/api/vps",u.value)).data;u.value.status&&u.value.status!=="inactive"&&await z.put(`/api/vps/${pe.id}`,{status:u.value.status}),s.value="VPS server created successfully",r.value="success"}V(),a()}catch(C){s.value=((y=($=C==null?void 0:C.response)==null?void 0:$.data)==null?void 0:y.message)||((M=(f=C==null?void 0:C.response)==null?void 0:f.data)==null?void 0:M.error)||((S=(T=C==null?void 0:C.response)==null?void 0:T.data)==null?void 0:S.errors)&&Object.values(C.response.data.errors).flat().join(", ")||"Failed to save VPS server",r.value="error"}},i=$=>{m.value=$,u.value={...$},v.value=!0,x.value=$.worker_key||""},se=async $=>{if(confirm(`Are you sure you want to delete ${$.name}?`))try{await z.delete(`/api/vps/${$.id}`),s.value="VPS server deleted successfully",r.value="success",a()}catch{s.value="Failed to delete VPS server",r.value="error"}},V=()=>{p.value=!1,v.value=!1,m.value=null,u.value={name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:""},x.value=""},ue=()=>{x.value&&(navigator.clipboard.writeText(x.value),s.value="Worker key copied",r.value="success")};return et(a),($,y)=>(n(),c("div",ya,[e("div",ha,[e("div",xa,[e("div",wa,[y[8]||(y[8]=e("h1",{class:"text-3xl font-bold text-gray-900"},"VPS Servers",-1)),e("button",{onClick:y[0]||(y[0]=f=>p.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Add VPS Server ")]),e("div",_a,[e("ul",ka,[(n(!0),c(he,null,we(d.value,f=>(n(),c("li",{key:f.id,class:"px-6 py-4"},[e("div",$a,[e("div",Sa,[e("h3",Ca,L(f.name),1),e("p",Ta,L(f.ip_address),1),e("div",Ea,[e("span",null,"SSH Port: "+L(f.ssh_port),1),e("span",null,"User: "+L(f.ssh_user),1),e("span",null,"Websites: "+L(f.websites_count),1)])]),e("div",Ra,[e("span",{class:je(["inline-flex items-center gap-1",{"text-green-600":f.status==="active","text-red-600":f.status==="inactive","text-yellow-600":f.status==="error"}])},[f.status==="active"?(n(),de(w(St),{key:0,class:"size-4"})):f.status==="error"?(n(),de(w(Ct),{key:1,class:"size-4"})):(n(),de(w(Mt),{key:2,class:"size-4"})),ke(" "+L(f.status),1)],2),e("button",{onClick:M=>i(f),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},[N(w(us),{class:"size-4"})],8,Aa),e("button",{onClick:M=>se(f),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50",title:"Delete"},[N(w(vt),{class:"size-4"})],8,Ma)])])]))),128))])])])]),p.value||v.value?(n(),c("div",ja,[e("div",Pa,[e("h2",La,L(v.value?"Edit VPS Server":"Add VPS Server"),1),e("form",{onSubmit:Ve(te,["prevent"])},[e("div",Ia,[y[9]||(y[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),F(e("input",{"onUpdate:modelValue":y[1]||(y[1]=f=>u.value.name=f),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,u.value.name]])]),e("div",Ua,[y[10]||(y[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"IP Address / Hostname",-1)),F(e("input",{"onUpdate:modelValue":y[2]||(y[2]=f=>u.value.ip_address=f),type:"text",required:"",placeholder:"e.g. 203.0.113.10 or worker.example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,u.value.ip_address]])]),e("div",Fa,[y[11]||(y[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH User",-1)),F(e("input",{"onUpdate:modelValue":y[3]||(y[3]=f=>u.value.ssh_user=f),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,u.value.ssh_user]])]),e("div",Da,[y[12]||(y[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Port",-1)),F(e("input",{"onUpdate:modelValue":y[4]||(y[4]=f=>u.value.ssh_port=f),type:"number",required:"",min:"1",max:"65535",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,u.value.ssh_port,void 0,{number:!0}]])]),e("div",Na,[y[14]||(y[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Key Path",-1)),e("div",za,[F(e("input",{"onUpdate:modelValue":y[5]||(y[5]=f=>u.value.ssh_key_path=f),type:"text",placeholder:"/path/to/ssh/key",class:"block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,u.value.ssh_key_path]]),e("select",{onChange:y[6]||(y[6]=f=>I(f)),class:"block w-full border-gray-300 rounded-md shadow-sm"},[...y[13]||(y[13]=[Tt('<option value="">Chọn nhanh đường dẫn</option><option value="/root/.ssh/id_rsa">/root/.ssh/id_rsa</option><option value="/root/.ssh/id_ed25519">/root/.ssh/id_ed25519</option><option value="/home/ubuntu/.ssh/id_rsa">/home/ubuntu/.ssh/id_rsa</option><option value="/home/ubuntu/.ssh/id_ed25519">/home/ubuntu/.ssh/id_ed25519</option><option value="/home/ec2-user/.ssh/id_rsa">/home/ec2-user/.ssh/id_rsa</option><option value="/home/ec2-user/.ssh/id_ed25519">/home/ec2-user/.ssh/id_ed25519</option><option value="/home/admin/.ssh/id_rsa">/home/admin/.ssh/id_rsa</option><option value="/home/admin/.ssh/id_ed25519">/home/admin/.ssh/id_ed25519</option>',9)])],32)])]),v.value?(n(),c("div",Va,[y[15]||(y[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Worker Key",-1)),e("div",Oa,[e("input",{value:x.value,readonly:"",class:"flex-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Ba),e("button",{type:"button",onClick:ue,class:"px-3 py-2 rounded-md border border-gray-300 bg-gray-50"},"Copy")])])):Z("",!0),e("div",Ha,[y[17]||(y[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),F(e("select",{"onUpdate:modelValue":y[7]||(y[7]=f=>u.value.status=f),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...y[16]||(y[16]=[e("option",{value:"active"},"active",-1),e("option",{value:"inactive"},"inactive",-1),e("option",{value:"error"},"error",-1)])],512),[[Je,u.value.status]])]),e("div",qa,[e("button",{type:"button",onClick:V,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",Wa,L(v.value?"Update":"Create"),1)])],32)])])):Z("",!0),s.value?(n(),c("div",Ya,[e("div",{class:je([r.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},L(s.value),3)])):Z("",!0)]))}},Xa={class:"min-h-screen bg-gray-100"},Ga={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Qa={class:"px-4 py-6 sm:px-0"},Ja={key:0,class:"mb-4"},Za={class:"flex justify-between items-center mb-6"},eo={class:"bg-white shadow sm:rounded-md"},to={class:"divide-y divide-gray-200"},so={class:"flex items-center justify-between"},ao={class:"flex-1"},oo={class:"flex items-center"},lo={class:"text-lg font-medium text-gray-900"},no={class:"text-sm text-gray-500 mt-1"},ro={class:"mt-2 flex items-center space-x-4 text-sm"},io=["title"],uo={class:"flex items-center space-x-2"},co=["href"],po=["href"],mo=["onClick","disabled"],go=["onClick","disabled"],vo=["onClick","disabled"],fo={key:2,class:"relative redeploy-dropdown-container"},bo=["onClick","disabled"],yo={key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50"},ho={class:"py-1"},xo=["onClick"],wo=["onClick"],_o=["onClick"],ko=["onClick","disabled"],$o={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},So={class:"bg-white rounded-lg p-6 w-full max-w-md"},Co={key:0,class:"mb-4 text-sm text-red-600"},To={class:"mb-4"},Eo={class:"mb-4"},Ro={class:"mb-4"},Ao=["value"],Mo={key:0,class:"mb-4"},jo={key:1,class:"mb-4"},Po={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Lo={class:"bg-white rounded-lg p-6 w-full max-w-md"},Io={class:"mb-4"},Uo={class:"space-y-2"},Fo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Do={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},No={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},zo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Vo={class:"flex justify-end space-x-3"},Oo=["disabled"],Bo={key:2,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Ho={class:"bg-white rounded-lg p-6 w-full max-w-md"},qo={class:"mb-4"},Wo={class:"space-y-2"},Yo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Ko={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Xo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Go={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Qo={class:"flex justify-end space-x-3"},Jo=["disabled"],Zo={key:0,class:"fixed bottom-4 right-4 z-50"},el={__name:"WebsiteManagement",setup(t){const s=g([]),r=g([]),d=g(!1);g(!1),g(!1),g(!1),g(null),g([]),g(null);const p=g(""),v=g(""),m=g(""),x=g(""),u=g({});let a=null;g(!1);const _=g([]),I=g([]),te=g([]),i=g([]),se=g({}),V=g([]),ue=g(!1),$=g(!1),y=g(null),f=g({template_names:["all"]}),M=g({template_names:["all"]}),T=(A,b="success")=>{m.value=A,x.value=b,setTimeout(()=>{m.value=""},3e3)},S=g({domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",wordpress_template:"basic"});g({path:"",filename:"",title:"",content:""});const C=async()=>{try{const b=(await z.get("/api/websites")).data;b.forEach(oe=>{const ae=u.value[oe.id];ae&&ae!==oe.status&&(oe.status==="deployed"?T(`${oe.domain} deployed`,"success"):oe.status==="error"&&T(`${oe.domain} deploy failed`,"error")),u.value[oe.id]=oe.status});const K=new Set(b.map(oe=>oe.domain)),G=oe=>{for(const ae of K)if(ae!==oe&&oe.endsWith("."+ae))return!0;return!1};s.value=b.filter(oe=>!G(oe.domain))}catch{T("Failed to fetch websites","error")}},pe=async()=>{try{const A=await z.get("/api/vps");r.value=A.data.filter(b=>b.status==="active")}catch{}},J=async()=>{var A,b,K,G;try{await z.post("/api/websites",S.value),T("Website created","success"),p.value="Website created",v.value="success",Se(),await C()}catch(oe){const ae=((b=(A=oe==null?void 0:oe.response)==null?void 0:A.data)==null?void 0:b.message)||((G=(K=oe==null?void 0:oe.response)==null?void 0:K.data)==null?void 0:G.error)||"Failed to create website";T(ae,"error"),p.value=ae,v.value="error"}},W=async A=>{var b,K,G,oe;try{A.status="deploying",_.value=[..._.value,A.id],await z.post(`/api/websites/${A.id}/deploy`),T("Deployment started","success"),p.value="Deployment started",v.value="success",await C()}catch(ae){const Ie=((K=(b=ae==null?void 0:ae.response)==null?void 0:b.data)==null?void 0:K.message)||((oe=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:oe.error)||"Failed to deploy website";T(Ie,"error"),p.value=Ie,v.value="error",await C()}finally{_.value=_.value.filter(ae=>ae!==A.id)}},xe=async A=>{var b,K,G,oe;try{I.value=[...I.value,A.id],await z.post(`/api/websites/${A.id}/ssl`),T("SSL generation started","success"),p.value="SSL generation started",v.value="success",await C()}catch(ae){const Ie=((K=(b=ae==null?void 0:ae.response)==null?void 0:b.data)==null?void 0:K.message)||((oe=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:oe.error)||"Failed to enable SSL";T(Ie,"error"),p.value=Ie,v.value="error"}finally{I.value=I.value.filter(ae=>ae!==A.id)}},$e=async A=>{var b,K,G,oe;if(confirm(`Are you sure you want to delete ${A.domain}?`))try{i.value=[...i.value,A.id],await z.delete(`/api/websites/${A.id}`),T("Website deleted","success"),await C()}catch(ae){const Ie=((K=(b=ae==null?void 0:ae.response)==null?void 0:b.data)==null?void 0:K.message)||((oe=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:oe.error)||"Failed to delete website";T(Ie,"error")}finally{i.value=i.value.filter(ae=>ae!==A.id)}},fe=async A=>{var b,K,G,oe;try{te.value=[...te.value,A.id],await z.post(`/api/websites/${A.id}/deactivate`),T("Website deactivated","success"),p.value="Website deactivated",v.value="success",C()}catch(ae){const Ie=((K=(b=ae==null?void 0:ae.response)==null?void 0:b.data)==null?void 0:K.message)||((oe=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:oe.error)||"Failed to deactivate website";T(Ie,"error"),p.value=Ie,v.value="error"}finally{te.value=te.value.filter(ae=>ae!==A.id)}};g([]);const Se=()=>{d.value=!1,S.value={domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",wordpress_template:"basic"}};et(()=>{C(),pe(),a=setInterval(C,3e3),document.addEventListener("click",A=>{A.target.closest(".redeploy-dropdown-container")||(se.value={})})}),Bt(()=>{a&&clearInterval(a)});const Pe=A=>{const b=`/preview/${A.id}`,K=localStorage.getItem("adminToken")||"",G=new URLSearchParams;K&&G.set("token",K),G.set("hide_preview_bar","1");const oe=G.toString();return oe?`${b}?${oe}`:b},De=A=>{se.value={...se.value,[A]:!se.value[A]}},Le=async A=>{var b,K;try{V.value=[...V.value,A.id],se.value[A.id]=!1;const G=await z.post(`/api/websites/${A.id}/redeploy-pages`);T(G.data.message||"Pages redeployed successfully","success")}catch(G){const oe=((K=(b=G==null?void 0:G.response)==null?void 0:b.data)==null?void 0:K.message)||"Failed to redeploy pages";T(oe,"error")}finally{V.value=V.value.filter(G=>G!==A.id)}},We=A=>{y.value=A,se.value[A.id]=!1,ue.value=!0},ie=A=>{y.value=A,se.value[A.id]=!1,$.value=!0},ne=async()=>{var A,b;if(y.value)try{V.value=[...V.value,y.value.id];const K=await z.post(`/api/websites/${y.value.id}/redeploy-template-assets`,f.value);T(K.data.message||"Template assets deployed","success"),ue.value=!1}catch(K){const G=((b=(A=K==null?void 0:K.response)==null?void 0:A.data)==null?void 0:b.message)||"Failed to deploy template assets";T(G,"error")}finally{V.value=V.value.filter(K=>K!==y.value.id)}},k=async()=>{var A,b;if(y.value)try{V.value=[...V.value,y.value.id];const K={template_names:(M.value.template_names||[]).length===0?[]:M.value.template_names},G=await z.post(`/api/websites/${y.value.id}/update-pages-template`,K);T(G.data.message||"Header/footer updated","success"),$.value=!1}catch(K){const G=((b=(A=K==null?void 0:K.response)==null?void 0:A.data)==null?void 0:b.message)||"Failed to update header/footer";T(G,"error")}finally{V.value=V.value.filter(K=>K!==y.value.id)}},X=A=>{const b=f.value.template_names||[];b.indexOf(A)===-1?f.value.template_names=[...b,A]:f.value.template_names=b.filter(G=>G!==A),console.log("Redeploy templates:",f.value.template_names)},E=A=>{const b=M.value.template_names||[];b.indexOf(A)===-1?M.value.template_names=[...b,A]:M.value.template_names=b.filter(G=>G!==A),console.log("Update templates:",M.value.template_names)},O=A=>(f.value.template_names||[]).includes(A),re=A=>(M.value.template_names||[]).includes(A),Ee=()=>{ue.value=!1,y.value=null,f.value={template_names:["all"]}},ve=()=>{$.value=!1,y.value=null,M.value={template_names:["all"]}};return(A,b)=>{var G,oe,ae,Ie;const K=nt("router-link");return n(),c(he,null,[e("div",Xa,[e("div",Ga,[e("div",Qa,[p.value?(n(),c("div",Ja,[e("div",{class:je([v.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},L(p.value),3)])):Z("",!0),e("div",Za,[b[14]||(b[14]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Websites",-1)),e("button",{onClick:b[0]||(b[0]=j=>d.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Create Website ")]),e("div",eo,[e("ul",to,[(n(!0),c(he,null,we(s.value,j=>{var Ce;return n(),c("li",{key:j.id,class:"px-6 py-4 relative overflow-visible"},[e("div",so,[e("div",ao,[e("div",oo,[e("h3",lo,L(j.domain),1),e("span",{class:je([{"bg-blue-100 text-blue-800":j.type==="html","bg-green-100 text-green-800":j.type==="wordpress","bg-purple-100 text-purple-800":j.type==="laravel1"},"ml-2 px-2 py-1 text-xs font-medium rounded-full"])},L(j.type),3)]),e("p",no," VPS: "+L(((Ce=j.vps_server)==null?void 0:Ce.name)||"N/A"),1),e("div",ro,[e("span",{class:je(["inline-flex items-center",{"text-blue-600":j.status==="deploying","text-green-600":j.status==="deployed","text-gray-600":j.status==="pending"||j.status==="draft","text-orange-600":j.status==="suspended","text-red-600":j.status==="error"}]),title:j.status},[j.status==="deploying"?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):j.status==="deployed"?(n(),de(w(St),{key:1,class:"size-4"})):j.status==="pending"||j.status==="draft"?(n(),de(w(Mt),{key:2,class:"size-4"})):j.status==="suspended"?(n(),de(w(jt),{key:3,class:"size-4"})):(n(),de(w(Ct),{key:4,class:"size-4"}))],10,io),e("span",{class:je(["inline-flex items-center gap-1",j.ssl_enabled?"text-green-600":"text-gray-400"])},[j.ssl_enabled?(n(),de(w(xt),{key:0,class:"size-4"})):(n(),de(w(cs),{key:1,class:"size-4"}))],2)])]),e("div",uo,[e("a",{href:(j.ssl_enabled?"https://":"http://")+j.domain,target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Website"},[N(w(gt),{class:"size-4"})],8,co),N(K,{to:`/websites/${j.id}/pages`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:_e(()=>[N(w(ps),{class:"size-4"})]),_:1},8,["to"]),N(K,{to:`/websites/${j.id}/folders`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-amber-600 hover:bg-gray-50",title:"Manage Categories"},{default:_e(()=>[N(w(js),{class:"size-4"})]),_:1},8,["to"]),N(K,{to:`/websites/${j.id}/subdomains`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"Manage Subdomains"},{default:_e(()=>[N(w(ns),{class:"size-4"})]),_:1},8,["to"]),N(K,{to:`/websites/${j.id}/settings`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Website Settings"},{default:_e(()=>[N(w(ds),{class:"size-4"})]),_:1},8,["to"]),e("a",{href:Pe(j),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[N(w(Mt),{class:"size-4"})],8,po),e("button",{onClick:Ne=>W(j),disabled:j.status==="deploying"||j.status==="deployed"||_.value.includes(j.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[_.value.includes(j.id)?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):(n(),de(w(ms),{key:1,class:"size-4"}))],8,mo),j.status==="deployed"?(n(),c("button",{key:0,onClick:Ne=>xe(j),disabled:I.value.includes(j.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[I.value.includes(j.id)?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):(n(),de(w(xt),{key:1,class:"size-4"}))],8,go)):Z("",!0),j.status==="deployed"||j.status==="error"?(n(),c("button",{key:1,onClick:Ne=>fe(j),disabled:te.value.includes(j.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[te.value.includes(j.id)?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):(n(),de(w(jt),{key:1,class:"size-4"}))],8,vo)):Z("",!0),j.status==="deployed"&&j.type==="laravel1"?(n(),c("div",fo,[e("button",{onClick:Ne=>De(j.id),disabled:V.value.includes(j.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-teal-600 hover:bg-gray-50 disabled:text-gray-400",title:"Redeploy Options"},[V.value.includes(j.id)?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):(n(),de(w(Ps),{key:1,class:"size-4"}))],8,bo),se.value[j.id]?(n(),c("div",yo,[e("div",ho,[e("button",{onClick:Ne=>Le(j),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy All Pages ",8,xo),e("button",{onClick:Ne=>We(j),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy Template Assets ",8,wo),e("button",{onClick:Ne=>ie(j),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Update Pages Template ",8,_o)])])):Z("",!0)])):Z("",!0),e("button",{onClick:Ne=>$e(j),disabled:i.value.includes(j.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[i.value.includes(j.id)?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):(n(),de(w(vt),{key:1,class:"size-4"}))],8,ko)])])])}),128))])])])]),d.value?(n(),c("div",$o,[e("div",So,[b[26]||(b[26]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create Website",-1)),r.value.length===0?(n(),c("div",Co,"Chưa có VPS ở trạng thái active. Vào mục Servers để đặt trạng thái active cho VPS hiện tại.")):Z("",!0),e("form",{onSubmit:Ve(J,["prevent"])},[e("div",To,[b[15]||(b[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Domain",-1)),F(e("input",{"onUpdate:modelValue":b[1]||(b[1]=j=>S.value.domain=j),type:"text",required:"",placeholder:"example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,S.value.domain]])]),e("div",Eo,[b[17]||(b[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Type",-1)),F(e("select",{"onUpdate:modelValue":b[2]||(b[2]=j=>S.value.type=j),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...b[16]||(b[16]=[e("option",{value:"html"},"HTML Website",-1),e("option",{value:"wordpress"},"WordPress",-1),e("option",{value:"laravel1"},"Laravel 1",-1)])],512),[[Je,S.value.type]])]),e("div",Ro,[b[19]||(b[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),F(e("select",{"onUpdate:modelValue":b[3]||(b[3]=j=>S.value.vps_server_id=j),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[b[18]||(b[18]=e("option",{value:""},"Select VPS Server",-1)),(n(!0),c(he,null,we(r.value,j=>(n(),c("option",{key:j.id,value:j.id},L(j.name)+" ("+L(j.ip_address)+") ",9,Ao))),128))],512),[[Je,S.value.vps_server_id]])]),S.value.type==="wordpress"?(n(),c("div",Mo,[b[21]||(b[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"WordPress Template",-1)),F(e("select",{"onUpdate:modelValue":b[4]||(b[4]=j=>S.value.wordpress_template=j),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...b[20]||(b[20]=[e("option",{value:"basic"},"Basic WordPress",-1),e("option",{value:"business"},"Business Theme",-1),e("option",{value:"ecommerce"},"E-commerce Theme",-1)])],512),[[Je,S.value.wordpress_template]])])):Z("",!0),S.value.type==="laravel1"?(n(),c("div",jo,[b[23]||(b[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template Package",-1)),F(e("select",{"onUpdate:modelValue":b[5]||(b[5]=j=>S.value.template_package=j),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...b[22]||(b[22]=[e("option",{value:"laravel-hotel-1"},"Hotel Template",-1)])],512),[[Je,S.value.template_package]]),b[24]||(b[24]=e("p",{class:"mt-1 text-xs text-gray-500"},"Includes home, listing, and detail pages with shared assets",-1))])):Z("",!0),e("div",{class:"flex justify-end space-x-3"},[e("button",{type:"button",onClick:Se,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),b[25]||(b[25]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Create ",-1))])],32)])])):Z("",!0),ue.value?(n(),c("div",Po,[e("div",Lo,[b[33]||(b[33]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Redeploy Template Assets",-1)),e("div",Io,[b[31]||(b[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",Uo,[e("div",{class:"flex items-center cursor-pointer",onClick:b[6]||(b[6]=j=>X("all"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:O("all")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[O("all")?(n(),c("span",Fo,"✓")):Z("",!0)],4),b[27]||(b[27]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:b[7]||(b[7]=j=>X("home"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:O("home")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[O("home")?(n(),c("span",Do,"✓")):Z("",!0)],4),b[28]||(b[28]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:b[8]||(b[8]=j=>X("listing"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:O("listing")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[O("listing")?(n(),c("span",No,"✓")):Z("",!0)],4),b[29]||(b[29]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:b[9]||(b[9]=j=>X("detail"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:O("detail")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[O("detail")?(n(),c("span",zo,"✓")):Z("",!0)],4),b[30]||(b[30]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),b[34]||(b[34]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-blue-800"}," Deploys CSS/JS files from the selected templates to all pages. Use this when you update template scripts or styles. ")],-1)),e("div",Vo,[e("button",{type:"button",onClick:Ee,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:ne,disabled:V.value.includes((G=y.value)==null?void 0:G.id),class:"px-3 py-2 bg-teal-600 text-white text-sm rounded-md hover:bg-teal-700 disabled:opacity-50 flex items-center gap-2"},[V.value.includes((oe=y.value)==null?void 0:oe.id)?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):Z("",!0),b[32]||(b[32]=ke(" Deploy Assets ",-1))],8,Oo)])])])):Z("",!0),$.value?(n(),c("div",Bo,[e("div",Ho,[b[41]||(b[41]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Update Pages Template",-1)),e("div",qo,[b[39]||(b[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",Wo,[e("div",{class:"flex items-center cursor-pointer",onClick:b[10]||(b[10]=j=>E("all"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:re("all")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[re("all")?(n(),c("span",Yo,"✓")):Z("",!0)],4),b[35]||(b[35]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:b[11]||(b[11]=j=>E("home"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:re("home")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[re("home")?(n(),c("span",Ko,"✓")):Z("",!0)],4),b[36]||(b[36]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:b[12]||(b[12]=j=>E("listing"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:re("listing")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[re("listing")?(n(),c("span",Xo,"✓")):Z("",!0)],4),b[37]||(b[37]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:b[13]||(b[13]=j=>E("detail"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:re("detail")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[re("detail")?(n(),c("span",Go,"✓")):Z("",!0)],4),b[38]||(b[38]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),b[42]||(b[42]=e("div",{class:"bg-purple-50 border border-purple-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-purple-800"},[ke(" Cập nhật phần header/footer cho "),e("strong",null,"các trang đang dùng template đã chọn"),ke(", sau đó tự động deploy các trang đó. Tính năng này "),e("strong",null,"không"),ke(' cập nhật CSS/JS (dùng mục "Redeploy Template Assets" cho CSS/JS). Với website chính, hệ thống sẽ xếp lịch redeploy Trang chủ và các trang Category liên quan. ')])],-1)),e("div",Qo,[e("button",{type:"button",onClick:ve,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:k,disabled:V.value.includes((ae=y.value)==null?void 0:ae.id),class:"px-3 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2"},[V.value.includes((Ie=y.value)==null?void 0:Ie.id)?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):Z("",!0),b[40]||(b[40]=ke(" Update header/footer ",-1))],8,Jo)])])])):Z("",!0)]),m.value?(n(),c("div",Zo,[e("div",{class:je([x.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},L(m.value),3)])):Z("",!0)],64)}}},tl={class:"min-h-screen bg-gray-100"},sl={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},al={class:"px-4 py-6 sm:px-0"},ol={class:"flex items-center justify-between mb-6"},ll={class:"text-3xl font-bold text-gray-900"},nl={key:0,class:"ml-2 text-lg text-gray-500"},rl={key:0,class:"mb-4"},il={key:1,class:"text-gray-600"},dl={key:2,class:"mb-4"},ul={class:"inline-flex rounded-md shadow-sm",role:"group"},cl={key:3,class:"bg-white shadow sm:rounded-md p-6 space-y-6"},pl={key:0,class:"space-y-6"},ml={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},gl={class:"mt-2 flex items-center gap-4"},vl={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},fl=["src"],bl={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},yl={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},hl={class:"mt-2 flex items-center gap-4"},xl={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},wl=["src"],_l={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},kl={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},$l={class:"mt-2 flex items-center gap-4"},Sl={class:"h-10 w-10 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},Cl=["src"],Tl={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},El={key:0,class:"text-xs text-gray-500 truncate max-w-[220px]"},Rl={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Al={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Ml={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},jl={key:1,class:"space-y-6"},Pl={class:"flex items-center justify-between mb-4"},Ll={class:"space-y-2"},Il={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},Ul=["onDragstart","onDrop"],Fl={class:"p-4"},Dl={class:"flex items-start justify-between gap-4"},Nl={class:"flex items-start gap-3 flex-1 min-w-0"},zl={class:"flex-1 min-w-0 space-y-2"},Vl={class:"flex items-center gap-2"},Ol=["onUpdate:modelValue"],Bl=["onUpdate:modelValue"],Hl={class:"flex items-center gap-2 flex-shrink-0"},ql=["onClick"],Wl=["onClick"],Yl={key:0,class:"mt-4 ml-8 space-y-2 pt-3 border-t border-gray-100"},Kl=["onDragstart","onDrop"],Xl={class:"flex-1 min-w-0 space-y-1"},Gl=["onUpdate:modelValue"],Ql=["onUpdate:modelValue"],Jl=["onClick"],Zl={class:"flex items-center justify-between mb-4"},en={class:"space-y-3"},tn={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},sn=["onDragstart","onDrop"],an={class:"p-4"},on={class:"flex items-start justify-between gap-4 mb-3"},ln={class:"flex items-start gap-3 flex-1 min-w-0"},nn={class:"flex-1 min-w-0"},rn=["onUpdate:modelValue","placeholder"],dn={class:"flex items-center gap-2 flex-shrink-0"},un=["onClick"],cn=["onClick"],pn={key:0,class:"ml-8 space-y-2 pt-3 border-t border-gray-100"},mn=["onDragstart","onDrop"],gn={class:"flex-1 min-w-0 space-y-1"},vn=["onUpdate:modelValue"],fn=["onUpdate:modelValue"],bn=["onClick"],yn={key:1,class:"ml-8 pt-3 border-t border-gray-100"},hn={class:"flex justify-end space-x-3"},xn=["disabled"],wn={key:0,class:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4"},_n={key:1},kn={class:"px-6 py-4 space-y-4"},$n=["value"],Sn={class:"pt-3 border-t border-gray-200"},Cn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},Tn={class:"px-6 py-4 border-b border-gray-200"},En={class:"text-sm text-gray-500 mt-1"},Rn={class:"px-6 py-4 space-y-4"},An=["value"],Mn={class:"pt-3 border-t border-gray-200"},jn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},Pn={class:"px-6 py-4 space-y-4"},Ln={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},In={class:"px-6 py-4 border-b border-gray-200"},Un={class:"text-sm text-gray-500 mt-1"},Fn={class:"px-6 py-4 space-y-4"},Dn=["value"],Nn={class:"pt-3 border-t border-gray-200"},zn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},Vn={__name:"WebsiteSettings",setup(t){const r=pt().params.websiteId,d=g(null),p=g(!0),v=g(!1),m=g(""),x=g(""),u=g("general"),a=g({title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}),_=g(null),I=g(null),te=g(null),i=g(null),se=g(null),V=g(null),ue=qe(()=>(a.value.custom_head_html||"").split(`
`).length||1),$=qe(()=>(a.value.custom_body_html||"").split(`
`).length||1),y=qe(()=>(a.value.custom_footer_html||"").split(`
`).length||1),f=D=>{D==="head"&&_.value&&i.value&&(_.value.scrollTop=i.value.scrollTop),D==="body"&&I.value&&se.value&&(I.value.scrollTop=se.value.scrollTop),D==="footer"&&te.value&&V.value&&(te.value.scrollTop=V.value.scrollTop)},M=async()=>{try{const D=await z.get(`/api/websites/${r}`);d.value=D.data}catch{}},T=async()=>{var D,o;try{const ye=(await z.get(`/api/websites/${r}/settings`)).data||{};a.value={title:ye.title||"",logo_header_url:ye.logo_header_url||"",logo_footer_url:ye.logo_footer_url||"",favicon_url:ye.favicon_url||"",custom_head_html:ye.custom_head_html||"",custom_body_html:ye.custom_body_html||"",custom_footer_html:ye.custom_footer_html||"",menu:Array.isArray(ye.menu)?ye.menu:[],footer_links_html:ye.footer_links_html||""},W.value=Array.isArray(ye.menu)?ye.menu:[],Array.isArray(ye.footer_columns)?Ce.value=ye.footer_columns:Ce.value=[]}catch(be){m.value=((o=(D=be==null?void 0:be.response)==null?void 0:D.data)==null?void 0:o.error)||"Failed to load settings",x.value="error"}},S=async()=>{var D,o,be,ye;v.value=!0,m.value="";try{a.value.footer_links_html=It(),a.value.footer_columns=Ce.value,await z.put(`/api/websites/${r}/settings`,a.value),m.value="Updated settings",x.value="success"}catch(Te){m.value=((o=(D=Te==null?void 0:Te.response)==null?void 0:D.data)==null?void 0:o.message)||((ye=(be=Te==null?void 0:Te.response)==null?void 0:be.data)==null?void 0:ye.error)||(Te==null?void 0:Te.message)||"Failed to update settings",x.value="error"}finally{v.value=!1}},C=()=>{a.value={title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}},pe=async(D,o)=>{var Te,R,Me,q;const be=((Te=D==null?void 0:D.target)==null?void 0:Te.files)||[];if(!be.length)return;const ye=new FormData;ye.append("file",be[0]);try{let ce=`/api/websites/${r}/assets/${o}`;const me=await z.post(ce,ye,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},timeout:6e4}),Ke=((R=me==null?void 0:me.data)==null?void 0:R.url)||"";o==="logo-header"?a.value.logo_header_url=Ke:o==="logo-footer"?a.value.logo_footer_url=Ke:o==="favicon"&&(a.value.favicon_url=Ke),m.value="Uploaded "+o,x.value="success"}catch(ce){const me=((q=(Me=ce==null?void 0:ce.response)==null?void 0:Me.data)==null?void 0:q.error)||(ce==null?void 0:ce.message)||"Upload failed";m.value=me,x.value="error"}finally{D.target.value=""}};et(async()=>{await Promise.all([M(),T(),ne()]),W.value=Array.isArray(a.value.menu)?[...a.value.menu]:[],Ce.value.length||updateFooterColumnCount(),p.value=!1});const J=g([]),W=g([]),xe=g(!1),$e=g(!1),fe=g(-1),Se=g(""),Pe=g(""),De=g(""),Le=g(""),We=g(""),ie=g(""),ne=async()=>{try{const D=await z.get(`/api/websites/${r}/folders`);J.value=D.data||[]}catch{}},k=D=>`/${(D==null?void 0:D.slug)||""}`,X=()=>{if(Se.value){const D=J.value.find(o=>String(o.id)===String(Se.value));D&&(Pe.value=D.name,De.value=k(D))}},E=()=>{if(Le.value){const D=J.value.find(o=>String(o.id)===String(Le.value));D&&(We.value=D.name,ie.value=k(D))}};kt(Se,X),kt(Le,E);const O=()=>{if(!Pe.value||!De.value){m.value="Vui lòng điền đầy đủ thông tin",x.value="error";return}W.value.push({label:Pe.value,url:De.value,children:[]}),a.value.menu=W.value,Se.value="",Pe.value="",De.value="",xe.value=!1,m.value="Đã thêm menu",x.value="success"},re=D=>{fe.value=D,$e.value=!0},Ee=()=>{if(!We.value||!ie.value){m.value="Vui lòng điền đầy đủ thông tin",x.value="error";return}const D=W.value[fe.value];D&&(D.children=D.children||[],D.children.push({label:We.value,url:ie.value}),a.value.menu=W.value,Le.value="",We.value="",ie.value="",$e.value=!1,m.value="Đã thêm menu con",x.value="success")},ve=()=>{a.value.menu=W.value},A=D=>{W.value.splice(D,1),a.value.menu=W.value},b=(D,o)=>{const be=W.value[D];be&&(be.children.splice(o,1),a.value.menu=W.value)};let K=-1,G={parent:-1,index:-1};const oe=D=>{K=D},ae=D=>{if(K===-1||D===K)return;const o=W.value,[be]=o.splice(K,1);o.splice(D,0,be),K=-1,a.value.menu=o},Ie=(D,o)=>{G={parent:D,index:o}},j=(D,o)=>{if(G.parent!==D)return;const be=W.value[D].children||[],ye=G.index;if(ye===o||ye<0)return;const[Te]=be.splice(ye,1);be.splice(o,0,Te),G={parent:-1,index:-1},a.value.menu=W.value},Ce=g([]),Ne=g(!1),P=g(!1),l=g(-1),U=g(""),H=g(""),h=g(""),Y=g("");kt(H,()=>{if(H.value){const D=J.value.find(o=>String(o.id)===String(H.value));D&&(h.value=D.name,Y.value=k(D))}});const ze=()=>{Ce.value.push({title:U.value||"",links:[]}),U.value="",Ne.value=!1,m.value="Đã thêm cột footer",x.value="success"},ee=D=>{l.value=D,P.value=!0},Re=()=>{if(!h.value||!Y.value){m.value="Vui lòng điền đầy đủ thông tin",x.value="error";return}const D=Ce.value[l.value];D&&(D.links.push({label:h.value,url:Y.value}),H.value="",h.value="",Y.value="",P.value=!1,m.value="Đã thêm liên kết footer",x.value="success")},Fe=D=>{Ce.value.splice(D,1)},Ze=()=>{},Ue=(D,o)=>{const be=Ce.value[D];be&&be.links.splice(o,1)};let He=-1;const ot=D=>{He=D},Oe=D=>{if(He===-1||D===He)return;const o=Ce.value,[be]=o.splice(He,1);o.splice(D,0,be),He=-1};let Ye={column:-1,index:-1};const ft=(D,o)=>{Ye={column:D,index:o}},rt=(D,o)=>{if(Ye.column!==D)return;const be=Ce.value[D].links||[],ye=Ye.index;if(ye===o||ye<0)return;const[Te]=be.splice(ye,1);be.splice(o,0,Te),Ye={column:-1,index:-1}},It=()=>{const D=Ce.value;if(!D.length)return"";let o='<div class="grid grid-cols-'+D.length+' gap-6">';for(const be of D){o+="<div>",be.title&&(o+='<div class="font-medium mb-2">'+be.title+"</div>"),o+='<ul class="space-y-1">';const ye=be.links||[];for(const Te of ye)o+='<li><a href="'+(Te.url||"#")+'" class="text-gray-600 hover:text-gray-900">'+(Te.label||"")+"</a></li>";o+="</ul>",o+="</div>"}return o+="</div>",o};return(D,o)=>{var ye,Te;const be=nt("router-link");return n(),c("div",tl,[e("div",sl,[e("div",al,[e("div",ol,[e("h1",ll,[o[40]||(o[40]=ke(" Website Settings ",-1)),d.value?(n(),c("span",nl,L(d.value.domain),1)):Z("",!0)]),N(be,{to:"/websites",class:"px-3 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:_e(()=>[...o[41]||(o[41]=[ke("Back",-1)])]),_:1})]),m.value?(n(),c("div",rl,[e("div",{class:je([x.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},L(m.value),3)])):Z("",!0),p.value?(n(),c("div",il,"Loading...")):(n(),c("div",dl,[e("div",ul,[e("button",{type:"button",onClick:o[0]||(o[0]=R=>u.value="general"),class:je([u.value==="general"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-l-md hover:bg-gray-50"])},"Cài đặt chung",2),e("button",{type:"button",onClick:o[1]||(o[1]=R=>u.value="navigation"),class:je([u.value==="navigation"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-r-md hover:bg-gray-50"])},"Menu Header & Footer",2)])])),p.value?Z("",!0):(n(),c("div",cl,[u.value==="general"?(n(),c("div",pl,[e("div",null,[o[42]||(o[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề",-1)),F(e("input",{"onUpdate:modelValue":o[2]||(o[2]=R=>a.value.title=R),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Website title"},null,512),[[Q,a.value.title]])]),e("div",ml,[e("div",null,[o[44]||(o[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Header",-1)),e("div",gl,[e("div",vl,[a.value.logo_header_url?(n(),c("img",{key:0,src:a.value.logo_header_url,class:"object-contain h-full w-full"},null,8,fl)):(n(),de(w(Ut),{key:1,class:"size-6 text-gray-400"}))]),e("label",bl,[N(w(Ft),{class:"size-4 mr-2"}),o[43]||(o[43]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:o[3]||(o[3]=R=>pe(R,"logo-header")),class:"hidden"},null,32)]),a.value.logo_header_url?(n(),c("span",yl,L(a.value.logo_header_url),1)):Z("",!0)])]),e("div",null,[o[46]||(o[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Footer",-1)),e("div",hl,[e("div",xl,[a.value.logo_footer_url?(n(),c("img",{key:0,src:a.value.logo_footer_url,class:"object-contain h-full w-full"},null,8,wl)):(n(),de(w(Ut),{key:1,class:"size-6 text-gray-400"}))]),e("label",_l,[N(w(Ft),{class:"size-4 mr-2"}),o[45]||(o[45]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:o[4]||(o[4]=R=>pe(R,"logo-footer")),class:"hidden"},null,32)]),a.value.logo_footer_url?(n(),c("span",kl,L(a.value.logo_footer_url),1)):Z("",!0)])])]),e("div",null,[o[48]||(o[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Favicon",-1)),e("div",$l,[e("div",Sl,[a.value.favicon_url?(n(),c("img",{key:0,src:a.value.favicon_url,class:"object-contain h-full w-full"},null,8,Cl)):(n(),de(w(Ut),{key:1,class:"size-5 text-gray-400"}))]),e("label",Tl,[N(w(Ft),{class:"size-4 mr-2"}),o[47]||(o[47]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".ico,.png,.jpg,.jpeg,.svg",onChange:o[5]||(o[5]=R=>pe(R,"favicon")),class:"hidden"},null,32)]),a.value.favicon_url?(n(),c("span",El,L(a.value.favicon_url),1)):Z("",!0)])]),e("div",null,[o[49]||(o[49]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào header",-1)),e("div",Rl,[e("div",{ref_key:"gutterHead",ref:_,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(n(!0),c(he,null,we(ue.value,R=>(n(),c("div",{key:R,class:"leading-6"},L(R),1))),128))],512),F(e("textarea",{ref_key:"codeHead",ref:i,"onUpdate:modelValue":o[6]||(o[6]=R=>a.value.custom_head_html=R),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:o[7]||(o[7]=R=>f("head"))},null,544),[[Q,a.value.custom_head_html]])])]),e("div",null,[o[50]||(o[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào body",-1)),e("div",Al,[e("div",{ref_key:"gutterBody",ref:I,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(n(!0),c(he,null,we($.value,R=>(n(),c("div",{key:R,class:"leading-6"},L(R),1))),128))],512),F(e("textarea",{ref_key:"codeBody",ref:se,"onUpdate:modelValue":o[8]||(o[8]=R=>a.value.custom_body_html=R),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<div>...</div>",onScroll:o[9]||(o[9]=R=>f("body"))},null,544),[[Q,a.value.custom_body_html]])])]),e("div",null,[o[51]||(o[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào footer",-1)),e("div",Ml,[e("div",{ref_key:"gutterFooter",ref:te,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(n(!0),c(he,null,we(y.value,R=>(n(),c("div",{key:R,class:"leading-6"},L(R),1))),128))],512),F(e("textarea",{ref_key:"codeFooter",ref:V,"onUpdate:modelValue":o[10]||(o[10]=R=>a.value.custom_footer_html=R),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:o[11]||(o[11]=R=>f("footer"))},null,544),[[Q,a.value.custom_footer_html]])])])])):Z("",!0),u.value==="navigation"?(n(),c("div",jl,[e("div",null,[e("div",Pl,[o[53]||(o[53]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Menu Header"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:o[12]||(o[12]=R=>xe.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...o[52]||(o[52]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ke(" Thêm menu ",-1)])])]),e("div",Ll,[W.value.length===0?(n(),c("div",Il,[...o[54]||(o[54]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có menu nào. Click "Thêm menu" để bắt đầu.',-1)])])):Z("",!0),(n(!0),c(he,null,we(W.value,(R,Me)=>(n(),c("div",{key:Me,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:q=>oe(Me),onDragover:o[14]||(o[14]=Ve(()=>{},["prevent"])),onDrop:q=>ae(Me)},[e("div",Fl,[e("div",Dl,[e("div",Nl,[o[55]||(o[55]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",zl,[e("div",Vl,[F(e("input",{"onUpdate:modelValue":q=>R.label=q,onInput:ve,type:"text",class:"flex-1 px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu"},null,40,Ol),[[Q,R.label]])]),F(e("input",{"onUpdate:modelValue":q=>R.url=q,onInput:ve,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL (ví dụ: /khach-san)"},null,40,Bl),[[Q,R.url]])])]),e("div",Hl,[e("button",{type:"button",onClick:q=>re(Me),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm menu con"},[...o[56]||(o[56]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,ql),e("button",{type:"button",onClick:q=>A(Me),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa"},[...o[57]||(o[57]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Wl)])]),R.children&&R.children.length>0?(n(),c("div",Yl,[(n(!0),c(he,null,we(R.children,(q,ce)=>(n(),c("div",{key:ce,class:"flex items-center gap-3 group",draggable:"true",onDragstart:me=>Ie(Me,ce),onDragover:o[13]||(o[13]=Ve(()=>{},["prevent"])),onDrop:me=>j(Me,ce)},[o[59]||(o[59]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),o[60]||(o[60]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("div",Xl,[F(e("input",{"onUpdate:modelValue":me=>q.label=me,onInput:ve,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu con"},null,40,Gl),[[Q,q.label]]),F(e("input",{"onUpdate:modelValue":me=>q.url=me,onInput:ve,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,Ql),[[Q,q.url]])]),e("button",{type:"button",onClick:me=>b(Me,ce),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...o[58]||(o[58]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Jl)],40,Kl))),128))])):Z("",!0)])],40,Ul))),128))])]),e("div",null,[e("div",Zl,[o[62]||(o[62]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Footer"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:o[15]||(o[15]=R=>Ne.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...o[61]||(o[61]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ke(" Thêm cột ",-1)])])]),e("div",en,[Ce.value.length===0?(n(),c("div",tn,[...o[63]||(o[63]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có cột footer nào. Click "Thêm cột" để bắt đầu.',-1)])])):Z("",!0),(n(!0),c(he,null,we(Ce.value,(R,Me)=>(n(),c("div",{key:Me,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:q=>ot(Me),onDragover:o[17]||(o[17]=Ve(()=>{},["prevent"])),onDrop:q=>Oe(Me)},[e("div",an,[e("div",on,[e("div",ln,[o[64]||(o[64]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",nn,[F(e("input",{"onUpdate:modelValue":q=>R.title=q,onInput:Ze,type:"text",class:"w-full px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:`Tiêu đề cột ${Me+1}`},null,40,rn),[[Q,R.title]])])]),e("div",dn,[e("button",{type:"button",onClick:q=>ee(Me),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm liên kết"},[...o[65]||(o[65]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,un),e("button",{type:"button",onClick:q=>Fe(Me),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa cột"},[...o[66]||(o[66]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,cn)])]),R.links&&R.links.length>0?(n(),c("div",pn,[(n(!0),c(he,null,we(R.links,(q,ce)=>(n(),c("div",{key:ce,class:"flex items-center gap-3 group",draggable:"true",onDragstart:me=>ft(Me,ce),onDragover:o[16]||(o[16]=Ve(()=>{},["prevent"])),onDrop:me=>rt(Me,ce)},[o[68]||(o[68]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),o[69]||(o[69]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),e("div",gn,[F(e("input",{"onUpdate:modelValue":me=>q.label=me,onInput:Ze,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên liên kết"},null,40,vn),[[Q,q.label]]),F(e("input",{"onUpdate:modelValue":me=>q.url=me,onInput:Ze,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,fn),[[Q,q.url]])]),e("button",{type:"button",onClick:me=>Ue(Me,ce),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...o[67]||(o[67]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,bn)],40,mn))),128))])):(n(),c("div",yn,[...o[70]||(o[70]=[e("p",{class:"text-xs text-gray-400 italic"},"Chưa có liên kết",-1)])]))])],40,sn))),128))])])])):Z("",!0),e("div",hn,[e("button",{type:"button",onClick:C,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Reset"),e("button",{type:"button",onClick:S,disabled:v.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2"},[v.value?(n(),c("span",wn)):(n(),c("span",_n,"Save"))],8,xn)])]))])]),xe.value?(n(),c("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:o[23]||(o[23]=R=>xe.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:o[22]||(o[22]=Ve(()=>{},["stop"]))},[o[75]||(o[75]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu mới")],-1)),e("div",kn,[e("div",null,[o[72]||(o[72]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),F(e("select",{"onUpdate:modelValue":o[18]||(o[18]=R=>Se.value=R),class:"w-full rounded-md border-gray-300 text-sm"},[o[71]||(o[71]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(n(!0),c(he,null,we(J.value,R=>(n(),c("option",{key:R.id,value:R.id},L(R.name),9,$n))),128))],512),[[Je,Se.value]])]),e("div",Sn,[o[73]||(o[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu",-1)),F(e("input",{"onUpdate:modelValue":o[19]||(o[19]=R=>Pe.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn"},null,512),[[Q,Pe.value]])]),e("div",null,[o[74]||(o[74]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),F(e("input",{"onUpdate:modelValue":o[20]||(o[20]=R=>De.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san"},null,512),[[Q,De.value]])])]),e("div",Cn,[e("button",{type:"button",onClick:o[21]||(o[21]=R=>xe.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:O,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):Z("",!0),$e.value?(n(),c("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:o[29]||(o[29]=R=>$e.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:o[28]||(o[28]=Ve(()=>{},["stop"]))},[e("div",Tn,[o[77]||(o[77]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu con",-1)),e("p",En,[o[76]||(o[76]=ke("Thêm vào: ",-1)),e("strong",null,L((ye=W.value[fe.value])==null?void 0:ye.label),1)])]),e("div",Rn,[e("div",null,[o[79]||(o[79]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),F(e("select",{"onUpdate:modelValue":o[24]||(o[24]=R=>Le.value=R),class:"w-full rounded-md border-gray-300 text-sm"},[o[78]||(o[78]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(n(!0),c(he,null,we(J.value,R=>(n(),c("option",{key:R.id,value:R.id},L(R.name),9,An))),128))],512),[[Je,Le.value]])]),e("div",Mn,[o[80]||(o[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu con",-1)),F(e("input",{"onUpdate:modelValue":o[25]||(o[25]=R=>We.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn 5 sao"},null,512),[[Q,We.value]])]),e("div",null,[o[81]||(o[81]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),F(e("input",{"onUpdate:modelValue":o[26]||(o[26]=R=>ie.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san-5-sao"},null,512),[[Q,ie.value]])])]),e("div",jn,[e("button",{type:"button",onClick:o[27]||(o[27]=R=>$e.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:Ee,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):Z("",!0),Ne.value?(n(),c("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:o[33]||(o[33]=R=>Ne.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:o[32]||(o[32]=Ve(()=>{},["stop"]))},[o[83]||(o[83]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm cột footer mới")],-1)),e("div",Pn,[e("div",null,[o[82]||(o[82]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tiêu đề cột",-1)),F(e("input",{"onUpdate:modelValue":o[30]||(o[30]=R=>U.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Thông tin"},null,512),[[Q,U.value]])])]),e("div",Ln,[e("button",{type:"button",onClick:o[31]||(o[31]=R=>Ne.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:ze,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):Z("",!0),P.value?(n(),c("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:o[39]||(o[39]=R=>P.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:o[38]||(o[38]=Ve(()=>{},["stop"]))},[e("div",In,[o[85]||(o[85]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm liên kết footer",-1)),e("p",Un,[o[84]||(o[84]=ke("Thêm vào: ",-1)),e("strong",null,L(((Te=Ce.value[l.value])==null?void 0:Te.title)||`Cột ${l.value+1}`),1)])]),e("div",Fn,[e("div",null,[o[87]||(o[87]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),F(e("select",{"onUpdate:modelValue":o[34]||(o[34]=R=>H.value=R),class:"w-full rounded-md border-gray-300 text-sm"},[o[86]||(o[86]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(n(!0),c(he,null,we(J.value,R=>(n(),c("option",{key:R.id,value:R.id},L(R.name),9,Dn))),128))],512),[[Je,H.value]])]),e("div",Nn,[o[88]||(o[88]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên liên kết",-1)),F(e("input",{"onUpdate:modelValue":o[35]||(o[35]=R=>h.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Giới thiệu"},null,512),[[Q,h.value]])]),e("div",null,[o[89]||(o[89]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),F(e("input",{"onUpdate:modelValue":o[36]||(o[36]=R=>Y.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /gioi-thieu"},null,512),[[Q,Y.value]])])]),e("div",zn,[e("button",{type:"button",onClick:o[37]||(o[37]=R=>P.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:Re,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):Z("",!0)])}}};function vs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fs={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht=Symbol.for("react.transitional.element"),On=Symbol.for("react.portal"),Bn=Symbol.for("react.fragment"),Hn=Symbol.for("react.strict_mode"),qn=Symbol.for("react.profiler"),Wn=Symbol.for("react.consumer"),Yn=Symbol.for("react.context"),Kn=Symbol.for("react.forward_ref"),Xn=Symbol.for("react.suspense"),Gn=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),Qn=Symbol.for("react.activity"),Gt=Symbol.iterator;function Jn(t){return t===null||typeof t!="object"?null:(t=Gt&&t[Gt]||t["@@iterator"],typeof t=="function"?t:null)}var ys={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hs=Object.assign,xs={};function _t(t,s,r){this.props=t,this.context=s,this.refs=xs,this.updater=r||ys}_t.prototype.isReactComponent={};_t.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};_t.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ws(){}ws.prototype=_t.prototype;function qt(t,s,r){this.props=t,this.context=s,this.refs=xs,this.updater=r||ys}var Wt=qt.prototype=new ws;Wt.constructor=qt;hs(Wt,_t.prototype);Wt.isPureReactComponent=!0;var Qt=Array.isArray;function Vt(){}var Ae={H:null,A:null,T:null,S:null},_s=Object.prototype.hasOwnProperty;function Yt(t,s,r){var d=r.ref;return{$$typeof:Ht,type:t,key:s,ref:d!==void 0?d:null,props:r}}function Zn(t,s){return Yt(t.type,s,t.props)}function Kt(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ht}function er(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Jt=/\/+/g;function Dt(t,s){return typeof t=="object"&&t!==null&&t.key!=null?er(""+t.key):s.toString(36)}function tr(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Vt,Vt):(t.status="pending",t.then(function(s){t.status==="pending"&&(t.status="fulfilled",t.value=s)},function(s){t.status==="pending"&&(t.status="rejected",t.reason=s)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function bt(t,s,r,d,p){var v=typeof t;(v==="undefined"||v==="boolean")&&(t=null);var m=!1;if(t===null)m=!0;else switch(v){case"bigint":case"string":case"number":m=!0;break;case"object":switch(t.$$typeof){case Ht:case On:m=!0;break;case bs:return m=t._init,bt(m(t._payload),s,r,d,p)}}if(m)return p=p(t),m=d===""?"."+Dt(t,0):d,Qt(p)?(r="",m!=null&&(r=m.replace(Jt,"$&/")+"/"),bt(p,s,r,"",function(a){return a})):p!=null&&(Kt(p)&&(p=Zn(p,r+(p.key==null||t&&t.key===p.key?"":(""+p.key).replace(Jt,"$&/")+"/")+m)),s.push(p)),1;m=0;var x=d===""?".":d+":";if(Qt(t))for(var u=0;u<t.length;u++)d=t[u],v=x+Dt(d,u),m+=bt(d,s,r,v,p);else if(u=Jn(t),typeof u=="function")for(t=u.call(t),u=0;!(d=t.next()).done;)d=d.value,v=x+Dt(d,u++),m+=bt(d,s,r,v,p);else if(v==="object"){if(typeof t.then=="function")return bt(tr(t),s,r,d,p);throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.")}return m}function Et(t,s,r){if(t==null)return t;var d=[],p=0;return bt(t,d,"","",function(v){return s.call(r,v,p++)}),d}function sr(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Zt=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ar={map:Et,forEach:function(t,s,r){Et(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return Et(t,function(){s++}),s},toArray:function(t){return Et(t,function(s){return s})||[]},only:function(t){if(!Kt(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Activity=Qn;ge.Children=ar;ge.Component=_t;ge.Fragment=Bn;ge.Profiler=qn;ge.PureComponent=qt;ge.StrictMode=Hn;ge.Suspense=Xn;ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ae;ge.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ae.H.useMemoCache(t)}};ge.cache=function(t){return function(){return t.apply(null,arguments)}};ge.cacheSignal=function(){return null};ge.cloneElement=function(t,s,r){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var d=hs({},t.props),p=t.key;if(s!=null)for(v in s.key!==void 0&&(p=""+s.key),s)!_s.call(s,v)||v==="key"||v==="__self"||v==="__source"||v==="ref"&&s.ref===void 0||(d[v]=s[v]);var v=arguments.length-2;if(v===1)d.children=r;else if(1<v){for(var m=Array(v),x=0;x<v;x++)m[x]=arguments[x+2];d.children=m}return Yt(t.type,p,d)};ge.createContext=function(t){return t={$$typeof:Yn,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:Wn,_context:t},t};ge.createElement=function(t,s,r){var d,p={},v=null;if(s!=null)for(d in s.key!==void 0&&(v=""+s.key),s)_s.call(s,d)&&d!=="key"&&d!=="__self"&&d!=="__source"&&(p[d]=s[d]);var m=arguments.length-2;if(m===1)p.children=r;else if(1<m){for(var x=Array(m),u=0;u<m;u++)x[u]=arguments[u+2];p.children=x}if(t&&t.defaultProps)for(d in m=t.defaultProps,m)p[d]===void 0&&(p[d]=m[d]);return Yt(t,v,p)};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:Kn,render:t}};ge.isValidElement=Kt;ge.lazy=function(t){return{$$typeof:bs,_payload:{_status:-1,_result:t},_init:sr}};ge.memo=function(t,s){return{$$typeof:Gn,type:t,compare:s===void 0?null:s}};ge.startTransition=function(t){var s=Ae.T,r={};Ae.T=r;try{var d=t(),p=Ae.S;p!==null&&p(r,d),typeof d=="object"&&d!==null&&typeof d.then=="function"&&d.then(Vt,Zt)}catch(v){Zt(v)}finally{s!==null&&r.types!==null&&(s.types=r.types),Ae.T=s}};ge.unstable_useCacheRefresh=function(){return Ae.H.useCacheRefresh()};ge.use=function(t){return Ae.H.use(t)};ge.useActionState=function(t,s,r){return Ae.H.useActionState(t,s,r)};ge.useCallback=function(t,s){return Ae.H.useCallback(t,s)};ge.useContext=function(t){return Ae.H.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t,s){return Ae.H.useDeferredValue(t,s)};ge.useEffect=function(t,s){return Ae.H.useEffect(t,s)};ge.useEffectEvent=function(t){return Ae.H.useEffectEvent(t)};ge.useId=function(){return Ae.H.useId()};ge.useImperativeHandle=function(t,s,r){return Ae.H.useImperativeHandle(t,s,r)};ge.useInsertionEffect=function(t,s){return Ae.H.useInsertionEffect(t,s)};ge.useLayoutEffect=function(t,s){return Ae.H.useLayoutEffect(t,s)};ge.useMemo=function(t,s){return Ae.H.useMemo(t,s)};ge.useOptimistic=function(t,s){return Ae.H.useOptimistic(t,s)};ge.useReducer=function(t,s,r){return Ae.H.useReducer(t,s,r)};ge.useRef=function(t){return Ae.H.useRef(t)};ge.useState=function(t){return Ae.H.useState(t)};ge.useSyncExternalStore=function(t,s,r){return Ae.H.useSyncExternalStore(t,s,r)};ge.useTransition=function(){return Ae.H.useTransition()};ge.version="19.2.0";fs.exports=ge;var ht=fs.exports;const B=vs(ht);var ks={exports:{}},Ge={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var or=ht;function $s(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ct(){}var Xe={d:{f:ct,r:function(){throw Error($s(522))},D:ct,C:ct,L:ct,m:ct,X:ct,S:ct,M:ct},p:0,findDOMNode:null},lr=Symbol.for("react.portal");function nr(t,s,r){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lr,key:d==null?null:""+d,children:t,containerInfo:s,implementation:r}}var $t=or.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Lt(t,s){if(t==="font")return"";if(typeof s=="string")return s==="use-credentials"?s:""}Ge.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Xe;Ge.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)throw Error($s(299));return nr(t,s,null,r)};Ge.flushSync=function(t){var s=$t.T,r=Xe.p;try{if($t.T=null,Xe.p=2,t)return t()}finally{$t.T=s,Xe.p=r,Xe.d.f()}};Ge.preconnect=function(t,s){typeof t=="string"&&(s?(s=s.crossOrigin,s=typeof s=="string"?s==="use-credentials"?s:"":void 0):s=null,Xe.d.C(t,s))};Ge.prefetchDNS=function(t){typeof t=="string"&&Xe.d.D(t)};Ge.preinit=function(t,s){if(typeof t=="string"&&s&&typeof s.as=="string"){var r=s.as,d=Lt(r,s.crossOrigin),p=typeof s.integrity=="string"?s.integrity:void 0,v=typeof s.fetchPriority=="string"?s.fetchPriority:void 0;r==="style"?Xe.d.S(t,typeof s.precedence=="string"?s.precedence:void 0,{crossOrigin:d,integrity:p,fetchPriority:v}):r==="script"&&Xe.d.X(t,{crossOrigin:d,integrity:p,fetchPriority:v,nonce:typeof s.nonce=="string"?s.nonce:void 0})}};Ge.preinitModule=function(t,s){if(typeof t=="string")if(typeof s=="object"&&s!==null){if(s.as==null||s.as==="script"){var r=Lt(s.as,s.crossOrigin);Xe.d.M(t,{crossOrigin:r,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0})}}else s==null&&Xe.d.M(t)};Ge.preload=function(t,s){if(typeof t=="string"&&typeof s=="object"&&s!==null&&typeof s.as=="string"){var r=s.as,d=Lt(r,s.crossOrigin);Xe.d.L(t,r,{crossOrigin:d,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0,type:typeof s.type=="string"?s.type:void 0,fetchPriority:typeof s.fetchPriority=="string"?s.fetchPriority:void 0,referrerPolicy:typeof s.referrerPolicy=="string"?s.referrerPolicy:void 0,imageSrcSet:typeof s.imageSrcSet=="string"?s.imageSrcSet:void 0,imageSizes:typeof s.imageSizes=="string"?s.imageSizes:void 0,media:typeof s.media=="string"?s.media:void 0})}};Ge.preloadModule=function(t,s){if(typeof t=="string")if(s){var r=Lt(s.as,s.crossOrigin);Xe.d.m(t,{as:typeof s.as=="string"&&s.as!=="script"?s.as:void 0,crossOrigin:r,integrity:typeof s.integrity=="string"?s.integrity:void 0})}else Xe.d.m(t)};Ge.requestFormReset=function(t){Xe.d.r(t)};Ge.unstable_batchedUpdates=function(t,s){return t(s)};Ge.useFormState=function(t,s,r){return $t.H.useFormState(t,s,r)};Ge.useFormStatus=function(){return $t.H.useHostTransitionStatus()};Ge.version="19.2.0";function Ss(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ss)}catch(t){console.error(t)}}Ss(),ks.exports=Ge;var rr=ks.exports;const ir=vs(rr);var dr=t=>{switch(t){case"success":return pr;case"info":return gr;case"warning":return mr;case"error":return vr;default:return null}},ur=Array(12).fill(0),cr=({visible:t,className:s})=>B.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},B.createElement("div",{className:"sonner-spinner"},ur.map((r,d)=>B.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${d}`})))),pr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),mr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),gr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),vr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},B.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),B.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),br=()=>{let[t,s]=B.useState(document.hidden);return B.useEffect(()=>{let r=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},Ot=1,yr=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;let{message:r,...d}=t,p=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:Ot++,v=this.toasts.find(x=>x.id===p),m=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(p)&&this.dismissedToasts.delete(p),v?this.toasts=this.toasts.map(x=>x.id===p?(this.publish({...x,...t,id:p,title:r}),{...x,...t,id:p,dismissible:m,title:r}):x):this.addToast({title:r,...d,dismissible:m,id:p}),p},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(s=>{this.subscribers.forEach(r=>r({id:s.id,dismiss:!0}))}),this.subscribers.forEach(s=>s({id:t,dismiss:!0})),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let r;s.loading!==void 0&&(r=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));let d=t instanceof Promise?t:t(),p=r!==void 0,v,m=d.then(async u=>{if(v=["resolve",u],B.isValidElement(u))p=!1,this.create({id:r,type:"default",message:u});else if(xr(u)&&!u.ok){p=!1;let a=typeof s.error=="function"?await s.error(`HTTP error! status: ${u.status}`):s.error,_=typeof s.description=="function"?await s.description(`HTTP error! status: ${u.status}`):s.description;this.create({id:r,type:"error",message:a,description:_})}else if(s.success!==void 0){p=!1;let a=typeof s.success=="function"?await s.success(u):s.success,_=typeof s.description=="function"?await s.description(u):s.description;this.create({id:r,type:"success",message:a,description:_})}}).catch(async u=>{if(v=["reject",u],s.error!==void 0){p=!1;let a=typeof s.error=="function"?await s.error(u):s.error,_=typeof s.description=="function"?await s.description(u):s.description;this.create({id:r,type:"error",message:a,description:_})}}).finally(()=>{var u;p&&(this.dismiss(r),r=void 0),(u=s.finally)==null||u.call(s)}),x=()=>new Promise((u,a)=>m.then(()=>v[0]==="reject"?a(v[1]):u(v[1])).catch(a));return typeof r!="string"&&typeof r!="number"?{unwrap:x}:Object.assign(r,{unwrap:x})},this.custom=(t,s)=>{let r=(s==null?void 0:s.id)||Ot++;return this.create({jsx:t(r),id:r,...s}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Qe=new yr,hr=(t,s)=>{let r=(s==null?void 0:s.id)||Ot++;return Qe.addToast({title:t,...s,id:r}),r},xr=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",wr=hr,_r=()=>Qe.toasts,kr=()=>Qe.getActiveToasts(),yt=Object.assign(wr,{success:Qe.success,info:Qe.info,warning:Qe.warning,error:Qe.error,custom:Qe.custom,message:Qe.message,promise:Qe.promise,dismiss:Qe.dismiss,loading:Qe.loading},{getHistory:_r,getToasts:kr});function $r(t,{insertAt:s}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css",s==="top"&&r.firstChild?r.insertBefore(d,r.firstChild):r.appendChild(d),d.styleSheet?d.styleSheet.cssText=t:d.appendChild(document.createTextNode(t))}$r(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Rt(t){return t.label!==void 0}var Sr=3,Cr="32px",Tr="16px",es=4e3,Er=356,Rr=14,Ar=20,Mr=200;function at(...t){return t.filter(Boolean).join(" ")}function jr(t){let[s,r]=t.split("-"),d=[];return s&&d.push(s),r&&d.push(r),d}var Pr=t=>{var s,r,d,p,v,m,x,u,a,_,I;let{invert:te,toast:i,unstyled:se,interacting:V,setHeights:ue,visibleToasts:$,heights:y,index:f,toasts:M,expanded:T,removeToast:S,defaultRichColors:C,closeButton:pe,style:J,cancelButtonStyle:W,actionButtonStyle:xe,className:$e="",descriptionClassName:fe="",duration:Se,position:Pe,gap:De,loadingIcon:Le,expandByDefault:We,classNames:ie,icons:ne,closeButtonAriaLabel:k="Close toast",pauseWhenPageIsHidden:X}=t,[E,O]=B.useState(null),[re,Ee]=B.useState(null),[ve,A]=B.useState(!1),[b,K]=B.useState(!1),[G,oe]=B.useState(!1),[ae,Ie]=B.useState(!1),[j,Ce]=B.useState(!1),[Ne,P]=B.useState(0),[l,U]=B.useState(0),H=B.useRef(i.duration||Se||es),h=B.useRef(null),Y=B.useRef(null),le=f===0,ze=f+1<=$,ee=i.type,Re=i.dismissible!==!1,Fe=i.className||"",Ze=i.descriptionClassName||"",Ue=B.useMemo(()=>y.findIndex(q=>q.toastId===i.id)||0,[y,i.id]),He=B.useMemo(()=>{var q;return(q=i.closeButton)!=null?q:pe},[i.closeButton,pe]),ot=B.useMemo(()=>i.duration||Se||es,[i.duration,Se]),Oe=B.useRef(0),Ye=B.useRef(0),ft=B.useRef(0),rt=B.useRef(null),[It,D]=Pe.split("-"),o=B.useMemo(()=>y.reduce((q,ce,me)=>me>=Ue?q:q+ce.height,0),[y,Ue]),be=br(),ye=i.invert||te,Te=ee==="loading";Ye.current=B.useMemo(()=>Ue*De+o,[Ue,o]),B.useEffect(()=>{H.current=ot},[ot]),B.useEffect(()=>{A(!0)},[]),B.useEffect(()=>{let q=Y.current;if(q){let ce=q.getBoundingClientRect().height;return U(ce),ue(me=>[{toastId:i.id,height:ce,position:i.position},...me]),()=>ue(me=>me.filter(Ke=>Ke.toastId!==i.id))}},[ue,i.id]),B.useLayoutEffect(()=>{if(!ve)return;let q=Y.current,ce=q.style.height;q.style.height="auto";let me=q.getBoundingClientRect().height;q.style.height=ce,U(me),ue(Ke=>Ke.find(tt=>tt.toastId===i.id)?Ke.map(tt=>tt.toastId===i.id?{...tt,height:me}:tt):[{toastId:i.id,height:me,position:i.position},...Ke])},[ve,i.title,i.description,ue,i.id]);let R=B.useCallback(()=>{K(!0),P(Ye.current),ue(q=>q.filter(ce=>ce.toastId!==i.id)),setTimeout(()=>{S(i)},Mr)},[i,S,ue,Ye]);B.useEffect(()=>{if(i.promise&&ee==="loading"||i.duration===1/0||i.type==="loading")return;let q;return T||V||X&&be?(()=>{if(ft.current<Oe.current){let ce=new Date().getTime()-Oe.current;H.current=H.current-ce}ft.current=new Date().getTime()})():H.current!==1/0&&(Oe.current=new Date().getTime(),q=setTimeout(()=>{var ce;(ce=i.onAutoClose)==null||ce.call(i,i),R()},H.current)),()=>clearTimeout(q)},[T,V,i,ee,X,be,R]),B.useEffect(()=>{i.delete&&R()},[R,i.delete]);function Me(){var q,ce,me;return ne!=null&&ne.loading?B.createElement("div",{className:at(ie==null?void 0:ie.loader,(q=i==null?void 0:i.classNames)==null?void 0:q.loader,"sonner-loader"),"data-visible":ee==="loading"},ne.loading):Le?B.createElement("div",{className:at(ie==null?void 0:ie.loader,(ce=i==null?void 0:i.classNames)==null?void 0:ce.loader,"sonner-loader"),"data-visible":ee==="loading"},Le):B.createElement(cr,{className:at(ie==null?void 0:ie.loader,(me=i==null?void 0:i.classNames)==null?void 0:me.loader),visible:ee==="loading"})}return B.createElement("li",{tabIndex:0,ref:Y,className:at($e,Fe,ie==null?void 0:ie.toast,(s=i==null?void 0:i.classNames)==null?void 0:s.toast,ie==null?void 0:ie.default,ie==null?void 0:ie[ee],(r=i==null?void 0:i.classNames)==null?void 0:r[ee]),"data-sonner-toast":"","data-rich-colors":(d=i.richColors)!=null?d:C,"data-styled":!(i.jsx||i.unstyled||se),"data-mounted":ve,"data-promise":!!i.promise,"data-swiped":j,"data-removed":b,"data-visible":ze,"data-y-position":It,"data-x-position":D,"data-index":f,"data-front":le,"data-swiping":G,"data-dismissible":Re,"data-type":ee,"data-invert":ye,"data-swipe-out":ae,"data-swipe-direction":re,"data-expanded":!!(T||We&&ve),style:{"--index":f,"--toasts-before":f,"--z-index":M.length-f,"--offset":`${b?Ne:Ye.current}px`,"--initial-height":We?"auto":`${l}px`,...J,...i.style},onDragEnd:()=>{oe(!1),O(null),rt.current=null},onPointerDown:q=>{Te||!Re||(h.current=new Date,P(Ye.current),q.target.setPointerCapture(q.pointerId),q.target.tagName!=="BUTTON"&&(oe(!0),rt.current={x:q.clientX,y:q.clientY}))},onPointerUp:()=>{var q,ce,me,Ke;if(ae||!Re)return;rt.current=null;let tt=Number(((q=Y.current)==null?void 0:q.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),dt=Number(((ce=Y.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),mt=new Date().getTime()-((me=h.current)==null?void 0:me.getTime()),st=E==="x"?tt:dt,ut=Math.abs(st)/mt;if(Math.abs(st)>=Ar||ut>.11){P(Ye.current),(Ke=i.onDismiss)==null||Ke.call(i,i),Ee(E==="x"?tt>0?"right":"left":dt>0?"down":"up"),R(),Ie(!0),Ce(!1);return}oe(!1),O(null)},onPointerMove:q=>{var ce,me,Ke,tt;if(!rt.current||!Re||((ce=window.getSelection())==null?void 0:ce.toString().length)>0)return;let dt=q.clientY-rt.current.y,mt=q.clientX-rt.current.x,st=(me=t.swipeDirections)!=null?me:jr(Pe);!E&&(Math.abs(mt)>1||Math.abs(dt)>1)&&O(Math.abs(mt)>Math.abs(dt)?"x":"y");let ut={x:0,y:0};E==="y"?(st.includes("top")||st.includes("bottom"))&&(st.includes("top")&&dt<0||st.includes("bottom")&&dt>0)&&(ut.y=dt):E==="x"&&(st.includes("left")||st.includes("right"))&&(st.includes("left")&&mt<0||st.includes("right")&&mt>0)&&(ut.x=mt),(Math.abs(ut.x)>0||Math.abs(ut.y)>0)&&Ce(!0),(Ke=Y.current)==null||Ke.style.setProperty("--swipe-amount-x",`${ut.x}px`),(tt=Y.current)==null||tt.style.setProperty("--swipe-amount-y",`${ut.y}px`)}},He&&!i.jsx?B.createElement("button",{"aria-label":k,"data-disabled":Te,"data-close-button":!0,onClick:Te||!Re?()=>{}:()=>{var q;R(),(q=i.onDismiss)==null||q.call(i,i)},className:at(ie==null?void 0:ie.closeButton,(p=i==null?void 0:i.classNames)==null?void 0:p.closeButton)},(v=ne==null?void 0:ne.close)!=null?v:fr):null,i.jsx||ht.isValidElement(i.title)?i.jsx?i.jsx:typeof i.title=="function"?i.title():i.title:B.createElement(B.Fragment,null,ee||i.icon||i.promise?B.createElement("div",{"data-icon":"",className:at(ie==null?void 0:ie.icon,(m=i==null?void 0:i.classNames)==null?void 0:m.icon)},i.promise||i.type==="loading"&&!i.icon?i.icon||Me():null,i.type!=="loading"?i.icon||(ne==null?void 0:ne[ee])||dr(ee):null):null,B.createElement("div",{"data-content":"",className:at(ie==null?void 0:ie.content,(x=i==null?void 0:i.classNames)==null?void 0:x.content)},B.createElement("div",{"data-title":"",className:at(ie==null?void 0:ie.title,(u=i==null?void 0:i.classNames)==null?void 0:u.title)},typeof i.title=="function"?i.title():i.title),i.description?B.createElement("div",{"data-description":"",className:at(fe,Ze,ie==null?void 0:ie.description,(a=i==null?void 0:i.classNames)==null?void 0:a.description)},typeof i.description=="function"?i.description():i.description):null),ht.isValidElement(i.cancel)?i.cancel:i.cancel&&Rt(i.cancel)?B.createElement("button",{"data-button":!0,"data-cancel":!0,style:i.cancelButtonStyle||W,onClick:q=>{var ce,me;Rt(i.cancel)&&Re&&((me=(ce=i.cancel).onClick)==null||me.call(ce,q),R())},className:at(ie==null?void 0:ie.cancelButton,(_=i==null?void 0:i.classNames)==null?void 0:_.cancelButton)},i.cancel.label):null,ht.isValidElement(i.action)?i.action:i.action&&Rt(i.action)?B.createElement("button",{"data-button":!0,"data-action":!0,style:i.actionButtonStyle||xe,onClick:q=>{var ce,me;Rt(i.action)&&((me=(ce=i.action).onClick)==null||me.call(ce,q),!q.defaultPrevented&&R())},className:at(ie==null?void 0:ie.actionButton,(I=i==null?void 0:i.classNames)==null?void 0:I.actionButton)},i.action.label):null))};function ts(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Lr(t,s){let r={};return[t,s].forEach((d,p)=>{let v=p===1,m=v?"--mobile-offset":"--offset",x=v?Tr:Cr;function u(a){["top","right","bottom","left"].forEach(_=>{r[`${m}-${_}`]=typeof a=="number"?`${a}px`:a})}typeof d=="number"||typeof d=="string"?u(d):typeof d=="object"?["top","right","bottom","left"].forEach(a=>{d[a]===void 0?r[`${m}-${a}`]=x:r[`${m}-${a}`]=typeof d[a]=="number"?`${d[a]}px`:d[a]}):u(x)}),r}ht.forwardRef(function(t,s){let{invert:r,position:d="bottom-right",hotkey:p=["altKey","KeyT"],expand:v,closeButton:m,className:x,offset:u,mobileOffset:a,theme:_="light",richColors:I,duration:te,style:i,visibleToasts:se=Sr,toastOptions:V,dir:ue=ts(),gap:$=Rr,loadingIcon:y,icons:f,containerAriaLabel:M="Notifications",pauseWhenPageIsHidden:T}=t,[S,C]=B.useState([]),pe=B.useMemo(()=>Array.from(new Set([d].concat(S.filter(X=>X.position).map(X=>X.position)))),[S,d]),[J,W]=B.useState([]),[xe,$e]=B.useState(!1),[fe,Se]=B.useState(!1),[Pe,De]=B.useState(_!=="system"?_:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Le=B.useRef(null),We=p.join("+").replace(/Key/g,"").replace(/Digit/g,""),ie=B.useRef(null),ne=B.useRef(!1),k=B.useCallback(X=>{C(E=>{var O;return(O=E.find(re=>re.id===X.id))!=null&&O.delete||Qe.dismiss(X.id),E.filter(({id:re})=>re!==X.id)})},[]);return B.useEffect(()=>Qe.subscribe(X=>{if(X.dismiss){C(E=>E.map(O=>O.id===X.id?{...O,delete:!0}:O));return}setTimeout(()=>{ir.flushSync(()=>{C(E=>{let O=E.findIndex(re=>re.id===X.id);return O!==-1?[...E.slice(0,O),{...E[O],...X},...E.slice(O+1)]:[X,...E]})})})}),[]),B.useEffect(()=>{if(_!=="system"){De(_);return}if(_==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?De("dark"):De("light")),typeof window>"u")return;let X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:E})=>{De(E?"dark":"light")})}catch{X.addListener(({matches:O})=>{try{De(O?"dark":"light")}catch(re){console.error(re)}})}},[_]),B.useEffect(()=>{S.length<=1&&$e(!1)},[S]),B.useEffect(()=>{let X=E=>{var O,re;p.every(Ee=>E[Ee]||E.code===Ee)&&($e(!0),(O=Le.current)==null||O.focus()),E.code==="Escape"&&(document.activeElement===Le.current||(re=Le.current)!=null&&re.contains(document.activeElement))&&$e(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[p]),B.useEffect(()=>{if(Le.current)return()=>{ie.current&&(ie.current.focus({preventScroll:!0}),ie.current=null,ne.current=!1)}},[Le.current]),B.createElement("section",{ref:s,"aria-label":`${M} ${We}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},pe.map((X,E)=>{var O;let[re,Ee]=X.split("-");return S.length?B.createElement("ol",{key:X,dir:ue==="auto"?ts():ue,tabIndex:-1,ref:Le,className:x,"data-sonner-toaster":!0,"data-theme":Pe,"data-y-position":re,"data-lifted":xe&&S.length>1&&!v,"data-x-position":Ee,style:{"--front-toast-height":`${((O=J[0])==null?void 0:O.height)||0}px`,"--width":`${Er}px`,"--gap":`${$}px`,...i,...Lr(u,a)},onBlur:ve=>{ne.current&&!ve.currentTarget.contains(ve.relatedTarget)&&(ne.current=!1,ie.current&&(ie.current.focus({preventScroll:!0}),ie.current=null))},onFocus:ve=>{ve.target instanceof HTMLElement&&ve.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,ie.current=ve.relatedTarget)},onMouseEnter:()=>$e(!0),onMouseMove:()=>$e(!0),onMouseLeave:()=>{fe||$e(!1)},onDragEnd:()=>$e(!1),onPointerDown:ve=>{ve.target instanceof HTMLElement&&ve.target.dataset.dismissible==="false"||Se(!0)},onPointerUp:()=>Se(!1)},S.filter(ve=>!ve.position&&E===0||ve.position===X).map((ve,A)=>{var b,K;return B.createElement(Pr,{key:ve.id,icons:f,index:A,toast:ve,defaultRichColors:I,duration:(b=V==null?void 0:V.duration)!=null?b:te,className:V==null?void 0:V.className,descriptionClassName:V==null?void 0:V.descriptionClassName,invert:r,visibleToasts:se,closeButton:(K=V==null?void 0:V.closeButton)!=null?K:m,interacting:fe,position:X,style:V==null?void 0:V.style,unstyled:V==null?void 0:V.unstyled,classNames:V==null?void 0:V.classNames,cancelButtonStyle:V==null?void 0:V.cancelButtonStyle,actionButtonStyle:V==null?void 0:V.actionButtonStyle,removeToast:k,toasts:S.filter(G=>G.position==ve.position),heights:J.filter(G=>G.position==ve.position),setHeights:W,expandByDefault:v,gap:$,loadingIcon:y,expanded:xe,pauseWhenPageIsHidden:T,swipeDirections:t.swipeDirections})})):null}))});const Ir={class:"min-h-screen bg-gray-100"},Ur={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Fr={class:"px-4 py-6 sm:px-0"},Dr={class:"bg-white shadow rounded-lg p-6 mb-6"},Nr={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},zr={class:"flex flex-col items-center gap-2"},Vr={class:"inline-flex items-center gap-2 text-blue-600"},Or={class:"text-2xl font-bold"},Br={class:"flex flex-col items-center gap-2"},Hr={class:"inline-flex items-center gap-2 text-green-600"},qr={class:"text-2xl font-bold"},Wr={class:"flex flex-col items-center gap-2"},Yr={class:"inline-flex items-center gap-2 text-red-600"},Kr={class:"text-2xl font-bold"},Xr={class:"flex flex-col items-center gap-2"},Gr={class:"inline-flex items-center gap-2 text-purple-600"},Qr={class:"text-2xl font-bold"},Jr={class:"bg-white shadow rounded-lg p-6"},Zr={class:"flex justify-between items-center mb-4"},ei={class:"space-y-4"},ti={class:"flex justify-between items-start mb-2"},si={class:"font-medium text-gray-900"},ai={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},oi={class:"font-medium"},li={class:"font-medium"},ni={class:"font-medium"},ri={class:"font-medium"},ii={key:0,class:"mt-4"},di={class:"grid grid-cols-7 gap-1 text-xs"},ui={class:"text-gray-500"},ci={class:"font-medium"},pi={__name:"Monitoring",setup(t){const s=g({total_websites:0,online_websites:0,offline_websites:0}),r=g([]),d=g("7days"),p=qe(()=>r.value.filter(u=>u.ssl_enabled).length),v=async()=>{try{const u=await z.get("/api/monitoring/uptime");s.value=u.data}catch{yt.error("Failed to fetch uptime statistics")}},m=async()=>{try{const _=(await z.get("/api/websites")).data.map(async I=>{try{const te=await z.get(`/api/monitoring/stats/${I.id}?period=${d.value}`);return{...I,...te.data.summary}}catch{return{...I,total_visits:0,total_unique_visitors:0,total_bandwidth:"0 B",average_response_time:0,uptime_percentage:0,daily_stats:[]}}});r.value=await Promise.all(_)}catch{yt.error("Failed to fetch website statistics")}},x=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"});return et(()=>{v(),m()}),(u,a)=>(n(),c("div",Ir,[e("div",Ur,[e("div",Fr,[a[13]||(a[13]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-6"},"Monitoring",-1)),e("div",Dr,[a[5]||(a[5]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"System Overview",-1)),e("div",Nr,[e("div",zr,[e("div",Vr,[N(w(gt),{class:"size-5"}),e("span",Or,L(s.value.total_websites),1)]),a[1]||(a[1]=e("p",{class:"text-sm text-gray-500"},"Total Websites",-1))]),e("div",Br,[e("div",Hr,[N(w(St),{class:"size-5"}),e("span",qr,L(s.value.online_websites),1)]),a[2]||(a[2]=e("p",{class:"text-sm text-gray-500"},"Online",-1))]),e("div",Wr,[e("div",Yr,[N(w(Ct),{class:"size-5"}),e("span",Kr,L(s.value.offline_websites),1)]),a[3]||(a[3]=e("p",{class:"text-sm text-gray-500"},"Offline",-1))]),e("div",Xr,[e("div",Gr,[N(w(xt),{class:"size-5"}),e("span",Qr,L(p.value),1)]),a[4]||(a[4]=e("p",{class:"text-sm text-gray-500"},"SSL Enabled",-1))])])]),e("div",Jr,[e("div",Zr,[a[7]||(a[7]=e("h2",{class:"text-lg font-medium text-gray-900"},"Website Statistics",-1)),F(e("select",{"onUpdate:modelValue":a[0]||(a[0]=_=>d.value=_),onChange:m,class:"border-gray-300 rounded-md shadow-sm"},[...a[6]||(a[6]=[e("option",{value:"24hours"},"Last 24 Hours",-1),e("option",{value:"7days"},"Last 7 Days",-1),e("option",{value:"30days"},"Last 30 Days",-1),e("option",{value:"90days"},"Last 90 Days",-1)])],544),[[Je,d.value]])]),e("div",ei,[(n(!0),c(he,null,we(r.value,_=>(n(),c("div",{key:_.id,class:"border rounded-lg p-4"},[e("div",ti,[e("h3",si,L(_.domain),1),e("span",{class:je(["inline-flex items-center gap-1",_.current_is_online?"text-green-600":"text-red-600"])},[_.current_is_online?(n(),de(w(St),{key:0,class:"size-4"})):(n(),de(w(Ct),{key:1,class:"size-4"})),ke(" "+L(_.current_is_online?"Online":"Offline"),1)],2)]),e("div",ai,[e("div",null,[a[8]||(a[8]=e("p",{class:"text-gray-500"},"Visits",-1)),e("p",oi,L(_.total_visits),1)]),e("div",null,[a[9]||(a[9]=e("p",{class:"text-gray-500"},"Unique Visitors",-1)),e("p",li,L(_.total_unique_visitors),1)]),e("div",null,[a[10]||(a[10]=e("p",{class:"text-gray-500"},"Bandwidth",-1)),e("p",ni,L(_.total_bandwidth),1)]),e("div",null,[a[11]||(a[11]=e("p",{class:"text-gray-500"},"Avg Response Time",-1)),e("p",ri,L(_.average_response_time)+"ms",1)])]),_.daily_stats&&_.daily_stats.length>0?(n(),c("div",ii,[a[12]||(a[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Daily Stats",-1)),e("div",di,[(n(!0),c(he,null,we(_.daily_stats,I=>(n(),c("div",{key:I.date,class:"text-center"},[e("div",ui,L(x(I.date)),1),e("div",ci,L(I.visits),1)]))),128))])])):Z("",!0)]))),128))])])])])]))}},mi={class:"p-8 max-w-7xl mx-auto"},gi={class:"flex flex-wrap gap-2 mb-4"},vi={class:"flex flex-wrap justify-between items-start gap-4 mb-6"},fi={class:"flex justify-between items-center gap-4 p-4 bg-white rounded-lg border border-slate-200 mb-6"},bi={class:"flex gap-2 items-center"},yi={class:"relative w-72"},hi={class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"},xi={class:"bg-white rounded-lg border border-slate-200"},wi={key:0,class:"px-6 py-4 text-sm text-gray-500"},_i={key:1,class:"flex flex-col"},ki={class:"list-none"},$i={class:"grid grid-cols-12 gap-4 items-center px-6 py-4 cursor-pointer hover:bg-slate-50"},Si={class:"col-span-6 flex items-center gap-3"},Ci={class:"flex flex-col"},Ti={class:"text-slate-800 text-sm font-medium"},Ei={class:"text-slate-500 text-xs"},Ri={class:"col-span-3 text-sm text-slate-600"},Ai={class:"col-span-1 text-sm text-slate-600"},Mi={class:"col-span-2 flex justify-end gap-2 text-slate-500"},ji=["onClick"],Pi=["onClick"],Li=["onClick"],Ii={class:"pl-10 bg-slate-50/50"},Ui={class:"col-span-6 flex items-center gap-2 text-sm text-slate-700"},Fi={class:"col-span-3 text-sm text-slate-600"},Di={class:"col-span-1 text-sm text-slate-600"},Ni={class:"col-span-2 flex justify-end gap-2 text-slate-500"},zi=["onClick"],Vi=["onClick"],Oi=["onClick"],Bi={__name:"FoldersManagement",setup(t){const r=pt().params.websiteId,d=g([]),p=g(null),v=g(!1),m=g(""),x=g(""),u=g(""),a=async()=>{v.value=!0,m.value="";try{const[$,y]=await Promise.all([z.get(`/api/websites/${r}`),z.get(`/api/websites/${r}/folders`)]);p.value=$.data;const M=(y.data||[]).map(T=>({...T,id:Number(T.id),parent_id:T.parent_id==null?null:Number(T.parent_id)}));d.value=M}finally{v.value=!1}},_=$=>{const y=$.id,f=te($.id),M=f?`/preview/folder/${y}/${f}`:`/preview/folder/${y}`,T=localStorage.getItem("adminToken")||"";if(!T){window.open(M,"_blank");return}const S=`${M}?token=${encodeURIComponent(T)}`;window.open(S,"_blank")},I=$=>{if(!p.value)return;const y=te($.id);if(!y)return;const f=p.value.domain.split("."),M=f.length>2?f.slice(-2).join("."):p.value.domain,S=`${p.value.ssl_enabled?"https://":"http://"}${M}/${y}`;window.open(S,"_blank")},te=$=>{const y=new Map((d.value||[]).map(T=>[String(T.id),T]));let f=y.get(String($));const M=[];for(;f&&(f.slug&&M.unshift(f.slug),!(!f.parent_id||(f=y.get(String(f.parent_id)),f&&String(f.id)===String($)))););return M.join("/")},i=qe(()=>{const $=[...d.value||[]],y=new Map($.map(J=>[String(J.id),J])),f=J=>J.sort((W,xe)=>(W.name||"").localeCompare(xe.name||"")),M=J=>$.filter(W=>String(W.parent_id)===String(J)),T=J=>!J.parent_id||!y.has(String(J.parent_id))||String(J.parent_id)===String(J.id),S=f($.filter(T)),C=[],pe=(J,W)=>{C.push({...J,depth:W}),f(M(J.id)).forEach(xe=>pe(xe,W+1))};return S.forEach(J=>pe(J,0)),C}),se=qe(()=>{const $=(u.value||"").trim().toLowerCase(),y=i.value,f=new Set(y.filter(S=>S.depth===0).map(S=>S.id));if(!$)return y.filter(S=>f.has(S.id));const M=y.filter(S=>(S.name||"").toLowerCase().includes($)||(S.slug||"").toLowerCase().includes($)),T=new Set(M.map(S=>{let C=S;for(;C&&C.depth>0;){const pe=y.find(J=>String(J.id)===String(C.parent_id));if(!pe)break;C=pe}return C?C.id:S.id}));return y.filter(S=>S.depth===0&&T.has(S.id))}),V=$=>{const y=(u.value||"").trim().toLowerCase(),M=i.value.filter(T=>String(T.parent_id)===String($));return y?M.filter(T=>(T.name||"").toLowerCase().includes(y)||(T.slug||"").toLowerCase().includes(y)):M},ue=async $=>{var y,f;m.value="",x.value="";try{await z.delete(`/api/websites/${r}/folders/${$.id}`),d.value=(d.value||[]).filter(M=>M.id!==$.id),m.value="Đã xóa thư mục",x.value="success"}catch(M){m.value=((f=(y=M==null?void 0:M.response)==null?void 0:y.data)==null?void 0:f.error)||"Không thể xóa thư mục",x.value="error"}};return et(a),($,y)=>{const f=nt("router-link");return n(),c("div",mi,[e("div",gi,[N(f,{to:"/",class:"text-slate-500 text-sm font-medium hover:text-primary"},{default:_e(()=>[...y[1]||(y[1]=[ke("Bảng điều khiển",-1)])]),_:1}),y[2]||(y[2]=e("span",{class:"text-slate-500 text-sm font-medium"},"/",-1)),y[3]||(y[3]=e("span",{class:"text-slate-800 text-sm font-medium"},"Danh mục",-1))]),e("div",vi,[y[5]||(y[5]=e("div",{class:"flex flex-col gap-2"},[e("h1",{class:"text-slate-900 text-3xl font-bold leading-tight tracking-tight"},"Quản lý Danh mục"),e("p",{class:"text-slate-500 text-base"},"Thêm, sửa đổi và tổ chức các danh mục.")],-1)),N(f,{to:`/websites/${w(r)}/folders/new`,class:"flex items-center justify-center rounded-lg h-10 bg-primary text-white gap-2 text-sm font-bold px-4 hover:bg-primary/90"},{default:_e(()=>[...y[4]||(y[4]=[e("span",null,"Tạo thư mục",-1)])]),_:1},8,["to"])]),e("div",fi,[e("div",bi,[e("div",yi,[e("span",hi,[N(w(Ls),{class:"size-4"})]),F(e("input",{"onUpdate:modelValue":y[0]||(y[0]=M=>u.value=M),class:"w-full pl-10 pr-4 py-2 text-sm border border-slate-300 rounded-lg bg-background-light focus:ring-primary focus:border-primary",placeholder:"Tìm danh mục...",type:"text"},null,512),[[Q,u.value]])]),e("button",{type:"button",onClick:a,class:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg"},[N(w(Is),{class:"size-5"})])]),N(f,{to:`/websites/${w(r)}/pages`,class:"text-sm text-primary"},{default:_e(()=>[...y[6]||(y[6]=[ke("Quay lại Pages",-1)])]),_:1},8,["to"])]),e("div",xi,[y[7]||(y[7]=Tt('<div class="grid grid-cols-12 gap-4 px-6 py-3 border-b border-slate-200"><div class="col-span-6 text-xs font-semibold text-slate-500 uppercase">Tên danh mục</div><div class="col-span-3 text-xs font-semibold text-slate-500 uppercase">Slug</div><div class="col-span-1 text-xs font-semibold text-slate-500 uppercase">Số page</div><div class="col-span-2 text-xs font-semibold text-slate-500 uppercase text-right">Hành động</div></div>',1)),v.value?(n(),c("div",wi,"Đang tải...")):(n(),c("div",_i,[(n(!0),c(he,null,we(se.value,M=>(n(),c("details",{key:M.id,class:"group border-b border-slate-200",open:""},[e("summary",ki,[e("div",$i,[e("div",Si,[N(w(Us),{class:"size-4 text-slate-500 group-open:rotate-90 transition-transform"}),e("div",Ci,[e("p",Ti,L(M.name),1),e("p",Ei,L(V(M.id).length)+" danh mục con",1)])]),e("div",Ri,"/"+L(te(M.id)),1),e("div",Ai,L(M.pages_count??0),1),e("div",Mi,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:Ve(T=>_(M),["stop"])},[N(w(zt),{class:"size-4"})],8,ji),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:Ve(T=>I(M),["stop"])},[N(w(gt),{class:"size-4"})],8,Pi),N(f,{to:`/websites/${w(r)}/folders/${M.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:_e(()=>[N(w(Xt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:Ve(T=>ue(M),["stop"])},[N(w(vt),{class:"size-4"})],8,Li)])])]),e("div",Ii,[(n(!0),c(he,null,we(V(M.id),T=>(n(),c("div",{key:T.id,class:"grid grid-cols-12 gap-4 items-center px-6 py-3 border-t border-slate-200"},[e("div",Ui,[N(w(Fs),{class:"size-5 text-slate-400 -ml-1"}),e("span",null,L(T.name),1)]),e("div",Fi,"/"+L(te(T.id)),1),e("div",Di,L(T.pages_count??0),1),e("div",Ni,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:S=>_(T)},[N(w(zt),{class:"size-4"})],8,zi),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:S=>I(T)},[N(w(gt),{class:"size-4"})],8,Vi),N(f,{to:`/websites/${w(r)}/folders/${T.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:_e(()=>[N(w(Xt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:S=>ue(T)},[N(w(vt),{class:"size-4"})],8,Oi)])]))),128))])]))),128))])),m.value?(n(),c("div",{key:2,class:je(["px-6 py-3 text-sm",x.value==="error"?"text-red-600":"text-green-600"])},L(m.value),3)):Z("",!0)])])}}},Hi={class:"p-6"},qi={class:"max-w-xl mx-auto"},Wi={class:"flex items-center justify-between mb-4"},Yi={class:"text-xl font-semibold"},Ki=["value"],Xi={class:"flex justify-end gap-2"},Gi=["disabled"],ss={__name:"FolderEdit",setup(t){const s=pt(),r=wt(),d=s.params.websiteId,p=s.params.folderId,v=g(s.name==="FolderCreate"),m=g([]),x=g(""),u=g(""),a=g(null),_=g(!1),I=g(!1),te=g(""),i=g(""),se=async()=>{const S=((await z.get(`/api/websites/${d}/folders`)).data||[]).map(C=>({...C,id:Number(C.id),parent_id:C.parent_id==null?null:Number(C.parent_id)}));m.value=S},V=M=>(M||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),ue=()=>{_.value||(u.value=V(x.value))},$=qe(()=>{const M=[...m.value||[]],T=new Map(M.map(fe=>[String(fe.id),fe])),S=fe=>fe.sort((Se,Pe)=>(Se.name||"").localeCompare(Pe.name||"")),C=fe=>M.filter(Se=>String(Se.parent_id)===String(fe)),pe=fe=>!fe.parent_id||!T.has(String(fe.parent_id))||String(fe.parent_id)===String(fe.id),J=S(M.filter(pe)),W=[],xe=(fe,Se)=>{W.push({...fe,depth:Se}),S(C(fe.id)).forEach(Pe=>xe(Pe,Se+1))};return J.forEach(fe=>xe(fe,0)),W.filter(fe=>String(fe.id)!==String(p))}),y=()=>{if(!p||v.value)return;const M=(m.value||[]).find(T=>T.id===Number(p));M&&(x.value=M.name||"",u.value=M.slug||"",a.value=M.parent_id==null?null:Number(M.parent_id))},f=async()=>{var M,T,S,C,pe;I.value=!0,te.value="";try{const J={name:x.value,slug:u.value,parent_id:a.value==null?null:Number(a.value)};let W;v.value?W=await z.post(`/api/websites/${d}/folders`,J):W=await z.put(`/api/websites/${d}/folders/${p}`,J),te.value="Đã lưu thư mục",i.value="success",v.value?r.push(`/websites/${d}/folders`):(a.value=((M=W==null?void 0:W.data)==null?void 0:M.parent_id)==null?null:Number(W.data.parent_id),await se(),y())}catch(J){te.value=((S=(T=J==null?void 0:J.response)==null?void 0:T.data)==null?void 0:S.message)||((pe=(C=J==null?void 0:J.response)==null?void 0:C.data)==null?void 0:pe.error)||"Lưu thư mục thất bại",i.value="error"}finally{I.value=!1}};return et(async()=>{await se(),y()}),(M,T)=>{const S=nt("router-link");return n(),c("div",Hi,[e("div",qi,[e("div",Wi,[e("h1",Yi,L(v.value?"Tạo thư mục":"Sửa thư mục"),1),N(S,{to:`/websites/${w(d)}/folders`,class:"text-sm text-primary"},{default:_e(()=>[...T[4]||(T[4]=[ke("Quay lại danh sách",-1)])]),_:1},8,["to"])]),e("form",{onSubmit:Ve(f,["prevent"]),class:"bg-white border border-gray-200 rounded-md p-4 space-y-4"},[e("div",null,[T[5]||(T[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),F(e("input",{"onUpdate:modelValue":T[0]||(T[0]=C=>x.value=C),onInput:ue,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[Q,x.value]])]),e("div",null,[T[6]||(T[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),F(e("input",{"onUpdate:modelValue":T[1]||(T[1]=C=>u.value=C),onInput:T[2]||(T[2]=C=>_.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[Q,u.value]]),T[7]||(T[7]=e("div",{class:"text-xs text-gray-500 mt-1"},"Sẽ tự thêm số nếu trùng trong domain",-1))]),e("div",null,[T[9]||(T[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),F(e("select",{"onUpdate:modelValue":T[3]||(T[3]=C=>a.value=C),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[T[8]||(T[8]=e("option",{value:null},"(Không có)",-1)),(n(!0),c(he,null,we($.value,C=>(n(),c("option",{key:C.id,value:C.id},L("↳ ".repeat(C.depth)+C.name),9,Ki))),128))],512),[[Je,a.value]])]),e("div",Xi,[N(S,{to:`/websites/${w(d)}/folders`,class:"px-4 py-2 border border-gray-300 rounded-md"},{default:_e(()=>[...T[10]||(T[10]=[ke("Hủy",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:I.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md disabled:bg-blue-400"},L(v.value?"Tạo":"Lưu"),9,Gi)]),te.value?(n(),c("div",{key:0,class:je(["text-sm",i.value==="error"?"text-red-600":"text-green-600"])},L(te.value),3)):Z("",!0)],32)])])}}},Qi={class:"max-w-3xl mx-auto"},Ji={key:0,class:"mb-6 rounded-md border border-green-200 bg-green-50 px-4 py-3 text-green-700"},Zi={key:1,class:"mb-6 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-red-700"},ed={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},td={class:"grid grid-cols-1 gap-4"},sd={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},ad={class:"grid grid-cols-1 gap-4"},od={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},ld={class:"grid grid-cols-1 gap-4"},nd={class:"flex justify-end"},rd=["disabled"],id={__name:"Settings",setup(t){const s=g({APP_NAME:"",APP_URL:"",SSL_EMAIL:"",CLOUDFLARE_API_TOKEN:"",CLOUDFLARE_ZONE_ID:""}),r=g(!1),d=g(""),p=g(""),v=async()=>{try{const{data:x}=await z.get("/api/settings");s.value={...s.value,...x}}catch{p.value="Không tải được cài đặt"}},m=async()=>{var x,u;r.value=!0,p.value="",d.value="";try{await z.put("/api/settings",s.value),d.value="Đã lưu cài đặt thành công"}catch(a){const _=((u=(x=a==null?void 0:a.response)==null?void 0:x.data)==null?void 0:u.error)||"Lưu cài đặt thất bại";p.value=_}finally{r.value=!1}};return et(v),(x,u)=>(n(),c("div",Qi,[u[13]||(u[13]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Cài đặt hệ thống",-1)),d.value?(n(),c("div",Ji,L(d.value),1)):Z("",!0),p.value?(n(),c("div",Zi,L(p.value),1)):Z("",!0),e("form",{onSubmit:Ve(m,["prevent"])},[e("div",ed,[u[7]||(u[7]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Ứng dụng",-1)),e("div",td,[e("div",null,[u[5]||(u[5]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_NAME",-1)),F(e("input",{"onUpdate:modelValue":u[0]||(u[0]=a=>s.value.APP_NAME=a),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"VPS Manager"},null,512),[[Q,s.value.APP_NAME]])]),e("div",null,[u[6]||(u[6]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_URL",-1)),F(e("input",{"onUpdate:modelValue":u[1]||(u[1]=a=>s.value.APP_URL=a),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"https://vps.yourdomain.com"},null,512),[[Q,s.value.APP_URL]])])])]),e("div",sd,[u[9]||(u[9]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"SSL",-1)),e("div",ad,[e("div",null,[u[8]||(u[8]=e("label",{class:"block text-sm text-gray-600 mb-1"},"SSL_EMAIL",-1)),F(e("input",{"onUpdate:modelValue":u[2]||(u[2]=a=>s.value.SSL_EMAIL=a),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"admin@yourdomain.com"},null,512),[[Q,s.value.SSL_EMAIL]])])])]),e("div",od,[u[12]||(u[12]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Cloudflare",-1)),e("div",ld,[e("div",null,[u[10]||(u[10]=e("label",{class:"block text-sm text-gray-600 mb-1"},"CLOUDFLARE_API_TOKEN",-1)),F(e("input",{"onUpdate:modelValue":u[3]||(u[3]=a=>s.value.CLOUDFLARE_API_TOKEN=a),class:"w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[Q,s.value.CLOUDFLARE_API_TOKEN]])]),e("div",null,[u[11]||(u[11]=e("label",{class:"block text-sm text-gray-600 mb-1"},"CLOUDFLARE_ZONE_ID",-1)),F(e("input",{"onUpdate:modelValue":u[4]||(u[4]=a=>s.value.CLOUDFLARE_ZONE_ID=a),class:"w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[Q,s.value.CLOUDFLARE_ZONE_ID]])])])]),e("div",nd,[e("button",{type:"submit",onClick:Ve(m,["prevent"]),disabled:r.value,class:je(["bg-blue-600 text-white px-4 py-2 rounded-md",{"opacity-50 cursor-not-allowed":r.value}])},L(r.value?"Đang lưu...":"Lưu cài đặt"),11,rd)])],32)]))}},dd={class:"min-h-screen bg-gray-100"},ud={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},cd={class:"px-4 py-6 sm:px-0"},pd={class:"flex justify-between items-center mb-6"},md={class:"text-3xl font-bold text-gray-900"},gd={class:"flex items-center gap-2"},vd=["disabled","title"],fd={class:"bg-white shadow rounded-lg p-6"},bd={class:"space-y-4"},yd={class:"flex justify-between items-start"},hd={class:"inline-flex items-center gap-2 mb-2"},xd=["checked","onChange"],wd={class:"font-medium"},_d={class:"text-sm text-gray-500"},kd={class:"text-sm text-gray-500"},$d={class:"text-sm text-gray-500"},Sd={class:"flex gap-2"},Cd=["href"],Td=["href"],Ed=["onClick","disabled"],Rd={key:0,class:"text-center text-gray-500"},Ad={__name:"PagesManagement",setup(t){const r=pt().params.websiteId,d=g(null),p=g([]),v=g([]),m=g([]),x=g([]),u=g(!1),a=g("");g(!1);const _=qe(()=>{const S=a.value.trim().toLowerCase();return S?p.value.filter(C=>(C.title||"").toLowerCase().includes(S)||(C.path||"").toLowerCase().includes(S)):p.value}),I=async()=>{const S=await z.get(`/api/websites/${r}`);d.value=S.data},te=async()=>{const S=await z.get(`/api/websites/${r}/pages`);p.value=S.data.map(C=>({...C,__site:d.value}))},i=async()=>{const S=await z.get("/api/websites");v.value=S.data||[]},se=qe(()=>{var C;return(((C=d.value)==null?void 0:C.domain)||"").trim().replace(/^[^.]+\./,"")}),V=qe(()=>{const S=se.value;return S&&(v.value||[]).find(C=>String(C.domain||"").trim()===S)||null}),ue=qe(()=>{const S=d.value;return S&&String(S.domain||"").trim().split(".").length>2&&V.value?`/websites/${V.value.id}/subdomains`:"/websites"}),$=async S=>{if(confirm(`Delete page ${S.path}?`))try{x.value=[...x.value,S.id],await z.delete(`/api/pages/${S.id}`),yt.success("Page deleted"),m.value=m.value.filter(C=>C!==S.id),await te()}catch{yt.error("Failed to delete page")}finally{x.value=x.value.filter(C=>C!==S.id)}},y=S=>{const C=S.__site||d.value;if(!C)return"#";const pe=(C.ssl_enabled?"https://":"http://")+C.domain,J=S.path||"/",W=S.filename||"";if(W.toLowerCase()==="index.html")return pe+J;const xe=J.endsWith("/")?"":"/";return pe+J+xe+W},f=S=>{const C=S.__site||d.value;if(!C)return"#";const pe=C.id,J=((S==null?void 0:S.path)||"/").trim(),W=J==="/"?`/preview/${pe}`:`/preview/${pe}${J.startsWith("/")?"":"/"}${J}`,xe=localStorage.getItem("adminToken")||"";if(!xe)return W;const $e=W.includes("?")?"&":"?";return`${W}${$e}token=${encodeURIComponent(xe)}`},M=S=>{const C=S.id;m.value.includes(C)?m.value=m.value.filter(pe=>pe!==C):m.value=[...m.value,C]},T=async()=>{if(m.value.length!==0&&confirm(`Delete ${m.value.length} selected pages?`)){u.value=!0;try{const S=[...m.value];await Promise.all(S.map(async C=>{x.value=[...x.value,C];try{await z.delete(`/api/pages/${C}`)}finally{x.value=x.value.filter(pe=>pe!==C)}})),yt.success("Selected pages deleted"),m.value=[],await te()}catch{yt.error("Failed to delete selected pages")}finally{u.value=!1}}};return et(async()=>{await I(),await te(),await i()}),(S,C)=>{var J;const pe=nt("router-link");return n(),c("div",dd,[e("div",ud,[e("div",cd,[e("div",pd,[e("h1",md,L(((J=d.value)==null?void 0:J.domain)||"..."),1),e("div",gd,[N(pe,{to:ue.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Back"},{default:_e(()=>[...C[1]||(C[1]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5"}),e("path",{d:"M12 19l-7-7 7-7"})],-1)])]),_:1},8,["to"]),F(e("input",{"onUpdate:modelValue":C[0]||(C[0]=W=>a.value=W),placeholder:"Search",class:"h-9 w-56 rounded-md border border-gray-300 px-3"},null,512),[[Q,a.value]]),N(pe,{to:`/websites/${w(r)}/pages/new`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Add Page"},{default:_e(()=>[...C[2]||(C[2]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])]),_:1},8,["to"]),e("button",{onClick:T,disabled:m.value.length===0||u.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:`Delete Selected (${m.value.length})`},[u.value?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):(n(),de(w(vt),{key:1,class:"size-4"}))],8,vd)])]),e("div",fd,[e("div",bd,[(n(!0),c(he,null,we(_.value,W=>{var xe,$e;return n(),c("div",{key:W.id,class:"border rounded-lg p-4"},[e("div",yd,[e("div",null,[e("label",hd,[e("input",{type:"checkbox",checked:m.value.includes(W.id),onChange:fe=>M(W)},null,40,xd)]),e("h4",wd,L(W.title||"(No title)"),1),e("p",_d,"Path: "+L(W.path),1),e("p",kd,"File: "+L(W.filename),1),e("p",$d,"Website: "+L((xe=W.__site)==null?void 0:xe.domain),1)]),e("div",Sd,[e("a",{href:y(W),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Live"},[N(w(gs),{class:"size-4"})],8,Cd),e("a",{href:f(W),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[...C[3]||(C[3]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,Td),N(pe,{to:`/websites/${(($e=W.__site)==null?void 0:$e.id)||w(r)}/pages/${W.id}`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},{default:_e(()=>[N(w(us),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:fe=>$(W),disabled:x.value.includes(W.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[x.value.includes(W.id)?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):(n(),de(w(vt),{key:1,class:"size-4"}))],8,Ed)])])])}),128)),_.value.length===0?(n(),c("div",Rd,"No pages found")):Z("",!0)])])])])])}}},Md={class:"min-h-screen bg-gray-100"},jd={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},Pd={class:"px-4 py-6 sm:px-0"},Ld={class:"flex justify-between items-center mb-6"},Id={class:"text-3xl font-bold text-gray-900"},Ud={class:"flex items-center gap-2"},Fd=["href"],Dd=["href"],Nd={class:"bg-white shadow rounded-lg p-6"},zd={class:"mb-4"},Vd={class:"mb-4"},Od={class:"mb-4"},Bd={class:"mb-4"},Hd={class:"flex items-center justify-between"},qd={class:"flex items-center gap-3"},Wd={class:"mt-1 border border-gray-300 rounded-md p-3 space-y-3"},Yd={class:"space-y-1"},Kd=["disabled","onClick"],Xd=["value","onChange"],Gd={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Qd={class:"bg-white rounded-lg shadow p-6 w-full max-w-md"},Jd={class:"flex items-center justify-between mb-4"},Zd={class:"space-y-3"},eu=["value"],tu={class:"pt-2 border-t border-gray-200"},su={class:"text-xs text-gray-600"},au={class:"flex justify-end gap-2 mt-6"},ou={class:"mb-4"},lu={key:0,class:"mb-4 space-y-4"},nu={key:1,class:"mb-4 space-y-4"},ru={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},iu={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},du={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},uu=["value"],cu={class:"text-sm"},pu={class:"space-y-3"},mu={class:"flex items-center gap-2"},gu={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},vu=["onClick"],fu=["onUpdate:modelValue"],bu=["onUpdate:modelValue"],yu={class:"space-y-3"},hu={class:"flex items-center gap-2"},xu={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},wu=["onClick"],_u=["onUpdate:modelValue"],ku=["onUpdate:modelValue"],$u={key:2,class:"mb-4"},Su={key:3,class:"mb-4"},Cu={key:0,class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Tu={class:"flex justify-end gap-3"},Eu=["disabled"],Ru={key:0,class:"inline-flex items-center gap-2"},Au={key:1},as={__name:"PageEdit",setup(t){const s=pt(),r=wt(),d=s.params.websiteId,p=s.params.pageId,v=g(s.name==="PageCreate"||p==="new"||!p),m=g("blank"),x=g(!1),u=g(""),a=g({title:"",location:"",phone:"",galleryRaw:"",about1:"",pageContent:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),_=g([]),I=g([]),te=g(null),i=g(""),se=g(null),V=g(!1),ue=g(""),$=g(!1);g(null),g(""),g(""),g(null);const y=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],f=g({path:"",filename:"",title:"",content:""}),M=g(null),T=g([]),S=g(null),C=g(!1),pe=g(null),J=g(null),W=async()=>{if(v.value)return;const l=(await z.get(`/api/pages/${p}`)).data;if(f.value={path:l.path,filename:l.filename,title:l.title||"",content:l.content||""},l.template_type){if(x.value=!!l.template_type,l.template_type==="page"&&l.template_data)a.value={...a.value,pageContent:l.template_data.content||""};else if((l.template_type==="hotel-detail"||l.template_type==="hotel-detail-1"||l.template_type==="detail")&&l.template_data){let U=l.template_data.galleryRaw||"";!U&&Array.isArray(l.template_data.gallery)&&(U=l.template_data.gallery.join(`
`)),a.value={title:l.template_data.title||"",location:l.template_data.location||l.template_data.location_text||"",phone:l.template_data.phone||"",galleryRaw:U,about1:l.template_data.about1||"",pageContent:"",amenities:Array.isArray(l.template_data.amenities)?l.template_data.amenities:[],info:Array.isArray(l.template_data.info)?l.template_data.info:[{subject:"",description:""},{subject:"",description:""}],faqs:Array.isArray(l.template_data.faqs)?l.template_data.faqs:[{q:"",a:""},{q:"",a:""}]}}m.value=l.template_type}else m.value="blank",x.value=!1;I.value=(l.folders||[]).map(U=>Number(U.id)),te.value=l.primary_folder_id==null?null:Number(l.primary_folder_id)},xe=async()=>{const P=(f.value.title||"").trim();let l="";try{l=(await z.get("/templates/laravel-hotel-1/page/index.html")).data||""}catch{l='<!DOCTYPE html><html><head><meta charset="utf-8"><title>{{TITLE}}</title></head><body></body></html>'}let U="",H="";try{U=(await z.get("/templates/_shared/header.html")).data||""}catch{}try{H=(await z.get("/templates/_shared/footer.html")).data||""}catch{}U&&(l=l.replace(/<header[^>]*>[\s\S]*?<\/header>/i,U)),H&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(l)?l=l.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,H):/<\/body>/i.test(l)?l=l.replace(/<\/body>/i,H+"</body>"):l+=`
`+H);const h={title:P||"Page",content:a.value.pageContent||""},Y=`<script type="application/json" id="page-data">${JSON.stringify(h)}<\/script>`;return l=l.replace(/<\/head>/i,Y+`
</head>`),l=l.replace(/<title>[^<]*<\/title>/i,`<title>${h.title}</title>`),l||'<!DOCTYPE html><html><head><meta charset="utf-8"><title>'+(P||"Page")+'</title></head><body><div id="page-content">'+(a.value.pageContent||"")+"</div></body></html>"},$e=async()=>{const P=(a.value.galleryRaw||"").split(`
`).map(Oe=>Oe.trim()).filter(Boolean),U=(I.value||[]).reduce((Oe,Ye)=>{if(Oe==null)return Ye;const ft=O(Oe);return O(Ye)>ft?Ye:Oe},null),H=E(U),h=H.length>1?[H[0],H[H.length-1]]:H,Y=(f.value.title||"").trim(),le=["Home",...h.map(Oe=>Oe.name||""),Y];let ee=(await z.get("/templates/hotel-detail-1/index.html")).data||"",Re="",Fe="";try{Re=(await z.get("/templates/_shared/header.html")).data||""}catch{}try{Fe=(await z.get("/templates/_shared/footer.html")).data||""}catch{}Re&&(ee=ee.replace(/<header[^>]*>[\s\S]*?<\/header>/i,Re)),Fe&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(ee)?ee=ee.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,Fe):/<\/body>/i.test(ee)?ee=ee.replace(/<\/body>/i,Fe+"</body>"):ee+=`
`+Fe);const Ze=a.value.amenities||[],Ue=P.map(Oe=>String(Oe).replace(/<\/script>/gi,"<\\/script>")),He={title:Y||"Hotel",location:a.value.location||"",location_text:a.value.location||"",phone:a.value.phone||"",about1:a.value.about1||"",amenities:Ze,faqs:a.value.faqs||[],info:a.value.info||[],gallery:Ue,breadcrumb_items:le.filter(Boolean)},ot=`<script type="application/json" id="page-data">${JSON.stringify(He)}<\/script>`;return ee=ee.replace("{{GALLERY_DATA_SCRIPT}}",ot),ee=ee.replace(/<title>[^<]*<\/title>/i,`<title>${He.title}</title>`),ee},fe=async()=>{const P=await z.get(`/api/websites/${d}`);M.value=P.data},Se=async()=>{try{const P=await z.get("/api/websites");T.value=P.data||[]}catch{T.value=[]}},Pe=qe(()=>{const P=M.value;if(!P)return"/websites";const l=(P.domain||"").trim(),U=l.replace(/^[^.]+\./,"");if(U&&U!==l){const H=(T.value||[]).find(h=>String(h.domain).trim()===U);if(H&&H.id)return`/websites/${H.id}/subdomains`}return"/websites"}),De=async()=>{try{const P=await z.get("/api/settings");S.value=P.data||{}}catch{S.value={}}},Le=async()=>{const U=((await z.get(`/api/websites/${d}/folders`)).data||[]).map(H=>({...H,id:Number(H.id),parent_id:H.parent_id==null?null:Number(H.parent_id)}));_.value=U},We=async()=>{const P=(i.value||"").trim();if(!P)return;let l=(ue.value||"").trim();l||(l=Ee(P));const U={name:P,slug:l};se.value&&(U.parent_id=Number(se.value));const h=(await z.post(`/api/websites/${d}/folders`,U)).data;_.value=[..._.value,h],I.value=[...I.value,h.id],i.value="",se.value=null,ue.value="",$.value=!1,V.value=!1},ie=async()=>{var P,l,U,H,h;C.value=!0;try{const Y=(P=window.tinymce)==null?void 0:P.get("page-content-editor");if(Y&&(a.value.pageContent=Y.getContent()||""),v.value){let le;if(m.value==="blank"?le=u.value||f.value.content||"":m.value==="page"?le=await xe():le=await $e(),f.value.content=le,f.value.filename=(f.value.filename||"index.html").trim(),!(f.value.path||"").trim()){const Fe=(I.value||[]).reduce((Ue,He)=>{if(Ue==null)return He;const ot=O(Ue);return O(He)>ot?He:Ue},null),Ze=te.value||Fe;if(Ze){const Ue=X(Ze);Ue&&(f.value.path=`/${Ue}`)}}f.value.path||(f.value.path="/");const ee={...f.value};if(m.value==="page")ee.template_type="page",ee.template_data={title:(f.value.title||"").trim()||"Page",content:a.value.pageContent||""};else if(m.value!=="blank"){ee.template_type=m.value;const Re=(a.value.galleryRaw||"").split(`
`).map(Fe=>Fe.trim()).filter(Boolean);ee.template_data={title:(a.value.title||f.value.title||"").trim()||"Hotel",location:a.value.location||"",location_text:a.value.location||"",phone:a.value.phone||"",about1:a.value.about1||"",amenities:a.value.amenities||[],faqs:a.value.faqs||[],info:a.value.info||[],gallery:Re,galleryRaw:a.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(a.value.title||"").trim()].filter(Boolean)}}else ee.template_type="blank",ee.template_data=null;ee.folder_ids=[...I.value],ee.primary_folder_id=te.value,await z.post(`/api/websites/${d}/pages`,ee)}else{const le={...f.value};let ze;if(m.value==="blank"?ze=f.value.content||"":m.value==="page"?ze=await xe():ze=await $e(),le.content=ze,le.filename=(le.filename||"index.html").trim(),m.value==="page")le.template_type="page",le.template_data={title:(f.value.title||"").trim()||"Page",content:a.value.pageContent||""};else if(m.value!=="blank"){le.template_type=m.value;const Re=(a.value.galleryRaw||"").split(`
`).map(Fe=>Fe.trim()).filter(Boolean);le.template_data={title:(a.value.title||f.value.title||"").trim()||"Hotel",location:a.value.location||"",location_text:a.value.location||"",phone:a.value.phone||"",about1:a.value.about1||"",amenities:a.value.amenities||[],faqs:a.value.faqs||[],info:a.value.info||[],gallery:Re,galleryRaw:a.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(a.value.title||"").trim()].filter(Boolean)}}else le.template_type="blank",le.template_data=null;if(!(le.path||"").trim()){const Fe=(I.value||[]).reduce((Ue,He)=>{if(Ue==null)return He;const ot=O(Ue);return O(He)>ot?He:Ue},null),Ze=te.value||Fe;if(Ze){const Ue=X(Ze);Ue&&(le.path=`/${Ue}`)}}le.path||(le.path="/"),le.folder_ids=[...I.value],le.primary_folder_id=te.value,await z.put(`/api/pages/${p}`,le)}r.push(`/websites/${d}/pages`)}catch(Y){const le=((U=(l=Y==null?void 0:Y.response)==null?void 0:l.data)==null?void 0:U.message)||((h=(H=Y==null?void 0:Y.response)==null?void 0:H.data)==null?void 0:h.error)||(Y==null?void 0:Y.message)||"Lưu trang thất bại";alert(le)}finally{C.value=!1}},ne=()=>{if(!M.value)return"#";const P=(M.value.ssl_enabled?"https://":"http://")+M.value.domain,l=f.value.path||"/",U=f.value.filename||"",H=l.endsWith("/")?"":"/";return U.toLowerCase()==="index.html"?P+l:P+l+H+U},k=()=>{var le;if(!M.value)return"#";const P=(((le=S.value)==null?void 0:le.APP_URL)||(M.value.ssl_enabled?"https://":"http://")+M.value.domain).replace(/\/$/,""),l=(f.value.path||"/").trim();let U;if(l==="/"||l==="")U=`${P}/preview/${M.value.id}`;else{const ze=l.replace(/^\//,"");U=`${P}/preview/${M.value.id}/${encodeURIComponent(ze)}`}const H=localStorage.getItem("adminToken"),h=new URLSearchParams;H&&h.set("token",H),h.set("hide_preview_bar","1"),h.set("v",String(Date.now()));const Y=h.toString();return Y?`${U}?${Y}`:U},X=P=>{if(!P)return"";const l=new Map((_.value||[]).map(h=>[String(h.id),h]));let U=l.get(String(P));const H=[];for(;U&&(U.slug&&H.unshift(U.slug),!(!U.parent_id||(U=l.get(String(U.parent_id)),U&&String(U.id)===String(P)))););return H.join("/")},E=P=>{if(!P)return[];const l=new Map((_.value||[]).map(Y=>[String(Y.id),Y])),U=[],H=new Set;let h=l.get(String(P));for(;h&&!H.has(h.id)&&(U.unshift(h),H.add(h.id),!!h.parent_id);)h=l.get(String(h.parent_id));return U},O=P=>{let l=0;const U=_.value||[],H=new Map(U.map(Y=>[String(Y.id),Y]));let h=U.find(Y=>String(Y.id)===String(P));for(;h&&h.parent_id!=null;)l+=1,h=H.get(String(h.parent_id));return l},re=qe(()=>{const P=[..._.value||[]],l=new Map(P.map(ee=>[String(ee.id),ee])),U=ee=>ee.sort((Re,Fe)=>(Re.name||"").localeCompare(Fe.name||"")),H=ee=>P.filter(Re=>String(Re.parent_id)===String(ee)),h=ee=>!ee.parent_id||!l.has(String(ee.parent_id))||String(ee.parent_id)===String(ee.id),Y=U(P.filter(h)),le=[],ze=(ee,Re)=>{le.push({...ee,depth:Re}),U(H(ee.id)).forEach(Fe=>ze(Fe,Re+1))};return Y.forEach(ee=>ze(ee,0)),le}),Ee=P=>(P||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),ve=()=>{$.value||(ue.value=Ee(i.value))},A=P=>{if(te.value===P){te.value=null;return}te.value||(te.value=P)},b=P=>{if(I.value.includes(P)){const l=_.value.find(U=>U.id===P);if(l&&l.parent_id){const U=H=>{if(!H)return;I.value.includes(H)||I.value.push(H);const h=_.value.find(Y=>Y.id===H);h&&h.parent_id&&U(h.parent_id)};U(l.parent_id)}}te.value&&!I.value.includes(te.value)&&(te.value=null)},K=()=>{a.value.faqs=[...a.value.faqs||[],{q:"",a:""}]},G=()=>{a.value.info=[...a.value.info||[],{subject:"",description:""}]},oe=P=>{a.value.faqs=(a.value.faqs||[]).filter((l,U)=>U!==P)},ae=P=>{a.value.info=(a.value.info||[]).filter((l,U)=>U!==P)},Ie=qe(()=>{const l=(f.value.content||"").split(`
`).length;return l>0?l:1}),j=()=>{pe.value&&J.value&&(pe.value.scrollTop=J.value.scrollTop)},Ce=async()=>{if(!window.tinymce){if(!document.querySelector('script[src*="tinymce.min.js"]')){const P=document.createElement("script");P.src="/dist/tinymce/tinymce.min.js",document.head.appendChild(P),await new Promise((l,U)=>{P.onload=l,P.onerror=U})}await new Promise(P=>{const l=()=>{window.tinymce?P():setTimeout(l,50)};l()})}},Ne=async()=>{await Nt(),await new Promise(U=>setTimeout(U,100));const P=document.getElementById("page-content-editor");if(!P)return;await Ce();const l=window.tinymce.get("page-content-editor");l&&l.remove(),P.value=a.value.pageContent||"",window.tinymce.init({selector:"#page-content-editor",base_url:"/dist/tinymce",suffix:".min",menubar:!0,plugins:"link lists table image code charmap anchor searchreplace visualblocks fullscreen insertdatetime media help wordcount",toolbar:"undo redo | formatselect | bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media table | charmap anchor | code fullscreen | help",height:500,table_toolbar:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",image_title:!0,automatic_uploads:!1,file_picker_types:"image",content_style:"body { font-family: Arial, sans-serif; font-size: 14px; }",setup:U=>{U.on("Change KeyUp SetContent",()=>{a.value.pageContent=U.getContent()||""})}}).then(U=>{const H=U&&U[0];H&&(a.value.pageContent||"").trim()&&H.setContent(a.value.pageContent)})};return kt(m,async P=>{P==="page"&&await Ne()}),et(async()=>{await De(),await Promise.all([fe(),Se()]),await Le(),await W(),await Nt();const P=document.getElementById("about1-editor");P&&(await Ce(),P.value=a.value.about1||"",window.tinymce.init({selector:"#about1-editor",base_url:"/dist/tinymce",suffix:".min",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:l=>{l.on("Change KeyUp SetContent",()=>{a.value.about1=l.getContent()||""})}}).then(l=>{const U=l&&l[0];U&&(a.value.about1||"").trim()&&U.setContent(a.value.about1)})),m.value==="page"&&await Ne()}),Bt(()=>{if(window.tinymce){const P=window.tinymce.get("about1-editor");P&&P.remove();const l=window.tinymce.get("page-content-editor");l&&l.remove()}}),(P,l)=>{var H;const U=nt("router-link");return n(),c("div",Md,[e("div",jd,[e("div",Pd,[e("div",Ld,[e("h1",Id,L(v.value?"Create Page":"Edit Page"),1),e("div",Ud,[v.value?Z("",!0):(n(),c("a",{key:0,href:ne(),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[N(w(gs),{class:"size-4"})],8,Fd)),v.value?Z("",!0):(n(),c("a",{key:1,href:k(),target:"_blank",class:"px-3 h-9 inline-flex items-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 text-sm"},"Preview",8,Dd)),N(U,{to:Pe.value,class:"px-4 py-2 rounded-md border border-gray-300 bg-white"},{default:_e(()=>[...l[20]||(l[20]=[ke("Back",-1)])]),_:1},8,["to"])])]),e("div",Nd,[e("form",{onSubmit:Ve(ie,["prevent"]),novalidate:""},[e("div",zd,[l[21]||(l[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Path",-1)),F(e("input",{"onUpdate:modelValue":l[0]||(l[0]=h=>f.value.path=h),type:"text",placeholder:"/about-us",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,f.value.path]])]),e("div",Vd,[l[22]||(l[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Filename",-1)),F(e("input",{"onUpdate:modelValue":l[1]||(l[1]=h=>f.value.filename=h),type:"text",placeholder:"index.html",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,f.value.filename]])]),e("div",Od,[l[23]||(l[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Title",-1)),F(e("input",{"onUpdate:modelValue":l[2]||(l[2]=h=>f.value.title=h),onInput:l[3]||(l[3]=h=>a.value.title=f.value.title),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[Q,f.value.title]])]),e("div",Bd,[e("div",Hd,[l[25]||(l[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thư mục",-1)),e("div",qd,[N(U,{to:`/websites/${w(d)}/folders`,class:"text-sm text-primary"},{default:_e(()=>[...l[24]||(l[24]=[ke("Quản lý thư mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:l[4]||(l[4]=h=>V.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",Wd,[e("div",Yd,[l[26]||(l[26]=e("label",{class:"text-sm text-gray-700"},"Chọn thư mục",-1)),(n(!0),c(he,null,we(re.value,h=>(n(),c("div",{key:h.id,class:"flex items-center gap-2 cursor-pointer"},[e("button",{type:"button",class:"text-yellow-500 text-xs",disabled:te.value&&te.value!==h.id,onClick:Y=>A(h.id)},L(te.value===h.id?"★":"☆"),9,Kd),F(e("input",{type:"checkbox",value:h.id,"onUpdate:modelValue":l[5]||(l[5]=Y=>I.value=Y),onChange:Y=>b(h.id),class:"rounded cursor-pointer"},null,40,Xd),[[At,I.value]]),e("span",{class:"text-sm",style:lt({paddingLeft:(h.depth>0?h.depth*16:0)+"px"})},L("↳ ".repeat(h.depth))+L(h.name),5)]))),128))])]),V.value?(n(),c("div",Gd,[e("div",Qd,[e("div",Jd,[l[27]||(l[27]=e("h3",{class:"text-lg font-semibold"},"Tạo thư mục",-1)),e("button",{type:"button",onClick:l[6]||(l[6]=h=>V.value=!1),class:"text-gray-500"},"✕")]),e("div",Zd,[e("div",null,[l[28]||(l[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),F(e("input",{"onUpdate:modelValue":l[7]||(l[7]=h=>i.value=h),onInput:ve,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[Q,i.value]])]),e("div",null,[l[29]||(l[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),F(e("input",{"onUpdate:modelValue":l[8]||(l[8]=h=>ue.value=h),onInput:l[9]||(l[9]=h=>$.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[Q,ue.value]])]),e("div",null,[l[31]||(l[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),F(e("select",{"onUpdate:modelValue":l[10]||(l[10]=h=>se.value=h),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[l[30]||(l[30]=e("option",{value:null},"(Không có)",-1)),(n(!0),c(he,null,we(re.value,h=>(n(),c("option",{key:h.id,value:h.id},L("↳ ".repeat(h.depth)+h.name),9,eu))),128))],512),[[Je,se.value]])]),e("div",tu,[e("div",su,[l[33]||(l[33]=ke("Sửa/Xóa chi tiết vui lòng vào trang ",-1)),N(U,{to:`/websites/${w(d)}/folders`,class:"text-primary"},{default:_e(()=>[...l[32]||(l[32]=[ke("Quản lý thư mục",-1)])]),_:1},8,["to"])])])]),e("div",au,[e("button",{type:"button",onClick:l[11]||(l[11]=h=>V.value=!1),class:"px-4 py-2 rounded-md border border-gray-300"},"Hủy"),e("button",{type:"button",onClick:We,class:"px-4 py-2 bg-blue-600 text-white rounded-md"},"Tạo")])])])):Z("",!0)]),e("div",ou,[l[35]||(l[35]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),F(e("select",{"onUpdate:modelValue":l[12]||(l[12]=h=>m.value=h),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...l[34]||(l[34]=[e("option",{value:null},"Auto (theo website)",-1),Tt('<option value="blank">Custom HTML</option><optgroup label="Templates trong package"><option value="home">Home Template</option><option value="listing">Listing Template</option><option value="detail">Detail Template</option><option value="page">Page Template</option></optgroup>',2)])],512),[[Je,m.value]]),l[36]||(l[36]=e("p",{class:"mt-1 text-xs text-gray-500"}," Auto: Tự động chọn template phù hợp. Custom HTML: Tự viết HTML. Templates: Chọn template có sẵn trong package. ",-1))]),m.value==="page"?(n(),c("div",lu,[...l[37]||(l[37]=[e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Nội dung trang"),e("textarea",{id:"page-content-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)])])):Z("",!0),m.value==="detail"?(n(),c("div",nu,[e("div",ru,[e("div",null,[l[38]||(l[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),F(e("input",{"onUpdate:modelValue":l[13]||(l[13]=h=>a.value.location=h),type:"text",placeholder:"Sunny Isles, Florida, United States hoặc iframe Google Maps embed",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,a.value.location]])]),e("div",null,[l[39]||(l[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),F(e("input",{"onUpdate:modelValue":l[14]||(l[14]=h=>a.value.phone=h),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,a.value.phone]])])]),e("div",null,[l[40]||(l[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),F(e("textarea",{"onUpdate:modelValue":l[15]||(l[15]=h=>a.value.galleryRaw=h),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,a.value.galleryRaw]])]),l[46]||(l[46]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[l[41]||(l[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",iu,[e("div",du,[(n(),c(he,null,we(y,h=>e("label",{key:h,class:"inline-flex items-center gap-2 cursor-pointer"},[F(e("input",{type:"checkbox",value:h,"onUpdate:modelValue":l[16]||(l[16]=Y=>a.value.amenities=Y),class:"rounded cursor-pointer border-gray-300"},null,8,uu),[[At,a.value.amenities]]),e("span",cu,L(h),1)])),64))])])]),e("div",pu,[e("div",{class:"flex items-center justify-between"},[l[42]||(l[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:G,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),c(he,null,we(a.value.info,(h,Y)=>(n(),c("div",{key:Y,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",mu,[e("span",gu,L(Y+1),1),l[43]||(l[43]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:le=>ae(Y),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,vu)]),F(e("input",{"onUpdate:modelValue":le=>h.subject=le,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,fu),[[Q,h.subject]]),F(e("textarea",{"onUpdate:modelValue":le=>h.description=le,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,bu),[[Q,h.description]])]))),128))]),e("div",yu,[e("div",{class:"flex items-center justify-between"},[l[44]||(l[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:K,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),c(he,null,we(a.value.faqs,(h,Y)=>(n(),c("div",{key:Y,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",hu,[e("span",xu,L(Y+1),1),l[45]||(l[45]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:le=>oe(Y),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,wu)]),F(e("input",{"onUpdate:modelValue":le=>h.q=le,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,_u),[[Q,h.q]]),F(e("textarea",{"onUpdate:modelValue":le=>h.a=le,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,ku),[[Q,h.a]])]))),128))])])):Z("",!0),v.value&&m.value==="blank"?(n(),c("div",$u,[l[47]||(l[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),F(e("textarea",{"onUpdate:modelValue":l[17]||(l[17]=h=>u.value=h),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm font-mono"},null,512),[[Q,u.value]])])):Z("",!0),(m.value==="blank"||!v.value&&!x.value)&&m.value!=="page"?(n(),c("div",Su,[l[48]||(l[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Content",-1)),((H=M.value)==null?void 0:H.type)==="html"&&(!v.value||m.value==="blank")?(n(),c("div",Cu,[e("div",{ref_key:"gutterRef",ref:pe,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(n(!0),c(he,null,we(Ie.value,h=>(n(),c("div",{key:h,class:"px-2 text-xs text-gray-500 leading-6"},L(h),1))),128))],512),F(e("textarea",{ref_key:"codeRef",ref:J,"onUpdate:modelValue":l[18]||(l[18]=h=>f.value.content=h),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:j},null,544),[[Q,f.value.content]])])):F((n(),c("textarea",{key:1,"onUpdate:modelValue":l[19]||(l[19]=h=>f.value.content=h),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512)),[[Q,f.value.content]])])):Z("",!0),e("div",Tu,[N(U,{to:Pe.value,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:_e(()=>[...l[49]||(l[49]=[ke("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:C.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[C.value?(n(),c("span",Ru,[N(w(Be),{class:"size-4 animate-spin"}),ke(" "+L(v.value?"Creating...":"Saving..."),1)])):(n(),c("span",Au,L(v.value?"Create":"Save"),1))],8,Eu)])],32)])])])])}}},Mu={class:"relative flex min-h-screen w-full flex-col bg-gray-100"},ju={class:"flex flex-1 items-center justify-center p-4 lg:p-6"},Pu={class:"flex w-full max-w-6xl justify-center"},Lu={class:"grid w-full grid-cols-1 gap-8 lg:gap-16"},Iu={class:"flex flex-col justify-center"},Uu={class:"mx-auto flex w-full max-w-md flex-col"},Fu={class:"flex items-center gap-3 pb-8"},Du={class:"flex flex-col gap-2"},Nu={class:"relative flex items-center"},zu={class:"flex flex-col gap-2"},Vu={class:"relative flex items-center"},Ou=["type"],Bu=["disabled"],Hu={key:0,class:"inline-flex items-center gap-2"},qu={key:1},Wu={key:0,class:"text-sm text-red-600"},Yu={__name:"Login",setup(t){const s=wt(),r=g(""),d=g(""),p=g(!1),v=g(""),m=g(!1),x=async()=>{var u,a;p.value=!0,v.value="";try{const I=(await z.post("/api/login",{username:r.value,password:d.value})).data.token;localStorage.setItem("adminToken",I),z.defaults.headers.common["X-Admin-Token"]=I,document.cookie=`X-Admin-Token=${I}; path=/; max-age=${60*60*24}; samesite=None; secure`,document.cookie=`adminToken=${I}; path=/; max-age=${60*60*24}; samesite=None; secure`,s.push("/")}catch(_){v.value=((a=(u=_==null?void 0:_.response)==null?void 0:u.data)==null?void 0:a.error)||"Đăng nhập thất bại"}finally{p.value=!1}};return(u,a)=>(n(),c("div",Mu,[e("div",ju,[e("div",Pu,[e("div",Lu,[e("div",Iu,[e("div",Uu,[e("div",Fu,[N(w(Ds),{class:"size-8 text-blue-600"}),a[3]||(a[3]=e("span",{class:"text-xl font-semibold text-gray-800"},"VPS Manager",-1))]),a[7]||(a[7]=e("div",{class:"flex flex-col gap-1.5"},[e("p",{class:"text-gray-900 text-3xl font-bold tracking-tight"},"Đăng nhập vào Bảng điều khiển"),e("p",{class:"text-gray-500 text-base"},"Quản lý các máy chủ ảo của bạn một cách hiệu quả.")],-1)),e("form",{onSubmit:Ve(x,["prevent"]),class:"flex flex-col gap-5 pt-8"},[e("label",Du,[a[4]||(a[4]=e("p",{class:"text-gray-900 text-sm font-medium"},"Email / Tên người dùng",-1)),e("div",Nu,[N(w(Ns),{class:"absolute left-3.5 size-4 text-gray-400"}),F(e("input",{"onUpdate:modelValue":a[0]||(a[0]=_=>r.value=_),type:"text",required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-4",placeholder:"nhapemail@example.com"},null,512),[[Q,r.value]])])]),e("label",zu,[a[5]||(a[5]=e("p",{class:"text-gray-900 text-sm font-medium"},"Mật khẩu",-1)),e("div",Vu,[N(w(zs),{class:"absolute left-3.5 size-4 text-gray-400"}),F(e("input",{type:m.value?"text":"password","onUpdate:modelValue":a[1]||(a[1]=_=>d.value=_),required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-11",placeholder:"••••••••"},null,8,Ou),[[Cs,d.value]]),e("button",{type:"button",onClick:a[2]||(a[2]=_=>m.value=!m.value),class:"absolute right-0 h-full px-3.5 text-gray-400 hover:text-gray-600"},[m.value?(n(),de(w(Vs),{key:1,class:"size-5"})):(n(),de(w(zt),{key:0,class:"size-5"}))])])]),e("button",{type:"submit",disabled:p.value,class:"flex h-12 w-full items-center justify-center rounded-lg bg-blue-600 px-6 text-base font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500/50"},[p.value?(n(),c("span",Hu,[N(w(Be),{class:"size-4 animate-spin"}),a[6]||(a[6]=ke(" Đang đăng nhập... ",-1))])):(n(),c("span",qu,"Đăng Nhập"))],8,Bu),v.value?(n(),c("p",Wu,L(v.value),1)):Z("",!0)],32)])])])])]),a[8]||(a[8]=e("footer",{class:"flex justify-center p-4"},[e("p",{class:"text-sm text-gray-500"},"© 2024 VPS Manager. Đã đăng ký bản quyền.")],-1))]))}},Ku={class:"min-h-screen bg-gray-100"},Xu={class:"max-w-3xl mx-auto py-6 sm:px-6 lg:px-8"},Gu={class:"px-4 py-6 sm:px-0"},Qu={class:"bg-white rounded-lg shadow p-6"},Ju={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Zu={class:"flex justify-end gap-3 mt-6"},ec=["disabled"],tc={key:0,class:"inline-flex items-center gap-2"},sc={key:1},ac={__name:"AdminProfile",setup(t){const s=wt(),r=g({ADMIN_NAME:"",ADMIN_EMAIL:"",ADMIN_USERNAME:"",ADMIN_PASSWORD:""}),d=g(!1),p=g(""),v=g("success"),m=async()=>{const _=(await z.get("/api/settings")).data||{};r.value.ADMIN_NAME=_.ADMIN_NAME||"",r.value.ADMIN_EMAIL=_.ADMIN_EMAIL||"",r.value.ADMIN_USERNAME=_.ADMIN_USERNAME||"",r.value.ADMIN_PASSWORD=_.ADMIN_PASSWORD||""},x=async()=>{var a,_;d.value=!0,p.value="";try{await z.put("/api/settings",r.value),p.value="Đã lưu, vui lòng đăng nhập lại",v.value="success",localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"],s.push("/login")}catch(I){p.value=((_=(a=I==null?void 0:I.response)==null?void 0:a.data)==null?void 0:_.error)||"Lưu thất bại",v.value="error"}finally{d.value=!1}},u=()=>{localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"],s.push("/login")};return et(m),(a,_)=>(n(),c("div",Ku,[e("div",Xu,[e("div",Gu,[e("div",Qu,[_[9]||(_[9]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Thông tin quản trị",-1)),e("form",{onSubmit:Ve(x,["prevent"])},[e("div",Ju,[e("div",null,[_[4]||(_[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên",-1)),F(e("input",{"onUpdate:modelValue":_[0]||(_[0]=I=>r.value.ADMIN_NAME=I),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_NAME]])]),e("div",null,[_[5]||(_[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),F(e("input",{"onUpdate:modelValue":_[1]||(_[1]=I=>r.value.ADMIN_EMAIL=I),type:"email",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_EMAIL]])]),e("div",null,[_[6]||(_[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tài khoản",-1)),F(e("input",{"onUpdate:modelValue":_[2]||(_[2]=I=>r.value.ADMIN_USERNAME=I),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_USERNAME]])]),e("div",null,[_[7]||(_[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Mật khẩu",-1)),F(e("input",{"onUpdate:modelValue":_[3]||(_[3]=I=>r.value.ADMIN_PASSWORD=I),type:"password",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_PASSWORD]])])]),e("div",Zu,[e("button",{type:"button",onClick:u,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Logout"),e("button",{type:"submit",disabled:d.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[d.value?(n(),c("span",tc,[N(w(Be),{class:"size-4 animate-spin"}),_[8]||(_[8]=ke(" Đang lưu... ",-1))])):(n(),c("span",sc,"Lưu"))],8,ec)]),p.value?(n(),c("p",{key:0,class:je([v.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},L(p.value),3)):Z("",!0)],32)])])])]))}},oc={class:"min-h-screen bg-gray-100"},lc={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},nc={class:"px-4 py-6 sm:px-0"},rc={class:"flex justify-between items-center mb-6"},ic={class:"text-3xl font-bold text-gray-900"},dc={class:"bg-white shadow rounded-lg p-6"},uc={class:"space-y-4"},cc={class:"flex justify-between items-start"},pc={class:"font-medium"},mc={class:"text-sm text-gray-500"},gc={class:"mt-2 flex items-center space-x-4 text-sm"},vc=["title"],fc={class:"flex gap-2"},bc=["onClick","disabled"],yc=["onClick","disabled"],hc=["onClick","disabled"],xc=["href"],wc=["onClick","disabled"],_c={key:0,class:"text-center text-gray-500"},kc={__name:"SubdomainsManagement",setup(t){const r=pt().params.websiteId,d=g(""),p=g([]),v=g([]),m=g([]),x=g([]),u=g([]),a=async()=>{const se=await z.get(`/api/websites/${r}`);d.value=se.data.domain;const ue=(await z.get("/api/websites")).data||[];p.value=ue.filter($=>$.domain.endsWith("."+d.value))};et(a);const _=async se=>{var V,ue,$,y;try{v.value=[...v.value,se.id],await z.post(`/api/websites/${se.id}/deploy`);let f=0;for(;f<60&&(await new Promise(T=>setTimeout(T,2e3)),(await z.get(`/api/websites/${se.id}`)).data.status==="deploying");)f++;await a(),alert(`✓ Deploy thành công cho ${se.domain}`)}catch(f){const M=((ue=(V=f==null?void 0:f.response)==null?void 0:V.data)==null?void 0:ue.message)||((y=($=f==null?void 0:f.response)==null?void 0:$.data)==null?void 0:y.error)||"Deploy thất bại";alert(`✗ ${M}`)}finally{v.value=v.value.filter(f=>f!==se.id)}},I=async se=>{if(confirm(`Delete subdomain ${se.domain}?`))try{m.value=[...m.value,se.id],await z.delete(`/api/websites/${se.id}`),await a()}finally{m.value=m.value.filter(V=>V!==se.id)}},te=async se=>{var V,ue,$,y;try{x.value=[...x.value,se.id],await z.post(`/api/websites/${se.id}/ssl`),await a(),alert(`✓ SSL đã được cài đặt thành công cho ${se.domain}`)}catch(f){const M=((ue=(V=f==null?void 0:f.response)==null?void 0:V.data)==null?void 0:ue.message)||((y=($=f==null?void 0:f.response)==null?void 0:$.data)==null?void 0:y.error)||"Cài đặt SSL thất bại";alert(`✗ ${M}`)}finally{x.value=x.value.filter(f=>f!==se.id)}},i=async se=>{if(confirm(`Deactivate subdomain ${se.domain}?`))try{u.value=[...u.value,se.id],await z.post(`/api/websites/${se.id}/deactivate`),await a()}finally{u.value=u.value.filter(V=>V!==se.id)}};return(se,V)=>{const ue=nt("router-link");return n(),c("div",oc,[e("div",lc,[e("div",nc,[e("div",rc,[e("h1",ic,"Subdomains of "+L(d.value),1),N(ue,{to:`/websites/${w(r)}/subdomains/new`,class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"},{default:_e(()=>[...V[0]||(V[0]=[ke("Create Subdomain",-1)])]),_:1},8,["to"])]),e("div",dc,[e("div",uc,[(n(!0),c(he,null,we(p.value,$=>{var y;return n(),c("div",{key:$.id,class:"border rounded-lg p-4"},[e("div",cc,[e("div",null,[e("h4",pc,L($.domain),1),e("p",mc,"Server: "+L(((y=$.vps_server)==null?void 0:y.name)||"N/A"),1),e("div",gc,[e("span",{class:je(["inline-flex items-center",{"text-blue-600":$.status==="deploying","text-green-600":$.status==="deployed","text-gray-600":$.status==="pending"||$.status==="draft","text-orange-600":$.status==="suspended","text-red-600":$.status==="error"}]),title:$.status},[$.status==="deploying"?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):$.status==="deployed"?(n(),de(w(St),{key:1,class:"size-4"})):$.status==="pending"||$.status==="draft"?(n(),de(w(Mt),{key:2,class:"size-4"})):$.status==="suspended"?(n(),de(w(jt),{key:3,class:"size-4"})):(n(),de(w(Ct),{key:4,class:"size-4"}))],10,vc),e("span",{class:je(["inline-flex items-center gap-1",$.ssl_enabled?"text-green-600":"text-gray-400"])},[$.ssl_enabled?(n(),de(w(xt),{key:0,class:"size-4"})):(n(),de(w(cs),{key:1,class:"size-4"}))],2)])]),e("div",fc,[N(ue,{to:`/websites/${$.id}/pages`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:_e(()=>[N(w(ps),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:f=>_($),disabled:v.value.includes($.id)||$.status==="deployed",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[v.value.includes($.id)?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):(n(),de(w(ms),{key:1,class:"size-4"}))],8,bc),$.status==="deployed"?(n(),c("button",{key:0,onClick:f=>te($),disabled:x.value.includes($.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[x.value.includes($.id)?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):(n(),de(w(xt),{key:1,class:"size-4"}))],8,yc)):Z("",!0),$.status==="deployed"||$.status==="error"?(n(),c("button",{key:1,onClick:f=>i($),disabled:u.value.includes($.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[u.value.includes($.id)?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):(n(),de(w(jt),{key:1,class:"size-4"}))],8,hc)):Z("",!0),e("a",{href:($.ssl_enabled?"https://":"http://")+$.domain,target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[N(w(gt),{class:"size-4"})],8,xc),e("button",{onClick:f=>I($),disabled:m.value.includes($.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[m.value.includes($.id)?(n(),de(w(Be),{key:0,class:"size-4 animate-spin"})):(n(),de(w(vt),{key:1,class:"size-4"}))],8,wc)])])])}),128)),p.value.length===0?(n(),c("div",_c,"No subdomains found")):Z("",!0)])])])])])}}},$c="modulepreload",Sc=function(t){return"/"+t},os={},it=function(s,r,d){let p=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),x=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));p=Promise.allSettled(r.map(u=>{if(u=Sc(u),u in os)return;os[u]=!0;const a=u.endsWith(".css"),_=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${_}`))return;const I=document.createElement("link");if(I.rel=a?"stylesheet":$c,a||(I.as="script"),I.crossOrigin="",I.href=u,x&&I.setAttribute("nonce",x),document.head.appendChild(I),a)return new Promise((te,i)=>{I.addEventListener("load",te),I.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${u}`)))})}))}function v(m){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=m,window.dispatchEvent(x),!x.defaultPrevented)throw m}return p.then(m=>{for(const x of m||[])x.status==="rejected"&&v(x.reason);return s().catch(v)})},Cc={class:"min-h-screen bg-gray-100"},Tc={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},Ec={class:"px-4 py-6 sm:px-0"},Rc={class:"bg-white rounded-lg shadow p-6"},Ac={class:"text-sm text-gray-600 mb-4"},Mc={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},jc={class:"text-xs text-gray-500 mt-1"},Pc={class:"md:col-span-2"},Lc=["value"],Ic={class:"mt-4"},Uc={key:0,class:"mt-4"},Fc={class:"flex items-center justify-between mb-2"},Dc={class:"flex items-center gap-3"},Nc={class:"border border-gray-300 rounded-md p-3 max-h-48 overflow-auto"},zc={key:0,class:"text-sm text-gray-500"},Vc={key:1,class:"space-y-2"},Oc=["value","onChange"],Bc={class:"mt-6"},Hc={key:0,class:"mt-4 space-y-4"},qc={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wc={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},Yc={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},Kc=["value"],Xc={class:"text-sm"},Gc={class:"space-y-3"},Qc={class:"flex items-center gap-2"},Jc={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},Zc=["onClick"],ep=["onUpdate:modelValue"],tp=["onUpdate:modelValue"],sp={class:"space-y-3"},ap={class:"flex items-center gap-2"},op={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},lp=["onClick"],np=["onUpdate:modelValue"],rp=["onUpdate:modelValue"],ip={key:1,class:"mt-4"},dp={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},up={class:"flex justify-end gap-3 mt-6"},cp=["disabled"],pp={key:0,class:"inline-flex items-center gap-2"},mp={key:1},gp={__name:"SubdomainEdit",setup(t){const s=pt(),r=wt(),d=s.params.websiteId,p=g(""),v=g(null),m=g([]),x=g([]),u=g(!1);g(""),g(""),g(null),g(!1);const a=g([]),_=g({sub:"",vps_server_id:""}),I=g("blank"),te=g(""),i=g({title:"",location:"",phone:"",galleryRaw:"",about1:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),se=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],V=g(null),ue=g(null),$=g(!1),y=g(""),f=g(""),M=ne=>ne.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"d").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),T=qe(()=>M(_.value.sub||"")),S=qe(()=>(T.value?`${T.value}.`:"")+p.value),C=qe(()=>{const k=(te.value||"").split(`
`).length;return k>0?k:1}),pe=qe(()=>{const ne=[...x.value||[]],k=new Map(ne.map(A=>[String(A.id),A])),X=A=>A.sort((b,K)=>(b.name||"").localeCompare(K.name||"")),E=A=>ne.filter(b=>String(b.parent_id)===String(A)),O=A=>!A.parent_id||!k.has(String(A.parent_id))||String(A.parent_id)===String(A.id),re=X(ne.filter(O)),Ee=[],ve=(A,b)=>{Ee.push({...A,depth:b}),X(E(A.id)).forEach(K=>ve(K,b+1))};return re.forEach(A=>ve(A,0)),Ee}),J=ne=>{if(a.value.includes(ne)){const k=x.value.find(X=>X.id===ne);if(k&&k.parent_id){const X=E=>{if(!E)return;a.value.includes(E)||a.value.push(E);const O=x.value.find(re=>re.id===E);O&&O.parent_id&&X(O.parent_id)};X(k.parent_id)}}},W=()=>{V.value&&ue.value&&(V.value.scrollTop=ue.value.scrollTop)},xe=async()=>{const ne=(i.value.galleryRaw||"").split(`
`).map(G=>G.trim()).filter(Boolean),k=(i.value.title||"").trim(),X=["Home","Stays",k];let O=(await z.get("/templates/hotel-detail-1/index.html")).data||"",re="",Ee="";try{re=(await z.get("/templates/_shared/header.html")).data||""}catch{}try{Ee=(await z.get("/templates/_shared/footer.html")).data||""}catch{}re&&(O=O.replace(/<header[^>]*>[\s\S]*?<\/header>/i,re)),Ee&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(O)?O=O.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,Ee):/<\/body>/i.test(O)?O=O.replace(/<\/body>/i,Ee+"</body>"):O+=`
`+Ee);const ve=i.value.amenities||[],A=ne.map(G=>String(G).replace(/<\/script>/gi,"<\\/script>")),b={title:k||"Hotel",location:i.value.location||"",location_text:i.value.location||"",phone:i.value.phone||"",about1:i.value.about1||"",amenities:ve,faqs:i.value.faqs||[],info:i.value.info||[],gallery:A,breadcrumb_items:X.filter(Boolean)},K=`<script type="application/json" id="page-data">${JSON.stringify(b)}<\/script>`;return O=O.replace("{{GALLERY_DATA_SCRIPT}}",K),O=O.replace(/<title>[^<]*<\/title>/i,`<title>${b.title}</title>`),O},$e=()=>{i.value.faqs=[...i.value.faqs||[],{q:"",a:""}]},fe=()=>{i.value.info=[...i.value.info||[],{subject:"",description:""}]},Se=ne=>{i.value.faqs=(i.value.faqs||[]).filter((k,X)=>X!==ne)},Pe=ne=>{i.value.info=(i.value.info||[]).filter((k,X)=>X!==ne)},De=async()=>{var ne,k,X,E,O,re,Ee,ve,A,b,K,G,oe,ae,Ie;$.value=!0,y.value="";try{const j="Stays",Ce=_.value.vps_server_id;if(!Ce){y.value="Chưa chọn VPS Server",f.value="error",$.value=!1;return}const Ne={domain:S.value,type:((ne=v.value)==null?void 0:ne.type)||"html",vps_server_id:Ce};let P;try{P=(await z.post("/api/websites",Ne)).data}catch(h){const Y=((X=(k=h==null?void 0:h.response)==null?void 0:k.data)==null?void 0:X.message)||((O=(E=h==null?void 0:h.response)==null?void 0:E.data)==null?void 0:O.error)||"";if(((re=h==null?void 0:h.response)==null?void 0:re.status)===409||/domain/i.test(Y)){if(P=((await z.get("/api/websites")).data||[]).find(ze=>ze.domain===S.value),!P)throw h}else throw h}let l,U=null;if(I.value==="blank")l=te.value;else{l=await xe();const h=(i.value.galleryRaw||"").split(`
`).map(Y=>Y.trim()).filter(Boolean);U={title:(i.value.title||"").trim()||"Hotel",location:i.value.location||"",location_text:i.value.location||"",phone:i.value.phone||"",about1:i.value.about1||"",amenities:i.value.amenities||[],faqs:i.value.faqs||[],info:i.value.info||[],gallery:h,breadcrumb_items:["Home","Stays",(i.value.title||"").trim()].filter(Boolean)}}const H={path:"/",filename:"index.html",title:I.value==="blank"?i.value.title||"":i.value.title,content:l};I.value!=="blank"&&(H.template_type=I.value,H.template_data=U),a.value.length>0&&(H.folder_ids=a.value);try{await z.post(`/api/websites/${P.id}/pages`,H)}catch(h){const Y=((ve=(Ee=h==null?void 0:h.response)==null?void 0:Ee.data)==null?void 0:ve.message)||((b=(A=h==null?void 0:h.response)==null?void 0:A.data)==null?void 0:b.error)||"";if(((K=h==null?void 0:h.response)==null?void 0:K.status)===409||/path/i.test(Y)){const ze=((await z.get(`/api/websites/${P.id}/pages`)).data||[]).find(ee=>(ee.path||"/")==="/"&&(ee.filename||"").toLowerCase()==="index.html");ze&&await z.put(`/api/pages/${ze.id}`,H)}else if(/Failed to write page/i.test(Y)){const le=`subdomainDraft:${P.id}`;localStorage.setItem(le,JSON.stringify(H))}}y.value="Subdomain created. Deploy to go online.",f.value="success",r.push(`/websites/${d}/subdomains`)}catch(j){y.value=((oe=(G=j==null?void 0:j.response)==null?void 0:G.data)==null?void 0:oe.message)||((Ie=(ae=j==null?void 0:j.response)==null?void 0:ae.data)==null?void 0:Ie.error)||"Failed to create subdomain",f.value="error"}finally{$.value=!1}},Le=async()=>{var X;const ne=await z.get(`/api/websites/${d}`);v.value=ne.data,p.value=v.value.domain;const k=await z.get("/api/vps");m.value=k.data.filter(E=>E.status==="active"),(X=v.value)!=null&&X.vps_server_id&&(_.value.vps_server_id=v.value.vps_server_id);try{const E=await z.get(`/api/websites/${d}/folders`);x.value=E.data||[]}catch(E){console.error("Failed to load folders:",E)}},We=async()=>{if(window.tinymce)return;const{default:ne}=await it(async()=>{const{default:k}=await import("./tinymce.js").then(X=>X.t);return{default:k}},[]);await it(()=>import("./index.js").then(k=>k.i),[]),await it(()=>import("./index2.js").then(k=>k.i),[]),await it(()=>import("./model.js"),[]),await it(()=>import("./skin.js"),[]),await it(()=>import("./content.js"),[]),await it(()=>import("./content2.js"),[]),await it(()=>import("./index3.js").then(k=>k.i),[]),await it(()=>import("./index4.js").then(k=>k.i),[]),window.tinymce=ne},ie=async()=>{await We(),await Nt();const ne=document.getElementById("about1-editor-sub");ne&&(ne.value=i.value.about1||"",window.tinymce.init({selector:"#about1-editor-sub",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:k=>{k.on("Change KeyUp SetContent",()=>{i.value.about1=k.getContent()||""})}}).then(k=>{const X=k&&k[0];X&&(i.value.about1||"").trim()&&X.setContent(i.value.about1)}))};return et(async()=>{await Le(),I.value==="hotel-detail-1"&&await ie()}),kt(I,async ne=>{if(ne==="hotel-detail-1")await ie();else if(window.tinymce){const k=window.tinymce.get("about1-editor-sub");k&&k.remove()}}),Bt(()=>{if(window.tinymce){const ne=window.tinymce.get("about1-editor-sub");ne&&ne.remove()}}),(ne,k)=>{const X=nt("router-link");return n(),c("div",Cc,[e("div",Tc,[e("div",Ec,[e("div",Rc,[k[32]||(k[32]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Create Subdomain",-1)),e("p",Ac,"Parent: "+L(p.value),1),e("form",{onSubmit:Ve(De,["prevent"])},[e("div",Mc,[e("div",null,[k[11]||(k[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Subdomain",-1)),F(e("input",{"onUpdate:modelValue":k[0]||(k[0]=E=>_.value.sub=E),type:"text",required:"",placeholder:"hotel",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,_.value.sub]]),e("p",jc,"Sẽ tạo domain: "+L(S.value),1)]),e("div",Pc,[k[13]||(k[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),F(e("select",{"onUpdate:modelValue":k[1]||(k[1]=E=>_.value.vps_server_id=E),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[k[12]||(k[12]=e("option",{value:""},"Select VPS Server",-1)),(n(!0),c(he,null,we(m.value,E=>(n(),c("option",{value:E.id,key:E.id},L(E.name)+" ("+L(E.ip_address)+")",9,Lc))),128))],512),[[Je,_.value.vps_server_id]])])]),e("div",Ic,[k[15]||(k[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),F(e("select",{"onUpdate:modelValue":k[2]||(k[2]=E=>I.value=E),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...k[14]||(k[14]=[e("option",{value:"blank"},"HTML mặc định",-1),e("option",{value:"hotel-detail-1"},"Hotel Detail 1",-1)])],512),[[Je,I.value]])]),I.value==="hotel-detail-1"?(n(),c("div",Uc,[e("div",Fc,[k[17]||(k[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Danh mục (chọn nhiều)",-1)),e("div",Dc,[N(X,{to:`/websites/${w(d)}/folders`,class:"text-sm text-primary"},{default:_e(()=>[...k[16]||(k[16]=[ke("Quản lý danh mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:k[3]||(k[3]=E=>u.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",Nc,[x.value.length===0?(n(),c("div",zc,"Không có danh mục")):(n(),c("div",Vc,[(n(!0),c(he,null,we(pe.value,E=>(n(),c("label",{key:E.id,class:"flex items-center gap-2 cursor-pointer"},[F(e("input",{type:"checkbox",value:E.id,"onUpdate:modelValue":k[4]||(k[4]=O=>a.value=O),onChange:O=>J(E.id),class:"rounded cursor-pointer"},null,40,Oc),[[At,a.value]]),e("span",{class:"text-sm",style:lt({paddingLeft:(E.depth>0?E.depth*16:0)+"px"})},L("↳ ".repeat(E.depth))+L(E.name),5)]))),128))]))])])):Z("",!0),e("div",Bc,[k[29]||(k[29]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Nội dung template",-1)),I.value==="hotel-detail-1"?(n(),c("div",Hc,[e("div",qc,[e("div",null,[k[18]||(k[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề khách sạn",-1)),F(e("input",{"onUpdate:modelValue":k[5]||(k[5]=E=>i.value.title=E),type:"text",placeholder:"Azure Breeze Resort",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.title]])]),e("div",null,[k[19]||(k[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),F(e("input",{"onUpdate:modelValue":k[6]||(k[6]=E=>i.value.location=E),type:"text",placeholder:"Sunny Isles, Florida, United States",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.location]])]),e("div",null,[k[20]||(k[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),F(e("input",{"onUpdate:modelValue":k[7]||(k[7]=E=>i.value.phone=E),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.phone]])])]),e("div",null,[k[21]||(k[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),F(e("textarea",{"onUpdate:modelValue":k[8]||(k[8]=E=>i.value.galleryRaw=E),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.galleryRaw]])]),k[27]||(k[27]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor-sub",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[k[22]||(k[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",Wc,[e("div",Yc,[(n(),c(he,null,we(se,E=>e("label",{key:E,class:"inline-flex items-center gap-2 cursor-pointer"},[F(e("input",{type:"checkbox",value:E,"onUpdate:modelValue":k[9]||(k[9]=O=>i.value.amenities=O),class:"rounded cursor-pointer border-gray-300"},null,8,Kc),[[At,i.value.amenities]]),e("span",Xc,L(E),1)])),64))])])]),e("div",Gc,[e("div",{class:"flex items-center justify-between"},[k[23]||(k[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:fe,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),c(he,null,we(i.value.info,(E,O)=>(n(),c("div",{key:O,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",Qc,[e("span",Jc,L(O+1),1),k[24]||(k[24]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:re=>Pe(O),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,Zc)]),F(e("input",{"onUpdate:modelValue":re=>E.subject=re,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,ep),[[Q,E.subject]]),F(e("textarea",{"onUpdate:modelValue":re=>E.description=re,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,tp),[[Q,E.description]])]))),128))]),e("div",sp,[e("div",{class:"flex items-center justify-between"},[k[25]||(k[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:$e,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),c(he,null,we(i.value.faqs,(E,O)=>(n(),c("div",{key:O,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",ap,[e("span",op,L(O+1),1),k[26]||(k[26]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:re=>Se(O),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,lp)]),F(e("input",{"onUpdate:modelValue":re=>E.q=re,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,np),[[Q,E.q]]),F(e("textarea",{"onUpdate:modelValue":re=>E.a=re,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,rp),[[Q,E.a]])]))),128))])])):I.value==="blank"?(n(),c("div",ip,[k[28]||(k[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),e("div",dp,[e("div",{ref_key:"gutterRef",ref:V,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(n(!0),c(he,null,we(C.value,E=>(n(),c("div",{key:E,class:"px-2 text-xs text-gray-500 leading-6"},L(E),1))),128))],512),F(e("textarea",{ref_key:"codeRef",ref:ue,"onUpdate:modelValue":k[10]||(k[10]=E=>te.value=E),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:W},null,544),[[Q,te.value]])])])):Z("",!0)]),e("div",up,[N(X,{to:`/websites/${w(d)}/subdomains`,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:_e(()=>[...k[30]||(k[30]=[ke("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:$.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[$.value?(n(),c("span",pp,[N(w(Be),{class:"size-4 animate-spin"}),k[31]||(k[31]=ke(" Creating... ",-1))])):(n(),c("span",mp,"Create Subdomain"))],8,cp)]),y.value?(n(),c("p",{key:1,class:je([f.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},L(y.value),3)):Z("",!0)],32)])])])])}}},vp=[{path:"/login",name:"Login",component:Yu},{path:"/",name:"Dashboard",component:ba},{path:"/vps",name:"VpsManagement",component:Ka},{path:"/websites",name:"WebsiteManagement",component:el},{path:"/websites/:websiteId/settings",name:"WebsiteSettings",component:Vn},{path:"/websites/:websiteId/pages",name:"PagesManagement",component:Ad},{path:"/websites/:websiteId/pages/new",name:"PageCreate",component:as},{path:"/websites/:websiteId/pages/:pageId",name:"PageEdit",component:as},{path:"/websites/:websiteId/folders",name:"FoldersManagement",component:Bi},{path:"/websites/:websiteId/folders/new",name:"FolderCreate",component:ss},{path:"/websites/:websiteId/folders/:folderId",name:"FolderEdit",component:ss},{path:"/websites/:websiteId/subdomains",name:"SubdomainsManagement",component:kc},{path:"/websites/:websiteId/subdomains/new",name:"SubdomainEdit",component:gp},{path:"/profile",name:"AdminProfile",component:ac},{path:"/monitoring",name:"Monitoring",component:pi},{path:"/settings",name:"Settings",component:id}],Pt=Ts({history:Es(),routes:vp}),ls=localStorage.getItem("adminToken");ls&&(z.defaults.headers.common["X-Admin-Token"]=ls);z.interceptors.response.use(t=>t,t=>{var r;if(((r=t==null?void 0:t.response)==null?void 0:r.status)===401){try{localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"]}catch{}Pt.currentRoute.value.path!=="/login"&&Pt.push("/login")}return Promise.reject(t)});Pt.beforeEach((t,s,r)=>{const d=!!localStorage.getItem("adminToken");if(!d&&t.path!=="/login")return r("/login");if(d&&t.path==="/login")return r("/");r()});Rs(Js).use(Pt).mount("#app");export{vs as g};
