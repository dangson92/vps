import{u as pt,a as wt,r as rt,c,o as n,b as _,d as V,e,f as Tt,w as ke,n as Ie,g as N,i as g,j as tt,t as I,k as Z,F as he,l as we,m as Oe,p as U,v as Q,q as Ze,s as de,x as $e,y as Bt,z as nt,A as We,B as kt,C as Vt,D as At,E as Cs,G as Ts,H as Es,I as Rs}from"./vendor.js";import{L as ns,S as rs,G as gt,B as is,U as As,a as ds,b as Ps,c as xt,C as St,A as Ct,d as Pt,P as us,T as vt,e as He,f as Lt,g as cs,F as ps,h as Ls,i as ms,R as Is,I as jt,j as Ut,k as Ds,l as Ms,m as js,E as Nt,n as Xt,o as Us,p as gs,q as Fs,r as Vs,s as Ns,t as zs}from"./icons.js";import{g as vs}from"./tinymce.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const v of p)if(v.type==="childList")for(const m of v.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&d(m)}).observe(document,{childList:!0,subtree:!0});function r(p){const v={};return p.integrity&&(v.integrity=p.integrity),p.referrerPolicy&&(v.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?v.credentials="include":p.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function d(p){if(p.ep)return;p.ep=!0;const v=r(p);fetch(p.href,v)}})();const Os={id:"app"},Bs={key:0,class:"min-h-screen"},Hs={key:1,class:"relative flex min-h-screen w-full bg-background-light"},qs={class:"flex w-64 flex-col border-r border-gray-200 bg-white p-4"},Ws={class:"flex flex-col gap-2"},Ys={class:"flex-1"},Ks={class:"flex items-center justify-between border-b border-gray-200 px-10 py-4 bg-white"},Xs={class:"flex items-center gap-4"},Gs={class:"h-10 w-10 rounded-lg border border-gray-300 bg-gray-50 text-gray-800"},Qs={class:"p-6 lg:p-10"},Js={__name:"App",setup(s){const t=pt(),r=wt(),d=()=>{localStorage.removeItem("adminToken"),delete N.defaults.headers.common["X-Admin-Token"],r.push("/login")};return(p,v)=>{const m=rt("router-view"),x=rt("router-link");return n(),c("div",Os,[_(t).path==="/login"?(n(),c("div",Bs,[V(m)])):(n(),c("div",Hs,[e("aside",qs,[v[6]||(v[6]=Tt('<div class="flex items-center gap-3 mb-4"><div class="rounded-full size-10 bg-primary/10"></div><div class="flex flex-col"><h1 class="text-gray-900 text-base font-medium">Admin User</h1><p class="text-gray-500 text-sm">admin@vps.com</p></div></div>',1)),e("nav",Ws,[V(x,{to:"/",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":_(t).path==="/","hover:bg-gray-100 text-gray-800":_(t).path!=="/"}])},{default:ke(()=>[V(_(ns),{class:"size-4"}),v[0]||(v[0]=e("span",null,"Dashboard",-1))]),_:1},8,["class"]),V(x,{to:"/vps",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":_(t).path.startsWith("/vps"),"hover:bg-gray-100 text-gray-800":!_(t).path.startsWith("/vps")}])},{default:ke(()=>[V(_(rs),{class:"size-4"}),v[1]||(v[1]=e("span",null,"Servers",-1))]),_:1},8,["class"]),V(x,{to:"/websites",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":_(t).path.startsWith("/websites"),"hover:bg-gray-100 text-gray-800":!_(t).path.startsWith("/websites")}])},{default:ke(()=>[V(_(gt),{class:"size-4"}),v[2]||(v[2]=e("span",null,"Websites",-1))]),_:1},8,["class"]),V(x,{to:"/monitoring",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":_(t).path.startsWith("/monitoring"),"hover:bg-gray-100 text-gray-800":!_(t).path.startsWith("/monitoring")}])},{default:ke(()=>[V(_(is),{class:"size-4"}),v[3]||(v[3]=e("span",null,"Monitoring",-1))]),_:1},8,["class"]),V(x,{to:"/profile",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":_(t).path.startsWith("/profile"),"hover:bg-gray-100 text-gray-800":!_(t).path.startsWith("/profile")}])},{default:ke(()=>[V(_(As),{class:"size-4"}),v[4]||(v[4]=e("span",null,"Profile",-1))]),_:1},8,["class"]),V(x,{to:"/settings",class:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-800 hover:bg-gray-100"},{default:ke(()=>[V(_(ds),{class:"size-4"}),v[5]||(v[5]=e("span",null,"Settings",-1))]),_:1})])]),e("main",Ys,[e("header",Ks,[v[8]||(v[8]=e("h2",{class:"text-lg font-bold"},"Tổng quan Hệ thống",-1)),e("div",Xs,[v[7]||(v[7]=e("input",{class:"form-input h-10 w-64 rounded-lg border border-gray-300 bg-gray-50 px-4",placeholder:"Search"},null,-1)),e("button",Gs,[V(_(Ps),{class:"mx-auto size-5"})]),e("button",{onClick:d,class:"h-10 px-3 rounded-lg border border-gray-300 bg-white text-red-600"}," Logout ")])]),e("div",Qs,[V(m)])])]))])}}},Zs={class:"min-h-screen"},ea={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ta={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},sa={class:"p-6 bg-white border-b border-gray-200"},aa={class:"rounded-xl bg-gray-50 p-6 border border-gray-200"},oa={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},la={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},na={class:"flex items-center justify-between text-gray-500"},ra={class:"text-gray-900 tracking-tight text-3xl font-bold"},ia={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},da={class:"flex items-center justify-between text-gray-500"},ua={class:"text-gray-900 tracking-tight text-3xl font-bold"},ca={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},pa={class:"flex items-center justify-between text-gray-500"},ma={class:"text-red-500 tracking-tight text-3xl font-bold"},ga={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},va={class:"flex items-center justify-between text-gray-500"},fa={class:"text-gray-900 tracking-tight text-3xl font-bold"},ba={__name:"Dashboard",setup(s){const t=g({vpsServers:0,websites:0,onlineWebsites:0,sslEnabled:0});return tt(async()=>{try{const[d,p]=await Promise.all([N.get("/api/vps"),N.get("/api/websites")]),v=Array.isArray(d.data)?d.data:[],m=Array.isArray(p.data)?p.data:[];t.value.vpsServers=v.length,t.value.websites=m.length,t.value.onlineWebsites=m.filter(x=>x.status==="deployed").length,t.value.sslEnabled=m.filter(x=>x.ssl_enabled).length}catch(d){console.error("Failed to fetch stats:",d)}}),(d,p)=>(n(),c("div",Zs,[e("main",null,[e("div",ea,[e("div",ta,[e("div",sa,[p[4]||(p[4]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Tổng quan Hệ thống",-1)),e("div",aa,[e("div",oa,[e("div",la,[e("div",na,[p[0]||(p[0]=e("p",{class:"text-base font-medium text-gray-800"},"Máy chủ VPS",-1)),V(_(rs),{class:"h-6 w-6 text-gray-600"})]),e("p",ra,I(t.value.vpsServers),1)]),e("div",ia,[e("div",da,[p[1]||(p[1]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web",-1)),V(_(gt),{class:"h-6 w-6 text-gray-600"})]),e("p",ua,I(t.value.websites),1)]),e("div",ca,[e("div",pa,[p[2]||(p[2]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web trực tuyến",-1)),V(_(is),{class:"h-6 w-6 text-red-500"})]),e("p",ma,I(t.value.onlineWebsites),1)]),e("div",ga,[e("div",va,[p[3]||(p[3]=e("p",{class:"text-base font-medium text-gray-800"},"SSL được bật",-1)),V(_(xt),{class:"h-6 w-6 text-gray-600"})]),e("p",fa,I(t.value.sslEnabled),1)])])]),p[5]||(p[5]=Tt('<h2 class="text-gray-900 text-[22px] font-bold tracking-[-0.015em] pb-3 pt-10">Hoạt động gần đây</h2><div class="rounded-xl border border-gray-200 bg-white overflow-hidden"><table class="w-full"><thead><tr class="bg-gray-50"><th class="px-6 py-4 text-left text-gray-600 w-[15%] text-sm font-medium">Hoạt động</th><th class="px-6 py-4 text-left text-gray-600 w-[20%] text-sm font-medium">Người dùng</th><th class="px-6 py-4 text-left text-gray-600 w-[40%] text-sm font-medium">Đối tượng</th><th class="px-6 py-4 text-left text-gray-600 w-[25%] text-sm font-medium">Thời gian</th></tr></thead><tbody class="divide-y divide-gray-200"><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-700">Tạo</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">admin</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;web-server-01&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">5 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700">Thêm</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">hệ thống</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">trang web &#39;example.com&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">15 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-yellow-100 px-3 py-1 text-xs font-medium text-yellow-800">Khởi động lại</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">dev_user</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;db-server-02&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">1 giờ trước</td></tr></tbody></table></div>',2))])])])])]))}},ya={class:"min-h-screen bg-gray-100"},ha={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},xa={class:"px-4 py-6 sm:px-0"},wa={class:"flex justify-between items-center mb-6"},_a={class:"bg-white shadow overflow-hidden sm:rounded-md"},ka={class:"divide-y divide-gray-200"},$a={class:"flex items-center justify-between"},Sa={class:"flex-1"},Ca={class:"text-lg font-medium text-gray-900"},Ta={class:"text-sm text-gray-500"},Ea={class:"mt-2 flex items-center space-x-4 text-sm text-gray-500"},Ra={class:"flex items-center space-x-2"},Aa=["onClick"],Pa=["onClick"],La={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},Ia={class:"bg-white rounded-lg p-6 w-full max-w-md"},Da={class:"text-lg font-medium text-gray-900 mb-4"},Ma={class:"mb-4"},ja={class:"mb-4"},Ua={class:"mb-4"},Fa={class:"mb-4"},Va={class:"mb-4"},Na={class:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-2"},za={key:0,class:"mb-4"},Oa={class:"mt-1 flex gap-2"},Ba=["value"],Ha={class:"mb-4"},qa={class:"flex justify-end space-x-3"},Wa={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},Ya={key:1,class:"fixed bottom-4 right-4 z-50"},Ka={__name:"VpsManagement",setup(s){const t=g(""),r=g(""),d=g([]),p=g(!1),v=g(!1),m=g(null),x=g(""),u=g({name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:"",status:"inactive"}),o=async()=>{try{const $=await N.get("/api/vps");d.value=$.data}catch{t.value="Failed to fetch VPS servers",r.value="error"}},k=$=>{if(!$)return"";let y=String($).trim();return y=y.replace(/^https?:\/\//i,""),y=y.split("/")[0],y=y.split(":")[0],y.trim()},D=$=>{var f;const y=((f=$==null?void 0:$.target)==null?void 0:f.value)||"";y&&(u.value.ssh_key_path=y)},te=async()=>{var $,y,f,P,T,S;try{if(u.value.ip_address=k(u.value.ip_address),u.value.ssh_key_path=(u.value.ssh_key_path||"").trim(),v.value)await N.put(`/api/vps/${m.value.id}`,u.value),t.value="VPS server updated successfully",r.value="success";else{const pe=(await N.post("/api/vps",u.value)).data;u.value.status&&u.value.status!=="inactive"&&await N.put(`/api/vps/${pe.id}`,{status:u.value.status}),t.value="VPS server created successfully",r.value="success"}z(),o()}catch(C){t.value=((y=($=C==null?void 0:C.response)==null?void 0:$.data)==null?void 0:y.message)||((P=(f=C==null?void 0:C.response)==null?void 0:f.data)==null?void 0:P.error)||((S=(T=C==null?void 0:C.response)==null?void 0:T.data)==null?void 0:S.errors)&&Object.values(C.response.data.errors).flat().join(", ")||"Failed to save VPS server",r.value="error"}},i=$=>{m.value=$,u.value={...$},v.value=!0,x.value=$.worker_key||""},se=async $=>{if(confirm(`Are you sure you want to delete ${$.name}?`))try{await N.delete(`/api/vps/${$.id}`),t.value="VPS server deleted successfully",r.value="success",o()}catch{t.value="Failed to delete VPS server",r.value="error"}},z=()=>{p.value=!1,v.value=!1,m.value=null,u.value={name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:""},x.value=""},ue=()=>{x.value&&(navigator.clipboard.writeText(x.value),t.value="Worker key copied",r.value="success")};return tt(o),($,y)=>(n(),c("div",ya,[e("div",ha,[e("div",xa,[e("div",wa,[y[8]||(y[8]=e("h1",{class:"text-3xl font-bold text-gray-900"},"VPS Servers",-1)),e("button",{onClick:y[0]||(y[0]=f=>p.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Add VPS Server ")]),e("div",_a,[e("ul",ka,[(n(!0),c(he,null,we(d.value,f=>(n(),c("li",{key:f.id,class:"px-6 py-4"},[e("div",$a,[e("div",Sa,[e("h3",Ca,I(f.name),1),e("p",Ta,I(f.ip_address),1),e("div",Ea,[e("span",null,"SSH Port: "+I(f.ssh_port),1),e("span",null,"User: "+I(f.ssh_user),1),e("span",null,"Websites: "+I(f.websites_count),1)])]),e("div",Ra,[e("span",{class:Ie(["inline-flex items-center gap-1",{"text-green-600":f.status==="active","text-red-600":f.status==="inactive","text-yellow-600":f.status==="error"}])},[f.status==="active"?(n(),de(_(St),{key:0,class:"size-4"})):f.status==="error"?(n(),de(_(Ct),{key:1,class:"size-4"})):(n(),de(_(Pt),{key:2,class:"size-4"})),$e(" "+I(f.status),1)],2),e("button",{onClick:P=>i(f),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},[V(_(us),{class:"size-4"})],8,Aa),e("button",{onClick:P=>se(f),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50",title:"Delete"},[V(_(vt),{class:"size-4"})],8,Pa)])])]))),128))])])])]),p.value||v.value?(n(),c("div",La,[e("div",Ia,[e("h2",Da,I(v.value?"Edit VPS Server":"Add VPS Server"),1),e("form",{onSubmit:Oe(te,["prevent"])},[e("div",Ma,[y[9]||(y[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),U(e("input",{"onUpdate:modelValue":y[1]||(y[1]=f=>u.value.name=f),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,u.value.name]])]),e("div",ja,[y[10]||(y[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"IP Address / Hostname",-1)),U(e("input",{"onUpdate:modelValue":y[2]||(y[2]=f=>u.value.ip_address=f),type:"text",required:"",placeholder:"e.g. 203.0.113.10 or worker.example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,u.value.ip_address]])]),e("div",Ua,[y[11]||(y[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH User",-1)),U(e("input",{"onUpdate:modelValue":y[3]||(y[3]=f=>u.value.ssh_user=f),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,u.value.ssh_user]])]),e("div",Fa,[y[12]||(y[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Port",-1)),U(e("input",{"onUpdate:modelValue":y[4]||(y[4]=f=>u.value.ssh_port=f),type:"number",required:"",min:"1",max:"65535",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,u.value.ssh_port,void 0,{number:!0}]])]),e("div",Va,[y[14]||(y[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Key Path",-1)),e("div",Na,[U(e("input",{"onUpdate:modelValue":y[5]||(y[5]=f=>u.value.ssh_key_path=f),type:"text",placeholder:"/path/to/ssh/key",class:"block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,u.value.ssh_key_path]]),e("select",{onChange:y[6]||(y[6]=f=>D(f)),class:"block w-full border-gray-300 rounded-md shadow-sm"},[...y[13]||(y[13]=[Tt('<option value="">Chọn nhanh đường dẫn</option><option value="/root/.ssh/id_rsa">/root/.ssh/id_rsa</option><option value="/root/.ssh/id_ed25519">/root/.ssh/id_ed25519</option><option value="/home/ubuntu/.ssh/id_rsa">/home/ubuntu/.ssh/id_rsa</option><option value="/home/ubuntu/.ssh/id_ed25519">/home/ubuntu/.ssh/id_ed25519</option><option value="/home/ec2-user/.ssh/id_rsa">/home/ec2-user/.ssh/id_rsa</option><option value="/home/ec2-user/.ssh/id_ed25519">/home/ec2-user/.ssh/id_ed25519</option><option value="/home/admin/.ssh/id_rsa">/home/admin/.ssh/id_rsa</option><option value="/home/admin/.ssh/id_ed25519">/home/admin/.ssh/id_ed25519</option>',9)])],32)])]),v.value?(n(),c("div",za,[y[15]||(y[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Worker Key",-1)),e("div",Oa,[e("input",{value:x.value,readonly:"",class:"flex-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Ba),e("button",{type:"button",onClick:ue,class:"px-3 py-2 rounded-md border border-gray-300 bg-gray-50"},"Copy")])])):Z("",!0),e("div",Ha,[y[17]||(y[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),U(e("select",{"onUpdate:modelValue":y[7]||(y[7]=f=>u.value.status=f),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...y[16]||(y[16]=[e("option",{value:"active"},"active",-1),e("option",{value:"inactive"},"inactive",-1),e("option",{value:"error"},"error",-1)])],512),[[Ze,u.value.status]])]),e("div",qa,[e("button",{type:"button",onClick:z,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",Wa,I(v.value?"Update":"Create"),1)])],32)])])):Z("",!0),t.value?(n(),c("div",Ya,[e("div",{class:Ie([r.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},I(t.value),3)])):Z("",!0)]))}},Xa={class:"min-h-screen bg-gray-100"},Ga={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Qa={class:"px-4 py-6 sm:px-0"},Ja={key:0,class:"mb-4"},Za={class:"flex justify-between items-center mb-6"},eo={class:"bg-white shadow sm:rounded-md"},to={class:"divide-y divide-gray-200"},so={class:"flex items-center justify-between"},ao={class:"flex-1"},oo={class:"flex items-center"},lo={class:"text-lg font-medium text-gray-900"},no={class:"text-sm text-gray-500 mt-1"},ro={class:"mt-2 flex items-center space-x-4 text-sm"},io=["title"],uo={class:"flex items-center space-x-2"},co=["href"],po=["href"],mo=["onClick","disabled"],go=["onClick","disabled"],vo=["onClick","disabled"],fo={key:2,class:"relative redeploy-dropdown-container"},bo=["onClick","disabled"],yo={key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50"},ho={class:"py-1"},xo=["onClick"],wo=["onClick"],_o=["onClick"],ko=["onClick","disabled"],$o={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},So={class:"bg-white rounded-lg p-6 w-full max-w-md"},Co={key:0,class:"mb-4 text-sm text-red-600"},To={class:"mb-4"},Eo={class:"mb-4"},Ro={class:"mb-4"},Ao=["value"],Po={key:0,class:"mb-4"},Lo={key:1,class:"mb-4"},Io={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Do={class:"bg-white rounded-lg p-6 w-full max-w-md"},Mo={class:"mb-4"},jo={class:"space-y-2"},Uo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Fo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Vo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},No={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},zo={class:"flex justify-end space-x-3"},Oo=["disabled"],Bo={key:2,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Ho={class:"bg-white rounded-lg p-6 w-full max-w-md"},qo={class:"mb-4"},Wo={class:"space-y-2"},Yo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Ko={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Xo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Go={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Qo={class:"flex justify-end space-x-3"},Jo=["disabled"],Zo={key:0,class:"fixed bottom-4 right-4 z-50"},el={__name:"WebsiteManagement",setup(s){const t=g([]),r=g([]),d=g(!1);g(!1),g(!1),g(!1),g(null),g([]),g(null);const p=g(""),v=g(""),m=g(""),x=g(""),u=g({});let o=null;g(!1);const k=g([]),D=g([]),te=g([]),i=g([]),se=g({}),z=g([]),ue=g(!1),$=g(!1),y=g(null),f=g({template_names:["all"]}),P=g({template_names:["all"]}),T=(A,b="success")=>{m.value=A,x.value=b,setTimeout(()=>{m.value=""},3e3)},S=g({domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",wordpress_template:"basic"});g({path:"",filename:"",title:"",content:""});const C=async()=>{try{const b=(await N.get("/api/websites")).data;b.forEach(oe=>{const ae=u.value[oe.id];ae&&ae!==oe.status&&(oe.status==="deployed"?T(`${oe.domain} deployed`,"success"):oe.status==="error"&&T(`${oe.domain} deploy failed`,"error")),u.value[oe.id]=oe.status});const K=new Set(b.map(oe=>oe.domain)),G=oe=>{for(const ae of K)if(ae!==oe&&oe.endsWith("."+ae))return!0;return!1};t.value=b.filter(oe=>!G(oe.domain))}catch{T("Failed to fetch websites","error")}},pe=async()=>{try{const A=await N.get("/api/vps");r.value=A.data.filter(b=>b.status==="active")}catch{}},J=async()=>{var A,b,K,G;try{await N.post("/api/websites",S.value),T("Website created","success"),p.value="Website created",v.value="success",Ce(),await C()}catch(oe){const ae=((b=(A=oe==null?void 0:oe.response)==null?void 0:A.data)==null?void 0:b.message)||((G=(K=oe==null?void 0:oe.response)==null?void 0:K.data)==null?void 0:G.error)||"Failed to create website";T(ae,"error"),p.value=ae,v.value="error"}},W=async A=>{var b,K,G,oe;try{A.status="deploying",k.value=[...k.value,A.id],await N.post(`/api/websites/${A.id}/deploy`),T("Deployment started","success"),p.value="Deployment started",v.value="success",await C()}catch(ae){const je=((K=(b=ae==null?void 0:ae.response)==null?void 0:b.data)==null?void 0:K.message)||((oe=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:oe.error)||"Failed to deploy website";T(je,"error"),p.value=je,v.value="error",await C()}finally{k.value=k.value.filter(ae=>ae!==A.id)}},xe=async A=>{var b,K,G,oe;try{D.value=[...D.value,A.id],await N.post(`/api/websites/${A.id}/ssl`),T("SSL generation started","success"),p.value="SSL generation started",v.value="success",await C()}catch(ae){const je=((K=(b=ae==null?void 0:ae.response)==null?void 0:b.data)==null?void 0:K.message)||((oe=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:oe.error)||"Failed to enable SSL";T(je,"error"),p.value=je,v.value="error"}finally{D.value=D.value.filter(ae=>ae!==A.id)}},Se=async A=>{var b,K,G,oe;if(confirm(`Are you sure you want to delete ${A.domain}?`))try{i.value=[...i.value,A.id],await N.delete(`/api/websites/${A.id}`),T("Website deleted","success"),await C()}catch(ae){const je=((K=(b=ae==null?void 0:ae.response)==null?void 0:b.data)==null?void 0:K.message)||((oe=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:oe.error)||"Failed to delete website";T(je,"error")}finally{i.value=i.value.filter(ae=>ae!==A.id)}},fe=async A=>{var b,K,G,oe;try{te.value=[...te.value,A.id],await N.post(`/api/websites/${A.id}/deactivate`),T("Website deactivated","success"),p.value="Website deactivated",v.value="success",C()}catch(ae){const je=((K=(b=ae==null?void 0:ae.response)==null?void 0:b.data)==null?void 0:K.message)||((oe=(G=ae==null?void 0:ae.response)==null?void 0:G.data)==null?void 0:oe.error)||"Failed to deactivate website";T(je,"error"),p.value=je,v.value="error"}finally{te.value=te.value.filter(ae=>ae!==A.id)}};g([]);const Ce=()=>{d.value=!1,S.value={domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",wordpress_template:"basic"}};tt(()=>{C(),pe(),o=setInterval(C,3e3),document.addEventListener("click",A=>{A.target.closest(".redeploy-dropdown-container")||(se.value={})})}),Bt(()=>{o&&clearInterval(o)});const De=A=>{const b=`/preview/${A.id}`,K=localStorage.getItem("adminToken")||"",G=new URLSearchParams;K&&G.set("token",K),G.set("hide_preview_bar","1");const oe=G.toString();return oe?`${b}?${oe}`:b},Ve=A=>{se.value={...se.value,[A]:!se.value[A]}},Me=async A=>{var b,K;try{z.value=[...z.value,A.id],se.value[A.id]=!1;const G=await N.post(`/api/websites/${A.id}/redeploy-pages`);T(G.data.message||"Pages redeployed successfully","success")}catch(G){const oe=((K=(b=G==null?void 0:G.response)==null?void 0:b.data)==null?void 0:K.message)||"Failed to redeploy pages";T(oe,"error")}finally{z.value=z.value.filter(G=>G!==A.id)}},Ye=A=>{y.value=A,se.value[A.id]=!1,ue.value=!0},ie=A=>{y.value=A,se.value[A.id]=!1,$.value=!0},ne=async()=>{var A,b;if(y.value)try{z.value=[...z.value,y.value.id];const K=await N.post(`/api/websites/${y.value.id}/redeploy-template-assets`,f.value);T(K.data.message||"Template assets deployed","success"),ue.value=!1}catch(K){const G=((b=(A=K==null?void 0:K.response)==null?void 0:A.data)==null?void 0:b.message)||"Failed to deploy template assets";T(G,"error")}finally{z.value=z.value.filter(K=>K!==y.value.id)}},w=async()=>{var A,b;if(y.value)try{z.value=[...z.value,y.value.id];const K={template_names:(P.value.template_names||[]).length===0?[]:P.value.template_names},G=await N.post(`/api/websites/${y.value.id}/update-pages-template`,K);T(G.data.message||"Header/footer updated","success"),$.value=!1}catch(K){const G=((b=(A=K==null?void 0:K.response)==null?void 0:A.data)==null?void 0:b.message)||"Failed to update header/footer";T(G,"error")}finally{z.value=z.value.filter(K=>K!==y.value.id)}},X=A=>{const b=f.value.template_names||[];b.indexOf(A)===-1?f.value.template_names=[...b,A]:f.value.template_names=b.filter(G=>G!==A),console.log("Redeploy templates:",f.value.template_names)},E=A=>{const b=P.value.template_names||[];b.indexOf(A)===-1?P.value.template_names=[...b,A]:P.value.template_names=b.filter(G=>G!==A),console.log("Update templates:",P.value.template_names)},O=A=>(f.value.template_names||[]).includes(A),re=A=>(P.value.template_names||[]).includes(A),Re=()=>{ue.value=!1,y.value=null,f.value={template_names:["all"]}},ve=()=>{$.value=!1,y.value=null,P.value={template_names:["all"]}};return(A,b)=>{var G,oe,ae,je;const K=rt("router-link");return n(),c(he,null,[e("div",Xa,[e("div",Ga,[e("div",Qa,[p.value?(n(),c("div",Ja,[e("div",{class:Ie([v.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},I(p.value),3)])):Z("",!0),e("div",Za,[b[14]||(b[14]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Websites",-1)),e("button",{onClick:b[0]||(b[0]=L=>d.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Create Website ")]),e("div",eo,[e("ul",to,[(n(!0),c(he,null,we(t.value,L=>{var Te;return n(),c("li",{key:L.id,class:"px-6 py-4 relative overflow-visible"},[e("div",so,[e("div",ao,[e("div",oo,[e("h3",lo,I(L.domain),1),e("span",{class:Ie([{"bg-blue-100 text-blue-800":L.type==="html","bg-green-100 text-green-800":L.type==="wordpress","bg-purple-100 text-purple-800":L.type==="laravel1"},"ml-2 px-2 py-1 text-xs font-medium rounded-full"])},I(L.type),3)]),e("p",no," VPS: "+I(((Te=L.vps_server)==null?void 0:Te.name)||"N/A"),1),e("div",ro,[e("span",{class:Ie(["inline-flex items-center",{"text-blue-600":L.status==="deploying","text-green-600":L.status==="deployed","text-gray-600":L.status==="pending"||L.status==="draft","text-orange-600":L.status==="suspended","text-red-600":L.status==="error"}]),title:L.status},[L.status==="deploying"?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):L.status==="deployed"?(n(),de(_(St),{key:1,class:"size-4"})):L.status==="pending"||L.status==="draft"?(n(),de(_(Pt),{key:2,class:"size-4"})):L.status==="suspended"?(n(),de(_(Lt),{key:3,class:"size-4"})):(n(),de(_(Ct),{key:4,class:"size-4"}))],10,io),e("span",{class:Ie(["inline-flex items-center gap-1",L.ssl_enabled?"text-green-600":"text-gray-400"])},[L.ssl_enabled?(n(),de(_(xt),{key:0,class:"size-4"})):(n(),de(_(cs),{key:1,class:"size-4"}))],2)])]),e("div",uo,[e("a",{href:(L.ssl_enabled?"https://":"http://")+L.domain,target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Website"},[V(_(gt),{class:"size-4"})],8,co),V(K,{to:`/websites/${L.id}/pages`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:ke(()=>[V(_(ps),{class:"size-4"})]),_:1},8,["to"]),V(K,{to:`/websites/${L.id}/folders`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-amber-600 hover:bg-gray-50",title:"Manage Categories"},{default:ke(()=>[V(_(Ls),{class:"size-4"})]),_:1},8,["to"]),V(K,{to:`/websites/${L.id}/subdomains`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"Manage Subdomains"},{default:ke(()=>[V(_(ns),{class:"size-4"})]),_:1},8,["to"]),V(K,{to:`/websites/${L.id}/settings`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Website Settings"},{default:ke(()=>[V(_(ds),{class:"size-4"})]),_:1},8,["to"]),e("a",{href:De(L),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[V(_(Pt),{class:"size-4"})],8,po),e("button",{onClick:Ne=>W(L),disabled:L.status==="deploying"||L.status==="deployed"||k.value.includes(L.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[k.value.includes(L.id)?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):(n(),de(_(ms),{key:1,class:"size-4"}))],8,mo),L.status==="deployed"?(n(),c("button",{key:0,onClick:Ne=>xe(L),disabled:D.value.includes(L.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[D.value.includes(L.id)?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):(n(),de(_(xt),{key:1,class:"size-4"}))],8,go)):Z("",!0),L.status==="deployed"||L.status==="error"?(n(),c("button",{key:1,onClick:Ne=>fe(L),disabled:te.value.includes(L.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[te.value.includes(L.id)?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):(n(),de(_(Lt),{key:1,class:"size-4"}))],8,vo)):Z("",!0),L.status==="deployed"&&L.type==="laravel1"?(n(),c("div",fo,[e("button",{onClick:Ne=>Ve(L.id),disabled:z.value.includes(L.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-teal-600 hover:bg-gray-50 disabled:text-gray-400",title:"Redeploy Options"},[z.value.includes(L.id)?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):(n(),de(_(Is),{key:1,class:"size-4"}))],8,bo),se.value[L.id]?(n(),c("div",yo,[e("div",ho,[e("button",{onClick:Ne=>Me(L),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy All Pages ",8,xo),e("button",{onClick:Ne=>Ye(L),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy Template Assets ",8,wo),e("button",{onClick:Ne=>ie(L),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Update Pages Template ",8,_o)])])):Z("",!0)])):Z("",!0),e("button",{onClick:Ne=>Se(L),disabled:i.value.includes(L.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[i.value.includes(L.id)?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):(n(),de(_(vt),{key:1,class:"size-4"}))],8,ko)])])])}),128))])])])]),d.value?(n(),c("div",$o,[e("div",So,[b[26]||(b[26]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create Website",-1)),r.value.length===0?(n(),c("div",Co,"Chưa có VPS ở trạng thái active. Vào mục Servers để đặt trạng thái active cho VPS hiện tại.")):Z("",!0),e("form",{onSubmit:Oe(J,["prevent"])},[e("div",To,[b[15]||(b[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Domain",-1)),U(e("input",{"onUpdate:modelValue":b[1]||(b[1]=L=>S.value.domain=L),type:"text",required:"",placeholder:"example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,S.value.domain]])]),e("div",Eo,[b[17]||(b[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Type",-1)),U(e("select",{"onUpdate:modelValue":b[2]||(b[2]=L=>S.value.type=L),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...b[16]||(b[16]=[e("option",{value:"html"},"HTML Website",-1),e("option",{value:"wordpress"},"WordPress",-1),e("option",{value:"laravel1"},"Laravel 1",-1)])],512),[[Ze,S.value.type]])]),e("div",Ro,[b[19]||(b[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),U(e("select",{"onUpdate:modelValue":b[3]||(b[3]=L=>S.value.vps_server_id=L),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[b[18]||(b[18]=e("option",{value:""},"Select VPS Server",-1)),(n(!0),c(he,null,we(r.value,L=>(n(),c("option",{key:L.id,value:L.id},I(L.name)+" ("+I(L.ip_address)+") ",9,Ao))),128))],512),[[Ze,S.value.vps_server_id]])]),S.value.type==="wordpress"?(n(),c("div",Po,[b[21]||(b[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"WordPress Template",-1)),U(e("select",{"onUpdate:modelValue":b[4]||(b[4]=L=>S.value.wordpress_template=L),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...b[20]||(b[20]=[e("option",{value:"basic"},"Basic WordPress",-1),e("option",{value:"business"},"Business Theme",-1),e("option",{value:"ecommerce"},"E-commerce Theme",-1)])],512),[[Ze,S.value.wordpress_template]])])):Z("",!0),S.value.type==="laravel1"?(n(),c("div",Lo,[b[23]||(b[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template Package",-1)),U(e("select",{"onUpdate:modelValue":b[5]||(b[5]=L=>S.value.template_package=L),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...b[22]||(b[22]=[e("option",{value:"laravel-hotel-1"},"Hotel Template",-1)])],512),[[Ze,S.value.template_package]]),b[24]||(b[24]=e("p",{class:"mt-1 text-xs text-gray-500"},"Includes home, listing, and detail pages with shared assets",-1))])):Z("",!0),e("div",{class:"flex justify-end space-x-3"},[e("button",{type:"button",onClick:Ce,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),b[25]||(b[25]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Create ",-1))])],32)])])):Z("",!0),ue.value?(n(),c("div",Io,[e("div",Do,[b[33]||(b[33]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Redeploy Template Assets",-1)),e("div",Mo,[b[31]||(b[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",jo,[e("div",{class:"flex items-center cursor-pointer",onClick:b[6]||(b[6]=L=>X("all"))},[e("div",{style:nt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:O("all")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[O("all")?(n(),c("span",Uo,"✓")):Z("",!0)],4),b[27]||(b[27]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:b[7]||(b[7]=L=>X("home"))},[e("div",{style:nt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:O("home")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[O("home")?(n(),c("span",Fo,"✓")):Z("",!0)],4),b[28]||(b[28]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:b[8]||(b[8]=L=>X("listing"))},[e("div",{style:nt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:O("listing")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[O("listing")?(n(),c("span",Vo,"✓")):Z("",!0)],4),b[29]||(b[29]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:b[9]||(b[9]=L=>X("detail"))},[e("div",{style:nt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:O("detail")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[O("detail")?(n(),c("span",No,"✓")):Z("",!0)],4),b[30]||(b[30]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),b[34]||(b[34]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-blue-800"}," Deploys CSS/JS files from the selected templates to all pages. Use this when you update template scripts or styles. ")],-1)),e("div",zo,[e("button",{type:"button",onClick:Re,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:ne,disabled:z.value.includes((G=y.value)==null?void 0:G.id),class:"px-3 py-2 bg-teal-600 text-white text-sm rounded-md hover:bg-teal-700 disabled:opacity-50 flex items-center gap-2"},[z.value.includes((oe=y.value)==null?void 0:oe.id)?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):Z("",!0),b[32]||(b[32]=$e(" Deploy Assets ",-1))],8,Oo)])])])):Z("",!0),$.value?(n(),c("div",Bo,[e("div",Ho,[b[41]||(b[41]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Update Pages Template",-1)),e("div",qo,[b[39]||(b[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",Wo,[e("div",{class:"flex items-center cursor-pointer",onClick:b[10]||(b[10]=L=>E("all"))},[e("div",{style:nt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:re("all")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[re("all")?(n(),c("span",Yo,"✓")):Z("",!0)],4),b[35]||(b[35]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:b[11]||(b[11]=L=>E("home"))},[e("div",{style:nt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:re("home")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[re("home")?(n(),c("span",Ko,"✓")):Z("",!0)],4),b[36]||(b[36]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:b[12]||(b[12]=L=>E("listing"))},[e("div",{style:nt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:re("listing")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[re("listing")?(n(),c("span",Xo,"✓")):Z("",!0)],4),b[37]||(b[37]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:b[13]||(b[13]=L=>E("detail"))},[e("div",{style:nt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:re("detail")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[re("detail")?(n(),c("span",Go,"✓")):Z("",!0)],4),b[38]||(b[38]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),b[42]||(b[42]=e("div",{class:"bg-purple-50 border border-purple-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-purple-800"},[$e(" Cập nhật phần header/footer cho "),e("strong",null,"các trang đang dùng template đã chọn"),$e(", sau đó tự động deploy các trang đó. Tính năng này "),e("strong",null,"không"),$e(' cập nhật CSS/JS (dùng mục "Redeploy Template Assets" cho CSS/JS). Với website chính, hệ thống sẽ xếp lịch redeploy Trang chủ và các trang Category liên quan. ')])],-1)),e("div",Qo,[e("button",{type:"button",onClick:ve,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:w,disabled:z.value.includes((ae=y.value)==null?void 0:ae.id),class:"px-3 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2"},[z.value.includes((je=y.value)==null?void 0:je.id)?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):Z("",!0),b[40]||(b[40]=$e(" Update header/footer ",-1))],8,Jo)])])])):Z("",!0)]),m.value?(n(),c("div",Zo,[e("div",{class:Ie([x.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},I(m.value),3)])):Z("",!0)],64)}}},tl={class:"min-h-screen bg-gray-100"},sl={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},al={class:"px-4 py-6 sm:px-0"},ol={class:"flex items-center justify-between mb-6"},ll={class:"text-3xl font-bold text-gray-900"},nl={key:0,class:"ml-2 text-lg text-gray-500"},rl={key:0,class:"mb-4"},il={key:1,class:"text-gray-600"},dl={key:2,class:"mb-4"},ul={class:"inline-flex rounded-md shadow-sm",role:"group"},cl={key:3,class:"bg-white shadow sm:rounded-md p-6 space-y-6"},pl={key:0,class:"space-y-6"},ml={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},gl={class:"mt-2 flex items-center gap-4"},vl={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},fl=["src"],bl={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},yl={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},hl={class:"mt-2 flex items-center gap-4"},xl={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},wl=["src"],_l={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},kl={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},$l={class:"mt-2 flex items-center gap-4"},Sl={class:"h-10 w-10 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},Cl=["src"],Tl={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},El={key:0,class:"text-xs text-gray-500 truncate max-w-[220px]"},Rl={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Al={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Pl={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Ll={key:1,class:"space-y-6"},Il={class:"flex items-center justify-between mb-4"},Dl={class:"space-y-2"},Ml={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},jl=["onDragstart","onDrop"],Ul={class:"p-4"},Fl={class:"flex items-start justify-between gap-4"},Vl={class:"flex items-start gap-3 flex-1 min-w-0"},Nl={class:"flex-1 min-w-0 space-y-2"},zl={class:"flex items-center gap-2"},Ol=["onUpdate:modelValue"],Bl=["onUpdate:modelValue"],Hl={class:"flex items-center gap-2 flex-shrink-0"},ql=["onClick"],Wl=["onClick"],Yl={key:0,class:"mt-4 ml-8 space-y-2 pt-3 border-t border-gray-100"},Kl=["onDragstart","onDrop"],Xl={class:"flex-1 min-w-0 space-y-1"},Gl=["onUpdate:modelValue"],Ql=["onUpdate:modelValue"],Jl=["onClick"],Zl={class:"flex items-center justify-between mb-4"},en={class:"space-y-3"},tn={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},sn=["onDragstart","onDrop"],an={class:"p-4"},on={class:"flex items-start justify-between gap-4 mb-3"},ln={class:"flex items-start gap-3 flex-1 min-w-0"},nn={class:"flex-1 min-w-0"},rn=["onUpdate:modelValue","placeholder"],dn={class:"flex items-center gap-2 flex-shrink-0"},un=["onClick"],cn=["onClick"],pn={key:0,class:"ml-8 space-y-2 pt-3 border-t border-gray-100"},mn=["onDragstart","onDrop"],gn={class:"flex-1 min-w-0 space-y-1"},vn=["onUpdate:modelValue"],fn=["onUpdate:modelValue"],bn=["onClick"],yn={key:1,class:"ml-8 pt-3 border-t border-gray-100"},hn={class:"flex justify-end space-x-3"},xn=["disabled"],wn={key:0,class:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4"},_n={key:1},kn={class:"px-6 py-4 space-y-4"},$n=["value"],Sn={class:"pt-3 border-t border-gray-200"},Cn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},Tn={class:"px-6 py-4 border-b border-gray-200"},En={class:"text-sm text-gray-500 mt-1"},Rn={class:"px-6 py-4 space-y-4"},An=["value"],Pn={class:"pt-3 border-t border-gray-200"},Ln={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},In={class:"px-6 py-4 space-y-4"},Dn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},Mn={class:"px-6 py-4 border-b border-gray-200"},jn={class:"text-sm text-gray-500 mt-1"},Un={class:"px-6 py-4 space-y-4"},Fn=["value"],Vn={class:"pt-3 border-t border-gray-200"},Nn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},zn={__name:"WebsiteSettings",setup(s){const r=pt().params.websiteId,d=g(null),p=g(!0),v=g(!1),m=g(""),x=g(""),u=g("general"),o=g({title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}),k=g(null),D=g(null),te=g(null),i=g(null),se=g(null),z=g(null),ue=We(()=>(o.value.custom_head_html||"").split(`
`).length||1),$=We(()=>(o.value.custom_body_html||"").split(`
`).length||1),y=We(()=>(o.value.custom_footer_html||"").split(`
`).length||1),f=F=>{F==="head"&&k.value&&i.value&&(k.value.scrollTop=i.value.scrollTop),F==="body"&&D.value&&se.value&&(D.value.scrollTop=se.value.scrollTop),F==="footer"&&te.value&&z.value&&(te.value.scrollTop=z.value.scrollTop)},P=async()=>{try{const F=await N.get(`/api/websites/${r}`);d.value=F.data}catch{}},T=async()=>{var F,l;try{const ye=(await N.get(`/api/websites/${r}/settings`)).data||{};o.value={title:ye.title||"",logo_header_url:ye.logo_header_url||"",logo_footer_url:ye.logo_footer_url||"",favicon_url:ye.favicon_url||"",custom_head_html:ye.custom_head_html||"",custom_body_html:ye.custom_body_html||"",custom_footer_html:ye.custom_footer_html||"",menu:Array.isArray(ye.menu)?ye.menu:[],footer_links_html:ye.footer_links_html||""},W.value=Array.isArray(ye.menu)?ye.menu:[],Array.isArray(ye.footer_columns)?Te.value=ye.footer_columns:Te.value=[]}catch(be){m.value=((l=(F=be==null?void 0:be.response)==null?void 0:F.data)==null?void 0:l.error)||"Failed to load settings",x.value="error"}},S=async()=>{var F,l,be,ye;v.value=!0,m.value="";try{o.value.footer_links_html=Mt(),o.value.footer_columns=Te.value,await N.put(`/api/websites/${r}/settings`,o.value),m.value="Updated settings",x.value="success"}catch(Ee){m.value=((l=(F=Ee==null?void 0:Ee.response)==null?void 0:F.data)==null?void 0:l.message)||((ye=(be=Ee==null?void 0:Ee.response)==null?void 0:be.data)==null?void 0:ye.error)||(Ee==null?void 0:Ee.message)||"Failed to update settings",x.value="error"}finally{v.value=!1}},C=()=>{o.value={title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}},pe=async(F,l)=>{var Ee,R,Le,q;const be=((Ee=F==null?void 0:F.target)==null?void 0:Ee.files)||[];if(!be.length)return;const ye=new FormData;ye.append("file",be[0]);try{let ce=`/api/websites/${r}/assets/${l}`;const me=await N.post(ce,ye,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},timeout:6e4}),Xe=((R=me==null?void 0:me.data)==null?void 0:R.url)||"";l==="logo-header"?o.value.logo_header_url=Xe:l==="logo-footer"?o.value.logo_footer_url=Xe:l==="favicon"&&(o.value.favicon_url=Xe),m.value="Uploaded "+l,x.value="success"}catch(ce){const me=((q=(Le=ce==null?void 0:ce.response)==null?void 0:Le.data)==null?void 0:q.error)||(ce==null?void 0:ce.message)||"Upload failed";m.value=me,x.value="error"}finally{F.target.value=""}};tt(async()=>{await Promise.all([P(),T(),ne()]),W.value=Array.isArray(o.value.menu)?[...o.value.menu]:[],Te.value.length||updateFooterColumnCount(),p.value=!1});const J=g([]),W=g([]),xe=g(!1),Se=g(!1),fe=g(-1),Ce=g(""),De=g(""),Ve=g(""),Me=g(""),Ye=g(""),ie=g(""),ne=async()=>{try{const F=await N.get(`/api/websites/${r}/folders`);J.value=F.data||[]}catch{}},w=F=>`/${(F==null?void 0:F.slug)||""}`,X=()=>{if(Ce.value){const F=J.value.find(l=>String(l.id)===String(Ce.value));F&&(De.value=F.name,Ve.value=w(F))}},E=()=>{if(Me.value){const F=J.value.find(l=>String(l.id)===String(Me.value));F&&(Ye.value=F.name,ie.value=w(F))}};kt(Ce,X),kt(Me,E);const O=()=>{if(!De.value||!Ve.value){m.value="Vui lòng điền đầy đủ thông tin",x.value="error";return}W.value.push({label:De.value,url:Ve.value,children:[]}),o.value.menu=W.value,Ce.value="",De.value="",Ve.value="",xe.value=!1,m.value="Đã thêm menu",x.value="success"},re=F=>{fe.value=F,Se.value=!0},Re=()=>{if(!Ye.value||!ie.value){m.value="Vui lòng điền đầy đủ thông tin",x.value="error";return}const F=W.value[fe.value];F&&(F.children=F.children||[],F.children.push({label:Ye.value,url:ie.value}),o.value.menu=W.value,Me.value="",Ye.value="",ie.value="",Se.value=!1,m.value="Đã thêm menu con",x.value="success")},ve=()=>{o.value.menu=W.value},A=F=>{W.value.splice(F,1),o.value.menu=W.value},b=(F,l)=>{const be=W.value[F];be&&(be.children.splice(l,1),o.value.menu=W.value)};let K=-1,G={parent:-1,index:-1};const oe=F=>{K=F},ae=F=>{if(K===-1||F===K)return;const l=W.value,[be]=l.splice(K,1);l.splice(F,0,be),K=-1,o.value.menu=l},je=(F,l)=>{G={parent:F,index:l}},L=(F,l)=>{if(G.parent!==F)return;const be=W.value[F].children||[],ye=G.index;if(ye===l||ye<0)return;const[Ee]=be.splice(ye,1);be.splice(l,0,Ee),G={parent:-1,index:-1},o.value.menu=W.value},Te=g([]),Ne=g(!1),M=g(!1),a=g(-1),j=g(""),H=g(""),h=g(""),Y=g("");kt(H,()=>{if(H.value){const F=J.value.find(l=>String(l.id)===String(H.value));F&&(h.value=F.name,Y.value=w(F))}});const ze=()=>{Te.value.push({title:j.value||"",links:[]}),j.value="",Ne.value=!1,m.value="Đã thêm cột footer",x.value="success"},ee=F=>{a.value=F,M.value=!0},Ae=()=>{if(!h.value||!Y.value){m.value="Vui lòng điền đầy đủ thông tin",x.value="error";return}const F=Te.value[a.value];F&&(F.links.push({label:h.value,url:Y.value}),H.value="",h.value="",Y.value="",M.value=!1,m.value="Đã thêm liên kết footer",x.value="success")},Fe=F=>{Te.value.splice(F,1)},et=()=>{},Ue=(F,l)=>{const be=Te.value[F];be&&be.links.splice(l,1)};let qe=-1;const lt=F=>{qe=F},Be=F=>{if(qe===-1||F===qe)return;const l=Te.value,[be]=l.splice(qe,1);l.splice(F,0,be),qe=-1};let Ke={column:-1,index:-1};const ft=(F,l)=>{Ke={column:F,index:l}},it=(F,l)=>{if(Ke.column!==F)return;const be=Te.value[F].links||[],ye=Ke.index;if(ye===l||ye<0)return;const[Ee]=be.splice(ye,1);be.splice(l,0,Ee),Ke={column:-1,index:-1}},Mt=()=>{const F=Te.value;if(!F.length)return"";let l='<div class="grid grid-cols-'+F.length+' gap-6">';for(const be of F){l+="<div>",be.title&&(l+='<div class="font-medium mb-2">'+be.title+"</div>"),l+='<ul class="space-y-1">';const ye=be.links||[];for(const Ee of ye)l+='<li><a href="'+(Ee.url||"#")+'" class="text-gray-600 hover:text-gray-900">'+(Ee.label||"")+"</a></li>";l+="</ul>",l+="</div>"}return l+="</div>",l};return(F,l)=>{var ye,Ee;const be=rt("router-link");return n(),c("div",tl,[e("div",sl,[e("div",al,[e("div",ol,[e("h1",ll,[l[40]||(l[40]=$e(" Website Settings ",-1)),d.value?(n(),c("span",nl,I(d.value.domain),1)):Z("",!0)]),V(be,{to:"/websites",class:"px-3 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:ke(()=>[...l[41]||(l[41]=[$e("Back",-1)])]),_:1})]),m.value?(n(),c("div",rl,[e("div",{class:Ie([x.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},I(m.value),3)])):Z("",!0),p.value?(n(),c("div",il,"Loading...")):(n(),c("div",dl,[e("div",ul,[e("button",{type:"button",onClick:l[0]||(l[0]=R=>u.value="general"),class:Ie([u.value==="general"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-l-md hover:bg-gray-50"])},"Cài đặt chung",2),e("button",{type:"button",onClick:l[1]||(l[1]=R=>u.value="navigation"),class:Ie([u.value==="navigation"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-r-md hover:bg-gray-50"])},"Menu Header & Footer",2)])])),p.value?Z("",!0):(n(),c("div",cl,[u.value==="general"?(n(),c("div",pl,[e("div",null,[l[42]||(l[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề",-1)),U(e("input",{"onUpdate:modelValue":l[2]||(l[2]=R=>o.value.title=R),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Website title"},null,512),[[Q,o.value.title]])]),e("div",ml,[e("div",null,[l[44]||(l[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Header",-1)),e("div",gl,[e("div",vl,[o.value.logo_header_url?(n(),c("img",{key:0,src:o.value.logo_header_url,class:"object-contain h-full w-full"},null,8,fl)):(n(),de(_(jt),{key:1,class:"size-6 text-gray-400"}))]),e("label",bl,[V(_(Ut),{class:"size-4 mr-2"}),l[43]||(l[43]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:l[3]||(l[3]=R=>pe(R,"logo-header")),class:"hidden"},null,32)]),o.value.logo_header_url?(n(),c("span",yl,I(o.value.logo_header_url),1)):Z("",!0)])]),e("div",null,[l[46]||(l[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Footer",-1)),e("div",hl,[e("div",xl,[o.value.logo_footer_url?(n(),c("img",{key:0,src:o.value.logo_footer_url,class:"object-contain h-full w-full"},null,8,wl)):(n(),de(_(jt),{key:1,class:"size-6 text-gray-400"}))]),e("label",_l,[V(_(Ut),{class:"size-4 mr-2"}),l[45]||(l[45]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:l[4]||(l[4]=R=>pe(R,"logo-footer")),class:"hidden"},null,32)]),o.value.logo_footer_url?(n(),c("span",kl,I(o.value.logo_footer_url),1)):Z("",!0)])])]),e("div",null,[l[48]||(l[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Favicon",-1)),e("div",$l,[e("div",Sl,[o.value.favicon_url?(n(),c("img",{key:0,src:o.value.favicon_url,class:"object-contain h-full w-full"},null,8,Cl)):(n(),de(_(jt),{key:1,class:"size-5 text-gray-400"}))]),e("label",Tl,[V(_(Ut),{class:"size-4 mr-2"}),l[47]||(l[47]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".ico,.png,.jpg,.jpeg,.svg",onChange:l[5]||(l[5]=R=>pe(R,"favicon")),class:"hidden"},null,32)]),o.value.favicon_url?(n(),c("span",El,I(o.value.favicon_url),1)):Z("",!0)])]),e("div",null,[l[49]||(l[49]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào header",-1)),e("div",Rl,[e("div",{ref_key:"gutterHead",ref:k,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(n(!0),c(he,null,we(ue.value,R=>(n(),c("div",{key:R,class:"leading-6"},I(R),1))),128))],512),U(e("textarea",{ref_key:"codeHead",ref:i,"onUpdate:modelValue":l[6]||(l[6]=R=>o.value.custom_head_html=R),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:l[7]||(l[7]=R=>f("head"))},null,544),[[Q,o.value.custom_head_html]])])]),e("div",null,[l[50]||(l[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào body",-1)),e("div",Al,[e("div",{ref_key:"gutterBody",ref:D,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(n(!0),c(he,null,we($.value,R=>(n(),c("div",{key:R,class:"leading-6"},I(R),1))),128))],512),U(e("textarea",{ref_key:"codeBody",ref:se,"onUpdate:modelValue":l[8]||(l[8]=R=>o.value.custom_body_html=R),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<div>...</div>",onScroll:l[9]||(l[9]=R=>f("body"))},null,544),[[Q,o.value.custom_body_html]])])]),e("div",null,[l[51]||(l[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào footer",-1)),e("div",Pl,[e("div",{ref_key:"gutterFooter",ref:te,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(n(!0),c(he,null,we(y.value,R=>(n(),c("div",{key:R,class:"leading-6"},I(R),1))),128))],512),U(e("textarea",{ref_key:"codeFooter",ref:z,"onUpdate:modelValue":l[10]||(l[10]=R=>o.value.custom_footer_html=R),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:l[11]||(l[11]=R=>f("footer"))},null,544),[[Q,o.value.custom_footer_html]])])])])):Z("",!0),u.value==="navigation"?(n(),c("div",Ll,[e("div",null,[e("div",Il,[l[53]||(l[53]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Menu Header"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:l[12]||(l[12]=R=>xe.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...l[52]||(l[52]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),$e(" Thêm menu ",-1)])])]),e("div",Dl,[W.value.length===0?(n(),c("div",Ml,[...l[54]||(l[54]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có menu nào. Click "Thêm menu" để bắt đầu.',-1)])])):Z("",!0),(n(!0),c(he,null,we(W.value,(R,Le)=>(n(),c("div",{key:Le,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:q=>oe(Le),onDragover:l[14]||(l[14]=Oe(()=>{},["prevent"])),onDrop:q=>ae(Le)},[e("div",Ul,[e("div",Fl,[e("div",Vl,[l[55]||(l[55]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",Nl,[e("div",zl,[U(e("input",{"onUpdate:modelValue":q=>R.label=q,onInput:ve,type:"text",class:"flex-1 px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu"},null,40,Ol),[[Q,R.label]])]),U(e("input",{"onUpdate:modelValue":q=>R.url=q,onInput:ve,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL (ví dụ: /khach-san)"},null,40,Bl),[[Q,R.url]])])]),e("div",Hl,[e("button",{type:"button",onClick:q=>re(Le),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm menu con"},[...l[56]||(l[56]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,ql),e("button",{type:"button",onClick:q=>A(Le),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa"},[...l[57]||(l[57]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Wl)])]),R.children&&R.children.length>0?(n(),c("div",Yl,[(n(!0),c(he,null,we(R.children,(q,ce)=>(n(),c("div",{key:ce,class:"flex items-center gap-3 group",draggable:"true",onDragstart:me=>je(Le,ce),onDragover:l[13]||(l[13]=Oe(()=>{},["prevent"])),onDrop:me=>L(Le,ce)},[l[59]||(l[59]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),l[60]||(l[60]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("div",Xl,[U(e("input",{"onUpdate:modelValue":me=>q.label=me,onInput:ve,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu con"},null,40,Gl),[[Q,q.label]]),U(e("input",{"onUpdate:modelValue":me=>q.url=me,onInput:ve,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,Ql),[[Q,q.url]])]),e("button",{type:"button",onClick:me=>b(Le,ce),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...l[58]||(l[58]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Jl)],40,Kl))),128))])):Z("",!0)])],40,jl))),128))])]),e("div",null,[e("div",Zl,[l[62]||(l[62]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Footer"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:l[15]||(l[15]=R=>Ne.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...l[61]||(l[61]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),$e(" Thêm cột ",-1)])])]),e("div",en,[Te.value.length===0?(n(),c("div",tn,[...l[63]||(l[63]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có cột footer nào. Click "Thêm cột" để bắt đầu.',-1)])])):Z("",!0),(n(!0),c(he,null,we(Te.value,(R,Le)=>(n(),c("div",{key:Le,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:q=>lt(Le),onDragover:l[17]||(l[17]=Oe(()=>{},["prevent"])),onDrop:q=>Be(Le)},[e("div",an,[e("div",on,[e("div",ln,[l[64]||(l[64]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",nn,[U(e("input",{"onUpdate:modelValue":q=>R.title=q,onInput:et,type:"text",class:"w-full px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:`Tiêu đề cột ${Le+1}`},null,40,rn),[[Q,R.title]])])]),e("div",dn,[e("button",{type:"button",onClick:q=>ee(Le),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm liên kết"},[...l[65]||(l[65]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,un),e("button",{type:"button",onClick:q=>Fe(Le),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa cột"},[...l[66]||(l[66]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,cn)])]),R.links&&R.links.length>0?(n(),c("div",pn,[(n(!0),c(he,null,we(R.links,(q,ce)=>(n(),c("div",{key:ce,class:"flex items-center gap-3 group",draggable:"true",onDragstart:me=>ft(Le,ce),onDragover:l[16]||(l[16]=Oe(()=>{},["prevent"])),onDrop:me=>it(Le,ce)},[l[68]||(l[68]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),l[69]||(l[69]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),e("div",gn,[U(e("input",{"onUpdate:modelValue":me=>q.label=me,onInput:et,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên liên kết"},null,40,vn),[[Q,q.label]]),U(e("input",{"onUpdate:modelValue":me=>q.url=me,onInput:et,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,fn),[[Q,q.url]])]),e("button",{type:"button",onClick:me=>Ue(Le,ce),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...l[67]||(l[67]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,bn)],40,mn))),128))])):(n(),c("div",yn,[...l[70]||(l[70]=[e("p",{class:"text-xs text-gray-400 italic"},"Chưa có liên kết",-1)])]))])],40,sn))),128))])])])):Z("",!0),e("div",hn,[e("button",{type:"button",onClick:C,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Reset"),e("button",{type:"button",onClick:S,disabled:v.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2"},[v.value?(n(),c("span",wn)):(n(),c("span",_n,"Save"))],8,xn)])]))])]),xe.value?(n(),c("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:l[23]||(l[23]=R=>xe.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:l[22]||(l[22]=Oe(()=>{},["stop"]))},[l[75]||(l[75]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu mới")],-1)),e("div",kn,[e("div",null,[l[72]||(l[72]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),U(e("select",{"onUpdate:modelValue":l[18]||(l[18]=R=>Ce.value=R),class:"w-full rounded-md border-gray-300 text-sm"},[l[71]||(l[71]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(n(!0),c(he,null,we(J.value,R=>(n(),c("option",{key:R.id,value:R.id},I(R.name),9,$n))),128))],512),[[Ze,Ce.value]])]),e("div",Sn,[l[73]||(l[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu",-1)),U(e("input",{"onUpdate:modelValue":l[19]||(l[19]=R=>De.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn"},null,512),[[Q,De.value]])]),e("div",null,[l[74]||(l[74]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),U(e("input",{"onUpdate:modelValue":l[20]||(l[20]=R=>Ve.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san"},null,512),[[Q,Ve.value]])])]),e("div",Cn,[e("button",{type:"button",onClick:l[21]||(l[21]=R=>xe.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:O,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):Z("",!0),Se.value?(n(),c("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:l[29]||(l[29]=R=>Se.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:l[28]||(l[28]=Oe(()=>{},["stop"]))},[e("div",Tn,[l[77]||(l[77]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu con",-1)),e("p",En,[l[76]||(l[76]=$e("Thêm vào: ",-1)),e("strong",null,I((ye=W.value[fe.value])==null?void 0:ye.label),1)])]),e("div",Rn,[e("div",null,[l[79]||(l[79]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),U(e("select",{"onUpdate:modelValue":l[24]||(l[24]=R=>Me.value=R),class:"w-full rounded-md border-gray-300 text-sm"},[l[78]||(l[78]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(n(!0),c(he,null,we(J.value,R=>(n(),c("option",{key:R.id,value:R.id},I(R.name),9,An))),128))],512),[[Ze,Me.value]])]),e("div",Pn,[l[80]||(l[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu con",-1)),U(e("input",{"onUpdate:modelValue":l[25]||(l[25]=R=>Ye.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn 5 sao"},null,512),[[Q,Ye.value]])]),e("div",null,[l[81]||(l[81]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),U(e("input",{"onUpdate:modelValue":l[26]||(l[26]=R=>ie.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san-5-sao"},null,512),[[Q,ie.value]])])]),e("div",Ln,[e("button",{type:"button",onClick:l[27]||(l[27]=R=>Se.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:Re,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):Z("",!0),Ne.value?(n(),c("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:l[33]||(l[33]=R=>Ne.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:l[32]||(l[32]=Oe(()=>{},["stop"]))},[l[83]||(l[83]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm cột footer mới")],-1)),e("div",In,[e("div",null,[l[82]||(l[82]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tiêu đề cột",-1)),U(e("input",{"onUpdate:modelValue":l[30]||(l[30]=R=>j.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Thông tin"},null,512),[[Q,j.value]])])]),e("div",Dn,[e("button",{type:"button",onClick:l[31]||(l[31]=R=>Ne.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:ze,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):Z("",!0),M.value?(n(),c("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:l[39]||(l[39]=R=>M.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:l[38]||(l[38]=Oe(()=>{},["stop"]))},[e("div",Mn,[l[85]||(l[85]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm liên kết footer",-1)),e("p",jn,[l[84]||(l[84]=$e("Thêm vào: ",-1)),e("strong",null,I(((Ee=Te.value[a.value])==null?void 0:Ee.title)||`Cột ${a.value+1}`),1)])]),e("div",Un,[e("div",null,[l[87]||(l[87]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),U(e("select",{"onUpdate:modelValue":l[34]||(l[34]=R=>H.value=R),class:"w-full rounded-md border-gray-300 text-sm"},[l[86]||(l[86]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(n(!0),c(he,null,we(J.value,R=>(n(),c("option",{key:R.id,value:R.id},I(R.name),9,Fn))),128))],512),[[Ze,H.value]])]),e("div",Vn,[l[88]||(l[88]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên liên kết",-1)),U(e("input",{"onUpdate:modelValue":l[35]||(l[35]=R=>h.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Giới thiệu"},null,512),[[Q,h.value]])]),e("div",null,[l[89]||(l[89]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),U(e("input",{"onUpdate:modelValue":l[36]||(l[36]=R=>Y.value=R),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /gioi-thieu"},null,512),[[Q,Y.value]])])]),e("div",Nn,[e("button",{type:"button",onClick:l[37]||(l[37]=R=>M.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:Ae,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):Z("",!0)])}}};var fs={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht=Symbol.for("react.transitional.element"),On=Symbol.for("react.portal"),Bn=Symbol.for("react.fragment"),Hn=Symbol.for("react.strict_mode"),qn=Symbol.for("react.profiler"),Wn=Symbol.for("react.consumer"),Yn=Symbol.for("react.context"),Kn=Symbol.for("react.forward_ref"),Xn=Symbol.for("react.suspense"),Gn=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),Qn=Symbol.for("react.activity"),Gt=Symbol.iterator;function Jn(s){return s===null||typeof s!="object"?null:(s=Gt&&s[Gt]||s["@@iterator"],typeof s=="function"?s:null)}var ys={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hs=Object.assign,xs={};function _t(s,t,r){this.props=s,this.context=t,this.refs=xs,this.updater=r||ys}_t.prototype.isReactComponent={};_t.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};_t.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function ws(){}ws.prototype=_t.prototype;function qt(s,t,r){this.props=s,this.context=t,this.refs=xs,this.updater=r||ys}var Wt=qt.prototype=new ws;Wt.constructor=qt;hs(Wt,_t.prototype);Wt.isPureReactComponent=!0;var Qt=Array.isArray;function zt(){}var Pe={H:null,A:null,T:null,S:null},_s=Object.prototype.hasOwnProperty;function Yt(s,t,r){var d=r.ref;return{$$typeof:Ht,type:s,key:t,ref:d!==void 0?d:null,props:r}}function Zn(s,t){return Yt(s.type,t,s.props)}function Kt(s){return typeof s=="object"&&s!==null&&s.$$typeof===Ht}function er(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(r){return t[r]})}var Jt=/\/+/g;function Ft(s,t){return typeof s=="object"&&s!==null&&s.key!=null?er(""+s.key):t.toString(36)}function tr(s){switch(s.status){case"fulfilled":return s.value;case"rejected":throw s.reason;default:switch(typeof s.status=="string"?s.then(zt,zt):(s.status="pending",s.then(function(t){s.status==="pending"&&(s.status="fulfilled",s.value=t)},function(t){s.status==="pending"&&(s.status="rejected",s.reason=t)})),s.status){case"fulfilled":return s.value;case"rejected":throw s.reason}}throw s}function bt(s,t,r,d,p){var v=typeof s;(v==="undefined"||v==="boolean")&&(s=null);var m=!1;if(s===null)m=!0;else switch(v){case"bigint":case"string":case"number":m=!0;break;case"object":switch(s.$$typeof){case Ht:case On:m=!0;break;case bs:return m=s._init,bt(m(s._payload),t,r,d,p)}}if(m)return p=p(s),m=d===""?"."+Ft(s,0):d,Qt(p)?(r="",m!=null&&(r=m.replace(Jt,"$&/")+"/"),bt(p,t,r,"",function(o){return o})):p!=null&&(Kt(p)&&(p=Zn(p,r+(p.key==null||s&&s.key===p.key?"":(""+p.key).replace(Jt,"$&/")+"/")+m)),t.push(p)),1;m=0;var x=d===""?".":d+":";if(Qt(s))for(var u=0;u<s.length;u++)d=s[u],v=x+Ft(d,u),m+=bt(d,t,r,v,p);else if(u=Jn(s),typeof u=="function")for(s=u.call(s),u=0;!(d=s.next()).done;)d=d.value,v=x+Ft(d,u++),m+=bt(d,t,r,v,p);else if(v==="object"){if(typeof s.then=="function")return bt(tr(s),t,r,d,p);throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return m}function Et(s,t,r){if(s==null)return s;var d=[],p=0;return bt(s,d,"","",function(v){return t.call(r,v,p++)}),d}function sr(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(r){(s._status===0||s._status===-1)&&(s._status=1,s._result=r)},function(r){(s._status===0||s._status===-1)&&(s._status=2,s._result=r)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var Zt=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ar={map:Et,forEach:function(s,t,r){Et(s,function(){t.apply(this,arguments)},r)},count:function(s){var t=0;return Et(s,function(){t++}),t},toArray:function(s){return Et(s,function(t){return t})||[]},only:function(s){if(!Kt(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};ge.Activity=Qn;ge.Children=ar;ge.Component=_t;ge.Fragment=Bn;ge.Profiler=qn;ge.PureComponent=qt;ge.StrictMode=Hn;ge.Suspense=Xn;ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pe;ge.__COMPILER_RUNTIME={__proto__:null,c:function(s){return Pe.H.useMemoCache(s)}};ge.cache=function(s){return function(){return s.apply(null,arguments)}};ge.cacheSignal=function(){return null};ge.cloneElement=function(s,t,r){if(s==null)throw Error("The argument must be a React element, but you passed "+s+".");var d=hs({},s.props),p=s.key;if(t!=null)for(v in t.key!==void 0&&(p=""+t.key),t)!_s.call(t,v)||v==="key"||v==="__self"||v==="__source"||v==="ref"&&t.ref===void 0||(d[v]=t[v]);var v=arguments.length-2;if(v===1)d.children=r;else if(1<v){for(var m=Array(v),x=0;x<v;x++)m[x]=arguments[x+2];d.children=m}return Yt(s.type,p,d)};ge.createContext=function(s){return s={$$typeof:Yn,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null},s.Provider=s,s.Consumer={$$typeof:Wn,_context:s},s};ge.createElement=function(s,t,r){var d,p={},v=null;if(t!=null)for(d in t.key!==void 0&&(v=""+t.key),t)_s.call(t,d)&&d!=="key"&&d!=="__self"&&d!=="__source"&&(p[d]=t[d]);var m=arguments.length-2;if(m===1)p.children=r;else if(1<m){for(var x=Array(m),u=0;u<m;u++)x[u]=arguments[u+2];p.children=x}if(s&&s.defaultProps)for(d in m=s.defaultProps,m)p[d]===void 0&&(p[d]=m[d]);return Yt(s,v,p)};ge.createRef=function(){return{current:null}};ge.forwardRef=function(s){return{$$typeof:Kn,render:s}};ge.isValidElement=Kt;ge.lazy=function(s){return{$$typeof:bs,_payload:{_status:-1,_result:s},_init:sr}};ge.memo=function(s,t){return{$$typeof:Gn,type:s,compare:t===void 0?null:t}};ge.startTransition=function(s){var t=Pe.T,r={};Pe.T=r;try{var d=s(),p=Pe.S;p!==null&&p(r,d),typeof d=="object"&&d!==null&&typeof d.then=="function"&&d.then(zt,Zt)}catch(v){Zt(v)}finally{t!==null&&r.types!==null&&(t.types=r.types),Pe.T=t}};ge.unstable_useCacheRefresh=function(){return Pe.H.useCacheRefresh()};ge.use=function(s){return Pe.H.use(s)};ge.useActionState=function(s,t,r){return Pe.H.useActionState(s,t,r)};ge.useCallback=function(s,t){return Pe.H.useCallback(s,t)};ge.useContext=function(s){return Pe.H.useContext(s)};ge.useDebugValue=function(){};ge.useDeferredValue=function(s,t){return Pe.H.useDeferredValue(s,t)};ge.useEffect=function(s,t){return Pe.H.useEffect(s,t)};ge.useEffectEvent=function(s){return Pe.H.useEffectEvent(s)};ge.useId=function(){return Pe.H.useId()};ge.useImperativeHandle=function(s,t,r){return Pe.H.useImperativeHandle(s,t,r)};ge.useInsertionEffect=function(s,t){return Pe.H.useInsertionEffect(s,t)};ge.useLayoutEffect=function(s,t){return Pe.H.useLayoutEffect(s,t)};ge.useMemo=function(s,t){return Pe.H.useMemo(s,t)};ge.useOptimistic=function(s,t){return Pe.H.useOptimistic(s,t)};ge.useReducer=function(s,t,r){return Pe.H.useReducer(s,t,r)};ge.useRef=function(s){return Pe.H.useRef(s)};ge.useState=function(s){return Pe.H.useState(s)};ge.useSyncExternalStore=function(s,t,r){return Pe.H.useSyncExternalStore(s,t,r)};ge.useTransition=function(){return Pe.H.useTransition()};ge.version="19.2.0";fs.exports=ge;var ht=fs.exports;const B=vs(ht);var ks={exports:{}},Qe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var or=ht;function $s(s){var t="https://react.dev/errors/"+s;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ct(){}var Ge={d:{f:ct,r:function(){throw Error($s(522))},D:ct,C:ct,L:ct,m:ct,X:ct,S:ct,M:ct},p:0,findDOMNode:null},lr=Symbol.for("react.portal");function nr(s,t,r){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lr,key:d==null?null:""+d,children:s,containerInfo:t,implementation:r}}var $t=or.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Dt(s,t){if(s==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Qe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ge;Qe.createPortal=function(s,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error($s(299));return nr(s,t,null,r)};Qe.flushSync=function(s){var t=$t.T,r=Ge.p;try{if($t.T=null,Ge.p=2,s)return s()}finally{$t.T=t,Ge.p=r,Ge.d.f()}};Qe.preconnect=function(s,t){typeof s=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ge.d.C(s,t))};Qe.prefetchDNS=function(s){typeof s=="string"&&Ge.d.D(s)};Qe.preinit=function(s,t){if(typeof s=="string"&&t&&typeof t.as=="string"){var r=t.as,d=Dt(r,t.crossOrigin),p=typeof t.integrity=="string"?t.integrity:void 0,v=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;r==="style"?Ge.d.S(s,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:d,integrity:p,fetchPriority:v}):r==="script"&&Ge.d.X(s,{crossOrigin:d,integrity:p,fetchPriority:v,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Qe.preinitModule=function(s,t){if(typeof s=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var r=Dt(t.as,t.crossOrigin);Ge.d.M(s,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ge.d.M(s)};Qe.preload=function(s,t){if(typeof s=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var r=t.as,d=Dt(r,t.crossOrigin);Ge.d.L(s,r,{crossOrigin:d,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Qe.preloadModule=function(s,t){if(typeof s=="string")if(t){var r=Dt(t.as,t.crossOrigin);Ge.d.m(s,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ge.d.m(s)};Qe.requestFormReset=function(s){Ge.d.r(s)};Qe.unstable_batchedUpdates=function(s,t){return s(t)};Qe.useFormState=function(s,t,r){return $t.H.useFormState(s,t,r)};Qe.useFormStatus=function(){return $t.H.useHostTransitionStatus()};Qe.version="19.2.0";function Ss(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ss)}catch(s){console.error(s)}}Ss(),ks.exports=Qe;var rr=ks.exports;const ir=vs(rr);var dr=s=>{switch(s){case"success":return pr;case"info":return gr;case"warning":return mr;case"error":return vr;default:return null}},ur=Array(12).fill(0),cr=({visible:s,className:t})=>B.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":s},B.createElement("div",{className:"sonner-spinner"},ur.map((r,d)=>B.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${d}`})))),pr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),mr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),gr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),vr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fr=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},B.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),B.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),br=()=>{let[s,t]=B.useState(document.hidden);return B.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),s},Ot=1,yr=class{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{let t=this.subscribers.indexOf(s);this.subscribers.splice(t,1)}),this.publish=s=>{this.subscribers.forEach(t=>t(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var t;let{message:r,...d}=s,p=typeof(s==null?void 0:s.id)=="number"||((t=s.id)==null?void 0:t.length)>0?s.id:Ot++,v=this.toasts.find(x=>x.id===p),m=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(p)&&this.dismissedToasts.delete(p),v?this.toasts=this.toasts.map(x=>x.id===p?(this.publish({...x,...s,id:p,title:r}),{...x,...s,id:p,dismissible:m,title:r}):x):this.addToast({title:r,...d,dismissible:m,id:p}),p},this.dismiss=s=>(this.dismissedToasts.add(s),s||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:s,dismiss:!0})),s),this.message=(s,t)=>this.create({...t,message:s}),this.error=(s,t)=>this.create({...t,message:s,type:"error"}),this.success=(s,t)=>this.create({...t,type:"success",message:s}),this.info=(s,t)=>this.create({...t,type:"info",message:s}),this.warning=(s,t)=>this.create({...t,type:"warning",message:s}),this.loading=(s,t)=>this.create({...t,type:"loading",message:s}),this.promise=(s,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:s,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let d=s instanceof Promise?s:s(),p=r!==void 0,v,m=d.then(async u=>{if(v=["resolve",u],B.isValidElement(u))p=!1,this.create({id:r,type:"default",message:u});else if(xr(u)&&!u.ok){p=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${u.status}`):t.error,k=typeof t.description=="function"?await t.description(`HTTP error! status: ${u.status}`):t.description;this.create({id:r,type:"error",message:o,description:k})}else if(t.success!==void 0){p=!1;let o=typeof t.success=="function"?await t.success(u):t.success,k=typeof t.description=="function"?await t.description(u):t.description;this.create({id:r,type:"success",message:o,description:k})}}).catch(async u=>{if(v=["reject",u],t.error!==void 0){p=!1;let o=typeof t.error=="function"?await t.error(u):t.error,k=typeof t.description=="function"?await t.description(u):t.description;this.create({id:r,type:"error",message:o,description:k})}}).finally(()=>{var u;p&&(this.dismiss(r),r=void 0),(u=t.finally)==null||u.call(t)}),x=()=>new Promise((u,o)=>m.then(()=>v[0]==="reject"?o(v[1]):u(v[1])).catch(o));return typeof r!="string"&&typeof r!="number"?{unwrap:x}:Object.assign(r,{unwrap:x})},this.custom=(s,t)=>{let r=(t==null?void 0:t.id)||Ot++;return this.create({jsx:s(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Je=new yr,hr=(s,t)=>{let r=(t==null?void 0:t.id)||Ot++;return Je.addToast({title:s,...t,id:r}),r},xr=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",wr=hr,_r=()=>Je.toasts,kr=()=>Je.getActiveToasts(),yt=Object.assign(wr,{success:Je.success,info:Je.info,warning:Je.warning,error:Je.error,custom:Je.custom,message:Je.message,promise:Je.promise,dismiss:Je.dismiss,loading:Je.loading},{getHistory:_r,getToasts:kr});function $r(s,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css",t==="top"&&r.firstChild?r.insertBefore(d,r.firstChild):r.appendChild(d),d.styleSheet?d.styleSheet.cssText=s:d.appendChild(document.createTextNode(s))}$r(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Rt(s){return s.label!==void 0}var Sr=3,Cr="32px",Tr="16px",es=4e3,Er=356,Rr=14,Ar=20,Pr=200;function ot(...s){return s.filter(Boolean).join(" ")}function Lr(s){let[t,r]=s.split("-"),d=[];return t&&d.push(t),r&&d.push(r),d}var Ir=s=>{var t,r,d,p,v,m,x,u,o,k,D;let{invert:te,toast:i,unstyled:se,interacting:z,setHeights:ue,visibleToasts:$,heights:y,index:f,toasts:P,expanded:T,removeToast:S,defaultRichColors:C,closeButton:pe,style:J,cancelButtonStyle:W,actionButtonStyle:xe,className:Se="",descriptionClassName:fe="",duration:Ce,position:De,gap:Ve,loadingIcon:Me,expandByDefault:Ye,classNames:ie,icons:ne,closeButtonAriaLabel:w="Close toast",pauseWhenPageIsHidden:X}=s,[E,O]=B.useState(null),[re,Re]=B.useState(null),[ve,A]=B.useState(!1),[b,K]=B.useState(!1),[G,oe]=B.useState(!1),[ae,je]=B.useState(!1),[L,Te]=B.useState(!1),[Ne,M]=B.useState(0),[a,j]=B.useState(0),H=B.useRef(i.duration||Ce||es),h=B.useRef(null),Y=B.useRef(null),le=f===0,ze=f+1<=$,ee=i.type,Ae=i.dismissible!==!1,Fe=i.className||"",et=i.descriptionClassName||"",Ue=B.useMemo(()=>y.findIndex(q=>q.toastId===i.id)||0,[y,i.id]),qe=B.useMemo(()=>{var q;return(q=i.closeButton)!=null?q:pe},[i.closeButton,pe]),lt=B.useMemo(()=>i.duration||Ce||es,[i.duration,Ce]),Be=B.useRef(0),Ke=B.useRef(0),ft=B.useRef(0),it=B.useRef(null),[Mt,F]=De.split("-"),l=B.useMemo(()=>y.reduce((q,ce,me)=>me>=Ue?q:q+ce.height,0),[y,Ue]),be=br(),ye=i.invert||te,Ee=ee==="loading";Ke.current=B.useMemo(()=>Ue*Ve+l,[Ue,l]),B.useEffect(()=>{H.current=lt},[lt]),B.useEffect(()=>{A(!0)},[]),B.useEffect(()=>{let q=Y.current;if(q){let ce=q.getBoundingClientRect().height;return j(ce),ue(me=>[{toastId:i.id,height:ce,position:i.position},...me]),()=>ue(me=>me.filter(Xe=>Xe.toastId!==i.id))}},[ue,i.id]),B.useLayoutEffect(()=>{if(!ve)return;let q=Y.current,ce=q.style.height;q.style.height="auto";let me=q.getBoundingClientRect().height;q.style.height=ce,j(me),ue(Xe=>Xe.find(st=>st.toastId===i.id)?Xe.map(st=>st.toastId===i.id?{...st,height:me}:st):[{toastId:i.id,height:me,position:i.position},...Xe])},[ve,i.title,i.description,ue,i.id]);let R=B.useCallback(()=>{K(!0),M(Ke.current),ue(q=>q.filter(ce=>ce.toastId!==i.id)),setTimeout(()=>{S(i)},Pr)},[i,S,ue,Ke]);B.useEffect(()=>{if(i.promise&&ee==="loading"||i.duration===1/0||i.type==="loading")return;let q;return T||z||X&&be?(()=>{if(ft.current<Be.current){let ce=new Date().getTime()-Be.current;H.current=H.current-ce}ft.current=new Date().getTime()})():H.current!==1/0&&(Be.current=new Date().getTime(),q=setTimeout(()=>{var ce;(ce=i.onAutoClose)==null||ce.call(i,i),R()},H.current)),()=>clearTimeout(q)},[T,z,i,ee,X,be,R]),B.useEffect(()=>{i.delete&&R()},[R,i.delete]);function Le(){var q,ce,me;return ne!=null&&ne.loading?B.createElement("div",{className:ot(ie==null?void 0:ie.loader,(q=i==null?void 0:i.classNames)==null?void 0:q.loader,"sonner-loader"),"data-visible":ee==="loading"},ne.loading):Me?B.createElement("div",{className:ot(ie==null?void 0:ie.loader,(ce=i==null?void 0:i.classNames)==null?void 0:ce.loader,"sonner-loader"),"data-visible":ee==="loading"},Me):B.createElement(cr,{className:ot(ie==null?void 0:ie.loader,(me=i==null?void 0:i.classNames)==null?void 0:me.loader),visible:ee==="loading"})}return B.createElement("li",{tabIndex:0,ref:Y,className:ot(Se,Fe,ie==null?void 0:ie.toast,(t=i==null?void 0:i.classNames)==null?void 0:t.toast,ie==null?void 0:ie.default,ie==null?void 0:ie[ee],(r=i==null?void 0:i.classNames)==null?void 0:r[ee]),"data-sonner-toast":"","data-rich-colors":(d=i.richColors)!=null?d:C,"data-styled":!(i.jsx||i.unstyled||se),"data-mounted":ve,"data-promise":!!i.promise,"data-swiped":L,"data-removed":b,"data-visible":ze,"data-y-position":Mt,"data-x-position":F,"data-index":f,"data-front":le,"data-swiping":G,"data-dismissible":Ae,"data-type":ee,"data-invert":ye,"data-swipe-out":ae,"data-swipe-direction":re,"data-expanded":!!(T||Ye&&ve),style:{"--index":f,"--toasts-before":f,"--z-index":P.length-f,"--offset":`${b?Ne:Ke.current}px`,"--initial-height":Ye?"auto":`${a}px`,...J,...i.style},onDragEnd:()=>{oe(!1),O(null),it.current=null},onPointerDown:q=>{Ee||!Ae||(h.current=new Date,M(Ke.current),q.target.setPointerCapture(q.pointerId),q.target.tagName!=="BUTTON"&&(oe(!0),it.current={x:q.clientX,y:q.clientY}))},onPointerUp:()=>{var q,ce,me,Xe;if(ae||!Ae)return;it.current=null;let st=Number(((q=Y.current)==null?void 0:q.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),dt=Number(((ce=Y.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),mt=new Date().getTime()-((me=h.current)==null?void 0:me.getTime()),at=E==="x"?st:dt,ut=Math.abs(at)/mt;if(Math.abs(at)>=Ar||ut>.11){M(Ke.current),(Xe=i.onDismiss)==null||Xe.call(i,i),Re(E==="x"?st>0?"right":"left":dt>0?"down":"up"),R(),je(!0),Te(!1);return}oe(!1),O(null)},onPointerMove:q=>{var ce,me,Xe,st;if(!it.current||!Ae||((ce=window.getSelection())==null?void 0:ce.toString().length)>0)return;let dt=q.clientY-it.current.y,mt=q.clientX-it.current.x,at=(me=s.swipeDirections)!=null?me:Lr(De);!E&&(Math.abs(mt)>1||Math.abs(dt)>1)&&O(Math.abs(mt)>Math.abs(dt)?"x":"y");let ut={x:0,y:0};E==="y"?(at.includes("top")||at.includes("bottom"))&&(at.includes("top")&&dt<0||at.includes("bottom")&&dt>0)&&(ut.y=dt):E==="x"&&(at.includes("left")||at.includes("right"))&&(at.includes("left")&&mt<0||at.includes("right")&&mt>0)&&(ut.x=mt),(Math.abs(ut.x)>0||Math.abs(ut.y)>0)&&Te(!0),(Xe=Y.current)==null||Xe.style.setProperty("--swipe-amount-x",`${ut.x}px`),(st=Y.current)==null||st.style.setProperty("--swipe-amount-y",`${ut.y}px`)}},qe&&!i.jsx?B.createElement("button",{"aria-label":w,"data-disabled":Ee,"data-close-button":!0,onClick:Ee||!Ae?()=>{}:()=>{var q;R(),(q=i.onDismiss)==null||q.call(i,i)},className:ot(ie==null?void 0:ie.closeButton,(p=i==null?void 0:i.classNames)==null?void 0:p.closeButton)},(v=ne==null?void 0:ne.close)!=null?v:fr):null,i.jsx||ht.isValidElement(i.title)?i.jsx?i.jsx:typeof i.title=="function"?i.title():i.title:B.createElement(B.Fragment,null,ee||i.icon||i.promise?B.createElement("div",{"data-icon":"",className:ot(ie==null?void 0:ie.icon,(m=i==null?void 0:i.classNames)==null?void 0:m.icon)},i.promise||i.type==="loading"&&!i.icon?i.icon||Le():null,i.type!=="loading"?i.icon||(ne==null?void 0:ne[ee])||dr(ee):null):null,B.createElement("div",{"data-content":"",className:ot(ie==null?void 0:ie.content,(x=i==null?void 0:i.classNames)==null?void 0:x.content)},B.createElement("div",{"data-title":"",className:ot(ie==null?void 0:ie.title,(u=i==null?void 0:i.classNames)==null?void 0:u.title)},typeof i.title=="function"?i.title():i.title),i.description?B.createElement("div",{"data-description":"",className:ot(fe,et,ie==null?void 0:ie.description,(o=i==null?void 0:i.classNames)==null?void 0:o.description)},typeof i.description=="function"?i.description():i.description):null),ht.isValidElement(i.cancel)?i.cancel:i.cancel&&Rt(i.cancel)?B.createElement("button",{"data-button":!0,"data-cancel":!0,style:i.cancelButtonStyle||W,onClick:q=>{var ce,me;Rt(i.cancel)&&Ae&&((me=(ce=i.cancel).onClick)==null||me.call(ce,q),R())},className:ot(ie==null?void 0:ie.cancelButton,(k=i==null?void 0:i.classNames)==null?void 0:k.cancelButton)},i.cancel.label):null,ht.isValidElement(i.action)?i.action:i.action&&Rt(i.action)?B.createElement("button",{"data-button":!0,"data-action":!0,style:i.actionButtonStyle||xe,onClick:q=>{var ce,me;Rt(i.action)&&((me=(ce=i.action).onClick)==null||me.call(ce,q),!q.defaultPrevented&&R())},className:ot(ie==null?void 0:ie.actionButton,(D=i==null?void 0:i.classNames)==null?void 0:D.actionButton)},i.action.label):null))};function ts(){if(typeof window>"u"||typeof document>"u")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function Dr(s,t){let r={};return[s,t].forEach((d,p)=>{let v=p===1,m=v?"--mobile-offset":"--offset",x=v?Tr:Cr;function u(o){["top","right","bottom","left"].forEach(k=>{r[`${m}-${k}`]=typeof o=="number"?`${o}px`:o})}typeof d=="number"||typeof d=="string"?u(d):typeof d=="object"?["top","right","bottom","left"].forEach(o=>{d[o]===void 0?r[`${m}-${o}`]=x:r[`${m}-${o}`]=typeof d[o]=="number"?`${d[o]}px`:d[o]}):u(x)}),r}ht.forwardRef(function(s,t){let{invert:r,position:d="bottom-right",hotkey:p=["altKey","KeyT"],expand:v,closeButton:m,className:x,offset:u,mobileOffset:o,theme:k="light",richColors:D,duration:te,style:i,visibleToasts:se=Sr,toastOptions:z,dir:ue=ts(),gap:$=Rr,loadingIcon:y,icons:f,containerAriaLabel:P="Notifications",pauseWhenPageIsHidden:T}=s,[S,C]=B.useState([]),pe=B.useMemo(()=>Array.from(new Set([d].concat(S.filter(X=>X.position).map(X=>X.position)))),[S,d]),[J,W]=B.useState([]),[xe,Se]=B.useState(!1),[fe,Ce]=B.useState(!1),[De,Ve]=B.useState(k!=="system"?k:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Me=B.useRef(null),Ye=p.join("+").replace(/Key/g,"").replace(/Digit/g,""),ie=B.useRef(null),ne=B.useRef(!1),w=B.useCallback(X=>{C(E=>{var O;return(O=E.find(re=>re.id===X.id))!=null&&O.delete||Je.dismiss(X.id),E.filter(({id:re})=>re!==X.id)})},[]);return B.useEffect(()=>Je.subscribe(X=>{if(X.dismiss){C(E=>E.map(O=>O.id===X.id?{...O,delete:!0}:O));return}setTimeout(()=>{ir.flushSync(()=>{C(E=>{let O=E.findIndex(re=>re.id===X.id);return O!==-1?[...E.slice(0,O),{...E[O],...X},...E.slice(O+1)]:[X,...E]})})})}),[]),B.useEffect(()=>{if(k!=="system"){Ve(k);return}if(k==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Ve("dark"):Ve("light")),typeof window>"u")return;let X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:E})=>{Ve(E?"dark":"light")})}catch{X.addListener(({matches:O})=>{try{Ve(O?"dark":"light")}catch(re){console.error(re)}})}},[k]),B.useEffect(()=>{S.length<=1&&Se(!1)},[S]),B.useEffect(()=>{let X=E=>{var O,re;p.every(Re=>E[Re]||E.code===Re)&&(Se(!0),(O=Me.current)==null||O.focus()),E.code==="Escape"&&(document.activeElement===Me.current||(re=Me.current)!=null&&re.contains(document.activeElement))&&Se(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[p]),B.useEffect(()=>{if(Me.current)return()=>{ie.current&&(ie.current.focus({preventScroll:!0}),ie.current=null,ne.current=!1)}},[Me.current]),B.createElement("section",{ref:t,"aria-label":`${P} ${Ye}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},pe.map((X,E)=>{var O;let[re,Re]=X.split("-");return S.length?B.createElement("ol",{key:X,dir:ue==="auto"?ts():ue,tabIndex:-1,ref:Me,className:x,"data-sonner-toaster":!0,"data-theme":De,"data-y-position":re,"data-lifted":xe&&S.length>1&&!v,"data-x-position":Re,style:{"--front-toast-height":`${((O=J[0])==null?void 0:O.height)||0}px`,"--width":`${Er}px`,"--gap":`${$}px`,...i,...Dr(u,o)},onBlur:ve=>{ne.current&&!ve.currentTarget.contains(ve.relatedTarget)&&(ne.current=!1,ie.current&&(ie.current.focus({preventScroll:!0}),ie.current=null))},onFocus:ve=>{ve.target instanceof HTMLElement&&ve.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,ie.current=ve.relatedTarget)},onMouseEnter:()=>Se(!0),onMouseMove:()=>Se(!0),onMouseLeave:()=>{fe||Se(!1)},onDragEnd:()=>Se(!1),onPointerDown:ve=>{ve.target instanceof HTMLElement&&ve.target.dataset.dismissible==="false"||Ce(!0)},onPointerUp:()=>Ce(!1)},S.filter(ve=>!ve.position&&E===0||ve.position===X).map((ve,A)=>{var b,K;return B.createElement(Ir,{key:ve.id,icons:f,index:A,toast:ve,defaultRichColors:D,duration:(b=z==null?void 0:z.duration)!=null?b:te,className:z==null?void 0:z.className,descriptionClassName:z==null?void 0:z.descriptionClassName,invert:r,visibleToasts:se,closeButton:(K=z==null?void 0:z.closeButton)!=null?K:m,interacting:fe,position:X,style:z==null?void 0:z.style,unstyled:z==null?void 0:z.unstyled,classNames:z==null?void 0:z.classNames,cancelButtonStyle:z==null?void 0:z.cancelButtonStyle,actionButtonStyle:z==null?void 0:z.actionButtonStyle,removeToast:w,toasts:S.filter(G=>G.position==ve.position),heights:J.filter(G=>G.position==ve.position),setHeights:W,expandByDefault:v,gap:$,loadingIcon:y,expanded:xe,pauseWhenPageIsHidden:T,swipeDirections:s.swipeDirections})})):null}))});const Mr={class:"min-h-screen bg-gray-100"},jr={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Ur={class:"px-4 py-6 sm:px-0"},Fr={class:"bg-white shadow rounded-lg p-6 mb-6"},Vr={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Nr={class:"flex flex-col items-center gap-2"},zr={class:"inline-flex items-center gap-2 text-blue-600"},Or={class:"text-2xl font-bold"},Br={class:"flex flex-col items-center gap-2"},Hr={class:"inline-flex items-center gap-2 text-green-600"},qr={class:"text-2xl font-bold"},Wr={class:"flex flex-col items-center gap-2"},Yr={class:"inline-flex items-center gap-2 text-red-600"},Kr={class:"text-2xl font-bold"},Xr={class:"flex flex-col items-center gap-2"},Gr={class:"inline-flex items-center gap-2 text-purple-600"},Qr={class:"text-2xl font-bold"},Jr={class:"bg-white shadow rounded-lg p-6"},Zr={class:"flex justify-between items-center mb-4"},ei={class:"space-y-4"},ti={class:"flex justify-between items-start mb-2"},si={class:"font-medium text-gray-900"},ai={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},oi={class:"font-medium"},li={class:"font-medium"},ni={class:"font-medium"},ri={class:"font-medium"},ii={key:0,class:"mt-4"},di={class:"grid grid-cols-7 gap-1 text-xs"},ui={class:"text-gray-500"},ci={class:"font-medium"},pi={__name:"Monitoring",setup(s){const t=g({total_websites:0,online_websites:0,offline_websites:0}),r=g([]),d=g("7days"),p=We(()=>r.value.filter(u=>u.ssl_enabled).length),v=async()=>{try{const u=await N.get("/api/monitoring/uptime");t.value=u.data}catch{yt.error("Failed to fetch uptime statistics")}},m=async()=>{try{const k=(await N.get("/api/websites")).data.map(async D=>{try{const te=await N.get(`/api/monitoring/stats/${D.id}?period=${d.value}`);return{...D,...te.data.summary}}catch{return{...D,total_visits:0,total_unique_visitors:0,total_bandwidth:"0 B",average_response_time:0,uptime_percentage:0,daily_stats:[]}}});r.value=await Promise.all(k)}catch{yt.error("Failed to fetch website statistics")}},x=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"});return tt(()=>{v(),m()}),(u,o)=>(n(),c("div",Mr,[e("div",jr,[e("div",Ur,[o[13]||(o[13]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-6"},"Monitoring",-1)),e("div",Fr,[o[5]||(o[5]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"System Overview",-1)),e("div",Vr,[e("div",Nr,[e("div",zr,[V(_(gt),{class:"size-5"}),e("span",Or,I(t.value.total_websites),1)]),o[1]||(o[1]=e("p",{class:"text-sm text-gray-500"},"Total Websites",-1))]),e("div",Br,[e("div",Hr,[V(_(St),{class:"size-5"}),e("span",qr,I(t.value.online_websites),1)]),o[2]||(o[2]=e("p",{class:"text-sm text-gray-500"},"Online",-1))]),e("div",Wr,[e("div",Yr,[V(_(Ct),{class:"size-5"}),e("span",Kr,I(t.value.offline_websites),1)]),o[3]||(o[3]=e("p",{class:"text-sm text-gray-500"},"Offline",-1))]),e("div",Xr,[e("div",Gr,[V(_(xt),{class:"size-5"}),e("span",Qr,I(p.value),1)]),o[4]||(o[4]=e("p",{class:"text-sm text-gray-500"},"SSL Enabled",-1))])])]),e("div",Jr,[e("div",Zr,[o[7]||(o[7]=e("h2",{class:"text-lg font-medium text-gray-900"},"Website Statistics",-1)),U(e("select",{"onUpdate:modelValue":o[0]||(o[0]=k=>d.value=k),onChange:m,class:"border-gray-300 rounded-md shadow-sm"},[...o[6]||(o[6]=[e("option",{value:"24hours"},"Last 24 Hours",-1),e("option",{value:"7days"},"Last 7 Days",-1),e("option",{value:"30days"},"Last 30 Days",-1),e("option",{value:"90days"},"Last 90 Days",-1)])],544),[[Ze,d.value]])]),e("div",ei,[(n(!0),c(he,null,we(r.value,k=>(n(),c("div",{key:k.id,class:"border rounded-lg p-4"},[e("div",ti,[e("h3",si,I(k.domain),1),e("span",{class:Ie(["inline-flex items-center gap-1",k.current_is_online?"text-green-600":"text-red-600"])},[k.current_is_online?(n(),de(_(St),{key:0,class:"size-4"})):(n(),de(_(Ct),{key:1,class:"size-4"})),$e(" "+I(k.current_is_online?"Online":"Offline"),1)],2)]),e("div",ai,[e("div",null,[o[8]||(o[8]=e("p",{class:"text-gray-500"},"Visits",-1)),e("p",oi,I(k.total_visits),1)]),e("div",null,[o[9]||(o[9]=e("p",{class:"text-gray-500"},"Unique Visitors",-1)),e("p",li,I(k.total_unique_visitors),1)]),e("div",null,[o[10]||(o[10]=e("p",{class:"text-gray-500"},"Bandwidth",-1)),e("p",ni,I(k.total_bandwidth),1)]),e("div",null,[o[11]||(o[11]=e("p",{class:"text-gray-500"},"Avg Response Time",-1)),e("p",ri,I(k.average_response_time)+"ms",1)])]),k.daily_stats&&k.daily_stats.length>0?(n(),c("div",ii,[o[12]||(o[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Daily Stats",-1)),e("div",di,[(n(!0),c(he,null,we(k.daily_stats,D=>(n(),c("div",{key:D.date,class:"text-center"},[e("div",ui,I(x(D.date)),1),e("div",ci,I(D.visits),1)]))),128))])])):Z("",!0)]))),128))])])])])]))}},mi={class:"p-8 max-w-7xl mx-auto"},gi={class:"flex flex-wrap gap-2 mb-4"},vi={class:"flex flex-wrap justify-between items-start gap-4 mb-6"},fi={class:"flex justify-between items-center gap-4 p-4 bg-white rounded-lg border border-slate-200 mb-6"},bi={class:"flex gap-2 items-center"},yi={class:"relative w-72"},hi={class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"},xi={class:"bg-white rounded-lg border border-slate-200"},wi={key:0,class:"px-6 py-4 text-sm text-gray-500"},_i={key:1,class:"flex flex-col"},ki={class:"list-none"},$i={class:"grid grid-cols-12 gap-4 items-center px-6 py-4 cursor-pointer hover:bg-slate-50"},Si={class:"col-span-6 flex items-center gap-3"},Ci={class:"flex flex-col"},Ti={class:"text-slate-800 text-sm font-medium"},Ei={class:"text-slate-500 text-xs"},Ri={class:"col-span-3 text-sm text-slate-600"},Ai={class:"col-span-1 text-sm text-slate-600"},Pi={class:"col-span-2 flex justify-end gap-2 text-slate-500"},Li=["onClick"],Ii=["onClick"],Di=["onClick"],Mi={class:"pl-10 bg-slate-50/50"},ji={class:"col-span-6 flex items-center gap-2 text-sm text-slate-700"},Ui={class:"col-span-3 text-sm text-slate-600"},Fi={class:"col-span-1 text-sm text-slate-600"},Vi={class:"col-span-2 flex justify-end gap-2 text-slate-500"},Ni=["onClick"],zi=["onClick"],Oi=["onClick"],Bi={__name:"FoldersManagement",setup(s){const r=pt().params.websiteId,d=g([]),p=g(null),v=g(!1),m=g(""),x=g(""),u=g(""),o=async()=>{v.value=!0,m.value="";try{const[$,y]=await Promise.all([N.get(`/api/websites/${r}`),N.get(`/api/websites/${r}/folders`)]);p.value=$.data;const P=(y.data||[]).map(T=>({...T,id:Number(T.id),parent_id:T.parent_id==null?null:Number(T.parent_id)}));d.value=P}finally{v.value=!1}},k=$=>{const y=$.id,f=te($.id),P=f?`/preview/folder/${y}/${f}`:`/preview/folder/${y}`,T=localStorage.getItem("adminToken")||"";if(!T){window.open(P,"_blank");return}const S=`${P}?token=${encodeURIComponent(T)}`;window.open(S,"_blank")},D=$=>{if(!p.value)return;const y=te($.id);if(!y)return;const f=p.value.domain.split("."),P=f.length>2?f.slice(-2).join("."):p.value.domain,S=`${p.value.ssl_enabled?"https://":"http://"}${P}/${y}`;window.open(S,"_blank")},te=$=>{const y=new Map((d.value||[]).map(T=>[String(T.id),T]));let f=y.get(String($));const P=[];for(;f&&(f.slug&&P.unshift(f.slug),!(!f.parent_id||(f=y.get(String(f.parent_id)),f&&String(f.id)===String($)))););return P.join("/")},i=We(()=>{const $=[...d.value||[]],y=new Map($.map(J=>[String(J.id),J])),f=J=>J.sort((W,xe)=>(W.name||"").localeCompare(xe.name||"")),P=J=>$.filter(W=>String(W.parent_id)===String(J)),T=J=>!J.parent_id||!y.has(String(J.parent_id))||String(J.parent_id)===String(J.id),S=f($.filter(T)),C=[],pe=(J,W)=>{C.push({...J,depth:W}),f(P(J.id)).forEach(xe=>pe(xe,W+1))};return S.forEach(J=>pe(J,0)),C}),se=We(()=>{const $=(u.value||"").trim().toLowerCase(),y=i.value,f=new Set(y.filter(S=>S.depth===0).map(S=>S.id));if(!$)return y.filter(S=>f.has(S.id));const P=y.filter(S=>(S.name||"").toLowerCase().includes($)||(S.slug||"").toLowerCase().includes($)),T=new Set(P.map(S=>{let C=S;for(;C&&C.depth>0;){const pe=y.find(J=>String(J.id)===String(C.parent_id));if(!pe)break;C=pe}return C?C.id:S.id}));return y.filter(S=>S.depth===0&&T.has(S.id))}),z=$=>{const y=(u.value||"").trim().toLowerCase(),P=i.value.filter(T=>String(T.parent_id)===String($));return y?P.filter(T=>(T.name||"").toLowerCase().includes(y)||(T.slug||"").toLowerCase().includes(y)):P},ue=async $=>{var y,f;m.value="",x.value="";try{await N.delete(`/api/websites/${r}/folders/${$.id}`),d.value=(d.value||[]).filter(P=>P.id!==$.id),m.value="Đã xóa thư mục",x.value="success"}catch(P){m.value=((f=(y=P==null?void 0:P.response)==null?void 0:y.data)==null?void 0:f.error)||"Không thể xóa thư mục",x.value="error"}};return tt(o),($,y)=>{const f=rt("router-link");return n(),c("div",mi,[e("div",gi,[V(f,{to:"/",class:"text-slate-500 text-sm font-medium hover:text-primary"},{default:ke(()=>[...y[1]||(y[1]=[$e("Bảng điều khiển",-1)])]),_:1}),y[2]||(y[2]=e("span",{class:"text-slate-500 text-sm font-medium"},"/",-1)),y[3]||(y[3]=e("span",{class:"text-slate-800 text-sm font-medium"},"Danh mục",-1))]),e("div",vi,[y[5]||(y[5]=e("div",{class:"flex flex-col gap-2"},[e("h1",{class:"text-slate-900 text-3xl font-bold leading-tight tracking-tight"},"Quản lý Danh mục"),e("p",{class:"text-slate-500 text-base"},"Thêm, sửa đổi và tổ chức các danh mục.")],-1)),V(f,{to:`/websites/${_(r)}/folders/new`,class:"flex items-center justify-center rounded-lg h-10 bg-primary text-white gap-2 text-sm font-bold px-4 hover:bg-primary/90"},{default:ke(()=>[...y[4]||(y[4]=[e("span",null,"Tạo thư mục",-1)])]),_:1},8,["to"])]),e("div",fi,[e("div",bi,[e("div",yi,[e("span",hi,[V(_(Ds),{class:"size-4"})]),U(e("input",{"onUpdate:modelValue":y[0]||(y[0]=P=>u.value=P),class:"w-full pl-10 pr-4 py-2 text-sm border border-slate-300 rounded-lg bg-background-light focus:ring-primary focus:border-primary",placeholder:"Tìm danh mục...",type:"text"},null,512),[[Q,u.value]])]),e("button",{type:"button",onClick:o,class:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg"},[V(_(Ms),{class:"size-5"})])]),V(f,{to:`/websites/${_(r)}/pages`,class:"text-sm text-primary"},{default:ke(()=>[...y[6]||(y[6]=[$e("Quay lại Pages",-1)])]),_:1},8,["to"])]),e("div",xi,[y[7]||(y[7]=Tt('<div class="grid grid-cols-12 gap-4 px-6 py-3 border-b border-slate-200"><div class="col-span-6 text-xs font-semibold text-slate-500 uppercase">Tên danh mục</div><div class="col-span-3 text-xs font-semibold text-slate-500 uppercase">Slug</div><div class="col-span-1 text-xs font-semibold text-slate-500 uppercase">Số page</div><div class="col-span-2 text-xs font-semibold text-slate-500 uppercase text-right">Hành động</div></div>',1)),v.value?(n(),c("div",wi,"Đang tải...")):(n(),c("div",_i,[(n(!0),c(he,null,we(se.value,P=>(n(),c("details",{key:P.id,class:"group border-b border-slate-200",open:""},[e("summary",ki,[e("div",$i,[e("div",Si,[V(_(js),{class:"size-4 text-slate-500 group-open:rotate-90 transition-transform"}),e("div",Ci,[e("p",Ti,I(P.name),1),e("p",Ei,I(z(P.id).length)+" danh mục con",1)])]),e("div",Ri,"/"+I(te(P.id)),1),e("div",Ai,I(P.pages_count??0),1),e("div",Pi,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:Oe(T=>k(P),["stop"])},[V(_(Nt),{class:"size-4"})],8,Li),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:Oe(T=>D(P),["stop"])},[V(_(gt),{class:"size-4"})],8,Ii),V(f,{to:`/websites/${_(r)}/folders/${P.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:ke(()=>[V(_(Xt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:Oe(T=>ue(P),["stop"])},[V(_(vt),{class:"size-4"})],8,Di)])])]),e("div",Mi,[(n(!0),c(he,null,we(z(P.id),T=>(n(),c("div",{key:T.id,class:"grid grid-cols-12 gap-4 items-center px-6 py-3 border-t border-slate-200"},[e("div",ji,[V(_(Us),{class:"size-5 text-slate-400 -ml-1"}),e("span",null,I(T.name),1)]),e("div",Ui,"/"+I(te(T.id)),1),e("div",Fi,I(T.pages_count??0),1),e("div",Vi,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:S=>k(T)},[V(_(Nt),{class:"size-4"})],8,Ni),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:S=>D(T)},[V(_(gt),{class:"size-4"})],8,zi),V(f,{to:`/websites/${_(r)}/folders/${T.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:ke(()=>[V(_(Xt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:S=>ue(T)},[V(_(vt),{class:"size-4"})],8,Oi)])]))),128))])]))),128))])),m.value?(n(),c("div",{key:2,class:Ie(["px-6 py-3 text-sm",x.value==="error"?"text-red-600":"text-green-600"])},I(m.value),3)):Z("",!0)])])}}},Hi={class:"p-6"},qi={class:"max-w-xl mx-auto"},Wi={class:"flex items-center justify-between mb-4"},Yi={class:"text-xl font-semibold"},Ki=["value"],Xi={class:"flex justify-end gap-2"},Gi=["disabled"],ss={__name:"FolderEdit",setup(s){const t=pt(),r=wt(),d=t.params.websiteId,p=t.params.folderId,v=g(t.name==="FolderCreate"),m=g([]),x=g(""),u=g(""),o=g(null),k=g(!1),D=g(!1),te=g(""),i=g(""),se=async()=>{const S=((await N.get(`/api/websites/${d}/folders`)).data||[]).map(C=>({...C,id:Number(C.id),parent_id:C.parent_id==null?null:Number(C.parent_id)}));m.value=S},z=P=>(P||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),ue=()=>{k.value||(u.value=z(x.value))},$=We(()=>{const P=[...m.value||[]],T=new Map(P.map(fe=>[String(fe.id),fe])),S=fe=>fe.sort((Ce,De)=>(Ce.name||"").localeCompare(De.name||"")),C=fe=>P.filter(Ce=>String(Ce.parent_id)===String(fe)),pe=fe=>!fe.parent_id||!T.has(String(fe.parent_id))||String(fe.parent_id)===String(fe.id),J=S(P.filter(pe)),W=[],xe=(fe,Ce)=>{W.push({...fe,depth:Ce}),S(C(fe.id)).forEach(De=>xe(De,Ce+1))};return J.forEach(fe=>xe(fe,0)),W.filter(fe=>String(fe.id)!==String(p))}),y=()=>{if(!p||v.value)return;const P=(m.value||[]).find(T=>T.id===Number(p));P&&(x.value=P.name||"",u.value=P.slug||"",o.value=P.parent_id==null?null:Number(P.parent_id))},f=async()=>{var P,T,S,C,pe;D.value=!0,te.value="";try{const J={name:x.value,slug:u.value,parent_id:o.value==null?null:Number(o.value)};let W;v.value?W=await N.post(`/api/websites/${d}/folders`,J):W=await N.put(`/api/websites/${d}/folders/${p}`,J),te.value="Đã lưu thư mục",i.value="success",v.value?r.push(`/websites/${d}/folders`):(o.value=((P=W==null?void 0:W.data)==null?void 0:P.parent_id)==null?null:Number(W.data.parent_id),await se(),y())}catch(J){te.value=((S=(T=J==null?void 0:J.response)==null?void 0:T.data)==null?void 0:S.message)||((pe=(C=J==null?void 0:J.response)==null?void 0:C.data)==null?void 0:pe.error)||"Lưu thư mục thất bại",i.value="error"}finally{D.value=!1}};return tt(async()=>{await se(),y()}),(P,T)=>{const S=rt("router-link");return n(),c("div",Hi,[e("div",qi,[e("div",Wi,[e("h1",Yi,I(v.value?"Tạo thư mục":"Sửa thư mục"),1),V(S,{to:`/websites/${_(d)}/folders`,class:"text-sm text-primary"},{default:ke(()=>[...T[4]||(T[4]=[$e("Quay lại danh sách",-1)])]),_:1},8,["to"])]),e("form",{onSubmit:Oe(f,["prevent"]),class:"bg-white border border-gray-200 rounded-md p-4 space-y-4"},[e("div",null,[T[5]||(T[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),U(e("input",{"onUpdate:modelValue":T[0]||(T[0]=C=>x.value=C),onInput:ue,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[Q,x.value]])]),e("div",null,[T[6]||(T[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),U(e("input",{"onUpdate:modelValue":T[1]||(T[1]=C=>u.value=C),onInput:T[2]||(T[2]=C=>k.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[Q,u.value]]),T[7]||(T[7]=e("div",{class:"text-xs text-gray-500 mt-1"},"Sẽ tự thêm số nếu trùng trong domain",-1))]),e("div",null,[T[9]||(T[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),U(e("select",{"onUpdate:modelValue":T[3]||(T[3]=C=>o.value=C),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[T[8]||(T[8]=e("option",{value:null},"(Không có)",-1)),(n(!0),c(he,null,we($.value,C=>(n(),c("option",{key:C.id,value:C.id},I("↳ ".repeat(C.depth)+C.name),9,Ki))),128))],512),[[Ze,o.value]])]),e("div",Xi,[V(S,{to:`/websites/${_(d)}/folders`,class:"px-4 py-2 border border-gray-300 rounded-md"},{default:ke(()=>[...T[10]||(T[10]=[$e("Hủy",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:D.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md disabled:bg-blue-400"},I(v.value?"Tạo":"Lưu"),9,Gi)]),te.value?(n(),c("div",{key:0,class:Ie(["text-sm",i.value==="error"?"text-red-600":"text-green-600"])},I(te.value),3)):Z("",!0)],32)])])}}},Qi={class:"max-w-3xl mx-auto"},Ji={key:0,class:"mb-6 rounded-md border border-green-200 bg-green-50 px-4 py-3 text-green-700"},Zi={key:1,class:"mb-6 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-red-700"},ed={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},td={class:"grid grid-cols-1 gap-4"},sd={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},ad={class:"grid grid-cols-1 gap-4"},od={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},ld={class:"grid grid-cols-1 gap-4"},nd={class:"flex justify-end"},rd=["disabled"],id={__name:"Settings",setup(s){const t=g({APP_NAME:"",APP_URL:"",SSL_EMAIL:"",CLOUDFLARE_API_TOKEN:"",CLOUDFLARE_ZONE_ID:""}),r=g(!1),d=g(""),p=g(""),v=async()=>{try{const{data:x}=await N.get("/api/settings");t.value={...t.value,...x}}catch{p.value="Không tải được cài đặt"}},m=async()=>{var x,u;r.value=!0,p.value="",d.value="";try{await N.put("/api/settings",t.value),d.value="Đã lưu cài đặt thành công"}catch(o){const k=((u=(x=o==null?void 0:o.response)==null?void 0:x.data)==null?void 0:u.error)||"Lưu cài đặt thất bại";p.value=k}finally{r.value=!1}};return tt(v),(x,u)=>(n(),c("div",Qi,[u[13]||(u[13]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Cài đặt hệ thống",-1)),d.value?(n(),c("div",Ji,I(d.value),1)):Z("",!0),p.value?(n(),c("div",Zi,I(p.value),1)):Z("",!0),e("form",{onSubmit:Oe(m,["prevent"])},[e("div",ed,[u[7]||(u[7]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Ứng dụng",-1)),e("div",td,[e("div",null,[u[5]||(u[5]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_NAME",-1)),U(e("input",{"onUpdate:modelValue":u[0]||(u[0]=o=>t.value.APP_NAME=o),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"VPS Manager"},null,512),[[Q,t.value.APP_NAME]])]),e("div",null,[u[6]||(u[6]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_URL",-1)),U(e("input",{"onUpdate:modelValue":u[1]||(u[1]=o=>t.value.APP_URL=o),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"https://vps.yourdomain.com"},null,512),[[Q,t.value.APP_URL]])])])]),e("div",sd,[u[9]||(u[9]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"SSL",-1)),e("div",ad,[e("div",null,[u[8]||(u[8]=e("label",{class:"block text-sm text-gray-600 mb-1"},"SSL_EMAIL",-1)),U(e("input",{"onUpdate:modelValue":u[2]||(u[2]=o=>t.value.SSL_EMAIL=o),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"admin@yourdomain.com"},null,512),[[Q,t.value.SSL_EMAIL]])])])]),e("div",od,[u[12]||(u[12]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Cloudflare",-1)),e("div",ld,[e("div",null,[u[10]||(u[10]=e("label",{class:"block text-sm text-gray-600 mb-1"},"CLOUDFLARE_API_TOKEN",-1)),U(e("input",{"onUpdate:modelValue":u[3]||(u[3]=o=>t.value.CLOUDFLARE_API_TOKEN=o),class:"w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[Q,t.value.CLOUDFLARE_API_TOKEN]])]),e("div",null,[u[11]||(u[11]=e("label",{class:"block text-sm text-gray-600 mb-1"},"CLOUDFLARE_ZONE_ID",-1)),U(e("input",{"onUpdate:modelValue":u[4]||(u[4]=o=>t.value.CLOUDFLARE_ZONE_ID=o),class:"w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[Q,t.value.CLOUDFLARE_ZONE_ID]])])])]),e("div",nd,[e("button",{type:"submit",onClick:Oe(m,["prevent"]),disabled:r.value,class:Ie(["bg-blue-600 text-white px-4 py-2 rounded-md",{"opacity-50 cursor-not-allowed":r.value}])},I(r.value?"Đang lưu...":"Lưu cài đặt"),11,rd)])],32)]))}},dd={class:"min-h-screen bg-gray-100"},ud={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},cd={class:"px-4 py-6 sm:px-0"},pd={class:"flex justify-between items-center mb-6"},md={class:"text-3xl font-bold text-gray-900"},gd={class:"flex items-center gap-2"},vd=["disabled","title"],fd={class:"bg-white shadow rounded-lg p-6"},bd={class:"space-y-4"},yd={class:"flex justify-between items-start"},hd={class:"inline-flex items-center gap-2 mb-2"},xd=["checked","onChange"],wd={class:"font-medium"},_d={class:"text-sm text-gray-500"},kd={class:"text-sm text-gray-500"},$d={class:"text-sm text-gray-500"},Sd={class:"flex gap-2"},Cd=["href"],Td=["href"],Ed=["onClick","disabled"],Rd={key:0,class:"text-center text-gray-500"},Ad={__name:"PagesManagement",setup(s){const r=pt().params.websiteId,d=g(null),p=g([]),v=g([]),m=g([]),x=g([]),u=g(!1),o=g("");g(!1);const k=We(()=>{const S=o.value.trim().toLowerCase();return S?p.value.filter(C=>(C.title||"").toLowerCase().includes(S)||(C.path||"").toLowerCase().includes(S)):p.value}),D=async()=>{const S=await N.get(`/api/websites/${r}`);d.value=S.data},te=async()=>{const S=await N.get(`/api/websites/${r}/pages`);p.value=S.data.map(C=>({...C,__site:d.value}))},i=async()=>{const S=await N.get("/api/websites");v.value=S.data||[]},se=We(()=>{var C;return(((C=d.value)==null?void 0:C.domain)||"").trim().replace(/^[^.]+\./,"")}),z=We(()=>{const S=se.value;return S&&(v.value||[]).find(C=>String(C.domain||"").trim()===S)||null}),ue=We(()=>{const S=d.value;return S&&String(S.domain||"").trim().split(".").length>2&&z.value?`/websites/${z.value.id}/subdomains`:"/websites"}),$=async S=>{if(confirm(`Delete page ${S.path}?`))try{x.value=[...x.value,S.id],await N.delete(`/api/pages/${S.id}`),yt.success("Page deleted"),m.value=m.value.filter(C=>C!==S.id),await te()}catch{yt.error("Failed to delete page")}finally{x.value=x.value.filter(C=>C!==S.id)}},y=S=>{const C=S.__site||d.value;if(!C)return"#";const pe=(C.ssl_enabled?"https://":"http://")+C.domain,J=S.path||"/",W=S.filename||"";if(W.toLowerCase()==="index.html")return pe+J;const xe=J.endsWith("/")?"":"/";return pe+J+xe+W},f=S=>{const C=S.__site||d.value;if(!C)return"#";const pe=C.id,J=((S==null?void 0:S.path)||"/").trim(),W=J==="/"?`/preview/${pe}`:`/preview/${pe}${J.startsWith("/")?"":"/"}${J}`,xe=localStorage.getItem("adminToken")||"";if(!xe)return W;const Se=W.includes("?")?"&":"?";return`${W}${Se}token=${encodeURIComponent(xe)}`},P=S=>{const C=S.id;m.value.includes(C)?m.value=m.value.filter(pe=>pe!==C):m.value=[...m.value,C]},T=async()=>{if(m.value.length!==0&&confirm(`Delete ${m.value.length} selected pages?`)){u.value=!0;try{const S=[...m.value];await Promise.all(S.map(async C=>{x.value=[...x.value,C];try{await N.delete(`/api/pages/${C}`)}finally{x.value=x.value.filter(pe=>pe!==C)}})),yt.success("Selected pages deleted"),m.value=[],await te()}catch{yt.error("Failed to delete selected pages")}finally{u.value=!1}}};return tt(async()=>{await D(),await te(),await i()}),(S,C)=>{var J;const pe=rt("router-link");return n(),c("div",dd,[e("div",ud,[e("div",cd,[e("div",pd,[e("h1",md,I(((J=d.value)==null?void 0:J.domain)||"..."),1),e("div",gd,[V(pe,{to:ue.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Back"},{default:ke(()=>[...C[1]||(C[1]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5"}),e("path",{d:"M12 19l-7-7 7-7"})],-1)])]),_:1},8,["to"]),U(e("input",{"onUpdate:modelValue":C[0]||(C[0]=W=>o.value=W),placeholder:"Search",class:"h-9 w-56 rounded-md border border-gray-300 px-3"},null,512),[[Q,o.value]]),V(pe,{to:`/websites/${_(r)}/pages/new`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Add Page"},{default:ke(()=>[...C[2]||(C[2]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])]),_:1},8,["to"]),e("button",{onClick:T,disabled:m.value.length===0||u.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:`Delete Selected (${m.value.length})`},[u.value?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):(n(),de(_(vt),{key:1,class:"size-4"}))],8,vd)])]),e("div",fd,[e("div",bd,[(n(!0),c(he,null,we(k.value,W=>{var xe,Se;return n(),c("div",{key:W.id,class:"border rounded-lg p-4"},[e("div",yd,[e("div",null,[e("label",hd,[e("input",{type:"checkbox",checked:m.value.includes(W.id),onChange:fe=>P(W)},null,40,xd)]),e("h4",wd,I(W.title||"(No title)"),1),e("p",_d,"Path: "+I(W.path),1),e("p",kd,"File: "+I(W.filename),1),e("p",$d,"Website: "+I((xe=W.__site)==null?void 0:xe.domain),1)]),e("div",Sd,[e("a",{href:y(W),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Live"},[V(_(gs),{class:"size-4"})],8,Cd),e("a",{href:f(W),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[...C[3]||(C[3]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,Td),V(pe,{to:`/websites/${((Se=W.__site)==null?void 0:Se.id)||_(r)}/pages/${W.id}`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},{default:ke(()=>[V(_(us),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:fe=>$(W),disabled:x.value.includes(W.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[x.value.includes(W.id)?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):(n(),de(_(vt),{key:1,class:"size-4"}))],8,Ed)])])])}),128)),k.value.length===0?(n(),c("div",Rd,"No pages found")):Z("",!0)])])])])])}}},Pd="modulepreload",Ld=function(s){return"/"+s},as={},_e=function(t,r,d){let p=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),x=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));p=Promise.allSettled(r.map(u=>{if(u=Ld(u),u in as)return;as[u]=!0;const o=u.endsWith(".css"),k=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${k}`))return;const D=document.createElement("link");if(D.rel=o?"stylesheet":Pd,o||(D.as="script"),D.crossOrigin="",D.href=u,x&&D.setAttribute("nonce",x),document.head.appendChild(D),o)return new Promise((te,i)=>{D.addEventListener("load",te),D.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${u}`)))})}))}function v(m){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=m,window.dispatchEvent(x),!x.defaultPrevented)throw m}return p.then(m=>{for(const x of m||[])x.status==="rejected"&&v(x.reason);return t().catch(v)})},Id={class:"min-h-screen bg-gray-100"},Dd={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},Md={class:"px-4 py-6 sm:px-0"},jd={class:"flex justify-between items-center mb-6"},Ud={class:"text-3xl font-bold text-gray-900"},Fd={class:"flex items-center gap-2"},Vd=["href"],Nd=["href"],zd={class:"bg-white shadow rounded-lg p-6"},Od={class:"mb-4"},Bd={class:"mb-4"},Hd={class:"mb-4"},qd={class:"mb-4"},Wd={class:"flex items-center justify-between"},Yd={class:"flex items-center gap-3"},Kd={class:"mt-1 border border-gray-300 rounded-md p-3 space-y-3"},Xd={class:"space-y-1"},Gd=["disabled","onClick"],Qd=["value","onChange"],Jd={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Zd={class:"bg-white rounded-lg shadow p-6 w-full max-w-md"},eu={class:"flex items-center justify-between mb-4"},tu={class:"space-y-3"},su=["value"],au={class:"pt-2 border-t border-gray-200"},ou={class:"text-xs text-gray-600"},lu={class:"flex justify-end gap-2 mt-6"},nu={class:"mb-4"},ru={key:0,class:"mb-4 space-y-4"},iu={key:1,class:"mb-4 space-y-4"},du={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},uu={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},cu={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},pu=["value"],mu={class:"text-sm"},gu={class:"space-y-3"},vu={class:"flex items-center gap-2"},fu={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},bu=["onClick"],yu=["onUpdate:modelValue"],hu=["onUpdate:modelValue"],xu={class:"space-y-3"},wu={class:"flex items-center gap-2"},_u={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},ku=["onClick"],$u=["onUpdate:modelValue"],Su=["onUpdate:modelValue"],Cu={key:2,class:"mb-4"},Tu={key:3,class:"mb-4"},Eu={key:0,class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Ru={class:"flex justify-end gap-3"},Au=["disabled"],Pu={key:0,class:"inline-flex items-center gap-2"},Lu={key:1},os={__name:"PageEdit",setup(s){const t=pt(),r=wt(),d=t.params.websiteId,p=t.params.pageId,v=g(t.name==="PageCreate"||p==="new"||!p),m=g("blank"),x=g(!1),u=g(""),o=g({title:"",location:"",phone:"",galleryRaw:"",about1:"",pageContent:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),k=g([]),D=g([]),te=g(null),i=g(""),se=g(null),z=g(!1),ue=g(""),$=g(!1);g(null),g(""),g(""),g(null);const y=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],f=g({path:"",filename:"",title:"",content:""}),P=g(null),T=g([]),S=g(null),C=g(!1),pe=g(null),J=g(null),W=async()=>{if(v.value)return;const a=(await N.get(`/api/pages/${p}`)).data;if(f.value={path:a.path,filename:a.filename,title:a.title||"",content:a.content||""},a.template_type){if(x.value=!!a.template_type,a.template_type==="page"&&a.template_data)o.value={...o.value,pageContent:a.template_data.content||""};else if((a.template_type==="hotel-detail"||a.template_type==="hotel-detail-1"||a.template_type==="detail")&&a.template_data){let j=a.template_data.galleryRaw||"";!j&&Array.isArray(a.template_data.gallery)&&(j=a.template_data.gallery.join(`
`)),o.value={title:a.template_data.title||"",location:a.template_data.location||a.template_data.location_text||"",phone:a.template_data.phone||"",galleryRaw:j,about1:a.template_data.about1||"",pageContent:"",amenities:Array.isArray(a.template_data.amenities)?a.template_data.amenities:[],info:Array.isArray(a.template_data.info)?a.template_data.info:[{subject:"",description:""},{subject:"",description:""}],faqs:Array.isArray(a.template_data.faqs)?a.template_data.faqs:[{q:"",a:""},{q:"",a:""}]}}m.value=a.template_type}else m.value="blank",x.value=!1;D.value=(a.folders||[]).map(j=>Number(j.id)),te.value=a.primary_folder_id==null?null:Number(a.primary_folder_id)},xe=async()=>{const M=(f.value.title||"").trim();let a="";try{a=(await N.get("/templates/laravel-hotel-1/page/index.html")).data||""}catch{a='<!DOCTYPE html><html><head><meta charset="utf-8"><title>{{TITLE}}</title></head><body></body></html>'}let j="",H="";try{j=(await N.get("/templates/_shared/header.html")).data||""}catch{}try{H=(await N.get("/templates/_shared/footer.html")).data||""}catch{}j&&(a=a.replace(/<header[^>]*>[\s\S]*?<\/header>/i,j)),H&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(a)?a=a.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,H):/<\/body>/i.test(a)?a=a.replace(/<\/body>/i,H+"</body>"):a+=`
`+H);const h={title:M||"Page",content:o.value.pageContent||""},Y=`<script type="application/json" id="page-data">${JSON.stringify(h)}<\/script>`;return a=a.replace(/<\/body>/i,Y+`
</body>`),a=a.replace(/<title>[^<]*<\/title>/i,`<title>${h.title}</title>`),a||'<!DOCTYPE html><html><head><meta charset="utf-8"><title>'+(M||"Page")+'</title></head><body><div id="page-content">'+(o.value.pageContent||"")+"</div></body></html>"},Se=async()=>{const M=(o.value.galleryRaw||"").split(`
`).map(Be=>Be.trim()).filter(Boolean),j=(D.value||[]).reduce((Be,Ke)=>{if(Be==null)return Ke;const ft=O(Be);return O(Ke)>ft?Ke:Be},null),H=E(j),h=H.length>1?[H[0],H[H.length-1]]:H,Y=(f.value.title||"").trim(),le=["Home",...h.map(Be=>Be.name||""),Y];let ee=(await N.get("/templates/hotel-detail-1/index.html")).data||"",Ae="",Fe="";try{Ae=(await N.get("/templates/_shared/header.html")).data||""}catch{}try{Fe=(await N.get("/templates/_shared/footer.html")).data||""}catch{}Ae&&(ee=ee.replace(/<header[^>]*>[\s\S]*?<\/header>/i,Ae)),Fe&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(ee)?ee=ee.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,Fe):/<\/body>/i.test(ee)?ee=ee.replace(/<\/body>/i,Fe+"</body>"):ee+=`
`+Fe);const et=o.value.amenities||[],Ue=M.map(Be=>String(Be).replace(/<\/script>/gi,"<\\/script>")),qe={title:Y||"Hotel",location:o.value.location||"",location_text:o.value.location||"",phone:o.value.phone||"",about1:o.value.about1||"",amenities:et,faqs:o.value.faqs||[],info:o.value.info||[],gallery:Ue,breadcrumb_items:le.filter(Boolean)},lt=`<script type="application/json" id="page-data">${JSON.stringify(qe)}<\/script>`;return ee=ee.replace("{{GALLERY_DATA_SCRIPT}}",lt),ee=ee.replace(/<title>[^<]*<\/title>/i,`<title>${qe.title}</title>`),ee},fe=async()=>{const M=await N.get(`/api/websites/${d}`);P.value=M.data},Ce=async()=>{try{const M=await N.get("/api/websites");T.value=M.data||[]}catch{T.value=[]}},De=We(()=>{const M=P.value;if(!M)return"/websites";const a=(M.domain||"").trim(),j=a.replace(/^[^.]+\./,"");if(j&&j!==a){const H=(T.value||[]).find(h=>String(h.domain).trim()===j);if(H&&H.id)return`/websites/${H.id}/subdomains`}return"/websites"}),Ve=async()=>{try{const M=await N.get("/api/settings");S.value=M.data||{}}catch{S.value={}}},Me=async()=>{const j=((await N.get(`/api/websites/${d}/folders`)).data||[]).map(H=>({...H,id:Number(H.id),parent_id:H.parent_id==null?null:Number(H.parent_id)}));k.value=j},Ye=async()=>{const M=(i.value||"").trim();if(!M)return;let a=(ue.value||"").trim();a||(a=Re(M));const j={name:M,slug:a};se.value&&(j.parent_id=Number(se.value));const h=(await N.post(`/api/websites/${d}/folders`,j)).data;k.value=[...k.value,h],D.value=[...D.value,h.id],i.value="",se.value=null,ue.value="",$.value=!1,z.value=!1},ie=async()=>{var M,a,j,H,h;C.value=!0;try{const Y=(M=window.tinymce)==null?void 0:M.get("page-content-editor");if(Y&&(o.value.pageContent=Y.getContent()||""),v.value){let le;if(m.value==="blank"?le=u.value||f.value.content||"":m.value==="page"?le=await xe():le=await Se(),f.value.content=le,f.value.filename=(f.value.filename||"index.html").trim(),!(f.value.path||"").trim()){const Fe=(D.value||[]).reduce((Ue,qe)=>{if(Ue==null)return qe;const lt=O(Ue);return O(qe)>lt?qe:Ue},null),et=te.value||Fe;if(et){const Ue=X(et);Ue&&(f.value.path=`/${Ue}`)}}f.value.path||(f.value.path="/");const ee={...f.value};if(m.value==="page")ee.template_type="page",ee.template_data={title:(f.value.title||"").trim()||"Page",content:o.value.pageContent||""};else if(m.value!=="blank"){ee.template_type=m.value;const Ae=(o.value.galleryRaw||"").split(`
`).map(Fe=>Fe.trim()).filter(Boolean);ee.template_data={title:(o.value.title||f.value.title||"").trim()||"Hotel",location:o.value.location||"",location_text:o.value.location||"",phone:o.value.phone||"",about1:o.value.about1||"",amenities:o.value.amenities||[],faqs:o.value.faqs||[],info:o.value.info||[],gallery:Ae,galleryRaw:o.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(o.value.title||"").trim()].filter(Boolean)}}else ee.template_type="blank",ee.template_data=null;ee.folder_ids=[...D.value],ee.primary_folder_id=te.value,await N.post(`/api/websites/${d}/pages`,ee)}else{const le={...f.value};let ze;if(m.value==="blank"?ze=f.value.content||"":m.value==="page"?ze=await xe():ze=await Se(),le.content=ze,le.filename=(le.filename||"index.html").trim(),m.value==="page")le.template_type="page",le.template_data={title:(f.value.title||"").trim()||"Page",content:o.value.pageContent||""};else if(m.value!=="blank"){le.template_type=m.value;const Ae=(o.value.galleryRaw||"").split(`
`).map(Fe=>Fe.trim()).filter(Boolean);le.template_data={title:(o.value.title||f.value.title||"").trim()||"Hotel",location:o.value.location||"",location_text:o.value.location||"",phone:o.value.phone||"",about1:o.value.about1||"",amenities:o.value.amenities||[],faqs:o.value.faqs||[],info:o.value.info||[],gallery:Ae,galleryRaw:o.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(o.value.title||"").trim()].filter(Boolean)}}else le.template_type="blank",le.template_data=null;if(!(le.path||"").trim()){const Fe=(D.value||[]).reduce((Ue,qe)=>{if(Ue==null)return qe;const lt=O(Ue);return O(qe)>lt?qe:Ue},null),et=te.value||Fe;if(et){const Ue=X(et);Ue&&(le.path=`/${Ue}`)}}le.path||(le.path="/"),le.folder_ids=[...D.value],le.primary_folder_id=te.value,await N.put(`/api/pages/${p}`,le)}r.push(`/websites/${d}/pages`)}catch(Y){const le=((j=(a=Y==null?void 0:Y.response)==null?void 0:a.data)==null?void 0:j.message)||((h=(H=Y==null?void 0:Y.response)==null?void 0:H.data)==null?void 0:h.error)||(Y==null?void 0:Y.message)||"Lưu trang thất bại";alert(le)}finally{C.value=!1}},ne=()=>{if(!P.value)return"#";const M=(P.value.ssl_enabled?"https://":"http://")+P.value.domain,a=f.value.path||"/",j=f.value.filename||"",H=a.endsWith("/")?"":"/";return j.toLowerCase()==="index.html"?M+a:M+a+H+j},w=()=>{var le;if(!P.value)return"#";const M=(((le=S.value)==null?void 0:le.APP_URL)||(P.value.ssl_enabled?"https://":"http://")+P.value.domain).replace(/\/$/,""),a=(f.value.path||"/").trim();let j;if(a==="/"||a==="")j=`${M}/preview/${P.value.id}`;else{const ze=a.replace(/^\//,"");j=`${M}/preview/${P.value.id}/${encodeURIComponent(ze)}`}const H=localStorage.getItem("adminToken"),h=new URLSearchParams;H&&h.set("token",H),h.set("hide_preview_bar","1"),h.set("v",String(Date.now()));const Y=h.toString();return Y?`${j}?${Y}`:j},X=M=>{if(!M)return"";const a=new Map((k.value||[]).map(h=>[String(h.id),h]));let j=a.get(String(M));const H=[];for(;j&&(j.slug&&H.unshift(j.slug),!(!j.parent_id||(j=a.get(String(j.parent_id)),j&&String(j.id)===String(M)))););return H.join("/")},E=M=>{if(!M)return[];const a=new Map((k.value||[]).map(Y=>[String(Y.id),Y])),j=[],H=new Set;let h=a.get(String(M));for(;h&&!H.has(h.id)&&(j.unshift(h),H.add(h.id),!!h.parent_id);)h=a.get(String(h.parent_id));return j},O=M=>{let a=0;const j=k.value||[],H=new Map(j.map(Y=>[String(Y.id),Y]));let h=j.find(Y=>String(Y.id)===String(M));for(;h&&h.parent_id!=null;)a+=1,h=H.get(String(h.parent_id));return a},re=We(()=>{const M=[...k.value||[]],a=new Map(M.map(ee=>[String(ee.id),ee])),j=ee=>ee.sort((Ae,Fe)=>(Ae.name||"").localeCompare(Fe.name||"")),H=ee=>M.filter(Ae=>String(Ae.parent_id)===String(ee)),h=ee=>!ee.parent_id||!a.has(String(ee.parent_id))||String(ee.parent_id)===String(ee.id),Y=j(M.filter(h)),le=[],ze=(ee,Ae)=>{le.push({...ee,depth:Ae}),j(H(ee.id)).forEach(Fe=>ze(Fe,Ae+1))};return Y.forEach(ee=>ze(ee,0)),le}),Re=M=>(M||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),ve=()=>{$.value||(ue.value=Re(i.value))},A=M=>{if(te.value===M){te.value=null;return}te.value||(te.value=M)},b=M=>{if(D.value.includes(M)){const a=k.value.find(j=>j.id===M);if(a&&a.parent_id){const j=H=>{if(!H)return;D.value.includes(H)||D.value.push(H);const h=k.value.find(Y=>Y.id===H);h&&h.parent_id&&j(h.parent_id)};j(a.parent_id)}}te.value&&!D.value.includes(te.value)&&(te.value=null)},K=()=>{o.value.faqs=[...o.value.faqs||[],{q:"",a:""}]},G=()=>{o.value.info=[...o.value.info||[],{subject:"",description:""}]},oe=M=>{o.value.faqs=(o.value.faqs||[]).filter((a,j)=>j!==M)},ae=M=>{o.value.info=(o.value.info||[]).filter((a,j)=>j!==M)},je=We(()=>{const a=(f.value.content||"").split(`
`).length;return a>0?a:1}),L=()=>{pe.value&&J.value&&(pe.value.scrollTop=J.value.scrollTop)},Te=async()=>{if(window.tinymce)return;const{default:M}=await _e(async()=>{const{default:a}=await import("./tinymce.js").then(j=>j.t);return{default:a}},[]);await _e(()=>import("./tinymce-plugins.js").then(a=>a.i),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.a),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.q),[]),await _e(()=>import("./tinymce-skins.js").then(a=>a.s),[]),await _e(()=>import("./tinymce-skins.js").then(a=>a.c),[]),await _e(()=>import("./tinymce-skins.js").then(a=>a.a),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.b),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.c),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.d),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.e),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.f),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.g),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.h),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.j),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.k),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.l),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.m),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.n),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.o),[]),await _e(()=>import("./tinymce-plugins.js").then(a=>a.p),[]),window.tinymce=M},Ne=async()=>{await Vt(),await new Promise(j=>setTimeout(j,100));const M=document.getElementById("page-content-editor");if(!M)return;await Te();const a=window.tinymce.get("page-content-editor");a&&a.remove(),M.value=o.value.pageContent||"",window.tinymce.init({selector:"#page-content-editor",menubar:!0,plugins:"link lists table image code charmap anchor searchreplace visualblocks fullscreen insertdatetime media help wordcount",toolbar:"undo redo | formatselect | bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media table | charmap anchor | code fullscreen | help",height:500,table_toolbar:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",image_title:!0,automatic_uploads:!1,file_picker_types:"image",content_style:"body { font-family: Arial, sans-serif; font-size: 14px; }",setup:j=>{j.on("Change KeyUp SetContent",()=>{o.value.pageContent=j.getContent()||""})}}).then(j=>{const H=j&&j[0];H&&(o.value.pageContent||"").trim()&&H.setContent(o.value.pageContent)})};return kt(m,async M=>{M==="page"&&await Ne()}),tt(async()=>{await Ve(),await Promise.all([fe(),Ce()]),await Me(),await W(),await Vt();const M=document.getElementById("about1-editor");M&&(await Te(),M.value=o.value.about1||"",window.tinymce.init({selector:"#about1-editor",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:a=>{a.on("Change KeyUp SetContent",()=>{o.value.about1=a.getContent()||""})}}).then(a=>{const j=a&&a[0];j&&(o.value.about1||"").trim()&&j.setContent(o.value.about1)})),m.value==="page"&&await Ne()}),Bt(()=>{if(window.tinymce){const M=window.tinymce.get("about1-editor");M&&M.remove();const a=window.tinymce.get("page-content-editor");a&&a.remove()}}),(M,a)=>{var H;const j=rt("router-link");return n(),c("div",Id,[e("div",Dd,[e("div",Md,[e("div",jd,[e("h1",Ud,I(v.value?"Create Page":"Edit Page"),1),e("div",Fd,[v.value?Z("",!0):(n(),c("a",{key:0,href:ne(),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[V(_(gs),{class:"size-4"})],8,Vd)),v.value?Z("",!0):(n(),c("a",{key:1,href:w(),target:"_blank",class:"px-3 h-9 inline-flex items-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 text-sm"},"Preview",8,Nd)),V(j,{to:De.value,class:"px-4 py-2 rounded-md border border-gray-300 bg-white"},{default:ke(()=>[...a[20]||(a[20]=[$e("Back",-1)])]),_:1},8,["to"])])]),e("div",zd,[e("form",{onSubmit:Oe(ie,["prevent"]),novalidate:""},[e("div",Od,[a[21]||(a[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Path",-1)),U(e("input",{"onUpdate:modelValue":a[0]||(a[0]=h=>f.value.path=h),type:"text",placeholder:"/about-us",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,f.value.path]])]),e("div",Bd,[a[22]||(a[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Filename",-1)),U(e("input",{"onUpdate:modelValue":a[1]||(a[1]=h=>f.value.filename=h),type:"text",placeholder:"index.html",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,f.value.filename]])]),e("div",Hd,[a[23]||(a[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Title",-1)),U(e("input",{"onUpdate:modelValue":a[2]||(a[2]=h=>f.value.title=h),onInput:a[3]||(a[3]=h=>o.value.title=f.value.title),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[Q,f.value.title]])]),e("div",qd,[e("div",Wd,[a[25]||(a[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thư mục",-1)),e("div",Yd,[V(j,{to:`/websites/${_(d)}/folders`,class:"text-sm text-primary"},{default:ke(()=>[...a[24]||(a[24]=[$e("Quản lý thư mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:a[4]||(a[4]=h=>z.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",Kd,[e("div",Xd,[a[26]||(a[26]=e("label",{class:"text-sm text-gray-700"},"Chọn thư mục",-1)),(n(!0),c(he,null,we(re.value,h=>(n(),c("div",{key:h.id,class:"flex items-center gap-2 cursor-pointer"},[e("button",{type:"button",class:"text-yellow-500 text-xs",disabled:te.value&&te.value!==h.id,onClick:Y=>A(h.id)},I(te.value===h.id?"★":"☆"),9,Gd),U(e("input",{type:"checkbox",value:h.id,"onUpdate:modelValue":a[5]||(a[5]=Y=>D.value=Y),onChange:Y=>b(h.id),class:"rounded cursor-pointer"},null,40,Qd),[[At,D.value]]),e("span",{class:"text-sm",style:nt({paddingLeft:(h.depth>0?h.depth*16:0)+"px"})},I("↳ ".repeat(h.depth))+I(h.name),5)]))),128))])]),z.value?(n(),c("div",Jd,[e("div",Zd,[e("div",eu,[a[27]||(a[27]=e("h3",{class:"text-lg font-semibold"},"Tạo thư mục",-1)),e("button",{type:"button",onClick:a[6]||(a[6]=h=>z.value=!1),class:"text-gray-500"},"✕")]),e("div",tu,[e("div",null,[a[28]||(a[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),U(e("input",{"onUpdate:modelValue":a[7]||(a[7]=h=>i.value=h),onInput:ve,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[Q,i.value]])]),e("div",null,[a[29]||(a[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),U(e("input",{"onUpdate:modelValue":a[8]||(a[8]=h=>ue.value=h),onInput:a[9]||(a[9]=h=>$.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[Q,ue.value]])]),e("div",null,[a[31]||(a[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),U(e("select",{"onUpdate:modelValue":a[10]||(a[10]=h=>se.value=h),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[a[30]||(a[30]=e("option",{value:null},"(Không có)",-1)),(n(!0),c(he,null,we(re.value,h=>(n(),c("option",{key:h.id,value:h.id},I("↳ ".repeat(h.depth)+h.name),9,su))),128))],512),[[Ze,se.value]])]),e("div",au,[e("div",ou,[a[33]||(a[33]=$e("Sửa/Xóa chi tiết vui lòng vào trang ",-1)),V(j,{to:`/websites/${_(d)}/folders`,class:"text-primary"},{default:ke(()=>[...a[32]||(a[32]=[$e("Quản lý thư mục",-1)])]),_:1},8,["to"])])])]),e("div",lu,[e("button",{type:"button",onClick:a[11]||(a[11]=h=>z.value=!1),class:"px-4 py-2 rounded-md border border-gray-300"},"Hủy"),e("button",{type:"button",onClick:Ye,class:"px-4 py-2 bg-blue-600 text-white rounded-md"},"Tạo")])])])):Z("",!0)]),e("div",nu,[a[35]||(a[35]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),U(e("select",{"onUpdate:modelValue":a[12]||(a[12]=h=>m.value=h),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...a[34]||(a[34]=[e("option",{value:null},"Auto (theo website)",-1),Tt('<option value="blank">Custom HTML</option><optgroup label="Templates trong package"><option value="home">Home Template</option><option value="listing">Listing Template</option><option value="detail">Detail Template</option><option value="page">Page Template</option></optgroup>',2)])],512),[[Ze,m.value]]),a[36]||(a[36]=e("p",{class:"mt-1 text-xs text-gray-500"}," Auto: Tự động chọn template phù hợp. Custom HTML: Tự viết HTML. Templates: Chọn template có sẵn trong package. ",-1))]),m.value==="page"?(n(),c("div",ru,[...a[37]||(a[37]=[e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Nội dung trang"),e("textarea",{id:"page-content-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)])])):Z("",!0),m.value==="detail"?(n(),c("div",iu,[e("div",du,[e("div",null,[a[38]||(a[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),U(e("input",{"onUpdate:modelValue":a[13]||(a[13]=h=>o.value.location=h),type:"text",placeholder:"Sunny Isles, Florida, United States hoặc iframe Google Maps embed",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,o.value.location]])]),e("div",null,[a[39]||(a[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),U(e("input",{"onUpdate:modelValue":a[14]||(a[14]=h=>o.value.phone=h),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,o.value.phone]])])]),e("div",null,[a[40]||(a[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),U(e("textarea",{"onUpdate:modelValue":a[15]||(a[15]=h=>o.value.galleryRaw=h),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,o.value.galleryRaw]])]),a[46]||(a[46]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[a[41]||(a[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",uu,[e("div",cu,[(n(),c(he,null,we(y,h=>e("label",{key:h,class:"inline-flex items-center gap-2 cursor-pointer"},[U(e("input",{type:"checkbox",value:h,"onUpdate:modelValue":a[16]||(a[16]=Y=>o.value.amenities=Y),class:"rounded cursor-pointer border-gray-300"},null,8,pu),[[At,o.value.amenities]]),e("span",mu,I(h),1)])),64))])])]),e("div",gu,[e("div",{class:"flex items-center justify-between"},[a[42]||(a[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:G,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),c(he,null,we(o.value.info,(h,Y)=>(n(),c("div",{key:Y,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",vu,[e("span",fu,I(Y+1),1),a[43]||(a[43]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:le=>ae(Y),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,bu)]),U(e("input",{"onUpdate:modelValue":le=>h.subject=le,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,yu),[[Q,h.subject]]),U(e("textarea",{"onUpdate:modelValue":le=>h.description=le,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,hu),[[Q,h.description]])]))),128))]),e("div",xu,[e("div",{class:"flex items-center justify-between"},[a[44]||(a[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:K,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),c(he,null,we(o.value.faqs,(h,Y)=>(n(),c("div",{key:Y,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",wu,[e("span",_u,I(Y+1),1),a[45]||(a[45]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:le=>oe(Y),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,ku)]),U(e("input",{"onUpdate:modelValue":le=>h.q=le,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,$u),[[Q,h.q]]),U(e("textarea",{"onUpdate:modelValue":le=>h.a=le,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Su),[[Q,h.a]])]))),128))])])):Z("",!0),v.value&&m.value==="blank"?(n(),c("div",Cu,[a[47]||(a[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),U(e("textarea",{"onUpdate:modelValue":a[17]||(a[17]=h=>u.value=h),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm font-mono"},null,512),[[Q,u.value]])])):Z("",!0),(m.value==="blank"||!v.value&&!x.value)&&m.value!=="page"?(n(),c("div",Tu,[a[48]||(a[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Content",-1)),((H=P.value)==null?void 0:H.type)==="html"&&(!v.value||m.value==="blank")?(n(),c("div",Eu,[e("div",{ref_key:"gutterRef",ref:pe,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(n(!0),c(he,null,we(je.value,h=>(n(),c("div",{key:h,class:"px-2 text-xs text-gray-500 leading-6"},I(h),1))),128))],512),U(e("textarea",{ref_key:"codeRef",ref:J,"onUpdate:modelValue":a[18]||(a[18]=h=>f.value.content=h),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:L},null,544),[[Q,f.value.content]])])):U((n(),c("textarea",{key:1,"onUpdate:modelValue":a[19]||(a[19]=h=>f.value.content=h),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512)),[[Q,f.value.content]])])):Z("",!0),e("div",Ru,[V(j,{to:De.value,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:ke(()=>[...a[49]||(a[49]=[$e("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:C.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[C.value?(n(),c("span",Pu,[V(_(He),{class:"size-4 animate-spin"}),$e(" "+I(v.value?"Creating...":"Saving..."),1)])):(n(),c("span",Lu,I(v.value?"Create":"Save"),1))],8,Au)])],32)])])])])}}},Iu={class:"relative flex min-h-screen w-full flex-col bg-gray-100"},Du={class:"flex flex-1 items-center justify-center p-4 lg:p-6"},Mu={class:"flex w-full max-w-6xl justify-center"},ju={class:"grid w-full grid-cols-1 gap-8 lg:gap-16"},Uu={class:"flex flex-col justify-center"},Fu={class:"mx-auto flex w-full max-w-md flex-col"},Vu={class:"flex items-center gap-3 pb-8"},Nu={class:"flex flex-col gap-2"},zu={class:"relative flex items-center"},Ou={class:"flex flex-col gap-2"},Bu={class:"relative flex items-center"},Hu=["type"],qu=["disabled"],Wu={key:0,class:"inline-flex items-center gap-2"},Yu={key:1},Ku={key:0,class:"text-sm text-red-600"},Xu={__name:"Login",setup(s){const t=wt(),r=g(""),d=g(""),p=g(!1),v=g(""),m=g(!1),x=async()=>{var u,o;p.value=!0,v.value="";try{const D=(await N.post("/api/login",{username:r.value,password:d.value})).data.token;localStorage.setItem("adminToken",D),N.defaults.headers.common["X-Admin-Token"]=D,document.cookie=`X-Admin-Token=${D}; path=/; max-age=${60*60*24}; samesite=None; secure`,document.cookie=`adminToken=${D}; path=/; max-age=${60*60*24}; samesite=None; secure`,t.push("/")}catch(k){v.value=((o=(u=k==null?void 0:k.response)==null?void 0:u.data)==null?void 0:o.error)||"Đăng nhập thất bại"}finally{p.value=!1}};return(u,o)=>(n(),c("div",Iu,[e("div",Du,[e("div",Mu,[e("div",ju,[e("div",Uu,[e("div",Fu,[e("div",Vu,[V(_(Fs),{class:"size-8 text-blue-600"}),o[3]||(o[3]=e("span",{class:"text-xl font-semibold text-gray-800"},"VPS Manager",-1))]),o[7]||(o[7]=e("div",{class:"flex flex-col gap-1.5"},[e("p",{class:"text-gray-900 text-3xl font-bold tracking-tight"},"Đăng nhập vào Bảng điều khiển"),e("p",{class:"text-gray-500 text-base"},"Quản lý các máy chủ ảo của bạn một cách hiệu quả.")],-1)),e("form",{onSubmit:Oe(x,["prevent"]),class:"flex flex-col gap-5 pt-8"},[e("label",Nu,[o[4]||(o[4]=e("p",{class:"text-gray-900 text-sm font-medium"},"Email / Tên người dùng",-1)),e("div",zu,[V(_(Vs),{class:"absolute left-3.5 size-4 text-gray-400"}),U(e("input",{"onUpdate:modelValue":o[0]||(o[0]=k=>r.value=k),type:"text",required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-4",placeholder:"nhapemail@example.com"},null,512),[[Q,r.value]])])]),e("label",Ou,[o[5]||(o[5]=e("p",{class:"text-gray-900 text-sm font-medium"},"Mật khẩu",-1)),e("div",Bu,[V(_(Ns),{class:"absolute left-3.5 size-4 text-gray-400"}),U(e("input",{type:m.value?"text":"password","onUpdate:modelValue":o[1]||(o[1]=k=>d.value=k),required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-11",placeholder:"••••••••"},null,8,Hu),[[Cs,d.value]]),e("button",{type:"button",onClick:o[2]||(o[2]=k=>m.value=!m.value),class:"absolute right-0 h-full px-3.5 text-gray-400 hover:text-gray-600"},[m.value?(n(),de(_(zs),{key:1,class:"size-5"})):(n(),de(_(Nt),{key:0,class:"size-5"}))])])]),e("button",{type:"submit",disabled:p.value,class:"flex h-12 w-full items-center justify-center rounded-lg bg-blue-600 px-6 text-base font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500/50"},[p.value?(n(),c("span",Wu,[V(_(He),{class:"size-4 animate-spin"}),o[6]||(o[6]=$e(" Đang đăng nhập... ",-1))])):(n(),c("span",Yu,"Đăng Nhập"))],8,qu),v.value?(n(),c("p",Ku,I(v.value),1)):Z("",!0)],32)])])])])]),o[8]||(o[8]=e("footer",{class:"flex justify-center p-4"},[e("p",{class:"text-sm text-gray-500"},"© 2024 VPS Manager. Đã đăng ký bản quyền.")],-1))]))}},Gu={class:"min-h-screen bg-gray-100"},Qu={class:"max-w-3xl mx-auto py-6 sm:px-6 lg:px-8"},Ju={class:"px-4 py-6 sm:px-0"},Zu={class:"bg-white rounded-lg shadow p-6"},ec={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},tc={class:"flex justify-end gap-3 mt-6"},sc=["disabled"],ac={key:0,class:"inline-flex items-center gap-2"},oc={key:1},lc={__name:"AdminProfile",setup(s){const t=wt(),r=g({ADMIN_NAME:"",ADMIN_EMAIL:"",ADMIN_USERNAME:"",ADMIN_PASSWORD:""}),d=g(!1),p=g(""),v=g("success"),m=async()=>{const k=(await N.get("/api/settings")).data||{};r.value.ADMIN_NAME=k.ADMIN_NAME||"",r.value.ADMIN_EMAIL=k.ADMIN_EMAIL||"",r.value.ADMIN_USERNAME=k.ADMIN_USERNAME||"",r.value.ADMIN_PASSWORD=k.ADMIN_PASSWORD||""},x=async()=>{var o,k;d.value=!0,p.value="";try{await N.put("/api/settings",r.value),p.value="Đã lưu, vui lòng đăng nhập lại",v.value="success",localStorage.removeItem("adminToken"),delete N.defaults.headers.common["X-Admin-Token"],t.push("/login")}catch(D){p.value=((k=(o=D==null?void 0:D.response)==null?void 0:o.data)==null?void 0:k.error)||"Lưu thất bại",v.value="error"}finally{d.value=!1}},u=()=>{localStorage.removeItem("adminToken"),delete N.defaults.headers.common["X-Admin-Token"],t.push("/login")};return tt(m),(o,k)=>(n(),c("div",Gu,[e("div",Qu,[e("div",Ju,[e("div",Zu,[k[9]||(k[9]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Thông tin quản trị",-1)),e("form",{onSubmit:Oe(x,["prevent"])},[e("div",ec,[e("div",null,[k[4]||(k[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên",-1)),U(e("input",{"onUpdate:modelValue":k[0]||(k[0]=D=>r.value.ADMIN_NAME=D),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_NAME]])]),e("div",null,[k[5]||(k[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),U(e("input",{"onUpdate:modelValue":k[1]||(k[1]=D=>r.value.ADMIN_EMAIL=D),type:"email",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_EMAIL]])]),e("div",null,[k[6]||(k[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tài khoản",-1)),U(e("input",{"onUpdate:modelValue":k[2]||(k[2]=D=>r.value.ADMIN_USERNAME=D),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_USERNAME]])]),e("div",null,[k[7]||(k[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Mật khẩu",-1)),U(e("input",{"onUpdate:modelValue":k[3]||(k[3]=D=>r.value.ADMIN_PASSWORD=D),type:"password",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_PASSWORD]])])]),e("div",tc,[e("button",{type:"button",onClick:u,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Logout"),e("button",{type:"submit",disabled:d.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[d.value?(n(),c("span",ac,[V(_(He),{class:"size-4 animate-spin"}),k[8]||(k[8]=$e(" Đang lưu... ",-1))])):(n(),c("span",oc,"Lưu"))],8,sc)]),p.value?(n(),c("p",{key:0,class:Ie([v.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},I(p.value),3)):Z("",!0)],32)])])])]))}},nc={class:"min-h-screen bg-gray-100"},rc={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},ic={class:"px-4 py-6 sm:px-0"},dc={class:"flex justify-between items-center mb-6"},uc={class:"text-3xl font-bold text-gray-900"},cc={class:"bg-white shadow rounded-lg p-6"},pc={class:"space-y-4"},mc={class:"flex justify-between items-start"},gc={class:"font-medium"},vc={class:"text-sm text-gray-500"},fc={class:"mt-2 flex items-center space-x-4 text-sm"},bc=["title"],yc={class:"flex gap-2"},hc=["onClick","disabled"],xc=["onClick","disabled"],wc=["onClick","disabled"],_c=["href"],kc=["onClick","disabled"],$c={key:0,class:"text-center text-gray-500"},Sc={__name:"SubdomainsManagement",setup(s){const r=pt().params.websiteId,d=g(""),p=g([]),v=g([]),m=g([]),x=g([]),u=g([]),o=async()=>{const se=await N.get(`/api/websites/${r}`);d.value=se.data.domain;const ue=(await N.get("/api/websites")).data||[];p.value=ue.filter($=>$.domain.endsWith("."+d.value))};tt(o);const k=async se=>{var z,ue,$,y;try{v.value=[...v.value,se.id],await N.post(`/api/websites/${se.id}/deploy`);let f=0;for(;f<60&&(await new Promise(T=>setTimeout(T,2e3)),(await N.get(`/api/websites/${se.id}`)).data.status==="deploying");)f++;await o(),alert(`✓ Deploy thành công cho ${se.domain}`)}catch(f){const P=((ue=(z=f==null?void 0:f.response)==null?void 0:z.data)==null?void 0:ue.message)||((y=($=f==null?void 0:f.response)==null?void 0:$.data)==null?void 0:y.error)||"Deploy thất bại";alert(`✗ ${P}`)}finally{v.value=v.value.filter(f=>f!==se.id)}},D=async se=>{if(confirm(`Delete subdomain ${se.domain}?`))try{m.value=[...m.value,se.id],await N.delete(`/api/websites/${se.id}`),await o()}finally{m.value=m.value.filter(z=>z!==se.id)}},te=async se=>{var z,ue,$,y;try{x.value=[...x.value,se.id],await N.post(`/api/websites/${se.id}/ssl`),await o(),alert(`✓ SSL đã được cài đặt thành công cho ${se.domain}`)}catch(f){const P=((ue=(z=f==null?void 0:f.response)==null?void 0:z.data)==null?void 0:ue.message)||((y=($=f==null?void 0:f.response)==null?void 0:$.data)==null?void 0:y.error)||"Cài đặt SSL thất bại";alert(`✗ ${P}`)}finally{x.value=x.value.filter(f=>f!==se.id)}},i=async se=>{if(confirm(`Deactivate subdomain ${se.domain}?`))try{u.value=[...u.value,se.id],await N.post(`/api/websites/${se.id}/deactivate`),await o()}finally{u.value=u.value.filter(z=>z!==se.id)}};return(se,z)=>{const ue=rt("router-link");return n(),c("div",nc,[e("div",rc,[e("div",ic,[e("div",dc,[e("h1",uc,"Subdomains of "+I(d.value),1),V(ue,{to:`/websites/${_(r)}/subdomains/new`,class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"},{default:ke(()=>[...z[0]||(z[0]=[$e("Create Subdomain",-1)])]),_:1},8,["to"])]),e("div",cc,[e("div",pc,[(n(!0),c(he,null,we(p.value,$=>{var y;return n(),c("div",{key:$.id,class:"border rounded-lg p-4"},[e("div",mc,[e("div",null,[e("h4",gc,I($.domain),1),e("p",vc,"Server: "+I(((y=$.vps_server)==null?void 0:y.name)||"N/A"),1),e("div",fc,[e("span",{class:Ie(["inline-flex items-center",{"text-blue-600":$.status==="deploying","text-green-600":$.status==="deployed","text-gray-600":$.status==="pending"||$.status==="draft","text-orange-600":$.status==="suspended","text-red-600":$.status==="error"}]),title:$.status},[$.status==="deploying"?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):$.status==="deployed"?(n(),de(_(St),{key:1,class:"size-4"})):$.status==="pending"||$.status==="draft"?(n(),de(_(Pt),{key:2,class:"size-4"})):$.status==="suspended"?(n(),de(_(Lt),{key:3,class:"size-4"})):(n(),de(_(Ct),{key:4,class:"size-4"}))],10,bc),e("span",{class:Ie(["inline-flex items-center gap-1",$.ssl_enabled?"text-green-600":"text-gray-400"])},[$.ssl_enabled?(n(),de(_(xt),{key:0,class:"size-4"})):(n(),de(_(cs),{key:1,class:"size-4"}))],2)])]),e("div",yc,[V(ue,{to:`/websites/${$.id}/pages`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:ke(()=>[V(_(ps),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:f=>k($),disabled:v.value.includes($.id)||$.status==="deployed",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[v.value.includes($.id)?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):(n(),de(_(ms),{key:1,class:"size-4"}))],8,hc),$.status==="deployed"?(n(),c("button",{key:0,onClick:f=>te($),disabled:x.value.includes($.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[x.value.includes($.id)?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):(n(),de(_(xt),{key:1,class:"size-4"}))],8,xc)):Z("",!0),$.status==="deployed"||$.status==="error"?(n(),c("button",{key:1,onClick:f=>i($),disabled:u.value.includes($.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[u.value.includes($.id)?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):(n(),de(_(Lt),{key:1,class:"size-4"}))],8,wc)):Z("",!0),e("a",{href:($.ssl_enabled?"https://":"http://")+$.domain,target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[V(_(gt),{class:"size-4"})],8,_c),e("button",{onClick:f=>D($),disabled:m.value.includes($.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[m.value.includes($.id)?(n(),de(_(He),{key:0,class:"size-4 animate-spin"})):(n(),de(_(vt),{key:1,class:"size-4"}))],8,kc)])])])}),128)),p.value.length===0?(n(),c("div",$c,"No subdomains found")):Z("",!0)])])])])])}}},Cc={class:"min-h-screen bg-gray-100"},Tc={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},Ec={class:"px-4 py-6 sm:px-0"},Rc={class:"bg-white rounded-lg shadow p-6"},Ac={class:"text-sm text-gray-600 mb-4"},Pc={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Lc={class:"text-xs text-gray-500 mt-1"},Ic={class:"md:col-span-2"},Dc=["value"],Mc={class:"mt-4"},jc={key:0,class:"mt-4"},Uc={class:"flex items-center justify-between mb-2"},Fc={class:"flex items-center gap-3"},Vc={class:"border border-gray-300 rounded-md p-3 max-h-48 overflow-auto"},Nc={key:0,class:"text-sm text-gray-500"},zc={key:1,class:"space-y-2"},Oc=["value","onChange"],Bc={class:"mt-6"},Hc={key:0,class:"mt-4 space-y-4"},qc={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wc={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},Yc={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},Kc=["value"],Xc={class:"text-sm"},Gc={class:"space-y-3"},Qc={class:"flex items-center gap-2"},Jc={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},Zc=["onClick"],ep=["onUpdate:modelValue"],tp=["onUpdate:modelValue"],sp={class:"space-y-3"},ap={class:"flex items-center gap-2"},op={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},lp=["onClick"],np=["onUpdate:modelValue"],rp=["onUpdate:modelValue"],ip={key:1,class:"mt-4"},dp={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},up={class:"flex justify-end gap-3 mt-6"},cp=["disabled"],pp={key:0,class:"inline-flex items-center gap-2"},mp={key:1},gp={__name:"SubdomainEdit",setup(s){const t=pt(),r=wt(),d=t.params.websiteId,p=g(""),v=g(null),m=g([]),x=g([]),u=g(!1);g(""),g(""),g(null),g(!1);const o=g([]),k=g({sub:"",vps_server_id:""}),D=g("blank"),te=g(""),i=g({title:"",location:"",phone:"",galleryRaw:"",about1:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),se=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],z=g(null),ue=g(null),$=g(!1),y=g(""),f=g(""),P=ne=>ne.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"d").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),T=We(()=>P(k.value.sub||"")),S=We(()=>(T.value?`${T.value}.`:"")+p.value),C=We(()=>{const w=(te.value||"").split(`
`).length;return w>0?w:1}),pe=We(()=>{const ne=[...x.value||[]],w=new Map(ne.map(A=>[String(A.id),A])),X=A=>A.sort((b,K)=>(b.name||"").localeCompare(K.name||"")),E=A=>ne.filter(b=>String(b.parent_id)===String(A)),O=A=>!A.parent_id||!w.has(String(A.parent_id))||String(A.parent_id)===String(A.id),re=X(ne.filter(O)),Re=[],ve=(A,b)=>{Re.push({...A,depth:b}),X(E(A.id)).forEach(K=>ve(K,b+1))};return re.forEach(A=>ve(A,0)),Re}),J=ne=>{if(o.value.includes(ne)){const w=x.value.find(X=>X.id===ne);if(w&&w.parent_id){const X=E=>{if(!E)return;o.value.includes(E)||o.value.push(E);const O=x.value.find(re=>re.id===E);O&&O.parent_id&&X(O.parent_id)};X(w.parent_id)}}},W=()=>{z.value&&ue.value&&(z.value.scrollTop=ue.value.scrollTop)},xe=async()=>{const ne=(i.value.galleryRaw||"").split(`
`).map(G=>G.trim()).filter(Boolean),w=(i.value.title||"").trim(),X=["Home","Stays",w];let O=(await N.get("/templates/hotel-detail-1/index.html")).data||"",re="",Re="";try{re=(await N.get("/templates/_shared/header.html")).data||""}catch{}try{Re=(await N.get("/templates/_shared/footer.html")).data||""}catch{}re&&(O=O.replace(/<header[^>]*>[\s\S]*?<\/header>/i,re)),Re&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(O)?O=O.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,Re):/<\/body>/i.test(O)?O=O.replace(/<\/body>/i,Re+"</body>"):O+=`
`+Re);const ve=i.value.amenities||[],A=ne.map(G=>String(G).replace(/<\/script>/gi,"<\\/script>")),b={title:w||"Hotel",location:i.value.location||"",location_text:i.value.location||"",phone:i.value.phone||"",about1:i.value.about1||"",amenities:ve,faqs:i.value.faqs||[],info:i.value.info||[],gallery:A,breadcrumb_items:X.filter(Boolean)},K=`<script type="application/json" id="page-data">${JSON.stringify(b)}<\/script>`;return O=O.replace("{{GALLERY_DATA_SCRIPT}}",K),O=O.replace(/<title>[^<]*<\/title>/i,`<title>${b.title}</title>`),O},Se=()=>{i.value.faqs=[...i.value.faqs||[],{q:"",a:""}]},fe=()=>{i.value.info=[...i.value.info||[],{subject:"",description:""}]},Ce=ne=>{i.value.faqs=(i.value.faqs||[]).filter((w,X)=>X!==ne)},De=ne=>{i.value.info=(i.value.info||[]).filter((w,X)=>X!==ne)},Ve=async()=>{var ne,w,X,E,O,re,Re,ve,A,b,K,G,oe,ae,je;$.value=!0,y.value="";try{const L="Stays",Te=k.value.vps_server_id;if(!Te){y.value="Chưa chọn VPS Server",f.value="error",$.value=!1;return}const Ne={domain:S.value,type:((ne=v.value)==null?void 0:ne.type)||"html",vps_server_id:Te};let M;try{M=(await N.post("/api/websites",Ne)).data}catch(h){const Y=((X=(w=h==null?void 0:h.response)==null?void 0:w.data)==null?void 0:X.message)||((O=(E=h==null?void 0:h.response)==null?void 0:E.data)==null?void 0:O.error)||"";if(((re=h==null?void 0:h.response)==null?void 0:re.status)===409||/domain/i.test(Y)){if(M=((await N.get("/api/websites")).data||[]).find(ze=>ze.domain===S.value),!M)throw h}else throw h}let a,j=null;if(D.value==="blank")a=te.value;else{a=await xe();const h=(i.value.galleryRaw||"").split(`
`).map(Y=>Y.trim()).filter(Boolean);j={title:(i.value.title||"").trim()||"Hotel",location:i.value.location||"",location_text:i.value.location||"",phone:i.value.phone||"",about1:i.value.about1||"",amenities:i.value.amenities||[],faqs:i.value.faqs||[],info:i.value.info||[],gallery:h,breadcrumb_items:["Home","Stays",(i.value.title||"").trim()].filter(Boolean)}}const H={path:"/",filename:"index.html",title:D.value==="blank"?i.value.title||"":i.value.title,content:a};D.value!=="blank"&&(H.template_type=D.value,H.template_data=j),o.value.length>0&&(H.folder_ids=o.value);try{await N.post(`/api/websites/${M.id}/pages`,H)}catch(h){const Y=((ve=(Re=h==null?void 0:h.response)==null?void 0:Re.data)==null?void 0:ve.message)||((b=(A=h==null?void 0:h.response)==null?void 0:A.data)==null?void 0:b.error)||"";if(((K=h==null?void 0:h.response)==null?void 0:K.status)===409||/path/i.test(Y)){const ze=((await N.get(`/api/websites/${M.id}/pages`)).data||[]).find(ee=>(ee.path||"/")==="/"&&(ee.filename||"").toLowerCase()==="index.html");ze&&await N.put(`/api/pages/${ze.id}`,H)}else if(/Failed to write page/i.test(Y)){const le=`subdomainDraft:${M.id}`;localStorage.setItem(le,JSON.stringify(H))}}y.value="Subdomain created. Deploy to go online.",f.value="success",r.push(`/websites/${d}/subdomains`)}catch(L){y.value=((oe=(G=L==null?void 0:L.response)==null?void 0:G.data)==null?void 0:oe.message)||((je=(ae=L==null?void 0:L.response)==null?void 0:ae.data)==null?void 0:je.error)||"Failed to create subdomain",f.value="error"}finally{$.value=!1}},Me=async()=>{var X;const ne=await N.get(`/api/websites/${d}`);v.value=ne.data,p.value=v.value.domain;const w=await N.get("/api/vps");m.value=w.data.filter(E=>E.status==="active"),(X=v.value)!=null&&X.vps_server_id&&(k.value.vps_server_id=v.value.vps_server_id);try{const E=await N.get(`/api/websites/${d}/folders`);x.value=E.data||[]}catch(E){console.error("Failed to load folders:",E)}},Ye=async()=>{if(window.tinymce)return;const{default:ne}=await _e(async()=>{const{default:w}=await import("./tinymce.js").then(X=>X.t);return{default:w}},[]);await _e(()=>import("./tinymce-plugins.js").then(w=>w.i),[]),await _e(()=>import("./tinymce-plugins.js").then(w=>w.a),[]),await _e(()=>import("./tinymce-plugins.js").then(w=>w.q),[]),await _e(()=>import("./tinymce-skins.js").then(w=>w.s),[]),await _e(()=>import("./tinymce-skins.js").then(w=>w.c),[]),await _e(()=>import("./tinymce-skins.js").then(w=>w.a),[]),await _e(()=>import("./tinymce-plugins.js").then(w=>w.b),[]),await _e(()=>import("./tinymce-plugins.js").then(w=>w.c),[]),window.tinymce=ne},ie=async()=>{await Ye(),await Vt();const ne=document.getElementById("about1-editor-sub");ne&&(ne.value=i.value.about1||"",window.tinymce.init({selector:"#about1-editor-sub",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:w=>{w.on("Change KeyUp SetContent",()=>{i.value.about1=w.getContent()||""})}}).then(w=>{const X=w&&w[0];X&&(i.value.about1||"").trim()&&X.setContent(i.value.about1)}))};return tt(async()=>{await Me(),D.value==="hotel-detail-1"&&await ie()}),kt(D,async ne=>{if(ne==="hotel-detail-1")await ie();else if(window.tinymce){const w=window.tinymce.get("about1-editor-sub");w&&w.remove()}}),Bt(()=>{if(window.tinymce){const ne=window.tinymce.get("about1-editor-sub");ne&&ne.remove()}}),(ne,w)=>{const X=rt("router-link");return n(),c("div",Cc,[e("div",Tc,[e("div",Ec,[e("div",Rc,[w[32]||(w[32]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Create Subdomain",-1)),e("p",Ac,"Parent: "+I(p.value),1),e("form",{onSubmit:Oe(Ve,["prevent"])},[e("div",Pc,[e("div",null,[w[11]||(w[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Subdomain",-1)),U(e("input",{"onUpdate:modelValue":w[0]||(w[0]=E=>k.value.sub=E),type:"text",required:"",placeholder:"hotel",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,k.value.sub]]),e("p",Lc,"Sẽ tạo domain: "+I(S.value),1)]),e("div",Ic,[w[13]||(w[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),U(e("select",{"onUpdate:modelValue":w[1]||(w[1]=E=>k.value.vps_server_id=E),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[w[12]||(w[12]=e("option",{value:""},"Select VPS Server",-1)),(n(!0),c(he,null,we(m.value,E=>(n(),c("option",{value:E.id,key:E.id},I(E.name)+" ("+I(E.ip_address)+")",9,Dc))),128))],512),[[Ze,k.value.vps_server_id]])])]),e("div",Mc,[w[15]||(w[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),U(e("select",{"onUpdate:modelValue":w[2]||(w[2]=E=>D.value=E),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...w[14]||(w[14]=[e("option",{value:"blank"},"HTML mặc định",-1),e("option",{value:"hotel-detail-1"},"Hotel Detail 1",-1)])],512),[[Ze,D.value]])]),D.value==="hotel-detail-1"?(n(),c("div",jc,[e("div",Uc,[w[17]||(w[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Danh mục (chọn nhiều)",-1)),e("div",Fc,[V(X,{to:`/websites/${_(d)}/folders`,class:"text-sm text-primary"},{default:ke(()=>[...w[16]||(w[16]=[$e("Quản lý danh mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:w[3]||(w[3]=E=>u.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",Vc,[x.value.length===0?(n(),c("div",Nc,"Không có danh mục")):(n(),c("div",zc,[(n(!0),c(he,null,we(pe.value,E=>(n(),c("label",{key:E.id,class:"flex items-center gap-2 cursor-pointer"},[U(e("input",{type:"checkbox",value:E.id,"onUpdate:modelValue":w[4]||(w[4]=O=>o.value=O),onChange:O=>J(E.id),class:"rounded cursor-pointer"},null,40,Oc),[[At,o.value]]),e("span",{class:"text-sm",style:nt({paddingLeft:(E.depth>0?E.depth*16:0)+"px"})},I("↳ ".repeat(E.depth))+I(E.name),5)]))),128))]))])])):Z("",!0),e("div",Bc,[w[29]||(w[29]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Nội dung template",-1)),D.value==="hotel-detail-1"?(n(),c("div",Hc,[e("div",qc,[e("div",null,[w[18]||(w[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề khách sạn",-1)),U(e("input",{"onUpdate:modelValue":w[5]||(w[5]=E=>i.value.title=E),type:"text",placeholder:"Azure Breeze Resort",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.title]])]),e("div",null,[w[19]||(w[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),U(e("input",{"onUpdate:modelValue":w[6]||(w[6]=E=>i.value.location=E),type:"text",placeholder:"Sunny Isles, Florida, United States",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.location]])]),e("div",null,[w[20]||(w[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),U(e("input",{"onUpdate:modelValue":w[7]||(w[7]=E=>i.value.phone=E),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.phone]])])]),e("div",null,[w[21]||(w[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),U(e("textarea",{"onUpdate:modelValue":w[8]||(w[8]=E=>i.value.galleryRaw=E),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.galleryRaw]])]),w[27]||(w[27]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor-sub",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[w[22]||(w[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",Wc,[e("div",Yc,[(n(),c(he,null,we(se,E=>e("label",{key:E,class:"inline-flex items-center gap-2 cursor-pointer"},[U(e("input",{type:"checkbox",value:E,"onUpdate:modelValue":w[9]||(w[9]=O=>i.value.amenities=O),class:"rounded cursor-pointer border-gray-300"},null,8,Kc),[[At,i.value.amenities]]),e("span",Xc,I(E),1)])),64))])])]),e("div",Gc,[e("div",{class:"flex items-center justify-between"},[w[23]||(w[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:fe,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),c(he,null,we(i.value.info,(E,O)=>(n(),c("div",{key:O,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",Qc,[e("span",Jc,I(O+1),1),w[24]||(w[24]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:re=>De(O),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,Zc)]),U(e("input",{"onUpdate:modelValue":re=>E.subject=re,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,ep),[[Q,E.subject]]),U(e("textarea",{"onUpdate:modelValue":re=>E.description=re,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,tp),[[Q,E.description]])]))),128))]),e("div",sp,[e("div",{class:"flex items-center justify-between"},[w[25]||(w[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:Se,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),c(he,null,we(i.value.faqs,(E,O)=>(n(),c("div",{key:O,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",ap,[e("span",op,I(O+1),1),w[26]||(w[26]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:re=>Ce(O),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,lp)]),U(e("input",{"onUpdate:modelValue":re=>E.q=re,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,np),[[Q,E.q]]),U(e("textarea",{"onUpdate:modelValue":re=>E.a=re,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,rp),[[Q,E.a]])]))),128))])])):D.value==="blank"?(n(),c("div",ip,[w[28]||(w[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),e("div",dp,[e("div",{ref_key:"gutterRef",ref:z,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(n(!0),c(he,null,we(C.value,E=>(n(),c("div",{key:E,class:"px-2 text-xs text-gray-500 leading-6"},I(E),1))),128))],512),U(e("textarea",{ref_key:"codeRef",ref:ue,"onUpdate:modelValue":w[10]||(w[10]=E=>te.value=E),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:W},null,544),[[Q,te.value]])])])):Z("",!0)]),e("div",up,[V(X,{to:`/websites/${_(d)}/subdomains`,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:ke(()=>[...w[30]||(w[30]=[$e("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:$.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[$.value?(n(),c("span",pp,[V(_(He),{class:"size-4 animate-spin"}),w[31]||(w[31]=$e(" Creating... ",-1))])):(n(),c("span",mp,"Create Subdomain"))],8,cp)]),y.value?(n(),c("p",{key:1,class:Ie([f.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},I(y.value),3)):Z("",!0)],32)])])])])}}},vp=[{path:"/login",name:"Login",component:Xu},{path:"/",name:"Dashboard",component:ba},{path:"/vps",name:"VpsManagement",component:Ka},{path:"/websites",name:"WebsiteManagement",component:el},{path:"/websites/:websiteId/settings",name:"WebsiteSettings",component:zn},{path:"/websites/:websiteId/pages",name:"PagesManagement",component:Ad},{path:"/websites/:websiteId/pages/new",name:"PageCreate",component:os},{path:"/websites/:websiteId/pages/:pageId",name:"PageEdit",component:os},{path:"/websites/:websiteId/folders",name:"FoldersManagement",component:Bi},{path:"/websites/:websiteId/folders/new",name:"FolderCreate",component:ss},{path:"/websites/:websiteId/folders/:folderId",name:"FolderEdit",component:ss},{path:"/websites/:websiteId/subdomains",name:"SubdomainsManagement",component:Sc},{path:"/websites/:websiteId/subdomains/new",name:"SubdomainEdit",component:gp},{path:"/profile",name:"AdminProfile",component:lc},{path:"/monitoring",name:"Monitoring",component:pi},{path:"/settings",name:"Settings",component:id}],It=Ts({history:Es(),routes:vp}),ls=localStorage.getItem("adminToken");ls&&(N.defaults.headers.common["X-Admin-Token"]=ls);N.interceptors.response.use(s=>s,s=>{var r;if(((r=s==null?void 0:s.response)==null?void 0:r.status)===401){try{localStorage.removeItem("adminToken"),delete N.defaults.headers.common["X-Admin-Token"]}catch{}It.currentRoute.value.path!=="/login"&&It.push("/login")}return Promise.reject(s)});It.beforeEach((s,t,r)=>{const d=!!localStorage.getItem("adminToken");if(!d&&s.path!=="/login")return r("/login");if(d&&s.path==="/login")return r("/");r()});Rs(Js).use(It).mount("#app");
