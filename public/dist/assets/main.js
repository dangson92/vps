import{u as mt,a as ht,r as nt,c as d,o as a,b as C,d as K,e,f as xt,w as je,n as Ie,g as D,i as m,j as Ze,t as E,k as q,F as ve,l as fe,m as Oe,p as V,v as oe,q as We,s as ce,x as we,y as Ht,z as ot,A as Me,B as _t,C as ct,D as rs,E as zt,G as Ts,H as js,I as Es,J as Fs}from"./vendor.js";import{L as is,S as ds,G as vt,B as us,U as As,a as cs,b as Ls,c as gt,C as Ct,A as St,d as At,P as ps,T as pt,e as Re,f as kt,g as ms,F as gs,h as Rs,i as Nt,R as Ms,I as Pt,j as Ut,k as Is,l as Ps,m as Us,E as Vt,n as Jt,o as Ds,p as vs,q as zs,r as Ns,s as Vs,t as Os}from"./icons.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))g(v);new MutationObserver(v=>{for(const y of v)if(y.type==="childList")for(const f of y.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&g(f)}).observe(document,{childList:!0,subtree:!0});function c(v){const y={};return v.integrity&&(y.integrity=v.integrity),v.referrerPolicy&&(y.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?y.credentials="include":v.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function g(v){if(v.ep)return;v.ep=!0;const y=c(v);fetch(v.href,y)}})();const Bs={id:"app"},Hs={key:0,class:"min-h-screen"},qs={key:1,class:"relative flex min-h-screen w-full bg-background-light"},Ws={class:"flex w-64 flex-col border-r border-gray-200 bg-white p-4"},Ys={class:"flex flex-col gap-2"},Ks={class:"flex-1"},Xs={class:"flex items-center justify-between border-b border-gray-200 px-10 py-4 bg-white"},Js={class:"flex items-center gap-4"},Gs={class:"h-10 w-10 rounded-lg border border-gray-300 bg-gray-50 text-gray-800"},Qs={class:"p-6 lg:p-10"},Zs={__name:"App",setup(t){const s=mt(),c=ht(),g=()=>{localStorage.removeItem("adminToken"),delete D.defaults.headers.common["X-Admin-Token"],c.push("/login")};return(v,y)=>{const f=nt("router-view"),S=nt("router-link");return a(),d("div",Bs,[C(s).path==="/login"?(a(),d("div",Hs,[K(f)])):(a(),d("div",qs,[e("aside",Ws,[y[6]||(y[6]=xt('<div class="flex items-center gap-3 mb-4"><div class="rounded-full size-10 bg-primary/10"></div><div class="flex flex-col"><h1 class="text-gray-900 text-base font-medium">Admin User</h1><p class="text-gray-500 text-sm">admin@vps.com</p></div></div>',1)),e("nav",Ys,[K(S,{to:"/",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":C(s).path==="/","hover:bg-gray-100 text-gray-800":C(s).path!=="/"}])},{default:je(()=>[K(C(is),{class:"size-4"}),y[0]||(y[0]=e("span",null,"Dashboard",-1))]),_:1},8,["class"]),K(S,{to:"/vps",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":C(s).path.startsWith("/vps"),"hover:bg-gray-100 text-gray-800":!C(s).path.startsWith("/vps")}])},{default:je(()=>[K(C(ds),{class:"size-4"}),y[1]||(y[1]=e("span",null,"Servers",-1))]),_:1},8,["class"]),K(S,{to:"/websites",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":C(s).path.startsWith("/websites"),"hover:bg-gray-100 text-gray-800":!C(s).path.startsWith("/websites")}])},{default:je(()=>[K(C(vt),{class:"size-4"}),y[2]||(y[2]=e("span",null,"Websites",-1))]),_:1},8,["class"]),K(S,{to:"/monitoring",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":C(s).path.startsWith("/monitoring"),"hover:bg-gray-100 text-gray-800":!C(s).path.startsWith("/monitoring")}])},{default:je(()=>[K(C(us),{class:"size-4"}),y[3]||(y[3]=e("span",null,"Monitoring",-1))]),_:1},8,["class"]),K(S,{to:"/profile",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":C(s).path.startsWith("/profile"),"hover:bg-gray-100 text-gray-800":!C(s).path.startsWith("/profile")}])},{default:je(()=>[K(C(As),{class:"size-4"}),y[4]||(y[4]=e("span",null,"Profile",-1))]),_:1},8,["class"]),K(S,{to:"/settings",class:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-800 hover:bg-gray-100"},{default:je(()=>[K(C(cs),{class:"size-4"}),y[5]||(y[5]=e("span",null,"Settings",-1))]),_:1})])]),e("main",Ks,[e("header",Xs,[y[8]||(y[8]=e("h2",{class:"text-lg font-bold"},"Tổng quan Hệ thống",-1)),e("div",Js,[y[7]||(y[7]=e("input",{class:"form-input h-10 w-64 rounded-lg border border-gray-300 bg-gray-50 px-4",placeholder:"Search"},null,-1)),e("button",Gs,[K(C(Ls),{class:"mx-auto size-5"})]),e("button",{onClick:g,class:"h-10 px-3 rounded-lg border border-gray-300 bg-white text-red-600"}," Logout ")])]),e("div",Qs,[K(f)])])]))])}}},ea={class:"min-h-screen"},ta={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},sa={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},aa={class:"p-6 bg-white border-b border-gray-200"},la={class:"rounded-xl bg-gray-50 p-6 border border-gray-200"},oa={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},na={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},ra={class:"flex items-center justify-between text-gray-500"},ia={class:"text-gray-900 tracking-tight text-3xl font-bold"},da={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},ua={class:"flex items-center justify-between text-gray-500"},ca={class:"text-gray-900 tracking-tight text-3xl font-bold"},pa={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},ma={class:"flex items-center justify-between text-gray-500"},ga={class:"text-red-500 tracking-tight text-3xl font-bold"},va={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},fa={class:"flex items-center justify-between text-gray-500"},ba={class:"text-gray-900 tracking-tight text-3xl font-bold"},ya={__name:"Dashboard",setup(t){const s=m({vpsServers:0,websites:0,onlineWebsites:0,sslEnabled:0});return Ze(async()=>{try{const[g,v]=await Promise.all([D.get("/api/vps"),D.get("/api/websites")]),y=Array.isArray(g.data)?g.data:[],f=Array.isArray(v.data)?v.data:[];s.value.vpsServers=y.length,s.value.websites=f.length,s.value.onlineWebsites=f.filter(S=>S.status==="deployed").length,s.value.sslEnabled=f.filter(S=>S.ssl_enabled).length}catch(g){console.error("Failed to fetch stats:",g)}}),(g,v)=>(a(),d("div",ea,[e("main",null,[e("div",ta,[e("div",sa,[e("div",aa,[v[4]||(v[4]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Tổng quan Hệ thống",-1)),e("div",la,[e("div",oa,[e("div",na,[e("div",ra,[v[0]||(v[0]=e("p",{class:"text-base font-medium text-gray-800"},"Máy chủ VPS",-1)),K(C(ds),{class:"h-6 w-6 text-gray-600"})]),e("p",ia,E(s.value.vpsServers),1)]),e("div",da,[e("div",ua,[v[1]||(v[1]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web",-1)),K(C(vt),{class:"h-6 w-6 text-gray-600"})]),e("p",ca,E(s.value.websites),1)]),e("div",pa,[e("div",ma,[v[2]||(v[2]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web trực tuyến",-1)),K(C(us),{class:"h-6 w-6 text-red-500"})]),e("p",ga,E(s.value.onlineWebsites),1)]),e("div",va,[e("div",fa,[v[3]||(v[3]=e("p",{class:"text-base font-medium text-gray-800"},"SSL được bật",-1)),K(C(gt),{class:"h-6 w-6 text-gray-600"})]),e("p",ba,E(s.value.sslEnabled),1)])])]),v[5]||(v[5]=xt('<h2 class="text-gray-900 text-[22px] font-bold tracking-[-0.015em] pb-3 pt-10">Hoạt động gần đây</h2><div class="rounded-xl border border-gray-200 bg-white overflow-hidden"><table class="w-full"><thead><tr class="bg-gray-50"><th class="px-6 py-4 text-left text-gray-600 w-[15%] text-sm font-medium">Hoạt động</th><th class="px-6 py-4 text-left text-gray-600 w-[20%] text-sm font-medium">Người dùng</th><th class="px-6 py-4 text-left text-gray-600 w-[40%] text-sm font-medium">Đối tượng</th><th class="px-6 py-4 text-left text-gray-600 w-[25%] text-sm font-medium">Thời gian</th></tr></thead><tbody class="divide-y divide-gray-200"><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-700">Tạo</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">admin</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;web-server-01&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">5 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700">Thêm</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">hệ thống</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">trang web &#39;example.com&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">15 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-yellow-100 px-3 py-1 text-xs font-medium text-yellow-800">Khởi động lại</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">dev_user</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;db-server-02&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">1 giờ trước</td></tr></tbody></table></div>',2))])])])])]))}},ha={class:"min-h-screen bg-gray-100"},xa={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},wa={class:"px-4 py-6 sm:px-0"},_a={class:"flex justify-between items-center mb-6"},ka={class:"bg-white shadow overflow-hidden sm:rounded-md"},$a={class:"divide-y divide-gray-200"},Ca={class:"flex items-center justify-between"},Sa={class:"flex-1"},Ta={class:"text-lg font-medium text-gray-900"},ja={class:"text-sm text-gray-500"},Ea={class:"mt-2 flex items-center space-x-4 text-sm text-gray-500"},Fa={class:"flex items-center space-x-2"},Aa=["onClick"],La=["onClick"],Ra={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},Ma={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ia={class:"text-lg font-medium text-gray-900 mb-4"},Pa={class:"mb-4"},Ua={class:"mb-4"},Da={class:"mb-4"},za={class:"mb-4"},Na={class:"mb-4"},Va={class:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-2"},Oa={key:0,class:"mb-4"},Ba={class:"mt-1 flex gap-2"},Ha=["value"],qa={class:"mb-4"},Wa={class:"flex justify-end space-x-3"},Ya={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},Ka={key:1,class:"fixed bottom-4 right-4 z-50"},Xa={__name:"VpsManagement",setup(t){const s=m(""),c=m(""),g=m([]),v=m(!1),y=m(!1),f=m(null),S=m(""),$=m({name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:"",status:"inactive"}),o=async()=>{try{const z=await D.get("/api/vps");g.value=z.data}catch{s.value="Failed to fetch VPS servers",c.value="error"}},k=z=>{if(!z)return"";let w=String(z).trim();return w=w.replace(/^https?:\/\//i,""),w=w.split("/")[0],w=w.split(":")[0],w.trim()},M=z=>{var x;const w=((x=z==null?void 0:z.target)==null?void 0:x.value)||"";w&&($.value.ssh_key_path=w)},J=async()=>{var z,w,x,P,R,W;try{if($.value.ip_address=k($.value.ip_address),$.value.ssh_key_path=($.value.ssh_key_path||"").trim(),y.value)await D.put(`/api/vps/${f.value.id}`,$.value),s.value="VPS server updated successfully",c.value="success";else{const _e=(await D.post("/api/vps",$.value)).data;$.value.status&&$.value.status!=="inactive"&&await D.put(`/api/vps/${_e.id}`,{status:$.value.status}),s.value="VPS server created successfully",c.value="success"}T(),o()}catch(ae){s.value=((w=(z=ae==null?void 0:ae.response)==null?void 0:z.data)==null?void 0:w.message)||((P=(x=ae==null?void 0:ae.response)==null?void 0:x.data)==null?void 0:P.error)||((W=(R=ae==null?void 0:ae.response)==null?void 0:R.data)==null?void 0:W.errors)&&Object.values(ae.response.data.errors).flat().join(", ")||"Failed to save VPS server",c.value="error"}},u=z=>{f.value=z,$.value={...z},y.value=!0,S.value=z.worker_key||""},se=async z=>{if(confirm(`Are you sure you want to delete ${z.name}?`))try{await D.delete(`/api/vps/${z.id}`),s.value="VPS server deleted successfully",c.value="success",o()}catch{s.value="Failed to delete VPS server",c.value="error"}},T=()=>{v.value=!1,y.value=!1,f.value=null,$.value={name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:""},S.value=""},B=()=>{S.value&&(navigator.clipboard.writeText(S.value),s.value="Worker key copied",c.value="success")};return Ze(o),(z,w)=>(a(),d("div",ha,[e("div",xa,[e("div",wa,[e("div",_a,[w[8]||(w[8]=e("h1",{class:"text-3xl font-bold text-gray-900"},"VPS Servers",-1)),e("button",{onClick:w[0]||(w[0]=x=>v.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Add VPS Server ")]),e("div",ka,[e("ul",$a,[(a(!0),d(ve,null,fe(g.value,x=>(a(),d("li",{key:x.id,class:"px-6 py-4"},[e("div",Ca,[e("div",Sa,[e("h3",Ta,E(x.name),1),e("p",ja,E(x.ip_address),1),e("div",Ea,[e("span",null,"SSH Port: "+E(x.ssh_port),1),e("span",null,"User: "+E(x.ssh_user),1),e("span",null,"Websites: "+E(x.websites_count),1)])]),e("div",Fa,[e("span",{class:Ie(["inline-flex items-center gap-1",{"text-green-600":x.status==="active","text-red-600":x.status==="inactive","text-yellow-600":x.status==="error"}])},[x.status==="active"?(a(),ce(C(Ct),{key:0,class:"size-4"})):x.status==="error"?(a(),ce(C(St),{key:1,class:"size-4"})):(a(),ce(C(At),{key:2,class:"size-4"})),we(" "+E(x.status),1)],2),e("button",{onClick:P=>u(x),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},[K(C(ps),{class:"size-4"})],8,Aa),e("button",{onClick:P=>se(x),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50",title:"Delete"},[K(C(pt),{class:"size-4"})],8,La)])])]))),128))])])])]),v.value||y.value?(a(),d("div",Ra,[e("div",Ma,[e("h2",Ia,E(y.value?"Edit VPS Server":"Add VPS Server"),1),e("form",{onSubmit:Oe(J,["prevent"])},[e("div",Pa,[w[9]||(w[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),V(e("input",{"onUpdate:modelValue":w[1]||(w[1]=x=>$.value.name=x),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,$.value.name]])]),e("div",Ua,[w[10]||(w[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"IP Address / Hostname",-1)),V(e("input",{"onUpdate:modelValue":w[2]||(w[2]=x=>$.value.ip_address=x),type:"text",required:"",placeholder:"e.g. 203.0.113.10 or worker.example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,$.value.ip_address]])]),e("div",Da,[w[11]||(w[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH User",-1)),V(e("input",{"onUpdate:modelValue":w[3]||(w[3]=x=>$.value.ssh_user=x),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,$.value.ssh_user]])]),e("div",za,[w[12]||(w[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Port",-1)),V(e("input",{"onUpdate:modelValue":w[4]||(w[4]=x=>$.value.ssh_port=x),type:"number",required:"",min:"1",max:"65535",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,$.value.ssh_port,void 0,{number:!0}]])]),e("div",Na,[w[14]||(w[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Key Path",-1)),e("div",Va,[V(e("input",{"onUpdate:modelValue":w[5]||(w[5]=x=>$.value.ssh_key_path=x),type:"text",placeholder:"/path/to/ssh/key",class:"block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,$.value.ssh_key_path]]),e("select",{onChange:w[6]||(w[6]=x=>M(x)),class:"block w-full border-gray-300 rounded-md shadow-sm"},[...w[13]||(w[13]=[xt('<option value="">Chọn nhanh đường dẫn</option><option value="/root/.ssh/id_rsa">/root/.ssh/id_rsa</option><option value="/root/.ssh/id_ed25519">/root/.ssh/id_ed25519</option><option value="/home/ubuntu/.ssh/id_rsa">/home/ubuntu/.ssh/id_rsa</option><option value="/home/ubuntu/.ssh/id_ed25519">/home/ubuntu/.ssh/id_ed25519</option><option value="/home/ec2-user/.ssh/id_rsa">/home/ec2-user/.ssh/id_rsa</option><option value="/home/ec2-user/.ssh/id_ed25519">/home/ec2-user/.ssh/id_ed25519</option><option value="/home/admin/.ssh/id_rsa">/home/admin/.ssh/id_rsa</option><option value="/home/admin/.ssh/id_ed25519">/home/admin/.ssh/id_ed25519</option>',9)])],32)])]),y.value?(a(),d("div",Oa,[w[15]||(w[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Worker Key",-1)),e("div",Ba,[e("input",{value:S.value,readonly:"",class:"flex-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Ha),e("button",{type:"button",onClick:B,class:"px-3 py-2 rounded-md border border-gray-300 bg-gray-50"},"Copy")])])):q("",!0),e("div",qa,[w[17]||(w[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),V(e("select",{"onUpdate:modelValue":w[7]||(w[7]=x=>$.value.status=x),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...w[16]||(w[16]=[e("option",{value:"active"},"active",-1),e("option",{value:"inactive"},"inactive",-1),e("option",{value:"error"},"error",-1)])],512),[[We,$.value.status]])]),e("div",Wa,[e("button",{type:"button",onClick:T,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",Ya,E(y.value?"Update":"Create"),1)])],32)])])):q("",!0),s.value?(a(),d("div",Ka,[e("div",{class:Ie([c.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},E(s.value),3)])):q("",!0)]))}},Ja={class:"min-h-screen bg-gray-100"},Ga={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Qa={class:"px-4 py-6 sm:px-0"},Za={key:0,class:"mb-4"},el={class:"flex justify-between items-center mb-6"},tl={class:"bg-white shadow sm:rounded-md"},sl={class:"divide-y divide-gray-200"},al={class:"flex items-center justify-between"},ll={class:"flex-1"},ol={class:"flex items-center"},nl={class:"text-lg font-medium text-gray-900"},rl={class:"text-sm text-gray-500 mt-1"},il={class:"mt-2 flex items-center space-x-4 text-sm"},dl=["title"],ul={class:"flex items-center space-x-2"},cl=["href"],pl=["href"],ml=["onClick","disabled"],gl=["onClick","disabled"],vl=["onClick","disabled"],fl={key:2,class:"relative redeploy-dropdown-container"},bl=["onClick","disabled"],yl={key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50"},hl={class:"py-1"},xl=["onClick"],wl=["onClick"],_l=["onClick"],kl=["onClick","disabled"],$l={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},Cl={class:"bg-white rounded-lg p-6 w-full max-w-md"},Sl={key:0,class:"mb-4 text-sm text-red-600"},Tl={class:"mb-4"},jl={class:"mb-4"},El={class:"mb-4"},Fl=["value"],Al={class:"mb-4"},Ll=["value"],Rl={key:0,class:"mb-4"},Ml={key:1,class:"mb-4"},Il={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Pl={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ul={class:"mb-4"},Dl={class:"space-y-2"},zl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Nl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Vl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Ol={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Bl={class:"flex justify-end space-x-3"},Hl=["disabled"],ql={key:2,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Wl={class:"bg-white rounded-lg p-6 w-full max-w-md"},Yl={class:"mb-4"},Kl={class:"space-y-2"},Xl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Jl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Gl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Ql={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Zl={class:"flex justify-end space-x-3"},eo=["disabled"],to={key:0,class:"fixed bottom-4 right-4 z-50"},so={__name:"WebsiteManagement",setup(t){const s=m([]),c=m([]),g=m(!1);m(!1),m(!1),m(!1),m(null),m([]),m(null);const v=m(""),y=m(""),f=m(""),S=m(""),$=m({});let o=null;m(!1);const k=m([]),M=m([]),J=m([]),u=m([]),se=m({}),T=m([]),B=m(!1),z=m(!1),w=m(null),x=m({template_names:["all"]}),P=m({template_names:["all"]}),R=(b,p="success")=>{f.value=b,S.value=p,setTimeout(()=>{f.value=""},3e3)},W=m({domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",cloudflare_account_id:null,wordpress_template:"basic"}),ae=m([]);m({path:"",filename:"",title:"",content:""});const _e=async()=>{try{const p=(await D.get("/api/websites")).data;p.forEach(ue=>{const re=$.value[ue.id];re&&re!==ue.status&&(ue.status==="deployed"?R(`${ue.domain} deployed`,"success"):ue.status==="error"&&R(`${ue.domain} deploy failed`,"error")),$.value[ue.id]=ue.status});const Z=new Set(p.map(ue=>ue.domain)),ie=ue=>{for(const re of Z)if(re!==ue&&ue.endsWith("."+re))return!0;return!1};s.value=p.filter(ue=>!ie(ue.domain))}catch{R("Failed to fetch websites","error")}},pe=async()=>{try{const b=await D.get("/api/vps");c.value=b.data.filter(p=>p.status==="active")}catch{}},ye=async()=>{var b,p,Z,ie;try{await D.post("/api/websites",W.value),R("Website created","success"),v.value="Website created",y.value="success",Le(),await _e()}catch(ue){const re=((p=(b=ue==null?void 0:ue.response)==null?void 0:b.data)==null?void 0:p.message)||((ie=(Z=ue==null?void 0:ue.response)==null?void 0:Z.data)==null?void 0:ie.error)||"Failed to create website";R(re,"error"),v.value=re,y.value="error"}},Ue=async b=>{var p,Z,ie,ue;try{b.status="deploying",k.value=[...k.value,b.id],await D.post(`/api/websites/${b.id}/deploy`),R("Deployment started","success"),v.value="Deployment started",y.value="success",await _e()}catch(re){const Ce=((Z=(p=re==null?void 0:re.response)==null?void 0:p.data)==null?void 0:Z.message)||((ue=(ie=re==null?void 0:re.response)==null?void 0:ie.data)==null?void 0:ue.error)||"Failed to deploy website";R(Ce,"error"),v.value=Ce,y.value="error",await _e()}finally{k.value=k.value.filter(re=>re!==b.id)}},Ae=async b=>{var p,Z,ie,ue;try{M.value=[...M.value,b.id],await D.post(`/api/websites/${b.id}/ssl`),R("SSL generation started","success"),v.value="SSL generation started",y.value="success",await _e()}catch(re){const Ce=((Z=(p=re==null?void 0:re.response)==null?void 0:p.data)==null?void 0:Z.message)||((ue=(ie=re==null?void 0:re.response)==null?void 0:ie.data)==null?void 0:ue.error)||"Failed to enable SSL";R(Ce,"error"),v.value=Ce,y.value="error"}finally{M.value=M.value.filter(re=>re!==b.id)}},he=async b=>{var p,Z,ie,ue;if(confirm(`Are you sure you want to delete ${b.domain}?`))try{u.value=[...u.value,b.id],await D.delete(`/api/websites/${b.id}`),R("Website deleted","success"),await _e()}catch(re){const Ce=((Z=(p=re==null?void 0:re.response)==null?void 0:p.data)==null?void 0:Z.message)||((ue=(ie=re==null?void 0:re.response)==null?void 0:ie.data)==null?void 0:ue.error)||"Failed to delete website";R(Ce,"error")}finally{u.value=u.value.filter(re=>re!==b.id)}},xe=async b=>{var p,Z,ie,ue;try{J.value=[...J.value,b.id],await D.post(`/api/websites/${b.id}/deactivate`),R("Website deactivated","success"),v.value="Website deactivated",y.value="success",_e()}catch(re){const Ce=((Z=(p=re==null?void 0:re.response)==null?void 0:p.data)==null?void 0:Z.message)||((ue=(ie=re==null?void 0:re.response)==null?void 0:ie.data)==null?void 0:ue.error)||"Failed to deactivate website";R(Ce,"error"),v.value=Ce,y.value="error"}finally{J.value=J.value.filter(re=>re!==b.id)}};m([]);const Le=()=>{g.value=!1,W.value={domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",wordpress_template:"basic"}},ze=async()=>{try{const{data:b}=await D.get("/api/cloudflare-accounts");ae.value=b;const p=b.find(Z=>Z.is_default);p&&!W.value.cloudflare_account_id&&(W.value.cloudflare_account_id=p.id)}catch(b){console.error("Failed to load Cloudflare accounts",b)}};Ze(()=>{_e(),pe(),ze(),o=setInterval(_e,3e3),document.addEventListener("click",b=>{b.target.closest(".redeploy-dropdown-container")||(se.value={})})}),Ht(()=>{o&&clearInterval(o)});const Ne=b=>{const p=`/preview/${b.id}`,Z=localStorage.getItem("adminToken")||"",ie=new URLSearchParams;Z&&ie.set("token",Z),ie.set("hide_preview_bar","1");const ue=ie.toString();return ue?`${p}?${ue}`:p},Be=b=>{se.value={...se.value,[b]:!se.value[b]}},me=async b=>{var p,Z;try{T.value=[...T.value,b.id],se.value[b.id]=!1;const ie=await D.post(`/api/websites/${b.id}/redeploy-pages`);R(ie.data.message||"Pages redeployed successfully","success")}catch(ie){const ue=((Z=(p=ie==null?void 0:ie.response)==null?void 0:p.data)==null?void 0:Z.message)||"Failed to redeploy pages";R(ue,"error")}finally{T.value=T.value.filter(ie=>ie!==b.id)}},ne=b=>{w.value=b,se.value[b.id]=!1,B.value=!0},j=b=>{w.value=b,se.value[b.id]=!1,z.value=!0},ee=async()=>{var b,p;if(w.value)try{T.value=[...T.value,w.value.id];const Z=await D.post(`/api/websites/${w.value.id}/redeploy-template-assets`,x.value);R(Z.data.message||"Template assets deployed","success"),B.value=!1}catch(Z){const ie=((p=(b=Z==null?void 0:Z.response)==null?void 0:b.data)==null?void 0:p.message)||"Failed to deploy template assets";R(ie,"error")}finally{T.value=T.value.filter(Z=>Z!==w.value.id)}},I=async()=>{var b,p;if(w.value)try{T.value=[...T.value,w.value.id];const Z={template_names:(P.value.template_names||[]).length===0?[]:P.value.template_names},ie=await D.post(`/api/websites/${w.value.id}/update-pages-template`,Z);R(ie.data.message||"Header/footer updated","success"),z.value=!1}catch(Z){const ie=((p=(b=Z==null?void 0:Z.response)==null?void 0:b.data)==null?void 0:p.message)||"Failed to update header/footer";R(ie,"error")}finally{T.value=T.value.filter(Z=>Z!==w.value.id)}},X=b=>{const p=x.value.template_names||[];p.indexOf(b)===-1?x.value.template_names=[...p,b]:x.value.template_names=p.filter(ie=>ie!==b),console.log("Redeploy templates:",x.value.template_names)},h=b=>{const p=P.value.template_names||[];p.indexOf(b)===-1?P.value.template_names=[...p,b]:P.value.template_names=p.filter(ie=>ie!==b),console.log("Update templates:",P.value.template_names)},r=b=>(x.value.template_names||[]).includes(b),_=b=>(P.value.template_names||[]).includes(b),l=()=>{B.value=!1,w.value=null,x.value={template_names:["all"]}},A=()=>{z.value=!1,w.value=null,P.value={template_names:["all"]}};return(b,p)=>{var ie,ue,re,Ce;const Z=nt("router-link");return a(),d(ve,null,[e("div",Ja,[e("div",Ga,[e("div",Qa,[v.value?(a(),d("div",Za,[e("div",{class:Ie([y.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},E(v.value),3)])):q("",!0),e("div",el,[p[15]||(p[15]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Websites",-1)),e("button",{onClick:p[0]||(p[0]=N=>g.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Create Website ")]),e("div",tl,[e("ul",sl,[(a(!0),d(ve,null,fe(s.value,N=>{var H;return a(),d("li",{key:N.id,class:"px-6 py-4 relative overflow-visible"},[e("div",al,[e("div",ll,[e("div",ol,[e("h3",nl,E(N.domain),1),e("span",{class:Ie([{"bg-blue-100 text-blue-800":N.type==="html","bg-green-100 text-green-800":N.type==="wordpress","bg-purple-100 text-purple-800":N.type==="laravel1"},"ml-2 px-2 py-1 text-xs font-medium rounded-full"])},E(N.type),3)]),e("p",rl," VPS: "+E(((H=N.vps_server)==null?void 0:H.name)||"N/A"),1),e("div",il,[e("span",{class:Ie(["inline-flex items-center",{"text-blue-600":N.status==="deploying","text-green-600":N.status==="deployed","text-gray-600":N.status==="pending"||N.status==="draft","text-orange-600":N.status==="suspended","text-red-600":N.status==="error"}]),title:N.status},[N.status==="deploying"?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):N.status==="deployed"?(a(),ce(C(Ct),{key:1,class:"size-4"})):N.status==="pending"||N.status==="draft"?(a(),ce(C(At),{key:2,class:"size-4"})):N.status==="suspended"?(a(),ce(C(kt),{key:3,class:"size-4"})):(a(),ce(C(St),{key:4,class:"size-4"}))],10,dl),e("span",{class:Ie(["inline-flex items-center gap-1",N.ssl_enabled?"text-green-600":"text-gray-400"])},[N.ssl_enabled?(a(),ce(C(gt),{key:0,class:"size-4"})):(a(),ce(C(ms),{key:1,class:"size-4"}))],2)])]),e("div",ul,[e("a",{href:(N.ssl_enabled?"https://":"http://")+N.domain,target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Website"},[K(C(vt),{class:"size-4"})],8,cl),K(Z,{to:`/websites/${N.id}/pages`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:je(()=>[K(C(gs),{class:"size-4"})]),_:1},8,["to"]),K(Z,{to:`/websites/${N.id}/folders`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-amber-600 hover:bg-gray-50",title:"Manage Categories"},{default:je(()=>[K(C(Rs),{class:"size-4"})]),_:1},8,["to"]),K(Z,{to:`/websites/${N.id}/subdomains`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"Manage Subdomains"},{default:je(()=>[K(C(is),{class:"size-4"})]),_:1},8,["to"]),K(Z,{to:`/websites/${N.id}/settings`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Website Settings"},{default:je(()=>[K(C(cs),{class:"size-4"})]),_:1},8,["to"]),e("a",{href:Ne(N),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[K(C(At),{class:"size-4"})],8,pl),e("button",{onClick:i=>Ue(N),disabled:N.status==="deploying"||N.status==="deployed"||k.value.includes(N.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[k.value.includes(N.id)?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(Nt),{key:1,class:"size-4"}))],8,ml),N.status==="deployed"?(a(),d("button",{key:0,onClick:i=>Ae(N),disabled:M.value.includes(N.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[M.value.includes(N.id)?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(gt),{key:1,class:"size-4"}))],8,gl)):q("",!0),N.status==="deployed"||N.status==="error"?(a(),d("button",{key:1,onClick:i=>xe(N),disabled:J.value.includes(N.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[J.value.includes(N.id)?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(kt),{key:1,class:"size-4"}))],8,vl)):q("",!0),N.status==="deployed"&&N.type==="laravel1"?(a(),d("div",fl,[e("button",{onClick:i=>Be(N.id),disabled:T.value.includes(N.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-teal-600 hover:bg-gray-50 disabled:text-gray-400",title:"Redeploy Options"},[T.value.includes(N.id)?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(Ms),{key:1,class:"size-4"}))],8,bl),se.value[N.id]?(a(),d("div",yl,[e("div",hl,[e("button",{onClick:i=>me(N),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy All Pages ",8,xl),e("button",{onClick:i=>ne(N),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy Template Assets ",8,wl),e("button",{onClick:i=>j(N),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Update Pages Template ",8,_l)])])):q("",!0)])):q("",!0),e("button",{onClick:i=>he(N),disabled:u.value.includes(N.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[u.value.includes(N.id)?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(pt),{key:1,class:"size-4"}))],8,kl)])])])}),128))])])])]),g.value?(a(),d("div",$l,[e("div",Cl,[p[30]||(p[30]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create Website",-1)),c.value.length===0?(a(),d("div",Sl,"Chưa có VPS ở trạng thái active. Vào mục Servers để đặt trạng thái active cho VPS hiện tại.")):q("",!0),e("form",{onSubmit:Oe(ye,["prevent"])},[e("div",Tl,[p[16]||(p[16]=e("label",{class:"block text-sm font-medium text-gray-700"},"Domain",-1)),V(e("input",{"onUpdate:modelValue":p[1]||(p[1]=N=>W.value.domain=N),type:"text",required:"",placeholder:"example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,W.value.domain]])]),e("div",jl,[p[18]||(p[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Type",-1)),V(e("select",{"onUpdate:modelValue":p[2]||(p[2]=N=>W.value.type=N),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...p[17]||(p[17]=[e("option",{value:"html"},"HTML Website",-1),e("option",{value:"wordpress"},"WordPress",-1),e("option",{value:"laravel1"},"Laravel 1",-1)])],512),[[We,W.value.type]])]),e("div",El,[p[20]||(p[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),V(e("select",{"onUpdate:modelValue":p[3]||(p[3]=N=>W.value.vps_server_id=N),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[p[19]||(p[19]=e("option",{value:""},"Select VPS Server",-1)),(a(!0),d(ve,null,fe(c.value,N=>(a(),d("option",{key:N.id,value:N.id},E(N.name)+" ("+E(N.ip_address)+") ",9,Fl))),128))],512),[[We,W.value.vps_server_id]])]),e("div",Al,[p[22]||(p[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Cloudflare Account",-1)),V(e("select",{"onUpdate:modelValue":p[4]||(p[4]=N=>W.value.cloudflare_account_id=N),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[p[21]||(p[21]=e("option",{value:null},"Select Account (optional)",-1)),(a(!0),d(ve,null,fe(ae.value,N=>(a(),d("option",{key:N.id,value:N.id},E(N.name)+" - "+E(N.email),9,Ll))),128))],512),[[We,W.value.cloudflare_account_id]]),p[23]||(p[23]=e("p",{class:"mt-1 text-xs text-gray-500"},"Chọn Cloudflare account để quản lý DNS và SSL cho website này",-1))]),W.value.type==="wordpress"?(a(),d("div",Rl,[p[25]||(p[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"WordPress Template",-1)),V(e("select",{"onUpdate:modelValue":p[5]||(p[5]=N=>W.value.wordpress_template=N),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...p[24]||(p[24]=[e("option",{value:"basic"},"Basic WordPress",-1),e("option",{value:"business"},"Business Theme",-1),e("option",{value:"ecommerce"},"E-commerce Theme",-1)])],512),[[We,W.value.wordpress_template]])])):q("",!0),W.value.type==="laravel1"?(a(),d("div",Ml,[p[27]||(p[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template Package",-1)),V(e("select",{"onUpdate:modelValue":p[6]||(p[6]=N=>W.value.template_package=N),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...p[26]||(p[26]=[e("option",{value:"laravel-hotel-1"},"Hotel Template",-1)])],512),[[We,W.value.template_package]]),p[28]||(p[28]=e("p",{class:"mt-1 text-xs text-gray-500"},"Includes home, listing, and detail pages with shared assets",-1))])):q("",!0),e("div",{class:"flex justify-end space-x-3"},[e("button",{type:"button",onClick:Le,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),p[29]||(p[29]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Create ",-1))])],32)])])):q("",!0),B.value?(a(),d("div",Il,[e("div",Pl,[p[37]||(p[37]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Redeploy Template Assets",-1)),e("div",Ul,[p[35]||(p[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",Dl,[e("div",{class:"flex items-center cursor-pointer",onClick:p[7]||(p[7]=N=>X("all"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:r("all")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[r("all")?(a(),d("span",zl,"✓")):q("",!0)],4),p[31]||(p[31]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[8]||(p[8]=N=>X("home"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:r("home")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[r("home")?(a(),d("span",Nl,"✓")):q("",!0)],4),p[32]||(p[32]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[9]||(p[9]=N=>X("listing"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:r("listing")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[r("listing")?(a(),d("span",Vl,"✓")):q("",!0)],4),p[33]||(p[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[10]||(p[10]=N=>X("detail"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:r("detail")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[r("detail")?(a(),d("span",Ol,"✓")):q("",!0)],4),p[34]||(p[34]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),p[38]||(p[38]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-blue-800"}," Deploys CSS/JS files from the selected templates to all pages. Use this when you update template scripts or styles. ")],-1)),e("div",Bl,[e("button",{type:"button",onClick:l,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:ee,disabled:T.value.includes((ie=w.value)==null?void 0:ie.id),class:"px-3 py-2 bg-teal-600 text-white text-sm rounded-md hover:bg-teal-700 disabled:opacity-50 flex items-center gap-2"},[T.value.includes((ue=w.value)==null?void 0:ue.id)?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):q("",!0),p[36]||(p[36]=we(" Deploy Assets ",-1))],8,Hl)])])])):q("",!0),z.value?(a(),d("div",ql,[e("div",Wl,[p[45]||(p[45]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Update Pages Template",-1)),e("div",Yl,[p[43]||(p[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",Kl,[e("div",{class:"flex items-center cursor-pointer",onClick:p[11]||(p[11]=N=>h("all"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:_("all")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[_("all")?(a(),d("span",Xl,"✓")):q("",!0)],4),p[39]||(p[39]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[12]||(p[12]=N=>h("home"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:_("home")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[_("home")?(a(),d("span",Jl,"✓")):q("",!0)],4),p[40]||(p[40]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[13]||(p[13]=N=>h("listing"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:_("listing")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[_("listing")?(a(),d("span",Gl,"✓")):q("",!0)],4),p[41]||(p[41]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[14]||(p[14]=N=>h("detail"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:_("detail")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[_("detail")?(a(),d("span",Ql,"✓")):q("",!0)],4),p[42]||(p[42]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),p[46]||(p[46]=e("div",{class:"bg-purple-50 border border-purple-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-purple-800"},[we(" Cập nhật phần header/footer cho "),e("strong",null,"các trang đang dùng template đã chọn"),we(", sau đó tự động deploy các trang đó. Tính năng này "),e("strong",null,"không"),we(' cập nhật CSS/JS (dùng mục "Redeploy Template Assets" cho CSS/JS). Với website chính, hệ thống sẽ xếp lịch redeploy Trang chủ và các trang Category liên quan. ')])],-1)),e("div",Zl,[e("button",{type:"button",onClick:A,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:I,disabled:T.value.includes((re=w.value)==null?void 0:re.id),class:"px-3 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2"},[T.value.includes((Ce=w.value)==null?void 0:Ce.id)?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):q("",!0),p[44]||(p[44]=we(" Update header/footer ",-1))],8,eo)])])])):q("",!0)]),f.value?(a(),d("div",to,[e("div",{class:Ie([S.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},E(f.value),3)])):q("",!0)],64)}}},ao={class:"min-h-screen bg-gray-100"},lo={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},oo={class:"px-4 py-6 sm:px-0"},no={class:"flex items-center justify-between mb-6"},ro={class:"text-3xl font-bold text-gray-900"},io={key:0,class:"ml-2 text-lg text-gray-500"},uo={key:0,class:"mb-4"},co={key:1,class:"text-gray-600"},po={key:2,class:"mb-4"},mo={class:"inline-flex rounded-md shadow-sm",role:"group"},go={key:3,class:"bg-white shadow sm:rounded-md p-6 space-y-6"},vo={key:0,class:"space-y-6"},fo=["value"],bo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},yo={class:"mt-2 flex items-center gap-4"},ho={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},xo=["src"],wo={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},_o={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},ko={class:"mt-2 flex items-center gap-4"},$o={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},Co=["src"],So={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},To={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},jo={class:"mt-2 flex items-center gap-4"},Eo={class:"h-10 w-10 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},Fo=["src"],Ao={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},Lo={key:0,class:"text-xs text-gray-500 truncate max-w-[220px]"},Ro={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Mo={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Io={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Po={key:1,class:"space-y-6"},Uo={class:"flex items-center justify-between mb-4"},Do={class:"space-y-2"},zo={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},No=["onDragstart","onDrop"],Vo={class:"p-4"},Oo={class:"flex items-start justify-between gap-4"},Bo={class:"flex items-start gap-3 flex-1 min-w-0"},Ho={class:"flex-1 min-w-0 space-y-2"},qo={class:"flex items-center gap-2"},Wo=["onUpdate:modelValue"],Yo=["onUpdate:modelValue"],Ko={class:"flex items-center gap-2 flex-shrink-0"},Xo=["onClick"],Jo=["onClick"],Go={key:0,class:"mt-4 ml-8 space-y-2 pt-3 border-t border-gray-100"},Qo=["onDragstart","onDrop"],Zo={class:"flex-1 min-w-0 space-y-1"},en=["onUpdate:modelValue"],tn=["onUpdate:modelValue"],sn=["onClick"],an={class:"flex items-center justify-between mb-4"},ln={class:"space-y-3"},on={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},nn=["onDragstart","onDrop"],rn={class:"p-4"},dn={class:"flex items-start justify-between gap-4 mb-3"},un={class:"flex items-start gap-3 flex-1 min-w-0"},cn={class:"flex-1 min-w-0"},pn=["onUpdate:modelValue","placeholder"],mn={class:"flex items-center gap-2 flex-shrink-0"},gn=["onClick"],vn=["onClick"],fn={key:0,class:"ml-8 space-y-2 pt-3 border-t border-gray-100"},bn=["onDragstart","onDrop"],yn={class:"flex-1 min-w-0 space-y-1"},hn=["onUpdate:modelValue"],xn=["onUpdate:modelValue"],wn=["onClick"],_n={key:1,class:"ml-8 pt-3 border-t border-gray-100"},kn={class:"flex justify-end space-x-3"},$n=["disabled"],Cn={key:0,class:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4"},Sn={key:1},Tn={class:"px-6 py-4 space-y-4"},jn=["value"],En={class:"pt-3 border-t border-gray-200"},Fn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},An={class:"px-6 py-4 border-b border-gray-200"},Ln={class:"text-sm text-gray-500 mt-1"},Rn={class:"px-6 py-4 space-y-4"},Mn=["value"],In={class:"pt-3 border-t border-gray-200"},Pn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},Un={class:"px-6 py-4 space-y-4"},Dn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},zn={class:"px-6 py-4 border-b border-gray-200"},Nn={class:"text-sm text-gray-500 mt-1"},Vn={class:"px-6 py-4 space-y-4"},On=["value"],Bn={class:"pt-3 border-t border-gray-200"},Hn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},qn={__name:"WebsiteSettings",setup(t){const c=mt().params.websiteId,g=m(null),v=m(!0),y=m(!1),f=m(""),S=m(""),$=m("general"),o=m({title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}),k=m([]),M=m(null),J=m(null),u=m(null),se=m(null),T=m(null),B=m(null),z=m(null),w=Me(()=>(o.value.custom_head_html||"").split(`
`).length||1),x=Me(()=>(o.value.custom_body_html||"").split(`
`).length||1),P=Me(()=>(o.value.custom_footer_html||"").split(`
`).length||1),R=O=>{O==="head"&&J.value&&T.value&&(J.value.scrollTop=T.value.scrollTop),O==="body"&&u.value&&B.value&&(u.value.scrollTop=B.value.scrollTop),O==="footer"&&se.value&&z.value&&(se.value.scrollTop=z.value.scrollTop)},W=async()=>{try{const O=await D.get(`/api/websites/${c}`);g.value=O.data,M.value=O.data.cloudflare_account_id}catch{}},ae=async()=>{try{const O=await D.get("/api/cloudflare-accounts");k.value=O.data||[]}catch(O){console.error("Failed to fetch Cloudflare accounts:",O)}},_e=async()=>{var O,n;try{await D.put(`/api/websites/${c}`,{cloudflare_account_id:M.value}),f.value="Cloudflare account đã được cập nhật",S.value="success"}catch(ke){f.value=((n=(O=ke==null?void 0:ke.response)==null?void 0:O.data)==null?void 0:n.message)||"Không thể cập nhật Cloudflare account",S.value="error"}},pe=async()=>{var O,n;try{const G=(await D.get(`/api/websites/${c}/settings`)).data||{};o.value={title:G.title||"",logo_header_url:G.logo_header_url||"",logo_footer_url:G.logo_footer_url||"",favicon_url:G.favicon_url||"",custom_head_html:G.custom_head_html||"",custom_body_html:G.custom_body_html||"",custom_footer_html:G.custom_footer_html||"",menu:Array.isArray(G.menu)?G.menu:[],footer_links_html:G.footer_links_html||""},xe.value=Array.isArray(G.menu)?G.menu:[],Array.isArray(G.footer_columns)?U.value=G.footer_columns:U.value=[]}catch(ke){f.value=((n=(O=ke==null?void 0:ke.response)==null?void 0:O.data)==null?void 0:n.error)||"Failed to load settings",S.value="error"}},ye=async()=>{var O,n,ke,G;y.value=!0,f.value="";try{o.value.footer_links_html=It(),o.value.footer_columns=U.value,await D.put(`/api/websites/${c}/settings`,o.value),f.value="Updated settings",S.value="success"}catch(ge){f.value=((n=(O=ge==null?void 0:ge.response)==null?void 0:O.data)==null?void 0:n.message)||((G=(ke=ge==null?void 0:ge.response)==null?void 0:ke.data)==null?void 0:G.error)||(ge==null?void 0:ge.message)||"Failed to update settings",S.value="error"}finally{y.value=!1}},Ue=()=>{o.value={title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}},Ae=async(O,n)=>{var ge,L,Te,$e;const ke=((ge=O==null?void 0:O.target)==null?void 0:ge.files)||[];if(!ke.length)return;const G=new FormData;G.append("file",ke[0]);try{let Ee=`/api/websites/${c}/assets/${n}`;const Fe=await D.post(Ee,G,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},timeout:6e4}),Ye=((L=Fe==null?void 0:Fe.data)==null?void 0:L.url)||"";n==="logo-header"?o.value.logo_header_url=Ye:n==="logo-footer"?o.value.logo_footer_url=Ye:n==="favicon"&&(o.value.favicon_url=Ye),f.value="Uploaded "+n,S.value="success"}catch(Ee){const Fe=(($e=(Te=Ee==null?void 0:Ee.response)==null?void 0:Te.data)==null?void 0:$e.error)||(Ee==null?void 0:Ee.message)||"Upload failed";f.value=Fe,S.value="error"}finally{O.target.value=""}};Ze(async()=>{await Promise.all([W(),pe(),X(),ae()]),xe.value=Array.isArray(o.value.menu)?[...o.value.menu]:[],v.value=!1});const he=m([]),xe=m([]),Le=m(!1),ze=m(!1),Ne=m(-1),Be=m(""),me=m(""),ne=m(""),j=m(""),ee=m(""),I=m(""),X=async()=>{try{const O=await D.get(`/api/websites/${c}/folders`);he.value=O.data||[]}catch{}},h=O=>`/${(O==null?void 0:O.slug)||""}`,r=()=>{if(Be.value){const O=he.value.find(n=>String(n.id)===String(Be.value));O&&(me.value=O.name,ne.value=h(O))}},_=()=>{if(j.value){const O=he.value.find(n=>String(n.id)===String(j.value));O&&(ee.value=O.name,I.value=h(O))}};_t(Be,r),_t(j,_);const l=()=>{if(!me.value||!ne.value){f.value="Vui lòng điền đầy đủ thông tin",S.value="error";return}xe.value.push({label:me.value,url:ne.value,children:[]}),o.value.menu=xe.value,Be.value="",me.value="",ne.value="",Le.value=!1,f.value="Đã thêm menu",S.value="success"},A=O=>{Ne.value=O,ze.value=!0},b=()=>{if(!ee.value||!I.value){f.value="Vui lòng điền đầy đủ thông tin",S.value="error";return}const O=xe.value[Ne.value];O&&(O.children=O.children||[],O.children.push({label:ee.value,url:I.value}),o.value.menu=xe.value,j.value="",ee.value="",I.value="",ze.value=!1,f.value="Đã thêm menu con",S.value="success")},p=()=>{o.value.menu=xe.value},Z=O=>{xe.value.splice(O,1),o.value.menu=xe.value},ie=(O,n)=>{const ke=xe.value[O];ke&&(ke.children.splice(n,1),o.value.menu=xe.value)};let ue=-1,re={parent:-1,index:-1};const Ce=O=>{ue=O},N=O=>{if(ue===-1||O===ue)return;const n=xe.value,[ke]=n.splice(ue,1);n.splice(O,0,ke),ue=-1,o.value.menu=n},H=(O,n)=>{re={parent:O,index:n}},i=(O,n)=>{if(re.parent!==O)return;const ke=xe.value[O].children||[],G=re.index;if(G===n||G<0)return;const[ge]=ke.splice(G,1);ke.splice(n,0,ge),re={parent:-1,index:-1},o.value.menu=xe.value},U=m([]),te=m(!1),F=m(!1),Y=m(-1),de=m(""),De=m(""),le=m(""),Se=m("");_t(De,()=>{if(De.value){const O=he.value.find(n=>String(n.id)===String(De.value));O&&(le.value=O.name,Se.value=h(O))}});const tt=()=>{U.value.push({title:de.value||"",links:[]}),de.value="",te.value=!1,f.value="Đã thêm cột footer",S.value="success"},Ve=O=>{Y.value=O,F.value=!0},Je=()=>{if(!le.value||!Se.value){f.value="Vui lòng điền đầy đủ thông tin",S.value="error";return}const O=U.value[Y.value];O&&(O.links.push({label:le.value,url:Se.value}),De.value="",le.value="",Se.value="",F.value=!1,f.value="Đã thêm liên kết footer",S.value="success")},at=O=>{U.value.splice(O,1)},He=()=>{},et=(O,n)=>{const ke=U.value[O];ke&&ke.links.splice(n,1)};let lt=-1;const rt=O=>{lt=O},Mt=O=>{if(lt===-1||O===lt)return;const n=U.value,[ke]=n.splice(lt,1);n.splice(O,0,ke),lt=-1};let ft={column:-1,index:-1};const Tt=(O,n)=>{ft={column:O,index:n}},jt=(O,n)=>{if(ft.column!==O)return;const ke=U.value[O].links||[],G=ft.index;if(G===n||G<0)return;const[ge]=ke.splice(G,1);ke.splice(n,0,ge),ft={column:-1,index:-1}},It=()=>{const O=U.value;if(!O.length)return"";let n='<div class="grid grid-cols-'+O.length+' gap-6">';for(const ke of O){n+="<div>",ke.title&&(n+='<div class="font-medium mb-2">'+ke.title+"</div>"),n+='<ul class="space-y-1">';const G=ke.links||[];for(const ge of G)n+='<li><a href="'+(ge.url||"#")+'" class="text-gray-600 hover:text-gray-900">'+(ge.label||"")+"</a></li>";n+="</ul>",n+="</div>"}return n+="</div>",n};return(O,n)=>{var G,ge;const ke=nt("router-link");return a(),d("div",ao,[e("div",lo,[e("div",oo,[e("div",no,[e("h1",ro,[n[41]||(n[41]=we(" Website Settings ",-1)),g.value?(a(),d("span",io,E(g.value.domain),1)):q("",!0)]),K(ke,{to:"/websites",class:"px-3 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:je(()=>[...n[42]||(n[42]=[we("Back",-1)])]),_:1})]),f.value?(a(),d("div",uo,[e("div",{class:Ie([S.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},E(f.value),3)])):q("",!0),v.value?(a(),d("div",co,"Loading...")):(a(),d("div",po,[e("div",mo,[e("button",{type:"button",onClick:n[0]||(n[0]=L=>$.value="general"),class:Ie([$.value==="general"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-l-md hover:bg-gray-50"])},"Cài đặt chung",2),e("button",{type:"button",onClick:n[1]||(n[1]=L=>$.value="navigation"),class:Ie([$.value==="navigation"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-r-md hover:bg-gray-50"])},"Menu Header & Footer",2)])])),v.value?q("",!0):(a(),d("div",go,[$.value==="general"?(a(),d("div",vo,[e("div",null,[n[43]||(n[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề",-1)),V(e("input",{"onUpdate:modelValue":n[2]||(n[2]=L=>o.value.title=L),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Website title"},null,512),[[oe,o.value.title]])]),e("div",null,[n[45]||(n[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Cloudflare Account",-1)),V(e("select",{"onUpdate:modelValue":n[3]||(n[3]=L=>M.value=L),onChange:_e,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[n[44]||(n[44]=e("option",{value:null},"-- Không sử dụng Cloudflare (dùng bản ghi *) --",-1)),(a(!0),d(ve,null,fe(k.value,L=>(a(),d("option",{key:L.id,value:L.id},E(L.email),9,fo))),128))],544),[[We,M.value]]),n[46]||(n[46]=e("p",{class:"mt-1 text-sm text-gray-500"},"Chọn Cloudflare account để quản lý DNS cho website này. Để trống nếu đã có wildcard DNS record",-1))]),e("div",bo,[e("div",null,[n[48]||(n[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Header",-1)),e("div",yo,[e("div",ho,[o.value.logo_header_url?(a(),d("img",{key:0,src:o.value.logo_header_url,class:"object-contain h-full w-full"},null,8,xo)):(a(),ce(C(Pt),{key:1,class:"size-6 text-gray-400"}))]),e("label",wo,[K(C(Ut),{class:"size-4 mr-2"}),n[47]||(n[47]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:n[4]||(n[4]=L=>Ae(L,"logo-header")),class:"hidden"},null,32)]),o.value.logo_header_url?(a(),d("span",_o,E(o.value.logo_header_url),1)):q("",!0)])]),e("div",null,[n[50]||(n[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Footer",-1)),e("div",ko,[e("div",$o,[o.value.logo_footer_url?(a(),d("img",{key:0,src:o.value.logo_footer_url,class:"object-contain h-full w-full"},null,8,Co)):(a(),ce(C(Pt),{key:1,class:"size-6 text-gray-400"}))]),e("label",So,[K(C(Ut),{class:"size-4 mr-2"}),n[49]||(n[49]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:n[5]||(n[5]=L=>Ae(L,"logo-footer")),class:"hidden"},null,32)]),o.value.logo_footer_url?(a(),d("span",To,E(o.value.logo_footer_url),1)):q("",!0)])])]),e("div",null,[n[52]||(n[52]=e("label",{class:"block text-sm font-medium text-gray-700"},"Favicon",-1)),e("div",jo,[e("div",Eo,[o.value.favicon_url?(a(),d("img",{key:0,src:o.value.favicon_url,class:"object-contain h-full w-full"},null,8,Fo)):(a(),ce(C(Pt),{key:1,class:"size-5 text-gray-400"}))]),e("label",Ao,[K(C(Ut),{class:"size-4 mr-2"}),n[51]||(n[51]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".ico,.png,.jpg,.jpeg,.svg",onChange:n[6]||(n[6]=L=>Ae(L,"favicon")),class:"hidden"},null,32)]),o.value.favicon_url?(a(),d("span",Lo,E(o.value.favicon_url),1)):q("",!0)])]),e("div",null,[n[53]||(n[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào header",-1)),e("div",Ro,[e("div",{ref_key:"gutterHead",ref:J,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(a(!0),d(ve,null,fe(w.value,L=>(a(),d("div",{key:L,class:"leading-6"},E(L),1))),128))],512),V(e("textarea",{ref_key:"codeHead",ref:T,"onUpdate:modelValue":n[7]||(n[7]=L=>o.value.custom_head_html=L),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:n[8]||(n[8]=L=>R("head"))},null,544),[[oe,o.value.custom_head_html]])])]),e("div",null,[n[54]||(n[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào body",-1)),e("div",Mo,[e("div",{ref_key:"gutterBody",ref:u,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(a(!0),d(ve,null,fe(x.value,L=>(a(),d("div",{key:L,class:"leading-6"},E(L),1))),128))],512),V(e("textarea",{ref_key:"codeBody",ref:B,"onUpdate:modelValue":n[9]||(n[9]=L=>o.value.custom_body_html=L),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<div>...</div>",onScroll:n[10]||(n[10]=L=>R("body"))},null,544),[[oe,o.value.custom_body_html]])])]),e("div",null,[n[55]||(n[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào footer",-1)),e("div",Io,[e("div",{ref_key:"gutterFooter",ref:se,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(a(!0),d(ve,null,fe(P.value,L=>(a(),d("div",{key:L,class:"leading-6"},E(L),1))),128))],512),V(e("textarea",{ref_key:"codeFooter",ref:z,"onUpdate:modelValue":n[11]||(n[11]=L=>o.value.custom_footer_html=L),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:n[12]||(n[12]=L=>R("footer"))},null,544),[[oe,o.value.custom_footer_html]])])])])):q("",!0),$.value==="navigation"?(a(),d("div",Po,[e("div",null,[e("div",Uo,[n[57]||(n[57]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Menu Header"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:n[13]||(n[13]=L=>Le.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...n[56]||(n[56]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),we(" Thêm menu ",-1)])])]),e("div",Do,[xe.value.length===0?(a(),d("div",zo,[...n[58]||(n[58]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có menu nào. Click "Thêm menu" để bắt đầu.',-1)])])):q("",!0),(a(!0),d(ve,null,fe(xe.value,(L,Te)=>(a(),d("div",{key:Te,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:$e=>Ce(Te),onDragover:n[15]||(n[15]=Oe(()=>{},["prevent"])),onDrop:$e=>N(Te)},[e("div",Vo,[e("div",Oo,[e("div",Bo,[n[59]||(n[59]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",Ho,[e("div",qo,[V(e("input",{"onUpdate:modelValue":$e=>L.label=$e,onInput:p,type:"text",class:"flex-1 px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu"},null,40,Wo),[[oe,L.label]])]),V(e("input",{"onUpdate:modelValue":$e=>L.url=$e,onInput:p,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL (ví dụ: /khach-san)"},null,40,Yo),[[oe,L.url]])])]),e("div",Ko,[e("button",{type:"button",onClick:$e=>A(Te),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm menu con"},[...n[60]||(n[60]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,Xo),e("button",{type:"button",onClick:$e=>Z(Te),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa"},[...n[61]||(n[61]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Jo)])]),L.children&&L.children.length>0?(a(),d("div",Go,[(a(!0),d(ve,null,fe(L.children,($e,Ee)=>(a(),d("div",{key:Ee,class:"flex items-center gap-3 group",draggable:"true",onDragstart:Fe=>H(Te,Ee),onDragover:n[14]||(n[14]=Oe(()=>{},["prevent"])),onDrop:Fe=>i(Te,Ee)},[n[63]||(n[63]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),n[64]||(n[64]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("div",Zo,[V(e("input",{"onUpdate:modelValue":Fe=>$e.label=Fe,onInput:p,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu con"},null,40,en),[[oe,$e.label]]),V(e("input",{"onUpdate:modelValue":Fe=>$e.url=Fe,onInput:p,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,tn),[[oe,$e.url]])]),e("button",{type:"button",onClick:Fe=>ie(Te,Ee),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...n[62]||(n[62]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,sn)],40,Qo))),128))])):q("",!0)])],40,No))),128))])]),e("div",null,[e("div",an,[n[66]||(n[66]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Footer"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:n[16]||(n[16]=L=>te.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...n[65]||(n[65]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),we(" Thêm cột ",-1)])])]),e("div",ln,[U.value.length===0?(a(),d("div",on,[...n[67]||(n[67]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có cột footer nào. Click "Thêm cột" để bắt đầu.',-1)])])):q("",!0),(a(!0),d(ve,null,fe(U.value,(L,Te)=>(a(),d("div",{key:Te,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:$e=>rt(Te),onDragover:n[18]||(n[18]=Oe(()=>{},["prevent"])),onDrop:$e=>Mt(Te)},[e("div",rn,[e("div",dn,[e("div",un,[n[68]||(n[68]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",cn,[V(e("input",{"onUpdate:modelValue":$e=>L.title=$e,onInput:He,type:"text",class:"w-full px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:`Tiêu đề cột ${Te+1}`},null,40,pn),[[oe,L.title]])])]),e("div",mn,[e("button",{type:"button",onClick:$e=>Ve(Te),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm liên kết"},[...n[69]||(n[69]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,gn),e("button",{type:"button",onClick:$e=>at(Te),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa cột"},[...n[70]||(n[70]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,vn)])]),L.links&&L.links.length>0?(a(),d("div",fn,[(a(!0),d(ve,null,fe(L.links,($e,Ee)=>(a(),d("div",{key:Ee,class:"flex items-center gap-3 group",draggable:"true",onDragstart:Fe=>Tt(Te,Ee),onDragover:n[17]||(n[17]=Oe(()=>{},["prevent"])),onDrop:Fe=>jt(Te,Ee)},[n[72]||(n[72]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),n[73]||(n[73]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),e("div",yn,[V(e("input",{"onUpdate:modelValue":Fe=>$e.label=Fe,onInput:He,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên liên kết"},null,40,hn),[[oe,$e.label]]),V(e("input",{"onUpdate:modelValue":Fe=>$e.url=Fe,onInput:He,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,xn),[[oe,$e.url]])]),e("button",{type:"button",onClick:Fe=>et(Te,Ee),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...n[71]||(n[71]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,wn)],40,bn))),128))])):(a(),d("div",_n,[...n[74]||(n[74]=[e("p",{class:"text-xs text-gray-400 italic"},"Chưa có liên kết",-1)])]))])],40,nn))),128))])])])):q("",!0),e("div",kn,[e("button",{type:"button",onClick:Ue,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Reset"),e("button",{type:"button",onClick:ye,disabled:y.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2"},[y.value?(a(),d("span",Cn)):(a(),d("span",Sn,"Save"))],8,$n)])]))])]),Le.value?(a(),d("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n[24]||(n[24]=L=>Le.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:n[23]||(n[23]=Oe(()=>{},["stop"]))},[n[79]||(n[79]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu mới")],-1)),e("div",Tn,[e("div",null,[n[76]||(n[76]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),V(e("select",{"onUpdate:modelValue":n[19]||(n[19]=L=>Be.value=L),class:"w-full rounded-md border-gray-300 text-sm"},[n[75]||(n[75]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(a(!0),d(ve,null,fe(he.value,L=>(a(),d("option",{key:L.id,value:L.id},E(L.name),9,jn))),128))],512),[[We,Be.value]])]),e("div",En,[n[77]||(n[77]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu",-1)),V(e("input",{"onUpdate:modelValue":n[20]||(n[20]=L=>me.value=L),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn"},null,512),[[oe,me.value]])]),e("div",null,[n[78]||(n[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),V(e("input",{"onUpdate:modelValue":n[21]||(n[21]=L=>ne.value=L),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san"},null,512),[[oe,ne.value]])])]),e("div",Fn,[e("button",{type:"button",onClick:n[22]||(n[22]=L=>Le.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:l,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):q("",!0),ze.value?(a(),d("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n[30]||(n[30]=L=>ze.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:n[29]||(n[29]=Oe(()=>{},["stop"]))},[e("div",An,[n[81]||(n[81]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu con",-1)),e("p",Ln,[n[80]||(n[80]=we("Thêm vào: ",-1)),e("strong",null,E((G=xe.value[Ne.value])==null?void 0:G.label),1)])]),e("div",Rn,[e("div",null,[n[83]||(n[83]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),V(e("select",{"onUpdate:modelValue":n[25]||(n[25]=L=>j.value=L),class:"w-full rounded-md border-gray-300 text-sm"},[n[82]||(n[82]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(a(!0),d(ve,null,fe(he.value,L=>(a(),d("option",{key:L.id,value:L.id},E(L.name),9,Mn))),128))],512),[[We,j.value]])]),e("div",In,[n[84]||(n[84]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu con",-1)),V(e("input",{"onUpdate:modelValue":n[26]||(n[26]=L=>ee.value=L),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn 5 sao"},null,512),[[oe,ee.value]])]),e("div",null,[n[85]||(n[85]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),V(e("input",{"onUpdate:modelValue":n[27]||(n[27]=L=>I.value=L),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san-5-sao"},null,512),[[oe,I.value]])])]),e("div",Pn,[e("button",{type:"button",onClick:n[28]||(n[28]=L=>ze.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:b,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):q("",!0),te.value?(a(),d("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n[34]||(n[34]=L=>te.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:n[33]||(n[33]=Oe(()=>{},["stop"]))},[n[87]||(n[87]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm cột footer mới")],-1)),e("div",Un,[e("div",null,[n[86]||(n[86]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tiêu đề cột",-1)),V(e("input",{"onUpdate:modelValue":n[31]||(n[31]=L=>de.value=L),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Thông tin"},null,512),[[oe,de.value]])])]),e("div",Dn,[e("button",{type:"button",onClick:n[32]||(n[32]=L=>te.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:tt,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):q("",!0),F.value?(a(),d("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n[40]||(n[40]=L=>F.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:n[39]||(n[39]=Oe(()=>{},["stop"]))},[e("div",zn,[n[89]||(n[89]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm liên kết footer",-1)),e("p",Nn,[n[88]||(n[88]=we("Thêm vào: ",-1)),e("strong",null,E(((ge=U.value[Y.value])==null?void 0:ge.title)||`Cột ${Y.value+1}`),1)])]),e("div",Vn,[e("div",null,[n[91]||(n[91]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),V(e("select",{"onUpdate:modelValue":n[35]||(n[35]=L=>De.value=L),class:"w-full rounded-md border-gray-300 text-sm"},[n[90]||(n[90]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(a(!0),d(ve,null,fe(he.value,L=>(a(),d("option",{key:L.id,value:L.id},E(L.name),9,On))),128))],512),[[We,De.value]])]),e("div",Bn,[n[92]||(n[92]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên liên kết",-1)),V(e("input",{"onUpdate:modelValue":n[36]||(n[36]=L=>le.value=L),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Giới thiệu"},null,512),[[oe,le.value]])]),e("div",null,[n[93]||(n[93]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),V(e("input",{"onUpdate:modelValue":n[37]||(n[37]=L=>Se.value=L),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /gioi-thieu"},null,512),[[oe,Se.value]])])]),e("div",Hn,[e("button",{type:"button",onClick:n[38]||(n[38]=L=>F.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:Je,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):q("",!0)])}}};function fs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bs={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt=Symbol.for("react.transitional.element"),Wn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),Kn=Symbol.for("react.strict_mode"),Xn=Symbol.for("react.profiler"),Jn=Symbol.for("react.consumer"),Gn=Symbol.for("react.context"),Qn=Symbol.for("react.forward_ref"),Zn=Symbol.for("react.suspense"),er=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),tr=Symbol.for("react.activity"),Gt=Symbol.iterator;function sr(t){return t===null||typeof t!="object"?null:(t=Gt&&t[Gt]||t["@@iterator"],typeof t=="function"?t:null)}var hs={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xs=Object.assign,ws={};function wt(t,s,c){this.props=t,this.context=s,this.refs=ws,this.updater=c||hs}wt.prototype.isReactComponent={};wt.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};wt.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _s(){}_s.prototype=wt.prototype;function Wt(t,s,c){this.props=t,this.context=s,this.refs=ws,this.updater=c||hs}var Yt=Wt.prototype=new _s;Yt.constructor=Wt;xs(Yt,wt.prototype);Yt.isPureReactComponent=!0;var Qt=Array.isArray;function Ot(){}var Pe={H:null,A:null,T:null,S:null},ks=Object.prototype.hasOwnProperty;function Kt(t,s,c){var g=c.ref;return{$$typeof:qt,type:t,key:s,ref:g!==void 0?g:null,props:c}}function ar(t,s){return Kt(t.type,s,t.props)}function Xt(t){return typeof t=="object"&&t!==null&&t.$$typeof===qt}function lr(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(c){return s[c]})}var Zt=/\/+/g;function Dt(t,s){return typeof t=="object"&&t!==null&&t.key!=null?lr(""+t.key):s.toString(36)}function or(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Ot,Ot):(t.status="pending",t.then(function(s){t.status==="pending"&&(t.status="fulfilled",t.value=s)},function(s){t.status==="pending"&&(t.status="rejected",t.reason=s)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function bt(t,s,c,g,v){var y=typeof t;(y==="undefined"||y==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(y){case"bigint":case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case qt:case Wn:f=!0;break;case ys:return f=t._init,bt(f(t._payload),s,c,g,v)}}if(f)return v=v(t),f=g===""?"."+Dt(t,0):g,Qt(v)?(c="",f!=null&&(c=f.replace(Zt,"$&/")+"/"),bt(v,s,c,"",function(o){return o})):v!=null&&(Xt(v)&&(v=ar(v,c+(v.key==null||t&&t.key===v.key?"":(""+v.key).replace(Zt,"$&/")+"/")+f)),s.push(v)),1;f=0;var S=g===""?".":g+":";if(Qt(t))for(var $=0;$<t.length;$++)g=t[$],y=S+Dt(g,$),f+=bt(g,s,c,y,v);else if($=sr(t),typeof $=="function")for(t=$.call(t),$=0;!(g=t.next()).done;)g=g.value,y=S+Dt(g,$++),f+=bt(g,s,c,y,v);else if(y==="object"){if(typeof t.then=="function")return bt(or(t),s,c,g,v);throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.")}return f}function Et(t,s,c){if(t==null)return t;var g=[],v=0;return bt(t,g,"","",function(y){return s.call(c,y,v++)}),g}function nr(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(c){(t._status===0||t._status===-1)&&(t._status=1,t._result=c)},function(c){(t._status===0||t._status===-1)&&(t._status=2,t._result=c)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var es=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},rr={map:Et,forEach:function(t,s,c){Et(t,function(){s.apply(this,arguments)},c)},count:function(t){var s=0;return Et(t,function(){s++}),s},toArray:function(t){return Et(t,function(s){return s})||[]},only:function(t){if(!Xt(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Activity=tr;be.Children=rr;be.Component=wt;be.Fragment=Yn;be.Profiler=Xn;be.PureComponent=Wt;be.StrictMode=Kn;be.Suspense=Zn;be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pe;be.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Pe.H.useMemoCache(t)}};be.cache=function(t){return function(){return t.apply(null,arguments)}};be.cacheSignal=function(){return null};be.cloneElement=function(t,s,c){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var g=xs({},t.props),v=t.key;if(s!=null)for(y in s.key!==void 0&&(v=""+s.key),s)!ks.call(s,y)||y==="key"||y==="__self"||y==="__source"||y==="ref"&&s.ref===void 0||(g[y]=s[y]);var y=arguments.length-2;if(y===1)g.children=c;else if(1<y){for(var f=Array(y),S=0;S<y;S++)f[S]=arguments[S+2];g.children=f}return Kt(t.type,v,g)};be.createContext=function(t){return t={$$typeof:Gn,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:Jn,_context:t},t};be.createElement=function(t,s,c){var g,v={},y=null;if(s!=null)for(g in s.key!==void 0&&(y=""+s.key),s)ks.call(s,g)&&g!=="key"&&g!=="__self"&&g!=="__source"&&(v[g]=s[g]);var f=arguments.length-2;if(f===1)v.children=c;else if(1<f){for(var S=Array(f),$=0;$<f;$++)S[$]=arguments[$+2];v.children=S}if(t&&t.defaultProps)for(g in f=t.defaultProps,f)v[g]===void 0&&(v[g]=f[g]);return Kt(t,y,v)};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:Qn,render:t}};be.isValidElement=Xt;be.lazy=function(t){return{$$typeof:ys,_payload:{_status:-1,_result:t},_init:nr}};be.memo=function(t,s){return{$$typeof:er,type:t,compare:s===void 0?null:s}};be.startTransition=function(t){var s=Pe.T,c={};Pe.T=c;try{var g=t(),v=Pe.S;v!==null&&v(c,g),typeof g=="object"&&g!==null&&typeof g.then=="function"&&g.then(Ot,es)}catch(y){es(y)}finally{s!==null&&c.types!==null&&(s.types=c.types),Pe.T=s}};be.unstable_useCacheRefresh=function(){return Pe.H.useCacheRefresh()};be.use=function(t){return Pe.H.use(t)};be.useActionState=function(t,s,c){return Pe.H.useActionState(t,s,c)};be.useCallback=function(t,s){return Pe.H.useCallback(t,s)};be.useContext=function(t){return Pe.H.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t,s){return Pe.H.useDeferredValue(t,s)};be.useEffect=function(t,s){return Pe.H.useEffect(t,s)};be.useEffectEvent=function(t){return Pe.H.useEffectEvent(t)};be.useId=function(){return Pe.H.useId()};be.useImperativeHandle=function(t,s,c){return Pe.H.useImperativeHandle(t,s,c)};be.useInsertionEffect=function(t,s){return Pe.H.useInsertionEffect(t,s)};be.useLayoutEffect=function(t,s){return Pe.H.useLayoutEffect(t,s)};be.useMemo=function(t,s){return Pe.H.useMemo(t,s)};be.useOptimistic=function(t,s){return Pe.H.useOptimistic(t,s)};be.useReducer=function(t,s,c){return Pe.H.useReducer(t,s,c)};be.useRef=function(t){return Pe.H.useRef(t)};be.useState=function(t){return Pe.H.useState(t)};be.useSyncExternalStore=function(t,s,c){return Pe.H.useSyncExternalStore(t,s,c)};be.useTransition=function(){return Pe.H.useTransition()};be.version="19.2.0";bs.exports=be;var yt=bs.exports;const Q=fs(yt);var $s={exports:{}},Xe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ir=yt;function Cs(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ut(){}var Ke={d:{f:ut,r:function(){throw Error(Cs(522))},D:ut,C:ut,L:ut,m:ut,X:ut,S:ut,M:ut},p:0,findDOMNode:null},dr=Symbol.for("react.portal");function ur(t,s,c){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dr,key:g==null?null:""+g,children:t,containerInfo:s,implementation:c}}var $t=ir.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Rt(t,s){if(t==="font")return"";if(typeof s=="string")return s==="use-credentials"?s:""}Xe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ke;Xe.createPortal=function(t,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)throw Error(Cs(299));return ur(t,s,null,c)};Xe.flushSync=function(t){var s=$t.T,c=Ke.p;try{if($t.T=null,Ke.p=2,t)return t()}finally{$t.T=s,Ke.p=c,Ke.d.f()}};Xe.preconnect=function(t,s){typeof t=="string"&&(s?(s=s.crossOrigin,s=typeof s=="string"?s==="use-credentials"?s:"":void 0):s=null,Ke.d.C(t,s))};Xe.prefetchDNS=function(t){typeof t=="string"&&Ke.d.D(t)};Xe.preinit=function(t,s){if(typeof t=="string"&&s&&typeof s.as=="string"){var c=s.as,g=Rt(c,s.crossOrigin),v=typeof s.integrity=="string"?s.integrity:void 0,y=typeof s.fetchPriority=="string"?s.fetchPriority:void 0;c==="style"?Ke.d.S(t,typeof s.precedence=="string"?s.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:y}):c==="script"&&Ke.d.X(t,{crossOrigin:g,integrity:v,fetchPriority:y,nonce:typeof s.nonce=="string"?s.nonce:void 0})}};Xe.preinitModule=function(t,s){if(typeof t=="string")if(typeof s=="object"&&s!==null){if(s.as==null||s.as==="script"){var c=Rt(s.as,s.crossOrigin);Ke.d.M(t,{crossOrigin:c,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0})}}else s==null&&Ke.d.M(t)};Xe.preload=function(t,s){if(typeof t=="string"&&typeof s=="object"&&s!==null&&typeof s.as=="string"){var c=s.as,g=Rt(c,s.crossOrigin);Ke.d.L(t,c,{crossOrigin:g,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0,type:typeof s.type=="string"?s.type:void 0,fetchPriority:typeof s.fetchPriority=="string"?s.fetchPriority:void 0,referrerPolicy:typeof s.referrerPolicy=="string"?s.referrerPolicy:void 0,imageSrcSet:typeof s.imageSrcSet=="string"?s.imageSrcSet:void 0,imageSizes:typeof s.imageSizes=="string"?s.imageSizes:void 0,media:typeof s.media=="string"?s.media:void 0})}};Xe.preloadModule=function(t,s){if(typeof t=="string")if(s){var c=Rt(s.as,s.crossOrigin);Ke.d.m(t,{as:typeof s.as=="string"&&s.as!=="script"?s.as:void 0,crossOrigin:c,integrity:typeof s.integrity=="string"?s.integrity:void 0})}else Ke.d.m(t)};Xe.requestFormReset=function(t){Ke.d.r(t)};Xe.unstable_batchedUpdates=function(t,s){return t(s)};Xe.useFormState=function(t,s,c){return $t.H.useFormState(t,s,c)};Xe.useFormStatus=function(){return $t.H.useHostTransitionStatus()};Xe.version="19.2.0";function Ss(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ss)}catch(t){console.error(t)}}Ss(),$s.exports=Xe;var cr=$s.exports;const pr=fs(cr);var mr=t=>{switch(t){case"success":return fr;case"info":return yr;case"warning":return br;case"error":return hr;default:return null}},gr=Array(12).fill(0),vr=({visible:t,className:s})=>Q.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},Q.createElement("div",{className:"sonner-spinner"},gr.map((c,g)=>Q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${g}`})))),fr=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),br=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),yr=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),hr=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),xr=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),wr=()=>{let[t,s]=Q.useState(document.hidden);return Q.useEffect(()=>{let c=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",c),()=>window.removeEventListener("visibilitychange",c)},[]),t},Bt=1,_r=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;let{message:c,...g}=t,v=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:Bt++,y=this.toasts.find(S=>S.id===v),f=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(v)&&this.dismissedToasts.delete(v),y?this.toasts=this.toasts.map(S=>S.id===v?(this.publish({...S,...t,id:v,title:c}),{...S,...t,id:v,dismissible:f,title:c}):S):this.addToast({title:c,...g,dismissible:f,id:v}),v},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(s=>{this.subscribers.forEach(c=>c({id:s.id,dismiss:!0}))}),this.subscribers.forEach(s=>s({id:t,dismiss:!0})),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let c;s.loading!==void 0&&(c=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));let g=t instanceof Promise?t:t(),v=c!==void 0,y,f=g.then(async $=>{if(y=["resolve",$],Q.isValidElement($))v=!1,this.create({id:c,type:"default",message:$});else if($r($)&&!$.ok){v=!1;let o=typeof s.error=="function"?await s.error(`HTTP error! status: ${$.status}`):s.error,k=typeof s.description=="function"?await s.description(`HTTP error! status: ${$.status}`):s.description;this.create({id:c,type:"error",message:o,description:k})}else if(s.success!==void 0){v=!1;let o=typeof s.success=="function"?await s.success($):s.success,k=typeof s.description=="function"?await s.description($):s.description;this.create({id:c,type:"success",message:o,description:k})}}).catch(async $=>{if(y=["reject",$],s.error!==void 0){v=!1;let o=typeof s.error=="function"?await s.error($):s.error,k=typeof s.description=="function"?await s.description($):s.description;this.create({id:c,type:"error",message:o,description:k})}}).finally(()=>{var $;v&&(this.dismiss(c),c=void 0),($=s.finally)==null||$.call(s)}),S=()=>new Promise(($,o)=>f.then(()=>y[0]==="reject"?o(y[1]):$(y[1])).catch(o));return typeof c!="string"&&typeof c!="number"?{unwrap:S}:Object.assign(c,{unwrap:S})},this.custom=(t,s)=>{let c=(s==null?void 0:s.id)||Bt++;return this.create({jsx:t(c),id:c,...s}),c},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ge=new _r,kr=(t,s)=>{let c=(s==null?void 0:s.id)||Bt++;return Ge.addToast({title:t,...s,id:c}),c},$r=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Cr=kr,Sr=()=>Ge.toasts,Tr=()=>Ge.getActiveToasts(),Qe=Object.assign(Cr,{success:Ge.success,info:Ge.info,warning:Ge.warning,error:Ge.error,custom:Ge.custom,message:Ge.message,promise:Ge.promise,dismiss:Ge.dismiss,loading:Ge.loading},{getHistory:Sr,getToasts:Tr});function jr(t,{insertAt:s}={}){if(typeof document>"u")return;let c=document.head||document.getElementsByTagName("head")[0],g=document.createElement("style");g.type="text/css",s==="top"&&c.firstChild?c.insertBefore(g,c.firstChild):c.appendChild(g),g.styleSheet?g.styleSheet.cssText=t:g.appendChild(document.createTextNode(t))}jr(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ft(t){return t.label!==void 0}var Er=3,Fr="32px",Ar="16px",ts=4e3,Lr=356,Rr=14,Mr=20,Ir=200;function st(...t){return t.filter(Boolean).join(" ")}function Pr(t){let[s,c]=t.split("-"),g=[];return s&&g.push(s),c&&g.push(c),g}var Ur=t=>{var s,c,g,v,y,f,S,$,o,k,M;let{invert:J,toast:u,unstyled:se,interacting:T,setHeights:B,visibleToasts:z,heights:w,index:x,toasts:P,expanded:R,removeToast:W,defaultRichColors:ae,closeButton:_e,style:pe,cancelButtonStyle:ye,actionButtonStyle:Ue,className:Ae="",descriptionClassName:he="",duration:xe,position:Le,gap:ze,loadingIcon:Ne,expandByDefault:Be,classNames:me,icons:ne,closeButtonAriaLabel:j="Close toast",pauseWhenPageIsHidden:ee}=t,[I,X]=Q.useState(null),[h,r]=Q.useState(null),[_,l]=Q.useState(!1),[A,b]=Q.useState(!1),[p,Z]=Q.useState(!1),[ie,ue]=Q.useState(!1),[re,Ce]=Q.useState(!1),[N,H]=Q.useState(0),[i,U]=Q.useState(0),te=Q.useRef(u.duration||xe||ts),F=Q.useRef(null),Y=Q.useRef(null),de=x===0,De=x+1<=z,le=u.type,Se=u.dismissible!==!1,qe=u.className||"",tt=u.descriptionClassName||"",Ve=Q.useMemo(()=>w.findIndex(G=>G.toastId===u.id)||0,[w,u.id]),Je=Q.useMemo(()=>{var G;return(G=u.closeButton)!=null?G:_e},[u.closeButton,_e]),at=Q.useMemo(()=>u.duration||xe||ts,[u.duration,xe]),He=Q.useRef(0),et=Q.useRef(0),lt=Q.useRef(0),rt=Q.useRef(null),[Mt,ft]=Le.split("-"),Tt=Q.useMemo(()=>w.reduce((G,ge,L)=>L>=Ve?G:G+ge.height,0),[w,Ve]),jt=wr(),It=u.invert||J,O=le==="loading";et.current=Q.useMemo(()=>Ve*ze+Tt,[Ve,Tt]),Q.useEffect(()=>{te.current=at},[at]),Q.useEffect(()=>{l(!0)},[]),Q.useEffect(()=>{let G=Y.current;if(G){let ge=G.getBoundingClientRect().height;return U(ge),B(L=>[{toastId:u.id,height:ge,position:u.position},...L]),()=>B(L=>L.filter(Te=>Te.toastId!==u.id))}},[B,u.id]),Q.useLayoutEffect(()=>{if(!_)return;let G=Y.current,ge=G.style.height;G.style.height="auto";let L=G.getBoundingClientRect().height;G.style.height=ge,U(L),B(Te=>Te.find($e=>$e.toastId===u.id)?Te.map($e=>$e.toastId===u.id?{...$e,height:L}:$e):[{toastId:u.id,height:L,position:u.position},...Te])},[_,u.title,u.description,B,u.id]);let n=Q.useCallback(()=>{b(!0),H(et.current),B(G=>G.filter(ge=>ge.toastId!==u.id)),setTimeout(()=>{W(u)},Ir)},[u,W,B,et]);Q.useEffect(()=>{if(u.promise&&le==="loading"||u.duration===1/0||u.type==="loading")return;let G;return R||T||ee&&jt?(()=>{if(lt.current<He.current){let ge=new Date().getTime()-He.current;te.current=te.current-ge}lt.current=new Date().getTime()})():te.current!==1/0&&(He.current=new Date().getTime(),G=setTimeout(()=>{var ge;(ge=u.onAutoClose)==null||ge.call(u,u),n()},te.current)),()=>clearTimeout(G)},[R,T,u,le,ee,jt,n]),Q.useEffect(()=>{u.delete&&n()},[n,u.delete]);function ke(){var G,ge,L;return ne!=null&&ne.loading?Q.createElement("div",{className:st(me==null?void 0:me.loader,(G=u==null?void 0:u.classNames)==null?void 0:G.loader,"sonner-loader"),"data-visible":le==="loading"},ne.loading):Ne?Q.createElement("div",{className:st(me==null?void 0:me.loader,(ge=u==null?void 0:u.classNames)==null?void 0:ge.loader,"sonner-loader"),"data-visible":le==="loading"},Ne):Q.createElement(vr,{className:st(me==null?void 0:me.loader,(L=u==null?void 0:u.classNames)==null?void 0:L.loader),visible:le==="loading"})}return Q.createElement("li",{tabIndex:0,ref:Y,className:st(Ae,qe,me==null?void 0:me.toast,(s=u==null?void 0:u.classNames)==null?void 0:s.toast,me==null?void 0:me.default,me==null?void 0:me[le],(c=u==null?void 0:u.classNames)==null?void 0:c[le]),"data-sonner-toast":"","data-rich-colors":(g=u.richColors)!=null?g:ae,"data-styled":!(u.jsx||u.unstyled||se),"data-mounted":_,"data-promise":!!u.promise,"data-swiped":re,"data-removed":A,"data-visible":De,"data-y-position":Mt,"data-x-position":ft,"data-index":x,"data-front":de,"data-swiping":p,"data-dismissible":Se,"data-type":le,"data-invert":It,"data-swipe-out":ie,"data-swipe-direction":h,"data-expanded":!!(R||Be&&_),style:{"--index":x,"--toasts-before":x,"--z-index":P.length-x,"--offset":`${A?N:et.current}px`,"--initial-height":Be?"auto":`${i}px`,...pe,...u.style},onDragEnd:()=>{Z(!1),X(null),rt.current=null},onPointerDown:G=>{O||!Se||(F.current=new Date,H(et.current),G.target.setPointerCapture(G.pointerId),G.target.tagName!=="BUTTON"&&(Z(!0),rt.current={x:G.clientX,y:G.clientY}))},onPointerUp:()=>{var G,ge,L,Te;if(ie||!Se)return;rt.current=null;let $e=Number(((G=Y.current)==null?void 0:G.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ee=Number(((ge=Y.current)==null?void 0:ge.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Fe=new Date().getTime()-((L=F.current)==null?void 0:L.getTime()),Ye=I==="x"?$e:Ee,dt=Math.abs(Ye)/Fe;if(Math.abs(Ye)>=Mr||dt>.11){H(et.current),(Te=u.onDismiss)==null||Te.call(u,u),r(I==="x"?$e>0?"right":"left":Ee>0?"down":"up"),n(),ue(!0),Ce(!1);return}Z(!1),X(null)},onPointerMove:G=>{var ge,L,Te,$e;if(!rt.current||!Se||((ge=window.getSelection())==null?void 0:ge.toString().length)>0)return;let Ee=G.clientY-rt.current.y,Fe=G.clientX-rt.current.x,Ye=(L=t.swipeDirections)!=null?L:Pr(Le);!I&&(Math.abs(Fe)>1||Math.abs(Ee)>1)&&X(Math.abs(Fe)>Math.abs(Ee)?"x":"y");let dt={x:0,y:0};I==="y"?(Ye.includes("top")||Ye.includes("bottom"))&&(Ye.includes("top")&&Ee<0||Ye.includes("bottom")&&Ee>0)&&(dt.y=Ee):I==="x"&&(Ye.includes("left")||Ye.includes("right"))&&(Ye.includes("left")&&Fe<0||Ye.includes("right")&&Fe>0)&&(dt.x=Fe),(Math.abs(dt.x)>0||Math.abs(dt.y)>0)&&Ce(!0),(Te=Y.current)==null||Te.style.setProperty("--swipe-amount-x",`${dt.x}px`),($e=Y.current)==null||$e.style.setProperty("--swipe-amount-y",`${dt.y}px`)}},Je&&!u.jsx?Q.createElement("button",{"aria-label":j,"data-disabled":O,"data-close-button":!0,onClick:O||!Se?()=>{}:()=>{var G;n(),(G=u.onDismiss)==null||G.call(u,u)},className:st(me==null?void 0:me.closeButton,(v=u==null?void 0:u.classNames)==null?void 0:v.closeButton)},(y=ne==null?void 0:ne.close)!=null?y:xr):null,u.jsx||yt.isValidElement(u.title)?u.jsx?u.jsx:typeof u.title=="function"?u.title():u.title:Q.createElement(Q.Fragment,null,le||u.icon||u.promise?Q.createElement("div",{"data-icon":"",className:st(me==null?void 0:me.icon,(f=u==null?void 0:u.classNames)==null?void 0:f.icon)},u.promise||u.type==="loading"&&!u.icon?u.icon||ke():null,u.type!=="loading"?u.icon||(ne==null?void 0:ne[le])||mr(le):null):null,Q.createElement("div",{"data-content":"",className:st(me==null?void 0:me.content,(S=u==null?void 0:u.classNames)==null?void 0:S.content)},Q.createElement("div",{"data-title":"",className:st(me==null?void 0:me.title,($=u==null?void 0:u.classNames)==null?void 0:$.title)},typeof u.title=="function"?u.title():u.title),u.description?Q.createElement("div",{"data-description":"",className:st(he,tt,me==null?void 0:me.description,(o=u==null?void 0:u.classNames)==null?void 0:o.description)},typeof u.description=="function"?u.description():u.description):null),yt.isValidElement(u.cancel)?u.cancel:u.cancel&&Ft(u.cancel)?Q.createElement("button",{"data-button":!0,"data-cancel":!0,style:u.cancelButtonStyle||ye,onClick:G=>{var ge,L;Ft(u.cancel)&&Se&&((L=(ge=u.cancel).onClick)==null||L.call(ge,G),n())},className:st(me==null?void 0:me.cancelButton,(k=u==null?void 0:u.classNames)==null?void 0:k.cancelButton)},u.cancel.label):null,yt.isValidElement(u.action)?u.action:u.action&&Ft(u.action)?Q.createElement("button",{"data-button":!0,"data-action":!0,style:u.actionButtonStyle||Ue,onClick:G=>{var ge,L;Ft(u.action)&&((L=(ge=u.action).onClick)==null||L.call(ge,G),!G.defaultPrevented&&n())},className:st(me==null?void 0:me.actionButton,(M=u==null?void 0:u.classNames)==null?void 0:M.actionButton)},u.action.label):null))};function ss(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Dr(t,s){let c={};return[t,s].forEach((g,v)=>{let y=v===1,f=y?"--mobile-offset":"--offset",S=y?Ar:Fr;function $(o){["top","right","bottom","left"].forEach(k=>{c[`${f}-${k}`]=typeof o=="number"?`${o}px`:o})}typeof g=="number"||typeof g=="string"?$(g):typeof g=="object"?["top","right","bottom","left"].forEach(o=>{g[o]===void 0?c[`${f}-${o}`]=S:c[`${f}-${o}`]=typeof g[o]=="number"?`${g[o]}px`:g[o]}):$(S)}),c}yt.forwardRef(function(t,s){let{invert:c,position:g="bottom-right",hotkey:v=["altKey","KeyT"],expand:y,closeButton:f,className:S,offset:$,mobileOffset:o,theme:k="light",richColors:M,duration:J,style:u,visibleToasts:se=Er,toastOptions:T,dir:B=ss(),gap:z=Rr,loadingIcon:w,icons:x,containerAriaLabel:P="Notifications",pauseWhenPageIsHidden:R}=t,[W,ae]=Q.useState([]),_e=Q.useMemo(()=>Array.from(new Set([g].concat(W.filter(ee=>ee.position).map(ee=>ee.position)))),[W,g]),[pe,ye]=Q.useState([]),[Ue,Ae]=Q.useState(!1),[he,xe]=Q.useState(!1),[Le,ze]=Q.useState(k!=="system"?k:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ne=Q.useRef(null),Be=v.join("+").replace(/Key/g,"").replace(/Digit/g,""),me=Q.useRef(null),ne=Q.useRef(!1),j=Q.useCallback(ee=>{ae(I=>{var X;return(X=I.find(h=>h.id===ee.id))!=null&&X.delete||Ge.dismiss(ee.id),I.filter(({id:h})=>h!==ee.id)})},[]);return Q.useEffect(()=>Ge.subscribe(ee=>{if(ee.dismiss){ae(I=>I.map(X=>X.id===ee.id?{...X,delete:!0}:X));return}setTimeout(()=>{pr.flushSync(()=>{ae(I=>{let X=I.findIndex(h=>h.id===ee.id);return X!==-1?[...I.slice(0,X),{...I[X],...ee},...I.slice(X+1)]:[ee,...I]})})})}),[]),Q.useEffect(()=>{if(k!=="system"){ze(k);return}if(k==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ze("dark"):ze("light")),typeof window>"u")return;let ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:I})=>{ze(I?"dark":"light")})}catch{ee.addListener(({matches:X})=>{try{ze(X?"dark":"light")}catch(h){console.error(h)}})}},[k]),Q.useEffect(()=>{W.length<=1&&Ae(!1)},[W]),Q.useEffect(()=>{let ee=I=>{var X,h;v.every(r=>I[r]||I.code===r)&&(Ae(!0),(X=Ne.current)==null||X.focus()),I.code==="Escape"&&(document.activeElement===Ne.current||(h=Ne.current)!=null&&h.contains(document.activeElement))&&Ae(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[v]),Q.useEffect(()=>{if(Ne.current)return()=>{me.current&&(me.current.focus({preventScroll:!0}),me.current=null,ne.current=!1)}},[Ne.current]),Q.createElement("section",{ref:s,"aria-label":`${P} ${Be}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},_e.map((ee,I)=>{var X;let[h,r]=ee.split("-");return W.length?Q.createElement("ol",{key:ee,dir:B==="auto"?ss():B,tabIndex:-1,ref:Ne,className:S,"data-sonner-toaster":!0,"data-theme":Le,"data-y-position":h,"data-lifted":Ue&&W.length>1&&!y,"data-x-position":r,style:{"--front-toast-height":`${((X=pe[0])==null?void 0:X.height)||0}px`,"--width":`${Lr}px`,"--gap":`${z}px`,...u,...Dr($,o)},onBlur:_=>{ne.current&&!_.currentTarget.contains(_.relatedTarget)&&(ne.current=!1,me.current&&(me.current.focus({preventScroll:!0}),me.current=null))},onFocus:_=>{_.target instanceof HTMLElement&&_.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,me.current=_.relatedTarget)},onMouseEnter:()=>Ae(!0),onMouseMove:()=>Ae(!0),onMouseLeave:()=>{he||Ae(!1)},onDragEnd:()=>Ae(!1),onPointerDown:_=>{_.target instanceof HTMLElement&&_.target.dataset.dismissible==="false"||xe(!0)},onPointerUp:()=>xe(!1)},W.filter(_=>!_.position&&I===0||_.position===ee).map((_,l)=>{var A,b;return Q.createElement(Ur,{key:_.id,icons:x,index:l,toast:_,defaultRichColors:M,duration:(A=T==null?void 0:T.duration)!=null?A:J,className:T==null?void 0:T.className,descriptionClassName:T==null?void 0:T.descriptionClassName,invert:c,visibleToasts:se,closeButton:(b=T==null?void 0:T.closeButton)!=null?b:f,interacting:he,position:ee,style:T==null?void 0:T.style,unstyled:T==null?void 0:T.unstyled,classNames:T==null?void 0:T.classNames,cancelButtonStyle:T==null?void 0:T.cancelButtonStyle,actionButtonStyle:T==null?void 0:T.actionButtonStyle,removeToast:j,toasts:W.filter(p=>p.position==_.position),heights:pe.filter(p=>p.position==_.position),setHeights:ye,expandByDefault:y,gap:z,loadingIcon:w,expanded:Ue,pauseWhenPageIsHidden:R,swipeDirections:t.swipeDirections})})):null}))});const zr={class:"min-h-screen bg-gray-100"},Nr={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Vr={class:"px-4 py-6 sm:px-0"},Or={class:"bg-white shadow rounded-lg p-6 mb-6"},Br={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Hr={class:"flex flex-col items-center gap-2"},qr={class:"inline-flex items-center gap-2 text-blue-600"},Wr={class:"text-2xl font-bold"},Yr={class:"flex flex-col items-center gap-2"},Kr={class:"inline-flex items-center gap-2 text-green-600"},Xr={class:"text-2xl font-bold"},Jr={class:"flex flex-col items-center gap-2"},Gr={class:"inline-flex items-center gap-2 text-red-600"},Qr={class:"text-2xl font-bold"},Zr={class:"flex flex-col items-center gap-2"},ei={class:"inline-flex items-center gap-2 text-purple-600"},ti={class:"text-2xl font-bold"},si={class:"bg-white shadow rounded-lg p-6"},ai={class:"flex justify-between items-center mb-4"},li={class:"space-y-4"},oi={class:"flex justify-between items-start mb-2"},ni={class:"font-medium text-gray-900"},ri={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},ii={class:"font-medium"},di={class:"font-medium"},ui={class:"font-medium"},ci={class:"font-medium"},pi={key:0,class:"mt-4"},mi={class:"grid grid-cols-7 gap-1 text-xs"},gi={class:"text-gray-500"},vi={class:"font-medium"},fi={__name:"Monitoring",setup(t){const s=m({total_websites:0,online_websites:0,offline_websites:0}),c=m([]),g=m("7days"),v=Me(()=>c.value.filter($=>$.ssl_enabled).length),y=async()=>{try{const $=await D.get("/api/monitoring/uptime");s.value=$.data}catch{Qe.error("Failed to fetch uptime statistics")}},f=async()=>{try{const k=(await D.get("/api/websites")).data.map(async M=>{try{const J=await D.get(`/api/monitoring/stats/${M.id}?period=${g.value}`);return{...M,...J.data.summary}}catch{return{...M,total_visits:0,total_unique_visitors:0,total_bandwidth:"0 B",average_response_time:0,uptime_percentage:0,daily_stats:[]}}});c.value=await Promise.all(k)}catch{Qe.error("Failed to fetch website statistics")}},S=$=>new Date($).toLocaleDateString("en-US",{month:"short",day:"numeric"});return Ze(()=>{y(),f()}),($,o)=>(a(),d("div",zr,[e("div",Nr,[e("div",Vr,[o[13]||(o[13]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-6"},"Monitoring",-1)),e("div",Or,[o[5]||(o[5]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"System Overview",-1)),e("div",Br,[e("div",Hr,[e("div",qr,[K(C(vt),{class:"size-5"}),e("span",Wr,E(s.value.total_websites),1)]),o[1]||(o[1]=e("p",{class:"text-sm text-gray-500"},"Total Websites",-1))]),e("div",Yr,[e("div",Kr,[K(C(Ct),{class:"size-5"}),e("span",Xr,E(s.value.online_websites),1)]),o[2]||(o[2]=e("p",{class:"text-sm text-gray-500"},"Online",-1))]),e("div",Jr,[e("div",Gr,[K(C(St),{class:"size-5"}),e("span",Qr,E(s.value.offline_websites),1)]),o[3]||(o[3]=e("p",{class:"text-sm text-gray-500"},"Offline",-1))]),e("div",Zr,[e("div",ei,[K(C(gt),{class:"size-5"}),e("span",ti,E(v.value),1)]),o[4]||(o[4]=e("p",{class:"text-sm text-gray-500"},"SSL Enabled",-1))])])]),e("div",si,[e("div",ai,[o[7]||(o[7]=e("h2",{class:"text-lg font-medium text-gray-900"},"Website Statistics",-1)),V(e("select",{"onUpdate:modelValue":o[0]||(o[0]=k=>g.value=k),onChange:f,class:"border-gray-300 rounded-md shadow-sm"},[...o[6]||(o[6]=[e("option",{value:"24hours"},"Last 24 Hours",-1),e("option",{value:"7days"},"Last 7 Days",-1),e("option",{value:"30days"},"Last 30 Days",-1),e("option",{value:"90days"},"Last 90 Days",-1)])],544),[[We,g.value]])]),e("div",li,[(a(!0),d(ve,null,fe(c.value,k=>(a(),d("div",{key:k.id,class:"border rounded-lg p-4"},[e("div",oi,[e("h3",ni,E(k.domain),1),e("span",{class:Ie(["inline-flex items-center gap-1",k.current_is_online?"text-green-600":"text-red-600"])},[k.current_is_online?(a(),ce(C(Ct),{key:0,class:"size-4"})):(a(),ce(C(St),{key:1,class:"size-4"})),we(" "+E(k.current_is_online?"Online":"Offline"),1)],2)]),e("div",ri,[e("div",null,[o[8]||(o[8]=e("p",{class:"text-gray-500"},"Visits",-1)),e("p",ii,E(k.total_visits),1)]),e("div",null,[o[9]||(o[9]=e("p",{class:"text-gray-500"},"Unique Visitors",-1)),e("p",di,E(k.total_unique_visitors),1)]),e("div",null,[o[10]||(o[10]=e("p",{class:"text-gray-500"},"Bandwidth",-1)),e("p",ui,E(k.total_bandwidth),1)]),e("div",null,[o[11]||(o[11]=e("p",{class:"text-gray-500"},"Avg Response Time",-1)),e("p",ci,E(k.average_response_time)+"ms",1)])]),k.daily_stats&&k.daily_stats.length>0?(a(),d("div",pi,[o[12]||(o[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Daily Stats",-1)),e("div",mi,[(a(!0),d(ve,null,fe(k.daily_stats,M=>(a(),d("div",{key:M.date,class:"text-center"},[e("div",gi,E(S(M.date)),1),e("div",vi,E(M.visits),1)]))),128))])])):q("",!0)]))),128))])])])])]))}},bi={class:"p-8 max-w-7xl mx-auto"},yi={class:"flex flex-wrap gap-2 mb-4"},hi={class:"flex flex-wrap justify-between items-start gap-4 mb-6"},xi={class:"flex justify-between items-center gap-4 p-4 bg-white rounded-lg border border-slate-200 mb-6"},wi={class:"flex gap-2 items-center"},_i={class:"relative w-72"},ki={class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"},$i={class:"bg-white rounded-lg border border-slate-200"},Ci={key:0,class:"px-6 py-4 text-sm text-gray-500"},Si={key:1,class:"flex flex-col"},Ti={class:"list-none"},ji={class:"grid grid-cols-12 gap-4 items-center px-6 py-4 cursor-pointer hover:bg-slate-50"},Ei={class:"col-span-6 flex items-center gap-3"},Fi={class:"flex flex-col"},Ai={class:"text-slate-800 text-sm font-medium"},Li={class:"text-slate-500 text-xs"},Ri={class:"col-span-3 text-sm text-slate-600"},Mi={class:"col-span-1 text-sm text-slate-600"},Ii={class:"col-span-2 flex justify-end gap-2 text-slate-500"},Pi=["onClick"],Ui=["onClick"],Di=["onClick"],zi={class:"pl-10 bg-slate-50/50"},Ni={class:"col-span-6 flex items-center gap-2 text-sm text-slate-700"},Vi={class:"col-span-3 text-sm text-slate-600"},Oi={class:"col-span-1 text-sm text-slate-600"},Bi={class:"col-span-2 flex justify-end gap-2 text-slate-500"},Hi=["onClick"],qi=["onClick"],Wi=["onClick"],Yi={__name:"FoldersManagement",setup(t){const c=mt().params.websiteId,g=m([]),v=m(null),y=m(!1),f=m(""),S=m(""),$=m(""),o=async()=>{y.value=!0,f.value="";try{const[z,w]=await Promise.all([D.get(`/api/websites/${c}`),D.get(`/api/websites/${c}/folders`)]);v.value=z.data;const P=(w.data||[]).map(R=>({...R,id:Number(R.id),parent_id:R.parent_id==null?null:Number(R.parent_id)}));g.value=P}finally{y.value=!1}},k=z=>{const w=z.id,x=J(z.id),P=x?`/preview/folder/${w}/${x}`:`/preview/folder/${w}`,R=localStorage.getItem("adminToken")||"";if(!R){window.open(P,"_blank");return}const W=`${P}?token=${encodeURIComponent(R)}`;window.open(W,"_blank")},M=z=>{if(!v.value)return;const w=J(z.id);if(!w)return;const x=v.value.domain.split("."),P=x.length>2?x.slice(-2).join("."):v.value.domain,W=`${v.value.ssl_enabled?"https://":"http://"}${P}/${w}`;window.open(W,"_blank")},J=z=>{const w=new Map((g.value||[]).map(R=>[String(R.id),R]));let x=w.get(String(z));const P=[];for(;x&&(x.slug&&P.unshift(x.slug),!(!x.parent_id||(x=w.get(String(x.parent_id)),x&&String(x.id)===String(z)))););return P.join("/")},u=Me(()=>{const z=[...g.value||[]],w=new Map(z.map(pe=>[String(pe.id),pe])),x=pe=>pe.sort((ye,Ue)=>(ye.name||"").localeCompare(Ue.name||"")),P=pe=>z.filter(ye=>String(ye.parent_id)===String(pe)),R=pe=>!pe.parent_id||!w.has(String(pe.parent_id))||String(pe.parent_id)===String(pe.id),W=x(z.filter(R)),ae=[],_e=(pe,ye)=>{ae.push({...pe,depth:ye}),x(P(pe.id)).forEach(Ue=>_e(Ue,ye+1))};return W.forEach(pe=>_e(pe,0)),ae}),se=Me(()=>{const z=($.value||"").trim().toLowerCase(),w=u.value,x=new Set(w.filter(W=>W.depth===0).map(W=>W.id));if(!z)return w.filter(W=>x.has(W.id));const P=w.filter(W=>(W.name||"").toLowerCase().includes(z)||(W.slug||"").toLowerCase().includes(z)),R=new Set(P.map(W=>{let ae=W;for(;ae&&ae.depth>0;){const _e=w.find(pe=>String(pe.id)===String(ae.parent_id));if(!_e)break;ae=_e}return ae?ae.id:W.id}));return w.filter(W=>W.depth===0&&R.has(W.id))}),T=z=>{const w=($.value||"").trim().toLowerCase(),P=u.value.filter(R=>String(R.parent_id)===String(z));return w?P.filter(R=>(R.name||"").toLowerCase().includes(w)||(R.slug||"").toLowerCase().includes(w)):P},B=async z=>{var w,x;f.value="",S.value="";try{await D.delete(`/api/websites/${c}/folders/${z.id}`),g.value=(g.value||[]).filter(P=>P.id!==z.id),f.value="Đã xóa thư mục",S.value="success"}catch(P){f.value=((x=(w=P==null?void 0:P.response)==null?void 0:w.data)==null?void 0:x.error)||"Không thể xóa thư mục",S.value="error"}};return Ze(o),(z,w)=>{const x=nt("router-link");return a(),d("div",bi,[e("div",yi,[K(x,{to:"/",class:"text-slate-500 text-sm font-medium hover:text-primary"},{default:je(()=>[...w[1]||(w[1]=[we("Bảng điều khiển",-1)])]),_:1}),w[2]||(w[2]=e("span",{class:"text-slate-500 text-sm font-medium"},"/",-1)),w[3]||(w[3]=e("span",{class:"text-slate-800 text-sm font-medium"},"Danh mục",-1))]),e("div",hi,[w[5]||(w[5]=e("div",{class:"flex flex-col gap-2"},[e("h1",{class:"text-slate-900 text-3xl font-bold leading-tight tracking-tight"},"Quản lý Danh mục"),e("p",{class:"text-slate-500 text-base"},"Thêm, sửa đổi và tổ chức các danh mục.")],-1)),K(x,{to:`/websites/${C(c)}/folders/new`,class:"flex items-center justify-center rounded-lg h-10 bg-primary text-white gap-2 text-sm font-bold px-4 hover:bg-primary/90"},{default:je(()=>[...w[4]||(w[4]=[e("span",null,"Tạo thư mục",-1)])]),_:1},8,["to"])]),e("div",xi,[e("div",wi,[e("div",_i,[e("span",ki,[K(C(Is),{class:"size-4"})]),V(e("input",{"onUpdate:modelValue":w[0]||(w[0]=P=>$.value=P),class:"w-full pl-10 pr-4 py-2 text-sm border border-slate-300 rounded-lg bg-background-light focus:ring-primary focus:border-primary",placeholder:"Tìm danh mục...",type:"text"},null,512),[[oe,$.value]])]),e("button",{type:"button",onClick:o,class:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg"},[K(C(Ps),{class:"size-5"})])]),K(x,{to:`/websites/${C(c)}/pages`,class:"text-sm text-primary"},{default:je(()=>[...w[6]||(w[6]=[we("Quay lại Pages",-1)])]),_:1},8,["to"])]),e("div",$i,[w[7]||(w[7]=xt('<div class="grid grid-cols-12 gap-4 px-6 py-3 border-b border-slate-200"><div class="col-span-6 text-xs font-semibold text-slate-500 uppercase">Tên danh mục</div><div class="col-span-3 text-xs font-semibold text-slate-500 uppercase">Slug</div><div class="col-span-1 text-xs font-semibold text-slate-500 uppercase">Số page</div><div class="col-span-2 text-xs font-semibold text-slate-500 uppercase text-right">Hành động</div></div>',1)),y.value?(a(),d("div",Ci,"Đang tải...")):(a(),d("div",Si,[(a(!0),d(ve,null,fe(se.value,P=>(a(),d("details",{key:P.id,class:"group border-b border-slate-200",open:""},[e("summary",Ti,[e("div",ji,[e("div",Ei,[K(C(Us),{class:"size-4 text-slate-500 group-open:rotate-90 transition-transform"}),e("div",Fi,[e("p",Ai,E(P.name),1),e("p",Li,E(T(P.id).length)+" danh mục con",1)])]),e("div",Ri,"/"+E(J(P.id)),1),e("div",Mi,E(P.pages_count??0),1),e("div",Ii,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:Oe(R=>k(P),["stop"])},[K(C(Vt),{class:"size-4"})],8,Pi),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:Oe(R=>M(P),["stop"])},[K(C(vt),{class:"size-4"})],8,Ui),K(x,{to:`/websites/${C(c)}/folders/${P.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:je(()=>[K(C(Jt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:Oe(R=>B(P),["stop"])},[K(C(pt),{class:"size-4"})],8,Di)])])]),e("div",zi,[(a(!0),d(ve,null,fe(T(P.id),R=>(a(),d("div",{key:R.id,class:"grid grid-cols-12 gap-4 items-center px-6 py-3 border-t border-slate-200"},[e("div",Ni,[K(C(Ds),{class:"size-5 text-slate-400 -ml-1"}),e("span",null,E(R.name),1)]),e("div",Vi,"/"+E(J(R.id)),1),e("div",Oi,E(R.pages_count??0),1),e("div",Bi,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:W=>k(R)},[K(C(Vt),{class:"size-4"})],8,Hi),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:W=>M(R)},[K(C(vt),{class:"size-4"})],8,qi),K(x,{to:`/websites/${C(c)}/folders/${R.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:je(()=>[K(C(Jt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:W=>B(R)},[K(C(pt),{class:"size-4"})],8,Wi)])]))),128))])]))),128))])),f.value?(a(),d("div",{key:2,class:Ie(["px-6 py-3 text-sm",S.value==="error"?"text-red-600":"text-green-600"])},E(f.value),3)):q("",!0)])])}}},Ki={class:"p-6"},Xi={class:"max-w-xl mx-auto"},Ji={class:"flex items-center justify-between mb-4"},Gi={class:"text-xl font-semibold"},Qi=["value"],Zi={class:"flex justify-end gap-2"},ed=["disabled"],as={__name:"FolderEdit",setup(t){const s=mt(),c=ht(),g=s.params.websiteId,v=s.params.folderId,y=m(s.name==="FolderCreate"),f=m([]),S=m(""),$=m(""),o=m(null),k=m(!1),M=m(!1),J=m(""),u=m(""),se=async()=>{const W=((await D.get(`/api/websites/${g}/folders`)).data||[]).map(ae=>({...ae,id:Number(ae.id),parent_id:ae.parent_id==null?null:Number(ae.parent_id)}));f.value=W},T=P=>(P||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),B=()=>{k.value||($.value=T(S.value))},z=Me(()=>{const P=[...f.value||[]],R=new Map(P.map(he=>[String(he.id),he])),W=he=>he.sort((xe,Le)=>(xe.name||"").localeCompare(Le.name||"")),ae=he=>P.filter(xe=>String(xe.parent_id)===String(he)),_e=he=>!he.parent_id||!R.has(String(he.parent_id))||String(he.parent_id)===String(he.id),pe=W(P.filter(_e)),ye=[],Ue=(he,xe)=>{ye.push({...he,depth:xe}),W(ae(he.id)).forEach(Le=>Ue(Le,xe+1))};return pe.forEach(he=>Ue(he,0)),ye.filter(he=>String(he.id)!==String(v))}),w=()=>{if(!v||y.value)return;const P=(f.value||[]).find(R=>R.id===Number(v));P&&(S.value=P.name||"",$.value=P.slug||"",o.value=P.parent_id==null?null:Number(P.parent_id))},x=async()=>{var P,R,W,ae,_e;M.value=!0,J.value="";try{const pe={name:S.value,slug:$.value,parent_id:o.value==null?null:Number(o.value)};let ye;y.value?ye=await D.post(`/api/websites/${g}/folders`,pe):ye=await D.put(`/api/websites/${g}/folders/${v}`,pe),J.value="Đã lưu thư mục",u.value="success",y.value?c.push(`/websites/${g}/folders`):(o.value=((P=ye==null?void 0:ye.data)==null?void 0:P.parent_id)==null?null:Number(ye.data.parent_id),await se(),w())}catch(pe){J.value=((W=(R=pe==null?void 0:pe.response)==null?void 0:R.data)==null?void 0:W.message)||((_e=(ae=pe==null?void 0:pe.response)==null?void 0:ae.data)==null?void 0:_e.error)||"Lưu thư mục thất bại",u.value="error"}finally{M.value=!1}};return Ze(async()=>{await se(),w()}),(P,R)=>{const W=nt("router-link");return a(),d("div",Ki,[e("div",Xi,[e("div",Ji,[e("h1",Gi,E(y.value?"Tạo thư mục":"Sửa thư mục"),1),K(W,{to:`/websites/${C(g)}/folders`,class:"text-sm text-primary"},{default:je(()=>[...R[4]||(R[4]=[we("Quay lại danh sách",-1)])]),_:1},8,["to"])]),e("form",{onSubmit:Oe(x,["prevent"]),class:"bg-white border border-gray-200 rounded-md p-4 space-y-4"},[e("div",null,[R[5]||(R[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),V(e("input",{"onUpdate:modelValue":R[0]||(R[0]=ae=>S.value=ae),onInput:B,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[oe,S.value]])]),e("div",null,[R[6]||(R[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),V(e("input",{"onUpdate:modelValue":R[1]||(R[1]=ae=>$.value=ae),onInput:R[2]||(R[2]=ae=>k.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[oe,$.value]]),R[7]||(R[7]=e("div",{class:"text-xs text-gray-500 mt-1"},"Sẽ tự thêm số nếu trùng trong domain",-1))]),e("div",null,[R[9]||(R[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),V(e("select",{"onUpdate:modelValue":R[3]||(R[3]=ae=>o.value=ae),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[R[8]||(R[8]=e("option",{value:null},"(Không có)",-1)),(a(!0),d(ve,null,fe(z.value,ae=>(a(),d("option",{key:ae.id,value:ae.id},E("↳ ".repeat(ae.depth)+ae.name),9,Qi))),128))],512),[[We,o.value]])]),e("div",Zi,[K(W,{to:`/websites/${C(g)}/folders`,class:"px-4 py-2 border border-gray-300 rounded-md"},{default:je(()=>[...R[10]||(R[10]=[we("Hủy",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:M.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md disabled:bg-blue-400"},E(y.value?"Tạo":"Lưu"),9,ed)]),J.value?(a(),d("div",{key:0,class:Ie(["text-sm",u.value==="error"?"text-red-600":"text-green-600"])},E(J.value),3)):q("",!0)],32)])])}}},td={class:"max-w-3xl mx-auto"},sd={key:0,class:"mb-6 rounded-md border border-green-200 bg-green-50 px-4 py-3 text-green-700"},ad={key:1,class:"mb-6 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-red-700"},ld={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},od={class:"grid grid-cols-1 gap-4"},nd={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},rd={class:"grid grid-cols-1 gap-4"},id={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},dd={class:"flex items-center justify-between mb-4"},ud={key:0,class:"text-sm text-gray-500"},cd={key:1,class:"space-y-3"},pd={class:"flex items-start justify-between"},md={class:"flex-1"},gd={class:"flex items-center gap-2"},vd={class:"font-semibold text-gray-900"},fd={key:0,class:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded"},bd={class:"text-sm text-gray-600 mt-1"},yd={class:"flex items-center gap-2"},hd=["onClick"],xd=["onClick"],wd={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},_d={class:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md"},kd={class:"flex items-center justify-between mb-4"},$d={class:"space-y-3"},Cd={class:"flex items-center gap-2"},Sd={class:"flex justify-end gap-2 mt-6"},Td={class:"flex justify-end"},jd=["disabled"],Ed={__name:"Settings",setup(t){const s=m({APP_NAME:"",APP_URL:"",SSL_EMAIL:""}),c=m(!1),g=m(""),v=m(""),y=m([]),f=m(!1),S=m({name:"",email:"",api_key:"",is_default:!1}),$=async()=>{try{const{data:se}=await D.get("/api/settings");s.value={...s.value,...se}}catch{v.value="Không tải được cài đặt"}},o=async()=>{try{const{data:se}=await D.get("/api/cloudflare-accounts");y.value=se}catch(se){console.error("Failed to load Cloudflare accounts",se)}},k=async()=>{var se,T;try{await D.post("/api/cloudflare-accounts",S.value),g.value="Đã thêm Cloudflare account thành công",f.value=!1,S.value={name:"",email:"",api_key:"",is_default:!1},await o()}catch(B){const z=((T=(se=B==null?void 0:B.response)==null?void 0:se.data)==null?void 0:T.error)||"Thêm account thất bại";v.value=z}},M=async se=>{try{await D.post(`/api/cloudflare-accounts/${se}/set-default`),g.value="Đã set account mặc định",await o()}catch{v.value="Set default thất bại"}},J=async se=>{var T,B;if(confirm("Bạn có chắc muốn xóa account này?"))try{await D.delete(`/api/cloudflare-accounts/${se}`),g.value="Đã xóa account",await o()}catch(z){const w=((B=(T=z==null?void 0:z.response)==null?void 0:T.data)==null?void 0:B.error)||"Xóa account thất bại";v.value=w}},u=async()=>{var se,T;c.value=!0,v.value="",g.value="";try{await D.put("/api/settings",s.value),g.value="Đã lưu cài đặt thành công"}catch(B){const z=((T=(se=B==null?void 0:B.response)==null?void 0:se.data)==null?void 0:T.error)||"Lưu cài đặt thất bại";v.value=z}finally{c.value=!1}};return Ze(async()=>{await $(),await o()}),(se,T)=>(a(),d("div",td,[T[21]||(T[21]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Cài đặt hệ thống",-1)),g.value?(a(),d("div",sd,E(g.value),1)):q("",!0),v.value?(a(),d("div",ad,E(v.value),1)):q("",!0),e("form",{onSubmit:Oe(u,["prevent"])},[e("div",ld,[T[12]||(T[12]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Ứng dụng",-1)),e("div",od,[e("div",null,[T[10]||(T[10]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_NAME",-1)),V(e("input",{"onUpdate:modelValue":T[0]||(T[0]=B=>s.value.APP_NAME=B),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"VPS Manager"},null,512),[[oe,s.value.APP_NAME]])]),e("div",null,[T[11]||(T[11]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_URL",-1)),V(e("input",{"onUpdate:modelValue":T[1]||(T[1]=B=>s.value.APP_URL=B),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"https://vps.yourdomain.com"},null,512),[[oe,s.value.APP_URL]])])])]),e("div",nd,[T[14]||(T[14]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"SSL",-1)),e("div",rd,[e("div",null,[T[13]||(T[13]=e("label",{class:"block text-sm text-gray-600 mb-1"},"SSL_EMAIL",-1)),V(e("input",{"onUpdate:modelValue":T[2]||(T[2]=B=>s.value.SSL_EMAIL=B),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"admin@yourdomain.com"},null,512),[[oe,s.value.SSL_EMAIL]])])])]),e("div",id,[e("div",dd,[T[15]||(T[15]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Cloudflare Accounts",-1)),e("button",{type:"button",onClick:T[3]||(T[3]=B=>f.value=!0),class:"bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm"},"+ Thêm Account")]),y.value.length===0?(a(),d("div",ud,"Chưa có Cloudflare account nào")):(a(),d("div",cd,[(a(!0),d(ve,null,fe(y.value,B=>(a(),d("div",{key:B.id,class:"border border-gray-200 rounded-lg p-4"},[e("div",pd,[e("div",md,[e("div",gd,[e("h3",vd,E(B.name),1),B.is_default?(a(),d("span",fd,"Default")):q("",!0)]),e("p",bd,E(B.email),1)]),e("div",yd,[B.is_default?q("",!0):(a(),d("button",{key:0,type:"button",onClick:z=>M(B.id),class:"text-xs text-blue-600 hover:text-blue-800"},"Set Default",8,hd)),e("button",{type:"button",onClick:z=>J(B.id),class:"text-xs text-red-600 hover:text-red-800"},"Xóa",8,xd)])])]))),128))]))]),f.value?(a(),d("div",wd,[e("div",_d,[e("div",kd,[T[16]||(T[16]=e("h3",{class:"text-lg font-semibold"},"Thêm Cloudflare Account",-1)),e("button",{type:"button",onClick:T[4]||(T[4]=B=>f.value=!1),class:"text-gray-500"},"✕")]),e("div",$d,[e("div",null,[T[17]||(T[17]=e("label",{class:"block text-sm text-gray-700 mb-1"},"Tên tài khoản",-1)),V(e("input",{"onUpdate:modelValue":T[5]||(T[5]=B=>S.value.name=B),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"Cloudflare Account 1"},null,512),[[oe,S.value.name]])]),e("div",null,[T[18]||(T[18]=e("label",{class:"block text-sm text-gray-700 mb-1"},"Email",-1)),V(e("input",{"onUpdate:modelValue":T[6]||(T[6]=B=>S.value.email=B),type:"email",class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"admin@example.com"},null,512),[[oe,S.value.email]])]),e("div",null,[T[19]||(T[19]=e("label",{class:"block text-sm text-gray-700 mb-1"},"API Key",-1)),V(e("input",{"onUpdate:modelValue":T[7]||(T[7]=B=>S.value.api_key=B),type:"password",class:"w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[oe,S.value.api_key]])]),e("div",Cd,[V(e("input",{"onUpdate:modelValue":T[8]||(T[8]=B=>S.value.is_default=B),type:"checkbox",id:"is-default",class:"rounded"},null,512),[[ct,S.value.is_default]]),T[20]||(T[20]=e("label",{for:"is-default",class:"text-sm text-gray-700"},"Set làm account mặc định",-1))])]),e("div",Sd,[e("button",{type:"button",onClick:T[9]||(T[9]=B=>f.value=!1),class:"px-4 py-2 rounded-md border border-gray-300"},"Hủy"),e("button",{type:"button",onClick:k,class:"px-4 py-2 bg-blue-600 text-white rounded-md"},"Thêm")])])])):q("",!0),e("div",Td,[e("button",{type:"submit",onClick:Oe(u,["prevent"]),disabled:c.value,class:Ie(["bg-blue-600 text-white px-4 py-2 rounded-md",{"opacity-50 cursor-not-allowed":c.value}])},E(c.value?"Đang lưu...":"Lưu cài đặt"),11,jd)])],32)]))}},Fd={class:"min-h-screen bg-gray-100"},Ad={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Ld={class:"px-4 py-6 sm:px-0"},Rd={class:"flex justify-between items-center mb-6"},Md={class:"text-3xl font-bold text-gray-900"},Id={class:"flex items-center gap-2"},Pd=["disabled","title"],Ud={class:"bg-white shadow rounded-lg p-6"},Dd={class:"space-y-4"},zd={class:"flex justify-between items-start"},Nd={class:"inline-flex items-center gap-2 mb-2"},Vd=["checked","onChange"],Od={class:"font-medium"},Bd={class:"text-sm text-gray-500"},Hd={class:"text-sm text-gray-500"},qd={class:"text-sm text-gray-500"},Wd={class:"flex gap-2"},Yd=["href"],Kd=["href"],Xd=["onClick","disabled"],Jd={key:0,class:"text-center text-gray-500"},Gd={class:"bg-white rounded-lg shadow-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Qd={class:"space-y-4"},Zd={class:"flex items-center gap-3"},eu={class:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-md border border-blue-200 text-sm font-semibold cursor-pointer hover:bg-blue-100 transition-colors"},tu={key:0,class:"text-sm text-gray-500"},su={key:1,class:"text-sm text-green-600 font-medium"},au={key:0,class:"border-t pt-4"},lu={key:1,class:"border-t pt-4"},ou={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},nu={class:"text-sm font-medium text-gray-700 w-32 shrink-0"},ru=["onUpdate:modelValue"],iu=["value"],du={key:0,class:"bg-gray-50 rounded-md p-4 mt-4"},uu={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs"},cu={class:"font-medium text-gray-600"},pu={class:"ml-2 text-gray-800"},mu={key:2,class:"border-t pt-4"},gu={class:"border border-gray-300 rounded-md p-3 max-h-48 overflow-auto"},vu=["value"],fu={class:"text-sm"},bu={class:"text-sm space-y-1"},yu={class:"text-green-600"},hu={class:"text-blue-600"},xu={class:"text-gray-600"},wu={key:0,class:"mt-2"},_u={class:"text-xs text-red-600 mt-1 max-h-32 overflow-y-auto"},ku={class:"flex justify-end gap-3 pt-4 border-t"},$u=["disabled"],Cu={__name:"PagesManagement",setup(t){const c=mt().params.websiteId,g=m(null),v=m([]),y=m([]),f=m([]),S=m([]),$=m(!1),o=m("");m(!1);const k=m(!1),M=m(null),J=m(!1),u=m(null),se=m([]),T=m([]),B=m([]),z=m("detail"),w={detail:{name:{label:"Title",jsonField:"name"},address:{label:"Địa điểm",jsonField:"address"},about:{label:"Giới thiệu",jsonField:"about"},images:{label:"Ảnh gallery",jsonField:"images"},facilities:{label:"Amenities",jsonField:"facilities"},faqs:{label:"FAQs",jsonField:"faqs"},houseRules:{label:"Useful Information",jsonField:"houseRules"}},blank:{name:{label:"Title",jsonField:"name"},content:{label:"Content",jsonField:"content"}},home:{name:{label:"Title",jsonField:"name"},about:{label:"About",jsonField:"about"},services:{label:"Services",jsonField:"services"},testimonials:{label:"Testimonials",jsonField:"testimonials"}},listing:{name:{label:"Title",jsonField:"name"},items:{label:"Items",jsonField:"items"},filters:{label:"Filters",jsonField:"filters"}}},x=m({name:{label:"Title",jsonField:"name"},address:{label:"Địa điểm",jsonField:"address"},about:{label:"Giới thiệu",jsonField:"about"},images:{label:"Ảnh gallery",jsonField:"images"},facilities:{label:"Amenities",jsonField:"facilities"},faqs:{label:"FAQs",jsonField:"faqs"},houseRules:{label:"Useful Information",jsonField:"houseRules"}}),P=Me(()=>x.value),R=Me(()=>{const h=o.value.trim().toLowerCase();return h?v.value.filter(r=>(r.title||"").toLowerCase().includes(h)||(r.path||"").toLowerCase().includes(h)):v.value}),W=Me(()=>M.value&&M.value.length>0?M.value[0]:null),ae=Me(()=>M.value&&M.value.length>0&&x.value.name.jsonField),_e=async()=>{const h=await D.get(`/api/websites/${c}`);g.value=h.data},pe=async()=>{const h=await D.get(`/api/websites/${c}/pages`);v.value=h.data.map(r=>({...r,__site:g.value}))},ye=async()=>{const h=await D.get("/api/websites");y.value=h.data||[]},Ue=Me(()=>{var r;return(((r=g.value)==null?void 0:r.domain)||"").trim().replace(/^[^.]+\./,"")}),Ae=Me(()=>{const h=Ue.value;return h&&(y.value||[]).find(r=>String(r.domain||"").trim()===h)||null}),he=Me(()=>{const h=g.value;return h&&String(h.domain||"").trim().split(".").length>2&&Ae.value?`/websites/${Ae.value.id}/subdomains`:"/websites"}),xe=async h=>{if(confirm(`Delete page ${h.path}?`))try{S.value=[...S.value,h.id],await D.delete(`/api/pages/${h.id}`),Qe.success("Page deleted"),f.value=f.value.filter(r=>r!==h.id),await pe()}catch{Qe.error("Failed to delete page")}finally{S.value=S.value.filter(r=>r!==h.id)}},Le=h=>{const r=h.__site||g.value;if(!r)return"#";const _=(r.ssl_enabled?"https://":"http://")+r.domain,l=h.path||"/",A=h.filename||"";if(A.toLowerCase()==="index.html")return _+l;const b=l.endsWith("/")?"":"/";return _+l+b+A},ze=h=>{const r=h.__site||g.value;if(!r)return"#";const _=r.id,l=((h==null?void 0:h.path)||"/").trim(),A=l==="/"?`/preview/${_}`:`/preview/${_}${l.startsWith("/")?"":"/"}${l}`,b=localStorage.getItem("adminToken")||"";if(!b)return A;const p=A.includes("?")?"&":"?";return`${A}${p}token=${encodeURIComponent(b)}`},Ne=h=>{const r=h.id;f.value.includes(r)?f.value=f.value.filter(_=>_!==r):f.value=[...f.value,r]},Be=async()=>{if(f.value.length!==0&&confirm(`Delete ${f.value.length} selected pages?`)){$.value=!0;try{const h=[...f.value];await Promise.all(h.map(async r=>{S.value=[...S.value,r];try{await D.delete(`/api/pages/${r}`)}finally{S.value=S.value.filter(_=>_!==r)}})),Qe.success("Selected pages deleted"),f.value=[],await pe()}catch{Qe.error("Failed to delete selected pages")}finally{$.value=!1}}},me=async()=>{try{const h=await D.get(`/api/websites/${c}/folders`);se.value=h.data||[]}catch(h){console.error("Failed to load folders:",h)}},ne=h=>{const r=h.target.files[0];if(!r)return;const _=new FileReader;_.onload=l=>{try{const A=JSON.parse(l.target.result);let b=A;if(Array.isArray(A)&&A.length>0&&A[0].result&&(b=A.map(p=>p.result)),M.value=b,u.value=null,b.length>0){const p=b[0],Z=Object.keys(p);B.value=Z,j()}Qe.success(`Loaded ${b.length} items from file`)}catch(A){Qe.error("Invalid JSON file"),console.error(A)}},_.readAsText(r)},j=()=>{const h=w[z.value]||w.detail;x.value=JSON.parse(JSON.stringify(h));const r=B.value;if(z.value==="detail"){const _={name:r.find(l=>l.toLowerCase().includes("name")||l.toLowerCase().includes("title")),address:r.find(l=>l.toLowerCase().includes("address")||l.toLowerCase().includes("location")),about:r.find(l=>l.toLowerCase().includes("about")||l.toLowerCase().includes("description")),images:r.find(l=>l.toLowerCase().includes("image")||l.toLowerCase().includes("photo")),facilities:r.find(l=>l.toLowerCase().includes("facilit")||l.toLowerCase().includes("amenity")),faqs:r.find(l=>l.toLowerCase().includes("faq")||l.toLowerCase().includes("question")),houseRules:r.find(l=>l.toLowerCase().includes("rule")||l.toLowerCase().includes("policy")||l.toLowerCase().includes("info"))};Object.keys(_).forEach(l=>{_[l]&&x.value[l]&&(x.value[l].jsonField=_[l])})}else if(z.value==="blank"){const _={name:r.find(l=>l.toLowerCase().includes("name")||l.toLowerCase().includes("title")),content:r.find(l=>l.toLowerCase().includes("content")||l.toLowerCase().includes("description")||l.toLowerCase().includes("body"))};Object.keys(_).forEach(l=>{_[l]&&x.value[l]&&(x.value[l].jsonField=_[l])})}else if(z.value==="home"){const _={name:r.find(l=>l.toLowerCase().includes("name")||l.toLowerCase().includes("title")),about:r.find(l=>l.toLowerCase().includes("about")||l.toLowerCase().includes("description")),services:r.find(l=>l.toLowerCase().includes("service")),testimonials:r.find(l=>l.toLowerCase().includes("testimonial")||l.toLowerCase().includes("review"))};Object.keys(_).forEach(l=>{_[l]&&x.value[l]&&(x.value[l].jsonField=_[l])})}else if(z.value==="listing"){const _={name:r.find(l=>l.toLowerCase().includes("name")||l.toLowerCase().includes("title")),items:r.find(l=>l.toLowerCase().includes("item")||l.toLowerCase().includes("list")),filters:r.find(l=>l.toLowerCase().includes("filter")||l.toLowerCase().includes("category"))};Object.keys(_).forEach(l=>{_[l]&&x.value[l]&&(x.value[l].jsonField=_[l])})}},ee=h=>{if(!W.value||!h)return"-";const r=W.value[h];return Array.isArray(r)?`${r.length} items`:typeof r=="object"&&r!==null?JSON.stringify(r).substring(0,50)+"...":String(r||"-").substring(0,100)},I=()=>{k.value=!1,setTimeout(()=>{k.value||(M.value=null,u.value=null,B.value=[],T.value=[],z.value="detail")},300)},X=async()=>{var h,r;if(M.value){J.value=!0,u.value=null;try{const _=M.value.map(A=>{const b={};return Object.keys(x.value).forEach(p=>{const Z=x.value[p].jsonField;Z&&A[Z]!==void 0&&(b[p]=A[Z])}),b}),l=await D.post(`/api/websites/${c}/pages/import`,{data:_,folder_ids:T.value,template_type:z.value});u.value=l.data,Qe.success(`Import completed: ${l.data.stats.created} created, ${l.data.stats.updated} updated`),await pe()}catch(_){Qe.error("Import failed: "+(((r=(h=_.response)==null?void 0:h.data)==null?void 0:r.message)||_.message)),console.error(_)}finally{J.value=!1}}};return Ze(async()=>{await _e(),await pe(),await ye(),await me()}),(h,r)=>{var l;const _=nt("router-link");return a(),d("div",Fd,[e("div",Ad,[e("div",Ld,[e("div",Rd,[e("h1",Md,E(((l=g.value)==null?void 0:l.domain)||"..."),1),e("div",Id,[K(_,{to:he.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Back"},{default:je(()=>[...r[5]||(r[5]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5"}),e("path",{d:"M12 19l-7-7 7-7"})],-1)])]),_:1},8,["to"]),V(e("input",{"onUpdate:modelValue":r[0]||(r[0]=A=>o.value=A),placeholder:"Search",class:"h-9 w-56 rounded-md border border-gray-300 px-3"},null,512),[[oe,o.value]]),e("button",{onClick:r[1]||(r[1]=A=>k.value=!0),class:"h-9 px-3 flex items-center justify-center gap-1 rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50",title:"Import Pages"},[...r[6]||(r[6]=[xt('<svg viewBox="0 0 24 24" class="size-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg><span class="text-sm">Import</span>',2)])]),K(_,{to:`/websites/${C(c)}/pages/new`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Add Page"},{default:je(()=>[...r[7]||(r[7]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])]),_:1},8,["to"]),e("button",{onClick:Be,disabled:f.value.length===0||$.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:`Delete Selected (${f.value.length})`},[$.value?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(pt),{key:1,class:"size-4"}))],8,Pd)])]),e("div",Ud,[e("div",Dd,[(a(!0),d(ve,null,fe(R.value,A=>{var b,p;return a(),d("div",{key:A.id,class:"border rounded-lg p-4"},[e("div",zd,[e("div",null,[e("label",Nd,[e("input",{type:"checkbox",checked:f.value.includes(A.id),onChange:Z=>Ne(A)},null,40,Vd)]),e("h4",Od,E(A.title||"(No title)"),1),e("p",Bd,"Path: "+E(A.path),1),e("p",Hd,"File: "+E(A.filename),1),e("p",qd,"Website: "+E((b=A.__site)==null?void 0:b.domain),1)]),e("div",Wd,[e("a",{href:Le(A),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Live"},[K(C(vs),{class:"size-4"})],8,Yd),e("a",{href:ze(A),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[...r[8]||(r[8]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,Kd),K(_,{to:`/websites/${((p=A.__site)==null?void 0:p.id)||C(c)}/pages/${A.id}`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},{default:je(()=>[K(C(ps),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:Z=>xe(A),disabled:S.value.includes(A.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[S.value.includes(A.id)?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(pt),{key:1,class:"size-4"}))],8,Xd)])])])}),128)),R.value.length===0?(a(),d("div",Jd,"No pages found")):q("",!0)])]),k.value?(a(),d("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:r[4]||(r[4]=Oe(A=>k.value=!1,["self"]))},[e("div",Gd,[e("div",{class:"flex justify-between items-center mb-4"},[r[10]||(r[10]=e("h2",{class:"text-xl font-bold"},"Import Pages from JSON",-1)),e("button",{onClick:I,class:"text-gray-500 hover:text-gray-700"},[...r[9]||(r[9]=[e("svg",{viewBox:"0 0 24 24",class:"size-6",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18"}),e("path",{d:"M6 6l12 12"})],-1)])])]),e("div",Qd,[e("div",null,[r[13]||(r[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"1"),we(" Upload JSON File ")])],-1)),e("div",Zd,[e("label",eu,[r[11]||(r[11]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),r[12]||(r[12]=e("span",null,"Choose File",-1)),e("input",{type:"file",onChange:ne,accept:".json",class:"hidden"},null,32)]),M.value?(a(),d("span",su,"✓ "+E(M.value.length)+" items loaded",1)):(a(),d("span",tu,"No file chosen"))])]),M.value?(a(),d("div",au,[r[15]||(r[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"2"),we(" Select Template Type ")])],-1)),V(e("select",{"onUpdate:modelValue":r[2]||(r[2]=A=>z.value=A),onChange:j,class:"w-full md:w-1/2 border-gray-300 rounded-md text-sm cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400"},[...r[14]||(r[14]=[e("option",{value:"detail"},"Hotel Detail",-1),e("option",{value:"blank"},"Blank (HTML)",-1),e("option",{value:"home"},"Home Page",-1),e("option",{value:"listing"},"Listing Page",-1)])],544),[[We,z.value]]),r[16]||(r[16]=e("p",{class:"text-xs text-gray-500 mt-1"},"Select which template to use for imported pages",-1))])):q("",!0),M.value&&B.value.length>0?(a(),d("div",lu,[r[19]||(r[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"3"),we(" Map JSON Fields to Template Fields ")])],-1)),e("div",ou,[(a(!0),d(ve,null,fe(P.value,(A,b)=>(a(),d("div",{key:b,class:"flex items-center gap-3"},[e("label",nu,E(A.label)+":",1),V(e("select",{"onUpdate:modelValue":p=>A.jsonField=p,class:"flex-1 text-sm border-gray-300 rounded-md cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 transition-colors"},[r[17]||(r[17]=e("option",{value:null},"-- Skip --",-1)),(a(!0),d(ve,null,fe(B.value,p=>(a(),d("option",{key:p,value:p},E(p),9,iu))),128))],8,ru),[[We,A.jsonField]])]))),128))]),W.value?(a(),d("div",du,[r[18]||(r[18]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-2"},"Preview (First Item):",-1)),e("div",uu,[(a(!0),d(ve,null,fe(P.value,(A,b)=>V((a(),d("div",{key:b},[e("span",cu,E(A.label)+":",1),e("span",pu,E(ee(A.jsonField)),1)])),[[rs,A.jsonField]])),128))])])):q("",!0)])):q("",!0),M.value&&se.value.length>0?(a(),d("div",mu,[r[20]||(r[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"4"),we(" Assign to Folders (optional) ")])],-1)),e("div",gu,[(a(!0),d(ve,null,fe(se.value,A=>(a(),d("label",{key:A.id,class:"flex items-center gap-2 cursor-pointer mb-2"},[V(e("input",{type:"checkbox",value:A.id,"onUpdate:modelValue":r[3]||(r[3]=b=>T.value=b),class:"rounded cursor-pointer"},null,8,vu),[[ct,T.value]]),e("span",fu,E(A.name),1)]))),128))])])):q("",!0),u.value?(a(),d("div",{key:3,class:Ie(["p-4 rounded-md border-t pt-4",u.value.stats.errors.length>0?"bg-yellow-50":"bg-green-50"])},[r[22]||(r[22]=e("p",{class:"font-medium mb-2"},"Import Results:",-1)),e("ul",bu,[e("li",null,"Total: "+E(u.value.stats.total),1),e("li",yu,"Created: "+E(u.value.stats.created),1),e("li",hu,"Updated: "+E(u.value.stats.updated),1),e("li",xu,"Skipped: "+E(u.value.stats.skipped),1)]),u.value.stats.errors.length>0?(a(),d("div",wu,[r[21]||(r[21]=e("p",{class:"text-sm font-medium text-red-600"},"Errors:",-1)),e("ul",_u,[(a(!0),d(ve,null,fe(u.value.stats.errors,(A,b)=>(a(),d("li",{key:b},E(A.title)+": "+E(A.error),1))),128))])])):q("",!0)],2)):q("",!0),e("div",ku,[e("button",{onClick:I,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},E(u.value?"Close":"Cancel"),1),u.value?q("",!0):(a(),d("button",{key:0,onClick:X,disabled:!ae.value||J.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2"},[J.value?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):q("",!0),e("span",null,E(J.value?"Importing...":"Import"),1)],8,$u))])])])])):q("",!0)])])])}}},Su={class:"min-h-screen bg-gray-100"},Tu={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},ju={class:"px-4 py-6 sm:px-0"},Eu={class:"flex justify-between items-center mb-6"},Fu={class:"text-3xl font-bold text-gray-900"},Au={class:"flex items-center gap-2"},Lu=["href"],Ru=["href"],Mu={class:"bg-white shadow rounded-lg p-6"},Iu={class:"mb-4"},Pu={class:"mb-4"},Uu={class:"mb-4"},Du={class:"mb-4"},zu={class:"flex items-center justify-between"},Nu={class:"flex items-center gap-3"},Vu={class:"mt-1 border border-gray-300 rounded-md p-3 space-y-3"},Ou={class:"space-y-1"},Bu=["disabled","onClick"],Hu=["value","onChange"],qu={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Wu={class:"bg-white rounded-lg shadow p-6 w-full max-w-md"},Yu={class:"flex items-center justify-between mb-4"},Ku={class:"space-y-3"},Xu=["value"],Ju={class:"pt-2 border-t border-gray-200"},Gu={class:"text-xs text-gray-600"},Qu={class:"flex justify-end gap-2 mt-6"},Zu={class:"mb-4"},ec={key:0,class:"mb-4 space-y-4"},tc={key:1,class:"mb-4 space-y-4"},sc={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ac={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},lc={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},oc=["value"],nc={class:"text-sm"},rc={class:"space-y-3"},ic={class:"flex items-center gap-2"},dc={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},uc=["onClick"],cc=["onUpdate:modelValue"],pc=["onUpdate:modelValue"],mc={class:"space-y-3"},gc={class:"flex items-center gap-2"},vc={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},fc=["onClick"],bc=["onUpdate:modelValue"],yc=["onUpdate:modelValue"],hc={key:2,class:"mb-4"},xc={key:3,class:"mb-4"},wc={key:0,class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},_c={class:"flex justify-end gap-3"},kc=["disabled"],$c={key:0,class:"inline-flex items-center gap-2"},Cc={key:1},ls={__name:"PageEdit",setup(t){const s=mt(),c=ht(),g=s.params.websiteId,v=s.params.pageId,y=m(s.name==="PageCreate"||v==="new"||!v),f=m("blank"),S=m(!1),$=m(""),o=m({title:"",location:"",phone:"",galleryRaw:"",about1:"",pageContent:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),k=m([]),M=m([]),J=m(null),u=m(""),se=m(null),T=m(!1),B=m(""),z=m(!1);m(null),m(""),m(""),m(null);const w=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],x=m({path:"",filename:"",title:"",content:""}),P=m(null),R=m([]),W=m(null),ae=m(!1),_e=m(null),pe=m(null),ye=async()=>{if(y.value)return;const i=(await D.get(`/api/pages/${v}`)).data;if(x.value={path:i.path,filename:i.filename,title:i.title||"",content:i.content||""},i.template_type){if(S.value=!!i.template_type,i.template_type==="page"&&i.template_data)o.value={...o.value,pageContent:i.template_data.content||""};else if((i.template_type==="hotel-detail"||i.template_type==="hotel-detail-1"||i.template_type==="detail")&&i.template_data){let U=i.template_data.galleryRaw||"";!U&&Array.isArray(i.template_data.gallery)&&(U=i.template_data.gallery.join(`
`)),o.value={title:i.template_data.title||"",location:i.template_data.location||i.template_data.location_text||"",phone:i.template_data.phone||"",rating:i.template_data.rating||0,galleryRaw:U,about1:i.template_data.about1||"",pageContent:"",amenities:Array.isArray(i.template_data.amenities)?i.template_data.amenities:[],info:Array.isArray(i.template_data.info)?i.template_data.info:[{subject:"",description:""},{subject:"",description:""}],faqs:Array.isArray(i.template_data.faqs)?i.template_data.faqs:[{q:"",a:""},{q:"",a:""}]}}f.value=i.template_type}else f.value="blank",S.value=!1;M.value=(i.folders||[]).map(U=>Number(U.id)),J.value=i.primary_folder_id==null?null:Number(i.primary_folder_id)},Ue=async()=>{const H=(x.value.title||"").trim();let i="";try{i=(await D.get("/templates/laravel-hotel-1/page/index.html")).data||""}catch{i='<!DOCTYPE html><html><head><meta charset="utf-8"><title>{{TITLE}}</title></head><body></body></html>'}let U="",te="";try{U=(await D.get("/templates/_shared/header.html")).data||""}catch{}try{te=(await D.get("/templates/_shared/footer.html")).data||""}catch{}U&&(i=i.replace(/<header[^>]*>[\s\S]*?<\/header>/i,U)),te&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(i)?i=i.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,te):/<\/body>/i.test(i)?i=i.replace(/<\/body>/i,te+"</body>"):i+=`
`+te);const F={title:H||"Page",content:o.value.pageContent||""},Y=`<script type="application/json" id="page-data">${JSON.stringify(F)}<\/script>`;return i=i.replace(/<\/head>/i,Y+`
</head>`),i=i.replace(/<title>[^<]*<\/title>/i,`<title>${F.title}</title>`),i||'<!DOCTYPE html><html><head><meta charset="utf-8"><title>'+(H||"Page")+'</title></head><body><div id="page-content">'+(o.value.pageContent||"")+"</div></body></html>"},Ae=async()=>{const H=(o.value.galleryRaw||"").split(`
`).map(He=>He.trim()).filter(Boolean),U=(M.value||[]).reduce((He,et)=>{if(He==null)return et;const lt=X(He);return X(et)>lt?et:He},null),te=I(U),F=te.length>1?[te[0],te[te.length-1]]:te,Y=(x.value.title||"").trim(),de=["Home",...F.map(He=>He.name||""),Y];let le=(await D.get("/templates/laravel-hotel-1/detail/index.html")).data||"",Se="",qe="";try{Se=(await D.get("/templates/_shared/header.html")).data||""}catch{}try{qe=(await D.get("/templates/_shared/footer.html")).data||""}catch{}Se&&(le=le.replace(/<header[^>]*>[\s\S]*?<\/header>/i,Se)),qe&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(le)?le=le.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,qe):/<\/body>/i.test(le)?le=le.replace(/<\/body>/i,qe+"</body>"):le+=`
`+qe);const tt=o.value.amenities||[],Ve=H.map(He=>String(He).replace(/<\/script>/gi,"<\\/script>")),Je={title:Y||"Hotel",location:o.value.location||"",location_text:o.value.location||"",phone:o.value.phone||"",about1:o.value.about1||"",amenities:tt,faqs:o.value.faqs||[],info:o.value.info||[],gallery:Ve,breadcrumb_items:de.filter(Boolean)},at=`<script type="application/json" id="page-data">${JSON.stringify(Je)}<\/script>`;return le=le.replace("{{GALLERY_DATA_SCRIPT}}",at),le=le.replace(/<title>[^<]*<\/title>/i,`<title>${Je.title}</title>`),le},he=async()=>{const H=await D.get(`/api/websites/${g}`);P.value=H.data},xe=async()=>{try{const H=await D.get("/api/websites");R.value=H.data||[]}catch{R.value=[]}},Le=Me(()=>{const H=P.value;if(!H)return"/websites";const i=(H.domain||"").trim(),U=i.replace(/^[^.]+\./,"");if(U&&U!==i){const te=(R.value||[]).find(F=>String(F.domain).trim()===U);if(te&&te.id)return`/websites/${te.id}/subdomains`}return"/websites"}),ze=async()=>{try{const H=await D.get("/api/settings");W.value=H.data||{}}catch{W.value={}}},Ne=async()=>{const U=((await D.get(`/api/websites/${g}/folders`)).data||[]).map(te=>({...te,id:Number(te.id),parent_id:te.parent_id==null?null:Number(te.parent_id)}));k.value=U},Be=async()=>{const H=(u.value||"").trim();if(!H)return;let i=(B.value||"").trim();i||(i=r(H));const U={name:H,slug:i};se.value&&(U.parent_id=Number(se.value));const F=(await D.post(`/api/websites/${g}/folders`,U)).data;k.value=[...k.value,F],M.value=[...M.value,F.id],u.value="",se.value=null,B.value="",z.value=!1,T.value=!1},me=async()=>{var H,i,U,te,F;ae.value=!0;try{const Y=(H=window.tinymce)==null?void 0:H.get("page-content-editor");if(Y&&(o.value.pageContent=Y.getContent()||""),y.value){let de;if(f.value==="blank"?de=$.value||x.value.content||"":f.value==="page"?de=await Ue():de=await Ae(),x.value.content=de,x.value.filename=(x.value.filename||"index.html").trim(),!(x.value.path||"").trim()){const qe=(M.value||[]).reduce((Ve,Je)=>{if(Ve==null)return Je;const at=X(Ve);return X(Je)>at?Je:Ve},null),tt=J.value||qe;if(tt){const Ve=ee(tt);Ve&&(x.value.path=`/${Ve}`)}}x.value.path||(x.value.path="/");const le={...x.value};if(f.value==="page")le.template_type="page",le.template_data={title:(x.value.title||"").trim()||"Page",content:o.value.pageContent||""};else if(f.value!=="blank"){le.template_type=f.value;const Se=(o.value.galleryRaw||"").split(`
`).map(qe=>qe.trim()).filter(Boolean);le.template_data={title:(o.value.title||x.value.title||"").trim()||"Hotel",location:o.value.location||"",location_text:o.value.location||"",phone:o.value.phone||"",rating:parseFloat(o.value.rating)||0,about1:o.value.about1||"",amenities:o.value.amenities||[],faqs:o.value.faqs||[],info:o.value.info||[],gallery:Se,galleryRaw:o.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(o.value.title||"").trim()].filter(Boolean)}}else le.template_type="blank",le.template_data=null;le.folder_ids=[...M.value],le.primary_folder_id=J.value,await D.post(`/api/websites/${g}/pages`,le)}else{const de={...x.value};let De;if(f.value==="blank"?De=x.value.content||"":f.value==="page"?De=await Ue():De=await Ae(),de.content=De,de.filename=(de.filename||"index.html").trim(),f.value==="page")de.template_type="page",de.template_data={title:(x.value.title||"").trim()||"Page",content:o.value.pageContent||""};else if(f.value!=="blank"){de.template_type=f.value;const Se=(o.value.galleryRaw||"").split(`
`).map(qe=>qe.trim()).filter(Boolean);de.template_data={title:(o.value.title||x.value.title||"").trim()||"Hotel",location:o.value.location||"",location_text:o.value.location||"",phone:o.value.phone||"",rating:parseFloat(o.value.rating)||0,about1:o.value.about1||"",amenities:o.value.amenities||[],faqs:o.value.faqs||[],info:o.value.info||[],gallery:Se,galleryRaw:o.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(o.value.title||"").trim()].filter(Boolean)}}else de.template_type="blank",de.template_data=null;if(!(de.path||"").trim()){const qe=(M.value||[]).reduce((Ve,Je)=>{if(Ve==null)return Je;const at=X(Ve);return X(Je)>at?Je:Ve},null),tt=J.value||qe;if(tt){const Ve=ee(tt);Ve&&(de.path=`/${Ve}`)}}de.path||(de.path="/"),de.folder_ids=[...M.value],de.primary_folder_id=J.value,await D.put(`/api/pages/${v}`,de)}c.push(`/websites/${g}/pages`)}catch(Y){const de=((U=(i=Y==null?void 0:Y.response)==null?void 0:i.data)==null?void 0:U.message)||((F=(te=Y==null?void 0:Y.response)==null?void 0:te.data)==null?void 0:F.error)||(Y==null?void 0:Y.message)||"Lưu trang thất bại";alert(de)}finally{ae.value=!1}},ne=()=>{if(!P.value)return"#";const H=(P.value.ssl_enabled?"https://":"http://")+P.value.domain,i=x.value.path||"/",U=x.value.filename||"",te=i.endsWith("/")?"":"/";return U.toLowerCase()==="index.html"?H+i:H+i+te+U},j=()=>{var de;if(!P.value)return"#";const H=(((de=W.value)==null?void 0:de.APP_URL)||(P.value.ssl_enabled?"https://":"http://")+P.value.domain).replace(/\/$/,""),i=(x.value.path||"/").trim();let U;if(i==="/"||i==="")U=`${H}/preview/${P.value.id}`;else{const De=i.replace(/^\//,"");U=`${H}/preview/${P.value.id}/${encodeURIComponent(De)}`}const te=localStorage.getItem("adminToken"),F=new URLSearchParams;te&&F.set("token",te),F.set("hide_preview_bar","1"),F.set("v",String(Date.now()));const Y=F.toString();return Y?`${U}?${Y}`:U},ee=H=>{if(!H)return"";const i=new Map((k.value||[]).map(F=>[String(F.id),F]));let U=i.get(String(H));const te=[];for(;U&&(U.slug&&te.unshift(U.slug),!(!U.parent_id||(U=i.get(String(U.parent_id)),U&&String(U.id)===String(H)))););return te.join("/")},I=H=>{if(!H)return[];const i=new Map((k.value||[]).map(Y=>[String(Y.id),Y])),U=[],te=new Set;let F=i.get(String(H));for(;F&&!te.has(F.id)&&(U.unshift(F),te.add(F.id),!!F.parent_id);)F=i.get(String(F.parent_id));return U},X=H=>{let i=0;const U=k.value||[],te=new Map(U.map(Y=>[String(Y.id),Y]));let F=U.find(Y=>String(Y.id)===String(H));for(;F&&F.parent_id!=null;)i+=1,F=te.get(String(F.parent_id));return i},h=Me(()=>{const H=[...k.value||[]],i=new Map(H.map(le=>[String(le.id),le])),U=le=>le.sort((Se,qe)=>(Se.name||"").localeCompare(qe.name||"")),te=le=>H.filter(Se=>String(Se.parent_id)===String(le)),F=le=>!le.parent_id||!i.has(String(le.parent_id))||String(le.parent_id)===String(le.id),Y=U(H.filter(F)),de=[],De=(le,Se)=>{de.push({...le,depth:Se}),U(te(le.id)).forEach(qe=>De(qe,Se+1))};return Y.forEach(le=>De(le,0)),de}),r=H=>(H||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),_=()=>{z.value||(B.value=r(u.value))},l=H=>{if(J.value===H){J.value=null;return}J.value||(J.value=H)},A=H=>{if(M.value.includes(H)){const i=k.value.find(U=>U.id===H);if(i&&i.parent_id){const U=te=>{if(!te)return;M.value.includes(te)||M.value.push(te);const F=k.value.find(Y=>Y.id===te);F&&F.parent_id&&U(F.parent_id)};U(i.parent_id)}}J.value&&!M.value.includes(J.value)&&(J.value=null)},b=()=>{o.value.faqs=[...o.value.faqs||[],{q:"",a:""}]},p=()=>{o.value.info=[...o.value.info||[],{subject:"",description:""}]},Z=H=>{o.value.faqs=(o.value.faqs||[]).filter((i,U)=>U!==H)},ie=H=>{o.value.info=(o.value.info||[]).filter((i,U)=>U!==H)},ue=Me(()=>{const i=(x.value.content||"").split(`
`).length;return i>0?i:1}),re=()=>{_e.value&&pe.value&&(_e.value.scrollTop=pe.value.scrollTop)},Ce=async()=>{if(!window.tinymce){if(!document.querySelector('script[src*="tinymce.min.js"]')){const H=document.createElement("script");H.src="/dist/tinymce/tinymce.min.js",document.head.appendChild(H),await new Promise((i,U)=>{H.onload=i,H.onerror=U})}await new Promise(H=>{const i=()=>{window.tinymce?H():setTimeout(i,50)};i()})}},N=async()=>{await zt(),await new Promise(U=>setTimeout(U,100));const H=document.getElementById("page-content-editor");if(!H)return;await Ce();const i=window.tinymce.get("page-content-editor");i&&i.remove(),H.value=o.value.pageContent||"",window.tinymce.init({selector:"#page-content-editor",base_url:"/dist/tinymce",suffix:".min",menubar:!0,plugins:"link lists table image code charmap anchor searchreplace visualblocks fullscreen insertdatetime media help wordcount",toolbar:"undo redo | formatselect | bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media table | charmap anchor | code fullscreen | help",height:500,table_toolbar:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",image_title:!0,automatic_uploads:!1,file_picker_types:"image",content_style:"body { font-family: Arial, sans-serif; font-size: 14px; }",setup:U=>{U.on("Change KeyUp SetContent",()=>{o.value.pageContent=U.getContent()||""})}}).then(U=>{const te=U&&U[0];te&&(o.value.pageContent||"").trim()&&te.setContent(o.value.pageContent)})};return _t(f,async H=>{H==="page"&&await N()}),Ze(async()=>{await ze(),await Promise.all([he(),xe()]),await Ne(),await ye(),await zt();const H=document.getElementById("about1-editor");H&&(await Ce(),H.value=o.value.about1||"",window.tinymce.init({selector:"#about1-editor",base_url:"/dist/tinymce",suffix:".min",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:i=>{i.on("Change KeyUp SetContent",()=>{o.value.about1=i.getContent()||""})}}).then(i=>{const U=i&&i[0];U&&(o.value.about1||"").trim()&&U.setContent(o.value.about1)})),f.value==="page"&&await N()}),Ht(()=>{if(window.tinymce){const H=window.tinymce.get("about1-editor");H&&H.remove();const i=window.tinymce.get("page-content-editor");i&&i.remove()}}),(H,i)=>{var te;const U=nt("router-link");return a(),d("div",Su,[e("div",Tu,[e("div",ju,[e("div",Eu,[e("h1",Fu,E(y.value?"Create Page":"Edit Page"),1),e("div",Au,[y.value?q("",!0):(a(),d("a",{key:0,href:ne(),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[K(C(vs),{class:"size-4"})],8,Lu)),y.value?q("",!0):(a(),d("a",{key:1,href:j(),target:"_blank",class:"px-3 h-9 inline-flex items-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 text-sm"},"Preview",8,Ru)),K(U,{to:Le.value,class:"px-4 py-2 rounded-md border border-gray-300 bg-white"},{default:je(()=>[...i[21]||(i[21]=[we("Back",-1)])]),_:1},8,["to"])])]),e("div",Mu,[e("form",{onSubmit:Oe(me,["prevent"]),novalidate:""},[e("div",Iu,[i[22]||(i[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Path",-1)),V(e("input",{"onUpdate:modelValue":i[0]||(i[0]=F=>x.value.path=F),type:"text",placeholder:"/about-us",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,x.value.path]])]),e("div",Pu,[i[23]||(i[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Filename",-1)),V(e("input",{"onUpdate:modelValue":i[1]||(i[1]=F=>x.value.filename=F),type:"text",placeholder:"index.html",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,x.value.filename]])]),e("div",Uu,[i[24]||(i[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Title",-1)),V(e("input",{"onUpdate:modelValue":i[2]||(i[2]=F=>x.value.title=F),onInput:i[3]||(i[3]=F=>o.value.title=x.value.title),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[oe,x.value.title]])]),e("div",Du,[e("div",zu,[i[26]||(i[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thư mục",-1)),e("div",Nu,[K(U,{to:`/websites/${C(g)}/folders`,class:"text-sm text-primary"},{default:je(()=>[...i[25]||(i[25]=[we("Quản lý thư mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:i[4]||(i[4]=F=>T.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",Vu,[e("div",Ou,[i[27]||(i[27]=e("label",{class:"text-sm text-gray-700"},"Chọn thư mục",-1)),(a(!0),d(ve,null,fe(h.value,F=>(a(),d("div",{key:F.id,class:"flex items-center gap-2 cursor-pointer"},[e("button",{type:"button",class:"text-yellow-500 text-xs",disabled:J.value&&J.value!==F.id,onClick:Y=>l(F.id)},E(J.value===F.id?"★":"☆"),9,Bu),V(e("input",{type:"checkbox",value:F.id,"onUpdate:modelValue":i[5]||(i[5]=Y=>M.value=Y),onChange:Y=>A(F.id),class:"rounded cursor-pointer"},null,40,Hu),[[ct,M.value]]),e("span",{class:"text-sm",style:ot({paddingLeft:(F.depth>0?F.depth*16:0)+"px"})},E("↳ ".repeat(F.depth))+E(F.name),5)]))),128))])]),T.value?(a(),d("div",qu,[e("div",Wu,[e("div",Yu,[i[28]||(i[28]=e("h3",{class:"text-lg font-semibold"},"Tạo thư mục",-1)),e("button",{type:"button",onClick:i[6]||(i[6]=F=>T.value=!1),class:"text-gray-500"},"✕")]),e("div",Ku,[e("div",null,[i[29]||(i[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),V(e("input",{"onUpdate:modelValue":i[7]||(i[7]=F=>u.value=F),onInput:_,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[oe,u.value]])]),e("div",null,[i[30]||(i[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),V(e("input",{"onUpdate:modelValue":i[8]||(i[8]=F=>B.value=F),onInput:i[9]||(i[9]=F=>z.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[oe,B.value]])]),e("div",null,[i[32]||(i[32]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),V(e("select",{"onUpdate:modelValue":i[10]||(i[10]=F=>se.value=F),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[i[31]||(i[31]=e("option",{value:null},"(Không có)",-1)),(a(!0),d(ve,null,fe(h.value,F=>(a(),d("option",{key:F.id,value:F.id},E("↳ ".repeat(F.depth)+F.name),9,Xu))),128))],512),[[We,se.value]])]),e("div",Ju,[e("div",Gu,[i[34]||(i[34]=we("Sửa/Xóa chi tiết vui lòng vào trang ",-1)),K(U,{to:`/websites/${C(g)}/folders`,class:"text-primary"},{default:je(()=>[...i[33]||(i[33]=[we("Quản lý thư mục",-1)])]),_:1},8,["to"])])])]),e("div",Qu,[e("button",{type:"button",onClick:i[11]||(i[11]=F=>T.value=!1),class:"px-4 py-2 rounded-md border border-gray-300"},"Hủy"),e("button",{type:"button",onClick:Be,class:"px-4 py-2 bg-blue-600 text-white rounded-md"},"Tạo")])])])):q("",!0)]),e("div",Zu,[i[36]||(i[36]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),V(e("select",{"onUpdate:modelValue":i[12]||(i[12]=F=>f.value=F),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...i[35]||(i[35]=[e("option",{value:null},"Auto (theo website)",-1),xt('<option value="blank">Custom HTML</option><optgroup label="Templates trong package"><option value="home">Home Template</option><option value="listing">Listing Template</option><option value="detail">Detail Template</option><option value="page">Page Template</option></optgroup>',2)])],512),[[We,f.value]]),i[37]||(i[37]=e("p",{class:"mt-1 text-xs text-gray-500"}," Auto: Tự động chọn template phù hợp. Custom HTML: Tự viết HTML. Templates: Chọn template có sẵn trong package. ",-1))]),f.value==="page"?(a(),d("div",ec,[...i[38]||(i[38]=[e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Nội dung trang"),e("textarea",{id:"page-content-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)])])):q("",!0),f.value==="detail"?(a(),d("div",tc,[e("div",sc,[e("div",null,[i[39]||(i[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),V(e("input",{"onUpdate:modelValue":i[13]||(i[13]=F=>o.value.location=F),type:"text",placeholder:"Sunny Isles, Florida, United States hoặc iframe Google Maps embed",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,o.value.location]])]),e("div",null,[i[40]||(i[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),V(e("input",{"onUpdate:modelValue":i[14]||(i[14]=F=>o.value.phone=F),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,o.value.phone]])]),e("div",null,[i[41]||(i[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Đánh giá (Rating)",-1)),V(e("input",{"onUpdate:modelValue":i[15]||(i[15]=F=>o.value.rating=F),type:"number",min:"0",max:"5",step:"0.1",placeholder:"4.5",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,o.value.rating]]),i[42]||(i[42]=e("p",{class:"mt-1 text-xs text-gray-500"},"Nhập số từ 0 đến 5 (ví dụ: 4.5)",-1))])]),e("div",null,[i[43]||(i[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),V(e("textarea",{"onUpdate:modelValue":i[16]||(i[16]=F=>o.value.galleryRaw=F),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,o.value.galleryRaw]])]),i[49]||(i[49]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[i[44]||(i[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",ac,[e("div",lc,[(a(),d(ve,null,fe(w,F=>e("label",{key:F,class:"inline-flex items-center gap-2 cursor-pointer"},[V(e("input",{type:"checkbox",value:F,"onUpdate:modelValue":i[17]||(i[17]=Y=>o.value.amenities=Y),class:"rounded cursor-pointer border-gray-300"},null,8,oc),[[ct,o.value.amenities]]),e("span",nc,E(F),1)])),64))])])]),e("div",rc,[e("div",{class:"flex items-center justify-between"},[i[45]||(i[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:p,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(a(!0),d(ve,null,fe(o.value.info,(F,Y)=>(a(),d("div",{key:Y,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",ic,[e("span",dc,E(Y+1),1),i[46]||(i[46]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:de=>ie(Y),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,uc)]),V(e("input",{"onUpdate:modelValue":de=>F.subject=de,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,cc),[[oe,F.subject]]),V(e("textarea",{"onUpdate:modelValue":de=>F.description=de,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,pc),[[oe,F.description]])]))),128))]),e("div",mc,[e("div",{class:"flex items-center justify-between"},[i[47]||(i[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:b,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(a(!0),d(ve,null,fe(o.value.faqs,(F,Y)=>(a(),d("div",{key:Y,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",gc,[e("span",vc,E(Y+1),1),i[48]||(i[48]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:de=>Z(Y),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,fc)]),V(e("input",{"onUpdate:modelValue":de=>F.q=de,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,bc),[[oe,F.q]]),V(e("textarea",{"onUpdate:modelValue":de=>F.a=de,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,yc),[[oe,F.a]])]))),128))])])):q("",!0),y.value&&f.value==="blank"?(a(),d("div",hc,[i[50]||(i[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),V(e("textarea",{"onUpdate:modelValue":i[18]||(i[18]=F=>$.value=F),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm font-mono"},null,512),[[oe,$.value]])])):q("",!0),(f.value==="blank"||!y.value&&!S.value)&&f.value!=="page"?(a(),d("div",xc,[i[51]||(i[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Content",-1)),((te=P.value)==null?void 0:te.type)==="html"&&(!y.value||f.value==="blank")?(a(),d("div",wc,[e("div",{ref_key:"gutterRef",ref:_e,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(a(!0),d(ve,null,fe(ue.value,F=>(a(),d("div",{key:F,class:"px-2 text-xs text-gray-500 leading-6"},E(F),1))),128))],512),V(e("textarea",{ref_key:"codeRef",ref:pe,"onUpdate:modelValue":i[19]||(i[19]=F=>x.value.content=F),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:re},null,544),[[oe,x.value.content]])])):V((a(),d("textarea",{key:1,"onUpdate:modelValue":i[20]||(i[20]=F=>x.value.content=F),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512)),[[oe,x.value.content]])])):q("",!0),e("div",_c,[K(U,{to:Le.value,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:je(()=>[...i[52]||(i[52]=[we("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:ae.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[ae.value?(a(),d("span",$c,[K(C(Re),{class:"size-4 animate-spin"}),we(" "+E(y.value?"Creating...":"Saving..."),1)])):(a(),d("span",Cc,E(y.value?"Create":"Save"),1))],8,kc)])],32)])])])])}}},Sc={class:"relative flex min-h-screen w-full flex-col bg-gray-100"},Tc={class:"flex flex-1 items-center justify-center p-4 lg:p-6"},jc={class:"flex w-full max-w-6xl justify-center"},Ec={class:"grid w-full grid-cols-1 gap-8 lg:gap-16"},Fc={class:"flex flex-col justify-center"},Ac={class:"mx-auto flex w-full max-w-md flex-col"},Lc={class:"flex items-center gap-3 pb-8"},Rc={class:"flex flex-col gap-2"},Mc={class:"relative flex items-center"},Ic={class:"flex flex-col gap-2"},Pc={class:"relative flex items-center"},Uc=["type"],Dc=["disabled"],zc={key:0,class:"inline-flex items-center gap-2"},Nc={key:1},Vc={key:0,class:"text-sm text-red-600"},Oc={__name:"Login",setup(t){const s=ht(),c=m(""),g=m(""),v=m(!1),y=m(""),f=m(!1),S=async()=>{var $,o;v.value=!0,y.value="";try{const M=(await D.post("/api/login",{username:c.value,password:g.value})).data.token;localStorage.setItem("adminToken",M),D.defaults.headers.common["X-Admin-Token"]=M,document.cookie=`X-Admin-Token=${M}; path=/; max-age=${60*60*24}; samesite=None; secure`,document.cookie=`adminToken=${M}; path=/; max-age=${60*60*24}; samesite=None; secure`,s.push("/")}catch(k){y.value=((o=($=k==null?void 0:k.response)==null?void 0:$.data)==null?void 0:o.error)||"Đăng nhập thất bại"}finally{v.value=!1}};return($,o)=>(a(),d("div",Sc,[e("div",Tc,[e("div",jc,[e("div",Ec,[e("div",Fc,[e("div",Ac,[e("div",Lc,[K(C(zs),{class:"size-8 text-blue-600"}),o[3]||(o[3]=e("span",{class:"text-xl font-semibold text-gray-800"},"VPS Manager",-1))]),o[7]||(o[7]=e("div",{class:"flex flex-col gap-1.5"},[e("p",{class:"text-gray-900 text-3xl font-bold tracking-tight"},"Đăng nhập vào Bảng điều khiển"),e("p",{class:"text-gray-500 text-base"},"Quản lý các máy chủ ảo của bạn một cách hiệu quả.")],-1)),e("form",{onSubmit:Oe(S,["prevent"]),class:"flex flex-col gap-5 pt-8"},[e("label",Rc,[o[4]||(o[4]=e("p",{class:"text-gray-900 text-sm font-medium"},"Email / Tên người dùng",-1)),e("div",Mc,[K(C(Ns),{class:"absolute left-3.5 size-4 text-gray-400"}),V(e("input",{"onUpdate:modelValue":o[0]||(o[0]=k=>c.value=k),type:"text",required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-4",placeholder:"nhapemail@example.com"},null,512),[[oe,c.value]])])]),e("label",Ic,[o[5]||(o[5]=e("p",{class:"text-gray-900 text-sm font-medium"},"Mật khẩu",-1)),e("div",Pc,[K(C(Vs),{class:"absolute left-3.5 size-4 text-gray-400"}),V(e("input",{type:f.value?"text":"password","onUpdate:modelValue":o[1]||(o[1]=k=>g.value=k),required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-11",placeholder:"••••••••"},null,8,Uc),[[Ts,g.value]]),e("button",{type:"button",onClick:o[2]||(o[2]=k=>f.value=!f.value),class:"absolute right-0 h-full px-3.5 text-gray-400 hover:text-gray-600"},[f.value?(a(),ce(C(Os),{key:1,class:"size-5"})):(a(),ce(C(Vt),{key:0,class:"size-5"}))])])]),e("button",{type:"submit",disabled:v.value,class:"flex h-12 w-full items-center justify-center rounded-lg bg-blue-600 px-6 text-base font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500/50"},[v.value?(a(),d("span",zc,[K(C(Re),{class:"size-4 animate-spin"}),o[6]||(o[6]=we(" Đang đăng nhập... ",-1))])):(a(),d("span",Nc,"Đăng Nhập"))],8,Dc),y.value?(a(),d("p",Vc,E(y.value),1)):q("",!0)],32)])])])])]),o[8]||(o[8]=e("footer",{class:"flex justify-center p-4"},[e("p",{class:"text-sm text-gray-500"},"© 2024 VPS Manager. Đã đăng ký bản quyền.")],-1))]))}},Bc={class:"min-h-screen bg-gray-100"},Hc={class:"max-w-3xl mx-auto py-6 sm:px-6 lg:px-8"},qc={class:"px-4 py-6 sm:px-0"},Wc={class:"bg-white rounded-lg shadow p-6"},Yc={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Kc={class:"flex justify-end gap-3 mt-6"},Xc=["disabled"],Jc={key:0,class:"inline-flex items-center gap-2"},Gc={key:1},Qc={__name:"AdminProfile",setup(t){const s=ht(),c=m({ADMIN_NAME:"",ADMIN_EMAIL:"",ADMIN_USERNAME:"",ADMIN_PASSWORD:""}),g=m(!1),v=m(""),y=m("success"),f=async()=>{const k=(await D.get("/api/settings")).data||{};c.value.ADMIN_NAME=k.ADMIN_NAME||"",c.value.ADMIN_EMAIL=k.ADMIN_EMAIL||"",c.value.ADMIN_USERNAME=k.ADMIN_USERNAME||"",c.value.ADMIN_PASSWORD=k.ADMIN_PASSWORD||""},S=async()=>{var o,k;g.value=!0,v.value="";try{await D.put("/api/settings",c.value),v.value="Đã lưu, vui lòng đăng nhập lại",y.value="success",localStorage.removeItem("adminToken"),delete D.defaults.headers.common["X-Admin-Token"],s.push("/login")}catch(M){v.value=((k=(o=M==null?void 0:M.response)==null?void 0:o.data)==null?void 0:k.error)||"Lưu thất bại",y.value="error"}finally{g.value=!1}},$=()=>{localStorage.removeItem("adminToken"),delete D.defaults.headers.common["X-Admin-Token"],s.push("/login")};return Ze(f),(o,k)=>(a(),d("div",Bc,[e("div",Hc,[e("div",qc,[e("div",Wc,[k[9]||(k[9]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Thông tin quản trị",-1)),e("form",{onSubmit:Oe(S,["prevent"])},[e("div",Yc,[e("div",null,[k[4]||(k[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên",-1)),V(e("input",{"onUpdate:modelValue":k[0]||(k[0]=M=>c.value.ADMIN_NAME=M),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,c.value.ADMIN_NAME]])]),e("div",null,[k[5]||(k[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),V(e("input",{"onUpdate:modelValue":k[1]||(k[1]=M=>c.value.ADMIN_EMAIL=M),type:"email",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,c.value.ADMIN_EMAIL]])]),e("div",null,[k[6]||(k[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tài khoản",-1)),V(e("input",{"onUpdate:modelValue":k[2]||(k[2]=M=>c.value.ADMIN_USERNAME=M),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,c.value.ADMIN_USERNAME]])]),e("div",null,[k[7]||(k[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Mật khẩu",-1)),V(e("input",{"onUpdate:modelValue":k[3]||(k[3]=M=>c.value.ADMIN_PASSWORD=M),type:"password",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,c.value.ADMIN_PASSWORD]])])]),e("div",Kc,[e("button",{type:"button",onClick:$,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Logout"),e("button",{type:"submit",disabled:g.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[g.value?(a(),d("span",Jc,[K(C(Re),{class:"size-4 animate-spin"}),k[8]||(k[8]=we(" Đang lưu... ",-1))])):(a(),d("span",Gc,"Lưu"))],8,Xc)]),v.value?(a(),d("p",{key:0,class:Ie([y.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},E(v.value),3)):q("",!0)],32)])])])]))}},Zc={class:"min-h-screen bg-gray-100"},ep={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},tp={class:"px-4 py-6 sm:px-0"},sp={class:"flex justify-between items-center mb-6"},ap={class:"text-3xl font-bold text-gray-900"},lp={class:"flex items-center gap-2"},op={class:"bg-white shadow rounded-lg p-6"},np={key:0,class:"mb-3 flex items-center justify-between pb-3 border-b"},rp={class:"flex items-center gap-3"},ip=["checked"],dp={key:0,class:"flex items-center gap-2 ml-2 pl-2 border-l border-gray-300"},up={class:"text-sm font-medium text-blue-900"},cp={key:0,class:"flex gap-2"},pp=["disabled"],mp=["disabled"],gp=["disabled"],vp=["disabled"],fp={class:"space-y-4"},bp={class:"flex items-start gap-3"},yp=["value"],hp={class:"flex-1 flex justify-between items-start"},xp={class:"font-medium"},wp={class:"text-sm text-gray-500"},_p={class:"mt-2 flex items-center space-x-4 text-sm"},kp=["title"],$p={class:"flex gap-2"},Cp=["onClick","disabled"],Sp=["onClick","disabled"],Tp=["onClick","disabled"],jp=["href"],Ep=["onClick","disabled"],Fp={key:0,class:"text-center text-gray-500"},Ap={class:"bg-white rounded-lg shadow-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Lp={class:"space-y-4"},Rp={class:"flex items-center gap-3"},Mp={class:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-md border border-blue-200 text-sm font-semibold cursor-pointer hover:bg-blue-100 transition-colors"},Ip={key:0,class:"text-sm text-gray-500"},Pp={key:1,class:"text-sm text-green-600 font-medium"},Up={key:0,class:"border-t pt-4"},Dp={key:1,class:"border-t pt-4"},zp={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Np={class:"text-sm font-medium text-gray-700 w-32 shrink-0"},Vp=["onUpdate:modelValue"],Op=["value"],Bp={key:0,class:"bg-gray-50 rounded-md p-4 mt-4"},Hp={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs"},qp={class:"font-medium text-gray-600"},Wp={class:"ml-2 text-gray-800"},Yp={key:2,class:"border-t pt-4"},Kp={class:"border border-gray-300 rounded-md p-3 max-h-48 overflow-auto"},Xp=["value"],Jp={class:"text-sm"},Gp={key:0,class:"text-sm text-gray-500"},Qp={class:"text-sm space-y-1"},Zp={class:"text-green-600"},em={class:"text-gray-600"},tm={key:0,class:"mt-2"},sm={class:"text-xs text-red-600 mt-1 max-h-32 overflow-y-auto"},am={class:"flex justify-end gap-3 pt-4 border-t"},lm=["disabled"],om={__name:"SubdomainsManagement",setup(t){const c=mt().params.websiteId,g=m(""),v=m([]),y=m([]),f=m([]),S=m([]),$=m([]),o=m([]),k=m(!1),M=m(!1),J=m(null),u=m(!1),se=m(null),T=m([]),B=m("detail"),z=m([]),w=m([]),x={detail:{name:{label:"Title",jsonField:"name"},address:{label:"Địa điểm",jsonField:"address"},about:{label:"Giới thiệu",jsonField:"about"},images:{label:"Ảnh gallery",jsonField:"images"},facilities:{label:"Amenities",jsonField:"facilities"},faqs:{label:"FAQs",jsonField:"faqs"},houseRules:{label:"Useful Information",jsonField:"houseRules"}},blank:{name:{label:"Title",jsonField:"name"},content:{label:"Content",jsonField:"content"}},home:{name:{label:"Title",jsonField:"name"},about:{label:"About",jsonField:"about"},services:{label:"Services",jsonField:"services"},testimonials:{label:"Testimonials",jsonField:"testimonials"}},listing:{name:{label:"Title",jsonField:"name"},items:{label:"Items",jsonField:"items"},filters:{label:"Filters",jsonField:"filters"}}},P=m({name:{label:"Title",jsonField:"name"},address:{label:"Địa điểm",jsonField:"address"},about:{label:"Giới thiệu",jsonField:"about"},images:{label:"Ảnh gallery",jsonField:"images"},facilities:{label:"Amenities",jsonField:"facilities"},faqs:{label:"FAQs",jsonField:"faqs"},houseRules:{label:"Useful Information",jsonField:"houseRules"}}),R=Me(()=>P.value),W=Me(()=>v.value.length>0&&o.value.length===v.value.length),ae=Me(()=>J.value&&J.value.length>0?J.value[0]:null),_e=Me(()=>J.value&&J.value.length>0&&P.value.name.jsonField),pe=()=>{W.value?o.value=[]:o.value=v.value.map(h=>h.id)},ye=async()=>{const h=await D.get(`/api/websites/${c}`);g.value=h.data.domain;const _=(await D.get("/api/websites")).data||[];v.value=_.filter(l=>l.domain.endsWith("."+g.value))},Ue=async()=>{try{const h=await D.get(`/api/websites/${c}/folders`);z.value=h.data||[]}catch(h){console.error("Failed to fetch folders:",h),z.value=[]}};Ze(()=>{ye(),Ue()});const Ae=async h=>{var r,_,l,A;try{y.value=[...y.value,h.id],await D.post(`/api/websites/${h.id}/deploy`);let b=0;for(;b<60&&(await new Promise(Z=>setTimeout(Z,2e3)),(await D.get(`/api/websites/${h.id}`)).data.status==="deploying");)b++;await ye(),alert(`✓ Deploy thành công cho ${h.domain}`)}catch(b){const p=((_=(r=b==null?void 0:b.response)==null?void 0:r.data)==null?void 0:_.message)||((A=(l=b==null?void 0:b.response)==null?void 0:l.data)==null?void 0:A.error)||"Deploy thất bại";alert(`✗ ${p}`)}finally{y.value=y.value.filter(b=>b!==h.id)}},he=async h=>{if(confirm(`Delete subdomain ${h.domain}?`))try{f.value=[...f.value,h.id],await D.delete(`/api/websites/${h.id}`),await ye()}finally{f.value=f.value.filter(r=>r!==h.id)}},xe=async h=>{var r,_,l,A;try{S.value=[...S.value,h.id],await D.post(`/api/websites/${h.id}/ssl`),await ye(),alert(`✓ SSL đã được cài đặt thành công cho ${h.domain}`)}catch(b){const p=((_=(r=b==null?void 0:b.response)==null?void 0:r.data)==null?void 0:_.message)||((A=(l=b==null?void 0:b.response)==null?void 0:l.data)==null?void 0:A.error)||"Cài đặt SSL thất bại";alert(`✗ ${p}`)}finally{S.value=S.value.filter(b=>b!==h.id)}},Le=async h=>{if(confirm(`Deactivate subdomain ${h.domain}?`))try{$.value=[...$.value,h.id],await D.post(`/api/websites/${h.id}/deactivate`),await ye()}finally{$.value=$.value.filter(r=>r!==h.id)}},ze=async()=>{var h,r;if(o.value.length!==0&&confirm(`Deploy ${o.value.length} subdomains?`))try{k.value=!0;const _=await D.post("/api/websites/bulk/deploy",{website_ids:o.value});o.value=[];const l=_.data.message||"Operations queued successfully";alert(`✓ ${l}

Watch the status indicators for each item.`);let A=0;for(;A<120&&(await new Promise(p=>setTimeout(p,2e3)),await ye(),!!v.value.some(p=>p.status==="deploying"));)A++;await ye()}catch(_){const l=((r=(h=_==null?void 0:_.response)==null?void 0:h.data)==null?void 0:r.message)||"Bulk deploy failed";alert(`✗ ${l}`)}finally{k.value=!1}},Ne=async()=>{var h,r;if(o.value.length!==0&&confirm(`Install SSL for ${o.value.length} subdomains?`))try{k.value=!0;const _=await D.post("/api/websites/bulk/ssl",{website_ids:o.value});o.value=[];const l=_.data.message||"Operations queued successfully";alert(`✓ ${l}

Watch the status indicators for each item.`);for(let A=0;A<10;A++)await new Promise(b=>setTimeout(b,2e3)),await ye()}catch(_){const l=((r=(h=_==null?void 0:_.response)==null?void 0:h.data)==null?void 0:r.message)||"Bulk SSL installation failed";alert(`✗ ${l}`)}finally{k.value=!1}},Be=async()=>{var h,r;if(o.value.length!==0&&confirm(`Deactivate ${o.value.length} subdomains?`))try{k.value=!0;const _=await D.post("/api/websites/bulk/deactivate",{website_ids:o.value});o.value=[];const l=_.data.message||"Operations queued successfully";alert(`✓ ${l}

Watch the status indicators for each item.`);for(let A=0;A<5;A++)await new Promise(b=>setTimeout(b,2e3)),await ye()}catch(_){const l=((r=(h=_==null?void 0:_.response)==null?void 0:h.data)==null?void 0:r.message)||"Bulk deactivate failed";alert(`✗ ${l}`)}finally{k.value=!1}},me=async()=>{var h,r;if(o.value.length!==0&&confirm(`DELETE ${o.value.length} subdomains? This action cannot be undone!`))try{k.value=!0;const _=await D.post("/api/websites/bulk/delete",{website_ids:o.value});o.value=[];const l=_.data.message||"Operations queued successfully";alert(`✓ ${l}

Watch the list update as items are deleted.`);for(let A=0;A<5;A++)await new Promise(b=>setTimeout(b,2e3)),await ye()}catch(_){const l=((r=(h=_==null?void 0:_.response)==null?void 0:h.data)==null?void 0:r.message)||"Bulk delete failed";alert(`✗ ${l}`)}finally{k.value=!1}},ne=h=>{const r=h.target.files[0];if(!r)return;const _=new FileReader;_.onload=l=>{try{const A=JSON.parse(l.target.result);let b=A;if(Array.isArray(A)&&A.length>0&&A[0].result&&(b=A.map(p=>p.result)),J.value=b,se.value=null,b.length>0){const p=b[0],Z=Object.keys(p);T.value=Z,j()}Qe.success(`Loaded ${b.length} items from file`)}catch(A){Qe.error("Invalid JSON file"),console.error(A)}},_.readAsText(r)},j=()=>{const h=x[B.value]||x.detail;P.value=JSON.parse(JSON.stringify(h));const r=T.value;if(B.value==="detail"){const _={name:r.find(l=>l.toLowerCase().includes("name")||l.toLowerCase().includes("title")),address:r.find(l=>l.toLowerCase().includes("address")||l.toLowerCase().includes("location")),about:r.find(l=>l.toLowerCase().includes("about")||l.toLowerCase().includes("description")),images:r.find(l=>l.toLowerCase().includes("image")||l.toLowerCase().includes("photo")),facilities:r.find(l=>l.toLowerCase().includes("facilit")||l.toLowerCase().includes("amenity")),faqs:r.find(l=>l.toLowerCase().includes("faq")||l.toLowerCase().includes("question")),houseRules:r.find(l=>l.toLowerCase().includes("rule")||l.toLowerCase().includes("policy")||l.toLowerCase().includes("info"))};Object.keys(_).forEach(l=>{_[l]&&P.value[l]&&(P.value[l].jsonField=_[l])})}else if(B.value==="blank"){const _={name:r.find(l=>l.toLowerCase().includes("name")||l.toLowerCase().includes("title")),content:r.find(l=>l.toLowerCase().includes("content")||l.toLowerCase().includes("description")||l.toLowerCase().includes("body"))};Object.keys(_).forEach(l=>{_[l]&&P.value[l]&&(P.value[l].jsonField=_[l])})}else if(B.value==="home"){const _={name:r.find(l=>l.toLowerCase().includes("name")||l.toLowerCase().includes("title")),about:r.find(l=>l.toLowerCase().includes("about")||l.toLowerCase().includes("description")),services:r.find(l=>l.toLowerCase().includes("service")),testimonials:r.find(l=>l.toLowerCase().includes("testimonial")||l.toLowerCase().includes("review"))};Object.keys(_).forEach(l=>{_[l]&&P.value[l]&&(P.value[l].jsonField=_[l])})}else if(B.value==="listing"){const _={name:r.find(l=>l.toLowerCase().includes("name")||l.toLowerCase().includes("title")),items:r.find(l=>l.toLowerCase().includes("item")||l.toLowerCase().includes("list")),filters:r.find(l=>l.toLowerCase().includes("filter")||l.toLowerCase().includes("category"))};Object.keys(_).forEach(l=>{_[l]&&P.value[l]&&(P.value[l].jsonField=_[l])})}},ee=h=>{if(!ae.value||!h)return"-";const r=ae.value[h];return Array.isArray(r)?`${r.length} items`:typeof r=="object"&&r!==null?JSON.stringify(r).substring(0,50)+"...":String(r||"-").substring(0,100)},I=()=>{M.value=!1,setTimeout(()=>{M.value||(J.value=null,se.value=null,T.value=[],B.value="detail")},300)},X=async()=>{var r,_,l,A;if(!J.value||!g.value)return;u.value=!0,se.value=null;const h={total:J.value.length,created:0,skipped:0,errors:[]};try{const p=(await D.get(`/api/websites/${c}`)).data.vps_server_id;for(const Z of J.value)try{const ie={};Object.keys(P.value).forEach(U=>{const te=P.value[U].jsonField;te&&Z[te]!==void 0&&(ie[U]=Z[te])}),ie.path="/";const ue=ie.name;if(!ue){h.skipped++,h.errors.push({domain:"Unknown",error:"Missing title"});continue}const Ce=`${ue.toLowerCase().replace(/[àáạảãâầấậẩẫăằắặẳẵ]/g,"a").replace(/[èéẹẻẽêềếệểễ]/g,"e").replace(/[ìíịỉĩ]/g,"i").replace(/[òóọỏõôồốộổỗơờớợởỡ]/g,"o").replace(/[ùúụủũưừứựửữ]/g,"u").replace(/[ỳýỵỷỹ]/g,"y").replace(/đ/g,"d").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-")}.${g.value}`;if(v.value.some(U=>U.domain===Ce)){h.skipped++,h.errors.push({domain:Ce,error:"Subdomain already exists"});continue}const i=(await D.post("/api/websites",{domain:Ce,type:"laravel1",template_package:"laravel-hotel-1",vps_server_id:p})).data.id;await D.post(`/api/websites/${i}/pages/import`,{data:[ie],folder_ids:w.value,template_type:B.value}),h.created++}catch(ie){h.skipped++,h.errors.push({domain:mapped.name||"Unknown",error:((_=(r=ie.response)==null?void 0:r.data)==null?void 0:_.message)||ie.message})}se.value=h,Qe.success(`Import completed: ${h.created} subdomains created`),await ye()}catch(b){Qe.error("Import failed: "+(((A=(l=b.response)==null?void 0:l.data)==null?void 0:A.message)||b.message)),console.error(b)}finally{u.value=!1}};return(h,r)=>{const _=nt("router-link");return a(),d("div",Zc,[e("div",ep,[e("div",tp,[e("div",sp,[e("h1",ap,"Subdomains of "+E(g.value),1),e("div",lp,[e("button",{onClick:r[0]||(r[0]=l=>M.value=!0),class:"px-4 py-2 border border-gray-300 rounded-md text-green-600 hover:bg-gray-50 flex items-center gap-2"},[...r[5]||(r[5]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),e("span",null,"Import",-1)])]),K(_,{to:`/websites/${C(c)}/subdomains/new`,class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"},{default:je(()=>[...r[6]||(r[6]=[we("Create Subdomain",-1)])]),_:1},8,["to"])])]),e("div",op,[v.value.length>0?(a(),d("div",np,[e("div",rp,[e("input",{type:"checkbox",checked:W.value,onChange:pe,class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,ip),e("label",{class:"text-sm text-gray-700 font-medium cursor-pointer",onClick:pe},"Select All"),o.value.length>0?(a(),d("div",dp,[e("span",up,E(o.value.length)+" selected",1),e("button",{onClick:r[1]||(r[1]=l=>o.value=[]),class:"text-sm text-blue-600 hover:text-blue-800"},"Clear")])):q("",!0)]),o.value.length>0?(a(),d("div",cp,[e("button",{onClick:ze,disabled:k.value,class:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-1"},[k.value?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(Nt),{key:1,class:"size-4"})),r[7]||(r[7]=we(" Deploy ",-1))],8,pp),e("button",{onClick:Ne,disabled:k.value,class:"px-3 py-1.5 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 flex items-center gap-1"},[k.value?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(gt),{key:1,class:"size-4"})),r[8]||(r[8]=we(" SSL ",-1))],8,mp),e("button",{onClick:Be,disabled:k.value,class:"px-3 py-1.5 text-sm bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:bg-gray-400 flex items-center gap-1"},[k.value?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(kt),{key:1,class:"size-4"})),r[9]||(r[9]=we(" Deactivate ",-1))],8,gp),e("button",{onClick:me,disabled:k.value,class:"px-3 py-1.5 text-sm bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-1"},[k.value?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(pt),{key:1,class:"size-4"})),r[10]||(r[10]=we(" Delete ",-1))],8,vp)])):q("",!0)])):q("",!0),e("div",fp,[(a(!0),d(ve,null,fe(v.value,l=>{var A;return a(),d("div",{key:l.id,class:"border rounded-lg p-4"},[e("div",bp,[V(e("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":r[2]||(r[2]=b=>o.value=b),class:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,8,yp),[[ct,o.value]]),e("div",hp,[e("div",null,[e("h4",xp,E(l.domain),1),e("p",wp,"Server: "+E(((A=l.vps_server)==null?void 0:A.name)||"N/A"),1),e("div",_p,[e("span",{class:Ie(["inline-flex items-center",{"text-blue-600":l.status==="deploying","text-green-600":l.status==="deployed","text-gray-600":l.status==="pending"||l.status==="draft","text-orange-600":l.status==="suspended","text-red-600":l.status==="error"}]),title:l.status},[l.status==="deploying"?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):l.status==="deployed"?(a(),ce(C(Ct),{key:1,class:"size-4"})):l.status==="pending"||l.status==="draft"?(a(),ce(C(At),{key:2,class:"size-4"})):l.status==="suspended"?(a(),ce(C(kt),{key:3,class:"size-4"})):(a(),ce(C(St),{key:4,class:"size-4"}))],10,kp),e("span",{class:Ie(["inline-flex items-center gap-1",l.ssl_enabled?"text-green-600":"text-gray-400"])},[l.ssl_enabled?(a(),ce(C(gt),{key:0,class:"size-4"})):(a(),ce(C(ms),{key:1,class:"size-4"}))],2)])]),e("div",$p,[K(_,{to:`/websites/${l.id}/pages`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:je(()=>[K(C(gs),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:b=>Ae(l),disabled:y.value.includes(l.id)||l.status==="deployed",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[y.value.includes(l.id)?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(Nt),{key:1,class:"size-4"}))],8,Cp),l.status==="deployed"?(a(),d("button",{key:0,onClick:b=>xe(l),disabled:S.value.includes(l.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[S.value.includes(l.id)?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(gt),{key:1,class:"size-4"}))],8,Sp)):q("",!0),l.status==="deployed"||l.status==="error"?(a(),d("button",{key:1,onClick:b=>Le(l),disabled:$.value.includes(l.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[$.value.includes(l.id)?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(kt),{key:1,class:"size-4"}))],8,Tp)):q("",!0),e("a",{href:(l.ssl_enabled?"https://":"http://")+l.domain,target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[K(C(vt),{class:"size-4"})],8,jp),e("button",{onClick:b=>he(l),disabled:f.value.includes(l.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[f.value.includes(l.id)?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),ce(C(pt),{key:1,class:"size-4"}))],8,Ep)])])])])}),128)),v.value.length===0?(a(),d("div",Fp,"No subdomains found")):q("",!0)])]),M.value?(a(),d("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:Oe(I,["self"])},[e("div",Ap,[e("div",{class:"flex justify-between items-center mb-4"},[r[12]||(r[12]=e("h2",{class:"text-xl font-bold"},"Import Subdomains from JSON",-1)),e("button",{onClick:I,class:"text-gray-500 hover:text-gray-700"},[...r[11]||(r[11]=[e("svg",{viewBox:"0 0 24 24",class:"size-6",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18"}),e("path",{d:"M6 6l12 12"})],-1)])])]),e("div",Lp,[e("div",null,[r[15]||(r[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"1"),we(" Upload JSON File ")])],-1)),e("div",Rp,[e("label",Mp,[r[13]||(r[13]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),r[14]||(r[14]=e("span",null,"Choose File",-1)),e("input",{type:"file",onChange:ne,accept:".json",class:"hidden"},null,32)]),J.value?(a(),d("span",Pp,"✓ "+E(J.value.length)+" items loaded",1)):(a(),d("span",Ip,"No file chosen"))]),r[16]||(r[16]=e("p",{class:"text-xs text-gray-500 mt-2"},"Each item will create a new subdomain with initial page",-1))]),J.value?(a(),d("div",Up,[r[18]||(r[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"2"),we(" Select Template Type ")])],-1)),V(e("select",{"onUpdate:modelValue":r[3]||(r[3]=l=>B.value=l),onChange:j,class:"w-full md:w-1/2 border-gray-300 rounded-md text-sm cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400"},[...r[17]||(r[17]=[e("option",{value:"detail"},"Hotel Detail",-1),e("option",{value:"blank"},"Blank (HTML)",-1),e("option",{value:"home"},"Home Page",-1),e("option",{value:"listing"},"Listing Page",-1)])],544),[[We,B.value]]),r[19]||(r[19]=e("p",{class:"text-xs text-gray-500 mt-1"},"Select which template to use for imported pages",-1))])):q("",!0),J.value&&T.value.length>0?(a(),d("div",Dp,[r[22]||(r[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"3"),we(" Map JSON Fields to Page Template Fields ")])],-1)),e("div",zp,[(a(!0),d(ve,null,fe(R.value,(l,A)=>(a(),d("div",{key:A,class:"flex items-center gap-3"},[e("label",Np,E(l.label)+":",1),V(e("select",{"onUpdate:modelValue":b=>l.jsonField=b,class:"flex-1 text-sm border-gray-300 rounded-md cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 transition-colors"},[r[20]||(r[20]=e("option",{value:null},"-- Skip --",-1)),(a(!0),d(ve,null,fe(T.value,b=>(a(),d("option",{key:b,value:b},E(b),9,Op))),128))],8,Vp),[[We,l.jsonField]])]))),128))]),ae.value?(a(),d("div",Bp,[r[21]||(r[21]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-2"},"Preview (First Item):",-1)),e("div",Hp,[(a(!0),d(ve,null,fe(R.value,(l,A)=>V((a(),d("div",{key:A},[e("span",qp,E(l.label)+":",1),e("span",Wp,E(ee(l.jsonField)),1)])),[[rs,l.jsonField]])),128))])])):q("",!0)])):q("",!0),J.value&&z.value.length>0?(a(),d("div",Yp,[r[23]||(r[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"4"),we(" Assign to Folders (optional) ")])],-1)),e("div",Kp,[(a(!0),d(ve,null,fe(z.value,l=>(a(),d("label",{key:l.id,class:"flex items-center gap-2 cursor-pointer mb-2 hover:bg-gray-50 p-1 rounded"},[V(e("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":r[4]||(r[4]=A=>w.value=A),class:"rounded cursor-pointer border-gray-300"},null,8,Xp),[[ct,w.value]]),e("span",Jp,E(l.name),1)]))),128)),z.value.length===0?(a(),d("p",Gp,"No folders available")):q("",!0)]),r[24]||(r[24]=e("p",{class:"text-xs text-gray-500 mt-1"},"Select folders to assign imported pages to",-1))])):q("",!0),se.value?(a(),d("div",{key:3,class:Ie(["p-4 rounded-md border-t pt-4",se.value.errors.length>0?"bg-yellow-50":"bg-green-50"])},[r[26]||(r[26]=e("p",{class:"font-medium mb-2"},"Import Results:",-1)),e("ul",Qp,[e("li",null,"Total: "+E(se.value.total),1),e("li",Zp,"Created: "+E(se.value.created),1),e("li",em,"Skipped: "+E(se.value.skipped),1)]),se.value.errors.length>0?(a(),d("div",tm,[r[25]||(r[25]=e("p",{class:"text-sm font-medium text-red-600"},"Errors:",-1)),e("ul",sm,[(a(!0),d(ve,null,fe(se.value.errors,(l,A)=>(a(),d("li",{key:A},E(l.domain)+": "+E(l.error),1))),128))])])):q("",!0)],2)):q("",!0),e("div",am,[e("button",{onClick:I,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},E(se.value?"Close":"Cancel"),1),se.value?q("",!0):(a(),d("button",{key:0,onClick:X,disabled:!_e.value||u.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2"},[u.value?(a(),ce(C(Re),{key:0,class:"size-4 animate-spin"})):q("",!0),e("span",null,E(u.value?"Importing...":"Import Subdomains"),1)],8,lm))])])])])):q("",!0)])])])}}},nm="modulepreload",rm=function(t){return"/"+t},os={},it=function(s,c,g){let v=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),S=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));v=Promise.allSettled(c.map($=>{if($=rm($),$ in os)return;os[$]=!0;const o=$.endsWith(".css"),k=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${$}"]${k}`))return;const M=document.createElement("link");if(M.rel=o?"stylesheet":nm,o||(M.as="script"),M.crossOrigin="",M.href=$,S&&M.setAttribute("nonce",S),document.head.appendChild(M),o)return new Promise((J,u)=>{M.addEventListener("load",J),M.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${$}`)))})}))}function y(f){const S=new Event("vite:preloadError",{cancelable:!0});if(S.payload=f,window.dispatchEvent(S),!S.defaultPrevented)throw f}return v.then(f=>{for(const S of f||[])S.status==="rejected"&&y(S.reason);return s().catch(y)})},im={class:"min-h-screen bg-gray-100"},dm={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},um={class:"px-4 py-6 sm:px-0"},cm={class:"bg-white rounded-lg shadow p-6"},pm={class:"text-sm text-gray-600 mb-4"},mm={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},gm={class:"text-xs text-gray-500 mt-1"},vm={class:"md:col-span-2"},fm=["value"],bm={class:"mt-4"},ym={key:0,class:"mt-4"},hm={class:"flex items-center justify-between mb-2"},xm={class:"flex items-center gap-3"},wm={class:"border border-gray-300 rounded-md p-3 max-h-48 overflow-auto"},_m={key:0,class:"text-sm text-gray-500"},km={key:1,class:"space-y-2"},$m=["value","onChange"],Cm={class:"mt-6"},Sm={key:0,class:"mt-4 space-y-4"},Tm={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},jm={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},Em={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},Fm=["value"],Am={class:"text-sm"},Lm={class:"space-y-3"},Rm={class:"flex items-center gap-2"},Mm={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},Im=["onClick"],Pm=["onUpdate:modelValue"],Um=["onUpdate:modelValue"],Dm={class:"space-y-3"},zm={class:"flex items-center gap-2"},Nm={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},Vm=["onClick"],Om=["onUpdate:modelValue"],Bm=["onUpdate:modelValue"],Hm={key:1,class:"mt-4"},qm={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Wm={class:"flex justify-end gap-3 mt-6"},Ym=["disabled"],Km={key:0,class:"inline-flex items-center gap-2"},Xm={key:1},Jm={__name:"SubdomainEdit",setup(t){const s=mt(),c=ht(),g=s.params.websiteId,v=m(""),y=m(null),f=m([]),S=m([]),$=m(!1);m(""),m(""),m(null),m(!1);const o=m([]),k=m({sub:"",vps_server_id:""}),M=m("blank"),J=m(""),u=m({title:"",location:"",phone:"",galleryRaw:"",about1:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),se=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],T=m(null),B=m(null),z=m(!1),w=m(""),x=m(""),P=ne=>ne.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"d").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),R=Me(()=>P(k.value.sub||"")),W=Me(()=>(R.value?`${R.value}.`:"")+v.value),ae=Me(()=>{const j=(J.value||"").split(`
`).length;return j>0?j:1}),_e=Me(()=>{const ne=[...S.value||[]],j=new Map(ne.map(l=>[String(l.id),l])),ee=l=>l.sort((A,b)=>(A.name||"").localeCompare(b.name||"")),I=l=>ne.filter(A=>String(A.parent_id)===String(l)),X=l=>!l.parent_id||!j.has(String(l.parent_id))||String(l.parent_id)===String(l.id),h=ee(ne.filter(X)),r=[],_=(l,A)=>{r.push({...l,depth:A}),ee(I(l.id)).forEach(b=>_(b,A+1))};return h.forEach(l=>_(l,0)),r}),pe=ne=>{if(o.value.includes(ne)){const j=S.value.find(ee=>ee.id===ne);if(j&&j.parent_id){const ee=I=>{if(!I)return;o.value.includes(I)||o.value.push(I);const X=S.value.find(h=>h.id===I);X&&X.parent_id&&ee(X.parent_id)};ee(j.parent_id)}}},ye=()=>{T.value&&B.value&&(T.value.scrollTop=B.value.scrollTop)},Ue=async()=>{const ne=(u.value.galleryRaw||"").split(`
`).map(p=>p.trim()).filter(Boolean),j=(u.value.title||"").trim(),ee=["Home","Stays",j];let X=(await D.get("/templates/laravel-hotel-1/detail/index.html")).data||"",h="",r="";try{h=(await D.get("/templates/_shared/header.html")).data||""}catch{}try{r=(await D.get("/templates/_shared/footer.html")).data||""}catch{}h&&(X=X.replace(/<header[^>]*>[\s\S]*?<\/header>/i,h)),r&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(X)?X=X.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,r):/<\/body>/i.test(X)?X=X.replace(/<\/body>/i,r+"</body>"):X+=`
`+r);const _=u.value.amenities||[],l=ne.map(p=>String(p).replace(/<\/script>/gi,"<\\/script>")),A={title:j||"Hotel",location:u.value.location||"",location_text:u.value.location||"",phone:u.value.phone||"",about1:u.value.about1||"",amenities:_,faqs:u.value.faqs||[],info:u.value.info||[],gallery:l,breadcrumb_items:ee.filter(Boolean)},b=`<script type="application/json" id="page-data">${JSON.stringify(A)}<\/script>`;return X=X.replace("{{GALLERY_DATA_SCRIPT}}",b),X=X.replace(/<title>[^<]*<\/title>/i,`<title>${A.title}</title>`),X},Ae=()=>{u.value.faqs=[...u.value.faqs||[],{q:"",a:""}]},he=()=>{u.value.info=[...u.value.info||[],{subject:"",description:""}]},xe=ne=>{u.value.faqs=(u.value.faqs||[]).filter((j,ee)=>ee!==ne)},Le=ne=>{u.value.info=(u.value.info||[]).filter((j,ee)=>ee!==ne)},ze=async()=>{var ne,j,ee,I,X,h,r,_,l,A,b,p,Z,ie,ue,re;z.value=!0,w.value="";try{const Ce="Stays",N=k.value.vps_server_id;if(!N){w.value="Chưa chọn VPS Server",x.value="error",z.value=!1;return}const H={domain:W.value,type:((ne=y.value)==null?void 0:ne.type)||"html",vps_server_id:N};((j=y.value)==null?void 0:j.type)==="laravel1"&&(H.template_package="laravel-hotel-1");let i;try{i=(await D.post("/api/websites",H)).data}catch(Y){const de=((I=(ee=Y==null?void 0:Y.response)==null?void 0:ee.data)==null?void 0:I.message)||((h=(X=Y==null?void 0:Y.response)==null?void 0:X.data)==null?void 0:h.error)||"";if(((r=Y==null?void 0:Y.response)==null?void 0:r.status)===409||/domain/i.test(de)){if(i=((await D.get("/api/websites")).data||[]).find(le=>le.domain===W.value),!i)throw Y}else throw Y}let U,te=null;if(M.value==="blank")U=J.value;else{U=await Ue();const Y=(u.value.galleryRaw||"").split(`
`).map(de=>de.trim()).filter(Boolean);te={title:(u.value.title||"").trim()||"Hotel",location:u.value.location||"",location_text:u.value.location||"",phone:u.value.phone||"",about1:u.value.about1||"",amenities:u.value.amenities||[],faqs:u.value.faqs||[],info:u.value.info||[],gallery:Y,breadcrumb_items:["Home","Stays",(u.value.title||"").trim()].filter(Boolean)}}const F={path:"/",filename:"index.html",title:M.value==="blank"?u.value.title||"":u.value.title,content:U};M.value!=="blank"&&(F.template_type=M.value,F.template_data=te),o.value.length>0&&(F.folder_ids=o.value);try{await D.post(`/api/websites/${i.id}/pages`,F)}catch(Y){const de=((l=(_=Y==null?void 0:Y.response)==null?void 0:_.data)==null?void 0:l.message)||((b=(A=Y==null?void 0:Y.response)==null?void 0:A.data)==null?void 0:b.error)||"";if(((p=Y==null?void 0:Y.response)==null?void 0:p.status)===409||/path/i.test(de)){const le=((await D.get(`/api/websites/${i.id}/pages`)).data||[]).find(Se=>(Se.path||"/")==="/"&&(Se.filename||"").toLowerCase()==="index.html");le&&await D.put(`/api/pages/${le.id}`,F)}else if(/Failed to write page/i.test(de)){const De=`subdomainDraft:${i.id}`;localStorage.setItem(De,JSON.stringify(F))}}w.value="Subdomain created. Deploy to go online.",x.value="success",c.push(`/websites/${g}/subdomains`)}catch(Ce){w.value=((ie=(Z=Ce==null?void 0:Ce.response)==null?void 0:Z.data)==null?void 0:ie.message)||((re=(ue=Ce==null?void 0:Ce.response)==null?void 0:ue.data)==null?void 0:re.error)||"Failed to create subdomain",x.value="error"}finally{z.value=!1}},Ne=async()=>{var ee;const ne=await D.get(`/api/websites/${g}`);y.value=ne.data,v.value=y.value.domain;const j=await D.get("/api/vps");f.value=j.data.filter(I=>I.status==="active"),(ee=y.value)!=null&&ee.vps_server_id&&(k.value.vps_server_id=y.value.vps_server_id);try{const I=await D.get(`/api/websites/${g}/folders`);S.value=I.data||[]}catch(I){console.error("Failed to load folders:",I)}},Be=async()=>{if(window.tinymce)return;const{default:ne}=await it(async()=>{const{default:j}=await import("./tinymce.js").then(ee=>ee.t);return{default:j}},[]);await it(()=>import("./index.js").then(j=>j.i),[]),await it(()=>import("./index2.js").then(j=>j.i),[]),await it(()=>import("./model.js"),[]),await it(()=>import("./skin.js"),[]),await it(()=>import("./content.js"),[]),await it(()=>import("./content2.js"),[]),await it(()=>import("./index3.js").then(j=>j.i),[]),await it(()=>import("./index4.js").then(j=>j.i),[]),window.tinymce=ne},me=async()=>{await Be(),await zt();const ne=document.getElementById("about1-editor-sub");ne&&(ne.value=u.value.about1||"",window.tinymce.init({selector:"#about1-editor-sub",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:j=>{j.on("Change KeyUp SetContent",()=>{u.value.about1=j.getContent()||""})}}).then(j=>{const ee=j&&j[0];ee&&(u.value.about1||"").trim()&&ee.setContent(u.value.about1)}))};return Ze(async()=>{await Ne(),M.value==="detail"&&await me()}),_t(M,async ne=>{if(ne==="detail")await me();else if(window.tinymce){const j=window.tinymce.get("about1-editor-sub");j&&j.remove()}}),Ht(()=>{if(window.tinymce){const ne=window.tinymce.get("about1-editor-sub");ne&&ne.remove()}}),(ne,j)=>{const ee=nt("router-link");return a(),d("div",im,[e("div",dm,[e("div",um,[e("div",cm,[j[32]||(j[32]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Create Subdomain",-1)),e("p",pm,"Parent: "+E(v.value),1),e("form",{onSubmit:Oe(ze,["prevent"])},[e("div",mm,[e("div",null,[j[11]||(j[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Subdomain",-1)),V(e("input",{"onUpdate:modelValue":j[0]||(j[0]=I=>k.value.sub=I),type:"text",required:"",placeholder:"hotel",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,k.value.sub]]),e("p",gm,"Sẽ tạo domain: "+E(W.value),1)]),e("div",vm,[j[13]||(j[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),V(e("select",{"onUpdate:modelValue":j[1]||(j[1]=I=>k.value.vps_server_id=I),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[j[12]||(j[12]=e("option",{value:""},"Select VPS Server",-1)),(a(!0),d(ve,null,fe(f.value,I=>(a(),d("option",{value:I.id,key:I.id},E(I.name)+" ("+E(I.ip_address)+")",9,fm))),128))],512),[[We,k.value.vps_server_id]])])]),e("div",bm,[j[15]||(j[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),V(e("select",{"onUpdate:modelValue":j[2]||(j[2]=I=>M.value=I),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...j[14]||(j[14]=[e("option",{value:"blank"},"HTML mặc định",-1),e("option",{value:"detail"},"Hotel Detail",-1)])],512),[[We,M.value]])]),M.value==="detail"?(a(),d("div",ym,[e("div",hm,[j[17]||(j[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Danh mục (chọn nhiều)",-1)),e("div",xm,[K(ee,{to:`/websites/${C(g)}/folders`,class:"text-sm text-primary"},{default:je(()=>[...j[16]||(j[16]=[we("Quản lý danh mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:j[3]||(j[3]=I=>$.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",wm,[S.value.length===0?(a(),d("div",_m,"Không có danh mục")):(a(),d("div",km,[(a(!0),d(ve,null,fe(_e.value,I=>(a(),d("label",{key:I.id,class:"flex items-center gap-2 cursor-pointer"},[V(e("input",{type:"checkbox",value:I.id,"onUpdate:modelValue":j[4]||(j[4]=X=>o.value=X),onChange:X=>pe(I.id),class:"rounded cursor-pointer"},null,40,$m),[[ct,o.value]]),e("span",{class:"text-sm",style:ot({paddingLeft:(I.depth>0?I.depth*16:0)+"px"})},E("↳ ".repeat(I.depth))+E(I.name),5)]))),128))]))])])):q("",!0),e("div",Cm,[j[29]||(j[29]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Nội dung template",-1)),M.value==="detail"?(a(),d("div",Sm,[e("div",Tm,[e("div",null,[j[18]||(j[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề khách sạn",-1)),V(e("input",{"onUpdate:modelValue":j[5]||(j[5]=I=>u.value.title=I),type:"text",placeholder:"Azure Breeze Resort",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,u.value.title]])]),e("div",null,[j[19]||(j[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),V(e("input",{"onUpdate:modelValue":j[6]||(j[6]=I=>u.value.location=I),type:"text",placeholder:"Sunny Isles, Florida, United States",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,u.value.location]])]),e("div",null,[j[20]||(j[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),V(e("input",{"onUpdate:modelValue":j[7]||(j[7]=I=>u.value.phone=I),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,u.value.phone]])])]),e("div",null,[j[21]||(j[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),V(e("textarea",{"onUpdate:modelValue":j[8]||(j[8]=I=>u.value.galleryRaw=I),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,u.value.galleryRaw]])]),j[27]||(j[27]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor-sub",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[j[22]||(j[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",jm,[e("div",Em,[(a(),d(ve,null,fe(se,I=>e("label",{key:I,class:"inline-flex items-center gap-2 cursor-pointer"},[V(e("input",{type:"checkbox",value:I,"onUpdate:modelValue":j[9]||(j[9]=X=>u.value.amenities=X),class:"rounded cursor-pointer border-gray-300"},null,8,Fm),[[ct,u.value.amenities]]),e("span",Am,E(I),1)])),64))])])]),e("div",Lm,[e("div",{class:"flex items-center justify-between"},[j[23]||(j[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:he,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(a(!0),d(ve,null,fe(u.value.info,(I,X)=>(a(),d("div",{key:X,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",Rm,[e("span",Mm,E(X+1),1),j[24]||(j[24]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:h=>Le(X),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,Im)]),V(e("input",{"onUpdate:modelValue":h=>I.subject=h,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Pm),[[oe,I.subject]]),V(e("textarea",{"onUpdate:modelValue":h=>I.description=h,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Um),[[oe,I.description]])]))),128))]),e("div",Dm,[e("div",{class:"flex items-center justify-between"},[j[25]||(j[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:Ae,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(a(!0),d(ve,null,fe(u.value.faqs,(I,X)=>(a(),d("div",{key:X,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",zm,[e("span",Nm,E(X+1),1),j[26]||(j[26]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:h=>xe(X),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,Vm)]),V(e("input",{"onUpdate:modelValue":h=>I.q=h,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Om),[[oe,I.q]]),V(e("textarea",{"onUpdate:modelValue":h=>I.a=h,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Bm),[[oe,I.a]])]))),128))])])):M.value==="blank"?(a(),d("div",Hm,[j[28]||(j[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),e("div",qm,[e("div",{ref_key:"gutterRef",ref:T,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(a(!0),d(ve,null,fe(ae.value,I=>(a(),d("div",{key:I,class:"px-2 text-xs text-gray-500 leading-6"},E(I),1))),128))],512),V(e("textarea",{ref_key:"codeRef",ref:B,"onUpdate:modelValue":j[10]||(j[10]=I=>J.value=I),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:ye},null,544),[[oe,J.value]])])])):q("",!0)]),e("div",Wm,[K(ee,{to:`/websites/${C(g)}/subdomains`,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:je(()=>[...j[30]||(j[30]=[we("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:z.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[z.value?(a(),d("span",Km,[K(C(Re),{class:"size-4 animate-spin"}),j[31]||(j[31]=we(" Creating... ",-1))])):(a(),d("span",Xm,"Create Subdomain"))],8,Ym)]),w.value?(a(),d("p",{key:1,class:Ie([x.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},E(w.value),3)):q("",!0)],32)])])])])}}},Gm=[{path:"/login",name:"Login",component:Oc},{path:"/",name:"Dashboard",component:ya},{path:"/vps",name:"VpsManagement",component:Xa},{path:"/websites",name:"WebsiteManagement",component:so},{path:"/websites/:websiteId/settings",name:"WebsiteSettings",component:qn},{path:"/websites/:websiteId/pages",name:"PagesManagement",component:Cu},{path:"/websites/:websiteId/pages/new",name:"PageCreate",component:ls},{path:"/websites/:websiteId/pages/:pageId",name:"PageEdit",component:ls},{path:"/websites/:websiteId/folders",name:"FoldersManagement",component:Yi},{path:"/websites/:websiteId/folders/new",name:"FolderCreate",component:as},{path:"/websites/:websiteId/folders/:folderId",name:"FolderEdit",component:as},{path:"/websites/:websiteId/subdomains",name:"SubdomainsManagement",component:om},{path:"/websites/:websiteId/subdomains/new",name:"SubdomainEdit",component:Jm},{path:"/profile",name:"AdminProfile",component:Qc},{path:"/monitoring",name:"Monitoring",component:fi},{path:"/settings",name:"Settings",component:Ed}],Lt=js({history:Es(),routes:Gm}),ns=localStorage.getItem("adminToken");ns&&(D.defaults.headers.common["X-Admin-Token"]=ns);D.interceptors.response.use(t=>t,t=>{var c;if(((c=t==null?void 0:t.response)==null?void 0:c.status)===401){try{localStorage.removeItem("adminToken"),delete D.defaults.headers.common["X-Admin-Token"]}catch{}Lt.currentRoute.value.path!=="/login"&&Lt.push("/login")}return Promise.reject(t)});Lt.beforeEach((t,s,c)=>{const g=!!localStorage.getItem("adminToken");if(!g&&t.path!=="/login")return c("/login");if(g&&t.path==="/login")return c("/");c()});Fs(Zs).use(Lt).mount("#app");export{fs as g};
