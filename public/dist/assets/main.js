import{u as pt,a as wt,r as nt,c as d,o as n,b as k,d as B,e,f as Et,w as Se,n as Ie,g as z,i as g,j as et,t as R,k as G,F as xe,l as we,m as Ve,p as D,v as Q,q as Xe,s as ue,x as Ce,y as Ht,z as lt,A as qe,B as kt,C as St,D as zt,E as Cs,G as Ts,H as Es,I as As}from"./vendor.js";import{L as ns,S as rs,G as gt,B as is,U as Rs,a as ds,b as js,c as xt,C as Ct,A as Tt,d as jt,P as us,T as vt,e as He,f as Mt,g as cs,F as ps,h as Ms,i as ms,R as Ps,I as Ft,j as Lt,k as Us,l as Is,m as Fs,E as Nt,n as Xt,o as Ls,p as gs,q as Ds,r as zs,s as Ns,t as Vs}from"./icons.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const v of c)if(v.type==="childList")for(const p of v.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&u(p)}).observe(document,{childList:!0,subtree:!0});function r(c){const v={};return c.integrity&&(v.integrity=c.integrity),c.referrerPolicy&&(v.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?v.credentials="include":c.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function u(c){if(c.ep)return;c.ep=!0;const v=r(c);fetch(c.href,v)}})();const Bs={id:"app"},Hs={key:0,class:"min-h-screen"},Os={key:1,class:"relative flex min-h-screen w-full bg-background-light"},qs={class:"flex w-64 flex-col border-r border-gray-200 bg-white p-4"},Ws={class:"flex flex-col gap-2"},Ys={class:"flex-1"},Ks={class:"flex items-center justify-between border-b border-gray-200 px-10 py-4 bg-white"},Xs={class:"flex items-center gap-4"},Gs={class:"h-10 w-10 rounded-lg border border-gray-300 bg-gray-50 text-gray-800"},Qs={class:"p-6 lg:p-10"},Js={__name:"App",setup(t){const s=pt(),r=wt(),u=()=>{localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"],r.push("/login")};return(c,v)=>{const p=nt("router-view"),w=nt("router-link");return n(),d("div",Bs,[k(s).path==="/login"?(n(),d("div",Hs,[B(p)])):(n(),d("div",Os,[e("aside",qs,[v[6]||(v[6]=Et('<div class="flex items-center gap-3 mb-4"><div class="rounded-full size-10 bg-primary/10"></div><div class="flex flex-col"><h1 class="text-gray-900 text-base font-medium">Admin User</h1><p class="text-gray-500 text-sm">admin@vps.com</p></div></div>',1)),e("nav",Ws,[B(w,{to:"/",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":k(s).path==="/","hover:bg-gray-100 text-gray-800":k(s).path!=="/"}])},{default:Se(()=>[B(k(ns),{class:"size-4"}),v[0]||(v[0]=e("span",null,"Dashboard",-1))]),_:1},8,["class"]),B(w,{to:"/vps",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":k(s).path.startsWith("/vps"),"hover:bg-gray-100 text-gray-800":!k(s).path.startsWith("/vps")}])},{default:Se(()=>[B(k(rs),{class:"size-4"}),v[1]||(v[1]=e("span",null,"Servers",-1))]),_:1},8,["class"]),B(w,{to:"/websites",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":k(s).path.startsWith("/websites"),"hover:bg-gray-100 text-gray-800":!k(s).path.startsWith("/websites")}])},{default:Se(()=>[B(k(gt),{class:"size-4"}),v[2]||(v[2]=e("span",null,"Websites",-1))]),_:1},8,["class"]),B(w,{to:"/monitoring",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":k(s).path.startsWith("/monitoring"),"hover:bg-gray-100 text-gray-800":!k(s).path.startsWith("/monitoring")}])},{default:Se(()=>[B(k(is),{class:"size-4"}),v[3]||(v[3]=e("span",null,"Monitoring",-1))]),_:1},8,["class"]),B(w,{to:"/profile",class:Ie(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":k(s).path.startsWith("/profile"),"hover:bg-gray-100 text-gray-800":!k(s).path.startsWith("/profile")}])},{default:Se(()=>[B(k(Rs),{class:"size-4"}),v[4]||(v[4]=e("span",null,"Profile",-1))]),_:1},8,["class"]),B(w,{to:"/settings",class:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-800 hover:bg-gray-100"},{default:Se(()=>[B(k(ds),{class:"size-4"}),v[5]||(v[5]=e("span",null,"Settings",-1))]),_:1})])]),e("main",Ys,[e("header",Ks,[v[8]||(v[8]=e("h2",{class:"text-lg font-bold"},"Tổng quan Hệ thống",-1)),e("div",Xs,[v[7]||(v[7]=e("input",{class:"form-input h-10 w-64 rounded-lg border border-gray-300 bg-gray-50 px-4",placeholder:"Search"},null,-1)),e("button",Gs,[B(k(js),{class:"mx-auto size-5"})]),e("button",{onClick:u,class:"h-10 px-3 rounded-lg border border-gray-300 bg-white text-red-600"}," Logout ")])]),e("div",Qs,[B(p)])])]))])}}},Zs={class:"min-h-screen"},ea={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ta={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},sa={class:"p-6 bg-white border-b border-gray-200"},aa={class:"rounded-xl bg-gray-50 p-6 border border-gray-200"},oa={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},la={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},na={class:"flex items-center justify-between text-gray-500"},ra={class:"text-gray-900 tracking-tight text-3xl font-bold"},ia={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},da={class:"flex items-center justify-between text-gray-500"},ua={class:"text-gray-900 tracking-tight text-3xl font-bold"},ca={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},pa={class:"flex items-center justify-between text-gray-500"},ma={class:"text-red-500 tracking-tight text-3xl font-bold"},ga={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},va={class:"flex items-center justify-between text-gray-500"},fa={class:"text-gray-900 tracking-tight text-3xl font-bold"},ba={__name:"Dashboard",setup(t){const s=g({vpsServers:0,websites:0,onlineWebsites:0,sslEnabled:0});return et(async()=>{try{const[u,c]=await Promise.all([z.get("/api/vps"),z.get("/api/websites")]),v=Array.isArray(u.data)?u.data:[],p=Array.isArray(c.data)?c.data:[];s.value.vpsServers=v.length,s.value.websites=p.length,s.value.onlineWebsites=p.filter(w=>w.status==="deployed").length,s.value.sslEnabled=p.filter(w=>w.ssl_enabled).length}catch(u){console.error("Failed to fetch stats:",u)}}),(u,c)=>(n(),d("div",Zs,[e("main",null,[e("div",ea,[e("div",ta,[e("div",sa,[c[4]||(c[4]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Tổng quan Hệ thống",-1)),e("div",aa,[e("div",oa,[e("div",la,[e("div",na,[c[0]||(c[0]=e("p",{class:"text-base font-medium text-gray-800"},"Máy chủ VPS",-1)),B(k(rs),{class:"h-6 w-6 text-gray-600"})]),e("p",ra,R(s.value.vpsServers),1)]),e("div",ia,[e("div",da,[c[1]||(c[1]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web",-1)),B(k(gt),{class:"h-6 w-6 text-gray-600"})]),e("p",ua,R(s.value.websites),1)]),e("div",ca,[e("div",pa,[c[2]||(c[2]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web trực tuyến",-1)),B(k(is),{class:"h-6 w-6 text-red-500"})]),e("p",ma,R(s.value.onlineWebsites),1)]),e("div",ga,[e("div",va,[c[3]||(c[3]=e("p",{class:"text-base font-medium text-gray-800"},"SSL được bật",-1)),B(k(xt),{class:"h-6 w-6 text-gray-600"})]),e("p",fa,R(s.value.sslEnabled),1)])])]),c[5]||(c[5]=Et('<h2 class="text-gray-900 text-[22px] font-bold tracking-[-0.015em] pb-3 pt-10">Hoạt động gần đây</h2><div class="rounded-xl border border-gray-200 bg-white overflow-hidden"><table class="w-full"><thead><tr class="bg-gray-50"><th class="px-6 py-4 text-left text-gray-600 w-[15%] text-sm font-medium">Hoạt động</th><th class="px-6 py-4 text-left text-gray-600 w-[20%] text-sm font-medium">Người dùng</th><th class="px-6 py-4 text-left text-gray-600 w-[40%] text-sm font-medium">Đối tượng</th><th class="px-6 py-4 text-left text-gray-600 w-[25%] text-sm font-medium">Thời gian</th></tr></thead><tbody class="divide-y divide-gray-200"><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-700">Tạo</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">admin</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;web-server-01&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">5 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700">Thêm</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">hệ thống</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">trang web &#39;example.com&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">15 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-yellow-100 px-3 py-1 text-xs font-medium text-yellow-800">Khởi động lại</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">dev_user</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;db-server-02&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">1 giờ trước</td></tr></tbody></table></div>',2))])])])])]))}},ya={class:"min-h-screen bg-gray-100"},ha={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},xa={class:"px-4 py-6 sm:px-0"},wa={class:"flex justify-between items-center mb-6"},_a={class:"bg-white shadow overflow-hidden sm:rounded-md"},ka={class:"divide-y divide-gray-200"},$a={class:"flex items-center justify-between"},Sa={class:"flex-1"},Ca={class:"text-lg font-medium text-gray-900"},Ta={class:"text-sm text-gray-500"},Ea={class:"mt-2 flex items-center space-x-4 text-sm text-gray-500"},Aa={class:"flex items-center space-x-2"},Ra=["onClick"],ja=["onClick"],Ma={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},Pa={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ua={class:"text-lg font-medium text-gray-900 mb-4"},Ia={class:"mb-4"},Fa={class:"mb-4"},La={class:"mb-4"},Da={class:"mb-4"},za={class:"mb-4"},Na={class:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-2"},Va={key:0,class:"mb-4"},Ba={class:"mt-1 flex gap-2"},Ha=["value"],Oa={class:"mb-4"},qa={class:"flex justify-end space-x-3"},Wa={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},Ya={key:1,class:"fixed bottom-4 right-4 z-50"},Ka={__name:"VpsManagement",setup(t){const s=g(""),r=g(""),u=g([]),c=g(!1),v=g(!1),p=g(null),w=g(""),x=g({name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:"",status:"inactive"}),a=async()=>{try{const _=await z.get("/api/vps");u.value=_.data}catch{s.value="Failed to fetch VPS servers",r.value="error"}},$=_=>{if(!_)return"";let b=String(_).trim();return b=b.replace(/^https?:\/\//i,""),b=b.split("/")[0],b=b.split(":")[0],b.trim()},I=_=>{var f;const b=((f=_==null?void 0:_.target)==null?void 0:f.value)||"";b&&(x.value.ssh_key_path=b)},ee=async()=>{var _,b,f,U,T,S;try{if(x.value.ip_address=$(x.value.ip_address),x.value.ssh_key_path=(x.value.ssh_key_path||"").trim(),v.value)await z.put(`/api/vps/${p.value.id}`,x.value),s.value="VPS server updated successfully",r.value="success";else{const le=(await z.post("/api/vps",x.value)).data;x.value.status&&x.value.status!=="inactive"&&await z.put(`/api/vps/${le.id}`,{status:x.value.status}),s.value="VPS server created successfully",r.value="success"}h(),a()}catch(E){s.value=((b=(_=E==null?void 0:E.response)==null?void 0:_.data)==null?void 0:b.message)||((U=(f=E==null?void 0:E.response)==null?void 0:f.data)==null?void 0:U.error)||((S=(T=E==null?void 0:E.response)==null?void 0:T.data)==null?void 0:S.errors)&&Object.values(E.response.data.errors).flat().join(", ")||"Failed to save VPS server",r.value="error"}},i=_=>{p.value=_,x.value={..._},v.value=!0,w.value=_.worker_key||""},O=async _=>{if(confirm(`Are you sure you want to delete ${_.name}?`))try{await z.delete(`/api/vps/${_.id}`),s.value="VPS server deleted successfully",r.value="success",a()}catch{s.value="Failed to delete VPS server",r.value="error"}},h=()=>{c.value=!1,v.value=!1,p.value=null,x.value={name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:""},w.value=""},N=()=>{w.value&&(navigator.clipboard.writeText(w.value),s.value="Worker key copied",r.value="success")};return et(a),(_,b)=>(n(),d("div",ya,[e("div",ha,[e("div",xa,[e("div",wa,[b[8]||(b[8]=e("h1",{class:"text-3xl font-bold text-gray-900"},"VPS Servers",-1)),e("button",{onClick:b[0]||(b[0]=f=>c.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Add VPS Server ")]),e("div",_a,[e("ul",ka,[(n(!0),d(xe,null,we(u.value,f=>(n(),d("li",{key:f.id,class:"px-6 py-4"},[e("div",$a,[e("div",Sa,[e("h3",Ca,R(f.name),1),e("p",Ta,R(f.ip_address),1),e("div",Ea,[e("span",null,"SSH Port: "+R(f.ssh_port),1),e("span",null,"User: "+R(f.ssh_user),1),e("span",null,"Websites: "+R(f.websites_count),1)])]),e("div",Aa,[e("span",{class:Ie(["inline-flex items-center gap-1",{"text-green-600":f.status==="active","text-red-600":f.status==="inactive","text-yellow-600":f.status==="error"}])},[f.status==="active"?(n(),ue(k(Ct),{key:0,class:"size-4"})):f.status==="error"?(n(),ue(k(Tt),{key:1,class:"size-4"})):(n(),ue(k(jt),{key:2,class:"size-4"})),Ce(" "+R(f.status),1)],2),e("button",{onClick:U=>i(f),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},[B(k(us),{class:"size-4"})],8,Ra),e("button",{onClick:U=>O(f),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50",title:"Delete"},[B(k(vt),{class:"size-4"})],8,ja)])])]))),128))])])])]),c.value||v.value?(n(),d("div",Ma,[e("div",Pa,[e("h2",Ua,R(v.value?"Edit VPS Server":"Add VPS Server"),1),e("form",{onSubmit:Ve(ee,["prevent"])},[e("div",Ia,[b[9]||(b[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),D(e("input",{"onUpdate:modelValue":b[1]||(b[1]=f=>x.value.name=f),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,x.value.name]])]),e("div",Fa,[b[10]||(b[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"IP Address / Hostname",-1)),D(e("input",{"onUpdate:modelValue":b[2]||(b[2]=f=>x.value.ip_address=f),type:"text",required:"",placeholder:"e.g. 203.0.113.10 or worker.example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,x.value.ip_address]])]),e("div",La,[b[11]||(b[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH User",-1)),D(e("input",{"onUpdate:modelValue":b[3]||(b[3]=f=>x.value.ssh_user=f),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,x.value.ssh_user]])]),e("div",Da,[b[12]||(b[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Port",-1)),D(e("input",{"onUpdate:modelValue":b[4]||(b[4]=f=>x.value.ssh_port=f),type:"number",required:"",min:"1",max:"65535",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,x.value.ssh_port,void 0,{number:!0}]])]),e("div",za,[b[14]||(b[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Key Path",-1)),e("div",Na,[D(e("input",{"onUpdate:modelValue":b[5]||(b[5]=f=>x.value.ssh_key_path=f),type:"text",placeholder:"/path/to/ssh/key",class:"block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,x.value.ssh_key_path]]),e("select",{onChange:b[6]||(b[6]=f=>I(f)),class:"block w-full border-gray-300 rounded-md shadow-sm"},[...b[13]||(b[13]=[Et('<option value="">Chọn nhanh đường dẫn</option><option value="/root/.ssh/id_rsa">/root/.ssh/id_rsa</option><option value="/root/.ssh/id_ed25519">/root/.ssh/id_ed25519</option><option value="/home/ubuntu/.ssh/id_rsa">/home/ubuntu/.ssh/id_rsa</option><option value="/home/ubuntu/.ssh/id_ed25519">/home/ubuntu/.ssh/id_ed25519</option><option value="/home/ec2-user/.ssh/id_rsa">/home/ec2-user/.ssh/id_rsa</option><option value="/home/ec2-user/.ssh/id_ed25519">/home/ec2-user/.ssh/id_ed25519</option><option value="/home/admin/.ssh/id_rsa">/home/admin/.ssh/id_rsa</option><option value="/home/admin/.ssh/id_ed25519">/home/admin/.ssh/id_ed25519</option>',9)])],32)])]),v.value?(n(),d("div",Va,[b[15]||(b[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Worker Key",-1)),e("div",Ba,[e("input",{value:w.value,readonly:"",class:"flex-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Ha),e("button",{type:"button",onClick:N,class:"px-3 py-2 rounded-md border border-gray-300 bg-gray-50"},"Copy")])])):G("",!0),e("div",Oa,[b[17]||(b[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),D(e("select",{"onUpdate:modelValue":b[7]||(b[7]=f=>x.value.status=f),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...b[16]||(b[16]=[e("option",{value:"active"},"active",-1),e("option",{value:"inactive"},"inactive",-1),e("option",{value:"error"},"error",-1)])],512),[[Xe,x.value.status]])]),e("div",qa,[e("button",{type:"button",onClick:h,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",Wa,R(v.value?"Update":"Create"),1)])],32)])])):G("",!0),s.value?(n(),d("div",Ya,[e("div",{class:Ie([r.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},R(s.value),3)])):G("",!0)]))}},Xa={class:"min-h-screen bg-gray-100"},Ga={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Qa={class:"px-4 py-6 sm:px-0"},Ja={key:0,class:"mb-4"},Za={class:"flex justify-between items-center mb-6"},eo={class:"bg-white shadow sm:rounded-md"},to={class:"divide-y divide-gray-200"},so={class:"flex items-center justify-between"},ao={class:"flex-1"},oo={class:"flex items-center"},lo={class:"text-lg font-medium text-gray-900"},no={class:"text-sm text-gray-500 mt-1"},ro={class:"mt-2 flex items-center space-x-4 text-sm"},io=["title"],uo={class:"flex items-center space-x-2"},co=["href"],po=["href"],mo=["onClick","disabled"],go=["onClick","disabled"],vo=["onClick","disabled"],fo={key:2,class:"relative redeploy-dropdown-container"},bo=["onClick","disabled"],yo={key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50"},ho={class:"py-1"},xo=["onClick"],wo=["onClick"],_o=["onClick"],ko=["onClick","disabled"],$o={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},So={class:"bg-white rounded-lg p-6 w-full max-w-md"},Co={key:0,class:"mb-4 text-sm text-red-600"},To={class:"mb-4"},Eo={class:"mb-4"},Ao={class:"mb-4"},Ro=["value"],jo={class:"mb-4"},Mo=["value"],Po={key:0,class:"mb-4"},Uo={key:1,class:"mb-4"},Io={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Fo={class:"bg-white rounded-lg p-6 w-full max-w-md"},Lo={class:"mb-4"},Do={class:"space-y-2"},zo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},No={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Vo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Bo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Ho={class:"flex justify-end space-x-3"},Oo=["disabled"],qo={key:2,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Wo={class:"bg-white rounded-lg p-6 w-full max-w-md"},Yo={class:"mb-4"},Ko={class:"space-y-2"},Xo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Go={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Qo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Jo={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Zo={class:"flex justify-end space-x-3"},el=["disabled"],tl={key:0,class:"fixed bottom-4 right-4 z-50"},sl={__name:"WebsiteManagement",setup(t){const s=g([]),r=g([]),u=g(!1);g(!1),g(!1),g(!1),g(null),g([]),g(null);const c=g(""),v=g(""),p=g(""),w=g(""),x=g({});let a=null;g(!1);const $=g([]),I=g([]),ee=g([]),i=g([]),O=g({}),h=g([]),N=g(!1),_=g(!1),b=g(null),f=g({template_names:["all"]}),U=g({template_names:["all"]}),T=(F,m="success")=>{p.value=F,w.value=m,setTimeout(()=>{p.value=""},3e3)},S=g({domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",cloudflare_account_id:null,wordpress_template:"basic"}),E=g([]);g({path:"",filename:"",title:"",content:""});const le=async()=>{try{const m=(await z.get("/api/websites")).data;m.forEach(ie=>{const te=x.value[ie.id];te&&te!==ie.status&&(ie.status==="deployed"?T(`${ie.domain} deployed`,"success"):ie.status==="error"&&T(`${ie.domain} deploy failed`,"error")),x.value[ie.id]=ie.status});const ae=new Set(m.map(ie=>ie.domain)),re=ie=>{for(const te of ae)if(te!==ie&&ie.endsWith("."+te))return!0;return!1};s.value=m.filter(ie=>!re(ie.domain))}catch{T("Failed to fetch websites","error")}},J=async()=>{try{const F=await z.get("/api/vps");r.value=F.data.filter(m=>m.status==="active")}catch{}},K=async()=>{var F,m,ae,re;try{await z.post("/api/websites",S.value),T("Website created","success"),c.value="Website created",v.value="success",Pe(),await le()}catch(ie){const te=((m=(F=ie==null?void 0:ie.response)==null?void 0:F.data)==null?void 0:m.message)||((re=(ae=ie==null?void 0:ie.response)==null?void 0:ae.data)==null?void 0:re.error)||"Failed to create website";T(te,"error"),c.value=te,v.value="error"}},_e=async F=>{var m,ae,re,ie;try{F.status="deploying",$.value=[...$.value,F.id],await z.post(`/api/websites/${F.id}/deploy`),T("Deployment started","success"),c.value="Deployment started",v.value="success",await le()}catch(te){const fe=((ae=(m=te==null?void 0:te.response)==null?void 0:m.data)==null?void 0:ae.message)||((ie=(re=te==null?void 0:te.response)==null?void 0:re.data)==null?void 0:ie.error)||"Failed to deploy website";T(fe,"error"),c.value=fe,v.value="error",await le()}finally{$.value=$.value.filter(te=>te!==F.id)}},Te=async F=>{var m,ae,re,ie;try{I.value=[...I.value,F.id],await z.post(`/api/websites/${F.id}/ssl`),T("SSL generation started","success"),c.value="SSL generation started",v.value="success",await le()}catch(te){const fe=((ae=(m=te==null?void 0:te.response)==null?void 0:m.data)==null?void 0:ae.message)||((ie=(re=te==null?void 0:te.response)==null?void 0:re.data)==null?void 0:ie.error)||"Failed to enable SSL";T(fe,"error"),c.value=fe,v.value="error"}finally{I.value=I.value.filter(te=>te!==F.id)}},be=async F=>{var m,ae,re,ie;if(confirm(`Are you sure you want to delete ${F.domain}?`))try{i.value=[...i.value,F.id],await z.delete(`/api/websites/${F.id}`),T("Website deleted","success"),await le()}catch(te){const fe=((ae=(m=te==null?void 0:te.response)==null?void 0:m.data)==null?void 0:ae.message)||((ie=(re=te==null?void 0:te.response)==null?void 0:re.data)==null?void 0:ie.error)||"Failed to delete website";T(fe,"error")}finally{i.value=i.value.filter(te=>te!==F.id)}},Ee=async F=>{var m,ae,re,ie;try{ee.value=[...ee.value,F.id],await z.post(`/api/websites/${F.id}/deactivate`),T("Website deactivated","success"),c.value="Website deactivated",v.value="success",le()}catch(te){const fe=((ae=(m=te==null?void 0:te.response)==null?void 0:m.data)==null?void 0:ae.message)||((ie=(re=te==null?void 0:te.response)==null?void 0:re.data)==null?void 0:ie.error)||"Failed to deactivate website";T(fe,"error"),c.value=fe,v.value="error"}finally{ee.value=ee.value.filter(te=>te!==F.id)}};g([]);const Pe=()=>{u.value=!1,S.value={domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",wordpress_template:"basic"}},ze=async()=>{try{const{data:F}=await z.get("/api/cloudflare-accounts");E.value=F;const m=F.find(ae=>ae.is_default);m&&!S.value.cloudflare_account_id&&(S.value.cloudflare_account_id=m.id)}catch(F){console.error("Failed to load Cloudflare accounts",F)}};et(()=>{le(),J(),ze(),a=setInterval(le,3e3),document.addEventListener("click",F=>{F.target.closest(".redeploy-dropdown-container")||(O.value={})})}),Ht(()=>{a&&clearInterval(a)});const Fe=F=>{const m=`/preview/${F.id}`,ae=localStorage.getItem("adminToken")||"",re=new URLSearchParams;ae&&re.set("token",ae),re.set("hide_preview_bar","1");const ie=re.toString();return ie?`${m}?${ie}`:m},We=F=>{O.value={...O.value,[F]:!O.value[F]}},de=async F=>{var m,ae;try{h.value=[...h.value,F.id],O.value[F.id]=!1;const re=await z.post(`/api/websites/${F.id}/redeploy-pages`);T(re.data.message||"Pages redeployed successfully","success")}catch(re){const ie=((ae=(m=re==null?void 0:re.response)==null?void 0:m.data)==null?void 0:ae.message)||"Failed to redeploy pages";T(ie,"error")}finally{h.value=h.value.filter(re=>re!==F.id)}},ne=F=>{b.value=F,O.value[F.id]=!1,N.value=!0},C=F=>{b.value=F,O.value[F.id]=!1,_.value=!0},Z=async()=>{var F,m;if(b.value)try{h.value=[...h.value,b.value.id];const ae=await z.post(`/api/websites/${b.value.id}/redeploy-template-assets`,f.value);T(ae.data.message||"Template assets deployed","success"),N.value=!1}catch(ae){const re=((m=(F=ae==null?void 0:ae.response)==null?void 0:F.data)==null?void 0:m.message)||"Failed to deploy template assets";T(re,"error")}finally{h.value=h.value.filter(ae=>ae!==b.value.id)}},j=async()=>{var F,m;if(b.value)try{h.value=[...h.value,b.value.id];const ae={template_names:(U.value.template_names||[]).length===0?[]:U.value.template_names},re=await z.post(`/api/websites/${b.value.id}/update-pages-template`,ae);T(re.data.message||"Header/footer updated","success"),_.value=!1}catch(ae){const re=((m=(F=ae==null?void 0:ae.response)==null?void 0:F.data)==null?void 0:m.message)||"Failed to update header/footer";T(re,"error")}finally{h.value=h.value.filter(ae=>ae!==b.value.id)}},q=F=>{const m=f.value.template_names||[];m.indexOf(F)===-1?f.value.template_names=[...m,F]:f.value.template_names=m.filter(re=>re!==F),console.log("Redeploy templates:",f.value.template_names)},me=F=>{const m=U.value.template_names||[];m.indexOf(F)===-1?U.value.template_names=[...m,F]:U.value.template_names=m.filter(re=>re!==F),console.log("Update templates:",U.value.template_names)},ke=F=>(f.value.template_names||[]).includes(F),pe=F=>(U.value.template_names||[]).includes(F),$e=()=>{N.value=!1,b.value=null,f.value={template_names:["all"]}},Me=()=>{_.value=!1,b.value=null,U.value={template_names:["all"]}};return(F,m)=>{var re,ie,te,fe;const ae=nt("router-link");return n(),d(xe,null,[e("div",Xa,[e("div",Ga,[e("div",Qa,[c.value?(n(),d("div",Ja,[e("div",{class:Ie([v.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},R(c.value),3)])):G("",!0),e("div",Za,[m[15]||(m[15]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Websites",-1)),e("button",{onClick:m[0]||(m[0]=A=>u.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Create Website ")]),e("div",eo,[e("ul",to,[(n(!0),d(xe,null,we(s.value,A=>{var M;return n(),d("li",{key:A.id,class:"px-6 py-4 relative overflow-visible"},[e("div",so,[e("div",ao,[e("div",oo,[e("h3",lo,R(A.domain),1),e("span",{class:Ie([{"bg-blue-100 text-blue-800":A.type==="html","bg-green-100 text-green-800":A.type==="wordpress","bg-purple-100 text-purple-800":A.type==="laravel1"},"ml-2 px-2 py-1 text-xs font-medium rounded-full"])},R(A.type),3)]),e("p",no," VPS: "+R(((M=A.vps_server)==null?void 0:M.name)||"N/A"),1),e("div",ro,[e("span",{class:Ie(["inline-flex items-center",{"text-blue-600":A.status==="deploying","text-green-600":A.status==="deployed","text-gray-600":A.status==="pending"||A.status==="draft","text-orange-600":A.status==="suspended","text-red-600":A.status==="error"}]),title:A.status},[A.status==="deploying"?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):A.status==="deployed"?(n(),ue(k(Ct),{key:1,class:"size-4"})):A.status==="pending"||A.status==="draft"?(n(),ue(k(jt),{key:2,class:"size-4"})):A.status==="suspended"?(n(),ue(k(Mt),{key:3,class:"size-4"})):(n(),ue(k(Tt),{key:4,class:"size-4"}))],10,io),e("span",{class:Ie(["inline-flex items-center gap-1",A.ssl_enabled?"text-green-600":"text-gray-400"])},[A.ssl_enabled?(n(),ue(k(xt),{key:0,class:"size-4"})):(n(),ue(k(cs),{key:1,class:"size-4"}))],2)])]),e("div",uo,[e("a",{href:(A.ssl_enabled?"https://":"http://")+A.domain,target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Website"},[B(k(gt),{class:"size-4"})],8,co),B(ae,{to:`/websites/${A.id}/pages`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:Se(()=>[B(k(ps),{class:"size-4"})]),_:1},8,["to"]),B(ae,{to:`/websites/${A.id}/folders`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-amber-600 hover:bg-gray-50",title:"Manage Categories"},{default:Se(()=>[B(k(Ms),{class:"size-4"})]),_:1},8,["to"]),B(ae,{to:`/websites/${A.id}/subdomains`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"Manage Subdomains"},{default:Se(()=>[B(k(ns),{class:"size-4"})]),_:1},8,["to"]),B(ae,{to:`/websites/${A.id}/settings`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Website Settings"},{default:Se(()=>[B(k(ds),{class:"size-4"})]),_:1},8,["to"]),e("a",{href:Fe(A),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[B(k(jt),{class:"size-4"})],8,po),e("button",{onClick:l=>_e(A),disabled:A.status==="deploying"||A.status==="deployed"||$.value.includes(A.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[$.value.includes(A.id)?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):(n(),ue(k(ms),{key:1,class:"size-4"}))],8,mo),A.status==="deployed"?(n(),d("button",{key:0,onClick:l=>Te(A),disabled:I.value.includes(A.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[I.value.includes(A.id)?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):(n(),ue(k(xt),{key:1,class:"size-4"}))],8,go)):G("",!0),A.status==="deployed"||A.status==="error"?(n(),d("button",{key:1,onClick:l=>Ee(A),disabled:ee.value.includes(A.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[ee.value.includes(A.id)?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):(n(),ue(k(Mt),{key:1,class:"size-4"}))],8,vo)):G("",!0),A.status==="deployed"&&A.type==="laravel1"?(n(),d("div",fo,[e("button",{onClick:l=>We(A.id),disabled:h.value.includes(A.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-teal-600 hover:bg-gray-50 disabled:text-gray-400",title:"Redeploy Options"},[h.value.includes(A.id)?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):(n(),ue(k(Ps),{key:1,class:"size-4"}))],8,bo),O.value[A.id]?(n(),d("div",yo,[e("div",ho,[e("button",{onClick:l=>de(A),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy All Pages ",8,xo),e("button",{onClick:l=>ne(A),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy Template Assets ",8,wo),e("button",{onClick:l=>C(A),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Update Pages Template ",8,_o)])])):G("",!0)])):G("",!0),e("button",{onClick:l=>be(A),disabled:i.value.includes(A.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[i.value.includes(A.id)?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):(n(),ue(k(vt),{key:1,class:"size-4"}))],8,ko)])])])}),128))])])])]),u.value?(n(),d("div",$o,[e("div",So,[m[30]||(m[30]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create Website",-1)),r.value.length===0?(n(),d("div",Co,"Chưa có VPS ở trạng thái active. Vào mục Servers để đặt trạng thái active cho VPS hiện tại.")):G("",!0),e("form",{onSubmit:Ve(K,["prevent"])},[e("div",To,[m[16]||(m[16]=e("label",{class:"block text-sm font-medium text-gray-700"},"Domain",-1)),D(e("input",{"onUpdate:modelValue":m[1]||(m[1]=A=>S.value.domain=A),type:"text",required:"",placeholder:"example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,S.value.domain]])]),e("div",Eo,[m[18]||(m[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Type",-1)),D(e("select",{"onUpdate:modelValue":m[2]||(m[2]=A=>S.value.type=A),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...m[17]||(m[17]=[e("option",{value:"html"},"HTML Website",-1),e("option",{value:"wordpress"},"WordPress",-1),e("option",{value:"laravel1"},"Laravel 1",-1)])],512),[[Xe,S.value.type]])]),e("div",Ao,[m[20]||(m[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),D(e("select",{"onUpdate:modelValue":m[3]||(m[3]=A=>S.value.vps_server_id=A),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[m[19]||(m[19]=e("option",{value:""},"Select VPS Server",-1)),(n(!0),d(xe,null,we(r.value,A=>(n(),d("option",{key:A.id,value:A.id},R(A.name)+" ("+R(A.ip_address)+") ",9,Ro))),128))],512),[[Xe,S.value.vps_server_id]])]),e("div",jo,[m[22]||(m[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Cloudflare Account",-1)),D(e("select",{"onUpdate:modelValue":m[4]||(m[4]=A=>S.value.cloudflare_account_id=A),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[m[21]||(m[21]=e("option",{value:null},"Select Account (optional)",-1)),(n(!0),d(xe,null,we(E.value,A=>(n(),d("option",{key:A.id,value:A.id},R(A.name)+" - "+R(A.email),9,Mo))),128))],512),[[Xe,S.value.cloudflare_account_id]]),m[23]||(m[23]=e("p",{class:"mt-1 text-xs text-gray-500"},"Chọn Cloudflare account để quản lý DNS và SSL cho website này",-1))]),S.value.type==="wordpress"?(n(),d("div",Po,[m[25]||(m[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"WordPress Template",-1)),D(e("select",{"onUpdate:modelValue":m[5]||(m[5]=A=>S.value.wordpress_template=A),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...m[24]||(m[24]=[e("option",{value:"basic"},"Basic WordPress",-1),e("option",{value:"business"},"Business Theme",-1),e("option",{value:"ecommerce"},"E-commerce Theme",-1)])],512),[[Xe,S.value.wordpress_template]])])):G("",!0),S.value.type==="laravel1"?(n(),d("div",Uo,[m[27]||(m[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template Package",-1)),D(e("select",{"onUpdate:modelValue":m[6]||(m[6]=A=>S.value.template_package=A),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...m[26]||(m[26]=[e("option",{value:"laravel-hotel-1"},"Hotel Template",-1)])],512),[[Xe,S.value.template_package]]),m[28]||(m[28]=e("p",{class:"mt-1 text-xs text-gray-500"},"Includes home, listing, and detail pages with shared assets",-1))])):G("",!0),e("div",{class:"flex justify-end space-x-3"},[e("button",{type:"button",onClick:Pe,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),m[29]||(m[29]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Create ",-1))])],32)])])):G("",!0),N.value?(n(),d("div",Io,[e("div",Fo,[m[37]||(m[37]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Redeploy Template Assets",-1)),e("div",Lo,[m[35]||(m[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",Do,[e("div",{class:"flex items-center cursor-pointer",onClick:m[7]||(m[7]=A=>q("all"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:ke("all")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[ke("all")?(n(),d("span",zo,"✓")):G("",!0)],4),m[31]||(m[31]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:m[8]||(m[8]=A=>q("home"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:ke("home")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[ke("home")?(n(),d("span",No,"✓")):G("",!0)],4),m[32]||(m[32]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:m[9]||(m[9]=A=>q("listing"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:ke("listing")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[ke("listing")?(n(),d("span",Vo,"✓")):G("",!0)],4),m[33]||(m[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:m[10]||(m[10]=A=>q("detail"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:ke("detail")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[ke("detail")?(n(),d("span",Bo,"✓")):G("",!0)],4),m[34]||(m[34]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),m[38]||(m[38]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-blue-800"}," Deploys CSS/JS files from the selected templates to all pages. Use this when you update template scripts or styles. ")],-1)),e("div",Ho,[e("button",{type:"button",onClick:$e,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:Z,disabled:h.value.includes((re=b.value)==null?void 0:re.id),class:"px-3 py-2 bg-teal-600 text-white text-sm rounded-md hover:bg-teal-700 disabled:opacity-50 flex items-center gap-2"},[h.value.includes((ie=b.value)==null?void 0:ie.id)?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):G("",!0),m[36]||(m[36]=Ce(" Deploy Assets ",-1))],8,Oo)])])])):G("",!0),_.value?(n(),d("div",qo,[e("div",Wo,[m[45]||(m[45]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Update Pages Template",-1)),e("div",Yo,[m[43]||(m[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",Ko,[e("div",{class:"flex items-center cursor-pointer",onClick:m[11]||(m[11]=A=>me("all"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:pe("all")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[pe("all")?(n(),d("span",Xo,"✓")):G("",!0)],4),m[39]||(m[39]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:m[12]||(m[12]=A=>me("home"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:pe("home")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[pe("home")?(n(),d("span",Go,"✓")):G("",!0)],4),m[40]||(m[40]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:m[13]||(m[13]=A=>me("listing"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:pe("listing")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[pe("listing")?(n(),d("span",Qo,"✓")):G("",!0)],4),m[41]||(m[41]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:m[14]||(m[14]=A=>me("detail"))},[e("div",{style:lt({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:pe("detail")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[pe("detail")?(n(),d("span",Jo,"✓")):G("",!0)],4),m[42]||(m[42]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),m[46]||(m[46]=e("div",{class:"bg-purple-50 border border-purple-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-purple-800"},[Ce(" Cập nhật phần header/footer cho "),e("strong",null,"các trang đang dùng template đã chọn"),Ce(", sau đó tự động deploy các trang đó. Tính năng này "),e("strong",null,"không"),Ce(' cập nhật CSS/JS (dùng mục "Redeploy Template Assets" cho CSS/JS). Với website chính, hệ thống sẽ xếp lịch redeploy Trang chủ và các trang Category liên quan. ')])],-1)),e("div",Zo,[e("button",{type:"button",onClick:Me,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:j,disabled:h.value.includes((te=b.value)==null?void 0:te.id),class:"px-3 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2"},[h.value.includes((fe=b.value)==null?void 0:fe.id)?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):G("",!0),m[44]||(m[44]=Ce(" Update header/footer ",-1))],8,el)])])])):G("",!0)]),p.value?(n(),d("div",tl,[e("div",{class:Ie([w.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},R(p.value),3)])):G("",!0)],64)}}},al={class:"min-h-screen bg-gray-100"},ol={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},ll={class:"px-4 py-6 sm:px-0"},nl={class:"flex items-center justify-between mb-6"},rl={class:"text-3xl font-bold text-gray-900"},il={key:0,class:"ml-2 text-lg text-gray-500"},dl={key:0,class:"mb-4"},ul={key:1,class:"text-gray-600"},cl={key:2,class:"mb-4"},pl={class:"inline-flex rounded-md shadow-sm",role:"group"},ml={key:3,class:"bg-white shadow sm:rounded-md p-6 space-y-6"},gl={key:0,class:"space-y-6"},vl={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fl={class:"mt-2 flex items-center gap-4"},bl={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},yl=["src"],hl={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},xl={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},wl={class:"mt-2 flex items-center gap-4"},_l={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},kl=["src"],$l={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},Sl={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},Cl={class:"mt-2 flex items-center gap-4"},Tl={class:"h-10 w-10 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},El=["src"],Al={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},Rl={key:0,class:"text-xs text-gray-500 truncate max-w-[220px]"},jl={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Ml={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Pl={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Ul={key:1,class:"space-y-6"},Il={class:"flex items-center justify-between mb-4"},Fl={class:"space-y-2"},Ll={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},Dl=["onDragstart","onDrop"],zl={class:"p-4"},Nl={class:"flex items-start justify-between gap-4"},Vl={class:"flex items-start gap-3 flex-1 min-w-0"},Bl={class:"flex-1 min-w-0 space-y-2"},Hl={class:"flex items-center gap-2"},Ol=["onUpdate:modelValue"],ql=["onUpdate:modelValue"],Wl={class:"flex items-center gap-2 flex-shrink-0"},Yl=["onClick"],Kl=["onClick"],Xl={key:0,class:"mt-4 ml-8 space-y-2 pt-3 border-t border-gray-100"},Gl=["onDragstart","onDrop"],Ql={class:"flex-1 min-w-0 space-y-1"},Jl=["onUpdate:modelValue"],Zl=["onUpdate:modelValue"],en=["onClick"],tn={class:"flex items-center justify-between mb-4"},sn={class:"space-y-3"},an={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},on=["onDragstart","onDrop"],ln={class:"p-4"},nn={class:"flex items-start justify-between gap-4 mb-3"},rn={class:"flex items-start gap-3 flex-1 min-w-0"},dn={class:"flex-1 min-w-0"},un=["onUpdate:modelValue","placeholder"],cn={class:"flex items-center gap-2 flex-shrink-0"},pn=["onClick"],mn=["onClick"],gn={key:0,class:"ml-8 space-y-2 pt-3 border-t border-gray-100"},vn=["onDragstart","onDrop"],fn={class:"flex-1 min-w-0 space-y-1"},bn=["onUpdate:modelValue"],yn=["onUpdate:modelValue"],hn=["onClick"],xn={key:1,class:"ml-8 pt-3 border-t border-gray-100"},wn={class:"flex justify-end space-x-3"},_n=["disabled"],kn={key:0,class:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4"},$n={key:1},Sn={class:"px-6 py-4 space-y-4"},Cn=["value"],Tn={class:"pt-3 border-t border-gray-200"},En={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},An={class:"px-6 py-4 border-b border-gray-200"},Rn={class:"text-sm text-gray-500 mt-1"},jn={class:"px-6 py-4 space-y-4"},Mn=["value"],Pn={class:"pt-3 border-t border-gray-200"},Un={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},In={class:"px-6 py-4 space-y-4"},Fn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},Ln={class:"px-6 py-4 border-b border-gray-200"},Dn={class:"text-sm text-gray-500 mt-1"},zn={class:"px-6 py-4 space-y-4"},Nn=["value"],Vn={class:"pt-3 border-t border-gray-200"},Bn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},Hn={__name:"WebsiteSettings",setup(t){const r=pt().params.websiteId,u=g(null),c=g(!0),v=g(!1),p=g(""),w=g(""),x=g("general"),a=g({title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}),$=g(null),I=g(null),ee=g(null),i=g(null),O=g(null),h=g(null),N=qe(()=>(a.value.custom_head_html||"").split(`
`).length||1),_=qe(()=>(a.value.custom_body_html||"").split(`
`).length||1),b=qe(()=>(a.value.custom_footer_html||"").split(`
`).length||1),f=V=>{V==="head"&&$.value&&i.value&&($.value.scrollTop=i.value.scrollTop),V==="body"&&I.value&&O.value&&(I.value.scrollTop=O.value.scrollTop),V==="footer"&&ee.value&&h.value&&(ee.value.scrollTop=h.value.scrollTop)},U=async()=>{try{const V=await z.get(`/api/websites/${r}`);u.value=V.data}catch{}},T=async()=>{var V,o;try{const he=(await z.get(`/api/websites/${r}/settings`)).data||{};a.value={title:he.title||"",logo_header_url:he.logo_header_url||"",logo_footer_url:he.logo_footer_url||"",favicon_url:he.favicon_url||"",custom_head_html:he.custom_head_html||"",custom_body_html:he.custom_body_html||"",custom_footer_html:he.custom_footer_html||"",menu:Array.isArray(he.menu)?he.menu:[],footer_links_html:he.footer_links_html||""},K.value=Array.isArray(he.menu)?he.menu:[],Array.isArray(he.footer_columns)?fe.value=he.footer_columns:fe.value=[]}catch(ye){p.value=((o=(V=ye==null?void 0:ye.response)==null?void 0:V.data)==null?void 0:o.error)||"Failed to load settings",w.value="error"}},S=async()=>{var V,o,ye,he;v.value=!0,p.value="";try{a.value.footer_links_html=It(),a.value.footer_columns=fe.value,await z.put(`/api/websites/${r}/settings`,a.value),p.value="Updated settings",w.value="success"}catch(Ae){p.value=((o=(V=Ae==null?void 0:Ae.response)==null?void 0:V.data)==null?void 0:o.message)||((he=(ye=Ae==null?void 0:Ae.response)==null?void 0:ye.data)==null?void 0:he.error)||(Ae==null?void 0:Ae.message)||"Failed to update settings",w.value="error"}finally{v.value=!1}},E=()=>{a.value={title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}},le=async(V,o)=>{var Ae,P,Ue,Y;const ye=((Ae=V==null?void 0:V.target)==null?void 0:Ae.files)||[];if(!ye.length)return;const he=new FormData;he.append("file",ye[0]);try{let ce=`/api/websites/${r}/assets/${o}`;const ge=await z.post(ce,he,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},timeout:6e4}),Ke=((P=ge==null?void 0:ge.data)==null?void 0:P.url)||"";o==="logo-header"?a.value.logo_header_url=Ke:o==="logo-footer"?a.value.logo_footer_url=Ke:o==="favicon"&&(a.value.favicon_url=Ke),p.value="Uploaded "+o,w.value="success"}catch(ce){const ge=((Y=(Ue=ce==null?void 0:ce.response)==null?void 0:Ue.data)==null?void 0:Y.error)||(ce==null?void 0:ce.message)||"Upload failed";p.value=ge,w.value="error"}finally{V.target.value=""}};et(async()=>{await Promise.all([U(),T(),ne()]),K.value=Array.isArray(a.value.menu)?[...a.value.menu]:[],fe.value.length||updateFooterColumnCount(),c.value=!1});const J=g([]),K=g([]),_e=g(!1),Te=g(!1),be=g(-1),Ee=g(""),Pe=g(""),ze=g(""),Fe=g(""),We=g(""),de=g(""),ne=async()=>{try{const V=await z.get(`/api/websites/${r}/folders`);J.value=V.data||[]}catch{}},C=V=>`/${(V==null?void 0:V.slug)||""}`,Z=()=>{if(Ee.value){const V=J.value.find(o=>String(o.id)===String(Ee.value));V&&(Pe.value=V.name,ze.value=C(V))}},j=()=>{if(Fe.value){const V=J.value.find(o=>String(o.id)===String(Fe.value));V&&(We.value=V.name,de.value=C(V))}};kt(Ee,Z),kt(Fe,j);const q=()=>{if(!Pe.value||!ze.value){p.value="Vui lòng điền đầy đủ thông tin",w.value="error";return}K.value.push({label:Pe.value,url:ze.value,children:[]}),a.value.menu=K.value,Ee.value="",Pe.value="",ze.value="",_e.value=!1,p.value="Đã thêm menu",w.value="success"},me=V=>{be.value=V,Te.value=!0},ke=()=>{if(!We.value||!de.value){p.value="Vui lòng điền đầy đủ thông tin",w.value="error";return}const V=K.value[be.value];V&&(V.children=V.children||[],V.children.push({label:We.value,url:de.value}),a.value.menu=K.value,Fe.value="",We.value="",de.value="",Te.value=!1,p.value="Đã thêm menu con",w.value="success")},pe=()=>{a.value.menu=K.value},$e=V=>{K.value.splice(V,1),a.value.menu=K.value},Me=(V,o)=>{const ye=K.value[V];ye&&(ye.children.splice(o,1),a.value.menu=K.value)};let F=-1,m={parent:-1,index:-1};const ae=V=>{F=V},re=V=>{if(F===-1||V===F)return;const o=K.value,[ye]=o.splice(F,1);o.splice(V,0,ye),F=-1,a.value.menu=o},ie=(V,o)=>{m={parent:V,index:o}},te=(V,o)=>{if(m.parent!==V)return;const ye=K.value[V].children||[],he=m.index;if(he===o||he<0)return;const[Ae]=ye.splice(he,1);ye.splice(o,0,Ae),m={parent:-1,index:-1},a.value.menu=K.value},fe=g([]),A=g(!1),M=g(!1),l=g(-1),L=g(""),W=g(""),y=g(""),X=g("");kt(W,()=>{if(W.value){const V=J.value.find(o=>String(o.id)===String(W.value));V&&(y.value=V.name,X.value=C(V))}});const Ne=()=>{fe.value.push({title:L.value||"",links:[]}),L.value="",A.value=!1,p.value="Đã thêm cột footer",w.value="success"},se=V=>{l.value=V,M.value=!0},Re=()=>{if(!y.value||!X.value){p.value="Vui lòng điền đầy đủ thông tin",w.value="error";return}const V=fe.value[l.value];V&&(V.links.push({label:y.value,url:X.value}),W.value="",y.value="",X.value="",M.value=!1,p.value="Đã thêm liên kết footer",w.value="success")},De=V=>{fe.value.splice(V,1)},Ze=()=>{},Le=(V,o)=>{const ye=fe.value[V];ye&&ye.links.splice(o,1)};let Oe=-1;const ot=V=>{Oe=V},Be=V=>{if(Oe===-1||V===Oe)return;const o=fe.value,[ye]=o.splice(Oe,1);o.splice(V,0,ye),Oe=-1};let Ye={column:-1,index:-1};const ft=(V,o)=>{Ye={column:V,index:o}},rt=(V,o)=>{if(Ye.column!==V)return;const ye=fe.value[V].links||[],he=Ye.index;if(he===o||he<0)return;const[Ae]=ye.splice(he,1);ye.splice(o,0,Ae),Ye={column:-1,index:-1}},It=()=>{const V=fe.value;if(!V.length)return"";let o='<div class="grid grid-cols-'+V.length+' gap-6">';for(const ye of V){o+="<div>",ye.title&&(o+='<div class="font-medium mb-2">'+ye.title+"</div>"),o+='<ul class="space-y-1">';const he=ye.links||[];for(const Ae of he)o+='<li><a href="'+(Ae.url||"#")+'" class="text-gray-600 hover:text-gray-900">'+(Ae.label||"")+"</a></li>";o+="</ul>",o+="</div>"}return o+="</div>",o};return(V,o)=>{var he,Ae;const ye=nt("router-link");return n(),d("div",al,[e("div",ol,[e("div",ll,[e("div",nl,[e("h1",rl,[o[40]||(o[40]=Ce(" Website Settings ",-1)),u.value?(n(),d("span",il,R(u.value.domain),1)):G("",!0)]),B(ye,{to:"/websites",class:"px-3 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:Se(()=>[...o[41]||(o[41]=[Ce("Back",-1)])]),_:1})]),p.value?(n(),d("div",dl,[e("div",{class:Ie([w.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},R(p.value),3)])):G("",!0),c.value?(n(),d("div",ul,"Loading...")):(n(),d("div",cl,[e("div",pl,[e("button",{type:"button",onClick:o[0]||(o[0]=P=>x.value="general"),class:Ie([x.value==="general"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-l-md hover:bg-gray-50"])},"Cài đặt chung",2),e("button",{type:"button",onClick:o[1]||(o[1]=P=>x.value="navigation"),class:Ie([x.value==="navigation"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-r-md hover:bg-gray-50"])},"Menu Header & Footer",2)])])),c.value?G("",!0):(n(),d("div",ml,[x.value==="general"?(n(),d("div",gl,[e("div",null,[o[42]||(o[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề",-1)),D(e("input",{"onUpdate:modelValue":o[2]||(o[2]=P=>a.value.title=P),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Website title"},null,512),[[Q,a.value.title]])]),e("div",vl,[e("div",null,[o[44]||(o[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Header",-1)),e("div",fl,[e("div",bl,[a.value.logo_header_url?(n(),d("img",{key:0,src:a.value.logo_header_url,class:"object-contain h-full w-full"},null,8,yl)):(n(),ue(k(Ft),{key:1,class:"size-6 text-gray-400"}))]),e("label",hl,[B(k(Lt),{class:"size-4 mr-2"}),o[43]||(o[43]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:o[3]||(o[3]=P=>le(P,"logo-header")),class:"hidden"},null,32)]),a.value.logo_header_url?(n(),d("span",xl,R(a.value.logo_header_url),1)):G("",!0)])]),e("div",null,[o[46]||(o[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Footer",-1)),e("div",wl,[e("div",_l,[a.value.logo_footer_url?(n(),d("img",{key:0,src:a.value.logo_footer_url,class:"object-contain h-full w-full"},null,8,kl)):(n(),ue(k(Ft),{key:1,class:"size-6 text-gray-400"}))]),e("label",$l,[B(k(Lt),{class:"size-4 mr-2"}),o[45]||(o[45]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:o[4]||(o[4]=P=>le(P,"logo-footer")),class:"hidden"},null,32)]),a.value.logo_footer_url?(n(),d("span",Sl,R(a.value.logo_footer_url),1)):G("",!0)])])]),e("div",null,[o[48]||(o[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Favicon",-1)),e("div",Cl,[e("div",Tl,[a.value.favicon_url?(n(),d("img",{key:0,src:a.value.favicon_url,class:"object-contain h-full w-full"},null,8,El)):(n(),ue(k(Ft),{key:1,class:"size-5 text-gray-400"}))]),e("label",Al,[B(k(Lt),{class:"size-4 mr-2"}),o[47]||(o[47]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".ico,.png,.jpg,.jpeg,.svg",onChange:o[5]||(o[5]=P=>le(P,"favicon")),class:"hidden"},null,32)]),a.value.favicon_url?(n(),d("span",Rl,R(a.value.favicon_url),1)):G("",!0)])]),e("div",null,[o[49]||(o[49]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào header",-1)),e("div",jl,[e("div",{ref_key:"gutterHead",ref:$,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(n(!0),d(xe,null,we(N.value,P=>(n(),d("div",{key:P,class:"leading-6"},R(P),1))),128))],512),D(e("textarea",{ref_key:"codeHead",ref:i,"onUpdate:modelValue":o[6]||(o[6]=P=>a.value.custom_head_html=P),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:o[7]||(o[7]=P=>f("head"))},null,544),[[Q,a.value.custom_head_html]])])]),e("div",null,[o[50]||(o[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào body",-1)),e("div",Ml,[e("div",{ref_key:"gutterBody",ref:I,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(n(!0),d(xe,null,we(_.value,P=>(n(),d("div",{key:P,class:"leading-6"},R(P),1))),128))],512),D(e("textarea",{ref_key:"codeBody",ref:O,"onUpdate:modelValue":o[8]||(o[8]=P=>a.value.custom_body_html=P),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<div>...</div>",onScroll:o[9]||(o[9]=P=>f("body"))},null,544),[[Q,a.value.custom_body_html]])])]),e("div",null,[o[51]||(o[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào footer",-1)),e("div",Pl,[e("div",{ref_key:"gutterFooter",ref:ee,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(n(!0),d(xe,null,we(b.value,P=>(n(),d("div",{key:P,class:"leading-6"},R(P),1))),128))],512),D(e("textarea",{ref_key:"codeFooter",ref:h,"onUpdate:modelValue":o[10]||(o[10]=P=>a.value.custom_footer_html=P),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:o[11]||(o[11]=P=>f("footer"))},null,544),[[Q,a.value.custom_footer_html]])])])])):G("",!0),x.value==="navigation"?(n(),d("div",Ul,[e("div",null,[e("div",Il,[o[53]||(o[53]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Menu Header"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:o[12]||(o[12]=P=>_e.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...o[52]||(o[52]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ce(" Thêm menu ",-1)])])]),e("div",Fl,[K.value.length===0?(n(),d("div",Ll,[...o[54]||(o[54]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có menu nào. Click "Thêm menu" để bắt đầu.',-1)])])):G("",!0),(n(!0),d(xe,null,we(K.value,(P,Ue)=>(n(),d("div",{key:Ue,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:Y=>ae(Ue),onDragover:o[14]||(o[14]=Ve(()=>{},["prevent"])),onDrop:Y=>re(Ue)},[e("div",zl,[e("div",Nl,[e("div",Vl,[o[55]||(o[55]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",Bl,[e("div",Hl,[D(e("input",{"onUpdate:modelValue":Y=>P.label=Y,onInput:pe,type:"text",class:"flex-1 px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu"},null,40,Ol),[[Q,P.label]])]),D(e("input",{"onUpdate:modelValue":Y=>P.url=Y,onInput:pe,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL (ví dụ: /khach-san)"},null,40,ql),[[Q,P.url]])])]),e("div",Wl,[e("button",{type:"button",onClick:Y=>me(Ue),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm menu con"},[...o[56]||(o[56]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,Yl),e("button",{type:"button",onClick:Y=>$e(Ue),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa"},[...o[57]||(o[57]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Kl)])]),P.children&&P.children.length>0?(n(),d("div",Xl,[(n(!0),d(xe,null,we(P.children,(Y,ce)=>(n(),d("div",{key:ce,class:"flex items-center gap-3 group",draggable:"true",onDragstart:ge=>ie(Ue,ce),onDragover:o[13]||(o[13]=Ve(()=>{},["prevent"])),onDrop:ge=>te(Ue,ce)},[o[59]||(o[59]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),o[60]||(o[60]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("div",Ql,[D(e("input",{"onUpdate:modelValue":ge=>Y.label=ge,onInput:pe,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu con"},null,40,Jl),[[Q,Y.label]]),D(e("input",{"onUpdate:modelValue":ge=>Y.url=ge,onInput:pe,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,Zl),[[Q,Y.url]])]),e("button",{type:"button",onClick:ge=>Me(Ue,ce),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...o[58]||(o[58]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,en)],40,Gl))),128))])):G("",!0)])],40,Dl))),128))])]),e("div",null,[e("div",tn,[o[62]||(o[62]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Footer"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:o[15]||(o[15]=P=>A.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...o[61]||(o[61]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ce(" Thêm cột ",-1)])])]),e("div",sn,[fe.value.length===0?(n(),d("div",an,[...o[63]||(o[63]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có cột footer nào. Click "Thêm cột" để bắt đầu.',-1)])])):G("",!0),(n(!0),d(xe,null,we(fe.value,(P,Ue)=>(n(),d("div",{key:Ue,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:Y=>ot(Ue),onDragover:o[17]||(o[17]=Ve(()=>{},["prevent"])),onDrop:Y=>Be(Ue)},[e("div",ln,[e("div",nn,[e("div",rn,[o[64]||(o[64]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",dn,[D(e("input",{"onUpdate:modelValue":Y=>P.title=Y,onInput:Ze,type:"text",class:"w-full px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:`Tiêu đề cột ${Ue+1}`},null,40,un),[[Q,P.title]])])]),e("div",cn,[e("button",{type:"button",onClick:Y=>se(Ue),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm liên kết"},[...o[65]||(o[65]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,pn),e("button",{type:"button",onClick:Y=>De(Ue),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa cột"},[...o[66]||(o[66]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,mn)])]),P.links&&P.links.length>0?(n(),d("div",gn,[(n(!0),d(xe,null,we(P.links,(Y,ce)=>(n(),d("div",{key:ce,class:"flex items-center gap-3 group",draggable:"true",onDragstart:ge=>ft(Ue,ce),onDragover:o[16]||(o[16]=Ve(()=>{},["prevent"])),onDrop:ge=>rt(Ue,ce)},[o[68]||(o[68]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),o[69]||(o[69]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),e("div",fn,[D(e("input",{"onUpdate:modelValue":ge=>Y.label=ge,onInput:Ze,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên liên kết"},null,40,bn),[[Q,Y.label]]),D(e("input",{"onUpdate:modelValue":ge=>Y.url=ge,onInput:Ze,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,yn),[[Q,Y.url]])]),e("button",{type:"button",onClick:ge=>Le(Ue,ce),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...o[67]||(o[67]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,hn)],40,vn))),128))])):(n(),d("div",xn,[...o[70]||(o[70]=[e("p",{class:"text-xs text-gray-400 italic"},"Chưa có liên kết",-1)])]))])],40,on))),128))])])])):G("",!0),e("div",wn,[e("button",{type:"button",onClick:E,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Reset"),e("button",{type:"button",onClick:S,disabled:v.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2"},[v.value?(n(),d("span",kn)):(n(),d("span",$n,"Save"))],8,_n)])]))])]),_e.value?(n(),d("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:o[23]||(o[23]=P=>_e.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:o[22]||(o[22]=Ve(()=>{},["stop"]))},[o[75]||(o[75]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu mới")],-1)),e("div",Sn,[e("div",null,[o[72]||(o[72]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),D(e("select",{"onUpdate:modelValue":o[18]||(o[18]=P=>Ee.value=P),class:"w-full rounded-md border-gray-300 text-sm"},[o[71]||(o[71]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(n(!0),d(xe,null,we(J.value,P=>(n(),d("option",{key:P.id,value:P.id},R(P.name),9,Cn))),128))],512),[[Xe,Ee.value]])]),e("div",Tn,[o[73]||(o[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu",-1)),D(e("input",{"onUpdate:modelValue":o[19]||(o[19]=P=>Pe.value=P),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn"},null,512),[[Q,Pe.value]])]),e("div",null,[o[74]||(o[74]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),D(e("input",{"onUpdate:modelValue":o[20]||(o[20]=P=>ze.value=P),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san"},null,512),[[Q,ze.value]])])]),e("div",En,[e("button",{type:"button",onClick:o[21]||(o[21]=P=>_e.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:q,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):G("",!0),Te.value?(n(),d("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:o[29]||(o[29]=P=>Te.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:o[28]||(o[28]=Ve(()=>{},["stop"]))},[e("div",An,[o[77]||(o[77]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu con",-1)),e("p",Rn,[o[76]||(o[76]=Ce("Thêm vào: ",-1)),e("strong",null,R((he=K.value[be.value])==null?void 0:he.label),1)])]),e("div",jn,[e("div",null,[o[79]||(o[79]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),D(e("select",{"onUpdate:modelValue":o[24]||(o[24]=P=>Fe.value=P),class:"w-full rounded-md border-gray-300 text-sm"},[o[78]||(o[78]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(n(!0),d(xe,null,we(J.value,P=>(n(),d("option",{key:P.id,value:P.id},R(P.name),9,Mn))),128))],512),[[Xe,Fe.value]])]),e("div",Pn,[o[80]||(o[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu con",-1)),D(e("input",{"onUpdate:modelValue":o[25]||(o[25]=P=>We.value=P),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn 5 sao"},null,512),[[Q,We.value]])]),e("div",null,[o[81]||(o[81]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),D(e("input",{"onUpdate:modelValue":o[26]||(o[26]=P=>de.value=P),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san-5-sao"},null,512),[[Q,de.value]])])]),e("div",Un,[e("button",{type:"button",onClick:o[27]||(o[27]=P=>Te.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:ke,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):G("",!0),A.value?(n(),d("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:o[33]||(o[33]=P=>A.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:o[32]||(o[32]=Ve(()=>{},["stop"]))},[o[83]||(o[83]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm cột footer mới")],-1)),e("div",In,[e("div",null,[o[82]||(o[82]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tiêu đề cột",-1)),D(e("input",{"onUpdate:modelValue":o[30]||(o[30]=P=>L.value=P),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Thông tin"},null,512),[[Q,L.value]])])]),e("div",Fn,[e("button",{type:"button",onClick:o[31]||(o[31]=P=>A.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:Ne,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):G("",!0),M.value?(n(),d("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:o[39]||(o[39]=P=>M.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:o[38]||(o[38]=Ve(()=>{},["stop"]))},[e("div",Ln,[o[85]||(o[85]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm liên kết footer",-1)),e("p",Dn,[o[84]||(o[84]=Ce("Thêm vào: ",-1)),e("strong",null,R(((Ae=fe.value[l.value])==null?void 0:Ae.title)||`Cột ${l.value+1}`),1)])]),e("div",zn,[e("div",null,[o[87]||(o[87]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),D(e("select",{"onUpdate:modelValue":o[34]||(o[34]=P=>W.value=P),class:"w-full rounded-md border-gray-300 text-sm"},[o[86]||(o[86]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(n(!0),d(xe,null,we(J.value,P=>(n(),d("option",{key:P.id,value:P.id},R(P.name),9,Nn))),128))],512),[[Xe,W.value]])]),e("div",Vn,[o[88]||(o[88]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên liên kết",-1)),D(e("input",{"onUpdate:modelValue":o[35]||(o[35]=P=>y.value=P),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Giới thiệu"},null,512),[[Q,y.value]])]),e("div",null,[o[89]||(o[89]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),D(e("input",{"onUpdate:modelValue":o[36]||(o[36]=P=>X.value=P),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /gioi-thieu"},null,512),[[Q,X.value]])])]),e("div",Bn,[e("button",{type:"button",onClick:o[37]||(o[37]=P=>M.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:Re,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):G("",!0)])}}};function vs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fs={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ot=Symbol.for("react.transitional.element"),On=Symbol.for("react.portal"),qn=Symbol.for("react.fragment"),Wn=Symbol.for("react.strict_mode"),Yn=Symbol.for("react.profiler"),Kn=Symbol.for("react.consumer"),Xn=Symbol.for("react.context"),Gn=Symbol.for("react.forward_ref"),Qn=Symbol.for("react.suspense"),Jn=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),Zn=Symbol.for("react.activity"),Gt=Symbol.iterator;function er(t){return t===null||typeof t!="object"?null:(t=Gt&&t[Gt]||t["@@iterator"],typeof t=="function"?t:null)}var ys={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hs=Object.assign,xs={};function _t(t,s,r){this.props=t,this.context=s,this.refs=xs,this.updater=r||ys}_t.prototype.isReactComponent={};_t.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};_t.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ws(){}ws.prototype=_t.prototype;function qt(t,s,r){this.props=t,this.context=s,this.refs=xs,this.updater=r||ys}var Wt=qt.prototype=new ws;Wt.constructor=qt;hs(Wt,_t.prototype);Wt.isPureReactComponent=!0;var Qt=Array.isArray;function Vt(){}var je={H:null,A:null,T:null,S:null},_s=Object.prototype.hasOwnProperty;function Yt(t,s,r){var u=r.ref;return{$$typeof:Ot,type:t,key:s,ref:u!==void 0?u:null,props:r}}function tr(t,s){return Yt(t.type,s,t.props)}function Kt(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ot}function sr(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Jt=/\/+/g;function Dt(t,s){return typeof t=="object"&&t!==null&&t.key!=null?sr(""+t.key):s.toString(36)}function ar(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Vt,Vt):(t.status="pending",t.then(function(s){t.status==="pending"&&(t.status="fulfilled",t.value=s)},function(s){t.status==="pending"&&(t.status="rejected",t.reason=s)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function bt(t,s,r,u,c){var v=typeof t;(v==="undefined"||v==="boolean")&&(t=null);var p=!1;if(t===null)p=!0;else switch(v){case"bigint":case"string":case"number":p=!0;break;case"object":switch(t.$$typeof){case Ot:case On:p=!0;break;case bs:return p=t._init,bt(p(t._payload),s,r,u,c)}}if(p)return c=c(t),p=u===""?"."+Dt(t,0):u,Qt(c)?(r="",p!=null&&(r=p.replace(Jt,"$&/")+"/"),bt(c,s,r,"",function(a){return a})):c!=null&&(Kt(c)&&(c=tr(c,r+(c.key==null||t&&t.key===c.key?"":(""+c.key).replace(Jt,"$&/")+"/")+p)),s.push(c)),1;p=0;var w=u===""?".":u+":";if(Qt(t))for(var x=0;x<t.length;x++)u=t[x],v=w+Dt(u,x),p+=bt(u,s,r,v,c);else if(x=er(t),typeof x=="function")for(t=x.call(t),x=0;!(u=t.next()).done;)u=u.value,v=w+Dt(u,x++),p+=bt(u,s,r,v,c);else if(v==="object"){if(typeof t.then=="function")return bt(ar(t),s,r,u,c);throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.")}return p}function At(t,s,r){if(t==null)return t;var u=[],c=0;return bt(t,u,"","",function(v){return s.call(r,v,c++)}),u}function or(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Zt=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},lr={map:At,forEach:function(t,s,r){At(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return At(t,function(){s++}),s},toArray:function(t){return At(t,function(s){return s})||[]},only:function(t){if(!Kt(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Activity=Zn;ve.Children=lr;ve.Component=_t;ve.Fragment=qn;ve.Profiler=Yn;ve.PureComponent=qt;ve.StrictMode=Wn;ve.Suspense=Qn;ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=je;ve.__COMPILER_RUNTIME={__proto__:null,c:function(t){return je.H.useMemoCache(t)}};ve.cache=function(t){return function(){return t.apply(null,arguments)}};ve.cacheSignal=function(){return null};ve.cloneElement=function(t,s,r){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var u=hs({},t.props),c=t.key;if(s!=null)for(v in s.key!==void 0&&(c=""+s.key),s)!_s.call(s,v)||v==="key"||v==="__self"||v==="__source"||v==="ref"&&s.ref===void 0||(u[v]=s[v]);var v=arguments.length-2;if(v===1)u.children=r;else if(1<v){for(var p=Array(v),w=0;w<v;w++)p[w]=arguments[w+2];u.children=p}return Yt(t.type,c,u)};ve.createContext=function(t){return t={$$typeof:Xn,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:Kn,_context:t},t};ve.createElement=function(t,s,r){var u,c={},v=null;if(s!=null)for(u in s.key!==void 0&&(v=""+s.key),s)_s.call(s,u)&&u!=="key"&&u!=="__self"&&u!=="__source"&&(c[u]=s[u]);var p=arguments.length-2;if(p===1)c.children=r;else if(1<p){for(var w=Array(p),x=0;x<p;x++)w[x]=arguments[x+2];c.children=w}if(t&&t.defaultProps)for(u in p=t.defaultProps,p)c[u]===void 0&&(c[u]=p[u]);return Yt(t,v,c)};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:Gn,render:t}};ve.isValidElement=Kt;ve.lazy=function(t){return{$$typeof:bs,_payload:{_status:-1,_result:t},_init:or}};ve.memo=function(t,s){return{$$typeof:Jn,type:t,compare:s===void 0?null:s}};ve.startTransition=function(t){var s=je.T,r={};je.T=r;try{var u=t(),c=je.S;c!==null&&c(r,u),typeof u=="object"&&u!==null&&typeof u.then=="function"&&u.then(Vt,Zt)}catch(v){Zt(v)}finally{s!==null&&r.types!==null&&(s.types=r.types),je.T=s}};ve.unstable_useCacheRefresh=function(){return je.H.useCacheRefresh()};ve.use=function(t){return je.H.use(t)};ve.useActionState=function(t,s,r){return je.H.useActionState(t,s,r)};ve.useCallback=function(t,s){return je.H.useCallback(t,s)};ve.useContext=function(t){return je.H.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t,s){return je.H.useDeferredValue(t,s)};ve.useEffect=function(t,s){return je.H.useEffect(t,s)};ve.useEffectEvent=function(t){return je.H.useEffectEvent(t)};ve.useId=function(){return je.H.useId()};ve.useImperativeHandle=function(t,s,r){return je.H.useImperativeHandle(t,s,r)};ve.useInsertionEffect=function(t,s){return je.H.useInsertionEffect(t,s)};ve.useLayoutEffect=function(t,s){return je.H.useLayoutEffect(t,s)};ve.useMemo=function(t,s){return je.H.useMemo(t,s)};ve.useOptimistic=function(t,s){return je.H.useOptimistic(t,s)};ve.useReducer=function(t,s,r){return je.H.useReducer(t,s,r)};ve.useRef=function(t){return je.H.useRef(t)};ve.useState=function(t){return je.H.useState(t)};ve.useSyncExternalStore=function(t,s,r){return je.H.useSyncExternalStore(t,s,r)};ve.useTransition=function(){return je.H.useTransition()};ve.version="19.2.0";fs.exports=ve;var ht=fs.exports;const H=vs(ht);var ks={exports:{}},Qe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nr=ht;function $s(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ct(){}var Ge={d:{f:ct,r:function(){throw Error($s(522))},D:ct,C:ct,L:ct,m:ct,X:ct,S:ct,M:ct},p:0,findDOMNode:null},rr=Symbol.for("react.portal");function ir(t,s,r){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rr,key:u==null?null:""+u,children:t,containerInfo:s,implementation:r}}var $t=nr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ut(t,s){if(t==="font")return"";if(typeof s=="string")return s==="use-credentials"?s:""}Qe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ge;Qe.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)throw Error($s(299));return ir(t,s,null,r)};Qe.flushSync=function(t){var s=$t.T,r=Ge.p;try{if($t.T=null,Ge.p=2,t)return t()}finally{$t.T=s,Ge.p=r,Ge.d.f()}};Qe.preconnect=function(t,s){typeof t=="string"&&(s?(s=s.crossOrigin,s=typeof s=="string"?s==="use-credentials"?s:"":void 0):s=null,Ge.d.C(t,s))};Qe.prefetchDNS=function(t){typeof t=="string"&&Ge.d.D(t)};Qe.preinit=function(t,s){if(typeof t=="string"&&s&&typeof s.as=="string"){var r=s.as,u=Ut(r,s.crossOrigin),c=typeof s.integrity=="string"?s.integrity:void 0,v=typeof s.fetchPriority=="string"?s.fetchPriority:void 0;r==="style"?Ge.d.S(t,typeof s.precedence=="string"?s.precedence:void 0,{crossOrigin:u,integrity:c,fetchPriority:v}):r==="script"&&Ge.d.X(t,{crossOrigin:u,integrity:c,fetchPriority:v,nonce:typeof s.nonce=="string"?s.nonce:void 0})}};Qe.preinitModule=function(t,s){if(typeof t=="string")if(typeof s=="object"&&s!==null){if(s.as==null||s.as==="script"){var r=Ut(s.as,s.crossOrigin);Ge.d.M(t,{crossOrigin:r,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0})}}else s==null&&Ge.d.M(t)};Qe.preload=function(t,s){if(typeof t=="string"&&typeof s=="object"&&s!==null&&typeof s.as=="string"){var r=s.as,u=Ut(r,s.crossOrigin);Ge.d.L(t,r,{crossOrigin:u,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0,type:typeof s.type=="string"?s.type:void 0,fetchPriority:typeof s.fetchPriority=="string"?s.fetchPriority:void 0,referrerPolicy:typeof s.referrerPolicy=="string"?s.referrerPolicy:void 0,imageSrcSet:typeof s.imageSrcSet=="string"?s.imageSrcSet:void 0,imageSizes:typeof s.imageSizes=="string"?s.imageSizes:void 0,media:typeof s.media=="string"?s.media:void 0})}};Qe.preloadModule=function(t,s){if(typeof t=="string")if(s){var r=Ut(s.as,s.crossOrigin);Ge.d.m(t,{as:typeof s.as=="string"&&s.as!=="script"?s.as:void 0,crossOrigin:r,integrity:typeof s.integrity=="string"?s.integrity:void 0})}else Ge.d.m(t)};Qe.requestFormReset=function(t){Ge.d.r(t)};Qe.unstable_batchedUpdates=function(t,s){return t(s)};Qe.useFormState=function(t,s,r){return $t.H.useFormState(t,s,r)};Qe.useFormStatus=function(){return $t.H.useHostTransitionStatus()};Qe.version="19.2.0";function Ss(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ss)}catch(t){console.error(t)}}Ss(),ks.exports=Qe;var dr=ks.exports;const ur=vs(dr);var cr=t=>{switch(t){case"success":return gr;case"info":return fr;case"warning":return vr;case"error":return br;default:return null}},pr=Array(12).fill(0),mr=({visible:t,className:s})=>H.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},H.createElement("div",{className:"sonner-spinner"},pr.map((r,u)=>H.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${u}`})))),gr=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),vr=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),fr=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),br=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),yr=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},H.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),H.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),hr=()=>{let[t,s]=H.useState(document.hidden);return H.useEffect(()=>{let r=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},Bt=1,xr=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;let{message:r,...u}=t,c=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:Bt++,v=this.toasts.find(w=>w.id===c),p=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),v?this.toasts=this.toasts.map(w=>w.id===c?(this.publish({...w,...t,id:c,title:r}),{...w,...t,id:c,dismissible:p,title:r}):w):this.addToast({title:r,...u,dismissible:p,id:c}),c},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(s=>{this.subscribers.forEach(r=>r({id:s.id,dismiss:!0}))}),this.subscribers.forEach(s=>s({id:t,dismiss:!0})),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let r;s.loading!==void 0&&(r=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));let u=t instanceof Promise?t:t(),c=r!==void 0,v,p=u.then(async x=>{if(v=["resolve",x],H.isValidElement(x))c=!1,this.create({id:r,type:"default",message:x});else if(_r(x)&&!x.ok){c=!1;let a=typeof s.error=="function"?await s.error(`HTTP error! status: ${x.status}`):s.error,$=typeof s.description=="function"?await s.description(`HTTP error! status: ${x.status}`):s.description;this.create({id:r,type:"error",message:a,description:$})}else if(s.success!==void 0){c=!1;let a=typeof s.success=="function"?await s.success(x):s.success,$=typeof s.description=="function"?await s.description(x):s.description;this.create({id:r,type:"success",message:a,description:$})}}).catch(async x=>{if(v=["reject",x],s.error!==void 0){c=!1;let a=typeof s.error=="function"?await s.error(x):s.error,$=typeof s.description=="function"?await s.description(x):s.description;this.create({id:r,type:"error",message:a,description:$})}}).finally(()=>{var x;c&&(this.dismiss(r),r=void 0),(x=s.finally)==null||x.call(s)}),w=()=>new Promise((x,a)=>p.then(()=>v[0]==="reject"?a(v[1]):x(v[1])).catch(a));return typeof r!="string"&&typeof r!="number"?{unwrap:w}:Object.assign(r,{unwrap:w})},this.custom=(t,s)=>{let r=(s==null?void 0:s.id)||Bt++;return this.create({jsx:t(r),id:r,...s}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Je=new xr,wr=(t,s)=>{let r=(s==null?void 0:s.id)||Bt++;return Je.addToast({title:t,...s,id:r}),r},_r=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",kr=wr,$r=()=>Je.toasts,Sr=()=>Je.getActiveToasts(),yt=Object.assign(kr,{success:Je.success,info:Je.info,warning:Je.warning,error:Je.error,custom:Je.custom,message:Je.message,promise:Je.promise,dismiss:Je.dismiss,loading:Je.loading},{getHistory:$r,getToasts:Sr});function Cr(t,{insertAt:s}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],u=document.createElement("style");u.type="text/css",s==="top"&&r.firstChild?r.insertBefore(u,r.firstChild):r.appendChild(u),u.styleSheet?u.styleSheet.cssText=t:u.appendChild(document.createTextNode(t))}Cr(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Rt(t){return t.label!==void 0}var Tr=3,Er="32px",Ar="16px",es=4e3,Rr=356,jr=14,Mr=20,Pr=200;function at(...t){return t.filter(Boolean).join(" ")}function Ur(t){let[s,r]=t.split("-"),u=[];return s&&u.push(s),r&&u.push(r),u}var Ir=t=>{var s,r,u,c,v,p,w,x,a,$,I;let{invert:ee,toast:i,unstyled:O,interacting:h,setHeights:N,visibleToasts:_,heights:b,index:f,toasts:U,expanded:T,removeToast:S,defaultRichColors:E,closeButton:le,style:J,cancelButtonStyle:K,actionButtonStyle:_e,className:Te="",descriptionClassName:be="",duration:Ee,position:Pe,gap:ze,loadingIcon:Fe,expandByDefault:We,classNames:de,icons:ne,closeButtonAriaLabel:C="Close toast",pauseWhenPageIsHidden:Z}=t,[j,q]=H.useState(null),[me,ke]=H.useState(null),[pe,$e]=H.useState(!1),[Me,F]=H.useState(!1),[m,ae]=H.useState(!1),[re,ie]=H.useState(!1),[te,fe]=H.useState(!1),[A,M]=H.useState(0),[l,L]=H.useState(0),W=H.useRef(i.duration||Ee||es),y=H.useRef(null),X=H.useRef(null),oe=f===0,Ne=f+1<=_,se=i.type,Re=i.dismissible!==!1,De=i.className||"",Ze=i.descriptionClassName||"",Le=H.useMemo(()=>b.findIndex(Y=>Y.toastId===i.id)||0,[b,i.id]),Oe=H.useMemo(()=>{var Y;return(Y=i.closeButton)!=null?Y:le},[i.closeButton,le]),ot=H.useMemo(()=>i.duration||Ee||es,[i.duration,Ee]),Be=H.useRef(0),Ye=H.useRef(0),ft=H.useRef(0),rt=H.useRef(null),[It,V]=Pe.split("-"),o=H.useMemo(()=>b.reduce((Y,ce,ge)=>ge>=Le?Y:Y+ce.height,0),[b,Le]),ye=hr(),he=i.invert||ee,Ae=se==="loading";Ye.current=H.useMemo(()=>Le*ze+o,[Le,o]),H.useEffect(()=>{W.current=ot},[ot]),H.useEffect(()=>{$e(!0)},[]),H.useEffect(()=>{let Y=X.current;if(Y){let ce=Y.getBoundingClientRect().height;return L(ce),N(ge=>[{toastId:i.id,height:ce,position:i.position},...ge]),()=>N(ge=>ge.filter(Ke=>Ke.toastId!==i.id))}},[N,i.id]),H.useLayoutEffect(()=>{if(!pe)return;let Y=X.current,ce=Y.style.height;Y.style.height="auto";let ge=Y.getBoundingClientRect().height;Y.style.height=ce,L(ge),N(Ke=>Ke.find(tt=>tt.toastId===i.id)?Ke.map(tt=>tt.toastId===i.id?{...tt,height:ge}:tt):[{toastId:i.id,height:ge,position:i.position},...Ke])},[pe,i.title,i.description,N,i.id]);let P=H.useCallback(()=>{F(!0),M(Ye.current),N(Y=>Y.filter(ce=>ce.toastId!==i.id)),setTimeout(()=>{S(i)},Pr)},[i,S,N,Ye]);H.useEffect(()=>{if(i.promise&&se==="loading"||i.duration===1/0||i.type==="loading")return;let Y;return T||h||Z&&ye?(()=>{if(ft.current<Be.current){let ce=new Date().getTime()-Be.current;W.current=W.current-ce}ft.current=new Date().getTime()})():W.current!==1/0&&(Be.current=new Date().getTime(),Y=setTimeout(()=>{var ce;(ce=i.onAutoClose)==null||ce.call(i,i),P()},W.current)),()=>clearTimeout(Y)},[T,h,i,se,Z,ye,P]),H.useEffect(()=>{i.delete&&P()},[P,i.delete]);function Ue(){var Y,ce,ge;return ne!=null&&ne.loading?H.createElement("div",{className:at(de==null?void 0:de.loader,(Y=i==null?void 0:i.classNames)==null?void 0:Y.loader,"sonner-loader"),"data-visible":se==="loading"},ne.loading):Fe?H.createElement("div",{className:at(de==null?void 0:de.loader,(ce=i==null?void 0:i.classNames)==null?void 0:ce.loader,"sonner-loader"),"data-visible":se==="loading"},Fe):H.createElement(mr,{className:at(de==null?void 0:de.loader,(ge=i==null?void 0:i.classNames)==null?void 0:ge.loader),visible:se==="loading"})}return H.createElement("li",{tabIndex:0,ref:X,className:at(Te,De,de==null?void 0:de.toast,(s=i==null?void 0:i.classNames)==null?void 0:s.toast,de==null?void 0:de.default,de==null?void 0:de[se],(r=i==null?void 0:i.classNames)==null?void 0:r[se]),"data-sonner-toast":"","data-rich-colors":(u=i.richColors)!=null?u:E,"data-styled":!(i.jsx||i.unstyled||O),"data-mounted":pe,"data-promise":!!i.promise,"data-swiped":te,"data-removed":Me,"data-visible":Ne,"data-y-position":It,"data-x-position":V,"data-index":f,"data-front":oe,"data-swiping":m,"data-dismissible":Re,"data-type":se,"data-invert":he,"data-swipe-out":re,"data-swipe-direction":me,"data-expanded":!!(T||We&&pe),style:{"--index":f,"--toasts-before":f,"--z-index":U.length-f,"--offset":`${Me?A:Ye.current}px`,"--initial-height":We?"auto":`${l}px`,...J,...i.style},onDragEnd:()=>{ae(!1),q(null),rt.current=null},onPointerDown:Y=>{Ae||!Re||(y.current=new Date,M(Ye.current),Y.target.setPointerCapture(Y.pointerId),Y.target.tagName!=="BUTTON"&&(ae(!0),rt.current={x:Y.clientX,y:Y.clientY}))},onPointerUp:()=>{var Y,ce,ge,Ke;if(re||!Re)return;rt.current=null;let tt=Number(((Y=X.current)==null?void 0:Y.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),dt=Number(((ce=X.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),mt=new Date().getTime()-((ge=y.current)==null?void 0:ge.getTime()),st=j==="x"?tt:dt,ut=Math.abs(st)/mt;if(Math.abs(st)>=Mr||ut>.11){M(Ye.current),(Ke=i.onDismiss)==null||Ke.call(i,i),ke(j==="x"?tt>0?"right":"left":dt>0?"down":"up"),P(),ie(!0),fe(!1);return}ae(!1),q(null)},onPointerMove:Y=>{var ce,ge,Ke,tt;if(!rt.current||!Re||((ce=window.getSelection())==null?void 0:ce.toString().length)>0)return;let dt=Y.clientY-rt.current.y,mt=Y.clientX-rt.current.x,st=(ge=t.swipeDirections)!=null?ge:Ur(Pe);!j&&(Math.abs(mt)>1||Math.abs(dt)>1)&&q(Math.abs(mt)>Math.abs(dt)?"x":"y");let ut={x:0,y:0};j==="y"?(st.includes("top")||st.includes("bottom"))&&(st.includes("top")&&dt<0||st.includes("bottom")&&dt>0)&&(ut.y=dt):j==="x"&&(st.includes("left")||st.includes("right"))&&(st.includes("left")&&mt<0||st.includes("right")&&mt>0)&&(ut.x=mt),(Math.abs(ut.x)>0||Math.abs(ut.y)>0)&&fe(!0),(Ke=X.current)==null||Ke.style.setProperty("--swipe-amount-x",`${ut.x}px`),(tt=X.current)==null||tt.style.setProperty("--swipe-amount-y",`${ut.y}px`)}},Oe&&!i.jsx?H.createElement("button",{"aria-label":C,"data-disabled":Ae,"data-close-button":!0,onClick:Ae||!Re?()=>{}:()=>{var Y;P(),(Y=i.onDismiss)==null||Y.call(i,i)},className:at(de==null?void 0:de.closeButton,(c=i==null?void 0:i.classNames)==null?void 0:c.closeButton)},(v=ne==null?void 0:ne.close)!=null?v:yr):null,i.jsx||ht.isValidElement(i.title)?i.jsx?i.jsx:typeof i.title=="function"?i.title():i.title:H.createElement(H.Fragment,null,se||i.icon||i.promise?H.createElement("div",{"data-icon":"",className:at(de==null?void 0:de.icon,(p=i==null?void 0:i.classNames)==null?void 0:p.icon)},i.promise||i.type==="loading"&&!i.icon?i.icon||Ue():null,i.type!=="loading"?i.icon||(ne==null?void 0:ne[se])||cr(se):null):null,H.createElement("div",{"data-content":"",className:at(de==null?void 0:de.content,(w=i==null?void 0:i.classNames)==null?void 0:w.content)},H.createElement("div",{"data-title":"",className:at(de==null?void 0:de.title,(x=i==null?void 0:i.classNames)==null?void 0:x.title)},typeof i.title=="function"?i.title():i.title),i.description?H.createElement("div",{"data-description":"",className:at(be,Ze,de==null?void 0:de.description,(a=i==null?void 0:i.classNames)==null?void 0:a.description)},typeof i.description=="function"?i.description():i.description):null),ht.isValidElement(i.cancel)?i.cancel:i.cancel&&Rt(i.cancel)?H.createElement("button",{"data-button":!0,"data-cancel":!0,style:i.cancelButtonStyle||K,onClick:Y=>{var ce,ge;Rt(i.cancel)&&Re&&((ge=(ce=i.cancel).onClick)==null||ge.call(ce,Y),P())},className:at(de==null?void 0:de.cancelButton,($=i==null?void 0:i.classNames)==null?void 0:$.cancelButton)},i.cancel.label):null,ht.isValidElement(i.action)?i.action:i.action&&Rt(i.action)?H.createElement("button",{"data-button":!0,"data-action":!0,style:i.actionButtonStyle||_e,onClick:Y=>{var ce,ge;Rt(i.action)&&((ge=(ce=i.action).onClick)==null||ge.call(ce,Y),!Y.defaultPrevented&&P())},className:at(de==null?void 0:de.actionButton,(I=i==null?void 0:i.classNames)==null?void 0:I.actionButton)},i.action.label):null))};function ts(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Fr(t,s){let r={};return[t,s].forEach((u,c)=>{let v=c===1,p=v?"--mobile-offset":"--offset",w=v?Ar:Er;function x(a){["top","right","bottom","left"].forEach($=>{r[`${p}-${$}`]=typeof a=="number"?`${a}px`:a})}typeof u=="number"||typeof u=="string"?x(u):typeof u=="object"?["top","right","bottom","left"].forEach(a=>{u[a]===void 0?r[`${p}-${a}`]=w:r[`${p}-${a}`]=typeof u[a]=="number"?`${u[a]}px`:u[a]}):x(w)}),r}ht.forwardRef(function(t,s){let{invert:r,position:u="bottom-right",hotkey:c=["altKey","KeyT"],expand:v,closeButton:p,className:w,offset:x,mobileOffset:a,theme:$="light",richColors:I,duration:ee,style:i,visibleToasts:O=Tr,toastOptions:h,dir:N=ts(),gap:_=jr,loadingIcon:b,icons:f,containerAriaLabel:U="Notifications",pauseWhenPageIsHidden:T}=t,[S,E]=H.useState([]),le=H.useMemo(()=>Array.from(new Set([u].concat(S.filter(Z=>Z.position).map(Z=>Z.position)))),[S,u]),[J,K]=H.useState([]),[_e,Te]=H.useState(!1),[be,Ee]=H.useState(!1),[Pe,ze]=H.useState($!=="system"?$:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Fe=H.useRef(null),We=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),de=H.useRef(null),ne=H.useRef(!1),C=H.useCallback(Z=>{E(j=>{var q;return(q=j.find(me=>me.id===Z.id))!=null&&q.delete||Je.dismiss(Z.id),j.filter(({id:me})=>me!==Z.id)})},[]);return H.useEffect(()=>Je.subscribe(Z=>{if(Z.dismiss){E(j=>j.map(q=>q.id===Z.id?{...q,delete:!0}:q));return}setTimeout(()=>{ur.flushSync(()=>{E(j=>{let q=j.findIndex(me=>me.id===Z.id);return q!==-1?[...j.slice(0,q),{...j[q],...Z},...j.slice(q+1)]:[Z,...j]})})})}),[]),H.useEffect(()=>{if($!=="system"){ze($);return}if($==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ze("dark"):ze("light")),typeof window>"u")return;let Z=window.matchMedia("(prefers-color-scheme: dark)");try{Z.addEventListener("change",({matches:j})=>{ze(j?"dark":"light")})}catch{Z.addListener(({matches:q})=>{try{ze(q?"dark":"light")}catch(me){console.error(me)}})}},[$]),H.useEffect(()=>{S.length<=1&&Te(!1)},[S]),H.useEffect(()=>{let Z=j=>{var q,me;c.every(ke=>j[ke]||j.code===ke)&&(Te(!0),(q=Fe.current)==null||q.focus()),j.code==="Escape"&&(document.activeElement===Fe.current||(me=Fe.current)!=null&&me.contains(document.activeElement))&&Te(!1)};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[c]),H.useEffect(()=>{if(Fe.current)return()=>{de.current&&(de.current.focus({preventScroll:!0}),de.current=null,ne.current=!1)}},[Fe.current]),H.createElement("section",{ref:s,"aria-label":`${U} ${We}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},le.map((Z,j)=>{var q;let[me,ke]=Z.split("-");return S.length?H.createElement("ol",{key:Z,dir:N==="auto"?ts():N,tabIndex:-1,ref:Fe,className:w,"data-sonner-toaster":!0,"data-theme":Pe,"data-y-position":me,"data-lifted":_e&&S.length>1&&!v,"data-x-position":ke,style:{"--front-toast-height":`${((q=J[0])==null?void 0:q.height)||0}px`,"--width":`${Rr}px`,"--gap":`${_}px`,...i,...Fr(x,a)},onBlur:pe=>{ne.current&&!pe.currentTarget.contains(pe.relatedTarget)&&(ne.current=!1,de.current&&(de.current.focus({preventScroll:!0}),de.current=null))},onFocus:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,de.current=pe.relatedTarget)},onMouseEnter:()=>Te(!0),onMouseMove:()=>Te(!0),onMouseLeave:()=>{be||Te(!1)},onDragEnd:()=>Te(!1),onPointerDown:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||Ee(!0)},onPointerUp:()=>Ee(!1)},S.filter(pe=>!pe.position&&j===0||pe.position===Z).map((pe,$e)=>{var Me,F;return H.createElement(Ir,{key:pe.id,icons:f,index:$e,toast:pe,defaultRichColors:I,duration:(Me=h==null?void 0:h.duration)!=null?Me:ee,className:h==null?void 0:h.className,descriptionClassName:h==null?void 0:h.descriptionClassName,invert:r,visibleToasts:O,closeButton:(F=h==null?void 0:h.closeButton)!=null?F:p,interacting:be,position:Z,style:h==null?void 0:h.style,unstyled:h==null?void 0:h.unstyled,classNames:h==null?void 0:h.classNames,cancelButtonStyle:h==null?void 0:h.cancelButtonStyle,actionButtonStyle:h==null?void 0:h.actionButtonStyle,removeToast:C,toasts:S.filter(m=>m.position==pe.position),heights:J.filter(m=>m.position==pe.position),setHeights:K,expandByDefault:v,gap:_,loadingIcon:b,expanded:_e,pauseWhenPageIsHidden:T,swipeDirections:t.swipeDirections})})):null}))});const Lr={class:"min-h-screen bg-gray-100"},Dr={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},zr={class:"px-4 py-6 sm:px-0"},Nr={class:"bg-white shadow rounded-lg p-6 mb-6"},Vr={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Br={class:"flex flex-col items-center gap-2"},Hr={class:"inline-flex items-center gap-2 text-blue-600"},Or={class:"text-2xl font-bold"},qr={class:"flex flex-col items-center gap-2"},Wr={class:"inline-flex items-center gap-2 text-green-600"},Yr={class:"text-2xl font-bold"},Kr={class:"flex flex-col items-center gap-2"},Xr={class:"inline-flex items-center gap-2 text-red-600"},Gr={class:"text-2xl font-bold"},Qr={class:"flex flex-col items-center gap-2"},Jr={class:"inline-flex items-center gap-2 text-purple-600"},Zr={class:"text-2xl font-bold"},ei={class:"bg-white shadow rounded-lg p-6"},ti={class:"flex justify-between items-center mb-4"},si={class:"space-y-4"},ai={class:"flex justify-between items-start mb-2"},oi={class:"font-medium text-gray-900"},li={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},ni={class:"font-medium"},ri={class:"font-medium"},ii={class:"font-medium"},di={class:"font-medium"},ui={key:0,class:"mt-4"},ci={class:"grid grid-cols-7 gap-1 text-xs"},pi={class:"text-gray-500"},mi={class:"font-medium"},gi={__name:"Monitoring",setup(t){const s=g({total_websites:0,online_websites:0,offline_websites:0}),r=g([]),u=g("7days"),c=qe(()=>r.value.filter(x=>x.ssl_enabled).length),v=async()=>{try{const x=await z.get("/api/monitoring/uptime");s.value=x.data}catch{yt.error("Failed to fetch uptime statistics")}},p=async()=>{try{const $=(await z.get("/api/websites")).data.map(async I=>{try{const ee=await z.get(`/api/monitoring/stats/${I.id}?period=${u.value}`);return{...I,...ee.data.summary}}catch{return{...I,total_visits:0,total_unique_visitors:0,total_bandwidth:"0 B",average_response_time:0,uptime_percentage:0,daily_stats:[]}}});r.value=await Promise.all($)}catch{yt.error("Failed to fetch website statistics")}},w=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric"});return et(()=>{v(),p()}),(x,a)=>(n(),d("div",Lr,[e("div",Dr,[e("div",zr,[a[13]||(a[13]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-6"},"Monitoring",-1)),e("div",Nr,[a[5]||(a[5]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"System Overview",-1)),e("div",Vr,[e("div",Br,[e("div",Hr,[B(k(gt),{class:"size-5"}),e("span",Or,R(s.value.total_websites),1)]),a[1]||(a[1]=e("p",{class:"text-sm text-gray-500"},"Total Websites",-1))]),e("div",qr,[e("div",Wr,[B(k(Ct),{class:"size-5"}),e("span",Yr,R(s.value.online_websites),1)]),a[2]||(a[2]=e("p",{class:"text-sm text-gray-500"},"Online",-1))]),e("div",Kr,[e("div",Xr,[B(k(Tt),{class:"size-5"}),e("span",Gr,R(s.value.offline_websites),1)]),a[3]||(a[3]=e("p",{class:"text-sm text-gray-500"},"Offline",-1))]),e("div",Qr,[e("div",Jr,[B(k(xt),{class:"size-5"}),e("span",Zr,R(c.value),1)]),a[4]||(a[4]=e("p",{class:"text-sm text-gray-500"},"SSL Enabled",-1))])])]),e("div",ei,[e("div",ti,[a[7]||(a[7]=e("h2",{class:"text-lg font-medium text-gray-900"},"Website Statistics",-1)),D(e("select",{"onUpdate:modelValue":a[0]||(a[0]=$=>u.value=$),onChange:p,class:"border-gray-300 rounded-md shadow-sm"},[...a[6]||(a[6]=[e("option",{value:"24hours"},"Last 24 Hours",-1),e("option",{value:"7days"},"Last 7 Days",-1),e("option",{value:"30days"},"Last 30 Days",-1),e("option",{value:"90days"},"Last 90 Days",-1)])],544),[[Xe,u.value]])]),e("div",si,[(n(!0),d(xe,null,we(r.value,$=>(n(),d("div",{key:$.id,class:"border rounded-lg p-4"},[e("div",ai,[e("h3",oi,R($.domain),1),e("span",{class:Ie(["inline-flex items-center gap-1",$.current_is_online?"text-green-600":"text-red-600"])},[$.current_is_online?(n(),ue(k(Ct),{key:0,class:"size-4"})):(n(),ue(k(Tt),{key:1,class:"size-4"})),Ce(" "+R($.current_is_online?"Online":"Offline"),1)],2)]),e("div",li,[e("div",null,[a[8]||(a[8]=e("p",{class:"text-gray-500"},"Visits",-1)),e("p",ni,R($.total_visits),1)]),e("div",null,[a[9]||(a[9]=e("p",{class:"text-gray-500"},"Unique Visitors",-1)),e("p",ri,R($.total_unique_visitors),1)]),e("div",null,[a[10]||(a[10]=e("p",{class:"text-gray-500"},"Bandwidth",-1)),e("p",ii,R($.total_bandwidth),1)]),e("div",null,[a[11]||(a[11]=e("p",{class:"text-gray-500"},"Avg Response Time",-1)),e("p",di,R($.average_response_time)+"ms",1)])]),$.daily_stats&&$.daily_stats.length>0?(n(),d("div",ui,[a[12]||(a[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Daily Stats",-1)),e("div",ci,[(n(!0),d(xe,null,we($.daily_stats,I=>(n(),d("div",{key:I.date,class:"text-center"},[e("div",pi,R(w(I.date)),1),e("div",mi,R(I.visits),1)]))),128))])])):G("",!0)]))),128))])])])])]))}},vi={class:"p-8 max-w-7xl mx-auto"},fi={class:"flex flex-wrap gap-2 mb-4"},bi={class:"flex flex-wrap justify-between items-start gap-4 mb-6"},yi={class:"flex justify-between items-center gap-4 p-4 bg-white rounded-lg border border-slate-200 mb-6"},hi={class:"flex gap-2 items-center"},xi={class:"relative w-72"},wi={class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"},_i={class:"bg-white rounded-lg border border-slate-200"},ki={key:0,class:"px-6 py-4 text-sm text-gray-500"},$i={key:1,class:"flex flex-col"},Si={class:"list-none"},Ci={class:"grid grid-cols-12 gap-4 items-center px-6 py-4 cursor-pointer hover:bg-slate-50"},Ti={class:"col-span-6 flex items-center gap-3"},Ei={class:"flex flex-col"},Ai={class:"text-slate-800 text-sm font-medium"},Ri={class:"text-slate-500 text-xs"},ji={class:"col-span-3 text-sm text-slate-600"},Mi={class:"col-span-1 text-sm text-slate-600"},Pi={class:"col-span-2 flex justify-end gap-2 text-slate-500"},Ui=["onClick"],Ii=["onClick"],Fi=["onClick"],Li={class:"pl-10 bg-slate-50/50"},Di={class:"col-span-6 flex items-center gap-2 text-sm text-slate-700"},zi={class:"col-span-3 text-sm text-slate-600"},Ni={class:"col-span-1 text-sm text-slate-600"},Vi={class:"col-span-2 flex justify-end gap-2 text-slate-500"},Bi=["onClick"],Hi=["onClick"],Oi=["onClick"],qi={__name:"FoldersManagement",setup(t){const r=pt().params.websiteId,u=g([]),c=g(null),v=g(!1),p=g(""),w=g(""),x=g(""),a=async()=>{v.value=!0,p.value="";try{const[_,b]=await Promise.all([z.get(`/api/websites/${r}`),z.get(`/api/websites/${r}/folders`)]);c.value=_.data;const U=(b.data||[]).map(T=>({...T,id:Number(T.id),parent_id:T.parent_id==null?null:Number(T.parent_id)}));u.value=U}finally{v.value=!1}},$=_=>{const b=_.id,f=ee(_.id),U=f?`/preview/folder/${b}/${f}`:`/preview/folder/${b}`,T=localStorage.getItem("adminToken")||"";if(!T){window.open(U,"_blank");return}const S=`${U}?token=${encodeURIComponent(T)}`;window.open(S,"_blank")},I=_=>{if(!c.value)return;const b=ee(_.id);if(!b)return;const f=c.value.domain.split("."),U=f.length>2?f.slice(-2).join("."):c.value.domain,S=`${c.value.ssl_enabled?"https://":"http://"}${U}/${b}`;window.open(S,"_blank")},ee=_=>{const b=new Map((u.value||[]).map(T=>[String(T.id),T]));let f=b.get(String(_));const U=[];for(;f&&(f.slug&&U.unshift(f.slug),!(!f.parent_id||(f=b.get(String(f.parent_id)),f&&String(f.id)===String(_)))););return U.join("/")},i=qe(()=>{const _=[...u.value||[]],b=new Map(_.map(J=>[String(J.id),J])),f=J=>J.sort((K,_e)=>(K.name||"").localeCompare(_e.name||"")),U=J=>_.filter(K=>String(K.parent_id)===String(J)),T=J=>!J.parent_id||!b.has(String(J.parent_id))||String(J.parent_id)===String(J.id),S=f(_.filter(T)),E=[],le=(J,K)=>{E.push({...J,depth:K}),f(U(J.id)).forEach(_e=>le(_e,K+1))};return S.forEach(J=>le(J,0)),E}),O=qe(()=>{const _=(x.value||"").trim().toLowerCase(),b=i.value,f=new Set(b.filter(S=>S.depth===0).map(S=>S.id));if(!_)return b.filter(S=>f.has(S.id));const U=b.filter(S=>(S.name||"").toLowerCase().includes(_)||(S.slug||"").toLowerCase().includes(_)),T=new Set(U.map(S=>{let E=S;for(;E&&E.depth>0;){const le=b.find(J=>String(J.id)===String(E.parent_id));if(!le)break;E=le}return E?E.id:S.id}));return b.filter(S=>S.depth===0&&T.has(S.id))}),h=_=>{const b=(x.value||"").trim().toLowerCase(),U=i.value.filter(T=>String(T.parent_id)===String(_));return b?U.filter(T=>(T.name||"").toLowerCase().includes(b)||(T.slug||"").toLowerCase().includes(b)):U},N=async _=>{var b,f;p.value="",w.value="";try{await z.delete(`/api/websites/${r}/folders/${_.id}`),u.value=(u.value||[]).filter(U=>U.id!==_.id),p.value="Đã xóa thư mục",w.value="success"}catch(U){p.value=((f=(b=U==null?void 0:U.response)==null?void 0:b.data)==null?void 0:f.error)||"Không thể xóa thư mục",w.value="error"}};return et(a),(_,b)=>{const f=nt("router-link");return n(),d("div",vi,[e("div",fi,[B(f,{to:"/",class:"text-slate-500 text-sm font-medium hover:text-primary"},{default:Se(()=>[...b[1]||(b[1]=[Ce("Bảng điều khiển",-1)])]),_:1}),b[2]||(b[2]=e("span",{class:"text-slate-500 text-sm font-medium"},"/",-1)),b[3]||(b[3]=e("span",{class:"text-slate-800 text-sm font-medium"},"Danh mục",-1))]),e("div",bi,[b[5]||(b[5]=e("div",{class:"flex flex-col gap-2"},[e("h1",{class:"text-slate-900 text-3xl font-bold leading-tight tracking-tight"},"Quản lý Danh mục"),e("p",{class:"text-slate-500 text-base"},"Thêm, sửa đổi và tổ chức các danh mục.")],-1)),B(f,{to:`/websites/${k(r)}/folders/new`,class:"flex items-center justify-center rounded-lg h-10 bg-primary text-white gap-2 text-sm font-bold px-4 hover:bg-primary/90"},{default:Se(()=>[...b[4]||(b[4]=[e("span",null,"Tạo thư mục",-1)])]),_:1},8,["to"])]),e("div",yi,[e("div",hi,[e("div",xi,[e("span",wi,[B(k(Us),{class:"size-4"})]),D(e("input",{"onUpdate:modelValue":b[0]||(b[0]=U=>x.value=U),class:"w-full pl-10 pr-4 py-2 text-sm border border-slate-300 rounded-lg bg-background-light focus:ring-primary focus:border-primary",placeholder:"Tìm danh mục...",type:"text"},null,512),[[Q,x.value]])]),e("button",{type:"button",onClick:a,class:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg"},[B(k(Is),{class:"size-5"})])]),B(f,{to:`/websites/${k(r)}/pages`,class:"text-sm text-primary"},{default:Se(()=>[...b[6]||(b[6]=[Ce("Quay lại Pages",-1)])]),_:1},8,["to"])]),e("div",_i,[b[7]||(b[7]=Et('<div class="grid grid-cols-12 gap-4 px-6 py-3 border-b border-slate-200"><div class="col-span-6 text-xs font-semibold text-slate-500 uppercase">Tên danh mục</div><div class="col-span-3 text-xs font-semibold text-slate-500 uppercase">Slug</div><div class="col-span-1 text-xs font-semibold text-slate-500 uppercase">Số page</div><div class="col-span-2 text-xs font-semibold text-slate-500 uppercase text-right">Hành động</div></div>',1)),v.value?(n(),d("div",ki,"Đang tải...")):(n(),d("div",$i,[(n(!0),d(xe,null,we(O.value,U=>(n(),d("details",{key:U.id,class:"group border-b border-slate-200",open:""},[e("summary",Si,[e("div",Ci,[e("div",Ti,[B(k(Fs),{class:"size-4 text-slate-500 group-open:rotate-90 transition-transform"}),e("div",Ei,[e("p",Ai,R(U.name),1),e("p",Ri,R(h(U.id).length)+" danh mục con",1)])]),e("div",ji,"/"+R(ee(U.id)),1),e("div",Mi,R(U.pages_count??0),1),e("div",Pi,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:Ve(T=>$(U),["stop"])},[B(k(Nt),{class:"size-4"})],8,Ui),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:Ve(T=>I(U),["stop"])},[B(k(gt),{class:"size-4"})],8,Ii),B(f,{to:`/websites/${k(r)}/folders/${U.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:Se(()=>[B(k(Xt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:Ve(T=>N(U),["stop"])},[B(k(vt),{class:"size-4"})],8,Fi)])])]),e("div",Li,[(n(!0),d(xe,null,we(h(U.id),T=>(n(),d("div",{key:T.id,class:"grid grid-cols-12 gap-4 items-center px-6 py-3 border-t border-slate-200"},[e("div",Di,[B(k(Ls),{class:"size-5 text-slate-400 -ml-1"}),e("span",null,R(T.name),1)]),e("div",zi,"/"+R(ee(T.id)),1),e("div",Ni,R(T.pages_count??0),1),e("div",Vi,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:S=>$(T)},[B(k(Nt),{class:"size-4"})],8,Bi),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:S=>I(T)},[B(k(gt),{class:"size-4"})],8,Hi),B(f,{to:`/websites/${k(r)}/folders/${T.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:Se(()=>[B(k(Xt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:S=>N(T)},[B(k(vt),{class:"size-4"})],8,Oi)])]))),128))])]))),128))])),p.value?(n(),d("div",{key:2,class:Ie(["px-6 py-3 text-sm",w.value==="error"?"text-red-600":"text-green-600"])},R(p.value),3)):G("",!0)])])}}},Wi={class:"p-6"},Yi={class:"max-w-xl mx-auto"},Ki={class:"flex items-center justify-between mb-4"},Xi={class:"text-xl font-semibold"},Gi=["value"],Qi={class:"flex justify-end gap-2"},Ji=["disabled"],ss={__name:"FolderEdit",setup(t){const s=pt(),r=wt(),u=s.params.websiteId,c=s.params.folderId,v=g(s.name==="FolderCreate"),p=g([]),w=g(""),x=g(""),a=g(null),$=g(!1),I=g(!1),ee=g(""),i=g(""),O=async()=>{const S=((await z.get(`/api/websites/${u}/folders`)).data||[]).map(E=>({...E,id:Number(E.id),parent_id:E.parent_id==null?null:Number(E.parent_id)}));p.value=S},h=U=>(U||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),N=()=>{$.value||(x.value=h(w.value))},_=qe(()=>{const U=[...p.value||[]],T=new Map(U.map(be=>[String(be.id),be])),S=be=>be.sort((Ee,Pe)=>(Ee.name||"").localeCompare(Pe.name||"")),E=be=>U.filter(Ee=>String(Ee.parent_id)===String(be)),le=be=>!be.parent_id||!T.has(String(be.parent_id))||String(be.parent_id)===String(be.id),J=S(U.filter(le)),K=[],_e=(be,Ee)=>{K.push({...be,depth:Ee}),S(E(be.id)).forEach(Pe=>_e(Pe,Ee+1))};return J.forEach(be=>_e(be,0)),K.filter(be=>String(be.id)!==String(c))}),b=()=>{if(!c||v.value)return;const U=(p.value||[]).find(T=>T.id===Number(c));U&&(w.value=U.name||"",x.value=U.slug||"",a.value=U.parent_id==null?null:Number(U.parent_id))},f=async()=>{var U,T,S,E,le;I.value=!0,ee.value="";try{const J={name:w.value,slug:x.value,parent_id:a.value==null?null:Number(a.value)};let K;v.value?K=await z.post(`/api/websites/${u}/folders`,J):K=await z.put(`/api/websites/${u}/folders/${c}`,J),ee.value="Đã lưu thư mục",i.value="success",v.value?r.push(`/websites/${u}/folders`):(a.value=((U=K==null?void 0:K.data)==null?void 0:U.parent_id)==null?null:Number(K.data.parent_id),await O(),b())}catch(J){ee.value=((S=(T=J==null?void 0:J.response)==null?void 0:T.data)==null?void 0:S.message)||((le=(E=J==null?void 0:J.response)==null?void 0:E.data)==null?void 0:le.error)||"Lưu thư mục thất bại",i.value="error"}finally{I.value=!1}};return et(async()=>{await O(),b()}),(U,T)=>{const S=nt("router-link");return n(),d("div",Wi,[e("div",Yi,[e("div",Ki,[e("h1",Xi,R(v.value?"Tạo thư mục":"Sửa thư mục"),1),B(S,{to:`/websites/${k(u)}/folders`,class:"text-sm text-primary"},{default:Se(()=>[...T[4]||(T[4]=[Ce("Quay lại danh sách",-1)])]),_:1},8,["to"])]),e("form",{onSubmit:Ve(f,["prevent"]),class:"bg-white border border-gray-200 rounded-md p-4 space-y-4"},[e("div",null,[T[5]||(T[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),D(e("input",{"onUpdate:modelValue":T[0]||(T[0]=E=>w.value=E),onInput:N,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[Q,w.value]])]),e("div",null,[T[6]||(T[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),D(e("input",{"onUpdate:modelValue":T[1]||(T[1]=E=>x.value=E),onInput:T[2]||(T[2]=E=>$.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[Q,x.value]]),T[7]||(T[7]=e("div",{class:"text-xs text-gray-500 mt-1"},"Sẽ tự thêm số nếu trùng trong domain",-1))]),e("div",null,[T[9]||(T[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),D(e("select",{"onUpdate:modelValue":T[3]||(T[3]=E=>a.value=E),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[T[8]||(T[8]=e("option",{value:null},"(Không có)",-1)),(n(!0),d(xe,null,we(_.value,E=>(n(),d("option",{key:E.id,value:E.id},R("↳ ".repeat(E.depth)+E.name),9,Gi))),128))],512),[[Xe,a.value]])]),e("div",Qi,[B(S,{to:`/websites/${k(u)}/folders`,class:"px-4 py-2 border border-gray-300 rounded-md"},{default:Se(()=>[...T[10]||(T[10]=[Ce("Hủy",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:I.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md disabled:bg-blue-400"},R(v.value?"Tạo":"Lưu"),9,Ji)]),ee.value?(n(),d("div",{key:0,class:Ie(["text-sm",i.value==="error"?"text-red-600":"text-green-600"])},R(ee.value),3)):G("",!0)],32)])])}}},Zi={class:"max-w-3xl mx-auto"},ed={key:0,class:"mb-6 rounded-md border border-green-200 bg-green-50 px-4 py-3 text-green-700"},td={key:1,class:"mb-6 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-red-700"},sd={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},ad={class:"grid grid-cols-1 gap-4"},od={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},ld={class:"grid grid-cols-1 gap-4"},nd={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},rd={class:"flex items-center justify-between mb-4"},id={key:0,class:"text-sm text-gray-500"},dd={key:1,class:"space-y-3"},ud={class:"flex items-start justify-between"},cd={class:"flex-1"},pd={class:"flex items-center gap-2"},md={class:"font-semibold text-gray-900"},gd={key:0,class:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded"},vd={class:"text-sm text-gray-600 mt-1"},fd={class:"flex items-center gap-2"},bd=["onClick"],yd=["onClick"],hd={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},xd={class:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md"},wd={class:"flex items-center justify-between mb-4"},_d={class:"space-y-3"},kd={class:"flex items-center gap-2"},$d={class:"flex justify-end gap-2 mt-6"},Sd={class:"flex justify-end"},Cd=["disabled"],Td={__name:"Settings",setup(t){const s=g({APP_NAME:"",APP_URL:"",SSL_EMAIL:""}),r=g(!1),u=g(""),c=g(""),v=g([]),p=g(!1),w=g({name:"",email:"",api_key:"",is_default:!1}),x=async()=>{try{const{data:O}=await z.get("/api/settings");s.value={...s.value,...O}}catch{c.value="Không tải được cài đặt"}},a=async()=>{try{const{data:O}=await z.get("/api/cloudflare-accounts");v.value=O}catch(O){console.error("Failed to load Cloudflare accounts",O)}},$=async()=>{var O,h;try{await z.post("/api/cloudflare-accounts",w.value),u.value="Đã thêm Cloudflare account thành công",p.value=!1,w.value={name:"",email:"",api_key:"",is_default:!1},await a()}catch(N){const _=((h=(O=N==null?void 0:N.response)==null?void 0:O.data)==null?void 0:h.error)||"Thêm account thất bại";c.value=_}},I=async O=>{try{await z.post(`/api/cloudflare-accounts/${O}/set-default`),u.value="Đã set account mặc định",await a()}catch{c.value="Set default thất bại"}},ee=async O=>{var h,N;if(confirm("Bạn có chắc muốn xóa account này?"))try{await z.delete(`/api/cloudflare-accounts/${O}`),u.value="Đã xóa account",await a()}catch(_){const b=((N=(h=_==null?void 0:_.response)==null?void 0:h.data)==null?void 0:N.error)||"Xóa account thất bại";c.value=b}},i=async()=>{var O,h;r.value=!0,c.value="",u.value="";try{await z.put("/api/settings",s.value),u.value="Đã lưu cài đặt thành công"}catch(N){const _=((h=(O=N==null?void 0:N.response)==null?void 0:O.data)==null?void 0:h.error)||"Lưu cài đặt thất bại";c.value=_}finally{r.value=!1}};return et(async()=>{await x(),await a()}),(O,h)=>(n(),d("div",Zi,[h[21]||(h[21]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Cài đặt hệ thống",-1)),u.value?(n(),d("div",ed,R(u.value),1)):G("",!0),c.value?(n(),d("div",td,R(c.value),1)):G("",!0),e("form",{onSubmit:Ve(i,["prevent"])},[e("div",sd,[h[12]||(h[12]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Ứng dụng",-1)),e("div",ad,[e("div",null,[h[10]||(h[10]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_NAME",-1)),D(e("input",{"onUpdate:modelValue":h[0]||(h[0]=N=>s.value.APP_NAME=N),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"VPS Manager"},null,512),[[Q,s.value.APP_NAME]])]),e("div",null,[h[11]||(h[11]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_URL",-1)),D(e("input",{"onUpdate:modelValue":h[1]||(h[1]=N=>s.value.APP_URL=N),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"https://vps.yourdomain.com"},null,512),[[Q,s.value.APP_URL]])])])]),e("div",od,[h[14]||(h[14]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"SSL",-1)),e("div",ld,[e("div",null,[h[13]||(h[13]=e("label",{class:"block text-sm text-gray-600 mb-1"},"SSL_EMAIL",-1)),D(e("input",{"onUpdate:modelValue":h[2]||(h[2]=N=>s.value.SSL_EMAIL=N),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"admin@yourdomain.com"},null,512),[[Q,s.value.SSL_EMAIL]])])])]),e("div",nd,[e("div",rd,[h[15]||(h[15]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Cloudflare Accounts",-1)),e("button",{type:"button",onClick:h[3]||(h[3]=N=>p.value=!0),class:"bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm"},"+ Thêm Account")]),v.value.length===0?(n(),d("div",id,"Chưa có Cloudflare account nào")):(n(),d("div",dd,[(n(!0),d(xe,null,we(v.value,N=>(n(),d("div",{key:N.id,class:"border border-gray-200 rounded-lg p-4"},[e("div",ud,[e("div",cd,[e("div",pd,[e("h3",md,R(N.name),1),N.is_default?(n(),d("span",gd,"Default")):G("",!0)]),e("p",vd,R(N.email),1)]),e("div",fd,[N.is_default?G("",!0):(n(),d("button",{key:0,type:"button",onClick:_=>I(N.id),class:"text-xs text-blue-600 hover:text-blue-800"},"Set Default",8,bd)),e("button",{type:"button",onClick:_=>ee(N.id),class:"text-xs text-red-600 hover:text-red-800"},"Xóa",8,yd)])])]))),128))]))]),p.value?(n(),d("div",hd,[e("div",xd,[e("div",wd,[h[16]||(h[16]=e("h3",{class:"text-lg font-semibold"},"Thêm Cloudflare Account",-1)),e("button",{type:"button",onClick:h[4]||(h[4]=N=>p.value=!1),class:"text-gray-500"},"✕")]),e("div",_d,[e("div",null,[h[17]||(h[17]=e("label",{class:"block text-sm text-gray-700 mb-1"},"Tên tài khoản",-1)),D(e("input",{"onUpdate:modelValue":h[5]||(h[5]=N=>w.value.name=N),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"Cloudflare Account 1"},null,512),[[Q,w.value.name]])]),e("div",null,[h[18]||(h[18]=e("label",{class:"block text-sm text-gray-700 mb-1"},"Email",-1)),D(e("input",{"onUpdate:modelValue":h[6]||(h[6]=N=>w.value.email=N),type:"email",class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"admin@example.com"},null,512),[[Q,w.value.email]])]),e("div",null,[h[19]||(h[19]=e("label",{class:"block text-sm text-gray-700 mb-1"},"API Key",-1)),D(e("input",{"onUpdate:modelValue":h[7]||(h[7]=N=>w.value.api_key=N),type:"password",class:"w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[Q,w.value.api_key]])]),e("div",kd,[D(e("input",{"onUpdate:modelValue":h[8]||(h[8]=N=>w.value.is_default=N),type:"checkbox",id:"is-default",class:"rounded"},null,512),[[St,w.value.is_default]]),h[20]||(h[20]=e("label",{for:"is-default",class:"text-sm text-gray-700"},"Set làm account mặc định",-1))])]),e("div",$d,[e("button",{type:"button",onClick:h[9]||(h[9]=N=>p.value=!1),class:"px-4 py-2 rounded-md border border-gray-300"},"Hủy"),e("button",{type:"button",onClick:$,class:"px-4 py-2 bg-blue-600 text-white rounded-md"},"Thêm")])])])):G("",!0),e("div",Sd,[e("button",{type:"submit",onClick:Ve(i,["prevent"]),disabled:r.value,class:Ie(["bg-blue-600 text-white px-4 py-2 rounded-md",{"opacity-50 cursor-not-allowed":r.value}])},R(r.value?"Đang lưu...":"Lưu cài đặt"),11,Cd)])],32)]))}},Ed={class:"min-h-screen bg-gray-100"},Ad={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Rd={class:"px-4 py-6 sm:px-0"},jd={class:"flex justify-between items-center mb-6"},Md={class:"text-3xl font-bold text-gray-900"},Pd={class:"flex items-center gap-2"},Ud=["disabled","title"],Id={class:"bg-white shadow rounded-lg p-6"},Fd={class:"space-y-4"},Ld={class:"flex justify-between items-start"},Dd={class:"inline-flex items-center gap-2 mb-2"},zd=["checked","onChange"],Nd={class:"font-medium"},Vd={class:"text-sm text-gray-500"},Bd={class:"text-sm text-gray-500"},Hd={class:"text-sm text-gray-500"},Od={class:"flex gap-2"},qd=["href"],Wd=["href"],Yd=["onClick","disabled"],Kd={key:0,class:"text-center text-gray-500"},Xd={__name:"PagesManagement",setup(t){const r=pt().params.websiteId,u=g(null),c=g([]),v=g([]),p=g([]),w=g([]),x=g(!1),a=g("");g(!1);const $=qe(()=>{const S=a.value.trim().toLowerCase();return S?c.value.filter(E=>(E.title||"").toLowerCase().includes(S)||(E.path||"").toLowerCase().includes(S)):c.value}),I=async()=>{const S=await z.get(`/api/websites/${r}`);u.value=S.data},ee=async()=>{const S=await z.get(`/api/websites/${r}/pages`);c.value=S.data.map(E=>({...E,__site:u.value}))},i=async()=>{const S=await z.get("/api/websites");v.value=S.data||[]},O=qe(()=>{var E;return(((E=u.value)==null?void 0:E.domain)||"").trim().replace(/^[^.]+\./,"")}),h=qe(()=>{const S=O.value;return S&&(v.value||[]).find(E=>String(E.domain||"").trim()===S)||null}),N=qe(()=>{const S=u.value;return S&&String(S.domain||"").trim().split(".").length>2&&h.value?`/websites/${h.value.id}/subdomains`:"/websites"}),_=async S=>{if(confirm(`Delete page ${S.path}?`))try{w.value=[...w.value,S.id],await z.delete(`/api/pages/${S.id}`),yt.success("Page deleted"),p.value=p.value.filter(E=>E!==S.id),await ee()}catch{yt.error("Failed to delete page")}finally{w.value=w.value.filter(E=>E!==S.id)}},b=S=>{const E=S.__site||u.value;if(!E)return"#";const le=(E.ssl_enabled?"https://":"http://")+E.domain,J=S.path||"/",K=S.filename||"";if(K.toLowerCase()==="index.html")return le+J;const _e=J.endsWith("/")?"":"/";return le+J+_e+K},f=S=>{const E=S.__site||u.value;if(!E)return"#";const le=E.id,J=((S==null?void 0:S.path)||"/").trim(),K=J==="/"?`/preview/${le}`:`/preview/${le}${J.startsWith("/")?"":"/"}${J}`,_e=localStorage.getItem("adminToken")||"";if(!_e)return K;const Te=K.includes("?")?"&":"?";return`${K}${Te}token=${encodeURIComponent(_e)}`},U=S=>{const E=S.id;p.value.includes(E)?p.value=p.value.filter(le=>le!==E):p.value=[...p.value,E]},T=async()=>{if(p.value.length!==0&&confirm(`Delete ${p.value.length} selected pages?`)){x.value=!0;try{const S=[...p.value];await Promise.all(S.map(async E=>{w.value=[...w.value,E];try{await z.delete(`/api/pages/${E}`)}finally{w.value=w.value.filter(le=>le!==E)}})),yt.success("Selected pages deleted"),p.value=[],await ee()}catch{yt.error("Failed to delete selected pages")}finally{x.value=!1}}};return et(async()=>{await I(),await ee(),await i()}),(S,E)=>{var J;const le=nt("router-link");return n(),d("div",Ed,[e("div",Ad,[e("div",Rd,[e("div",jd,[e("h1",Md,R(((J=u.value)==null?void 0:J.domain)||"..."),1),e("div",Pd,[B(le,{to:N.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Back"},{default:Se(()=>[...E[1]||(E[1]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5"}),e("path",{d:"M12 19l-7-7 7-7"})],-1)])]),_:1},8,["to"]),D(e("input",{"onUpdate:modelValue":E[0]||(E[0]=K=>a.value=K),placeholder:"Search",class:"h-9 w-56 rounded-md border border-gray-300 px-3"},null,512),[[Q,a.value]]),B(le,{to:`/websites/${k(r)}/pages/new`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Add Page"},{default:Se(()=>[...E[2]||(E[2]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])]),_:1},8,["to"]),e("button",{onClick:T,disabled:p.value.length===0||x.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:`Delete Selected (${p.value.length})`},[x.value?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):(n(),ue(k(vt),{key:1,class:"size-4"}))],8,Ud)])]),e("div",Id,[e("div",Fd,[(n(!0),d(xe,null,we($.value,K=>{var _e,Te;return n(),d("div",{key:K.id,class:"border rounded-lg p-4"},[e("div",Ld,[e("div",null,[e("label",Dd,[e("input",{type:"checkbox",checked:p.value.includes(K.id),onChange:be=>U(K)},null,40,zd)]),e("h4",Nd,R(K.title||"(No title)"),1),e("p",Vd,"Path: "+R(K.path),1),e("p",Bd,"File: "+R(K.filename),1),e("p",Hd,"Website: "+R((_e=K.__site)==null?void 0:_e.domain),1)]),e("div",Od,[e("a",{href:b(K),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Live"},[B(k(gs),{class:"size-4"})],8,qd),e("a",{href:f(K),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[...E[3]||(E[3]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,Wd),B(le,{to:`/websites/${((Te=K.__site)==null?void 0:Te.id)||k(r)}/pages/${K.id}`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},{default:Se(()=>[B(k(us),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:be=>_(K),disabled:w.value.includes(K.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[w.value.includes(K.id)?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):(n(),ue(k(vt),{key:1,class:"size-4"}))],8,Yd)])])])}),128)),$.value.length===0?(n(),d("div",Kd,"No pages found")):G("",!0)])])])])])}}},Gd={class:"min-h-screen bg-gray-100"},Qd={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},Jd={class:"px-4 py-6 sm:px-0"},Zd={class:"flex justify-between items-center mb-6"},eu={class:"text-3xl font-bold text-gray-900"},tu={class:"flex items-center gap-2"},su=["href"],au=["href"],ou={class:"bg-white shadow rounded-lg p-6"},lu={class:"mb-4"},nu={class:"mb-4"},ru={class:"mb-4"},iu={class:"mb-4"},du={class:"flex items-center justify-between"},uu={class:"flex items-center gap-3"},cu={class:"mt-1 border border-gray-300 rounded-md p-3 space-y-3"},pu={class:"space-y-1"},mu=["disabled","onClick"],gu=["value","onChange"],vu={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},fu={class:"bg-white rounded-lg shadow p-6 w-full max-w-md"},bu={class:"flex items-center justify-between mb-4"},yu={class:"space-y-3"},hu=["value"],xu={class:"pt-2 border-t border-gray-200"},wu={class:"text-xs text-gray-600"},_u={class:"flex justify-end gap-2 mt-6"},ku={class:"mb-4"},$u={key:0,class:"mb-4 space-y-4"},Su={key:1,class:"mb-4 space-y-4"},Cu={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Tu={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},Eu={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},Au=["value"],Ru={class:"text-sm"},ju={class:"space-y-3"},Mu={class:"flex items-center gap-2"},Pu={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},Uu=["onClick"],Iu=["onUpdate:modelValue"],Fu=["onUpdate:modelValue"],Lu={class:"space-y-3"},Du={class:"flex items-center gap-2"},zu={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},Nu=["onClick"],Vu=["onUpdate:modelValue"],Bu=["onUpdate:modelValue"],Hu={key:2,class:"mb-4"},Ou={key:3,class:"mb-4"},qu={key:0,class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Wu={class:"flex justify-end gap-3"},Yu=["disabled"],Ku={key:0,class:"inline-flex items-center gap-2"},Xu={key:1},as={__name:"PageEdit",setup(t){const s=pt(),r=wt(),u=s.params.websiteId,c=s.params.pageId,v=g(s.name==="PageCreate"||c==="new"||!c),p=g("blank"),w=g(!1),x=g(""),a=g({title:"",location:"",phone:"",galleryRaw:"",about1:"",pageContent:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),$=g([]),I=g([]),ee=g(null),i=g(""),O=g(null),h=g(!1),N=g(""),_=g(!1);g(null),g(""),g(""),g(null);const b=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],f=g({path:"",filename:"",title:"",content:""}),U=g(null),T=g([]),S=g(null),E=g(!1),le=g(null),J=g(null),K=async()=>{if(v.value)return;const l=(await z.get(`/api/pages/${c}`)).data;if(f.value={path:l.path,filename:l.filename,title:l.title||"",content:l.content||""},l.template_type){if(w.value=!!l.template_type,l.template_type==="page"&&l.template_data)a.value={...a.value,pageContent:l.template_data.content||""};else if((l.template_type==="hotel-detail"||l.template_type==="hotel-detail-1"||l.template_type==="detail")&&l.template_data){let L=l.template_data.galleryRaw||"";!L&&Array.isArray(l.template_data.gallery)&&(L=l.template_data.gallery.join(`
`)),a.value={title:l.template_data.title||"",location:l.template_data.location||l.template_data.location_text||"",phone:l.template_data.phone||"",galleryRaw:L,about1:l.template_data.about1||"",pageContent:"",amenities:Array.isArray(l.template_data.amenities)?l.template_data.amenities:[],info:Array.isArray(l.template_data.info)?l.template_data.info:[{subject:"",description:""},{subject:"",description:""}],faqs:Array.isArray(l.template_data.faqs)?l.template_data.faqs:[{q:"",a:""},{q:"",a:""}]}}p.value=l.template_type}else p.value="blank",w.value=!1;I.value=(l.folders||[]).map(L=>Number(L.id)),ee.value=l.primary_folder_id==null?null:Number(l.primary_folder_id)},_e=async()=>{const M=(f.value.title||"").trim();let l="";try{l=(await z.get("/templates/laravel-hotel-1/page/index.html")).data||""}catch{l='<!DOCTYPE html><html><head><meta charset="utf-8"><title>{{TITLE}}</title></head><body></body></html>'}let L="",W="";try{L=(await z.get("/templates/_shared/header.html")).data||""}catch{}try{W=(await z.get("/templates/_shared/footer.html")).data||""}catch{}L&&(l=l.replace(/<header[^>]*>[\s\S]*?<\/header>/i,L)),W&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(l)?l=l.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,W):/<\/body>/i.test(l)?l=l.replace(/<\/body>/i,W+"</body>"):l+=`
`+W);const y={title:M||"Page",content:a.value.pageContent||""},X=`<script type="application/json" id="page-data">${JSON.stringify(y)}<\/script>`;return l=l.replace(/<\/head>/i,X+`
</head>`),l=l.replace(/<title>[^<]*<\/title>/i,`<title>${y.title}</title>`),l||'<!DOCTYPE html><html><head><meta charset="utf-8"><title>'+(M||"Page")+'</title></head><body><div id="page-content">'+(a.value.pageContent||"")+"</div></body></html>"},Te=async()=>{const M=(a.value.galleryRaw||"").split(`
`).map(Be=>Be.trim()).filter(Boolean),L=(I.value||[]).reduce((Be,Ye)=>{if(Be==null)return Ye;const ft=q(Be);return q(Ye)>ft?Ye:Be},null),W=j(L),y=W.length>1?[W[0],W[W.length-1]]:W,X=(f.value.title||"").trim(),oe=["Home",...y.map(Be=>Be.name||""),X];let se=(await z.get("/templates/hotel-detail-1/index.html")).data||"",Re="",De="";try{Re=(await z.get("/templates/_shared/header.html")).data||""}catch{}try{De=(await z.get("/templates/_shared/footer.html")).data||""}catch{}Re&&(se=se.replace(/<header[^>]*>[\s\S]*?<\/header>/i,Re)),De&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(se)?se=se.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,De):/<\/body>/i.test(se)?se=se.replace(/<\/body>/i,De+"</body>"):se+=`
`+De);const Ze=a.value.amenities||[],Le=M.map(Be=>String(Be).replace(/<\/script>/gi,"<\\/script>")),Oe={title:X||"Hotel",location:a.value.location||"",location_text:a.value.location||"",phone:a.value.phone||"",about1:a.value.about1||"",amenities:Ze,faqs:a.value.faqs||[],info:a.value.info||[],gallery:Le,breadcrumb_items:oe.filter(Boolean)},ot=`<script type="application/json" id="page-data">${JSON.stringify(Oe)}<\/script>`;return se=se.replace("{{GALLERY_DATA_SCRIPT}}",ot),se=se.replace(/<title>[^<]*<\/title>/i,`<title>${Oe.title}</title>`),se},be=async()=>{const M=await z.get(`/api/websites/${u}`);U.value=M.data},Ee=async()=>{try{const M=await z.get("/api/websites");T.value=M.data||[]}catch{T.value=[]}},Pe=qe(()=>{const M=U.value;if(!M)return"/websites";const l=(M.domain||"").trim(),L=l.replace(/^[^.]+\./,"");if(L&&L!==l){const W=(T.value||[]).find(y=>String(y.domain).trim()===L);if(W&&W.id)return`/websites/${W.id}/subdomains`}return"/websites"}),ze=async()=>{try{const M=await z.get("/api/settings");S.value=M.data||{}}catch{S.value={}}},Fe=async()=>{const L=((await z.get(`/api/websites/${u}/folders`)).data||[]).map(W=>({...W,id:Number(W.id),parent_id:W.parent_id==null?null:Number(W.parent_id)}));$.value=L},We=async()=>{const M=(i.value||"").trim();if(!M)return;let l=(N.value||"").trim();l||(l=ke(M));const L={name:M,slug:l};O.value&&(L.parent_id=Number(O.value));const y=(await z.post(`/api/websites/${u}/folders`,L)).data;$.value=[...$.value,y],I.value=[...I.value,y.id],i.value="",O.value=null,N.value="",_.value=!1,h.value=!1},de=async()=>{var M,l,L,W,y;E.value=!0;try{const X=(M=window.tinymce)==null?void 0:M.get("page-content-editor");if(X&&(a.value.pageContent=X.getContent()||""),v.value){let oe;if(p.value==="blank"?oe=x.value||f.value.content||"":p.value==="page"?oe=await _e():oe=await Te(),f.value.content=oe,f.value.filename=(f.value.filename||"index.html").trim(),!(f.value.path||"").trim()){const De=(I.value||[]).reduce((Le,Oe)=>{if(Le==null)return Oe;const ot=q(Le);return q(Oe)>ot?Oe:Le},null),Ze=ee.value||De;if(Ze){const Le=Z(Ze);Le&&(f.value.path=`/${Le}`)}}f.value.path||(f.value.path="/");const se={...f.value};if(p.value==="page")se.template_type="page",se.template_data={title:(f.value.title||"").trim()||"Page",content:a.value.pageContent||""};else if(p.value!=="blank"){se.template_type=p.value;const Re=(a.value.galleryRaw||"").split(`
`).map(De=>De.trim()).filter(Boolean);se.template_data={title:(a.value.title||f.value.title||"").trim()||"Hotel",location:a.value.location||"",location_text:a.value.location||"",phone:a.value.phone||"",about1:a.value.about1||"",amenities:a.value.amenities||[],faqs:a.value.faqs||[],info:a.value.info||[],gallery:Re,galleryRaw:a.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(a.value.title||"").trim()].filter(Boolean)}}else se.template_type="blank",se.template_data=null;se.folder_ids=[...I.value],se.primary_folder_id=ee.value,await z.post(`/api/websites/${u}/pages`,se)}else{const oe={...f.value};let Ne;if(p.value==="blank"?Ne=f.value.content||"":p.value==="page"?Ne=await _e():Ne=await Te(),oe.content=Ne,oe.filename=(oe.filename||"index.html").trim(),p.value==="page")oe.template_type="page",oe.template_data={title:(f.value.title||"").trim()||"Page",content:a.value.pageContent||""};else if(p.value!=="blank"){oe.template_type=p.value;const Re=(a.value.galleryRaw||"").split(`
`).map(De=>De.trim()).filter(Boolean);oe.template_data={title:(a.value.title||f.value.title||"").trim()||"Hotel",location:a.value.location||"",location_text:a.value.location||"",phone:a.value.phone||"",about1:a.value.about1||"",amenities:a.value.amenities||[],faqs:a.value.faqs||[],info:a.value.info||[],gallery:Re,galleryRaw:a.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(a.value.title||"").trim()].filter(Boolean)}}else oe.template_type="blank",oe.template_data=null;if(!(oe.path||"").trim()){const De=(I.value||[]).reduce((Le,Oe)=>{if(Le==null)return Oe;const ot=q(Le);return q(Oe)>ot?Oe:Le},null),Ze=ee.value||De;if(Ze){const Le=Z(Ze);Le&&(oe.path=`/${Le}`)}}oe.path||(oe.path="/"),oe.folder_ids=[...I.value],oe.primary_folder_id=ee.value,await z.put(`/api/pages/${c}`,oe)}r.push(`/websites/${u}/pages`)}catch(X){const oe=((L=(l=X==null?void 0:X.response)==null?void 0:l.data)==null?void 0:L.message)||((y=(W=X==null?void 0:X.response)==null?void 0:W.data)==null?void 0:y.error)||(X==null?void 0:X.message)||"Lưu trang thất bại";alert(oe)}finally{E.value=!1}},ne=()=>{if(!U.value)return"#";const M=(U.value.ssl_enabled?"https://":"http://")+U.value.domain,l=f.value.path||"/",L=f.value.filename||"",W=l.endsWith("/")?"":"/";return L.toLowerCase()==="index.html"?M+l:M+l+W+L},C=()=>{var oe;if(!U.value)return"#";const M=(((oe=S.value)==null?void 0:oe.APP_URL)||(U.value.ssl_enabled?"https://":"http://")+U.value.domain).replace(/\/$/,""),l=(f.value.path||"/").trim();let L;if(l==="/"||l==="")L=`${M}/preview/${U.value.id}`;else{const Ne=l.replace(/^\//,"");L=`${M}/preview/${U.value.id}/${encodeURIComponent(Ne)}`}const W=localStorage.getItem("adminToken"),y=new URLSearchParams;W&&y.set("token",W),y.set("hide_preview_bar","1"),y.set("v",String(Date.now()));const X=y.toString();return X?`${L}?${X}`:L},Z=M=>{if(!M)return"";const l=new Map(($.value||[]).map(y=>[String(y.id),y]));let L=l.get(String(M));const W=[];for(;L&&(L.slug&&W.unshift(L.slug),!(!L.parent_id||(L=l.get(String(L.parent_id)),L&&String(L.id)===String(M)))););return W.join("/")},j=M=>{if(!M)return[];const l=new Map(($.value||[]).map(X=>[String(X.id),X])),L=[],W=new Set;let y=l.get(String(M));for(;y&&!W.has(y.id)&&(L.unshift(y),W.add(y.id),!!y.parent_id);)y=l.get(String(y.parent_id));return L},q=M=>{let l=0;const L=$.value||[],W=new Map(L.map(X=>[String(X.id),X]));let y=L.find(X=>String(X.id)===String(M));for(;y&&y.parent_id!=null;)l+=1,y=W.get(String(y.parent_id));return l},me=qe(()=>{const M=[...$.value||[]],l=new Map(M.map(se=>[String(se.id),se])),L=se=>se.sort((Re,De)=>(Re.name||"").localeCompare(De.name||"")),W=se=>M.filter(Re=>String(Re.parent_id)===String(se)),y=se=>!se.parent_id||!l.has(String(se.parent_id))||String(se.parent_id)===String(se.id),X=L(M.filter(y)),oe=[],Ne=(se,Re)=>{oe.push({...se,depth:Re}),L(W(se.id)).forEach(De=>Ne(De,Re+1))};return X.forEach(se=>Ne(se,0)),oe}),ke=M=>(M||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),pe=()=>{_.value||(N.value=ke(i.value))},$e=M=>{if(ee.value===M){ee.value=null;return}ee.value||(ee.value=M)},Me=M=>{if(I.value.includes(M)){const l=$.value.find(L=>L.id===M);if(l&&l.parent_id){const L=W=>{if(!W)return;I.value.includes(W)||I.value.push(W);const y=$.value.find(X=>X.id===W);y&&y.parent_id&&L(y.parent_id)};L(l.parent_id)}}ee.value&&!I.value.includes(ee.value)&&(ee.value=null)},F=()=>{a.value.faqs=[...a.value.faqs||[],{q:"",a:""}]},m=()=>{a.value.info=[...a.value.info||[],{subject:"",description:""}]},ae=M=>{a.value.faqs=(a.value.faqs||[]).filter((l,L)=>L!==M)},re=M=>{a.value.info=(a.value.info||[]).filter((l,L)=>L!==M)},ie=qe(()=>{const l=(f.value.content||"").split(`
`).length;return l>0?l:1}),te=()=>{le.value&&J.value&&(le.value.scrollTop=J.value.scrollTop)},fe=async()=>{if(!window.tinymce){if(!document.querySelector('script[src*="tinymce.min.js"]')){const M=document.createElement("script");M.src="/dist/tinymce/tinymce.min.js",document.head.appendChild(M),await new Promise((l,L)=>{M.onload=l,M.onerror=L})}await new Promise(M=>{const l=()=>{window.tinymce?M():setTimeout(l,50)};l()})}},A=async()=>{await zt(),await new Promise(L=>setTimeout(L,100));const M=document.getElementById("page-content-editor");if(!M)return;await fe();const l=window.tinymce.get("page-content-editor");l&&l.remove(),M.value=a.value.pageContent||"",window.tinymce.init({selector:"#page-content-editor",base_url:"/dist/tinymce",suffix:".min",menubar:!0,plugins:"link lists table image code charmap anchor searchreplace visualblocks fullscreen insertdatetime media help wordcount",toolbar:"undo redo | formatselect | bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media table | charmap anchor | code fullscreen | help",height:500,table_toolbar:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",image_title:!0,automatic_uploads:!1,file_picker_types:"image",content_style:"body { font-family: Arial, sans-serif; font-size: 14px; }",setup:L=>{L.on("Change KeyUp SetContent",()=>{a.value.pageContent=L.getContent()||""})}}).then(L=>{const W=L&&L[0];W&&(a.value.pageContent||"").trim()&&W.setContent(a.value.pageContent)})};return kt(p,async M=>{M==="page"&&await A()}),et(async()=>{await ze(),await Promise.all([be(),Ee()]),await Fe(),await K(),await zt();const M=document.getElementById("about1-editor");M&&(await fe(),M.value=a.value.about1||"",window.tinymce.init({selector:"#about1-editor",base_url:"/dist/tinymce",suffix:".min",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:l=>{l.on("Change KeyUp SetContent",()=>{a.value.about1=l.getContent()||""})}}).then(l=>{const L=l&&l[0];L&&(a.value.about1||"").trim()&&L.setContent(a.value.about1)})),p.value==="page"&&await A()}),Ht(()=>{if(window.tinymce){const M=window.tinymce.get("about1-editor");M&&M.remove();const l=window.tinymce.get("page-content-editor");l&&l.remove()}}),(M,l)=>{var W;const L=nt("router-link");return n(),d("div",Gd,[e("div",Qd,[e("div",Jd,[e("div",Zd,[e("h1",eu,R(v.value?"Create Page":"Edit Page"),1),e("div",tu,[v.value?G("",!0):(n(),d("a",{key:0,href:ne(),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[B(k(gs),{class:"size-4"})],8,su)),v.value?G("",!0):(n(),d("a",{key:1,href:C(),target:"_blank",class:"px-3 h-9 inline-flex items-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 text-sm"},"Preview",8,au)),B(L,{to:Pe.value,class:"px-4 py-2 rounded-md border border-gray-300 bg-white"},{default:Se(()=>[...l[20]||(l[20]=[Ce("Back",-1)])]),_:1},8,["to"])])]),e("div",ou,[e("form",{onSubmit:Ve(de,["prevent"]),novalidate:""},[e("div",lu,[l[21]||(l[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Path",-1)),D(e("input",{"onUpdate:modelValue":l[0]||(l[0]=y=>f.value.path=y),type:"text",placeholder:"/about-us",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,f.value.path]])]),e("div",nu,[l[22]||(l[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Filename",-1)),D(e("input",{"onUpdate:modelValue":l[1]||(l[1]=y=>f.value.filename=y),type:"text",placeholder:"index.html",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,f.value.filename]])]),e("div",ru,[l[23]||(l[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Title",-1)),D(e("input",{"onUpdate:modelValue":l[2]||(l[2]=y=>f.value.title=y),onInput:l[3]||(l[3]=y=>a.value.title=f.value.title),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[Q,f.value.title]])]),e("div",iu,[e("div",du,[l[25]||(l[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thư mục",-1)),e("div",uu,[B(L,{to:`/websites/${k(u)}/folders`,class:"text-sm text-primary"},{default:Se(()=>[...l[24]||(l[24]=[Ce("Quản lý thư mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:l[4]||(l[4]=y=>h.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",cu,[e("div",pu,[l[26]||(l[26]=e("label",{class:"text-sm text-gray-700"},"Chọn thư mục",-1)),(n(!0),d(xe,null,we(me.value,y=>(n(),d("div",{key:y.id,class:"flex items-center gap-2 cursor-pointer"},[e("button",{type:"button",class:"text-yellow-500 text-xs",disabled:ee.value&&ee.value!==y.id,onClick:X=>$e(y.id)},R(ee.value===y.id?"★":"☆"),9,mu),D(e("input",{type:"checkbox",value:y.id,"onUpdate:modelValue":l[5]||(l[5]=X=>I.value=X),onChange:X=>Me(y.id),class:"rounded cursor-pointer"},null,40,gu),[[St,I.value]]),e("span",{class:"text-sm",style:lt({paddingLeft:(y.depth>0?y.depth*16:0)+"px"})},R("↳ ".repeat(y.depth))+R(y.name),5)]))),128))])]),h.value?(n(),d("div",vu,[e("div",fu,[e("div",bu,[l[27]||(l[27]=e("h3",{class:"text-lg font-semibold"},"Tạo thư mục",-1)),e("button",{type:"button",onClick:l[6]||(l[6]=y=>h.value=!1),class:"text-gray-500"},"✕")]),e("div",yu,[e("div",null,[l[28]||(l[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),D(e("input",{"onUpdate:modelValue":l[7]||(l[7]=y=>i.value=y),onInput:pe,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[Q,i.value]])]),e("div",null,[l[29]||(l[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),D(e("input",{"onUpdate:modelValue":l[8]||(l[8]=y=>N.value=y),onInput:l[9]||(l[9]=y=>_.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[Q,N.value]])]),e("div",null,[l[31]||(l[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),D(e("select",{"onUpdate:modelValue":l[10]||(l[10]=y=>O.value=y),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[l[30]||(l[30]=e("option",{value:null},"(Không có)",-1)),(n(!0),d(xe,null,we(me.value,y=>(n(),d("option",{key:y.id,value:y.id},R("↳ ".repeat(y.depth)+y.name),9,hu))),128))],512),[[Xe,O.value]])]),e("div",xu,[e("div",wu,[l[33]||(l[33]=Ce("Sửa/Xóa chi tiết vui lòng vào trang ",-1)),B(L,{to:`/websites/${k(u)}/folders`,class:"text-primary"},{default:Se(()=>[...l[32]||(l[32]=[Ce("Quản lý thư mục",-1)])]),_:1},8,["to"])])])]),e("div",_u,[e("button",{type:"button",onClick:l[11]||(l[11]=y=>h.value=!1),class:"px-4 py-2 rounded-md border border-gray-300"},"Hủy"),e("button",{type:"button",onClick:We,class:"px-4 py-2 bg-blue-600 text-white rounded-md"},"Tạo")])])])):G("",!0)]),e("div",ku,[l[35]||(l[35]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),D(e("select",{"onUpdate:modelValue":l[12]||(l[12]=y=>p.value=y),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...l[34]||(l[34]=[e("option",{value:null},"Auto (theo website)",-1),Et('<option value="blank">Custom HTML</option><optgroup label="Templates trong package"><option value="home">Home Template</option><option value="listing">Listing Template</option><option value="detail">Detail Template</option><option value="page">Page Template</option></optgroup>',2)])],512),[[Xe,p.value]]),l[36]||(l[36]=e("p",{class:"mt-1 text-xs text-gray-500"}," Auto: Tự động chọn template phù hợp. Custom HTML: Tự viết HTML. Templates: Chọn template có sẵn trong package. ",-1))]),p.value==="page"?(n(),d("div",$u,[...l[37]||(l[37]=[e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Nội dung trang"),e("textarea",{id:"page-content-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)])])):G("",!0),p.value==="detail"?(n(),d("div",Su,[e("div",Cu,[e("div",null,[l[38]||(l[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),D(e("input",{"onUpdate:modelValue":l[13]||(l[13]=y=>a.value.location=y),type:"text",placeholder:"Sunny Isles, Florida, United States hoặc iframe Google Maps embed",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,a.value.location]])]),e("div",null,[l[39]||(l[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),D(e("input",{"onUpdate:modelValue":l[14]||(l[14]=y=>a.value.phone=y),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,a.value.phone]])])]),e("div",null,[l[40]||(l[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),D(e("textarea",{"onUpdate:modelValue":l[15]||(l[15]=y=>a.value.galleryRaw=y),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,a.value.galleryRaw]])]),l[46]||(l[46]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[l[41]||(l[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",Tu,[e("div",Eu,[(n(),d(xe,null,we(b,y=>e("label",{key:y,class:"inline-flex items-center gap-2 cursor-pointer"},[D(e("input",{type:"checkbox",value:y,"onUpdate:modelValue":l[16]||(l[16]=X=>a.value.amenities=X),class:"rounded cursor-pointer border-gray-300"},null,8,Au),[[St,a.value.amenities]]),e("span",Ru,R(y),1)])),64))])])]),e("div",ju,[e("div",{class:"flex items-center justify-between"},[l[42]||(l[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:m,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),d(xe,null,we(a.value.info,(y,X)=>(n(),d("div",{key:X,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",Mu,[e("span",Pu,R(X+1),1),l[43]||(l[43]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:oe=>re(X),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,Uu)]),D(e("input",{"onUpdate:modelValue":oe=>y.subject=oe,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Iu),[[Q,y.subject]]),D(e("textarea",{"onUpdate:modelValue":oe=>y.description=oe,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Fu),[[Q,y.description]])]))),128))]),e("div",Lu,[e("div",{class:"flex items-center justify-between"},[l[44]||(l[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:F,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),d(xe,null,we(a.value.faqs,(y,X)=>(n(),d("div",{key:X,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",Du,[e("span",zu,R(X+1),1),l[45]||(l[45]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:oe=>ae(X),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,Nu)]),D(e("input",{"onUpdate:modelValue":oe=>y.q=oe,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Vu),[[Q,y.q]]),D(e("textarea",{"onUpdate:modelValue":oe=>y.a=oe,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Bu),[[Q,y.a]])]))),128))])])):G("",!0),v.value&&p.value==="blank"?(n(),d("div",Hu,[l[47]||(l[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),D(e("textarea",{"onUpdate:modelValue":l[17]||(l[17]=y=>x.value=y),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm font-mono"},null,512),[[Q,x.value]])])):G("",!0),(p.value==="blank"||!v.value&&!w.value)&&p.value!=="page"?(n(),d("div",Ou,[l[48]||(l[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Content",-1)),((W=U.value)==null?void 0:W.type)==="html"&&(!v.value||p.value==="blank")?(n(),d("div",qu,[e("div",{ref_key:"gutterRef",ref:le,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(n(!0),d(xe,null,we(ie.value,y=>(n(),d("div",{key:y,class:"px-2 text-xs text-gray-500 leading-6"},R(y),1))),128))],512),D(e("textarea",{ref_key:"codeRef",ref:J,"onUpdate:modelValue":l[18]||(l[18]=y=>f.value.content=y),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:te},null,544),[[Q,f.value.content]])])):D((n(),d("textarea",{key:1,"onUpdate:modelValue":l[19]||(l[19]=y=>f.value.content=y),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512)),[[Q,f.value.content]])])):G("",!0),e("div",Wu,[B(L,{to:Pe.value,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:Se(()=>[...l[49]||(l[49]=[Ce("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:E.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[E.value?(n(),d("span",Ku,[B(k(He),{class:"size-4 animate-spin"}),Ce(" "+R(v.value?"Creating...":"Saving..."),1)])):(n(),d("span",Xu,R(v.value?"Create":"Save"),1))],8,Yu)])],32)])])])])}}},Gu={class:"relative flex min-h-screen w-full flex-col bg-gray-100"},Qu={class:"flex flex-1 items-center justify-center p-4 lg:p-6"},Ju={class:"flex w-full max-w-6xl justify-center"},Zu={class:"grid w-full grid-cols-1 gap-8 lg:gap-16"},ec={class:"flex flex-col justify-center"},tc={class:"mx-auto flex w-full max-w-md flex-col"},sc={class:"flex items-center gap-3 pb-8"},ac={class:"flex flex-col gap-2"},oc={class:"relative flex items-center"},lc={class:"flex flex-col gap-2"},nc={class:"relative flex items-center"},rc=["type"],ic=["disabled"],dc={key:0,class:"inline-flex items-center gap-2"},uc={key:1},cc={key:0,class:"text-sm text-red-600"},pc={__name:"Login",setup(t){const s=wt(),r=g(""),u=g(""),c=g(!1),v=g(""),p=g(!1),w=async()=>{var x,a;c.value=!0,v.value="";try{const I=(await z.post("/api/login",{username:r.value,password:u.value})).data.token;localStorage.setItem("adminToken",I),z.defaults.headers.common["X-Admin-Token"]=I,document.cookie=`X-Admin-Token=${I}; path=/; max-age=${60*60*24}; samesite=None; secure`,document.cookie=`adminToken=${I}; path=/; max-age=${60*60*24}; samesite=None; secure`,s.push("/")}catch($){v.value=((a=(x=$==null?void 0:$.response)==null?void 0:x.data)==null?void 0:a.error)||"Đăng nhập thất bại"}finally{c.value=!1}};return(x,a)=>(n(),d("div",Gu,[e("div",Qu,[e("div",Ju,[e("div",Zu,[e("div",ec,[e("div",tc,[e("div",sc,[B(k(Ds),{class:"size-8 text-blue-600"}),a[3]||(a[3]=e("span",{class:"text-xl font-semibold text-gray-800"},"VPS Manager",-1))]),a[7]||(a[7]=e("div",{class:"flex flex-col gap-1.5"},[e("p",{class:"text-gray-900 text-3xl font-bold tracking-tight"},"Đăng nhập vào Bảng điều khiển"),e("p",{class:"text-gray-500 text-base"},"Quản lý các máy chủ ảo của bạn một cách hiệu quả.")],-1)),e("form",{onSubmit:Ve(w,["prevent"]),class:"flex flex-col gap-5 pt-8"},[e("label",ac,[a[4]||(a[4]=e("p",{class:"text-gray-900 text-sm font-medium"},"Email / Tên người dùng",-1)),e("div",oc,[B(k(zs),{class:"absolute left-3.5 size-4 text-gray-400"}),D(e("input",{"onUpdate:modelValue":a[0]||(a[0]=$=>r.value=$),type:"text",required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-4",placeholder:"nhapemail@example.com"},null,512),[[Q,r.value]])])]),e("label",lc,[a[5]||(a[5]=e("p",{class:"text-gray-900 text-sm font-medium"},"Mật khẩu",-1)),e("div",nc,[B(k(Ns),{class:"absolute left-3.5 size-4 text-gray-400"}),D(e("input",{type:p.value?"text":"password","onUpdate:modelValue":a[1]||(a[1]=$=>u.value=$),required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-11",placeholder:"••••••••"},null,8,rc),[[Cs,u.value]]),e("button",{type:"button",onClick:a[2]||(a[2]=$=>p.value=!p.value),class:"absolute right-0 h-full px-3.5 text-gray-400 hover:text-gray-600"},[p.value?(n(),ue(k(Vs),{key:1,class:"size-5"})):(n(),ue(k(Nt),{key:0,class:"size-5"}))])])]),e("button",{type:"submit",disabled:c.value,class:"flex h-12 w-full items-center justify-center rounded-lg bg-blue-600 px-6 text-base font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500/50"},[c.value?(n(),d("span",dc,[B(k(He),{class:"size-4 animate-spin"}),a[6]||(a[6]=Ce(" Đang đăng nhập... ",-1))])):(n(),d("span",uc,"Đăng Nhập"))],8,ic),v.value?(n(),d("p",cc,R(v.value),1)):G("",!0)],32)])])])])]),a[8]||(a[8]=e("footer",{class:"flex justify-center p-4"},[e("p",{class:"text-sm text-gray-500"},"© 2024 VPS Manager. Đã đăng ký bản quyền.")],-1))]))}},mc={class:"min-h-screen bg-gray-100"},gc={class:"max-w-3xl mx-auto py-6 sm:px-6 lg:px-8"},vc={class:"px-4 py-6 sm:px-0"},fc={class:"bg-white rounded-lg shadow p-6"},bc={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yc={class:"flex justify-end gap-3 mt-6"},hc=["disabled"],xc={key:0,class:"inline-flex items-center gap-2"},wc={key:1},_c={__name:"AdminProfile",setup(t){const s=wt(),r=g({ADMIN_NAME:"",ADMIN_EMAIL:"",ADMIN_USERNAME:"",ADMIN_PASSWORD:""}),u=g(!1),c=g(""),v=g("success"),p=async()=>{const $=(await z.get("/api/settings")).data||{};r.value.ADMIN_NAME=$.ADMIN_NAME||"",r.value.ADMIN_EMAIL=$.ADMIN_EMAIL||"",r.value.ADMIN_USERNAME=$.ADMIN_USERNAME||"",r.value.ADMIN_PASSWORD=$.ADMIN_PASSWORD||""},w=async()=>{var a,$;u.value=!0,c.value="";try{await z.put("/api/settings",r.value),c.value="Đã lưu, vui lòng đăng nhập lại",v.value="success",localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"],s.push("/login")}catch(I){c.value=(($=(a=I==null?void 0:I.response)==null?void 0:a.data)==null?void 0:$.error)||"Lưu thất bại",v.value="error"}finally{u.value=!1}},x=()=>{localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"],s.push("/login")};return et(p),(a,$)=>(n(),d("div",mc,[e("div",gc,[e("div",vc,[e("div",fc,[$[9]||($[9]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Thông tin quản trị",-1)),e("form",{onSubmit:Ve(w,["prevent"])},[e("div",bc,[e("div",null,[$[4]||($[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên",-1)),D(e("input",{"onUpdate:modelValue":$[0]||($[0]=I=>r.value.ADMIN_NAME=I),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_NAME]])]),e("div",null,[$[5]||($[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),D(e("input",{"onUpdate:modelValue":$[1]||($[1]=I=>r.value.ADMIN_EMAIL=I),type:"email",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_EMAIL]])]),e("div",null,[$[6]||($[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tài khoản",-1)),D(e("input",{"onUpdate:modelValue":$[2]||($[2]=I=>r.value.ADMIN_USERNAME=I),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_USERNAME]])]),e("div",null,[$[7]||($[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Mật khẩu",-1)),D(e("input",{"onUpdate:modelValue":$[3]||($[3]=I=>r.value.ADMIN_PASSWORD=I),type:"password",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,r.value.ADMIN_PASSWORD]])])]),e("div",yc,[e("button",{type:"button",onClick:x,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Logout"),e("button",{type:"submit",disabled:u.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[u.value?(n(),d("span",xc,[B(k(He),{class:"size-4 animate-spin"}),$[8]||($[8]=Ce(" Đang lưu... ",-1))])):(n(),d("span",wc,"Lưu"))],8,hc)]),c.value?(n(),d("p",{key:0,class:Ie([v.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},R(c.value),3)):G("",!0)],32)])])])]))}},kc={class:"min-h-screen bg-gray-100"},$c={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Sc={class:"px-4 py-6 sm:px-0"},Cc={class:"flex justify-between items-center mb-6"},Tc={class:"text-3xl font-bold text-gray-900"},Ec={class:"bg-white shadow rounded-lg p-6"},Ac={class:"space-y-4"},Rc={class:"flex justify-between items-start"},jc={class:"font-medium"},Mc={class:"text-sm text-gray-500"},Pc={class:"mt-2 flex items-center space-x-4 text-sm"},Uc=["title"],Ic={class:"flex gap-2"},Fc=["onClick","disabled"],Lc=["onClick","disabled"],Dc=["onClick","disabled"],zc=["href"],Nc=["onClick","disabled"],Vc={key:0,class:"text-center text-gray-500"},Bc={__name:"SubdomainsManagement",setup(t){const r=pt().params.websiteId,u=g(""),c=g([]),v=g([]),p=g([]),w=g([]),x=g([]),a=async()=>{const O=await z.get(`/api/websites/${r}`);u.value=O.data.domain;const N=(await z.get("/api/websites")).data||[];c.value=N.filter(_=>_.domain.endsWith("."+u.value))};et(a);const $=async O=>{var h,N,_,b;try{v.value=[...v.value,O.id],await z.post(`/api/websites/${O.id}/deploy`);let f=0;for(;f<60&&(await new Promise(T=>setTimeout(T,2e3)),(await z.get(`/api/websites/${O.id}`)).data.status==="deploying");)f++;await a(),alert(`✓ Deploy thành công cho ${O.domain}`)}catch(f){const U=((N=(h=f==null?void 0:f.response)==null?void 0:h.data)==null?void 0:N.message)||((b=(_=f==null?void 0:f.response)==null?void 0:_.data)==null?void 0:b.error)||"Deploy thất bại";alert(`✗ ${U}`)}finally{v.value=v.value.filter(f=>f!==O.id)}},I=async O=>{if(confirm(`Delete subdomain ${O.domain}?`))try{p.value=[...p.value,O.id],await z.delete(`/api/websites/${O.id}`),await a()}finally{p.value=p.value.filter(h=>h!==O.id)}},ee=async O=>{var h,N,_,b;try{w.value=[...w.value,O.id],await z.post(`/api/websites/${O.id}/ssl`),await a(),alert(`✓ SSL đã được cài đặt thành công cho ${O.domain}`)}catch(f){const U=((N=(h=f==null?void 0:f.response)==null?void 0:h.data)==null?void 0:N.message)||((b=(_=f==null?void 0:f.response)==null?void 0:_.data)==null?void 0:b.error)||"Cài đặt SSL thất bại";alert(`✗ ${U}`)}finally{w.value=w.value.filter(f=>f!==O.id)}},i=async O=>{if(confirm(`Deactivate subdomain ${O.domain}?`))try{x.value=[...x.value,O.id],await z.post(`/api/websites/${O.id}/deactivate`),await a()}finally{x.value=x.value.filter(h=>h!==O.id)}};return(O,h)=>{const N=nt("router-link");return n(),d("div",kc,[e("div",$c,[e("div",Sc,[e("div",Cc,[e("h1",Tc,"Subdomains of "+R(u.value),1),B(N,{to:`/websites/${k(r)}/subdomains/new`,class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"},{default:Se(()=>[...h[0]||(h[0]=[Ce("Create Subdomain",-1)])]),_:1},8,["to"])]),e("div",Ec,[e("div",Ac,[(n(!0),d(xe,null,we(c.value,_=>{var b;return n(),d("div",{key:_.id,class:"border rounded-lg p-4"},[e("div",Rc,[e("div",null,[e("h4",jc,R(_.domain),1),e("p",Mc,"Server: "+R(((b=_.vps_server)==null?void 0:b.name)||"N/A"),1),e("div",Pc,[e("span",{class:Ie(["inline-flex items-center",{"text-blue-600":_.status==="deploying","text-green-600":_.status==="deployed","text-gray-600":_.status==="pending"||_.status==="draft","text-orange-600":_.status==="suspended","text-red-600":_.status==="error"}]),title:_.status},[_.status==="deploying"?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):_.status==="deployed"?(n(),ue(k(Ct),{key:1,class:"size-4"})):_.status==="pending"||_.status==="draft"?(n(),ue(k(jt),{key:2,class:"size-4"})):_.status==="suspended"?(n(),ue(k(Mt),{key:3,class:"size-4"})):(n(),ue(k(Tt),{key:4,class:"size-4"}))],10,Uc),e("span",{class:Ie(["inline-flex items-center gap-1",_.ssl_enabled?"text-green-600":"text-gray-400"])},[_.ssl_enabled?(n(),ue(k(xt),{key:0,class:"size-4"})):(n(),ue(k(cs),{key:1,class:"size-4"}))],2)])]),e("div",Ic,[B(N,{to:`/websites/${_.id}/pages`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:Se(()=>[B(k(ps),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:f=>$(_),disabled:v.value.includes(_.id)||_.status==="deployed",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[v.value.includes(_.id)?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):(n(),ue(k(ms),{key:1,class:"size-4"}))],8,Fc),_.status==="deployed"?(n(),d("button",{key:0,onClick:f=>ee(_),disabled:w.value.includes(_.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[w.value.includes(_.id)?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):(n(),ue(k(xt),{key:1,class:"size-4"}))],8,Lc)):G("",!0),_.status==="deployed"||_.status==="error"?(n(),d("button",{key:1,onClick:f=>i(_),disabled:x.value.includes(_.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[x.value.includes(_.id)?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):(n(),ue(k(Mt),{key:1,class:"size-4"}))],8,Dc)):G("",!0),e("a",{href:(_.ssl_enabled?"https://":"http://")+_.domain,target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[B(k(gt),{class:"size-4"})],8,zc),e("button",{onClick:f=>I(_),disabled:p.value.includes(_.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[p.value.includes(_.id)?(n(),ue(k(He),{key:0,class:"size-4 animate-spin"})):(n(),ue(k(vt),{key:1,class:"size-4"}))],8,Nc)])])])}),128)),c.value.length===0?(n(),d("div",Vc,"No subdomains found")):G("",!0)])])])])])}}},Hc="modulepreload",Oc=function(t){return"/"+t},os={},it=function(s,r,u){let c=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),w=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));c=Promise.allSettled(r.map(x=>{if(x=Oc(x),x in os)return;os[x]=!0;const a=x.endsWith(".css"),$=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${$}`))return;const I=document.createElement("link");if(I.rel=a?"stylesheet":Hc,a||(I.as="script"),I.crossOrigin="",I.href=x,w&&I.setAttribute("nonce",w),document.head.appendChild(I),a)return new Promise((ee,i)=>{I.addEventListener("load",ee),I.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${x}`)))})}))}function v(p){const w=new Event("vite:preloadError",{cancelable:!0});if(w.payload=p,window.dispatchEvent(w),!w.defaultPrevented)throw p}return c.then(p=>{for(const w of p||[])w.status==="rejected"&&v(w.reason);return s().catch(v)})},qc={class:"min-h-screen bg-gray-100"},Wc={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},Yc={class:"px-4 py-6 sm:px-0"},Kc={class:"bg-white rounded-lg shadow p-6"},Xc={class:"text-sm text-gray-600 mb-4"},Gc={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Qc={class:"text-xs text-gray-500 mt-1"},Jc={class:"md:col-span-2"},Zc=["value"],ep={class:"mt-4"},tp={key:0,class:"mt-4"},sp={class:"flex items-center justify-between mb-2"},ap={class:"flex items-center gap-3"},op={class:"border border-gray-300 rounded-md p-3 max-h-48 overflow-auto"},lp={key:0,class:"text-sm text-gray-500"},np={key:1,class:"space-y-2"},rp=["value","onChange"],ip={class:"mt-6"},dp={key:0,class:"mt-4 space-y-4"},up={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cp={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},pp={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},mp=["value"],gp={class:"text-sm"},vp={class:"space-y-3"},fp={class:"flex items-center gap-2"},bp={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},yp=["onClick"],hp=["onUpdate:modelValue"],xp=["onUpdate:modelValue"],wp={class:"space-y-3"},_p={class:"flex items-center gap-2"},kp={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},$p=["onClick"],Sp=["onUpdate:modelValue"],Cp=["onUpdate:modelValue"],Tp={key:1,class:"mt-4"},Ep={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Ap={class:"flex justify-end gap-3 mt-6"},Rp=["disabled"],jp={key:0,class:"inline-flex items-center gap-2"},Mp={key:1},Pp={__name:"SubdomainEdit",setup(t){const s=pt(),r=wt(),u=s.params.websiteId,c=g(""),v=g(null),p=g([]),w=g([]),x=g(!1);g(""),g(""),g(null),g(!1);const a=g([]),$=g({sub:"",vps_server_id:""}),I=g("blank"),ee=g(""),i=g({title:"",location:"",phone:"",galleryRaw:"",about1:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),O=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],h=g(null),N=g(null),_=g(!1),b=g(""),f=g(""),U=ne=>ne.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"d").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),T=qe(()=>U($.value.sub||"")),S=qe(()=>(T.value?`${T.value}.`:"")+c.value),E=qe(()=>{const C=(ee.value||"").split(`
`).length;return C>0?C:1}),le=qe(()=>{const ne=[...w.value||[]],C=new Map(ne.map($e=>[String($e.id),$e])),Z=$e=>$e.sort((Me,F)=>(Me.name||"").localeCompare(F.name||"")),j=$e=>ne.filter(Me=>String(Me.parent_id)===String($e)),q=$e=>!$e.parent_id||!C.has(String($e.parent_id))||String($e.parent_id)===String($e.id),me=Z(ne.filter(q)),ke=[],pe=($e,Me)=>{ke.push({...$e,depth:Me}),Z(j($e.id)).forEach(F=>pe(F,Me+1))};return me.forEach($e=>pe($e,0)),ke}),J=ne=>{if(a.value.includes(ne)){const C=w.value.find(Z=>Z.id===ne);if(C&&C.parent_id){const Z=j=>{if(!j)return;a.value.includes(j)||a.value.push(j);const q=w.value.find(me=>me.id===j);q&&q.parent_id&&Z(q.parent_id)};Z(C.parent_id)}}},K=()=>{h.value&&N.value&&(h.value.scrollTop=N.value.scrollTop)},_e=async()=>{const ne=(i.value.galleryRaw||"").split(`
`).map(m=>m.trim()).filter(Boolean),C=(i.value.title||"").trim(),Z=["Home","Stays",C];let q=(await z.get("/templates/hotel-detail-1/index.html")).data||"",me="",ke="";try{me=(await z.get("/templates/_shared/header.html")).data||""}catch{}try{ke=(await z.get("/templates/_shared/footer.html")).data||""}catch{}me&&(q=q.replace(/<header[^>]*>[\s\S]*?<\/header>/i,me)),ke&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(q)?q=q.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,ke):/<\/body>/i.test(q)?q=q.replace(/<\/body>/i,ke+"</body>"):q+=`
`+ke);const pe=i.value.amenities||[],$e=ne.map(m=>String(m).replace(/<\/script>/gi,"<\\/script>")),Me={title:C||"Hotel",location:i.value.location||"",location_text:i.value.location||"",phone:i.value.phone||"",about1:i.value.about1||"",amenities:pe,faqs:i.value.faqs||[],info:i.value.info||[],gallery:$e,breadcrumb_items:Z.filter(Boolean)},F=`<script type="application/json" id="page-data">${JSON.stringify(Me)}<\/script>`;return q=q.replace("{{GALLERY_DATA_SCRIPT}}",F),q=q.replace(/<title>[^<]*<\/title>/i,`<title>${Me.title}</title>`),q},Te=()=>{i.value.faqs=[...i.value.faqs||[],{q:"",a:""}]},be=()=>{i.value.info=[...i.value.info||[],{subject:"",description:""}]},Ee=ne=>{i.value.faqs=(i.value.faqs||[]).filter((C,Z)=>Z!==ne)},Pe=ne=>{i.value.info=(i.value.info||[]).filter((C,Z)=>Z!==ne)},ze=async()=>{var ne,C,Z,j,q,me,ke,pe,$e,Me,F,m,ae,re,ie;_.value=!0,b.value="";try{const te="Stays",fe=$.value.vps_server_id;if(!fe){b.value="Chưa chọn VPS Server",f.value="error",_.value=!1;return}const A={domain:S.value,type:((ne=v.value)==null?void 0:ne.type)||"html",vps_server_id:fe};let M;try{M=(await z.post("/api/websites",A)).data}catch(y){const X=((Z=(C=y==null?void 0:y.response)==null?void 0:C.data)==null?void 0:Z.message)||((q=(j=y==null?void 0:y.response)==null?void 0:j.data)==null?void 0:q.error)||"";if(((me=y==null?void 0:y.response)==null?void 0:me.status)===409||/domain/i.test(X)){if(M=((await z.get("/api/websites")).data||[]).find(Ne=>Ne.domain===S.value),!M)throw y}else throw y}let l,L=null;if(I.value==="blank")l=ee.value;else{l=await _e();const y=(i.value.galleryRaw||"").split(`
`).map(X=>X.trim()).filter(Boolean);L={title:(i.value.title||"").trim()||"Hotel",location:i.value.location||"",location_text:i.value.location||"",phone:i.value.phone||"",about1:i.value.about1||"",amenities:i.value.amenities||[],faqs:i.value.faqs||[],info:i.value.info||[],gallery:y,breadcrumb_items:["Home","Stays",(i.value.title||"").trim()].filter(Boolean)}}const W={path:"/",filename:"index.html",title:I.value==="blank"?i.value.title||"":i.value.title,content:l};I.value!=="blank"&&(W.template_type=I.value,W.template_data=L),a.value.length>0&&(W.folder_ids=a.value);try{await z.post(`/api/websites/${M.id}/pages`,W)}catch(y){const X=((pe=(ke=y==null?void 0:y.response)==null?void 0:ke.data)==null?void 0:pe.message)||((Me=($e=y==null?void 0:y.response)==null?void 0:$e.data)==null?void 0:Me.error)||"";if(((F=y==null?void 0:y.response)==null?void 0:F.status)===409||/path/i.test(X)){const Ne=((await z.get(`/api/websites/${M.id}/pages`)).data||[]).find(se=>(se.path||"/")==="/"&&(se.filename||"").toLowerCase()==="index.html");Ne&&await z.put(`/api/pages/${Ne.id}`,W)}else if(/Failed to write page/i.test(X)){const oe=`subdomainDraft:${M.id}`;localStorage.setItem(oe,JSON.stringify(W))}}b.value="Subdomain created. Deploy to go online.",f.value="success",r.push(`/websites/${u}/subdomains`)}catch(te){b.value=((ae=(m=te==null?void 0:te.response)==null?void 0:m.data)==null?void 0:ae.message)||((ie=(re=te==null?void 0:te.response)==null?void 0:re.data)==null?void 0:ie.error)||"Failed to create subdomain",f.value="error"}finally{_.value=!1}},Fe=async()=>{var Z;const ne=await z.get(`/api/websites/${u}`);v.value=ne.data,c.value=v.value.domain;const C=await z.get("/api/vps");p.value=C.data.filter(j=>j.status==="active"),(Z=v.value)!=null&&Z.vps_server_id&&($.value.vps_server_id=v.value.vps_server_id);try{const j=await z.get(`/api/websites/${u}/folders`);w.value=j.data||[]}catch(j){console.error("Failed to load folders:",j)}},We=async()=>{if(window.tinymce)return;const{default:ne}=await it(async()=>{const{default:C}=await import("./tinymce.js").then(Z=>Z.t);return{default:C}},[]);await it(()=>import("./index.js").then(C=>C.i),[]),await it(()=>import("./index2.js").then(C=>C.i),[]),await it(()=>import("./model.js"),[]),await it(()=>import("./skin.js"),[]),await it(()=>import("./content.js"),[]),await it(()=>import("./content2.js"),[]),await it(()=>import("./index3.js").then(C=>C.i),[]),await it(()=>import("./index4.js").then(C=>C.i),[]),window.tinymce=ne},de=async()=>{await We(),await zt();const ne=document.getElementById("about1-editor-sub");ne&&(ne.value=i.value.about1||"",window.tinymce.init({selector:"#about1-editor-sub",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:C=>{C.on("Change KeyUp SetContent",()=>{i.value.about1=C.getContent()||""})}}).then(C=>{const Z=C&&C[0];Z&&(i.value.about1||"").trim()&&Z.setContent(i.value.about1)}))};return et(async()=>{await Fe(),I.value==="hotel-detail-1"&&await de()}),kt(I,async ne=>{if(ne==="hotel-detail-1")await de();else if(window.tinymce){const C=window.tinymce.get("about1-editor-sub");C&&C.remove()}}),Ht(()=>{if(window.tinymce){const ne=window.tinymce.get("about1-editor-sub");ne&&ne.remove()}}),(ne,C)=>{const Z=nt("router-link");return n(),d("div",qc,[e("div",Wc,[e("div",Yc,[e("div",Kc,[C[32]||(C[32]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Create Subdomain",-1)),e("p",Xc,"Parent: "+R(c.value),1),e("form",{onSubmit:Ve(ze,["prevent"])},[e("div",Gc,[e("div",null,[C[11]||(C[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Subdomain",-1)),D(e("input",{"onUpdate:modelValue":C[0]||(C[0]=j=>$.value.sub=j),type:"text",required:"",placeholder:"hotel",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,$.value.sub]]),e("p",Qc,"Sẽ tạo domain: "+R(S.value),1)]),e("div",Jc,[C[13]||(C[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),D(e("select",{"onUpdate:modelValue":C[1]||(C[1]=j=>$.value.vps_server_id=j),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[C[12]||(C[12]=e("option",{value:""},"Select VPS Server",-1)),(n(!0),d(xe,null,we(p.value,j=>(n(),d("option",{value:j.id,key:j.id},R(j.name)+" ("+R(j.ip_address)+")",9,Zc))),128))],512),[[Xe,$.value.vps_server_id]])])]),e("div",ep,[C[15]||(C[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),D(e("select",{"onUpdate:modelValue":C[2]||(C[2]=j=>I.value=j),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...C[14]||(C[14]=[e("option",{value:"blank"},"HTML mặc định",-1),e("option",{value:"hotel-detail-1"},"Hotel Detail 1",-1)])],512),[[Xe,I.value]])]),I.value==="hotel-detail-1"?(n(),d("div",tp,[e("div",sp,[C[17]||(C[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Danh mục (chọn nhiều)",-1)),e("div",ap,[B(Z,{to:`/websites/${k(u)}/folders`,class:"text-sm text-primary"},{default:Se(()=>[...C[16]||(C[16]=[Ce("Quản lý danh mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:C[3]||(C[3]=j=>x.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",op,[w.value.length===0?(n(),d("div",lp,"Không có danh mục")):(n(),d("div",np,[(n(!0),d(xe,null,we(le.value,j=>(n(),d("label",{key:j.id,class:"flex items-center gap-2 cursor-pointer"},[D(e("input",{type:"checkbox",value:j.id,"onUpdate:modelValue":C[4]||(C[4]=q=>a.value=q),onChange:q=>J(j.id),class:"rounded cursor-pointer"},null,40,rp),[[St,a.value]]),e("span",{class:"text-sm",style:lt({paddingLeft:(j.depth>0?j.depth*16:0)+"px"})},R("↳ ".repeat(j.depth))+R(j.name),5)]))),128))]))])])):G("",!0),e("div",ip,[C[29]||(C[29]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Nội dung template",-1)),I.value==="hotel-detail-1"?(n(),d("div",dp,[e("div",up,[e("div",null,[C[18]||(C[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề khách sạn",-1)),D(e("input",{"onUpdate:modelValue":C[5]||(C[5]=j=>i.value.title=j),type:"text",placeholder:"Azure Breeze Resort",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.title]])]),e("div",null,[C[19]||(C[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),D(e("input",{"onUpdate:modelValue":C[6]||(C[6]=j=>i.value.location=j),type:"text",placeholder:"Sunny Isles, Florida, United States",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.location]])]),e("div",null,[C[20]||(C[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),D(e("input",{"onUpdate:modelValue":C[7]||(C[7]=j=>i.value.phone=j),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.phone]])])]),e("div",null,[C[21]||(C[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),D(e("textarea",{"onUpdate:modelValue":C[8]||(C[8]=j=>i.value.galleryRaw=j),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[Q,i.value.galleryRaw]])]),C[27]||(C[27]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor-sub",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[C[22]||(C[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",cp,[e("div",pp,[(n(),d(xe,null,we(O,j=>e("label",{key:j,class:"inline-flex items-center gap-2 cursor-pointer"},[D(e("input",{type:"checkbox",value:j,"onUpdate:modelValue":C[9]||(C[9]=q=>i.value.amenities=q),class:"rounded cursor-pointer border-gray-300"},null,8,mp),[[St,i.value.amenities]]),e("span",gp,R(j),1)])),64))])])]),e("div",vp,[e("div",{class:"flex items-center justify-between"},[C[23]||(C[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:be,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),d(xe,null,we(i.value.info,(j,q)=>(n(),d("div",{key:q,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",fp,[e("span",bp,R(q+1),1),C[24]||(C[24]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:me=>Pe(q),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,yp)]),D(e("input",{"onUpdate:modelValue":me=>j.subject=me,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,hp),[[Q,j.subject]]),D(e("textarea",{"onUpdate:modelValue":me=>j.description=me,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,xp),[[Q,j.description]])]))),128))]),e("div",wp,[e("div",{class:"flex items-center justify-between"},[C[25]||(C[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:Te,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(n(!0),d(xe,null,we(i.value.faqs,(j,q)=>(n(),d("div",{key:q,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",_p,[e("span",kp,R(q+1),1),C[26]||(C[26]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:me=>Ee(q),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,$p)]),D(e("input",{"onUpdate:modelValue":me=>j.q=me,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Sp),[[Q,j.q]]),D(e("textarea",{"onUpdate:modelValue":me=>j.a=me,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Cp),[[Q,j.a]])]))),128))])])):I.value==="blank"?(n(),d("div",Tp,[C[28]||(C[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),e("div",Ep,[e("div",{ref_key:"gutterRef",ref:h,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(n(!0),d(xe,null,we(E.value,j=>(n(),d("div",{key:j,class:"px-2 text-xs text-gray-500 leading-6"},R(j),1))),128))],512),D(e("textarea",{ref_key:"codeRef",ref:N,"onUpdate:modelValue":C[10]||(C[10]=j=>ee.value=j),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:K},null,544),[[Q,ee.value]])])])):G("",!0)]),e("div",Ap,[B(Z,{to:`/websites/${k(u)}/subdomains`,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:Se(()=>[...C[30]||(C[30]=[Ce("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:_.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[_.value?(n(),d("span",jp,[B(k(He),{class:"size-4 animate-spin"}),C[31]||(C[31]=Ce(" Creating... ",-1))])):(n(),d("span",Mp,"Create Subdomain"))],8,Rp)]),b.value?(n(),d("p",{key:1,class:Ie([f.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},R(b.value),3)):G("",!0)],32)])])])])}}},Up=[{path:"/login",name:"Login",component:pc},{path:"/",name:"Dashboard",component:ba},{path:"/vps",name:"VpsManagement",component:Ka},{path:"/websites",name:"WebsiteManagement",component:sl},{path:"/websites/:websiteId/settings",name:"WebsiteSettings",component:Hn},{path:"/websites/:websiteId/pages",name:"PagesManagement",component:Xd},{path:"/websites/:websiteId/pages/new",name:"PageCreate",component:as},{path:"/websites/:websiteId/pages/:pageId",name:"PageEdit",component:as},{path:"/websites/:websiteId/folders",name:"FoldersManagement",component:qi},{path:"/websites/:websiteId/folders/new",name:"FolderCreate",component:ss},{path:"/websites/:websiteId/folders/:folderId",name:"FolderEdit",component:ss},{path:"/websites/:websiteId/subdomains",name:"SubdomainsManagement",component:Bc},{path:"/websites/:websiteId/subdomains/new",name:"SubdomainEdit",component:Pp},{path:"/profile",name:"AdminProfile",component:_c},{path:"/monitoring",name:"Monitoring",component:gi},{path:"/settings",name:"Settings",component:Td}],Pt=Ts({history:Es(),routes:Up}),ls=localStorage.getItem("adminToken");ls&&(z.defaults.headers.common["X-Admin-Token"]=ls);z.interceptors.response.use(t=>t,t=>{var r;if(((r=t==null?void 0:t.response)==null?void 0:r.status)===401){try{localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"]}catch{}Pt.currentRoute.value.path!=="/login"&&Pt.push("/login")}return Promise.reject(t)});Pt.beforeEach((t,s,r)=>{const u=!!localStorage.getItem("adminToken");if(!u&&t.path!=="/login")return r("/login");if(u&&t.path==="/login")return r("/");r()});As(Js).use(Pt).mount("#app");export{vs as g};
