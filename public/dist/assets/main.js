import{u as pt,a as ht,r as nt,c as i,o as a,b as C,d as J,e,f as xt,w as je,n as Me,g as z,i as m,j as Ze,t as A,k as W,F as fe,l as be,m as Be,p as N,v as oe,q as We,s as de,x as we,y as Ht,z as ot,A as Ie,B as _t,C as gt,D as rs,E as zt,G as Ts,H as js,I as Es,J as Fs}from"./vendor.js";import{L as is,S as ds,G as vt,B as us,U as As,a as cs,b as Ls,c as mt,C as Ct,A as St,d as At,P as ps,T as ct,e as Re,f as kt,g as ms,F as gs,h as Rs,i as Nt,R as Is,I as Pt,j as Ut,k as Ms,l as Ps,m as Us,E as Vt,n as Jt,o as Ds,p as vs,q as zs,r as Ns,s as Vs,t as Os}from"./icons.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))g(v);new MutationObserver(v=>{for(const y of v)if(y.type==="childList")for(const b of y.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&g(b)}).observe(document,{childList:!0,subtree:!0});function c(v){const y={};return v.integrity&&(y.integrity=v.integrity),v.referrerPolicy&&(y.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?y.credentials="include":v.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function g(v){if(v.ep)return;v.ep=!0;const y=c(v);fetch(v.href,y)}})();const Bs={id:"app"},Hs={key:0,class:"min-h-screen"},qs={key:1,class:"relative flex min-h-screen w-full bg-background-light"},Ws={class:"flex w-64 flex-col border-r border-gray-200 bg-white p-4"},Ys={class:"flex flex-col gap-2"},Ks={class:"flex-1"},Xs={class:"flex items-center justify-between border-b border-gray-200 px-10 py-4 bg-white"},Js={class:"flex items-center gap-4"},Gs={class:"h-10 w-10 rounded-lg border border-gray-300 bg-gray-50 text-gray-800"},Qs={class:"p-6 lg:p-10"},Zs={__name:"App",setup(t){const s=pt(),c=ht(),g=()=>{localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"],c.push("/login")};return(v,y)=>{const b=nt("router-view"),T=nt("router-link");return a(),i("div",Bs,[C(s).path==="/login"?(a(),i("div",Hs,[J(b)])):(a(),i("div",qs,[e("aside",Ws,[y[6]||(y[6]=xt('<div class="flex items-center gap-3 mb-4"><div class="rounded-full size-10 bg-primary/10"></div><div class="flex flex-col"><h1 class="text-gray-900 text-base font-medium">Admin User</h1><p class="text-gray-500 text-sm">admin@vps.com</p></div></div>',1)),e("nav",Ys,[J(T,{to:"/",class:Me(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":C(s).path==="/","hover:bg-gray-100 text-gray-800":C(s).path!=="/"}])},{default:je(()=>[J(C(is),{class:"size-4"}),y[0]||(y[0]=e("span",null,"Dashboard",-1))]),_:1},8,["class"]),J(T,{to:"/vps",class:Me(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":C(s).path.startsWith("/vps"),"hover:bg-gray-100 text-gray-800":!C(s).path.startsWith("/vps")}])},{default:je(()=>[J(C(ds),{class:"size-4"}),y[1]||(y[1]=e("span",null,"Servers",-1))]),_:1},8,["class"]),J(T,{to:"/websites",class:Me(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":C(s).path.startsWith("/websites"),"hover:bg-gray-100 text-gray-800":!C(s).path.startsWith("/websites")}])},{default:je(()=>[J(C(vt),{class:"size-4"}),y[2]||(y[2]=e("span",null,"Websites",-1))]),_:1},8,["class"]),J(T,{to:"/monitoring",class:Me(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":C(s).path.startsWith("/monitoring"),"hover:bg-gray-100 text-gray-800":!C(s).path.startsWith("/monitoring")}])},{default:je(()=>[J(C(us),{class:"size-4"}),y[3]||(y[3]=e("span",null,"Monitoring",-1))]),_:1},8,["class"]),J(T,{to:"/profile",class:Me(["flex items-center gap-3 px-3 py-2 rounded-lg",{"bg-primary/10 text-primary":C(s).path.startsWith("/profile"),"hover:bg-gray-100 text-gray-800":!C(s).path.startsWith("/profile")}])},{default:je(()=>[J(C(As),{class:"size-4"}),y[4]||(y[4]=e("span",null,"Profile",-1))]),_:1},8,["class"]),J(T,{to:"/settings",class:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-800 hover:bg-gray-100"},{default:je(()=>[J(C(cs),{class:"size-4"}),y[5]||(y[5]=e("span",null,"Settings",-1))]),_:1})])]),e("main",Ks,[e("header",Xs,[y[8]||(y[8]=e("h2",{class:"text-lg font-bold"},"Tổng quan Hệ thống",-1)),e("div",Js,[y[7]||(y[7]=e("input",{class:"form-input h-10 w-64 rounded-lg border border-gray-300 bg-gray-50 px-4",placeholder:"Search"},null,-1)),e("button",Gs,[J(C(Ls),{class:"mx-auto size-5"})]),e("button",{onClick:g,class:"h-10 px-3 rounded-lg border border-gray-300 bg-white text-red-600"}," Logout ")])]),e("div",Qs,[J(b)])])]))])}}},ea={class:"min-h-screen"},ta={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},sa={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},aa={class:"p-6 bg-white border-b border-gray-200"},la={class:"rounded-xl bg-gray-50 p-6 border border-gray-200"},oa={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},na={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},ra={class:"flex items-center justify-between text-gray-500"},ia={class:"text-gray-900 tracking-tight text-3xl font-bold"},da={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},ua={class:"flex items-center justify-between text-gray-500"},ca={class:"text-gray-900 tracking-tight text-3xl font-bold"},pa={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},ma={class:"flex items-center justify-between text-gray-500"},ga={class:"text-red-500 tracking-tight text-3xl font-bold"},va={class:"flex flex-col gap-2 rounded-xl p-6 border border-gray-200 bg-white"},fa={class:"flex items-center justify-between text-gray-500"},ba={class:"text-gray-900 tracking-tight text-3xl font-bold"},ya={__name:"Dashboard",setup(t){const s=m({vpsServers:0,websites:0,onlineWebsites:0,sslEnabled:0});return Ze(async()=>{try{const[g,v]=await Promise.all([z.get("/api/vps"),z.get("/api/websites")]),y=Array.isArray(g.data)?g.data:[],b=Array.isArray(v.data)?v.data:[];s.value.vpsServers=y.length,s.value.websites=b.length,s.value.onlineWebsites=b.filter(T=>T.status==="deployed").length,s.value.sslEnabled=b.filter(T=>T.ssl_enabled).length}catch(g){console.error("Failed to fetch stats:",g)}}),(g,v)=>(a(),i("div",ea,[e("main",null,[e("div",ta,[e("div",sa,[e("div",aa,[v[4]||(v[4]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Tổng quan Hệ thống",-1)),e("div",la,[e("div",oa,[e("div",na,[e("div",ra,[v[0]||(v[0]=e("p",{class:"text-base font-medium text-gray-800"},"Máy chủ VPS",-1)),J(C(ds),{class:"h-6 w-6 text-gray-600"})]),e("p",ia,A(s.value.vpsServers),1)]),e("div",da,[e("div",ua,[v[1]||(v[1]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web",-1)),J(C(vt),{class:"h-6 w-6 text-gray-600"})]),e("p",ca,A(s.value.websites),1)]),e("div",pa,[e("div",ma,[v[2]||(v[2]=e("p",{class:"text-base font-medium text-gray-800"},"Trang web trực tuyến",-1)),J(C(us),{class:"h-6 w-6 text-red-500"})]),e("p",ga,A(s.value.onlineWebsites),1)]),e("div",va,[e("div",fa,[v[3]||(v[3]=e("p",{class:"text-base font-medium text-gray-800"},"SSL được bật",-1)),J(C(mt),{class:"h-6 w-6 text-gray-600"})]),e("p",ba,A(s.value.sslEnabled),1)])])]),v[5]||(v[5]=xt('<h2 class="text-gray-900 text-[22px] font-bold tracking-[-0.015em] pb-3 pt-10">Hoạt động gần đây</h2><div class="rounded-xl border border-gray-200 bg-white overflow-hidden"><table class="w-full"><thead><tr class="bg-gray-50"><th class="px-6 py-4 text-left text-gray-600 w-[15%] text-sm font-medium">Hoạt động</th><th class="px-6 py-4 text-left text-gray-600 w-[20%] text-sm font-medium">Người dùng</th><th class="px-6 py-4 text-left text-gray-600 w-[40%] text-sm font-medium">Đối tượng</th><th class="px-6 py-4 text-left text-gray-600 w-[25%] text-sm font-medium">Thời gian</th></tr></thead><tbody class="divide-y divide-gray-200"><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-700">Tạo</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">admin</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;web-server-01&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">5 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700">Thêm</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">hệ thống</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">trang web &#39;example.com&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">15 phút trước</td></tr><tr><td class="h-[72px] px-6 py-4 w-[15%] text-sm"><span class="inline-flex items-center rounded-full bg-yellow-100 px-3 py-1 text-xs font-medium text-yellow-800">Khởi động lại</span></td><td class="h-[72px] px-6 py-4 w-[20%] text-gray-600 text-sm">dev_user</td><td class="h-[72px] px-6 py-4 w-[40%] text-gray-600 text-sm">máy chủ &#39;db-server-02&#39;</td><td class="h-[72px] px-6 py-4 w-[25%] text-gray-600 text-sm">1 giờ trước</td></tr></tbody></table></div>',2))])])])])]))}},ha={class:"min-h-screen bg-gray-100"},xa={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},wa={class:"px-4 py-6 sm:px-0"},_a={class:"flex justify-between items-center mb-6"},ka={class:"bg-white shadow overflow-hidden sm:rounded-md"},$a={class:"divide-y divide-gray-200"},Ca={class:"flex items-center justify-between"},Sa={class:"flex-1"},Ta={class:"text-lg font-medium text-gray-900"},ja={class:"text-sm text-gray-500"},Ea={class:"mt-2 flex items-center space-x-4 text-sm text-gray-500"},Fa={class:"flex items-center space-x-2"},Aa=["onClick"],La=["onClick"],Ra={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},Ia={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ma={class:"text-lg font-medium text-gray-900 mb-4"},Pa={class:"mb-4"},Ua={class:"mb-4"},Da={class:"mb-4"},za={class:"mb-4"},Na={class:"mb-4"},Va={class:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-2"},Oa={key:0,class:"mb-4"},Ba={class:"mt-1 flex gap-2"},Ha=["value"],qa={class:"mb-4"},Wa={class:"flex justify-end space-x-3"},Ya={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},Ka={key:1,class:"fixed bottom-4 right-4 z-50"},Xa={__name:"VpsManagement",setup(t){const s=m(""),c=m(""),g=m([]),v=m(!1),y=m(!1),b=m(null),T=m(""),$=m({name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:"",status:"inactive"}),o=async()=>{try{const V=await z.get("/api/vps");g.value=V.data}catch{s.value="Failed to fetch VPS servers",c.value="error"}},_=V=>{if(!V)return"";let h=String(V).trim();return h=h.replace(/^https?:\/\//i,""),h=h.split("/")[0],h=h.split(":")[0],h.trim()},P=V=>{var x;const h=((x=V==null?void 0:V.target)==null?void 0:x.value)||"";h&&($.value.ssh_key_path=h)},Q=async()=>{var V,h,x,O,M,K;try{if($.value.ip_address=_($.value.ip_address),$.value.ssh_key_path=($.value.ssh_key_path||"").trim(),y.value)await z.put(`/api/vps/${b.value.id}`,$.value),s.value="VPS server updated successfully",c.value="success";else{const ve=(await z.post("/api/vps",$.value)).data;$.value.status&&$.value.status!=="inactive"&&await z.put(`/api/vps/${ve.id}`,{status:$.value.status}),s.value="VPS server created successfully",c.value="success"}j(),o()}catch(ae){s.value=((h=(V=ae==null?void 0:ae.response)==null?void 0:V.data)==null?void 0:h.message)||((O=(x=ae==null?void 0:ae.response)==null?void 0:x.data)==null?void 0:O.error)||((K=(M=ae==null?void 0:ae.response)==null?void 0:M.data)==null?void 0:K.errors)&&Object.values(ae.response.data.errors).flat().join(", ")||"Failed to save VPS server",c.value="error"}},d=V=>{b.value=V,$.value={...V},y.value=!0,T.value=V.worker_key||""},ee=async V=>{if(confirm(`Are you sure you want to delete ${V.name}?`))try{await z.delete(`/api/vps/${V.id}`),s.value="VPS server deleted successfully",c.value="success",o()}catch{s.value="Failed to delete VPS server",c.value="error"}},j=()=>{v.value=!1,y.value=!1,b.value=null,$.value={name:"",ip_address:"",ssh_user:"root",ssh_port:22,ssh_key_path:""},T.value=""},q=()=>{T.value&&(navigator.clipboard.writeText(T.value),s.value="Worker key copied",c.value="success")};return Ze(o),(V,h)=>(a(),i("div",ha,[e("div",xa,[e("div",wa,[e("div",_a,[h[8]||(h[8]=e("h1",{class:"text-3xl font-bold text-gray-900"},"VPS Servers",-1)),e("button",{onClick:h[0]||(h[0]=x=>v.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Add VPS Server ")]),e("div",ka,[e("ul",$a,[(a(!0),i(fe,null,be(g.value,x=>(a(),i("li",{key:x.id,class:"px-6 py-4"},[e("div",Ca,[e("div",Sa,[e("h3",Ta,A(x.name),1),e("p",ja,A(x.ip_address),1),e("div",Ea,[e("span",null,"SSH Port: "+A(x.ssh_port),1),e("span",null,"User: "+A(x.ssh_user),1),e("span",null,"Websites: "+A(x.websites_count),1)])]),e("div",Fa,[e("span",{class:Me(["inline-flex items-center gap-1",{"text-green-600":x.status==="active","text-red-600":x.status==="inactive","text-yellow-600":x.status==="error"}])},[x.status==="active"?(a(),de(C(Ct),{key:0,class:"size-4"})):x.status==="error"?(a(),de(C(St),{key:1,class:"size-4"})):(a(),de(C(At),{key:2,class:"size-4"})),we(" "+A(x.status),1)],2),e("button",{onClick:O=>d(x),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},[J(C(ps),{class:"size-4"})],8,Aa),e("button",{onClick:O=>ee(x),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50",title:"Delete"},[J(C(ct),{class:"size-4"})],8,La)])])]))),128))])])])]),v.value||y.value?(a(),i("div",Ra,[e("div",Ia,[e("h2",Ma,A(y.value?"Edit VPS Server":"Add VPS Server"),1),e("form",{onSubmit:Be(Q,["prevent"])},[e("div",Pa,[h[9]||(h[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),N(e("input",{"onUpdate:modelValue":h[1]||(h[1]=x=>$.value.name=x),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,$.value.name]])]),e("div",Ua,[h[10]||(h[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"IP Address / Hostname",-1)),N(e("input",{"onUpdate:modelValue":h[2]||(h[2]=x=>$.value.ip_address=x),type:"text",required:"",placeholder:"e.g. 203.0.113.10 or worker.example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,$.value.ip_address]])]),e("div",Da,[h[11]||(h[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH User",-1)),N(e("input",{"onUpdate:modelValue":h[3]||(h[3]=x=>$.value.ssh_user=x),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,$.value.ssh_user]])]),e("div",za,[h[12]||(h[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Port",-1)),N(e("input",{"onUpdate:modelValue":h[4]||(h[4]=x=>$.value.ssh_port=x),type:"number",required:"",min:"1",max:"65535",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,$.value.ssh_port,void 0,{number:!0}]])]),e("div",Na,[h[14]||(h[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"SSH Key Path",-1)),e("div",Va,[N(e("input",{"onUpdate:modelValue":h[5]||(h[5]=x=>$.value.ssh_key_path=x),type:"text",placeholder:"/path/to/ssh/key",class:"block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,$.value.ssh_key_path]]),e("select",{onChange:h[6]||(h[6]=x=>P(x)),class:"block w-full border-gray-300 rounded-md shadow-sm"},[...h[13]||(h[13]=[xt('<option value="">Chọn nhanh đường dẫn</option><option value="/root/.ssh/id_rsa">/root/.ssh/id_rsa</option><option value="/root/.ssh/id_ed25519">/root/.ssh/id_ed25519</option><option value="/home/ubuntu/.ssh/id_rsa">/home/ubuntu/.ssh/id_rsa</option><option value="/home/ubuntu/.ssh/id_ed25519">/home/ubuntu/.ssh/id_ed25519</option><option value="/home/ec2-user/.ssh/id_rsa">/home/ec2-user/.ssh/id_rsa</option><option value="/home/ec2-user/.ssh/id_ed25519">/home/ec2-user/.ssh/id_ed25519</option><option value="/home/admin/.ssh/id_rsa">/home/admin/.ssh/id_rsa</option><option value="/home/admin/.ssh/id_ed25519">/home/admin/.ssh/id_ed25519</option>',9)])],32)])]),y.value?(a(),i("div",Oa,[h[15]||(h[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Worker Key",-1)),e("div",Ba,[e("input",{value:T.value,readonly:"",class:"flex-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Ha),e("button",{type:"button",onClick:q,class:"px-3 py-2 rounded-md border border-gray-300 bg-gray-50"},"Copy")])])):W("",!0),e("div",qa,[h[17]||(h[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),N(e("select",{"onUpdate:modelValue":h[7]||(h[7]=x=>$.value.status=x),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...h[16]||(h[16]=[e("option",{value:"active"},"active",-1),e("option",{value:"inactive"},"inactive",-1),e("option",{value:"error"},"error",-1)])],512),[[We,$.value.status]])]),e("div",Wa,[e("button",{type:"button",onClick:j,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",Ya,A(y.value?"Update":"Create"),1)])],32)])])):W("",!0),s.value?(a(),i("div",Ka,[e("div",{class:Me([c.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},A(s.value),3)])):W("",!0)]))}},Ja={class:"min-h-screen bg-gray-100"},Ga={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Qa={class:"px-4 py-6 sm:px-0"},Za={key:0,class:"mb-4"},el={class:"flex justify-between items-center mb-6"},tl={class:"bg-white shadow sm:rounded-md"},sl={class:"divide-y divide-gray-200"},al={class:"flex items-center justify-between"},ll={class:"flex-1"},ol={class:"flex items-center"},nl={class:"text-lg font-medium text-gray-900"},rl={class:"text-sm text-gray-500 mt-1"},il={class:"mt-2 flex items-center space-x-4 text-sm"},dl=["title"],ul={class:"flex items-center space-x-2"},cl=["href"],pl=["href"],ml=["onClick","disabled"],gl=["onClick","disabled"],vl=["onClick","disabled"],fl={key:2,class:"relative redeploy-dropdown-container"},bl=["onClick","disabled"],yl={key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50"},hl={class:"py-1"},xl=["onClick"],wl=["onClick"],_l=["onClick"],kl=["onClick","disabled"],$l={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},Cl={class:"bg-white rounded-lg p-6 w-full max-w-md"},Sl={key:0,class:"mb-4 text-sm text-red-600"},Tl={class:"mb-4"},jl={class:"mb-4"},El={class:"mb-4"},Fl=["value"],Al={class:"mb-4"},Ll=["value"],Rl={key:0,class:"mb-4"},Il={key:1,class:"mb-4"},Ml={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Pl={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ul={class:"mb-4"},Dl={class:"space-y-2"},zl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Nl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Vl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Ol={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Bl={class:"flex justify-end space-x-3"},Hl=["disabled"],ql={key:2,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Wl={class:"bg-white rounded-lg p-6 w-full max-w-md"},Yl={class:"mb-4"},Kl={class:"space-y-2"},Xl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Jl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Gl={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Ql={key:0,style:{color:"white","font-size":"12px","font-weight":"bold"}},Zl={class:"flex justify-end space-x-3"},eo=["disabled"],to={key:0,class:"fixed bottom-4 right-4 z-50"},so={__name:"WebsiteManagement",setup(t){const s=m([]),c=m([]),g=m(!1);m(!1),m(!1),m(!1),m(null),m([]),m(null);const v=m(""),y=m(""),b=m(""),T=m(""),$=m({});let o=null;m(!1);const _=m([]),P=m([]),Q=m([]),d=m([]),ee=m({}),j=m([]),q=m(!1),V=m(!1),h=m(null),x=m({template_names:["all"]}),O=m({template_names:["all"]}),M=(L,p="success")=>{b.value=L,T.value=p,setTimeout(()=>{b.value=""},3e3)},K=m({domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",cloudflare_account_id:null,wordpress_template:"basic"}),ae=m([]);m({path:"",filename:"",title:"",content:""});const ve=async()=>{try{const p=(await z.get("/api/websites")).data;p.forEach(ue=>{const re=$.value[ue.id];re&&re!==ue.status&&(ue.status==="deployed"?M(`${ue.domain} deployed`,"success"):ue.status==="error"&&M(`${ue.domain} deploy failed`,"error")),$.value[ue.id]=ue.status});const te=new Set(p.map(ue=>ue.domain)),ce=ue=>{for(const re of te)if(re!==ue&&ue.endsWith("."+re))return!0;return!1};s.value=p.filter(ue=>!ce(ue.domain))}catch{M("Failed to fetch websites","error")}},pe=async()=>{try{const L=await z.get("/api/vps");c.value=L.data.filter(p=>p.status==="active")}catch{}},Se=async()=>{var L,p,te,ce;try{await z.post("/api/websites",K.value),M("Website created","success"),v.value="Website created",y.value="success",Le(),await ve()}catch(ue){const re=((p=(L=ue==null?void 0:ue.response)==null?void 0:L.data)==null?void 0:p.message)||((ce=(te=ue==null?void 0:ue.response)==null?void 0:te.data)==null?void 0:ce.error)||"Failed to create website";M(re,"error"),v.value=re,y.value="error"}},Ue=async L=>{var p,te,ce,ue;try{L.status="deploying",_.value=[..._.value,L.id],await z.post(`/api/websites/${L.id}/deploy`),M("Deployment started","success"),v.value="Deployment started",y.value="success",await ve()}catch(re){const Te=((te=(p=re==null?void 0:re.response)==null?void 0:p.data)==null?void 0:te.message)||((ue=(ce=re==null?void 0:re.response)==null?void 0:ce.data)==null?void 0:ue.error)||"Failed to deploy website";M(Te,"error"),v.value=Te,y.value="error",await ve()}finally{_.value=_.value.filter(re=>re!==L.id)}},Ae=async L=>{var p,te,ce,ue;try{P.value=[...P.value,L.id],await z.post(`/api/websites/${L.id}/ssl`),M("SSL generation started","success"),v.value="SSL generation started",y.value="success",await ve()}catch(re){const Te=((te=(p=re==null?void 0:re.response)==null?void 0:p.data)==null?void 0:te.message)||((ue=(ce=re==null?void 0:re.response)==null?void 0:ce.data)==null?void 0:ue.error)||"Failed to enable SSL";M(Te,"error"),v.value=Te,y.value="error"}finally{P.value=P.value.filter(re=>re!==L.id)}},he=async L=>{var p,te,ce,ue;if(confirm(`Are you sure you want to delete ${L.domain}?`))try{d.value=[...d.value,L.id],await z.delete(`/api/websites/${L.id}`),M("Website deleted","success"),await ve()}catch(re){const Te=((te=(p=re==null?void 0:re.response)==null?void 0:p.data)==null?void 0:te.message)||((ue=(ce=re==null?void 0:re.response)==null?void 0:ce.data)==null?void 0:ue.error)||"Failed to delete website";M(Te,"error")}finally{d.value=d.value.filter(re=>re!==L.id)}},xe=async L=>{var p,te,ce,ue;try{Q.value=[...Q.value,L.id],await z.post(`/api/websites/${L.id}/deactivate`),M("Website deactivated","success"),v.value="Website deactivated",y.value="success",ve()}catch(re){const Te=((te=(p=re==null?void 0:re.response)==null?void 0:p.data)==null?void 0:te.message)||((ue=(ce=re==null?void 0:re.response)==null?void 0:ce.data)==null?void 0:ue.error)||"Failed to deactivate website";M(Te,"error"),v.value=Te,y.value="error"}finally{Q.value=Q.value.filter(re=>re!==L.id)}};m([]);const Le=()=>{g.value=!1,K.value={domain:"",type:"html",template_package:"laravel-hotel-1",vps_server_id:"",wordpress_template:"basic"}},ze=async()=>{try{const{data:L}=await z.get("/api/cloudflare-accounts");ae.value=L;const p=L.find(te=>te.is_default);p&&!K.value.cloudflare_account_id&&(K.value.cloudflare_account_id=p.id)}catch(L){console.error("Failed to load Cloudflare accounts",L)}};Ze(()=>{ve(),pe(),ze(),o=setInterval(ve,3e3),document.addEventListener("click",L=>{L.target.closest(".redeploy-dropdown-container")||(ee.value={})})}),Ht(()=>{o&&clearInterval(o)});const Ne=L=>{const p=`/preview/${L.id}`,te=localStorage.getItem("adminToken")||"",ce=new URLSearchParams;te&&ce.set("token",te),ce.set("hide_preview_bar","1");const ue=ce.toString();return ue?`${p}?${ue}`:p},Ve=L=>{ee.value={...ee.value,[L]:!ee.value[L]}},me=async L=>{var p,te;try{j.value=[...j.value,L.id],ee.value[L.id]=!1;const ce=await z.post(`/api/websites/${L.id}/redeploy-pages`);M(ce.data.message||"Pages redeployed successfully","success")}catch(ce){const ue=((te=(p=ce==null?void 0:ce.response)==null?void 0:p.data)==null?void 0:te.message)||"Failed to redeploy pages";M(ue,"error")}finally{j.value=j.value.filter(ce=>ce!==L.id)}},ne=L=>{h.value=L,ee.value[L.id]=!1,q.value=!0},F=L=>{h.value=L,ee.value[L.id]=!1,V.value=!0},E=async()=>{var L,p;if(h.value)try{j.value=[...j.value,h.value.id];const te=await z.post(`/api/websites/${h.value.id}/redeploy-template-assets`,x.value);M(te.data.message||"Template assets deployed","success"),q.value=!1}catch(te){const ce=((p=(L=te==null?void 0:te.response)==null?void 0:L.data)==null?void 0:p.message)||"Failed to deploy template assets";M(ce,"error")}finally{j.value=j.value.filter(te=>te!==h.value.id)}},u=async()=>{var L,p;if(h.value)try{j.value=[...j.value,h.value.id];const te={template_names:(O.value.template_names||[]).length===0?[]:O.value.template_names},ce=await z.post(`/api/websites/${h.value.id}/update-pages-template`,te);M(ce.data.message||"Header/footer updated","success"),V.value=!1}catch(te){const ce=((p=(L=te==null?void 0:te.response)==null?void 0:L.data)==null?void 0:p.message)||"Failed to update header/footer";M(ce,"error")}finally{j.value=j.value.filter(te=>te!==h.value.id)}},w=L=>{const p=x.value.template_names||[];p.indexOf(L)===-1?x.value.template_names=[...p,L]:x.value.template_names=p.filter(ce=>ce!==L),console.log("Redeploy templates:",x.value.template_names)},l=L=>{const p=O.value.template_names||[];p.indexOf(L)===-1?O.value.template_names=[...p,L]:O.value.template_names=p.filter(ce=>ce!==L),console.log("Update templates:",O.value.template_names)},f=L=>(x.value.template_names||[]).includes(L),S=L=>(O.value.template_names||[]).includes(L),k=()=>{q.value=!1,h.value=null,x.value={template_names:["all"]}},Y=()=>{V.value=!1,h.value=null,O.value={template_names:["all"]}};return(L,p)=>{var ce,ue,re,Te;const te=nt("router-link");return a(),i(fe,null,[e("div",Ja,[e("div",Ga,[e("div",Qa,[v.value?(a(),i("div",Za,[e("div",{class:Me([y.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},A(v.value),3)])):W("",!0),e("div",el,[p[15]||(p[15]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Websites",-1)),e("button",{onClick:p[0]||(p[0]=U=>g.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Create Website ")]),e("div",tl,[e("ul",sl,[(a(!0),i(fe,null,be(s.value,U=>{var B;return a(),i("li",{key:U.id,class:"px-6 py-4 relative overflow-visible"},[e("div",al,[e("div",ll,[e("div",ol,[e("h3",nl,A(U.domain),1),e("span",{class:Me([{"bg-blue-100 text-blue-800":U.type==="html","bg-green-100 text-green-800":U.type==="wordpress","bg-purple-100 text-purple-800":U.type==="laravel1"},"ml-2 px-2 py-1 text-xs font-medium rounded-full"])},A(U.type),3)]),e("p",rl," VPS: "+A(((B=U.vps_server)==null?void 0:B.name)||"N/A"),1),e("div",il,[e("span",{class:Me(["inline-flex items-center",{"text-blue-600":U.status==="deploying","text-green-600":U.status==="deployed","text-gray-600":U.status==="pending"||U.status==="draft","text-orange-600":U.status==="suspended","text-red-600":U.status==="error"}]),title:U.status},[U.status==="deploying"?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):U.status==="deployed"?(a(),de(C(Ct),{key:1,class:"size-4"})):U.status==="pending"||U.status==="draft"?(a(),de(C(At),{key:2,class:"size-4"})):U.status==="suspended"?(a(),de(C(kt),{key:3,class:"size-4"})):(a(),de(C(St),{key:4,class:"size-4"}))],10,dl),e("span",{class:Me(["inline-flex items-center gap-1",U.ssl_enabled?"text-green-600":"text-gray-400"])},[U.ssl_enabled?(a(),de(C(mt),{key:0,class:"size-4"})):(a(),de(C(ms),{key:1,class:"size-4"}))],2)])]),e("div",ul,[e("a",{href:(U.ssl_enabled?"https://":"http://")+U.domain,target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Website"},[J(C(vt),{class:"size-4"})],8,cl),J(te,{to:`/websites/${U.id}/pages`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:je(()=>[J(C(gs),{class:"size-4"})]),_:1},8,["to"]),J(te,{to:`/websites/${U.id}/folders`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-amber-600 hover:bg-gray-50",title:"Manage Categories"},{default:je(()=>[J(C(Rs),{class:"size-4"})]),_:1},8,["to"]),J(te,{to:`/websites/${U.id}/subdomains`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"Manage Subdomains"},{default:je(()=>[J(C(is),{class:"size-4"})]),_:1},8,["to"]),J(te,{to:`/websites/${U.id}/settings`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Website Settings"},{default:je(()=>[J(C(cs),{class:"size-4"})]),_:1},8,["to"]),e("a",{href:Ne(U),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[J(C(At),{class:"size-4"})],8,pl),e("button",{onClick:r=>Ue(U),disabled:U.status==="deploying"||U.status==="deployed"||_.value.includes(U.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[_.value.includes(U.id)?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(Nt),{key:1,class:"size-4"}))],8,ml),U.status==="deployed"?(a(),i("button",{key:0,onClick:r=>Ae(U),disabled:P.value.includes(U.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[P.value.includes(U.id)?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(mt),{key:1,class:"size-4"}))],8,gl)):W("",!0),U.status==="deployed"||U.status==="error"?(a(),i("button",{key:1,onClick:r=>xe(U),disabled:Q.value.includes(U.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[Q.value.includes(U.id)?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(kt),{key:1,class:"size-4"}))],8,vl)):W("",!0),U.status==="deployed"&&U.type==="laravel1"?(a(),i("div",fl,[e("button",{onClick:r=>Ve(U.id),disabled:j.value.includes(U.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-teal-600 hover:bg-gray-50 disabled:text-gray-400",title:"Redeploy Options"},[j.value.includes(U.id)?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(Is),{key:1,class:"size-4"}))],8,bl),ee.value[U.id]?(a(),i("div",yl,[e("div",hl,[e("button",{onClick:r=>me(U),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy All Pages ",8,xl),e("button",{onClick:r=>ne(U),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Redeploy Template Assets ",8,wl),e("button",{onClick:r=>F(U),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Update Pages Template ",8,_l)])])):W("",!0)])):W("",!0),e("button",{onClick:r=>he(U),disabled:d.value.includes(U.id),class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[d.value.includes(U.id)?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(ct),{key:1,class:"size-4"}))],8,kl)])])])}),128))])])])]),g.value?(a(),i("div",$l,[e("div",Cl,[p[30]||(p[30]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create Website",-1)),c.value.length===0?(a(),i("div",Sl,"Chưa có VPS ở trạng thái active. Vào mục Servers để đặt trạng thái active cho VPS hiện tại.")):W("",!0),e("form",{onSubmit:Be(Se,["prevent"])},[e("div",Tl,[p[16]||(p[16]=e("label",{class:"block text-sm font-medium text-gray-700"},"Domain",-1)),N(e("input",{"onUpdate:modelValue":p[1]||(p[1]=U=>K.value.domain=U),type:"text",required:"",placeholder:"example.com",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,K.value.domain]])]),e("div",jl,[p[18]||(p[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Type",-1)),N(e("select",{"onUpdate:modelValue":p[2]||(p[2]=U=>K.value.type=U),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...p[17]||(p[17]=[e("option",{value:"html"},"HTML Website",-1),e("option",{value:"wordpress"},"WordPress",-1),e("option",{value:"laravel1"},"Laravel 1",-1)])],512),[[We,K.value.type]])]),e("div",El,[p[20]||(p[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),N(e("select",{"onUpdate:modelValue":p[3]||(p[3]=U=>K.value.vps_server_id=U),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[p[19]||(p[19]=e("option",{value:""},"Select VPS Server",-1)),(a(!0),i(fe,null,be(c.value,U=>(a(),i("option",{key:U.id,value:U.id},A(U.name)+" ("+A(U.ip_address)+") ",9,Fl))),128))],512),[[We,K.value.vps_server_id]])]),e("div",Al,[p[22]||(p[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Cloudflare Account",-1)),N(e("select",{"onUpdate:modelValue":p[4]||(p[4]=U=>K.value.cloudflare_account_id=U),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[p[21]||(p[21]=e("option",{value:null},"Select Account (optional)",-1)),(a(!0),i(fe,null,be(ae.value,U=>(a(),i("option",{key:U.id,value:U.id},A(U.name)+" - "+A(U.email),9,Ll))),128))],512),[[We,K.value.cloudflare_account_id]]),p[23]||(p[23]=e("p",{class:"mt-1 text-xs text-gray-500"},"Chọn Cloudflare account để quản lý DNS và SSL cho website này",-1))]),K.value.type==="wordpress"?(a(),i("div",Rl,[p[25]||(p[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"WordPress Template",-1)),N(e("select",{"onUpdate:modelValue":p[5]||(p[5]=U=>K.value.wordpress_template=U),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...p[24]||(p[24]=[e("option",{value:"basic"},"Basic WordPress",-1),e("option",{value:"business"},"Business Theme",-1),e("option",{value:"ecommerce"},"E-commerce Theme",-1)])],512),[[We,K.value.wordpress_template]])])):W("",!0),K.value.type==="laravel1"?(a(),i("div",Il,[p[27]||(p[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template Package",-1)),N(e("select",{"onUpdate:modelValue":p[6]||(p[6]=U=>K.value.template_package=U),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...p[26]||(p[26]=[e("option",{value:"laravel-hotel-1"},"Hotel Template",-1)])],512),[[We,K.value.template_package]]),p[28]||(p[28]=e("p",{class:"mt-1 text-xs text-gray-500"},"Includes home, listing, and detail pages with shared assets",-1))])):W("",!0),e("div",{class:"flex justify-end space-x-3"},[e("button",{type:"button",onClick:Le,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),p[29]||(p[29]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Create ",-1))])],32)])])):W("",!0),q.value?(a(),i("div",Ml,[e("div",Pl,[p[37]||(p[37]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Redeploy Template Assets",-1)),e("div",Ul,[p[35]||(p[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",Dl,[e("div",{class:"flex items-center cursor-pointer",onClick:p[7]||(p[7]=U=>w("all"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:f("all")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[f("all")?(a(),i("span",zl,"✓")):W("",!0)],4),p[31]||(p[31]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[8]||(p[8]=U=>w("home"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:f("home")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[f("home")?(a(),i("span",Nl,"✓")):W("",!0)],4),p[32]||(p[32]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[9]||(p[9]=U=>w("listing"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:f("listing")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[f("listing")?(a(),i("span",Vl,"✓")):W("",!0)],4),p[33]||(p[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[10]||(p[10]=U=>w("detail"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:f("detail")?"#3B82F6":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[f("detail")?(a(),i("span",Ol,"✓")):W("",!0)],4),p[34]||(p[34]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),p[38]||(p[38]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-blue-800"}," Deploys CSS/JS files from the selected templates to all pages. Use this when you update template scripts or styles. ")],-1)),e("div",Bl,[e("button",{type:"button",onClick:k,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:E,disabled:j.value.includes((ce=h.value)==null?void 0:ce.id),class:"px-3 py-2 bg-teal-600 text-white text-sm rounded-md hover:bg-teal-700 disabled:opacity-50 flex items-center gap-2"},[j.value.includes((ue=h.value)==null?void 0:ue.id)?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):W("",!0),p[36]||(p[36]=we(" Deploy Assets ",-1))],8,Hl)])])])):W("",!0),V.value?(a(),i("div",ql,[e("div",Wl,[p[45]||(p[45]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Update Pages Template",-1)),e("div",Yl,[p[43]||(p[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Templates",-1)),e("div",Kl,[e("div",{class:"flex items-center cursor-pointer",onClick:p[11]||(p[11]=U=>l("all"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:S("all")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[S("all")?(a(),i("span",Xl,"✓")):W("",!0)],4),p[39]||(p[39]=e("span",{class:"ml-2 text-sm text-gray-700"},"All Templates (Home, Listing, Detail)",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[12]||(p[12]=U=>l("home"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:S("home")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[S("home")?(a(),i("span",Jl,"✓")):W("",!0)],4),p[40]||(p[40]=e("span",{class:"ml-2 text-sm text-gray-700"},"Home Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[13]||(p[13]=U=>l("listing"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:S("listing")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[S("listing")?(a(),i("span",Gl,"✓")):W("",!0)],4),p[41]||(p[41]=e("span",{class:"ml-2 text-sm text-gray-700"},"Listing Template",-1))]),e("div",{class:"flex items-center cursor-pointer",onClick:p[14]||(p[14]=U=>l("detail"))},[e("div",{style:ot({width:"18px",height:"18px",border:"2px solid #4B5563",borderRadius:"3px",backgroundColor:S("detail")?"#9333EA":"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0})},[S("detail")?(a(),i("span",Ql,"✓")):W("",!0)],4),p[42]||(p[42]=e("span",{class:"ml-2 text-sm text-gray-700"},"Detail Template",-1))])])]),p[46]||(p[46]=e("div",{class:"bg-purple-50 border border-purple-200 rounded-md p-3 mb-4"},[e("p",{class:"text-sm text-purple-800"},[we(" Cập nhật phần header/footer cho "),e("strong",null,"các trang đang dùng template đã chọn"),we(", sau đó tự động deploy các trang đó. Tính năng này "),e("strong",null,"không"),we(' cập nhật CSS/JS (dùng mục "Redeploy Template Assets" cho CSS/JS). Với website chính, hệ thống sẽ xếp lịch redeploy Trang chủ và các trang Category liên quan. ')])],-1)),e("div",Zl,[e("button",{type:"button",onClick:Y,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:u,disabled:j.value.includes((re=h.value)==null?void 0:re.id),class:"px-3 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2"},[j.value.includes((Te=h.value)==null?void 0:Te.id)?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):W("",!0),p[44]||(p[44]=we(" Update header/footer ",-1))],8,eo)])])])):W("",!0)]),b.value?(a(),i("div",to,[e("div",{class:Me([T.value==="error"?"bg-red-600 text-white":"bg-gray-900 text-white","px-4 py-3 rounded-md shadow-lg text-sm"])},A(b.value),3)])):W("",!0)],64)}}},ao={class:"min-h-screen bg-gray-100"},lo={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},oo={class:"px-4 py-6 sm:px-0"},no={class:"flex items-center justify-between mb-6"},ro={class:"text-3xl font-bold text-gray-900"},io={key:0,class:"ml-2 text-lg text-gray-500"},uo={key:0,class:"mb-4"},co={key:1,class:"text-gray-600"},po={key:2,class:"mb-4"},mo={class:"inline-flex rounded-md shadow-sm",role:"group"},go={key:3,class:"bg-white shadow sm:rounded-md p-6 space-y-6"},vo={key:0,class:"space-y-6"},fo=["value"],bo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},yo={class:"mt-2 flex items-center gap-4"},ho={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},xo=["src"],wo={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},_o={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},ko={class:"mt-2 flex items-center gap-4"},$o={class:"h-16 w-48 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},Co=["src"],So={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},To={key:0,class:"text-xs text-gray-500 truncate max-w-[360px]"},jo={class:"mt-2 flex items-center gap-4"},Eo={class:"h-10 w-10 rounded-md border border-gray-300 bg-gray-50 overflow-hidden flex items-center justify-center"},Fo=["src"],Ao={class:"inline-flex items-center px-3 py-2 rounded-md border border-gray-300 bg-white cursor-pointer hover:bg-gray-50"},Lo={key:0,class:"text-xs text-gray-500 truncate max-w-[220px]"},Ro={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Io={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Mo={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Po={key:1,class:"space-y-6"},Uo={class:"flex items-center justify-between mb-4"},Do={class:"space-y-2"},zo={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},No=["onDragstart","onDrop"],Vo={class:"p-4"},Oo={class:"flex items-start justify-between gap-4"},Bo={class:"flex items-start gap-3 flex-1 min-w-0"},Ho={class:"flex-1 min-w-0 space-y-2"},qo={class:"flex items-center gap-2"},Wo=["onUpdate:modelValue"],Yo=["onUpdate:modelValue"],Ko={class:"flex items-center gap-2 flex-shrink-0"},Xo=["onClick"],Jo=["onClick"],Go={key:0,class:"mt-4 ml-8 space-y-2 pt-3 border-t border-gray-100"},Qo=["onDragstart","onDrop"],Zo={class:"flex-1 min-w-0 space-y-1"},en=["onUpdate:modelValue"],tn=["onUpdate:modelValue"],sn=["onClick"],an={class:"flex items-center justify-between mb-4"},ln={class:"space-y-3"},on={key:0,class:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center"},nn=["onDragstart","onDrop"],rn={class:"p-4"},dn={class:"flex items-start justify-between gap-4 mb-3"},un={class:"flex items-start gap-3 flex-1 min-w-0"},cn={class:"flex-1 min-w-0"},pn=["onUpdate:modelValue","placeholder"],mn={class:"flex items-center gap-2 flex-shrink-0"},gn=["onClick"],vn=["onClick"],fn={key:0,class:"ml-8 space-y-2 pt-3 border-t border-gray-100"},bn=["onDragstart","onDrop"],yn={class:"flex-1 min-w-0 space-y-1"},hn=["onUpdate:modelValue"],xn=["onUpdate:modelValue"],wn=["onClick"],_n={key:1,class:"ml-8 pt-3 border-t border-gray-100"},kn={class:"flex justify-end space-x-3"},$n=["disabled"],Cn={key:0,class:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4"},Sn={key:1},Tn={class:"px-6 py-4 space-y-4"},jn=["value"],En={class:"pt-3 border-t border-gray-200"},Fn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},An={class:"px-6 py-4 border-b border-gray-200"},Ln={class:"text-sm text-gray-500 mt-1"},Rn={class:"px-6 py-4 space-y-4"},In=["value"],Mn={class:"pt-3 border-t border-gray-200"},Pn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},Un={class:"px-6 py-4 space-y-4"},Dn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},zn={class:"px-6 py-4 border-b border-gray-200"},Nn={class:"text-sm text-gray-500 mt-1"},Vn={class:"px-6 py-4 space-y-4"},On=["value"],Bn={class:"pt-3 border-t border-gray-200"},Hn={class:"px-6 py-4 bg-gray-50 rounded-b-lg flex gap-3 justify-end"},qn={__name:"WebsiteSettings",setup(t){const c=pt().params.websiteId,g=m(null),v=m(!0),y=m(!1),b=m(""),T=m(""),$=m("general"),o=m({title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}),_=m([]),P=m(null),Q=m(null),d=m(null),ee=m(null),j=m(null),q=m(null),V=m(null),h=Ie(()=>(o.value.custom_head_html||"").split(`
`).length||1),x=Ie(()=>(o.value.custom_body_html||"").split(`
`).length||1),O=Ie(()=>(o.value.custom_footer_html||"").split(`
`).length||1),M=H=>{H==="head"&&Q.value&&j.value&&(Q.value.scrollTop=j.value.scrollTop),H==="body"&&d.value&&q.value&&(d.value.scrollTop=q.value.scrollTop),H==="footer"&&ee.value&&V.value&&(ee.value.scrollTop=V.value.scrollTop)},K=async()=>{try{const H=await z.get(`/api/websites/${c}`);g.value=H.data,P.value=H.data.cloudflare_account_id}catch{}},ae=async()=>{try{const H=await z.get("/api/cloudflare-accounts");_.value=H.data||[]}catch(H){console.error("Failed to fetch Cloudflare accounts:",H)}},ve=async()=>{var H,n;try{await z.put(`/api/websites/${c}`,{cloudflare_account_id:P.value}),b.value="Cloudflare account đã được cập nhật",T.value="success"}catch(_e){b.value=((n=(H=_e==null?void 0:_e.response)==null?void 0:H.data)==null?void 0:n.message)||"Không thể cập nhật Cloudflare account",T.value="error"}},pe=async()=>{var H,n;try{const G=(await z.get(`/api/websites/${c}/settings`)).data||{};o.value={title:G.title||"",logo_header_url:G.logo_header_url||"",logo_footer_url:G.logo_footer_url||"",favicon_url:G.favicon_url||"",custom_head_html:G.custom_head_html||"",custom_body_html:G.custom_body_html||"",custom_footer_html:G.custom_footer_html||"",menu:Array.isArray(G.menu)?G.menu:[],footer_links_html:G.footer_links_html||""},xe.value=Array.isArray(G.menu)?G.menu:[],Array.isArray(G.footer_columns)?D.value=G.footer_columns:D.value=[]}catch(_e){b.value=((n=(H=_e==null?void 0:_e.response)==null?void 0:H.data)==null?void 0:n.error)||"Failed to load settings",T.value="error"}},Se=async()=>{var H,n,_e,G;y.value=!0,b.value="";try{o.value.footer_links_html=Mt(),o.value.footer_columns=D.value,await z.put(`/api/websites/${c}/settings`,o.value),b.value="Updated settings",T.value="success"}catch(ge){b.value=((n=(H=ge==null?void 0:ge.response)==null?void 0:H.data)==null?void 0:n.message)||((G=(_e=ge==null?void 0:ge.response)==null?void 0:_e.data)==null?void 0:G.error)||(ge==null?void 0:ge.message)||"Failed to update settings",T.value="error"}finally{y.value=!1}},Ue=()=>{o.value={title:"",logo_header_url:"",logo_footer_url:"",favicon_url:"",custom_head_html:"",custom_body_html:"",custom_footer_html:"",menu:[],footer_links_html:""}},Ae=async(H,n)=>{var ge,I,Ce,ke;const _e=((ge=H==null?void 0:H.target)==null?void 0:ge.files)||[];if(!_e.length)return;const G=new FormData;G.append("file",_e[0]);try{let Ee=`/api/websites/${c}/assets/${n}`;const Fe=await z.post(Ee,G,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},timeout:6e4}),Ye=((I=Fe==null?void 0:Fe.data)==null?void 0:I.url)||"";n==="logo-header"?o.value.logo_header_url=Ye:n==="logo-footer"?o.value.logo_footer_url=Ye:n==="favicon"&&(o.value.favicon_url=Ye),b.value="Uploaded "+n,T.value="success"}catch(Ee){const Fe=((ke=(Ce=Ee==null?void 0:Ee.response)==null?void 0:Ce.data)==null?void 0:ke.error)||(Ee==null?void 0:Ee.message)||"Upload failed";b.value=Fe,T.value="error"}finally{H.target.value=""}};Ze(async()=>{await Promise.all([K(),pe(),w(),ae()]),xe.value=Array.isArray(o.value.menu)?[...o.value.menu]:[],v.value=!1});const he=m([]),xe=m([]),Le=m(!1),ze=m(!1),Ne=m(-1),Ve=m(""),me=m(""),ne=m(""),F=m(""),E=m(""),u=m(""),w=async()=>{try{const H=await z.get(`/api/websites/${c}/folders`);he.value=H.data||[]}catch{}},l=H=>`/${(H==null?void 0:H.slug)||""}`,f=()=>{if(Ve.value){const H=he.value.find(n=>String(n.id)===String(Ve.value));H&&(me.value=H.name,ne.value=l(H))}},S=()=>{if(F.value){const H=he.value.find(n=>String(n.id)===String(F.value));H&&(E.value=H.name,u.value=l(H))}};_t(Ve,f),_t(F,S);const k=()=>{if(!me.value||!ne.value){b.value="Vui lòng điền đầy đủ thông tin",T.value="error";return}xe.value.push({label:me.value,url:ne.value,children:[]}),o.value.menu=xe.value,Ve.value="",me.value="",ne.value="",Le.value=!1,b.value="Đã thêm menu",T.value="success"},Y=H=>{Ne.value=H,ze.value=!0},L=()=>{if(!E.value||!u.value){b.value="Vui lòng điền đầy đủ thông tin",T.value="error";return}const H=xe.value[Ne.value];H&&(H.children=H.children||[],H.children.push({label:E.value,url:u.value}),o.value.menu=xe.value,F.value="",E.value="",u.value="",ze.value=!1,b.value="Đã thêm menu con",T.value="success")},p=()=>{o.value.menu=xe.value},te=H=>{xe.value.splice(H,1),o.value.menu=xe.value},ce=(H,n)=>{const _e=xe.value[H];_e&&(_e.children.splice(n,1),o.value.menu=xe.value)};let ue=-1,re={parent:-1,index:-1};const Te=H=>{ue=H},U=H=>{if(ue===-1||H===ue)return;const n=xe.value,[_e]=n.splice(ue,1);n.splice(H,0,_e),ue=-1,o.value.menu=n},B=(H,n)=>{re={parent:H,index:n}},r=(H,n)=>{if(re.parent!==H)return;const _e=xe.value[H].children||[],G=re.index;if(G===n||G<0)return;const[ge]=_e.splice(G,1);_e.splice(n,0,ge),re={parent:-1,index:-1},o.value.menu=xe.value},D=m([]),le=m(!1),R=m(!1),X=m(-1),ie=m(""),De=m(""),se=m(""),$e=m("");_t(De,()=>{if(De.value){const H=he.value.find(n=>String(n.id)===String(De.value));H&&(se.value=H.name,$e.value=l(H))}});const tt=()=>{D.value.push({title:ie.value||"",links:[]}),ie.value="",le.value=!1,b.value="Đã thêm cột footer",T.value="success"},Oe=H=>{X.value=H,R.value=!0},Je=()=>{if(!se.value||!$e.value){b.value="Vui lòng điền đầy đủ thông tin",T.value="error";return}const H=D.value[X.value];H&&(H.links.push({label:se.value,url:$e.value}),De.value="",se.value="",$e.value="",R.value=!1,b.value="Đã thêm liên kết footer",T.value="success")},at=H=>{D.value.splice(H,1)},He=()=>{},et=(H,n)=>{const _e=D.value[H];_e&&_e.links.splice(n,1)};let lt=-1;const rt=H=>{lt=H},It=H=>{if(lt===-1||H===lt)return;const n=D.value,[_e]=n.splice(lt,1);n.splice(H,0,_e),lt=-1};let ft={column:-1,index:-1};const Tt=(H,n)=>{ft={column:H,index:n}},jt=(H,n)=>{if(ft.column!==H)return;const _e=D.value[H].links||[],G=ft.index;if(G===n||G<0)return;const[ge]=_e.splice(G,1);_e.splice(n,0,ge),ft={column:-1,index:-1}},Mt=()=>{const H=D.value;if(!H.length)return"";let n='<div class="grid grid-cols-'+H.length+' gap-6">';for(const _e of H){n+="<div>",_e.title&&(n+='<div class="font-medium mb-2">'+_e.title+"</div>"),n+='<ul class="space-y-1">';const G=_e.links||[];for(const ge of G)n+='<li><a href="'+(ge.url||"#")+'" class="text-gray-600 hover:text-gray-900">'+(ge.label||"")+"</a></li>";n+="</ul>",n+="</div>"}return n+="</div>",n};return(H,n)=>{var G,ge;const _e=nt("router-link");return a(),i("div",ao,[e("div",lo,[e("div",oo,[e("div",no,[e("h1",ro,[n[41]||(n[41]=we(" Website Settings ",-1)),g.value?(a(),i("span",io,A(g.value.domain),1)):W("",!0)]),J(_e,{to:"/websites",class:"px-3 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:je(()=>[...n[42]||(n[42]=[we("Back",-1)])]),_:1})]),b.value?(a(),i("div",uo,[e("div",{class:Me([T.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200","px-4 py-3 rounded-md"])},A(b.value),3)])):W("",!0),v.value?(a(),i("div",co,"Loading...")):(a(),i("div",po,[e("div",mo,[e("button",{type:"button",onClick:n[0]||(n[0]=I=>$.value="general"),class:Me([$.value==="general"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-l-md hover:bg-gray-50"])},"Cài đặt chung",2),e("button",{type:"button",onClick:n[1]||(n[1]=I=>$.value="navigation"),class:Me([$.value==="navigation"?"bg-blue-600 text-white":"bg-white text-gray-700","px-4 py-2 border border-gray-300 rounded-r-md hover:bg-gray-50"])},"Menu Header & Footer",2)])])),v.value?W("",!0):(a(),i("div",go,[$.value==="general"?(a(),i("div",vo,[e("div",null,[n[43]||(n[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề",-1)),N(e("input",{"onUpdate:modelValue":n[2]||(n[2]=I=>o.value.title=I),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Website title"},null,512),[[oe,o.value.title]])]),e("div",null,[n[45]||(n[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Cloudflare Account",-1)),N(e("select",{"onUpdate:modelValue":n[3]||(n[3]=I=>P.value=I),onChange:ve,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[n[44]||(n[44]=e("option",{value:null},"-- Không sử dụng Cloudflare (dùng bản ghi *) --",-1)),(a(!0),i(fe,null,be(_.value,I=>(a(),i("option",{key:I.id,value:I.id},A(I.email),9,fo))),128))],544),[[We,P.value]]),n[46]||(n[46]=e("p",{class:"mt-1 text-sm text-gray-500"},"Chọn Cloudflare account để quản lý DNS cho website này. Để trống nếu đã có wildcard DNS record",-1))]),e("div",bo,[e("div",null,[n[48]||(n[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Header",-1)),e("div",yo,[e("div",ho,[o.value.logo_header_url?(a(),i("img",{key:0,src:o.value.logo_header_url,class:"object-contain h-full w-full"},null,8,xo)):(a(),de(C(Pt),{key:1,class:"size-6 text-gray-400"}))]),e("label",wo,[J(C(Ut),{class:"size-4 mr-2"}),n[47]||(n[47]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:n[4]||(n[4]=I=>Ae(I,"logo-header")),class:"hidden"},null,32)]),o.value.logo_header_url?(a(),i("span",_o,A(o.value.logo_header_url),1)):W("",!0)])]),e("div",null,[n[50]||(n[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Logo Footer",-1)),e("div",ko,[e("div",$o,[o.value.logo_footer_url?(a(),i("img",{key:0,src:o.value.logo_footer_url,class:"object-contain h-full w-full"},null,8,Co)):(a(),de(C(Pt),{key:1,class:"size-6 text-gray-400"}))]),e("label",So,[J(C(Ut),{class:"size-4 mr-2"}),n[49]||(n[49]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".png,.jpg,.jpeg,.webp,.svg",onChange:n[5]||(n[5]=I=>Ae(I,"logo-footer")),class:"hidden"},null,32)]),o.value.logo_footer_url?(a(),i("span",To,A(o.value.logo_footer_url),1)):W("",!0)])])]),e("div",null,[n[52]||(n[52]=e("label",{class:"block text-sm font-medium text-gray-700"},"Favicon",-1)),e("div",jo,[e("div",Eo,[o.value.favicon_url?(a(),i("img",{key:0,src:o.value.favicon_url,class:"object-contain h-full w-full"},null,8,Fo)):(a(),de(C(Pt),{key:1,class:"size-5 text-gray-400"}))]),e("label",Ao,[J(C(Ut),{class:"size-4 mr-2"}),n[51]||(n[51]=e("span",null,"Upload",-1)),e("input",{type:"file",accept:".ico,.png,.jpg,.jpeg,.svg",onChange:n[6]||(n[6]=I=>Ae(I,"favicon")),class:"hidden"},null,32)]),o.value.favicon_url?(a(),i("span",Lo,A(o.value.favicon_url),1)):W("",!0)])]),e("div",null,[n[53]||(n[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào header",-1)),e("div",Ro,[e("div",{ref_key:"gutterHead",ref:Q,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(a(!0),i(fe,null,be(h.value,I=>(a(),i("div",{key:I,class:"leading-6"},A(I),1))),128))],512),N(e("textarea",{ref_key:"codeHead",ref:j,"onUpdate:modelValue":n[7]||(n[7]=I=>o.value.custom_head_html=I),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:n[8]||(n[8]=I=>M("head"))},null,544),[[oe,o.value.custom_head_html]])])]),e("div",null,[n[54]||(n[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào body",-1)),e("div",Io,[e("div",{ref_key:"gutterBody",ref:d,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(a(!0),i(fe,null,be(x.value,I=>(a(),i("div",{key:I,class:"leading-6"},A(I),1))),128))],512),N(e("textarea",{ref_key:"codeBody",ref:q,"onUpdate:modelValue":n[9]||(n[9]=I=>o.value.custom_body_html=I),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<div>...</div>",onScroll:n[10]||(n[10]=I=>M("body"))},null,544),[[oe,o.value.custom_body_html]])])]),e("div",null,[n[55]||(n[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chèn mã vào footer",-1)),e("div",Mo,[e("div",{ref_key:"gutterFooter",ref:ee,class:"border border-gray-300 border-r-0 rounded-l-md bg-gray-50 text-xs text-gray-500 overflow-hidden p-2"},[(a(!0),i(fe,null,be(O.value,I=>(a(),i("div",{key:I,class:"leading-6"},A(I),1))),128))],512),N(e("textarea",{ref_key:"codeFooter",ref:V,"onUpdate:modelValue":n[11]||(n[11]=I=>o.value.custom_footer_html=I),rows:"10",class:"border border-gray-300 rounded-r-md shadow-sm font-mono leading-6 p-2 w-full",placeholder:"<script>...<\/script>",onScroll:n[12]||(n[12]=I=>M("footer"))},null,544),[[oe,o.value.custom_footer_html]])])])])):W("",!0),$.value==="navigation"?(a(),i("div",Po,[e("div",null,[e("div",Uo,[n[57]||(n[57]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Menu Header"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:n[13]||(n[13]=I=>Le.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...n[56]||(n[56]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),we(" Thêm menu ",-1)])])]),e("div",Do,[xe.value.length===0?(a(),i("div",zo,[...n[58]||(n[58]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có menu nào. Click "Thêm menu" để bắt đầu.',-1)])])):W("",!0),(a(!0),i(fe,null,be(xe.value,(I,Ce)=>(a(),i("div",{key:Ce,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:ke=>Te(Ce),onDragover:n[15]||(n[15]=Be(()=>{},["prevent"])),onDrop:ke=>U(Ce)},[e("div",Vo,[e("div",Oo,[e("div",Bo,[n[59]||(n[59]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",Ho,[e("div",qo,[N(e("input",{"onUpdate:modelValue":ke=>I.label=ke,onInput:p,type:"text",class:"flex-1 px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu"},null,40,Wo),[[oe,I.label]])]),N(e("input",{"onUpdate:modelValue":ke=>I.url=ke,onInput:p,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL (ví dụ: /khach-san)"},null,40,Yo),[[oe,I.url]])])]),e("div",Ko,[e("button",{type:"button",onClick:ke=>Y(Ce),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm menu con"},[...n[60]||(n[60]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,Xo),e("button",{type:"button",onClick:ke=>te(Ce),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa"},[...n[61]||(n[61]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Jo)])]),I.children&&I.children.length>0?(a(),i("div",Go,[(a(!0),i(fe,null,be(I.children,(ke,Ee)=>(a(),i("div",{key:Ee,class:"flex items-center gap-3 group",draggable:"true",onDragstart:Fe=>B(Ce,Ee),onDragover:n[14]||(n[14]=Be(()=>{},["prevent"])),onDrop:Fe=>r(Ce,Ee)},[n[63]||(n[63]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),n[64]||(n[64]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("div",Zo,[N(e("input",{"onUpdate:modelValue":Fe=>ke.label=Fe,onInput:p,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên menu con"},null,40,en),[[oe,ke.label]]),N(e("input",{"onUpdate:modelValue":Fe=>ke.url=Fe,onInput:p,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,tn),[[oe,ke.url]])]),e("button",{type:"button",onClick:Fe=>ce(Ce,Ee),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...n[62]||(n[62]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,sn)],40,Qo))),128))])):W("",!0)])],40,No))),128))])]),e("div",null,[e("div",an,[n[66]||(n[66]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Footer"),e("p",{class:"text-sm text-gray-500 mt-1"},"Kéo thả để sắp xếp, click để chỉnh sửa")],-1)),e("button",{type:"button",onClick:n[16]||(n[16]=I=>le.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium"},[...n[65]||(n[65]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),we(" Thêm cột ",-1)])])]),e("div",ln,[D.value.length===0?(a(),i("div",on,[...n[67]||(n[67]=[e("p",{class:"text-gray-500 text-sm"},'Chưa có cột footer nào. Click "Thêm cột" để bắt đầu.',-1)])])):W("",!0),(a(!0),i(fe,null,be(D.value,(I,Ce)=>(a(),i("div",{key:Ce,class:"rounded-lg border border-gray-200 bg-white",draggable:"true",onDragstart:ke=>rt(Ce),onDragover:n[18]||(n[18]=Be(()=>{},["prevent"])),onDrop:ke=>It(Ce)},[e("div",rn,[e("div",dn,[e("div",un,[n[68]||(n[68]=e("svg",{class:"size-5 text-gray-400 mt-0.5 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),e("div",cn,[N(e("input",{"onUpdate:modelValue":ke=>I.title=ke,onInput:He,type:"text",class:"w-full px-2 py-1 text-sm font-medium border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:`Tiêu đề cột ${Ce+1}`},null,40,pn),[[oe,I.title]])])]),e("div",mn,[e("button",{type:"button",onClick:ke=>Oe(Ce),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",title:"Thêm liên kết"},[...n[69]||(n[69]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,gn),e("button",{type:"button",onClick:ke=>at(Ce),class:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Xóa cột"},[...n[70]||(n[70]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,vn)])]),I.links&&I.links.length>0?(a(),i("div",fn,[(a(!0),i(fe,null,be(I.links,(ke,Ee)=>(a(),i("div",{key:Ee,class:"flex items-center gap-3 group",draggable:"true",onDragstart:Fe=>Tt(Ce,Ee),onDragover:n[17]||(n[17]=Be(()=>{},["prevent"])),onDrop:Fe=>jt(Ce,Ee)},[n[72]||(n[72]=e("svg",{class:"size-4 text-gray-300 flex-shrink-0 cursor-move",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),n[73]||(n[73]=e("svg",{class:"size-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),e("div",yn,[N(e("input",{"onUpdate:modelValue":Fe=>ke.label=Fe,onInput:He,type:"text",class:"w-full px-2 py-1 text-sm border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Tên liên kết"},null,40,hn),[[oe,ke.label]]),N(e("input",{"onUpdate:modelValue":Fe=>ke.url=Fe,onInput:He,type:"text",class:"w-full px-2 py-1 text-xs text-gray-600 border border-transparent hover:border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"URL"},null,40,xn),[[oe,ke.url]])]),e("button",{type:"button",onClick:Fe=>et(Ce,Ee),class:"opacity-0 group-hover:opacity-100 p-1 text-red-600 hover:bg-red-50 rounded flex-shrink-0"},[...n[71]||(n[71]=[e("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,wn)],40,bn))),128))])):(a(),i("div",_n,[...n[74]||(n[74]=[e("p",{class:"text-xs text-gray-400 italic"},"Chưa có liên kết",-1)])]))])],40,nn))),128))])])])):W("",!0),e("div",kn,[e("button",{type:"button",onClick:Ue,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Reset"),e("button",{type:"button",onClick:Se,disabled:y.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2"},[y.value?(a(),i("span",Cn)):(a(),i("span",Sn,"Save"))],8,$n)])]))])]),Le.value?(a(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n[24]||(n[24]=I=>Le.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:n[23]||(n[23]=Be(()=>{},["stop"]))},[n[79]||(n[79]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu mới")],-1)),e("div",Tn,[e("div",null,[n[76]||(n[76]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),N(e("select",{"onUpdate:modelValue":n[19]||(n[19]=I=>Ve.value=I),class:"w-full rounded-md border-gray-300 text-sm"},[n[75]||(n[75]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(a(!0),i(fe,null,be(he.value,I=>(a(),i("option",{key:I.id,value:I.id},A(I.name),9,jn))),128))],512),[[We,Ve.value]])]),e("div",En,[n[77]||(n[77]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu",-1)),N(e("input",{"onUpdate:modelValue":n[20]||(n[20]=I=>me.value=I),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn"},null,512),[[oe,me.value]])]),e("div",null,[n[78]||(n[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),N(e("input",{"onUpdate:modelValue":n[21]||(n[21]=I=>ne.value=I),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san"},null,512),[[oe,ne.value]])])]),e("div",Fn,[e("button",{type:"button",onClick:n[22]||(n[22]=I=>Le.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:k,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):W("",!0),ze.value?(a(),i("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n[30]||(n[30]=I=>ze.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:n[29]||(n[29]=Be(()=>{},["stop"]))},[e("div",An,[n[81]||(n[81]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm menu con",-1)),e("p",Ln,[n[80]||(n[80]=we("Thêm vào: ",-1)),e("strong",null,A((G=xe.value[Ne.value])==null?void 0:G.label),1)])]),e("div",Rn,[e("div",null,[n[83]||(n[83]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),N(e("select",{"onUpdate:modelValue":n[25]||(n[25]=I=>F.value=I),class:"w-full rounded-md border-gray-300 text-sm"},[n[82]||(n[82]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(a(!0),i(fe,null,be(he.value,I=>(a(),i("option",{key:I.id,value:I.id},A(I.name),9,In))),128))],512),[[We,F.value]])]),e("div",Mn,[n[84]||(n[84]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên menu con",-1)),N(e("input",{"onUpdate:modelValue":n[26]||(n[26]=I=>E.value=I),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Khách sạn 5 sao"},null,512),[[oe,E.value]])]),e("div",null,[n[85]||(n[85]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),N(e("input",{"onUpdate:modelValue":n[27]||(n[27]=I=>u.value=I),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /khach-san-5-sao"},null,512),[[oe,u.value]])])]),e("div",Pn,[e("button",{type:"button",onClick:n[28]||(n[28]=I=>ze.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:L,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):W("",!0),le.value?(a(),i("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n[34]||(n[34]=I=>le.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:n[33]||(n[33]=Be(()=>{},["stop"]))},[n[87]||(n[87]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm cột footer mới")],-1)),e("div",Un,[e("div",null,[n[86]||(n[86]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tiêu đề cột",-1)),N(e("input",{"onUpdate:modelValue":n[31]||(n[31]=I=>ie.value=I),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Thông tin"},null,512),[[oe,ie.value]])])]),e("div",Dn,[e("button",{type:"button",onClick:n[32]||(n[32]=I=>le.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:tt,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):W("",!0),R.value?(a(),i("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n[40]||(n[40]=I=>R.value=!1)},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:n[39]||(n[39]=Be(()=>{},["stop"]))},[e("div",zn,[n[89]||(n[89]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Thêm liên kết footer",-1)),e("p",Nn,[n[88]||(n[88]=we("Thêm vào: ",-1)),e("strong",null,A(((ge=D.value[X.value])==null?void 0:ge.title)||`Cột ${X.value+1}`),1)])]),e("div",Vn,[e("div",null,[n[91]||(n[91]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn từ danh mục",-1)),N(e("select",{"onUpdate:modelValue":n[35]||(n[35]=I=>De.value=I),class:"w-full rounded-md border-gray-300 text-sm"},[n[90]||(n[90]=e("option",{value:""},"-- Hoặc nhập thủ công --",-1)),(a(!0),i(fe,null,be(he.value,I=>(a(),i("option",{key:I.id,value:I.id},A(I.name),9,On))),128))],512),[[We,De.value]])]),e("div",Bn,[n[92]||(n[92]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên liên kết",-1)),N(e("input",{"onUpdate:modelValue":n[36]||(n[36]=I=>se.value=I),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: Giới thiệu"},null,512),[[oe,se.value]])]),e("div",null,[n[93]||(n[93]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL",-1)),N(e("input",{"onUpdate:modelValue":n[37]||(n[37]=I=>$e.value=I),type:"text",class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Ví dụ: /gioi-thieu"},null,512),[[oe,$e.value]])])]),e("div",Hn,[e("button",{type:"button",onClick:n[38]||(n[38]=I=>R.value=!1),class:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Hủy"),e("button",{type:"button",onClick:Je,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Thêm")])])])):W("",!0)])}}};function fs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bs={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt=Symbol.for("react.transitional.element"),Wn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),Kn=Symbol.for("react.strict_mode"),Xn=Symbol.for("react.profiler"),Jn=Symbol.for("react.consumer"),Gn=Symbol.for("react.context"),Qn=Symbol.for("react.forward_ref"),Zn=Symbol.for("react.suspense"),er=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),tr=Symbol.for("react.activity"),Gt=Symbol.iterator;function sr(t){return t===null||typeof t!="object"?null:(t=Gt&&t[Gt]||t["@@iterator"],typeof t=="function"?t:null)}var hs={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xs=Object.assign,ws={};function wt(t,s,c){this.props=t,this.context=s,this.refs=ws,this.updater=c||hs}wt.prototype.isReactComponent={};wt.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};wt.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _s(){}_s.prototype=wt.prototype;function Wt(t,s,c){this.props=t,this.context=s,this.refs=ws,this.updater=c||hs}var Yt=Wt.prototype=new _s;Yt.constructor=Wt;xs(Yt,wt.prototype);Yt.isPureReactComponent=!0;var Qt=Array.isArray;function Ot(){}var Pe={H:null,A:null,T:null,S:null},ks=Object.prototype.hasOwnProperty;function Kt(t,s,c){var g=c.ref;return{$$typeof:qt,type:t,key:s,ref:g!==void 0?g:null,props:c}}function ar(t,s){return Kt(t.type,s,t.props)}function Xt(t){return typeof t=="object"&&t!==null&&t.$$typeof===qt}function lr(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(c){return s[c]})}var Zt=/\/+/g;function Dt(t,s){return typeof t=="object"&&t!==null&&t.key!=null?lr(""+t.key):s.toString(36)}function or(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Ot,Ot):(t.status="pending",t.then(function(s){t.status==="pending"&&(t.status="fulfilled",t.value=s)},function(s){t.status==="pending"&&(t.status="rejected",t.reason=s)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function bt(t,s,c,g,v){var y=typeof t;(y==="undefined"||y==="boolean")&&(t=null);var b=!1;if(t===null)b=!0;else switch(y){case"bigint":case"string":case"number":b=!0;break;case"object":switch(t.$$typeof){case qt:case Wn:b=!0;break;case ys:return b=t._init,bt(b(t._payload),s,c,g,v)}}if(b)return v=v(t),b=g===""?"."+Dt(t,0):g,Qt(v)?(c="",b!=null&&(c=b.replace(Zt,"$&/")+"/"),bt(v,s,c,"",function(o){return o})):v!=null&&(Xt(v)&&(v=ar(v,c+(v.key==null||t&&t.key===v.key?"":(""+v.key).replace(Zt,"$&/")+"/")+b)),s.push(v)),1;b=0;var T=g===""?".":g+":";if(Qt(t))for(var $=0;$<t.length;$++)g=t[$],y=T+Dt(g,$),b+=bt(g,s,c,y,v);else if($=sr(t),typeof $=="function")for(t=$.call(t),$=0;!(g=t.next()).done;)g=g.value,y=T+Dt(g,$++),b+=bt(g,s,c,y,v);else if(y==="object"){if(typeof t.then=="function")return bt(or(t),s,c,g,v);throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.")}return b}function Et(t,s,c){if(t==null)return t;var g=[],v=0;return bt(t,g,"","",function(y){return s.call(c,y,v++)}),g}function nr(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(c){(t._status===0||t._status===-1)&&(t._status=1,t._result=c)},function(c){(t._status===0||t._status===-1)&&(t._status=2,t._result=c)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var es=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},rr={map:Et,forEach:function(t,s,c){Et(t,function(){s.apply(this,arguments)},c)},count:function(t){var s=0;return Et(t,function(){s++}),s},toArray:function(t){return Et(t,function(s){return s})||[]},only:function(t){if(!Xt(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Activity=tr;ye.Children=rr;ye.Component=wt;ye.Fragment=Yn;ye.Profiler=Xn;ye.PureComponent=Wt;ye.StrictMode=Kn;ye.Suspense=Zn;ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pe;ye.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Pe.H.useMemoCache(t)}};ye.cache=function(t){return function(){return t.apply(null,arguments)}};ye.cacheSignal=function(){return null};ye.cloneElement=function(t,s,c){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var g=xs({},t.props),v=t.key;if(s!=null)for(y in s.key!==void 0&&(v=""+s.key),s)!ks.call(s,y)||y==="key"||y==="__self"||y==="__source"||y==="ref"&&s.ref===void 0||(g[y]=s[y]);var y=arguments.length-2;if(y===1)g.children=c;else if(1<y){for(var b=Array(y),T=0;T<y;T++)b[T]=arguments[T+2];g.children=b}return Kt(t.type,v,g)};ye.createContext=function(t){return t={$$typeof:Gn,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:Jn,_context:t},t};ye.createElement=function(t,s,c){var g,v={},y=null;if(s!=null)for(g in s.key!==void 0&&(y=""+s.key),s)ks.call(s,g)&&g!=="key"&&g!=="__self"&&g!=="__source"&&(v[g]=s[g]);var b=arguments.length-2;if(b===1)v.children=c;else if(1<b){for(var T=Array(b),$=0;$<b;$++)T[$]=arguments[$+2];v.children=T}if(t&&t.defaultProps)for(g in b=t.defaultProps,b)v[g]===void 0&&(v[g]=b[g]);return Kt(t,y,v)};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:Qn,render:t}};ye.isValidElement=Xt;ye.lazy=function(t){return{$$typeof:ys,_payload:{_status:-1,_result:t},_init:nr}};ye.memo=function(t,s){return{$$typeof:er,type:t,compare:s===void 0?null:s}};ye.startTransition=function(t){var s=Pe.T,c={};Pe.T=c;try{var g=t(),v=Pe.S;v!==null&&v(c,g),typeof g=="object"&&g!==null&&typeof g.then=="function"&&g.then(Ot,es)}catch(y){es(y)}finally{s!==null&&c.types!==null&&(s.types=c.types),Pe.T=s}};ye.unstable_useCacheRefresh=function(){return Pe.H.useCacheRefresh()};ye.use=function(t){return Pe.H.use(t)};ye.useActionState=function(t,s,c){return Pe.H.useActionState(t,s,c)};ye.useCallback=function(t,s){return Pe.H.useCallback(t,s)};ye.useContext=function(t){return Pe.H.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t,s){return Pe.H.useDeferredValue(t,s)};ye.useEffect=function(t,s){return Pe.H.useEffect(t,s)};ye.useEffectEvent=function(t){return Pe.H.useEffectEvent(t)};ye.useId=function(){return Pe.H.useId()};ye.useImperativeHandle=function(t,s,c){return Pe.H.useImperativeHandle(t,s,c)};ye.useInsertionEffect=function(t,s){return Pe.H.useInsertionEffect(t,s)};ye.useLayoutEffect=function(t,s){return Pe.H.useLayoutEffect(t,s)};ye.useMemo=function(t,s){return Pe.H.useMemo(t,s)};ye.useOptimistic=function(t,s){return Pe.H.useOptimistic(t,s)};ye.useReducer=function(t,s,c){return Pe.H.useReducer(t,s,c)};ye.useRef=function(t){return Pe.H.useRef(t)};ye.useState=function(t){return Pe.H.useState(t)};ye.useSyncExternalStore=function(t,s,c){return Pe.H.useSyncExternalStore(t,s,c)};ye.useTransition=function(){return Pe.H.useTransition()};ye.version="19.2.0";bs.exports=ye;var yt=bs.exports;const Z=fs(yt);var $s={exports:{}},Xe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ir=yt;function Cs(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ut(){}var Ke={d:{f:ut,r:function(){throw Error(Cs(522))},D:ut,C:ut,L:ut,m:ut,X:ut,S:ut,M:ut},p:0,findDOMNode:null},dr=Symbol.for("react.portal");function ur(t,s,c){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dr,key:g==null?null:""+g,children:t,containerInfo:s,implementation:c}}var $t=ir.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Rt(t,s){if(t==="font")return"";if(typeof s=="string")return s==="use-credentials"?s:""}Xe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ke;Xe.createPortal=function(t,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)throw Error(Cs(299));return ur(t,s,null,c)};Xe.flushSync=function(t){var s=$t.T,c=Ke.p;try{if($t.T=null,Ke.p=2,t)return t()}finally{$t.T=s,Ke.p=c,Ke.d.f()}};Xe.preconnect=function(t,s){typeof t=="string"&&(s?(s=s.crossOrigin,s=typeof s=="string"?s==="use-credentials"?s:"":void 0):s=null,Ke.d.C(t,s))};Xe.prefetchDNS=function(t){typeof t=="string"&&Ke.d.D(t)};Xe.preinit=function(t,s){if(typeof t=="string"&&s&&typeof s.as=="string"){var c=s.as,g=Rt(c,s.crossOrigin),v=typeof s.integrity=="string"?s.integrity:void 0,y=typeof s.fetchPriority=="string"?s.fetchPriority:void 0;c==="style"?Ke.d.S(t,typeof s.precedence=="string"?s.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:y}):c==="script"&&Ke.d.X(t,{crossOrigin:g,integrity:v,fetchPriority:y,nonce:typeof s.nonce=="string"?s.nonce:void 0})}};Xe.preinitModule=function(t,s){if(typeof t=="string")if(typeof s=="object"&&s!==null){if(s.as==null||s.as==="script"){var c=Rt(s.as,s.crossOrigin);Ke.d.M(t,{crossOrigin:c,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0})}}else s==null&&Ke.d.M(t)};Xe.preload=function(t,s){if(typeof t=="string"&&typeof s=="object"&&s!==null&&typeof s.as=="string"){var c=s.as,g=Rt(c,s.crossOrigin);Ke.d.L(t,c,{crossOrigin:g,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0,type:typeof s.type=="string"?s.type:void 0,fetchPriority:typeof s.fetchPriority=="string"?s.fetchPriority:void 0,referrerPolicy:typeof s.referrerPolicy=="string"?s.referrerPolicy:void 0,imageSrcSet:typeof s.imageSrcSet=="string"?s.imageSrcSet:void 0,imageSizes:typeof s.imageSizes=="string"?s.imageSizes:void 0,media:typeof s.media=="string"?s.media:void 0})}};Xe.preloadModule=function(t,s){if(typeof t=="string")if(s){var c=Rt(s.as,s.crossOrigin);Ke.d.m(t,{as:typeof s.as=="string"&&s.as!=="script"?s.as:void 0,crossOrigin:c,integrity:typeof s.integrity=="string"?s.integrity:void 0})}else Ke.d.m(t)};Xe.requestFormReset=function(t){Ke.d.r(t)};Xe.unstable_batchedUpdates=function(t,s){return t(s)};Xe.useFormState=function(t,s,c){return $t.H.useFormState(t,s,c)};Xe.useFormStatus=function(){return $t.H.useHostTransitionStatus()};Xe.version="19.2.0";function Ss(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ss)}catch(t){console.error(t)}}Ss(),$s.exports=Xe;var cr=$s.exports;const pr=fs(cr);var mr=t=>{switch(t){case"success":return fr;case"info":return yr;case"warning":return br;case"error":return hr;default:return null}},gr=Array(12).fill(0),vr=({visible:t,className:s})=>Z.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},Z.createElement("div",{className:"sonner-spinner"},gr.map((c,g)=>Z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${g}`})))),fr=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),br=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),yr=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),hr=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),xr=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),wr=()=>{let[t,s]=Z.useState(document.hidden);return Z.useEffect(()=>{let c=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",c),()=>window.removeEventListener("visibilitychange",c)},[]),t},Bt=1,_r=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;let{message:c,...g}=t,v=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:Bt++,y=this.toasts.find(T=>T.id===v),b=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(v)&&this.dismissedToasts.delete(v),y?this.toasts=this.toasts.map(T=>T.id===v?(this.publish({...T,...t,id:v,title:c}),{...T,...t,id:v,dismissible:b,title:c}):T):this.addToast({title:c,...g,dismissible:b,id:v}),v},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(s=>{this.subscribers.forEach(c=>c({id:s.id,dismiss:!0}))}),this.subscribers.forEach(s=>s({id:t,dismiss:!0})),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let c;s.loading!==void 0&&(c=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));let g=t instanceof Promise?t:t(),v=c!==void 0,y,b=g.then(async $=>{if(y=["resolve",$],Z.isValidElement($))v=!1,this.create({id:c,type:"default",message:$});else if($r($)&&!$.ok){v=!1;let o=typeof s.error=="function"?await s.error(`HTTP error! status: ${$.status}`):s.error,_=typeof s.description=="function"?await s.description(`HTTP error! status: ${$.status}`):s.description;this.create({id:c,type:"error",message:o,description:_})}else if(s.success!==void 0){v=!1;let o=typeof s.success=="function"?await s.success($):s.success,_=typeof s.description=="function"?await s.description($):s.description;this.create({id:c,type:"success",message:o,description:_})}}).catch(async $=>{if(y=["reject",$],s.error!==void 0){v=!1;let o=typeof s.error=="function"?await s.error($):s.error,_=typeof s.description=="function"?await s.description($):s.description;this.create({id:c,type:"error",message:o,description:_})}}).finally(()=>{var $;v&&(this.dismiss(c),c=void 0),($=s.finally)==null||$.call(s)}),T=()=>new Promise(($,o)=>b.then(()=>y[0]==="reject"?o(y[1]):$(y[1])).catch(o));return typeof c!="string"&&typeof c!="number"?{unwrap:T}:Object.assign(c,{unwrap:T})},this.custom=(t,s)=>{let c=(s==null?void 0:s.id)||Bt++;return this.create({jsx:t(c),id:c,...s}),c},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ge=new _r,kr=(t,s)=>{let c=(s==null?void 0:s.id)||Bt++;return Ge.addToast({title:t,...s,id:c}),c},$r=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Cr=kr,Sr=()=>Ge.toasts,Tr=()=>Ge.getActiveToasts(),Qe=Object.assign(Cr,{success:Ge.success,info:Ge.info,warning:Ge.warning,error:Ge.error,custom:Ge.custom,message:Ge.message,promise:Ge.promise,dismiss:Ge.dismiss,loading:Ge.loading},{getHistory:Sr,getToasts:Tr});function jr(t,{insertAt:s}={}){if(typeof document>"u")return;let c=document.head||document.getElementsByTagName("head")[0],g=document.createElement("style");g.type="text/css",s==="top"&&c.firstChild?c.insertBefore(g,c.firstChild):c.appendChild(g),g.styleSheet?g.styleSheet.cssText=t:g.appendChild(document.createTextNode(t))}jr(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ft(t){return t.label!==void 0}var Er=3,Fr="32px",Ar="16px",ts=4e3,Lr=356,Rr=14,Ir=20,Mr=200;function st(...t){return t.filter(Boolean).join(" ")}function Pr(t){let[s,c]=t.split("-"),g=[];return s&&g.push(s),c&&g.push(c),g}var Ur=t=>{var s,c,g,v,y,b,T,$,o,_,P;let{invert:Q,toast:d,unstyled:ee,interacting:j,setHeights:q,visibleToasts:V,heights:h,index:x,toasts:O,expanded:M,removeToast:K,defaultRichColors:ae,closeButton:ve,style:pe,cancelButtonStyle:Se,actionButtonStyle:Ue,className:Ae="",descriptionClassName:he="",duration:xe,position:Le,gap:ze,loadingIcon:Ne,expandByDefault:Ve,classNames:me,icons:ne,closeButtonAriaLabel:F="Close toast",pauseWhenPageIsHidden:E}=t,[u,w]=Z.useState(null),[l,f]=Z.useState(null),[S,k]=Z.useState(!1),[Y,L]=Z.useState(!1),[p,te]=Z.useState(!1),[ce,ue]=Z.useState(!1),[re,Te]=Z.useState(!1),[U,B]=Z.useState(0),[r,D]=Z.useState(0),le=Z.useRef(d.duration||xe||ts),R=Z.useRef(null),X=Z.useRef(null),ie=x===0,De=x+1<=V,se=d.type,$e=d.dismissible!==!1,qe=d.className||"",tt=d.descriptionClassName||"",Oe=Z.useMemo(()=>h.findIndex(G=>G.toastId===d.id)||0,[h,d.id]),Je=Z.useMemo(()=>{var G;return(G=d.closeButton)!=null?G:ve},[d.closeButton,ve]),at=Z.useMemo(()=>d.duration||xe||ts,[d.duration,xe]),He=Z.useRef(0),et=Z.useRef(0),lt=Z.useRef(0),rt=Z.useRef(null),[It,ft]=Le.split("-"),Tt=Z.useMemo(()=>h.reduce((G,ge,I)=>I>=Oe?G:G+ge.height,0),[h,Oe]),jt=wr(),Mt=d.invert||Q,H=se==="loading";et.current=Z.useMemo(()=>Oe*ze+Tt,[Oe,Tt]),Z.useEffect(()=>{le.current=at},[at]),Z.useEffect(()=>{k(!0)},[]),Z.useEffect(()=>{let G=X.current;if(G){let ge=G.getBoundingClientRect().height;return D(ge),q(I=>[{toastId:d.id,height:ge,position:d.position},...I]),()=>q(I=>I.filter(Ce=>Ce.toastId!==d.id))}},[q,d.id]),Z.useLayoutEffect(()=>{if(!S)return;let G=X.current,ge=G.style.height;G.style.height="auto";let I=G.getBoundingClientRect().height;G.style.height=ge,D(I),q(Ce=>Ce.find(ke=>ke.toastId===d.id)?Ce.map(ke=>ke.toastId===d.id?{...ke,height:I}:ke):[{toastId:d.id,height:I,position:d.position},...Ce])},[S,d.title,d.description,q,d.id]);let n=Z.useCallback(()=>{L(!0),B(et.current),q(G=>G.filter(ge=>ge.toastId!==d.id)),setTimeout(()=>{K(d)},Mr)},[d,K,q,et]);Z.useEffect(()=>{if(d.promise&&se==="loading"||d.duration===1/0||d.type==="loading")return;let G;return M||j||E&&jt?(()=>{if(lt.current<He.current){let ge=new Date().getTime()-He.current;le.current=le.current-ge}lt.current=new Date().getTime()})():le.current!==1/0&&(He.current=new Date().getTime(),G=setTimeout(()=>{var ge;(ge=d.onAutoClose)==null||ge.call(d,d),n()},le.current)),()=>clearTimeout(G)},[M,j,d,se,E,jt,n]),Z.useEffect(()=>{d.delete&&n()},[n,d.delete]);function _e(){var G,ge,I;return ne!=null&&ne.loading?Z.createElement("div",{className:st(me==null?void 0:me.loader,(G=d==null?void 0:d.classNames)==null?void 0:G.loader,"sonner-loader"),"data-visible":se==="loading"},ne.loading):Ne?Z.createElement("div",{className:st(me==null?void 0:me.loader,(ge=d==null?void 0:d.classNames)==null?void 0:ge.loader,"sonner-loader"),"data-visible":se==="loading"},Ne):Z.createElement(vr,{className:st(me==null?void 0:me.loader,(I=d==null?void 0:d.classNames)==null?void 0:I.loader),visible:se==="loading"})}return Z.createElement("li",{tabIndex:0,ref:X,className:st(Ae,qe,me==null?void 0:me.toast,(s=d==null?void 0:d.classNames)==null?void 0:s.toast,me==null?void 0:me.default,me==null?void 0:me[se],(c=d==null?void 0:d.classNames)==null?void 0:c[se]),"data-sonner-toast":"","data-rich-colors":(g=d.richColors)!=null?g:ae,"data-styled":!(d.jsx||d.unstyled||ee),"data-mounted":S,"data-promise":!!d.promise,"data-swiped":re,"data-removed":Y,"data-visible":De,"data-y-position":It,"data-x-position":ft,"data-index":x,"data-front":ie,"data-swiping":p,"data-dismissible":$e,"data-type":se,"data-invert":Mt,"data-swipe-out":ce,"data-swipe-direction":l,"data-expanded":!!(M||Ve&&S),style:{"--index":x,"--toasts-before":x,"--z-index":O.length-x,"--offset":`${Y?U:et.current}px`,"--initial-height":Ve?"auto":`${r}px`,...pe,...d.style},onDragEnd:()=>{te(!1),w(null),rt.current=null},onPointerDown:G=>{H||!$e||(R.current=new Date,B(et.current),G.target.setPointerCapture(G.pointerId),G.target.tagName!=="BUTTON"&&(te(!0),rt.current={x:G.clientX,y:G.clientY}))},onPointerUp:()=>{var G,ge,I,Ce;if(ce||!$e)return;rt.current=null;let ke=Number(((G=X.current)==null?void 0:G.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ee=Number(((ge=X.current)==null?void 0:ge.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Fe=new Date().getTime()-((I=R.current)==null?void 0:I.getTime()),Ye=u==="x"?ke:Ee,dt=Math.abs(Ye)/Fe;if(Math.abs(Ye)>=Ir||dt>.11){B(et.current),(Ce=d.onDismiss)==null||Ce.call(d,d),f(u==="x"?ke>0?"right":"left":Ee>0?"down":"up"),n(),ue(!0),Te(!1);return}te(!1),w(null)},onPointerMove:G=>{var ge,I,Ce,ke;if(!rt.current||!$e||((ge=window.getSelection())==null?void 0:ge.toString().length)>0)return;let Ee=G.clientY-rt.current.y,Fe=G.clientX-rt.current.x,Ye=(I=t.swipeDirections)!=null?I:Pr(Le);!u&&(Math.abs(Fe)>1||Math.abs(Ee)>1)&&w(Math.abs(Fe)>Math.abs(Ee)?"x":"y");let dt={x:0,y:0};u==="y"?(Ye.includes("top")||Ye.includes("bottom"))&&(Ye.includes("top")&&Ee<0||Ye.includes("bottom")&&Ee>0)&&(dt.y=Ee):u==="x"&&(Ye.includes("left")||Ye.includes("right"))&&(Ye.includes("left")&&Fe<0||Ye.includes("right")&&Fe>0)&&(dt.x=Fe),(Math.abs(dt.x)>0||Math.abs(dt.y)>0)&&Te(!0),(Ce=X.current)==null||Ce.style.setProperty("--swipe-amount-x",`${dt.x}px`),(ke=X.current)==null||ke.style.setProperty("--swipe-amount-y",`${dt.y}px`)}},Je&&!d.jsx?Z.createElement("button",{"aria-label":F,"data-disabled":H,"data-close-button":!0,onClick:H||!$e?()=>{}:()=>{var G;n(),(G=d.onDismiss)==null||G.call(d,d)},className:st(me==null?void 0:me.closeButton,(v=d==null?void 0:d.classNames)==null?void 0:v.closeButton)},(y=ne==null?void 0:ne.close)!=null?y:xr):null,d.jsx||yt.isValidElement(d.title)?d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title:Z.createElement(Z.Fragment,null,se||d.icon||d.promise?Z.createElement("div",{"data-icon":"",className:st(me==null?void 0:me.icon,(b=d==null?void 0:d.classNames)==null?void 0:b.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||_e():null,d.type!=="loading"?d.icon||(ne==null?void 0:ne[se])||mr(se):null):null,Z.createElement("div",{"data-content":"",className:st(me==null?void 0:me.content,(T=d==null?void 0:d.classNames)==null?void 0:T.content)},Z.createElement("div",{"data-title":"",className:st(me==null?void 0:me.title,($=d==null?void 0:d.classNames)==null?void 0:$.title)},typeof d.title=="function"?d.title():d.title),d.description?Z.createElement("div",{"data-description":"",className:st(he,tt,me==null?void 0:me.description,(o=d==null?void 0:d.classNames)==null?void 0:o.description)},typeof d.description=="function"?d.description():d.description):null),yt.isValidElement(d.cancel)?d.cancel:d.cancel&&Ft(d.cancel)?Z.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||Se,onClick:G=>{var ge,I;Ft(d.cancel)&&$e&&((I=(ge=d.cancel).onClick)==null||I.call(ge,G),n())},className:st(me==null?void 0:me.cancelButton,(_=d==null?void 0:d.classNames)==null?void 0:_.cancelButton)},d.cancel.label):null,yt.isValidElement(d.action)?d.action:d.action&&Ft(d.action)?Z.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||Ue,onClick:G=>{var ge,I;Ft(d.action)&&((I=(ge=d.action).onClick)==null||I.call(ge,G),!G.defaultPrevented&&n())},className:st(me==null?void 0:me.actionButton,(P=d==null?void 0:d.classNames)==null?void 0:P.actionButton)},d.action.label):null))};function ss(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Dr(t,s){let c={};return[t,s].forEach((g,v)=>{let y=v===1,b=y?"--mobile-offset":"--offset",T=y?Ar:Fr;function $(o){["top","right","bottom","left"].forEach(_=>{c[`${b}-${_}`]=typeof o=="number"?`${o}px`:o})}typeof g=="number"||typeof g=="string"?$(g):typeof g=="object"?["top","right","bottom","left"].forEach(o=>{g[o]===void 0?c[`${b}-${o}`]=T:c[`${b}-${o}`]=typeof g[o]=="number"?`${g[o]}px`:g[o]}):$(T)}),c}yt.forwardRef(function(t,s){let{invert:c,position:g="bottom-right",hotkey:v=["altKey","KeyT"],expand:y,closeButton:b,className:T,offset:$,mobileOffset:o,theme:_="light",richColors:P,duration:Q,style:d,visibleToasts:ee=Er,toastOptions:j,dir:q=ss(),gap:V=Rr,loadingIcon:h,icons:x,containerAriaLabel:O="Notifications",pauseWhenPageIsHidden:M}=t,[K,ae]=Z.useState([]),ve=Z.useMemo(()=>Array.from(new Set([g].concat(K.filter(E=>E.position).map(E=>E.position)))),[K,g]),[pe,Se]=Z.useState([]),[Ue,Ae]=Z.useState(!1),[he,xe]=Z.useState(!1),[Le,ze]=Z.useState(_!=="system"?_:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ne=Z.useRef(null),Ve=v.join("+").replace(/Key/g,"").replace(/Digit/g,""),me=Z.useRef(null),ne=Z.useRef(!1),F=Z.useCallback(E=>{ae(u=>{var w;return(w=u.find(l=>l.id===E.id))!=null&&w.delete||Ge.dismiss(E.id),u.filter(({id:l})=>l!==E.id)})},[]);return Z.useEffect(()=>Ge.subscribe(E=>{if(E.dismiss){ae(u=>u.map(w=>w.id===E.id?{...w,delete:!0}:w));return}setTimeout(()=>{pr.flushSync(()=>{ae(u=>{let w=u.findIndex(l=>l.id===E.id);return w!==-1?[...u.slice(0,w),{...u[w],...E},...u.slice(w+1)]:[E,...u]})})})}),[]),Z.useEffect(()=>{if(_!=="system"){ze(_);return}if(_==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ze("dark"):ze("light")),typeof window>"u")return;let E=window.matchMedia("(prefers-color-scheme: dark)");try{E.addEventListener("change",({matches:u})=>{ze(u?"dark":"light")})}catch{E.addListener(({matches:w})=>{try{ze(w?"dark":"light")}catch(l){console.error(l)}})}},[_]),Z.useEffect(()=>{K.length<=1&&Ae(!1)},[K]),Z.useEffect(()=>{let E=u=>{var w,l;v.every(f=>u[f]||u.code===f)&&(Ae(!0),(w=Ne.current)==null||w.focus()),u.code==="Escape"&&(document.activeElement===Ne.current||(l=Ne.current)!=null&&l.contains(document.activeElement))&&Ae(!1)};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[v]),Z.useEffect(()=>{if(Ne.current)return()=>{me.current&&(me.current.focus({preventScroll:!0}),me.current=null,ne.current=!1)}},[Ne.current]),Z.createElement("section",{ref:s,"aria-label":`${O} ${Ve}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ve.map((E,u)=>{var w;let[l,f]=E.split("-");return K.length?Z.createElement("ol",{key:E,dir:q==="auto"?ss():q,tabIndex:-1,ref:Ne,className:T,"data-sonner-toaster":!0,"data-theme":Le,"data-y-position":l,"data-lifted":Ue&&K.length>1&&!y,"data-x-position":f,style:{"--front-toast-height":`${((w=pe[0])==null?void 0:w.height)||0}px`,"--width":`${Lr}px`,"--gap":`${V}px`,...d,...Dr($,o)},onBlur:S=>{ne.current&&!S.currentTarget.contains(S.relatedTarget)&&(ne.current=!1,me.current&&(me.current.focus({preventScroll:!0}),me.current=null))},onFocus:S=>{S.target instanceof HTMLElement&&S.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,me.current=S.relatedTarget)},onMouseEnter:()=>Ae(!0),onMouseMove:()=>Ae(!0),onMouseLeave:()=>{he||Ae(!1)},onDragEnd:()=>Ae(!1),onPointerDown:S=>{S.target instanceof HTMLElement&&S.target.dataset.dismissible==="false"||xe(!0)},onPointerUp:()=>xe(!1)},K.filter(S=>!S.position&&u===0||S.position===E).map((S,k)=>{var Y,L;return Z.createElement(Ur,{key:S.id,icons:x,index:k,toast:S,defaultRichColors:P,duration:(Y=j==null?void 0:j.duration)!=null?Y:Q,className:j==null?void 0:j.className,descriptionClassName:j==null?void 0:j.descriptionClassName,invert:c,visibleToasts:ee,closeButton:(L=j==null?void 0:j.closeButton)!=null?L:b,interacting:he,position:E,style:j==null?void 0:j.style,unstyled:j==null?void 0:j.unstyled,classNames:j==null?void 0:j.classNames,cancelButtonStyle:j==null?void 0:j.cancelButtonStyle,actionButtonStyle:j==null?void 0:j.actionButtonStyle,removeToast:F,toasts:K.filter(p=>p.position==S.position),heights:pe.filter(p=>p.position==S.position),setHeights:Se,expandByDefault:y,gap:V,loadingIcon:h,expanded:Ue,pauseWhenPageIsHidden:M,swipeDirections:t.swipeDirections})})):null}))});const zr={class:"min-h-screen bg-gray-100"},Nr={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Vr={class:"px-4 py-6 sm:px-0"},Or={class:"bg-white shadow rounded-lg p-6 mb-6"},Br={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Hr={class:"flex flex-col items-center gap-2"},qr={class:"inline-flex items-center gap-2 text-blue-600"},Wr={class:"text-2xl font-bold"},Yr={class:"flex flex-col items-center gap-2"},Kr={class:"inline-flex items-center gap-2 text-green-600"},Xr={class:"text-2xl font-bold"},Jr={class:"flex flex-col items-center gap-2"},Gr={class:"inline-flex items-center gap-2 text-red-600"},Qr={class:"text-2xl font-bold"},Zr={class:"flex flex-col items-center gap-2"},ei={class:"inline-flex items-center gap-2 text-purple-600"},ti={class:"text-2xl font-bold"},si={class:"bg-white shadow rounded-lg p-6"},ai={class:"flex justify-between items-center mb-4"},li={class:"space-y-4"},oi={class:"flex justify-between items-start mb-2"},ni={class:"font-medium text-gray-900"},ri={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},ii={class:"font-medium"},di={class:"font-medium"},ui={class:"font-medium"},ci={class:"font-medium"},pi={key:0,class:"mt-4"},mi={class:"grid grid-cols-7 gap-1 text-xs"},gi={class:"text-gray-500"},vi={class:"font-medium"},fi={__name:"Monitoring",setup(t){const s=m({total_websites:0,online_websites:0,offline_websites:0}),c=m([]),g=m("7days"),v=Ie(()=>c.value.filter($=>$.ssl_enabled).length),y=async()=>{try{const $=await z.get("/api/monitoring/uptime");s.value=$.data}catch{Qe.error("Failed to fetch uptime statistics")}},b=async()=>{try{const _=(await z.get("/api/websites")).data.map(async P=>{try{const Q=await z.get(`/api/monitoring/stats/${P.id}?period=${g.value}`);return{...P,...Q.data.summary}}catch{return{...P,total_visits:0,total_unique_visitors:0,total_bandwidth:"0 B",average_response_time:0,uptime_percentage:0,daily_stats:[]}}});c.value=await Promise.all(_)}catch{Qe.error("Failed to fetch website statistics")}},T=$=>new Date($).toLocaleDateString("en-US",{month:"short",day:"numeric"});return Ze(()=>{y(),b()}),($,o)=>(a(),i("div",zr,[e("div",Nr,[e("div",Vr,[o[13]||(o[13]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-6"},"Monitoring",-1)),e("div",Or,[o[5]||(o[5]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"System Overview",-1)),e("div",Br,[e("div",Hr,[e("div",qr,[J(C(vt),{class:"size-5"}),e("span",Wr,A(s.value.total_websites),1)]),o[1]||(o[1]=e("p",{class:"text-sm text-gray-500"},"Total Websites",-1))]),e("div",Yr,[e("div",Kr,[J(C(Ct),{class:"size-5"}),e("span",Xr,A(s.value.online_websites),1)]),o[2]||(o[2]=e("p",{class:"text-sm text-gray-500"},"Online",-1))]),e("div",Jr,[e("div",Gr,[J(C(St),{class:"size-5"}),e("span",Qr,A(s.value.offline_websites),1)]),o[3]||(o[3]=e("p",{class:"text-sm text-gray-500"},"Offline",-1))]),e("div",Zr,[e("div",ei,[J(C(mt),{class:"size-5"}),e("span",ti,A(v.value),1)]),o[4]||(o[4]=e("p",{class:"text-sm text-gray-500"},"SSL Enabled",-1))])])]),e("div",si,[e("div",ai,[o[7]||(o[7]=e("h2",{class:"text-lg font-medium text-gray-900"},"Website Statistics",-1)),N(e("select",{"onUpdate:modelValue":o[0]||(o[0]=_=>g.value=_),onChange:b,class:"border-gray-300 rounded-md shadow-sm"},[...o[6]||(o[6]=[e("option",{value:"24hours"},"Last 24 Hours",-1),e("option",{value:"7days"},"Last 7 Days",-1),e("option",{value:"30days"},"Last 30 Days",-1),e("option",{value:"90days"},"Last 90 Days",-1)])],544),[[We,g.value]])]),e("div",li,[(a(!0),i(fe,null,be(c.value,_=>(a(),i("div",{key:_.id,class:"border rounded-lg p-4"},[e("div",oi,[e("h3",ni,A(_.domain),1),e("span",{class:Me(["inline-flex items-center gap-1",_.current_is_online?"text-green-600":"text-red-600"])},[_.current_is_online?(a(),de(C(Ct),{key:0,class:"size-4"})):(a(),de(C(St),{key:1,class:"size-4"})),we(" "+A(_.current_is_online?"Online":"Offline"),1)],2)]),e("div",ri,[e("div",null,[o[8]||(o[8]=e("p",{class:"text-gray-500"},"Visits",-1)),e("p",ii,A(_.total_visits),1)]),e("div",null,[o[9]||(o[9]=e("p",{class:"text-gray-500"},"Unique Visitors",-1)),e("p",di,A(_.total_unique_visitors),1)]),e("div",null,[o[10]||(o[10]=e("p",{class:"text-gray-500"},"Bandwidth",-1)),e("p",ui,A(_.total_bandwidth),1)]),e("div",null,[o[11]||(o[11]=e("p",{class:"text-gray-500"},"Avg Response Time",-1)),e("p",ci,A(_.average_response_time)+"ms",1)])]),_.daily_stats&&_.daily_stats.length>0?(a(),i("div",pi,[o[12]||(o[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Daily Stats",-1)),e("div",mi,[(a(!0),i(fe,null,be(_.daily_stats,P=>(a(),i("div",{key:P.date,class:"text-center"},[e("div",gi,A(T(P.date)),1),e("div",vi,A(P.visits),1)]))),128))])])):W("",!0)]))),128))])])])])]))}},bi={class:"p-8 max-w-7xl mx-auto"},yi={class:"flex flex-wrap gap-2 mb-4"},hi={class:"flex flex-wrap justify-between items-start gap-4 mb-6"},xi={class:"flex justify-between items-center gap-4 p-4 bg-white rounded-lg border border-slate-200 mb-6"},wi={class:"flex gap-2 items-center"},_i={class:"relative w-72"},ki={class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"},$i={class:"bg-white rounded-lg border border-slate-200"},Ci={key:0,class:"px-6 py-4 text-sm text-gray-500"},Si={key:1,class:"flex flex-col"},Ti={class:"list-none"},ji={class:"grid grid-cols-12 gap-4 items-center px-6 py-4 cursor-pointer hover:bg-slate-50"},Ei={class:"col-span-6 flex items-center gap-3"},Fi={class:"flex flex-col"},Ai={class:"text-slate-800 text-sm font-medium"},Li={class:"text-slate-500 text-xs"},Ri={class:"col-span-3 text-sm text-slate-600"},Ii={class:"col-span-1 text-sm text-slate-600"},Mi={class:"col-span-2 flex justify-end gap-2 text-slate-500"},Pi=["onClick"],Ui=["onClick"],Di=["onClick"],zi={class:"pl-10 bg-slate-50/50"},Ni={class:"col-span-6 flex items-center gap-2 text-sm text-slate-700"},Vi={class:"col-span-3 text-sm text-slate-600"},Oi={class:"col-span-1 text-sm text-slate-600"},Bi={class:"col-span-2 flex justify-end gap-2 text-slate-500"},Hi=["onClick"],qi=["onClick"],Wi=["onClick"],Yi={__name:"FoldersManagement",setup(t){const c=pt().params.websiteId,g=m([]),v=m(null),y=m(!1),b=m(""),T=m(""),$=m(""),o=async()=>{y.value=!0,b.value="";try{const[V,h]=await Promise.all([z.get(`/api/websites/${c}`),z.get(`/api/websites/${c}/folders`)]);v.value=V.data;const O=(h.data||[]).map(M=>({...M,id:Number(M.id),parent_id:M.parent_id==null?null:Number(M.parent_id)}));g.value=O}finally{y.value=!1}},_=V=>{const h=V.id,x=Q(V.id),O=x?`/preview/folder/${h}/${x}`:`/preview/folder/${h}`,M=localStorage.getItem("adminToken")||"";if(!M){window.open(O,"_blank");return}const K=`${O}?token=${encodeURIComponent(M)}`;window.open(K,"_blank")},P=V=>{if(!v.value)return;const h=Q(V.id);if(!h)return;const x=v.value.domain.split("."),O=x.length>2?x.slice(-2).join("."):v.value.domain,K=`${v.value.ssl_enabled?"https://":"http://"}${O}/${h}`;window.open(K,"_blank")},Q=V=>{const h=new Map((g.value||[]).map(M=>[String(M.id),M]));let x=h.get(String(V));const O=[];for(;x&&(x.slug&&O.unshift(x.slug),!(!x.parent_id||(x=h.get(String(x.parent_id)),x&&String(x.id)===String(V)))););return O.join("/")},d=Ie(()=>{const V=[...g.value||[]],h=new Map(V.map(pe=>[String(pe.id),pe])),x=pe=>pe.sort((Se,Ue)=>(Se.name||"").localeCompare(Ue.name||"")),O=pe=>V.filter(Se=>String(Se.parent_id)===String(pe)),M=pe=>!pe.parent_id||!h.has(String(pe.parent_id))||String(pe.parent_id)===String(pe.id),K=x(V.filter(M)),ae=[],ve=(pe,Se)=>{ae.push({...pe,depth:Se}),x(O(pe.id)).forEach(Ue=>ve(Ue,Se+1))};return K.forEach(pe=>ve(pe,0)),ae}),ee=Ie(()=>{const V=($.value||"").trim().toLowerCase(),h=d.value,x=new Set(h.filter(K=>K.depth===0).map(K=>K.id));if(!V)return h.filter(K=>x.has(K.id));const O=h.filter(K=>(K.name||"").toLowerCase().includes(V)||(K.slug||"").toLowerCase().includes(V)),M=new Set(O.map(K=>{let ae=K;for(;ae&&ae.depth>0;){const ve=h.find(pe=>String(pe.id)===String(ae.parent_id));if(!ve)break;ae=ve}return ae?ae.id:K.id}));return h.filter(K=>K.depth===0&&M.has(K.id))}),j=V=>{const h=($.value||"").trim().toLowerCase(),O=d.value.filter(M=>String(M.parent_id)===String(V));return h?O.filter(M=>(M.name||"").toLowerCase().includes(h)||(M.slug||"").toLowerCase().includes(h)):O},q=async V=>{var h,x;b.value="",T.value="";try{await z.delete(`/api/websites/${c}/folders/${V.id}`),g.value=(g.value||[]).filter(O=>O.id!==V.id),b.value="Đã xóa thư mục",T.value="success"}catch(O){b.value=((x=(h=O==null?void 0:O.response)==null?void 0:h.data)==null?void 0:x.error)||"Không thể xóa thư mục",T.value="error"}};return Ze(o),(V,h)=>{const x=nt("router-link");return a(),i("div",bi,[e("div",yi,[J(x,{to:"/",class:"text-slate-500 text-sm font-medium hover:text-primary"},{default:je(()=>[...h[1]||(h[1]=[we("Bảng điều khiển",-1)])]),_:1}),h[2]||(h[2]=e("span",{class:"text-slate-500 text-sm font-medium"},"/",-1)),h[3]||(h[3]=e("span",{class:"text-slate-800 text-sm font-medium"},"Danh mục",-1))]),e("div",hi,[h[5]||(h[5]=e("div",{class:"flex flex-col gap-2"},[e("h1",{class:"text-slate-900 text-3xl font-bold leading-tight tracking-tight"},"Quản lý Danh mục"),e("p",{class:"text-slate-500 text-base"},"Thêm, sửa đổi và tổ chức các danh mục.")],-1)),J(x,{to:`/websites/${C(c)}/folders/new`,class:"flex items-center justify-center rounded-lg h-10 bg-primary text-white gap-2 text-sm font-bold px-4 hover:bg-primary/90"},{default:je(()=>[...h[4]||(h[4]=[e("span",null,"Tạo thư mục",-1)])]),_:1},8,["to"])]),e("div",xi,[e("div",wi,[e("div",_i,[e("span",ki,[J(C(Ms),{class:"size-4"})]),N(e("input",{"onUpdate:modelValue":h[0]||(h[0]=O=>$.value=O),class:"w-full pl-10 pr-4 py-2 text-sm border border-slate-300 rounded-lg bg-background-light focus:ring-primary focus:border-primary",placeholder:"Tìm danh mục...",type:"text"},null,512),[[oe,$.value]])]),e("button",{type:"button",onClick:o,class:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg"},[J(C(Ps),{class:"size-5"})])]),J(x,{to:`/websites/${C(c)}/pages`,class:"text-sm text-primary"},{default:je(()=>[...h[6]||(h[6]=[we("Quay lại Pages",-1)])]),_:1},8,["to"])]),e("div",$i,[h[7]||(h[7]=xt('<div class="grid grid-cols-12 gap-4 px-6 py-3 border-b border-slate-200"><div class="col-span-6 text-xs font-semibold text-slate-500 uppercase">Tên danh mục</div><div class="col-span-3 text-xs font-semibold text-slate-500 uppercase">Slug</div><div class="col-span-1 text-xs font-semibold text-slate-500 uppercase">Số page</div><div class="col-span-2 text-xs font-semibold text-slate-500 uppercase text-right">Hành động</div></div>',1)),y.value?(a(),i("div",Ci,"Đang tải...")):(a(),i("div",Si,[(a(!0),i(fe,null,be(ee.value,O=>(a(),i("details",{key:O.id,class:"group border-b border-slate-200",open:""},[e("summary",Ti,[e("div",ji,[e("div",Ei,[J(C(Us),{class:"size-4 text-slate-500 group-open:rotate-90 transition-transform"}),e("div",Fi,[e("p",Ai,A(O.name),1),e("p",Li,A(j(O.id).length)+" danh mục con",1)])]),e("div",Ri,"/"+A(Q(O.id)),1),e("div",Ii,A(O.pages_count??0),1),e("div",Mi,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:Be(M=>_(O),["stop"])},[J(C(Vt),{class:"size-4"})],8,Pi),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:Be(M=>P(O),["stop"])},[J(C(vt),{class:"size-4"})],8,Ui),J(x,{to:`/websites/${C(c)}/folders/${O.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:je(()=>[J(C(Jt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:Be(M=>q(O),["stop"])},[J(C(ct),{class:"size-4"})],8,Di)])])]),e("div",zi,[(a(!0),i(fe,null,be(j(O.id),M=>(a(),i("div",{key:M.id,class:"grid grid-cols-12 gap-4 items-center px-6 py-3 border-t border-slate-200"},[e("div",Ni,[J(C(Ds),{class:"size-5 text-slate-400 -ml-1"}),e("span",null,A(M.name),1)]),e("div",Vi,"/"+A(Q(M.id)),1),e("div",Oi,A(M.pages_count??0),1),e("div",Bi,[e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xem trước",onClick:K=>_(M)},[J(C(Vt),{class:"size-4"})],8,Hi),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md text-indigo-600",title:"Mở link",onClick:K=>P(M)},[J(C(vt),{class:"size-4"})],8,qi),J(x,{to:`/websites/${C(c)}/folders/${M.id}`,class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Sửa"},{default:je(()=>[J(C(Jt),{class:"size-4"})]),_:1},8,["to"]),e("button",{type:"button",class:"p-1.5 hover:bg-slate-200 rounded-md",title:"Xóa",onClick:K=>q(M)},[J(C(ct),{class:"size-4"})],8,Wi)])]))),128))])]))),128))])),b.value?(a(),i("div",{key:2,class:Me(["px-6 py-3 text-sm",T.value==="error"?"text-red-600":"text-green-600"])},A(b.value),3)):W("",!0)])])}}},Ki={class:"p-6"},Xi={class:"max-w-xl mx-auto"},Ji={class:"flex items-center justify-between mb-4"},Gi={class:"text-xl font-semibold"},Qi=["value"],Zi={class:"flex justify-end gap-2"},ed=["disabled"],as={__name:"FolderEdit",setup(t){const s=pt(),c=ht(),g=s.params.websiteId,v=s.params.folderId,y=m(s.name==="FolderCreate"),b=m([]),T=m(""),$=m(""),o=m(null),_=m(!1),P=m(!1),Q=m(""),d=m(""),ee=async()=>{const K=((await z.get(`/api/websites/${g}/folders`)).data||[]).map(ae=>({...ae,id:Number(ae.id),parent_id:ae.parent_id==null?null:Number(ae.parent_id)}));b.value=K},j=O=>(O||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),q=()=>{_.value||($.value=j(T.value))},V=Ie(()=>{const O=[...b.value||[]],M=new Map(O.map(he=>[String(he.id),he])),K=he=>he.sort((xe,Le)=>(xe.name||"").localeCompare(Le.name||"")),ae=he=>O.filter(xe=>String(xe.parent_id)===String(he)),ve=he=>!he.parent_id||!M.has(String(he.parent_id))||String(he.parent_id)===String(he.id),pe=K(O.filter(ve)),Se=[],Ue=(he,xe)=>{Se.push({...he,depth:xe}),K(ae(he.id)).forEach(Le=>Ue(Le,xe+1))};return pe.forEach(he=>Ue(he,0)),Se.filter(he=>String(he.id)!==String(v))}),h=()=>{if(!v||y.value)return;const O=(b.value||[]).find(M=>M.id===Number(v));O&&(T.value=O.name||"",$.value=O.slug||"",o.value=O.parent_id==null?null:Number(O.parent_id))},x=async()=>{var O,M,K,ae,ve;P.value=!0,Q.value="";try{const pe={name:T.value,slug:$.value,parent_id:o.value==null?null:Number(o.value)};let Se;y.value?Se=await z.post(`/api/websites/${g}/folders`,pe):Se=await z.put(`/api/websites/${g}/folders/${v}`,pe),Q.value="Đã lưu thư mục",d.value="success",y.value?c.push(`/websites/${g}/folders`):(o.value=((O=Se==null?void 0:Se.data)==null?void 0:O.parent_id)==null?null:Number(Se.data.parent_id),await ee(),h())}catch(pe){Q.value=((K=(M=pe==null?void 0:pe.response)==null?void 0:M.data)==null?void 0:K.message)||((ve=(ae=pe==null?void 0:pe.response)==null?void 0:ae.data)==null?void 0:ve.error)||"Lưu thư mục thất bại",d.value="error"}finally{P.value=!1}};return Ze(async()=>{await ee(),h()}),(O,M)=>{const K=nt("router-link");return a(),i("div",Ki,[e("div",Xi,[e("div",Ji,[e("h1",Gi,A(y.value?"Tạo thư mục":"Sửa thư mục"),1),J(K,{to:`/websites/${C(g)}/folders`,class:"text-sm text-primary"},{default:je(()=>[...M[4]||(M[4]=[we("Quay lại danh sách",-1)])]),_:1},8,["to"])]),e("form",{onSubmit:Be(x,["prevent"]),class:"bg-white border border-gray-200 rounded-md p-4 space-y-4"},[e("div",null,[M[5]||(M[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),N(e("input",{"onUpdate:modelValue":M[0]||(M[0]=ae=>T.value=ae),onInput:q,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[oe,T.value]])]),e("div",null,[M[6]||(M[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),N(e("input",{"onUpdate:modelValue":M[1]||(M[1]=ae=>$.value=ae),onInput:M[2]||(M[2]=ae=>_.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,544),[[oe,$.value]]),M[7]||(M[7]=e("div",{class:"text-xs text-gray-500 mt-1"},"Sẽ tự thêm số nếu trùng trong domain",-1))]),e("div",null,[M[9]||(M[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),N(e("select",{"onUpdate:modelValue":M[3]||(M[3]=ae=>o.value=ae),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[M[8]||(M[8]=e("option",{value:null},"(Không có)",-1)),(a(!0),i(fe,null,be(V.value,ae=>(a(),i("option",{key:ae.id,value:ae.id},A("↳ ".repeat(ae.depth)+ae.name),9,Qi))),128))],512),[[We,o.value]])]),e("div",Zi,[J(K,{to:`/websites/${C(g)}/folders`,class:"px-4 py-2 border border-gray-300 rounded-md"},{default:je(()=>[...M[10]||(M[10]=[we("Hủy",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:P.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md disabled:bg-blue-400"},A(y.value?"Tạo":"Lưu"),9,ed)]),Q.value?(a(),i("div",{key:0,class:Me(["text-sm",d.value==="error"?"text-red-600":"text-green-600"])},A(Q.value),3)):W("",!0)],32)])])}}},td={class:"max-w-3xl mx-auto"},sd={key:0,class:"mb-6 rounded-md border border-green-200 bg-green-50 px-4 py-3 text-green-700"},ad={key:1,class:"mb-6 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-red-700"},ld={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},od={class:"grid grid-cols-1 gap-4"},nd={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},rd={class:"grid grid-cols-1 gap-4"},id={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},dd={class:"flex items-center justify-between mb-4"},ud={key:0,class:"text-sm text-gray-500"},cd={key:1,class:"space-y-3"},pd={class:"flex items-start justify-between"},md={class:"flex-1"},gd={class:"flex items-center gap-2"},vd={class:"font-semibold text-gray-900"},fd={key:0,class:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded"},bd={class:"text-sm text-gray-600 mt-1"},yd={class:"flex items-center gap-2"},hd=["onClick"],xd=["onClick"],wd={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},_d={class:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md"},kd={class:"flex items-center justify-between mb-4"},$d={class:"space-y-3"},Cd={class:"flex items-center gap-2"},Sd={class:"flex justify-end gap-2 mt-6"},Td={class:"flex justify-end"},jd=["disabled"],Ed={__name:"Settings",setup(t){const s=m({APP_NAME:"",APP_URL:"",SSL_EMAIL:""}),c=m(!1),g=m(""),v=m(""),y=m([]),b=m(!1),T=m({name:"",email:"",api_key:"",is_default:!1}),$=async()=>{try{const{data:ee}=await z.get("/api/settings");s.value={...s.value,...ee}}catch{v.value="Không tải được cài đặt"}},o=async()=>{try{const{data:ee}=await z.get("/api/cloudflare-accounts");y.value=ee}catch(ee){console.error("Failed to load Cloudflare accounts",ee)}},_=async()=>{var ee,j;try{await z.post("/api/cloudflare-accounts",T.value),g.value="Đã thêm Cloudflare account thành công",b.value=!1,T.value={name:"",email:"",api_key:"",is_default:!1},await o()}catch(q){const V=((j=(ee=q==null?void 0:q.response)==null?void 0:ee.data)==null?void 0:j.error)||"Thêm account thất bại";v.value=V}},P=async ee=>{try{await z.post(`/api/cloudflare-accounts/${ee}/set-default`),g.value="Đã set account mặc định",await o()}catch{v.value="Set default thất bại"}},Q=async ee=>{var j,q;if(confirm("Bạn có chắc muốn xóa account này?"))try{await z.delete(`/api/cloudflare-accounts/${ee}`),g.value="Đã xóa account",await o()}catch(V){const h=((q=(j=V==null?void 0:V.response)==null?void 0:j.data)==null?void 0:q.error)||"Xóa account thất bại";v.value=h}},d=async()=>{var ee,j;c.value=!0,v.value="",g.value="";try{await z.put("/api/settings",s.value),g.value="Đã lưu cài đặt thành công"}catch(q){const V=((j=(ee=q==null?void 0:q.response)==null?void 0:ee.data)==null?void 0:j.error)||"Lưu cài đặt thất bại";v.value=V}finally{c.value=!1}};return Ze(async()=>{await $(),await o()}),(ee,j)=>(a(),i("div",td,[j[21]||(j[21]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Cài đặt hệ thống",-1)),g.value?(a(),i("div",sd,A(g.value),1)):W("",!0),v.value?(a(),i("div",ad,A(v.value),1)):W("",!0),e("form",{onSubmit:Be(d,["prevent"])},[e("div",ld,[j[12]||(j[12]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Ứng dụng",-1)),e("div",od,[e("div",null,[j[10]||(j[10]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_NAME",-1)),N(e("input",{"onUpdate:modelValue":j[0]||(j[0]=q=>s.value.APP_NAME=q),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"VPS Manager"},null,512),[[oe,s.value.APP_NAME]])]),e("div",null,[j[11]||(j[11]=e("label",{class:"block text-sm text-gray-600 mb-1"},"APP_URL",-1)),N(e("input",{"onUpdate:modelValue":j[1]||(j[1]=q=>s.value.APP_URL=q),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"https://vps.yourdomain.com"},null,512),[[oe,s.value.APP_URL]])])])]),e("div",nd,[j[14]||(j[14]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"SSL",-1)),e("div",rd,[e("div",null,[j[13]||(j[13]=e("label",{class:"block text-sm text-gray-600 mb-1"},"SSL_EMAIL",-1)),N(e("input",{"onUpdate:modelValue":j[2]||(j[2]=q=>s.value.SSL_EMAIL=q),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"admin@yourdomain.com"},null,512),[[oe,s.value.SSL_EMAIL]])])])]),e("div",id,[e("div",dd,[j[15]||(j[15]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Cloudflare Accounts",-1)),e("button",{type:"button",onClick:j[3]||(j[3]=q=>b.value=!0),class:"bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm"},"+ Thêm Account")]),y.value.length===0?(a(),i("div",ud,"Chưa có Cloudflare account nào")):(a(),i("div",cd,[(a(!0),i(fe,null,be(y.value,q=>(a(),i("div",{key:q.id,class:"border border-gray-200 rounded-lg p-4"},[e("div",pd,[e("div",md,[e("div",gd,[e("h3",vd,A(q.name),1),q.is_default?(a(),i("span",fd,"Default")):W("",!0)]),e("p",bd,A(q.email),1)]),e("div",yd,[q.is_default?W("",!0):(a(),i("button",{key:0,type:"button",onClick:V=>P(q.id),class:"text-xs text-blue-600 hover:text-blue-800"},"Set Default",8,hd)),e("button",{type:"button",onClick:V=>Q(q.id),class:"text-xs text-red-600 hover:text-red-800"},"Xóa",8,xd)])])]))),128))]))]),b.value?(a(),i("div",wd,[e("div",_d,[e("div",kd,[j[16]||(j[16]=e("h3",{class:"text-lg font-semibold"},"Thêm Cloudflare Account",-1)),e("button",{type:"button",onClick:j[4]||(j[4]=q=>b.value=!1),class:"text-gray-500"},"✕")]),e("div",$d,[e("div",null,[j[17]||(j[17]=e("label",{class:"block text-sm text-gray-700 mb-1"},"Tên tài khoản",-1)),N(e("input",{"onUpdate:modelValue":j[5]||(j[5]=q=>T.value.name=q),class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"Cloudflare Account 1"},null,512),[[oe,T.value.name]])]),e("div",null,[j[18]||(j[18]=e("label",{class:"block text-sm text-gray-700 mb-1"},"Email",-1)),N(e("input",{"onUpdate:modelValue":j[6]||(j[6]=q=>T.value.email=q),type:"email",class:"w-full rounded-md border border-gray-300 px-3 py-2",placeholder:"admin@example.com"},null,512),[[oe,T.value.email]])]),e("div",null,[j[19]||(j[19]=e("label",{class:"block text-sm text-gray-700 mb-1"},"API Key",-1)),N(e("input",{"onUpdate:modelValue":j[7]||(j[7]=q=>T.value.api_key=q),type:"password",class:"w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[oe,T.value.api_key]])]),e("div",Cd,[N(e("input",{"onUpdate:modelValue":j[8]||(j[8]=q=>T.value.is_default=q),type:"checkbox",id:"is-default",class:"rounded"},null,512),[[gt,T.value.is_default]]),j[20]||(j[20]=e("label",{for:"is-default",class:"text-sm text-gray-700"},"Set làm account mặc định",-1))])]),e("div",Sd,[e("button",{type:"button",onClick:j[9]||(j[9]=q=>b.value=!1),class:"px-4 py-2 rounded-md border border-gray-300"},"Hủy"),e("button",{type:"button",onClick:_,class:"px-4 py-2 bg-blue-600 text-white rounded-md"},"Thêm")])])])):W("",!0),e("div",Td,[e("button",{type:"submit",onClick:Be(d,["prevent"]),disabled:c.value,class:Me(["bg-blue-600 text-white px-4 py-2 rounded-md",{"opacity-50 cursor-not-allowed":c.value}])},A(c.value?"Đang lưu...":"Lưu cài đặt"),11,jd)])],32)]))}},Fd={class:"min-h-screen bg-gray-100"},Ad={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Ld={class:"px-4 py-6 sm:px-0"},Rd={class:"flex justify-between items-center mb-6"},Id={class:"text-3xl font-bold text-gray-900"},Md={class:"flex items-center gap-2"},Pd=["disabled","title"],Ud={class:"bg-white shadow rounded-lg p-6"},Dd={class:"space-y-4"},zd={class:"flex justify-between items-start"},Nd={class:"inline-flex items-center gap-2 mb-2"},Vd=["checked","onChange"],Od={class:"font-medium"},Bd={class:"text-sm text-gray-500"},Hd={class:"text-sm text-gray-500"},qd={class:"text-sm text-gray-500"},Wd={class:"flex gap-2"},Yd=["href"],Kd=["href"],Xd=["onClick","disabled"],Jd={key:0,class:"text-center text-gray-500"},Gd={class:"bg-white rounded-lg shadow-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Qd={class:"space-y-4"},Zd={key:0,class:"text-sm text-green-600 mt-2"},eu={key:0,class:"border-t pt-4"},tu={key:1,class:"border-t pt-4"},su={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},au={class:"text-sm font-medium text-gray-700 w-32"},lu=["onUpdate:modelValue"],ou=["value"],nu={key:0,class:"bg-gray-50 rounded-md p-4 mt-4"},ru={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs"},iu={class:"font-medium text-gray-600"},du={class:"ml-2 text-gray-800"},uu={key:2,class:"border-t pt-4"},cu={class:"border border-gray-300 rounded-md p-3 max-h-48 overflow-auto"},pu=["value"],mu={class:"text-sm"},gu={class:"text-sm space-y-1"},vu={class:"text-green-600"},fu={class:"text-blue-600"},bu={class:"text-gray-600"},yu={key:0,class:"mt-2"},hu={class:"text-xs text-red-600 mt-1 max-h-32 overflow-y-auto"},xu={class:"flex justify-end gap-3 pt-4 border-t"},wu=["disabled"],_u={__name:"PagesManagement",setup(t){const c=pt().params.websiteId,g=m(null),v=m([]),y=m([]),b=m([]),T=m([]),$=m(!1),o=m("");m(!1);const _=m(!1),P=m(null),Q=m(!1),d=m(null),ee=m([]),j=m([]),q=m([]),V=m("detail"),h={detail:{name:{label:"Title",jsonField:"name"},address:{label:"Address",jsonField:"address"},about:{label:"About",jsonField:"about"},rating:{label:"Rating",jsonField:"rating"},images:{label:"Images",jsonField:"images"},facilities:{label:"Facilities",jsonField:"facilities"},faqs:{label:"FAQs",jsonField:"faqs"},houseRules:{label:"Useful Information",jsonField:"houseRules"}},blank:{name:{label:"Title",jsonField:"name"},content:{label:"Content",jsonField:"content"}},home:{name:{label:"Title",jsonField:"name"},about:{label:"About",jsonField:"about"},services:{label:"Services",jsonField:"services"},testimonials:{label:"Testimonials",jsonField:"testimonials"}},listing:{name:{label:"Title",jsonField:"name"},items:{label:"Items",jsonField:"items"},filters:{label:"Filters",jsonField:"filters"}}},x=m({name:{label:"Title",jsonField:"name"},address:{label:"Address",jsonField:"address"},about:{label:"About",jsonField:"about"},rating:{label:"Rating",jsonField:"rating"},images:{label:"Images",jsonField:"images"},facilities:{label:"Facilities",jsonField:"facilities"},faqs:{label:"FAQs",jsonField:"faqs"},houseRules:{label:"Useful Information",jsonField:"houseRules"}}),O=Ie(()=>{const l={},f=["name"];return Object.keys(x.value).forEach(S=>{const k=x.value[S];(f.includes(S)||k.jsonField&&q.value.includes(k.jsonField))&&(l[S]=k)}),l}),M=Ie(()=>{const l=o.value.trim().toLowerCase();return l?v.value.filter(f=>(f.title||"").toLowerCase().includes(l)||(f.path||"").toLowerCase().includes(l)):v.value}),K=Ie(()=>P.value&&P.value.length>0?P.value[0]:null),ae=Ie(()=>P.value&&P.value.length>0&&x.value.name.jsonField),ve=async()=>{const l=await z.get(`/api/websites/${c}`);g.value=l.data},pe=async()=>{const l=await z.get(`/api/websites/${c}/pages`);v.value=l.data.map(f=>({...f,__site:g.value}))},Se=async()=>{const l=await z.get("/api/websites");y.value=l.data||[]},Ue=Ie(()=>{var f;return(((f=g.value)==null?void 0:f.domain)||"").trim().replace(/^[^.]+\./,"")}),Ae=Ie(()=>{const l=Ue.value;return l&&(y.value||[]).find(f=>String(f.domain||"").trim()===l)||null}),he=Ie(()=>{const l=g.value;return l&&String(l.domain||"").trim().split(".").length>2&&Ae.value?`/websites/${Ae.value.id}/subdomains`:"/websites"}),xe=async l=>{if(confirm(`Delete page ${l.path}?`))try{T.value=[...T.value,l.id],await z.delete(`/api/pages/${l.id}`),Qe.success("Page deleted"),b.value=b.value.filter(f=>f!==l.id),await pe()}catch{Qe.error("Failed to delete page")}finally{T.value=T.value.filter(f=>f!==l.id)}},Le=l=>{const f=l.__site||g.value;if(!f)return"#";const S=(f.ssl_enabled?"https://":"http://")+f.domain,k=l.path||"/",Y=l.filename||"";if(Y.toLowerCase()==="index.html")return S+k;const L=k.endsWith("/")?"":"/";return S+k+L+Y},ze=l=>{const f=l.__site||g.value;if(!f)return"#";const S=f.id,k=((l==null?void 0:l.path)||"/").trim(),Y=k==="/"?`/preview/${S}`:`/preview/${S}${k.startsWith("/")?"":"/"}${k}`,L=localStorage.getItem("adminToken")||"";if(!L)return Y;const p=Y.includes("?")?"&":"?";return`${Y}${p}token=${encodeURIComponent(L)}`},Ne=l=>{const f=l.id;b.value.includes(f)?b.value=b.value.filter(S=>S!==f):b.value=[...b.value,f]},Ve=async()=>{if(b.value.length!==0&&confirm(`Delete ${b.value.length} selected pages?`)){$.value=!0;try{const l=[...b.value];await Promise.all(l.map(async f=>{T.value=[...T.value,f];try{await z.delete(`/api/pages/${f}`)}finally{T.value=T.value.filter(S=>S!==f)}})),Qe.success("Selected pages deleted"),b.value=[],await pe()}catch{Qe.error("Failed to delete selected pages")}finally{$.value=!1}}},me=async()=>{try{const l=await z.get(`/api/websites/${c}/folders`);ee.value=l.data||[]}catch(l){console.error("Failed to load folders:",l)}},ne=l=>{const f=l.target.files[0];if(!f)return;const S=new FileReader;S.onload=k=>{try{const Y=JSON.parse(k.target.result);let L=Y;if(Array.isArray(Y)&&Y.length>0&&Y[0].result&&(L=Y.map(p=>p.result)),P.value=L,d.value=null,L.length>0){const p=L[0],te=Object.keys(p);q.value=te,F()}Qe.success(`Loaded ${L.length} items from file`)}catch(Y){Qe.error("Invalid JSON file"),console.error(Y)}},S.readAsText(f)},F=()=>{const l=h[V.value]||h.detail;x.value=JSON.parse(JSON.stringify(l));const f=q.value;if(V.value==="detail"){const S={name:f.find(k=>k.toLowerCase().includes("name")||k.toLowerCase().includes("title")),address:f.find(k=>k.toLowerCase().includes("address")||k.toLowerCase().includes("location")),about:f.find(k=>k.toLowerCase().includes("about")||k.toLowerCase().includes("description")),rating:f.find(k=>k.toLowerCase().includes("rating")||k.toLowerCase().includes("score")),images:f.find(k=>k.toLowerCase().includes("image")||k.toLowerCase().includes("photo")),facilities:f.find(k=>k.toLowerCase().includes("facilit")||k.toLowerCase().includes("amenity")),faqs:f.find(k=>k.toLowerCase().includes("faq")||k.toLowerCase().includes("question")),houseRules:f.find(k=>k.toLowerCase().includes("rule")||k.toLowerCase().includes("policy"))};Object.keys(S).forEach(k=>{S[k]&&x.value[k]&&(x.value[k].jsonField=S[k])})}else if(V.value==="blank"){const S={name:f.find(k=>k.toLowerCase().includes("name")||k.toLowerCase().includes("title")),content:f.find(k=>k.toLowerCase().includes("content")||k.toLowerCase().includes("description")||k.toLowerCase().includes("body"))};Object.keys(S).forEach(k=>{S[k]&&x.value[k]&&(x.value[k].jsonField=S[k])})}else if(V.value==="home"){const S={name:f.find(k=>k.toLowerCase().includes("name")||k.toLowerCase().includes("title")),about:f.find(k=>k.toLowerCase().includes("about")||k.toLowerCase().includes("description")),services:f.find(k=>k.toLowerCase().includes("service")),testimonials:f.find(k=>k.toLowerCase().includes("testimonial")||k.toLowerCase().includes("review"))};Object.keys(S).forEach(k=>{S[k]&&x.value[k]&&(x.value[k].jsonField=S[k])})}else if(V.value==="listing"){const S={name:f.find(k=>k.toLowerCase().includes("name")||k.toLowerCase().includes("title")),items:f.find(k=>k.toLowerCase().includes("item")||k.toLowerCase().includes("list")),filters:f.find(k=>k.toLowerCase().includes("filter")||k.toLowerCase().includes("category"))};Object.keys(S).forEach(k=>{S[k]&&x.value[k]&&(x.value[k].jsonField=S[k])})}},E=l=>{if(!K.value||!l)return"-";const f=K.value[l];return Array.isArray(f)?`${f.length} items`:typeof f=="object"&&f!==null?JSON.stringify(f).substring(0,50)+"...":String(f||"-").substring(0,100)},u=()=>{_.value=!1,setTimeout(()=>{_.value||(P.value=null,d.value=null,q.value=[],j.value=[],V.value="detail")},300)},w=async()=>{var l,f;if(P.value){Q.value=!0,d.value=null;try{const S=P.value.map(Y=>{const L={};return Object.keys(x.value).forEach(p=>{const te=x.value[p].jsonField;te&&Y[te]!==void 0&&(L[p]=Y[te])}),L}),k=await z.post(`/api/websites/${c}/pages/import`,{data:S,folder_ids:j.value,template_type:V.value});d.value=k.data,Qe.success(`Import completed: ${k.data.stats.created} created, ${k.data.stats.updated} updated`),await pe()}catch(S){Qe.error("Import failed: "+(((f=(l=S.response)==null?void 0:l.data)==null?void 0:f.message)||S.message)),console.error(S)}finally{Q.value=!1}}};return Ze(async()=>{await ve(),await pe(),await Se(),await me()}),(l,f)=>{var k;const S=nt("router-link");return a(),i("div",Fd,[e("div",Ad,[e("div",Ld,[e("div",Rd,[e("h1",Id,A(((k=g.value)==null?void 0:k.domain)||"..."),1),e("div",Md,[J(S,{to:he.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",title:"Back"},{default:je(()=>[...f[5]||(f[5]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5"}),e("path",{d:"M12 19l-7-7 7-7"})],-1)])]),_:1},8,["to"]),N(e("input",{"onUpdate:modelValue":f[0]||(f[0]=Y=>o.value=Y),placeholder:"Search",class:"h-9 w-56 rounded-md border border-gray-300 px-3"},null,512),[[oe,o.value]]),e("button",{onClick:f[1]||(f[1]=Y=>_.value=!0),class:"h-9 px-3 flex items-center justify-center gap-1 rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50",title:"Import Pages"},[...f[6]||(f[6]=[xt('<svg viewBox="0 0 24 24" class="size-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg><span class="text-sm">Import</span>',2)])]),J(S,{to:`/websites/${C(c)}/pages/new`,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Add Page"},{default:je(()=>[...f[7]||(f[7]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])]),_:1},8,["to"]),e("button",{onClick:Ve,disabled:b.value.length===0||$.value,class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:`Delete Selected (${b.value.length})`},[$.value?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(ct),{key:1,class:"size-4"}))],8,Pd)])]),e("div",Ud,[e("div",Dd,[(a(!0),i(fe,null,be(M.value,Y=>{var L,p;return a(),i("div",{key:Y.id,class:"border rounded-lg p-4"},[e("div",zd,[e("div",null,[e("label",Nd,[e("input",{type:"checkbox",checked:b.value.includes(Y.id),onChange:te=>Ne(Y)},null,40,Vd)]),e("h4",Od,A(Y.title||"(No title)"),1),e("p",Bd,"Path: "+A(Y.path),1),e("p",Hd,"File: "+A(Y.filename),1),e("p",qd,"Website: "+A((L=Y.__site)==null?void 0:L.domain),1)]),e("div",Wd,[e("a",{href:Le(Y),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View Live"},[J(C(vs),{class:"size-4"})],8,Yd),e("a",{href:ze(Y),target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50",title:"Preview Draft"},[...f[8]||(f[8]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,Kd),J(S,{to:`/websites/${((p=Y.__site)==null?void 0:p.id)||C(c)}/pages/${Y.id}`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Edit"},{default:je(()=>[J(C(ps),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:te=>xe(Y),disabled:T.value.includes(Y.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[T.value.includes(Y.id)?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(ct),{key:1,class:"size-4"}))],8,Xd)])])])}),128)),M.value.length===0?(a(),i("div",Jd,"No pages found")):W("",!0)])]),_.value?(a(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:f[4]||(f[4]=Be(Y=>_.value=!1,["self"]))},[e("div",Gd,[e("div",{class:"flex justify-between items-center mb-4"},[f[10]||(f[10]=e("h2",{class:"text-xl font-bold"},"Import Pages from JSON",-1)),e("button",{onClick:u,class:"text-gray-500 hover:text-gray-700"},[...f[9]||(f[9]=[e("svg",{viewBox:"0 0 24 24",class:"size-6",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18"}),e("path",{d:"M6 6l12 12"})],-1)])])]),e("div",Qd,[e("div",null,[f[11]||(f[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"1"),we(" Upload JSON File ")])],-1)),e("input",{type:"file",onChange:ne,accept:".json",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),P.value?(a(),i("p",Zd,"✓ Loaded "+A(P.value.length)+" items",1)):W("",!0)]),P.value?(a(),i("div",eu,[f[13]||(f[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"2"),we(" Select Template Type ")])],-1)),N(e("select",{"onUpdate:modelValue":f[2]||(f[2]=Y=>V.value=Y),onChange:F,class:"w-full md:w-1/2 border-gray-300 rounded-md text-sm"},[...f[12]||(f[12]=[e("option",{value:"detail"},"Hotel Detail",-1),e("option",{value:"blank"},"Blank (HTML)",-1),e("option",{value:"home"},"Home Page",-1),e("option",{value:"listing"},"Listing Page",-1)])],544),[[We,V.value]]),f[14]||(f[14]=e("p",{class:"text-xs text-gray-500 mt-1"},"Select which template to use for imported pages",-1))])):W("",!0),P.value&&q.value.length>0?(a(),i("div",tu,[f[17]||(f[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"3"),we(" Map JSON Fields to Template Fields ")])],-1)),e("div",su,[(a(!0),i(fe,null,be(O.value,(Y,L)=>(a(),i("div",{key:L,class:"flex items-center gap-3"},[e("label",au,A(Y.label)+":",1),N(e("select",{"onUpdate:modelValue":p=>Y.jsonField=p,class:"flex-1 text-sm border-gray-300 rounded-md"},[f[15]||(f[15]=e("option",{value:null},"-- Skip --",-1)),(a(!0),i(fe,null,be(q.value,p=>(a(),i("option",{key:p,value:p},A(p),9,ou))),128))],8,lu),[[We,Y.jsonField]])]))),128))]),K.value?(a(),i("div",nu,[f[16]||(f[16]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-2"},"Preview (First Item):",-1)),e("div",ru,[(a(!0),i(fe,null,be(O.value,(Y,L)=>N((a(),i("div",{key:L},[e("span",iu,A(Y.label)+":",1),e("span",du,A(E(Y.jsonField)),1)])),[[rs,Y.jsonField]])),128))])])):W("",!0)])):W("",!0),P.value&&ee.value.length>0?(a(),i("div",uu,[f[18]||(f[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"4"),we(" Assign to Folders (optional) ")])],-1)),e("div",cu,[(a(!0),i(fe,null,be(ee.value,Y=>(a(),i("label",{key:Y.id,class:"flex items-center gap-2 cursor-pointer mb-2"},[N(e("input",{type:"checkbox",value:Y.id,"onUpdate:modelValue":f[3]||(f[3]=L=>j.value=L),class:"rounded cursor-pointer"},null,8,pu),[[gt,j.value]]),e("span",mu,A(Y.name),1)]))),128))])])):W("",!0),d.value?(a(),i("div",{key:3,class:Me(["p-4 rounded-md border-t pt-4",d.value.stats.errors.length>0?"bg-yellow-50":"bg-green-50"])},[f[20]||(f[20]=e("p",{class:"font-medium mb-2"},"Import Results:",-1)),e("ul",gu,[e("li",null,"Total: "+A(d.value.stats.total),1),e("li",vu,"Created: "+A(d.value.stats.created),1),e("li",fu,"Updated: "+A(d.value.stats.updated),1),e("li",bu,"Skipped: "+A(d.value.stats.skipped),1)]),d.value.stats.errors.length>0?(a(),i("div",yu,[f[19]||(f[19]=e("p",{class:"text-sm font-medium text-red-600"},"Errors:",-1)),e("ul",hu,[(a(!0),i(fe,null,be(d.value.stats.errors,(Y,L)=>(a(),i("li",{key:L},A(Y.title)+": "+A(Y.error),1))),128))])])):W("",!0)],2)):W("",!0),e("div",xu,[e("button",{onClick:u,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},A(d.value?"Close":"Cancel"),1),d.value?W("",!0):(a(),i("button",{key:0,onClick:w,disabled:!ae.value||Q.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2"},[Q.value?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):W("",!0),e("span",null,A(Q.value?"Importing...":"Import"),1)],8,wu))])])])])):W("",!0)])])])}}},ku={class:"min-h-screen bg-gray-100"},$u={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},Cu={class:"px-4 py-6 sm:px-0"},Su={class:"flex justify-between items-center mb-6"},Tu={class:"text-3xl font-bold text-gray-900"},ju={class:"flex items-center gap-2"},Eu=["href"],Fu=["href"],Au={class:"bg-white shadow rounded-lg p-6"},Lu={class:"mb-4"},Ru={class:"mb-4"},Iu={class:"mb-4"},Mu={class:"mb-4"},Pu={class:"flex items-center justify-between"},Uu={class:"flex items-center gap-3"},Du={class:"mt-1 border border-gray-300 rounded-md p-3 space-y-3"},zu={class:"space-y-1"},Nu=["disabled","onClick"],Vu=["value","onChange"],Ou={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Bu={class:"bg-white rounded-lg shadow p-6 w-full max-w-md"},Hu={class:"flex items-center justify-between mb-4"},qu={class:"space-y-3"},Wu=["value"],Yu={class:"pt-2 border-t border-gray-200"},Ku={class:"text-xs text-gray-600"},Xu={class:"flex justify-end gap-2 mt-6"},Ju={class:"mb-4"},Gu={key:0,class:"mb-4 space-y-4"},Qu={key:1,class:"mb-4 space-y-4"},Zu={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ec={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},tc={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},sc=["value"],ac={class:"text-sm"},lc={class:"space-y-3"},oc={class:"flex items-center gap-2"},nc={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},rc=["onClick"],ic=["onUpdate:modelValue"],dc=["onUpdate:modelValue"],uc={class:"space-y-3"},cc={class:"flex items-center gap-2"},pc={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},mc=["onClick"],gc=["onUpdate:modelValue"],vc=["onUpdate:modelValue"],fc={key:2,class:"mb-4"},bc={key:3,class:"mb-4"},yc={key:0,class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},hc={class:"flex justify-end gap-3"},xc=["disabled"],wc={key:0,class:"inline-flex items-center gap-2"},_c={key:1},ls={__name:"PageEdit",setup(t){const s=pt(),c=ht(),g=s.params.websiteId,v=s.params.pageId,y=m(s.name==="PageCreate"||v==="new"||!v),b=m("blank"),T=m(!1),$=m(""),o=m({title:"",location:"",phone:"",galleryRaw:"",about1:"",pageContent:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),_=m([]),P=m([]),Q=m(null),d=m(""),ee=m(null),j=m(!1),q=m(""),V=m(!1);m(null),m(""),m(""),m(null);const h=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],x=m({path:"",filename:"",title:"",content:""}),O=m(null),M=m([]),K=m(null),ae=m(!1),ve=m(null),pe=m(null),Se=async()=>{if(y.value)return;const r=(await z.get(`/api/pages/${v}`)).data;if(x.value={path:r.path,filename:r.filename,title:r.title||"",content:r.content||""},r.template_type){if(T.value=!!r.template_type,r.template_type==="page"&&r.template_data)o.value={...o.value,pageContent:r.template_data.content||""};else if((r.template_type==="hotel-detail"||r.template_type==="hotel-detail-1"||r.template_type==="detail")&&r.template_data){let D=r.template_data.galleryRaw||"";!D&&Array.isArray(r.template_data.gallery)&&(D=r.template_data.gallery.join(`
`)),o.value={title:r.template_data.title||"",location:r.template_data.location||r.template_data.location_text||"",phone:r.template_data.phone||"",galleryRaw:D,about1:r.template_data.about1||"",pageContent:"",amenities:Array.isArray(r.template_data.amenities)?r.template_data.amenities:[],info:Array.isArray(r.template_data.info)?r.template_data.info:[{subject:"",description:""},{subject:"",description:""}],faqs:Array.isArray(r.template_data.faqs)?r.template_data.faqs:[{q:"",a:""},{q:"",a:""}]}}b.value=r.template_type}else b.value="blank",T.value=!1;P.value=(r.folders||[]).map(D=>Number(D.id)),Q.value=r.primary_folder_id==null?null:Number(r.primary_folder_id)},Ue=async()=>{const B=(x.value.title||"").trim();let r="";try{r=(await z.get("/templates/laravel-hotel-1/page/index.html")).data||""}catch{r='<!DOCTYPE html><html><head><meta charset="utf-8"><title>{{TITLE}}</title></head><body></body></html>'}let D="",le="";try{D=(await z.get("/templates/_shared/header.html")).data||""}catch{}try{le=(await z.get("/templates/_shared/footer.html")).data||""}catch{}D&&(r=r.replace(/<header[^>]*>[\s\S]*?<\/header>/i,D)),le&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(r)?r=r.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,le):/<\/body>/i.test(r)?r=r.replace(/<\/body>/i,le+"</body>"):r+=`
`+le);const R={title:B||"Page",content:o.value.pageContent||""},X=`<script type="application/json" id="page-data">${JSON.stringify(R)}<\/script>`;return r=r.replace(/<\/head>/i,X+`
</head>`),r=r.replace(/<title>[^<]*<\/title>/i,`<title>${R.title}</title>`),r||'<!DOCTYPE html><html><head><meta charset="utf-8"><title>'+(B||"Page")+'</title></head><body><div id="page-content">'+(o.value.pageContent||"")+"</div></body></html>"},Ae=async()=>{const B=(o.value.galleryRaw||"").split(`
`).map(He=>He.trim()).filter(Boolean),D=(P.value||[]).reduce((He,et)=>{if(He==null)return et;const lt=w(He);return w(et)>lt?et:He},null),le=u(D),R=le.length>1?[le[0],le[le.length-1]]:le,X=(x.value.title||"").trim(),ie=["Home",...R.map(He=>He.name||""),X];let se=(await z.get("/templates/laravel-hotel-1/detail/index.html")).data||"",$e="",qe="";try{$e=(await z.get("/templates/_shared/header.html")).data||""}catch{}try{qe=(await z.get("/templates/_shared/footer.html")).data||""}catch{}$e&&(se=se.replace(/<header[^>]*>[\s\S]*?<\/header>/i,$e)),qe&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(se)?se=se.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,qe):/<\/body>/i.test(se)?se=se.replace(/<\/body>/i,qe+"</body>"):se+=`
`+qe);const tt=o.value.amenities||[],Oe=B.map(He=>String(He).replace(/<\/script>/gi,"<\\/script>")),Je={title:X||"Hotel",location:o.value.location||"",location_text:o.value.location||"",phone:o.value.phone||"",about1:o.value.about1||"",amenities:tt,faqs:o.value.faqs||[],info:o.value.info||[],gallery:Oe,breadcrumb_items:ie.filter(Boolean)},at=`<script type="application/json" id="page-data">${JSON.stringify(Je)}<\/script>`;return se=se.replace("{{GALLERY_DATA_SCRIPT}}",at),se=se.replace(/<title>[^<]*<\/title>/i,`<title>${Je.title}</title>`),se},he=async()=>{const B=await z.get(`/api/websites/${g}`);O.value=B.data},xe=async()=>{try{const B=await z.get("/api/websites");M.value=B.data||[]}catch{M.value=[]}},Le=Ie(()=>{const B=O.value;if(!B)return"/websites";const r=(B.domain||"").trim(),D=r.replace(/^[^.]+\./,"");if(D&&D!==r){const le=(M.value||[]).find(R=>String(R.domain).trim()===D);if(le&&le.id)return`/websites/${le.id}/subdomains`}return"/websites"}),ze=async()=>{try{const B=await z.get("/api/settings");K.value=B.data||{}}catch{K.value={}}},Ne=async()=>{const D=((await z.get(`/api/websites/${g}/folders`)).data||[]).map(le=>({...le,id:Number(le.id),parent_id:le.parent_id==null?null:Number(le.parent_id)}));_.value=D},Ve=async()=>{const B=(d.value||"").trim();if(!B)return;let r=(q.value||"").trim();r||(r=f(B));const D={name:B,slug:r};ee.value&&(D.parent_id=Number(ee.value));const R=(await z.post(`/api/websites/${g}/folders`,D)).data;_.value=[..._.value,R],P.value=[...P.value,R.id],d.value="",ee.value=null,q.value="",V.value=!1,j.value=!1},me=async()=>{var B,r,D,le,R;ae.value=!0;try{const X=(B=window.tinymce)==null?void 0:B.get("page-content-editor");if(X&&(o.value.pageContent=X.getContent()||""),y.value){let ie;if(b.value==="blank"?ie=$.value||x.value.content||"":b.value==="page"?ie=await Ue():ie=await Ae(),x.value.content=ie,x.value.filename=(x.value.filename||"index.html").trim(),!(x.value.path||"").trim()){const qe=(P.value||[]).reduce((Oe,Je)=>{if(Oe==null)return Je;const at=w(Oe);return w(Je)>at?Je:Oe},null),tt=Q.value||qe;if(tt){const Oe=E(tt);Oe&&(x.value.path=`/${Oe}`)}}x.value.path||(x.value.path="/");const se={...x.value};if(b.value==="page")se.template_type="page",se.template_data={title:(x.value.title||"").trim()||"Page",content:o.value.pageContent||""};else if(b.value!=="blank"){se.template_type=b.value;const $e=(o.value.galleryRaw||"").split(`
`).map(qe=>qe.trim()).filter(Boolean);se.template_data={title:(o.value.title||x.value.title||"").trim()||"Hotel",location:o.value.location||"",location_text:o.value.location||"",phone:o.value.phone||"",about1:o.value.about1||"",amenities:o.value.amenities||[],faqs:o.value.faqs||[],info:o.value.info||[],gallery:$e,galleryRaw:o.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(o.value.title||"").trim()].filter(Boolean)}}else se.template_type="blank",se.template_data=null;se.folder_ids=[...P.value],se.primary_folder_id=Q.value,await z.post(`/api/websites/${g}/pages`,se)}else{const ie={...x.value};let De;if(b.value==="blank"?De=x.value.content||"":b.value==="page"?De=await Ue():De=await Ae(),ie.content=De,ie.filename=(ie.filename||"index.html").trim(),b.value==="page")ie.template_type="page",ie.template_data={title:(x.value.title||"").trim()||"Page",content:o.value.pageContent||""};else if(b.value!=="blank"){ie.template_type=b.value;const $e=(o.value.galleryRaw||"").split(`
`).map(qe=>qe.trim()).filter(Boolean);ie.template_data={title:(o.value.title||x.value.title||"").trim()||"Hotel",location:o.value.location||"",location_text:o.value.location||"",phone:o.value.phone||"",about1:o.value.about1||"",amenities:o.value.amenities||[],faqs:o.value.faqs||[],info:o.value.info||[],gallery:$e,galleryRaw:o.value.galleryRaw||"",breadcrumb_items:["Home","Stays",(o.value.title||"").trim()].filter(Boolean)}}else ie.template_type="blank",ie.template_data=null;if(!(ie.path||"").trim()){const qe=(P.value||[]).reduce((Oe,Je)=>{if(Oe==null)return Je;const at=w(Oe);return w(Je)>at?Je:Oe},null),tt=Q.value||qe;if(tt){const Oe=E(tt);Oe&&(ie.path=`/${Oe}`)}}ie.path||(ie.path="/"),ie.folder_ids=[...P.value],ie.primary_folder_id=Q.value,await z.put(`/api/pages/${v}`,ie)}c.push(`/websites/${g}/pages`)}catch(X){const ie=((D=(r=X==null?void 0:X.response)==null?void 0:r.data)==null?void 0:D.message)||((R=(le=X==null?void 0:X.response)==null?void 0:le.data)==null?void 0:R.error)||(X==null?void 0:X.message)||"Lưu trang thất bại";alert(ie)}finally{ae.value=!1}},ne=()=>{if(!O.value)return"#";const B=(O.value.ssl_enabled?"https://":"http://")+O.value.domain,r=x.value.path||"/",D=x.value.filename||"",le=r.endsWith("/")?"":"/";return D.toLowerCase()==="index.html"?B+r:B+r+le+D},F=()=>{var ie;if(!O.value)return"#";const B=(((ie=K.value)==null?void 0:ie.APP_URL)||(O.value.ssl_enabled?"https://":"http://")+O.value.domain).replace(/\/$/,""),r=(x.value.path||"/").trim();let D;if(r==="/"||r==="")D=`${B}/preview/${O.value.id}`;else{const De=r.replace(/^\//,"");D=`${B}/preview/${O.value.id}/${encodeURIComponent(De)}`}const le=localStorage.getItem("adminToken"),R=new URLSearchParams;le&&R.set("token",le),R.set("hide_preview_bar","1"),R.set("v",String(Date.now()));const X=R.toString();return X?`${D}?${X}`:D},E=B=>{if(!B)return"";const r=new Map((_.value||[]).map(R=>[String(R.id),R]));let D=r.get(String(B));const le=[];for(;D&&(D.slug&&le.unshift(D.slug),!(!D.parent_id||(D=r.get(String(D.parent_id)),D&&String(D.id)===String(B)))););return le.join("/")},u=B=>{if(!B)return[];const r=new Map((_.value||[]).map(X=>[String(X.id),X])),D=[],le=new Set;let R=r.get(String(B));for(;R&&!le.has(R.id)&&(D.unshift(R),le.add(R.id),!!R.parent_id);)R=r.get(String(R.parent_id));return D},w=B=>{let r=0;const D=_.value||[],le=new Map(D.map(X=>[String(X.id),X]));let R=D.find(X=>String(X.id)===String(B));for(;R&&R.parent_id!=null;)r+=1,R=le.get(String(R.parent_id));return r},l=Ie(()=>{const B=[..._.value||[]],r=new Map(B.map(se=>[String(se.id),se])),D=se=>se.sort(($e,qe)=>($e.name||"").localeCompare(qe.name||"")),le=se=>B.filter($e=>String($e.parent_id)===String(se)),R=se=>!se.parent_id||!r.has(String(se.parent_id))||String(se.parent_id)===String(se.id),X=D(B.filter(R)),ie=[],De=(se,$e)=>{ie.push({...se,depth:$e}),D(le(se.id)).forEach(qe=>De(qe,$e+1))};return X.forEach(se=>De(se,0)),ie}),f=B=>(B||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),S=()=>{V.value||(q.value=f(d.value))},k=B=>{if(Q.value===B){Q.value=null;return}Q.value||(Q.value=B)},Y=B=>{if(P.value.includes(B)){const r=_.value.find(D=>D.id===B);if(r&&r.parent_id){const D=le=>{if(!le)return;P.value.includes(le)||P.value.push(le);const R=_.value.find(X=>X.id===le);R&&R.parent_id&&D(R.parent_id)};D(r.parent_id)}}Q.value&&!P.value.includes(Q.value)&&(Q.value=null)},L=()=>{o.value.faqs=[...o.value.faqs||[],{q:"",a:""}]},p=()=>{o.value.info=[...o.value.info||[],{subject:"",description:""}]},te=B=>{o.value.faqs=(o.value.faqs||[]).filter((r,D)=>D!==B)},ce=B=>{o.value.info=(o.value.info||[]).filter((r,D)=>D!==B)},ue=Ie(()=>{const r=(x.value.content||"").split(`
`).length;return r>0?r:1}),re=()=>{ve.value&&pe.value&&(ve.value.scrollTop=pe.value.scrollTop)},Te=async()=>{if(!window.tinymce){if(!document.querySelector('script[src*="tinymce.min.js"]')){const B=document.createElement("script");B.src="/dist/tinymce/tinymce.min.js",document.head.appendChild(B),await new Promise((r,D)=>{B.onload=r,B.onerror=D})}await new Promise(B=>{const r=()=>{window.tinymce?B():setTimeout(r,50)};r()})}},U=async()=>{await zt(),await new Promise(D=>setTimeout(D,100));const B=document.getElementById("page-content-editor");if(!B)return;await Te();const r=window.tinymce.get("page-content-editor");r&&r.remove(),B.value=o.value.pageContent||"",window.tinymce.init({selector:"#page-content-editor",base_url:"/dist/tinymce",suffix:".min",menubar:!0,plugins:"link lists table image code charmap anchor searchreplace visualblocks fullscreen insertdatetime media help wordcount",toolbar:"undo redo | formatselect | bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media table | charmap anchor | code fullscreen | help",height:500,table_toolbar:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",image_title:!0,automatic_uploads:!1,file_picker_types:"image",content_style:"body { font-family: Arial, sans-serif; font-size: 14px; }",setup:D=>{D.on("Change KeyUp SetContent",()=>{o.value.pageContent=D.getContent()||""})}}).then(D=>{const le=D&&D[0];le&&(o.value.pageContent||"").trim()&&le.setContent(o.value.pageContent)})};return _t(b,async B=>{B==="page"&&await U()}),Ze(async()=>{await ze(),await Promise.all([he(),xe()]),await Ne(),await Se(),await zt();const B=document.getElementById("about1-editor");B&&(await Te(),B.value=o.value.about1||"",window.tinymce.init({selector:"#about1-editor",base_url:"/dist/tinymce",suffix:".min",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:r=>{r.on("Change KeyUp SetContent",()=>{o.value.about1=r.getContent()||""})}}).then(r=>{const D=r&&r[0];D&&(o.value.about1||"").trim()&&D.setContent(o.value.about1)})),b.value==="page"&&await U()}),Ht(()=>{if(window.tinymce){const B=window.tinymce.get("about1-editor");B&&B.remove();const r=window.tinymce.get("page-content-editor");r&&r.remove()}}),(B,r)=>{var le;const D=nt("router-link");return a(),i("div",ku,[e("div",$u,[e("div",Cu,[e("div",Su,[e("h1",Tu,A(y.value?"Create Page":"Edit Page"),1),e("div",ju,[y.value?W("",!0):(a(),i("a",{key:0,href:ne(),target:"_blank",class:"h-9 w-9 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[J(C(vs),{class:"size-4"})],8,Eu)),y.value?W("",!0):(a(),i("a",{key:1,href:F(),target:"_blank",class:"px-3 h-9 inline-flex items-center rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 text-sm"},"Preview",8,Fu)),J(D,{to:Le.value,class:"px-4 py-2 rounded-md border border-gray-300 bg-white"},{default:je(()=>[...r[20]||(r[20]=[we("Back",-1)])]),_:1},8,["to"])])]),e("div",Au,[e("form",{onSubmit:Be(me,["prevent"]),novalidate:""},[e("div",Lu,[r[21]||(r[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Path",-1)),N(e("input",{"onUpdate:modelValue":r[0]||(r[0]=R=>x.value.path=R),type:"text",placeholder:"/about-us",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,x.value.path]])]),e("div",Ru,[r[22]||(r[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Filename",-1)),N(e("input",{"onUpdate:modelValue":r[1]||(r[1]=R=>x.value.filename=R),type:"text",placeholder:"index.html",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,x.value.filename]])]),e("div",Iu,[r[23]||(r[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Title",-1)),N(e("input",{"onUpdate:modelValue":r[2]||(r[2]=R=>x.value.title=R),onInput:r[3]||(r[3]=R=>o.value.title=x.value.title),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[oe,x.value.title]])]),e("div",Mu,[e("div",Pu,[r[25]||(r[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thư mục",-1)),e("div",Uu,[J(D,{to:`/websites/${C(g)}/folders`,class:"text-sm text-primary"},{default:je(()=>[...r[24]||(r[24]=[we("Quản lý thư mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:r[4]||(r[4]=R=>j.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",Du,[e("div",zu,[r[26]||(r[26]=e("label",{class:"text-sm text-gray-700"},"Chọn thư mục",-1)),(a(!0),i(fe,null,be(l.value,R=>(a(),i("div",{key:R.id,class:"flex items-center gap-2 cursor-pointer"},[e("button",{type:"button",class:"text-yellow-500 text-xs",disabled:Q.value&&Q.value!==R.id,onClick:X=>k(R.id)},A(Q.value===R.id?"★":"☆"),9,Nu),N(e("input",{type:"checkbox",value:R.id,"onUpdate:modelValue":r[5]||(r[5]=X=>P.value=X),onChange:X=>Y(R.id),class:"rounded cursor-pointer"},null,40,Vu),[[gt,P.value]]),e("span",{class:"text-sm",style:ot({paddingLeft:(R.depth>0?R.depth*16:0)+"px"})},A("↳ ".repeat(R.depth))+A(R.name),5)]))),128))])]),j.value?(a(),i("div",Ou,[e("div",Bu,[e("div",Hu,[r[27]||(r[27]=e("h3",{class:"text-lg font-semibold"},"Tạo thư mục",-1)),e("button",{type:"button",onClick:r[6]||(r[6]=R=>j.value=!1),class:"text-gray-500"},"✕")]),e("div",qu,[e("div",null,[r[28]||(r[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên thư mục",-1)),N(e("input",{"onUpdate:modelValue":r[7]||(r[7]=R=>d.value=R),onInput:S,type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[oe,d.value]])]),e("div",null,[r[29]||(r[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),N(e("input",{"onUpdate:modelValue":r[8]||(r[8]=R=>q.value=R),onInput:r[9]||(r[9]=R=>V.value=!0),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,544),[[oe,q.value]])]),e("div",null,[r[31]||(r[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Thuộc thư mục",-1)),N(e("select",{"onUpdate:modelValue":r[10]||(r[10]=R=>ee.value=R),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[r[30]||(r[30]=e("option",{value:null},"(Không có)",-1)),(a(!0),i(fe,null,be(l.value,R=>(a(),i("option",{key:R.id,value:R.id},A("↳ ".repeat(R.depth)+R.name),9,Wu))),128))],512),[[We,ee.value]])]),e("div",Yu,[e("div",Ku,[r[33]||(r[33]=we("Sửa/Xóa chi tiết vui lòng vào trang ",-1)),J(D,{to:`/websites/${C(g)}/folders`,class:"text-primary"},{default:je(()=>[...r[32]||(r[32]=[we("Quản lý thư mục",-1)])]),_:1},8,["to"])])])]),e("div",Xu,[e("button",{type:"button",onClick:r[11]||(r[11]=R=>j.value=!1),class:"px-4 py-2 rounded-md border border-gray-300"},"Hủy"),e("button",{type:"button",onClick:Ve,class:"px-4 py-2 bg-blue-600 text-white rounded-md"},"Tạo")])])])):W("",!0)]),e("div",Ju,[r[35]||(r[35]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),N(e("select",{"onUpdate:modelValue":r[12]||(r[12]=R=>b.value=R),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...r[34]||(r[34]=[e("option",{value:null},"Auto (theo website)",-1),xt('<option value="blank">Custom HTML</option><optgroup label="Templates trong package"><option value="home">Home Template</option><option value="listing">Listing Template</option><option value="detail">Detail Template</option><option value="page">Page Template</option></optgroup>',2)])],512),[[We,b.value]]),r[36]||(r[36]=e("p",{class:"mt-1 text-xs text-gray-500"}," Auto: Tự động chọn template phù hợp. Custom HTML: Tự viết HTML. Templates: Chọn template có sẵn trong package. ",-1))]),b.value==="page"?(a(),i("div",Gu,[...r[37]||(r[37]=[e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Nội dung trang"),e("textarea",{id:"page-content-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)])])):W("",!0),b.value==="detail"?(a(),i("div",Qu,[e("div",Zu,[e("div",null,[r[38]||(r[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),N(e("input",{"onUpdate:modelValue":r[13]||(r[13]=R=>o.value.location=R),type:"text",placeholder:"Sunny Isles, Florida, United States hoặc iframe Google Maps embed",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,o.value.location]])]),e("div",null,[r[39]||(r[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),N(e("input",{"onUpdate:modelValue":r[14]||(r[14]=R=>o.value.phone=R),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,o.value.phone]])])]),e("div",null,[r[40]||(r[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),N(e("textarea",{"onUpdate:modelValue":r[15]||(r[15]=R=>o.value.galleryRaw=R),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,o.value.galleryRaw]])]),r[46]||(r[46]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[r[41]||(r[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",ec,[e("div",tc,[(a(),i(fe,null,be(h,R=>e("label",{key:R,class:"inline-flex items-center gap-2 cursor-pointer"},[N(e("input",{type:"checkbox",value:R,"onUpdate:modelValue":r[16]||(r[16]=X=>o.value.amenities=X),class:"rounded cursor-pointer border-gray-300"},null,8,sc),[[gt,o.value.amenities]]),e("span",ac,A(R),1)])),64))])])]),e("div",lc,[e("div",{class:"flex items-center justify-between"},[r[42]||(r[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:p,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(a(!0),i(fe,null,be(o.value.info,(R,X)=>(a(),i("div",{key:X,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",oc,[e("span",nc,A(X+1),1),r[43]||(r[43]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:ie=>ce(X),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,rc)]),N(e("input",{"onUpdate:modelValue":ie=>R.subject=ie,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,ic),[[oe,R.subject]]),N(e("textarea",{"onUpdate:modelValue":ie=>R.description=ie,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,dc),[[oe,R.description]])]))),128))]),e("div",uc,[e("div",{class:"flex items-center justify-between"},[r[44]||(r[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:L,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(a(!0),i(fe,null,be(o.value.faqs,(R,X)=>(a(),i("div",{key:X,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",cc,[e("span",pc,A(X+1),1),r[45]||(r[45]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:ie=>te(X),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,mc)]),N(e("input",{"onUpdate:modelValue":ie=>R.q=ie,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,gc),[[oe,R.q]]),N(e("textarea",{"onUpdate:modelValue":ie=>R.a=ie,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,vc),[[oe,R.a]])]))),128))])])):W("",!0),y.value&&b.value==="blank"?(a(),i("div",fc,[r[47]||(r[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),N(e("textarea",{"onUpdate:modelValue":r[17]||(r[17]=R=>$.value=R),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm font-mono"},null,512),[[oe,$.value]])])):W("",!0),(b.value==="blank"||!y.value&&!T.value)&&b.value!=="page"?(a(),i("div",bc,[r[48]||(r[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Content",-1)),((le=O.value)==null?void 0:le.type)==="html"&&(!y.value||b.value==="blank")?(a(),i("div",yc,[e("div",{ref_key:"gutterRef",ref:ve,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(a(!0),i(fe,null,be(ue.value,R=>(a(),i("div",{key:R,class:"px-2 text-xs text-gray-500 leading-6"},A(R),1))),128))],512),N(e("textarea",{ref_key:"codeRef",ref:pe,"onUpdate:modelValue":r[18]||(r[18]=R=>x.value.content=R),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:re},null,544),[[oe,x.value.content]])])):N((a(),i("textarea",{key:1,"onUpdate:modelValue":r[19]||(r[19]=R=>x.value.content=R),rows:"12",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512)),[[oe,x.value.content]])])):W("",!0),e("div",hc,[J(D,{to:Le.value,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:je(()=>[...r[49]||(r[49]=[we("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:ae.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[ae.value?(a(),i("span",wc,[J(C(Re),{class:"size-4 animate-spin"}),we(" "+A(y.value?"Creating...":"Saving..."),1)])):(a(),i("span",_c,A(y.value?"Create":"Save"),1))],8,xc)])],32)])])])])}}},kc={class:"relative flex min-h-screen w-full flex-col bg-gray-100"},$c={class:"flex flex-1 items-center justify-center p-4 lg:p-6"},Cc={class:"flex w-full max-w-6xl justify-center"},Sc={class:"grid w-full grid-cols-1 gap-8 lg:gap-16"},Tc={class:"flex flex-col justify-center"},jc={class:"mx-auto flex w-full max-w-md flex-col"},Ec={class:"flex items-center gap-3 pb-8"},Fc={class:"flex flex-col gap-2"},Ac={class:"relative flex items-center"},Lc={class:"flex flex-col gap-2"},Rc={class:"relative flex items-center"},Ic=["type"],Mc=["disabled"],Pc={key:0,class:"inline-flex items-center gap-2"},Uc={key:1},Dc={key:0,class:"text-sm text-red-600"},zc={__name:"Login",setup(t){const s=ht(),c=m(""),g=m(""),v=m(!1),y=m(""),b=m(!1),T=async()=>{var $,o;v.value=!0,y.value="";try{const P=(await z.post("/api/login",{username:c.value,password:g.value})).data.token;localStorage.setItem("adminToken",P),z.defaults.headers.common["X-Admin-Token"]=P,document.cookie=`X-Admin-Token=${P}; path=/; max-age=${60*60*24}; samesite=None; secure`,document.cookie=`adminToken=${P}; path=/; max-age=${60*60*24}; samesite=None; secure`,s.push("/")}catch(_){y.value=((o=($=_==null?void 0:_.response)==null?void 0:$.data)==null?void 0:o.error)||"Đăng nhập thất bại"}finally{v.value=!1}};return($,o)=>(a(),i("div",kc,[e("div",$c,[e("div",Cc,[e("div",Sc,[e("div",Tc,[e("div",jc,[e("div",Ec,[J(C(zs),{class:"size-8 text-blue-600"}),o[3]||(o[3]=e("span",{class:"text-xl font-semibold text-gray-800"},"VPS Manager",-1))]),o[7]||(o[7]=e("div",{class:"flex flex-col gap-1.5"},[e("p",{class:"text-gray-900 text-3xl font-bold tracking-tight"},"Đăng nhập vào Bảng điều khiển"),e("p",{class:"text-gray-500 text-base"},"Quản lý các máy chủ ảo của bạn một cách hiệu quả.")],-1)),e("form",{onSubmit:Be(T,["prevent"]),class:"flex flex-col gap-5 pt-8"},[e("label",Fc,[o[4]||(o[4]=e("p",{class:"text-gray-900 text-sm font-medium"},"Email / Tên người dùng",-1)),e("div",Ac,[J(C(Ns),{class:"absolute left-3.5 size-4 text-gray-400"}),N(e("input",{"onUpdate:modelValue":o[0]||(o[0]=_=>c.value=_),type:"text",required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-4",placeholder:"nhapemail@example.com"},null,512),[[oe,c.value]])])]),e("label",Lc,[o[5]||(o[5]=e("p",{class:"text-gray-900 text-sm font-medium"},"Mật khẩu",-1)),e("div",Rc,[J(C(Vs),{class:"absolute left-3.5 size-4 text-gray-400"}),N(e("input",{type:b.value?"text":"password","onUpdate:modelValue":o[1]||(o[1]=_=>g.value=_),required:"",class:"form-input flex w-full rounded-lg text-gray-900 focus:outline-0 focus:ring-2 focus:ring-blue-500/50 border border-gray-300 bg-white focus:border-blue-600 h-12 pl-11 pr-11",placeholder:"••••••••"},null,8,Ic),[[Ts,g.value]]),e("button",{type:"button",onClick:o[2]||(o[2]=_=>b.value=!b.value),class:"absolute right-0 h-full px-3.5 text-gray-400 hover:text-gray-600"},[b.value?(a(),de(C(Os),{key:1,class:"size-5"})):(a(),de(C(Vt),{key:0,class:"size-5"}))])])]),e("button",{type:"submit",disabled:v.value,class:"flex h-12 w-full items-center justify-center rounded-lg bg-blue-600 px-6 text-base font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500/50"},[v.value?(a(),i("span",Pc,[J(C(Re),{class:"size-4 animate-spin"}),o[6]||(o[6]=we(" Đang đăng nhập... ",-1))])):(a(),i("span",Uc,"Đăng Nhập"))],8,Mc),y.value?(a(),i("p",Dc,A(y.value),1)):W("",!0)],32)])])])])]),o[8]||(o[8]=e("footer",{class:"flex justify-center p-4"},[e("p",{class:"text-sm text-gray-500"},"© 2024 VPS Manager. Đã đăng ký bản quyền.")],-1))]))}},Nc={class:"min-h-screen bg-gray-100"},Vc={class:"max-w-3xl mx-auto py-6 sm:px-6 lg:px-8"},Oc={class:"px-4 py-6 sm:px-0"},Bc={class:"bg-white rounded-lg shadow p-6"},Hc={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qc={class:"flex justify-end gap-3 mt-6"},Wc=["disabled"],Yc={key:0,class:"inline-flex items-center gap-2"},Kc={key:1},Xc={__name:"AdminProfile",setup(t){const s=ht(),c=m({ADMIN_NAME:"",ADMIN_EMAIL:"",ADMIN_USERNAME:"",ADMIN_PASSWORD:""}),g=m(!1),v=m(""),y=m("success"),b=async()=>{const _=(await z.get("/api/settings")).data||{};c.value.ADMIN_NAME=_.ADMIN_NAME||"",c.value.ADMIN_EMAIL=_.ADMIN_EMAIL||"",c.value.ADMIN_USERNAME=_.ADMIN_USERNAME||"",c.value.ADMIN_PASSWORD=_.ADMIN_PASSWORD||""},T=async()=>{var o,_;g.value=!0,v.value="";try{await z.put("/api/settings",c.value),v.value="Đã lưu, vui lòng đăng nhập lại",y.value="success",localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"],s.push("/login")}catch(P){v.value=((_=(o=P==null?void 0:P.response)==null?void 0:o.data)==null?void 0:_.error)||"Lưu thất bại",y.value="error"}finally{g.value=!1}},$=()=>{localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"],s.push("/login")};return Ze(b),(o,_)=>(a(),i("div",Nc,[e("div",Vc,[e("div",Oc,[e("div",Bc,[_[9]||(_[9]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Thông tin quản trị",-1)),e("form",{onSubmit:Be(T,["prevent"])},[e("div",Hc,[e("div",null,[_[4]||(_[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên",-1)),N(e("input",{"onUpdate:modelValue":_[0]||(_[0]=P=>c.value.ADMIN_NAME=P),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,c.value.ADMIN_NAME]])]),e("div",null,[_[5]||(_[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),N(e("input",{"onUpdate:modelValue":_[1]||(_[1]=P=>c.value.ADMIN_EMAIL=P),type:"email",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,c.value.ADMIN_EMAIL]])]),e("div",null,[_[6]||(_[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tài khoản",-1)),N(e("input",{"onUpdate:modelValue":_[2]||(_[2]=P=>c.value.ADMIN_USERNAME=P),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,c.value.ADMIN_USERNAME]])]),e("div",null,[_[7]||(_[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Mật khẩu",-1)),N(e("input",{"onUpdate:modelValue":_[3]||(_[3]=P=>c.value.ADMIN_PASSWORD=P),type:"password",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,c.value.ADMIN_PASSWORD]])])]),e("div",qc,[e("button",{type:"button",onClick:$,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},"Logout"),e("button",{type:"submit",disabled:g.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[g.value?(a(),i("span",Yc,[J(C(Re),{class:"size-4 animate-spin"}),_[8]||(_[8]=we(" Đang lưu... ",-1))])):(a(),i("span",Kc,"Lưu"))],8,Wc)]),v.value?(a(),i("p",{key:0,class:Me([y.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},A(v.value),3)):W("",!0)],32)])])])]))}},Jc={class:"min-h-screen bg-gray-100"},Gc={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Qc={class:"px-4 py-6 sm:px-0"},Zc={class:"flex justify-between items-center mb-6"},ep={class:"text-3xl font-bold text-gray-900"},tp={class:"flex items-center gap-2"},sp={class:"bg-white shadow rounded-lg p-6"},ap={key:0,class:"mb-3 flex items-center justify-between pb-3 border-b"},lp={class:"flex items-center gap-3"},op=["checked"],np={key:0,class:"flex items-center gap-2 ml-2 pl-2 border-l border-gray-300"},rp={class:"text-sm font-medium text-blue-900"},ip={key:0,class:"flex gap-2"},dp=["disabled"],up=["disabled"],cp=["disabled"],pp=["disabled"],mp={class:"space-y-4"},gp={class:"flex items-start gap-3"},vp=["value"],fp={class:"flex-1 flex justify-between items-start"},bp={class:"font-medium"},yp={class:"text-sm text-gray-500"},hp={class:"mt-2 flex items-center space-x-4 text-sm"},xp=["title"],wp={class:"flex gap-2"},_p=["onClick","disabled"],kp=["onClick","disabled"],$p=["onClick","disabled"],Cp=["href"],Sp=["onClick","disabled"],Tp={key:0,class:"text-center text-gray-500"},jp={class:"bg-white rounded-lg shadow-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Ep={class:"space-y-4"},Fp={key:0,class:"text-sm text-green-600 mt-2"},Ap={key:0,class:"border-t pt-4"},Lp={key:1,class:"border-t pt-4"},Rp={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Ip={class:"text-sm font-medium text-gray-700 w-32"},Mp=["onUpdate:modelValue"],Pp=["value"],Up={key:0,class:"bg-gray-50 rounded-md p-4 mt-4"},Dp={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs"},zp={class:"font-medium text-gray-600"},Np={class:"ml-2 text-gray-800"},Vp={class:"text-sm space-y-1"},Op={class:"text-green-600"},Bp={class:"text-gray-600"},Hp={key:0,class:"mt-2"},qp={class:"text-xs text-red-600 mt-1 max-h-32 overflow-y-auto"},Wp={class:"flex justify-end gap-3 pt-4 border-t"},Yp=["disabled"],Kp={__name:"SubdomainsManagement",setup(t){const c=pt().params.websiteId,g=m(""),v=m([]),y=m([]),b=m([]),T=m([]),$=m([]),o=m([]),_=m(!1),P=m(!1),Q=m(null),d=m(!1),ee=m(null),j=m([]),q=m("detail"),V={detail:{name:{label:"Title",jsonField:"name"},address:{label:"Address",jsonField:"address"},about:{label:"About",jsonField:"about"},rating:{label:"Rating",jsonField:"rating"},images:{label:"Images",jsonField:"images"},facilities:{label:"Facilities",jsonField:"facilities"},faqs:{label:"FAQs",jsonField:"faqs"},houseRules:{label:"Useful Information",jsonField:"houseRules"}},blank:{name:{label:"Title",jsonField:"name"},content:{label:"Content",jsonField:"content"}},home:{name:{label:"Title",jsonField:"name"},about:{label:"About",jsonField:"about"},services:{label:"Services",jsonField:"services"},testimonials:{label:"Testimonials",jsonField:"testimonials"}},listing:{name:{label:"Title",jsonField:"name"},items:{label:"Items",jsonField:"items"},filters:{label:"Filters",jsonField:"filters"}}},h=m({name:{label:"Title",jsonField:"name"},address:{label:"Address",jsonField:"address"},about:{label:"About",jsonField:"about"},rating:{label:"Rating",jsonField:"rating"},images:{label:"Images",jsonField:"images"},facilities:{label:"Facilities",jsonField:"facilities"},faqs:{label:"FAQs",jsonField:"faqs"},houseRules:{label:"Useful Information",jsonField:"houseRules"}}),x=Ie(()=>{const E={},u=["name"];return Object.keys(h.value).forEach(w=>{const l=h.value[w];(u.includes(w)||l.jsonField&&j.value.includes(l.jsonField))&&(E[w]=l)}),E}),O=Ie(()=>v.value.length>0&&o.value.length===v.value.length),M=Ie(()=>Q.value&&Q.value.length>0?Q.value[0]:null),K=Ie(()=>Q.value&&Q.value.length>0&&h.value.name.jsonField),ae=()=>{O.value?o.value=[]:o.value=v.value.map(E=>E.id)},ve=async()=>{const E=await z.get(`/api/websites/${c}`);g.value=E.data.domain;const w=(await z.get("/api/websites")).data||[];v.value=w.filter(l=>l.domain.endsWith("."+g.value))};Ze(ve);const pe=async E=>{var u,w,l,f;try{y.value=[...y.value,E.id],await z.post(`/api/websites/${E.id}/deploy`);let S=0;for(;S<60&&(await new Promise(Y=>setTimeout(Y,2e3)),(await z.get(`/api/websites/${E.id}`)).data.status==="deploying");)S++;await ve(),alert(`✓ Deploy thành công cho ${E.domain}`)}catch(S){const k=((w=(u=S==null?void 0:S.response)==null?void 0:u.data)==null?void 0:w.message)||((f=(l=S==null?void 0:S.response)==null?void 0:l.data)==null?void 0:f.error)||"Deploy thất bại";alert(`✗ ${k}`)}finally{y.value=y.value.filter(S=>S!==E.id)}},Se=async E=>{if(confirm(`Delete subdomain ${E.domain}?`))try{b.value=[...b.value,E.id],await z.delete(`/api/websites/${E.id}`),await ve()}finally{b.value=b.value.filter(u=>u!==E.id)}},Ue=async E=>{var u,w,l,f;try{T.value=[...T.value,E.id],await z.post(`/api/websites/${E.id}/ssl`),await ve(),alert(`✓ SSL đã được cài đặt thành công cho ${E.domain}`)}catch(S){const k=((w=(u=S==null?void 0:S.response)==null?void 0:u.data)==null?void 0:w.message)||((f=(l=S==null?void 0:S.response)==null?void 0:l.data)==null?void 0:f.error)||"Cài đặt SSL thất bại";alert(`✗ ${k}`)}finally{T.value=T.value.filter(S=>S!==E.id)}},Ae=async E=>{if(confirm(`Deactivate subdomain ${E.domain}?`))try{$.value=[...$.value,E.id],await z.post(`/api/websites/${E.id}/deactivate`),await ve()}finally{$.value=$.value.filter(u=>u!==E.id)}},he=async()=>{var E,u;if(o.value.length!==0&&confirm(`Deploy ${o.value.length} subdomains?`))try{_.value=!0;const w=await z.post("/api/websites/bulk/deploy",{website_ids:o.value});o.value=[];const l=w.data.message||"Operations queued successfully";alert(`✓ ${l}

The page will refresh automatically to show progress.`),setTimeout(()=>{ve()},3e3)}catch(w){const l=((u=(E=w==null?void 0:w.response)==null?void 0:E.data)==null?void 0:u.message)||"Bulk deploy failed";alert(`✗ ${l}`)}finally{_.value=!1}},xe=async()=>{var E,u;if(o.value.length!==0&&confirm(`Install SSL for ${o.value.length} subdomains?`))try{_.value=!0;const w=await z.post("/api/websites/bulk/ssl",{website_ids:o.value});o.value=[];const l=w.data.message||"Operations queued successfully";alert(`✓ ${l}

The page will refresh automatically to show progress.`),setTimeout(()=>{ve()},3e3)}catch(w){const l=((u=(E=w==null?void 0:w.response)==null?void 0:E.data)==null?void 0:u.message)||"Bulk SSL installation failed";alert(`✗ ${l}`)}finally{_.value=!1}},Le=async()=>{var E,u;if(o.value.length!==0&&confirm(`Deactivate ${o.value.length} subdomains?`))try{_.value=!0;const w=await z.post("/api/websites/bulk/deactivate",{website_ids:o.value});o.value=[];const l=w.data.message||"Operations queued successfully";alert(`✓ ${l}

The page will refresh automatically to show progress.`),setTimeout(()=>{ve()},3e3)}catch(w){const l=((u=(E=w==null?void 0:w.response)==null?void 0:E.data)==null?void 0:u.message)||"Bulk deactivate failed";alert(`✗ ${l}`)}finally{_.value=!1}},ze=async()=>{var E,u;if(o.value.length!==0&&confirm(`DELETE ${o.value.length} subdomains? This action cannot be undone!`))try{_.value=!0;const w=await z.post("/api/websites/bulk/delete",{website_ids:o.value});o.value=[];const l=w.data.message||"Operations queued successfully";alert(`✓ ${l}

The page will refresh automatically to show progress.`),setTimeout(()=>{ve()},3e3)}catch(w){const l=((u=(E=w==null?void 0:w.response)==null?void 0:E.data)==null?void 0:u.message)||"Bulk delete failed";alert(`✗ ${l}`)}finally{_.value=!1}},Ne=E=>{const u=E.target.files[0];if(!u)return;const w=new FileReader;w.onload=l=>{try{const f=JSON.parse(l.target.result);let S=f;if(Array.isArray(f)&&f.length>0&&f[0].result&&(S=f.map(k=>k.result)),Q.value=S,ee.value=null,S.length>0){const k=S[0],Y=Object.keys(k);j.value=Y,Ve()}Qe.success(`Loaded ${S.length} items from file`)}catch(f){Qe.error("Invalid JSON file"),console.error(f)}},w.readAsText(u)},Ve=()=>{const E=V[q.value]||V.detail;h.value=JSON.parse(JSON.stringify(E));const u=j.value;if(q.value==="detail"){const w={name:u.find(l=>l.toLowerCase().includes("name")||l.toLowerCase().includes("title")),address:u.find(l=>l.toLowerCase().includes("address")||l.toLowerCase().includes("location")),about:u.find(l=>l.toLowerCase().includes("about")||l.toLowerCase().includes("description")),rating:u.find(l=>l.toLowerCase().includes("rating")||l.toLowerCase().includes("score")),images:u.find(l=>l.toLowerCase().includes("image")||l.toLowerCase().includes("photo")),facilities:u.find(l=>l.toLowerCase().includes("facilit")||l.toLowerCase().includes("amenity")),faqs:u.find(l=>l.toLowerCase().includes("faq")||l.toLowerCase().includes("question")),houseRules:u.find(l=>l.toLowerCase().includes("rule")||l.toLowerCase().includes("policy"))};Object.keys(w).forEach(l=>{w[l]&&h.value[l]&&(h.value[l].jsonField=w[l])})}else if(q.value==="blank"){const w={name:u.find(l=>l.toLowerCase().includes("name")||l.toLowerCase().includes("title")),content:u.find(l=>l.toLowerCase().includes("content")||l.toLowerCase().includes("description")||l.toLowerCase().includes("body"))};Object.keys(w).forEach(l=>{w[l]&&h.value[l]&&(h.value[l].jsonField=w[l])})}else if(q.value==="home"){const w={name:u.find(l=>l.toLowerCase().includes("name")||l.toLowerCase().includes("title")),about:u.find(l=>l.toLowerCase().includes("about")||l.toLowerCase().includes("description")),services:u.find(l=>l.toLowerCase().includes("service")),testimonials:u.find(l=>l.toLowerCase().includes("testimonial")||l.toLowerCase().includes("review"))};Object.keys(w).forEach(l=>{w[l]&&h.value[l]&&(h.value[l].jsonField=w[l])})}else if(q.value==="listing"){const w={name:u.find(l=>l.toLowerCase().includes("name")||l.toLowerCase().includes("title")),items:u.find(l=>l.toLowerCase().includes("item")||l.toLowerCase().includes("list")),filters:u.find(l=>l.toLowerCase().includes("filter")||l.toLowerCase().includes("category"))};Object.keys(w).forEach(l=>{w[l]&&h.value[l]&&(h.value[l].jsonField=w[l])})}},me=E=>{if(!M.value||!E)return"-";const u=M.value[E];return Array.isArray(u)?`${u.length} items`:typeof u=="object"&&u!==null?JSON.stringify(u).substring(0,50)+"...":String(u||"-").substring(0,100)},ne=()=>{P.value=!1,setTimeout(()=>{P.value||(Q.value=null,ee.value=null,j.value=[],q.value="detail")},300)},F=async()=>{var u,w,l,f;if(!Q.value||!g.value)return;d.value=!0,ee.value=null;const E={total:Q.value.length,created:0,skipped:0,errors:[]};try{const k=(await z.get(`/api/websites/${c}`)).data.vps_server_id;for(const Y of Q.value)try{const L={};Object.keys(h.value).forEach(U=>{const B=h.value[U].jsonField;B&&Y[B]!==void 0&&(L[U]=Y[B])});const p=L.name;if(!p){E.skipped++,E.errors.push({domain:"Unknown",error:"Missing title"});continue}const ce=`${p.toLowerCase().replace(/[àáạảãâầấậẩẫăằắặẳẵ]/g,"a").replace(/[èéẹẻẽêềếệểễ]/g,"e").replace(/[ìíịỉĩ]/g,"i").replace(/[òóọỏõôồốộổỗơờớợởỡ]/g,"o").replace(/[ùúụủũưừứựửữ]/g,"u").replace(/[ỳýỵỷỹ]/g,"y").replace(/đ/g,"d").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-")}.${g.value}`;if(v.value.some(U=>U.domain===ce)){E.skipped++,E.errors.push({domain:ce,error:"Subdomain already exists"});continue}const Te=(await z.post("/api/websites",{domain:ce,type:"laravel1",template_package:"laravel-hotel-1",vps_server_id:k})).data.id;await z.post(`/api/websites/${Te}/pages/import`,{data:[L],folder_ids:[],template_type:q.value}),E.created++}catch(L){E.skipped++,E.errors.push({domain:mapped.name||"Unknown",error:((w=(u=L.response)==null?void 0:u.data)==null?void 0:w.message)||L.message})}ee.value=E,Qe.success(`Import completed: ${E.created} subdomains created`),await ve()}catch(S){Qe.error("Import failed: "+(((f=(l=S.response)==null?void 0:l.data)==null?void 0:f.message)||S.message)),console.error(S)}finally{d.value=!1}};return(E,u)=>{const w=nt("router-link");return a(),i("div",Jc,[e("div",Gc,[e("div",Qc,[e("div",Zc,[e("h1",ep,"Subdomains of "+A(g.value),1),e("div",tp,[e("button",{onClick:u[0]||(u[0]=l=>P.value=!0),class:"px-4 py-2 border border-gray-300 rounded-md text-green-600 hover:bg-gray-50 flex items-center gap-2"},[...u[4]||(u[4]=[e("svg",{viewBox:"0 0 24 24",class:"size-4",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),e("span",null,"Import",-1)])]),J(w,{to:`/websites/${C(c)}/subdomains/new`,class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"},{default:je(()=>[...u[5]||(u[5]=[we("Create Subdomain",-1)])]),_:1},8,["to"])])]),e("div",sp,[v.value.length>0?(a(),i("div",ap,[e("div",lp,[e("input",{type:"checkbox",checked:O.value,onChange:ae,class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,op),e("label",{class:"text-sm text-gray-700 font-medium cursor-pointer",onClick:ae},"Select All"),o.value.length>0?(a(),i("div",np,[e("span",rp,A(o.value.length)+" selected",1),e("button",{onClick:u[1]||(u[1]=l=>o.value=[]),class:"text-sm text-blue-600 hover:text-blue-800"},"Clear")])):W("",!0)]),o.value.length>0?(a(),i("div",ip,[e("button",{onClick:he,disabled:_.value,class:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-1"},[_.value?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(Nt),{key:1,class:"size-4"})),u[6]||(u[6]=we(" Deploy ",-1))],8,dp),e("button",{onClick:xe,disabled:_.value,class:"px-3 py-1.5 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 flex items-center gap-1"},[_.value?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(mt),{key:1,class:"size-4"})),u[7]||(u[7]=we(" SSL ",-1))],8,up),e("button",{onClick:Le,disabled:_.value,class:"px-3 py-1.5 text-sm bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:bg-gray-400 flex items-center gap-1"},[_.value?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(kt),{key:1,class:"size-4"})),u[8]||(u[8]=we(" Deactivate ",-1))],8,cp),e("button",{onClick:ze,disabled:_.value,class:"px-3 py-1.5 text-sm bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-1"},[_.value?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(ct),{key:1,class:"size-4"})),u[9]||(u[9]=we(" Delete ",-1))],8,pp)])):W("",!0)])):W("",!0),e("div",mp,[(a(!0),i(fe,null,be(v.value,l=>{var f;return a(),i("div",{key:l.id,class:"border rounded-lg p-4"},[e("div",gp,[N(e("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":u[2]||(u[2]=S=>o.value=S),class:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,8,vp),[[gt,o.value]]),e("div",fp,[e("div",null,[e("h4",bp,A(l.domain),1),e("p",yp,"Server: "+A(((f=l.vps_server)==null?void 0:f.name)||"N/A"),1),e("div",hp,[e("span",{class:Me(["inline-flex items-center",{"text-blue-600":l.status==="deploying","text-green-600":l.status==="deployed","text-gray-600":l.status==="pending"||l.status==="draft","text-orange-600":l.status==="suspended","text-red-600":l.status==="error"}]),title:l.status},[l.status==="deploying"?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):l.status==="deployed"?(a(),de(C(Ct),{key:1,class:"size-4"})):l.status==="pending"||l.status==="draft"?(a(),de(C(At),{key:2,class:"size-4"})):l.status==="suspended"?(a(),de(C(kt),{key:3,class:"size-4"})):(a(),de(C(St),{key:4,class:"size-4"}))],10,xp),e("span",{class:Me(["inline-flex items-center gap-1",l.ssl_enabled?"text-green-600":"text-gray-400"])},[l.ssl_enabled?(a(),de(C(mt),{key:0,class:"size-4"})):(a(),de(C(ms),{key:1,class:"size-4"}))],2)])]),e("div",wp,[J(w,{to:`/websites/${l.id}/pages`,class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-blue-600 hover:bg-gray-50",title:"Manage Pages"},{default:je(()=>[J(C(gs),{class:"size-4"})]),_:1},8,["to"]),e("button",{onClick:S=>pe(l),disabled:y.value.includes(l.id)||l.status==="deployed",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-green-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deploy"},[y.value.includes(l.id)?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(Nt),{key:1,class:"size-4"}))],8,_p),l.status==="deployed"?(a(),i("button",{key:0,onClick:S=>Ue(l),disabled:T.value.includes(l.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-purple-600 hover:bg-gray-50 disabled:text-gray-400",title:"Enable SSL"},[T.value.includes(l.id)?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(mt),{key:1,class:"size-4"}))],8,kp)):W("",!0),l.status==="deployed"||l.status==="error"?(a(),i("button",{key:1,onClick:S=>Ae(l),disabled:$.value.includes(l.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-orange-600 hover:bg-gray-50 disabled:text-gray-400",title:"Deactivate"},[$.value.includes(l.id)?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(kt),{key:1,class:"size-4"}))],8,$p)):W("",!0),e("a",{href:(l.ssl_enabled?"https://":"http://")+l.domain,target:"_blank",class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-indigo-600 hover:bg-gray-50",title:"View"},[J(C(vt),{class:"size-4"})],8,Cp),e("button",{onClick:S=>Se(l),disabled:b.value.includes(l.id),class:"h-8 w-8 flex items-center justify-center rounded-md border border-gray-300 bg-white text-red-600 hover:bg-gray-50 disabled:text-gray-400",title:"Delete"},[b.value.includes(l.id)?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):(a(),de(C(ct),{key:1,class:"size-4"}))],8,Sp)])])])])}),128)),v.value.length===0?(a(),i("div",Tp,"No subdomains found")):W("",!0)])]),P.value?(a(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:Be(ne,["self"])},[e("div",jp,[e("div",{class:"flex justify-between items-center mb-4"},[u[11]||(u[11]=e("h2",{class:"text-xl font-bold"},"Import Subdomains from JSON",-1)),e("button",{onClick:ne,class:"text-gray-500 hover:text-gray-700"},[...u[10]||(u[10]=[e("svg",{viewBox:"0 0 24 24",class:"size-6",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18"}),e("path",{d:"M6 6l12 12"})],-1)])])]),e("div",Ep,[e("div",null,[u[12]||(u[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"1"),we(" Upload JSON File ")])],-1)),e("input",{type:"file",onChange:Ne,accept:".json",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),Q.value?(a(),i("p",Fp,"✓ Loaded "+A(Q.value.length)+" items",1)):W("",!0),u[13]||(u[13]=e("p",{class:"text-xs text-gray-500 mt-1"},"Each item will create a new subdomain with initial page",-1))]),Q.value?(a(),i("div",Ap,[u[15]||(u[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"2"),we(" Select Template Type ")])],-1)),N(e("select",{"onUpdate:modelValue":u[3]||(u[3]=l=>q.value=l),onChange:Ve,class:"w-full md:w-1/2 border-gray-300 rounded-md text-sm"},[...u[14]||(u[14]=[e("option",{value:"detail"},"Hotel Detail",-1),e("option",{value:"blank"},"Blank (HTML)",-1),e("option",{value:"home"},"Home Page",-1),e("option",{value:"listing"},"Listing Page",-1)])],544),[[We,q.value]]),u[16]||(u[16]=e("p",{class:"text-xs text-gray-500 mt-1"},"Select which template to use for imported pages",-1))])):W("",!0),Q.value&&j.value.length>0?(a(),i("div",Lp,[u[19]||(u[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[e("span",{class:"inline-flex items-center gap-2"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-600 text-white text-xs font-bold"},"3"),we(" Map JSON Fields to Page Template Fields ")])],-1)),e("div",Rp,[(a(!0),i(fe,null,be(x.value,(l,f)=>(a(),i("div",{key:f,class:"flex items-center gap-3"},[e("label",Ip,A(l.label)+":",1),N(e("select",{"onUpdate:modelValue":S=>l.jsonField=S,class:"flex-1 text-sm border-gray-300 rounded-md"},[u[17]||(u[17]=e("option",{value:null},"-- Skip --",-1)),(a(!0),i(fe,null,be(j.value,S=>(a(),i("option",{key:S,value:S},A(S),9,Pp))),128))],8,Mp),[[We,l.jsonField]])]))),128))]),M.value?(a(),i("div",Up,[u[18]||(u[18]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-2"},"Preview (First Item):",-1)),e("div",Dp,[(a(!0),i(fe,null,be(x.value,(l,f)=>N((a(),i("div",{key:f},[e("span",zp,A(l.label)+":",1),e("span",Np,A(me(l.jsonField)),1)])),[[rs,l.jsonField]])),128))])])):W("",!0)])):W("",!0),ee.value?(a(),i("div",{key:2,class:Me(["p-4 rounded-md border-t pt-4",ee.value.errors.length>0?"bg-yellow-50":"bg-green-50"])},[u[21]||(u[21]=e("p",{class:"font-medium mb-2"},"Import Results:",-1)),e("ul",Vp,[e("li",null,"Total: "+A(ee.value.total),1),e("li",Op,"Created: "+A(ee.value.created),1),e("li",Bp,"Skipped: "+A(ee.value.skipped),1)]),ee.value.errors.length>0?(a(),i("div",Hp,[u[20]||(u[20]=e("p",{class:"text-sm font-medium text-red-600"},"Errors:",-1)),e("ul",qp,[(a(!0),i(fe,null,be(ee.value.errors,(l,f)=>(a(),i("li",{key:f},A(l.domain)+": "+A(l.error),1))),128))])])):W("",!0)],2)):W("",!0),e("div",Wp,[e("button",{onClick:ne,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},A(ee.value?"Close":"Cancel"),1),ee.value?W("",!0):(a(),i("button",{key:0,onClick:F,disabled:!K.value||d.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2"},[d.value?(a(),de(C(Re),{key:0,class:"size-4 animate-spin"})):W("",!0),e("span",null,A(d.value?"Importing...":"Import Subdomains"),1)],8,Yp))])])])])):W("",!0)])])])}}},Xp="modulepreload",Jp=function(t){return"/"+t},os={},it=function(s,c,g){let v=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),T=(b==null?void 0:b.nonce)||(b==null?void 0:b.getAttribute("nonce"));v=Promise.allSettled(c.map($=>{if($=Jp($),$ in os)return;os[$]=!0;const o=$.endsWith(".css"),_=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${$}"]${_}`))return;const P=document.createElement("link");if(P.rel=o?"stylesheet":Xp,o||(P.as="script"),P.crossOrigin="",P.href=$,T&&P.setAttribute("nonce",T),document.head.appendChild(P),o)return new Promise((Q,d)=>{P.addEventListener("load",Q),P.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${$}`)))})}))}function y(b){const T=new Event("vite:preloadError",{cancelable:!0});if(T.payload=b,window.dispatchEvent(T),!T.defaultPrevented)throw b}return v.then(b=>{for(const T of b||[])T.status==="rejected"&&y(T.reason);return s().catch(y)})},Gp={class:"min-h-screen bg-gray-100"},Qp={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},Zp={class:"px-4 py-6 sm:px-0"},em={class:"bg-white rounded-lg shadow p-6"},tm={class:"text-sm text-gray-600 mb-4"},sm={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},am={class:"text-xs text-gray-500 mt-1"},lm={class:"md:col-span-2"},om=["value"],nm={class:"mt-4"},rm={key:0,class:"mt-4"},im={class:"flex items-center justify-between mb-2"},dm={class:"flex items-center gap-3"},um={class:"border border-gray-300 rounded-md p-3 max-h-48 overflow-auto"},cm={key:0,class:"text-sm text-gray-500"},pm={key:1,class:"space-y-2"},mm=["value","onChange"],gm={class:"mt-6"},vm={key:0,class:"mt-4 space-y-4"},fm={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bm={class:"mt-1 border border-gray-300 rounded-md p-2 max-h-64 overflow-auto"},ym={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},hm=["value"],xm={class:"text-sm"},wm={class:"space-y-3"},_m={class:"flex items-center gap-2"},km={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},$m=["onClick"],Cm=["onUpdate:modelValue"],Sm=["onUpdate:modelValue"],Tm={class:"space-y-3"},jm={class:"flex items-center gap-2"},Em={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-semibold"},Fm=["onClick"],Am=["onUpdate:modelValue"],Lm=["onUpdate:modelValue"],Rm={key:1,class:"mt-4"},Im={class:"mt-1 grid",style:{"grid-template-columns":"48px 1fr"}},Mm={class:"flex justify-end gap-3 mt-6"},Pm=["disabled"],Um={key:0,class:"inline-flex items-center gap-2"},Dm={key:1},zm={__name:"SubdomainEdit",setup(t){const s=pt(),c=ht(),g=s.params.websiteId,v=m(""),y=m(null),b=m([]),T=m([]),$=m(!1);m(""),m(""),m(null),m(!1);const o=m([]),_=m({sub:"",vps_server_id:""}),P=m("blank"),Q=m(""),d=m({title:"",location:"",phone:"",galleryRaw:"",about1:"",amenities:[],info:[{subject:"",description:""},{subject:"",description:""}],faqs:[{q:"",a:""},{q:"",a:""}]}),ee=["Private bathroom","WiFi available in all areas, free","Scenic view","Airport shuttle","Air conditioning","Flat-screen TV","Family rooms","Non-smoking rooms","Spa & wellness centre","Restaurant","Toilet","Toilet paper","Towels","Bidet","Towels/linen (extra fee)","Bathtub or shower","Slippers","Free toiletries","Hairdryer","Shower","Linen","Wardrobe or closet","View","Terrace / patio","Electric kettle","Refrigerator","Bicycle rental (surcharge)","Live music/performance (surcharge)","Cooking class (off-site, surcharge)","Cycling tour (surcharge)","Walking tour (surcharge)","Evening entertainment","Bicycle","Karaoke (surcharge)","Fireplace","Desk","Cable channels","Satellite channels","Telephone","TV","Fruit","Special diet menus (on request)","Snack bar","Breakfast in the room","Minibar","ATM on-site","Lockers","Luggage storage","Tour desk","Currency exchange","24-hour front desk","Daily housekeeping","Ironing service (surcharge)","Dry cleaning (surcharge)","Laundry (surcharge)","Fax/photocopying (surcharge)","Business centre","Meeting/banquet facilities (surcharge)","Fire extinguishers","Smoke alarms","Security alarm","Key card access","24-hour security","Safety deposit box","Shuttle service (surcharge)","Smoking area","Heating","Hardwood floors","Soundproofing","Car rental","Elevator","Iron","Room service","Facilities for disabled guests","Upper floors accessible by elevator"],j=m(null),q=m(null),V=m(!1),h=m(""),x=m(""),O=ne=>ne.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"d").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),M=Ie(()=>O(_.value.sub||"")),K=Ie(()=>(M.value?`${M.value}.`:"")+v.value),ae=Ie(()=>{const F=(Q.value||"").split(`
`).length;return F>0?F:1}),ve=Ie(()=>{const ne=[...T.value||[]],F=new Map(ne.map(k=>[String(k.id),k])),E=k=>k.sort((Y,L)=>(Y.name||"").localeCompare(L.name||"")),u=k=>ne.filter(Y=>String(Y.parent_id)===String(k)),w=k=>!k.parent_id||!F.has(String(k.parent_id))||String(k.parent_id)===String(k.id),l=E(ne.filter(w)),f=[],S=(k,Y)=>{f.push({...k,depth:Y}),E(u(k.id)).forEach(L=>S(L,Y+1))};return l.forEach(k=>S(k,0)),f}),pe=ne=>{if(o.value.includes(ne)){const F=T.value.find(E=>E.id===ne);if(F&&F.parent_id){const E=u=>{if(!u)return;o.value.includes(u)||o.value.push(u);const w=T.value.find(l=>l.id===u);w&&w.parent_id&&E(w.parent_id)};E(F.parent_id)}}},Se=()=>{j.value&&q.value&&(j.value.scrollTop=q.value.scrollTop)},Ue=async()=>{const ne=(d.value.galleryRaw||"").split(`
`).map(p=>p.trim()).filter(Boolean),F=(d.value.title||"").trim(),E=["Home","Stays",F];let w=(await z.get("/templates/laravel-hotel-1/detail/index.html")).data||"",l="",f="";try{l=(await z.get("/templates/_shared/header.html")).data||""}catch{}try{f=(await z.get("/templates/_shared/footer.html")).data||""}catch{}l&&(w=w.replace(/<header[^>]*>[\s\S]*?<\/header>/i,l)),f&&(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i.test(w)?w=w.replace(/(?:<!--\s*Footer\s*-->\s*)?<footer[^>]*>[\s\S]*?<\/footer>/i,f):/<\/body>/i.test(w)?w=w.replace(/<\/body>/i,f+"</body>"):w+=`
`+f);const S=d.value.amenities||[],k=ne.map(p=>String(p).replace(/<\/script>/gi,"<\\/script>")),Y={title:F||"Hotel",location:d.value.location||"",location_text:d.value.location||"",phone:d.value.phone||"",about1:d.value.about1||"",amenities:S,faqs:d.value.faqs||[],info:d.value.info||[],gallery:k,breadcrumb_items:E.filter(Boolean)},L=`<script type="application/json" id="page-data">${JSON.stringify(Y)}<\/script>`;return w=w.replace("{{GALLERY_DATA_SCRIPT}}",L),w=w.replace(/<title>[^<]*<\/title>/i,`<title>${Y.title}</title>`),w},Ae=()=>{d.value.faqs=[...d.value.faqs||[],{q:"",a:""}]},he=()=>{d.value.info=[...d.value.info||[],{subject:"",description:""}]},xe=ne=>{d.value.faqs=(d.value.faqs||[]).filter((F,E)=>E!==ne)},Le=ne=>{d.value.info=(d.value.info||[]).filter((F,E)=>E!==ne)},ze=async()=>{var ne,F,E,u,w,l,f,S,k,Y,L,p,te,ce,ue,re;V.value=!0,h.value="";try{const Te="Stays",U=_.value.vps_server_id;if(!U){h.value="Chưa chọn VPS Server",x.value="error",V.value=!1;return}const B={domain:K.value,type:((ne=y.value)==null?void 0:ne.type)||"html",vps_server_id:U};((F=y.value)==null?void 0:F.type)==="laravel1"&&(B.template_package="laravel-hotel-1");let r;try{r=(await z.post("/api/websites",B)).data}catch(X){const ie=((u=(E=X==null?void 0:X.response)==null?void 0:E.data)==null?void 0:u.message)||((l=(w=X==null?void 0:X.response)==null?void 0:w.data)==null?void 0:l.error)||"";if(((f=X==null?void 0:X.response)==null?void 0:f.status)===409||/domain/i.test(ie)){if(r=((await z.get("/api/websites")).data||[]).find(se=>se.domain===K.value),!r)throw X}else throw X}let D,le=null;if(P.value==="blank")D=Q.value;else{D=await Ue();const X=(d.value.galleryRaw||"").split(`
`).map(ie=>ie.trim()).filter(Boolean);le={title:(d.value.title||"").trim()||"Hotel",location:d.value.location||"",location_text:d.value.location||"",phone:d.value.phone||"",about1:d.value.about1||"",amenities:d.value.amenities||[],faqs:d.value.faqs||[],info:d.value.info||[],gallery:X,breadcrumb_items:["Home","Stays",(d.value.title||"").trim()].filter(Boolean)}}const R={path:"/",filename:"index.html",title:P.value==="blank"?d.value.title||"":d.value.title,content:D};P.value!=="blank"&&(R.template_type=P.value,R.template_data=le),o.value.length>0&&(R.folder_ids=o.value);try{await z.post(`/api/websites/${r.id}/pages`,R)}catch(X){const ie=((k=(S=X==null?void 0:X.response)==null?void 0:S.data)==null?void 0:k.message)||((L=(Y=X==null?void 0:X.response)==null?void 0:Y.data)==null?void 0:L.error)||"";if(((p=X==null?void 0:X.response)==null?void 0:p.status)===409||/path/i.test(ie)){const se=((await z.get(`/api/websites/${r.id}/pages`)).data||[]).find($e=>($e.path||"/")==="/"&&($e.filename||"").toLowerCase()==="index.html");se&&await z.put(`/api/pages/${se.id}`,R)}else if(/Failed to write page/i.test(ie)){const De=`subdomainDraft:${r.id}`;localStorage.setItem(De,JSON.stringify(R))}}h.value="Subdomain created. Deploy to go online.",x.value="success",c.push(`/websites/${g}/subdomains`)}catch(Te){h.value=((ce=(te=Te==null?void 0:Te.response)==null?void 0:te.data)==null?void 0:ce.message)||((re=(ue=Te==null?void 0:Te.response)==null?void 0:ue.data)==null?void 0:re.error)||"Failed to create subdomain",x.value="error"}finally{V.value=!1}},Ne=async()=>{var E;const ne=await z.get(`/api/websites/${g}`);y.value=ne.data,v.value=y.value.domain;const F=await z.get("/api/vps");b.value=F.data.filter(u=>u.status==="active"),(E=y.value)!=null&&E.vps_server_id&&(_.value.vps_server_id=y.value.vps_server_id);try{const u=await z.get(`/api/websites/${g}/folders`);T.value=u.data||[]}catch(u){console.error("Failed to load folders:",u)}},Ve=async()=>{if(window.tinymce)return;const{default:ne}=await it(async()=>{const{default:F}=await import("./tinymce.js").then(E=>E.t);return{default:F}},[]);await it(()=>import("./index.js").then(F=>F.i),[]),await it(()=>import("./index2.js").then(F=>F.i),[]),await it(()=>import("./model.js"),[]),await it(()=>import("./skin.js"),[]),await it(()=>import("./content.js"),[]),await it(()=>import("./content2.js"),[]),await it(()=>import("./index3.js").then(F=>F.i),[]),await it(()=>import("./index4.js").then(F=>F.i),[]),window.tinymce=ne},me=async()=>{await Ve(),await zt();const ne=document.getElementById("about1-editor-sub");ne&&(ne.value=d.value.about1||"",window.tinymce.init({selector:"#about1-editor-sub",menubar:!1,plugins:"link lists",toolbar:"bold italic underline | bullist numlist | link",height:320,setup:F=>{F.on("Change KeyUp SetContent",()=>{d.value.about1=F.getContent()||""})}}).then(F=>{const E=F&&F[0];E&&(d.value.about1||"").trim()&&E.setContent(d.value.about1)}))};return Ze(async()=>{await Ne(),P.value==="detail"&&await me()}),_t(P,async ne=>{if(ne==="detail")await me();else if(window.tinymce){const F=window.tinymce.get("about1-editor-sub");F&&F.remove()}}),Ht(()=>{if(window.tinymce){const ne=window.tinymce.get("about1-editor-sub");ne&&ne.remove()}}),(ne,F)=>{const E=nt("router-link");return a(),i("div",Gp,[e("div",Qp,[e("div",Zp,[e("div",em,[F[32]||(F[32]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Create Subdomain",-1)),e("p",tm,"Parent: "+A(v.value),1),e("form",{onSubmit:Be(ze,["prevent"])},[e("div",sm,[e("div",null,[F[11]||(F[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Subdomain",-1)),N(e("input",{"onUpdate:modelValue":F[0]||(F[0]=u=>_.value.sub=u),type:"text",required:"",placeholder:"hotel",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,_.value.sub]]),e("p",am,"Sẽ tạo domain: "+A(K.value),1)]),e("div",lm,[F[13]||(F[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"VPS Server",-1)),N(e("select",{"onUpdate:modelValue":F[1]||(F[1]=u=>_.value.vps_server_id=u),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[F[12]||(F[12]=e("option",{value:""},"Select VPS Server",-1)),(a(!0),i(fe,null,be(b.value,u=>(a(),i("option",{value:u.id,key:u.id},A(u.name)+" ("+A(u.ip_address)+")",9,om))),128))],512),[[We,_.value.vps_server_id]])])]),e("div",nm,[F[15]||(F[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Template giao diện",-1)),N(e("select",{"onUpdate:modelValue":F[2]||(F[2]=u=>P.value=u),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},[...F[14]||(F[14]=[e("option",{value:"blank"},"HTML mặc định",-1),e("option",{value:"detail"},"Hotel Detail",-1)])],512),[[We,P.value]])]),P.value==="detail"?(a(),i("div",rm,[e("div",im,[F[17]||(F[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Danh mục (chọn nhiều)",-1)),e("div",dm,[J(E,{to:`/websites/${C(g)}/folders`,class:"text-sm text-primary"},{default:je(()=>[...F[16]||(F[16]=[we("Quản lý danh mục",-1)])]),_:1},8,["to"]),e("button",{type:"button",onClick:F[3]||(F[3]=u=>$.value=!0),class:"text-sm text-primary"},"+ Tạo nhanh")])]),e("div",um,[T.value.length===0?(a(),i("div",cm,"Không có danh mục")):(a(),i("div",pm,[(a(!0),i(fe,null,be(ve.value,u=>(a(),i("label",{key:u.id,class:"flex items-center gap-2 cursor-pointer"},[N(e("input",{type:"checkbox",value:u.id,"onUpdate:modelValue":F[4]||(F[4]=w=>o.value=w),onChange:w=>pe(u.id),class:"rounded cursor-pointer"},null,40,mm),[[gt,o.value]]),e("span",{class:"text-sm",style:ot({paddingLeft:(u.depth>0?u.depth*16:0)+"px"})},A("↳ ".repeat(u.depth))+A(u.name),5)]))),128))]))])])):W("",!0),e("div",gm,[F[29]||(F[29]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Nội dung template",-1)),P.value==="detail"?(a(),i("div",vm,[e("div",fm,[e("div",null,[F[18]||(F[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tiêu đề khách sạn",-1)),N(e("input",{"onUpdate:modelValue":F[5]||(F[5]=u=>d.value.title=u),type:"text",placeholder:"Azure Breeze Resort",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,d.value.title]])]),e("div",null,[F[19]||(F[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Địa điểm",-1)),N(e("input",{"onUpdate:modelValue":F[6]||(F[6]=u=>d.value.location=u),type:"text",placeholder:"Sunny Isles, Florida, United States",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,d.value.location]])]),e("div",null,[F[20]||(F[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số điện thoại liên hệ",-1)),N(e("input",{"onUpdate:modelValue":F[7]||(F[7]=u=>d.value.phone=u),type:"text",placeholder:"(305) 555–1234",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,d.value.phone]])])]),e("div",null,[F[21]||(F[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ảnh gallery (mỗi dòng 1 URL)",-1)),N(e("textarea",{"onUpdate:modelValue":F[8]||(F[8]=u=>d.value.galleryRaw=u),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[oe,d.value.galleryRaw]])]),F[27]||(F[27]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Giới thiệu (đoạn 1)"),e("textarea",{id:"about1-editor-sub",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})],-1)),e("div",null,[F[22]||(F[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amenities",-1)),e("div",bm,[e("div",ym,[(a(),i(fe,null,be(ee,u=>e("label",{key:u,class:"inline-flex items-center gap-2 cursor-pointer"},[N(e("input",{type:"checkbox",value:u,"onUpdate:modelValue":F[9]||(F[9]=w=>d.value.amenities=w),class:"rounded cursor-pointer border-gray-300"},null,8,hm),[[gt,d.value.amenities]]),e("span",xm,A(u),1)])),64))])])]),e("div",wm,[e("div",{class:"flex items-center justify-between"},[F[23]||(F[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Useful Information",-1)),e("button",{type:"button",onClick:he,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(a(!0),i(fe,null,be(d.value.info,(u,w)=>(a(),i("div",{key:w,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",_m,[e("span",km,A(w+1),1),F[24]||(F[24]=e("span",{class:"text-sm font-medium text-gray-700"},"Subject - Description",-1)),e("button",{type:"button",onClick:l=>Le(w),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,$m)]),N(e("input",{"onUpdate:modelValue":l=>u.subject=l,type:"text",placeholder:"Subject",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Cm),[[oe,u.subject]]),N(e("textarea",{"onUpdate:modelValue":l=>u.description=l,rows:"3",placeholder:"Description",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Sm),[[oe,u.description]])]))),128))]),e("div",Tm,[e("div",{class:"flex items-center justify-between"},[F[25]||(F[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"FAQs",-1)),e("button",{type:"button",onClick:Ae,class:"px-3 py-1 text-sm rounded-md border border-gray-300 bg-white"},"+ Thêm")]),(a(!0),i(fe,null,be(d.value.faqs,(u,w)=>(a(),i("div",{key:w,class:"border border-gray-200 rounded-md p-3 space-y-2"},[e("div",jm,[e("span",Em,A(w+1),1),F[26]||(F[26]=e("span",{class:"text-sm font-medium text-gray-700"},"Question - Answer",-1)),e("button",{type:"button",onClick:l=>xe(w),class:"ml-auto px-2 py-1 text-sm rounded-md border border-gray-300 bg-white",title:"Xóa"},"−",8,Fm)]),N(e("input",{"onUpdate:modelValue":l=>u.q=l,type:"text",placeholder:"Question",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Am),[[oe,u.q]]),N(e("textarea",{"onUpdate:modelValue":l=>u.a=l,rows:"3",placeholder:"Answer",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,8,Lm),[[oe,u.a]])]))),128))])])):P.value==="blank"?(a(),i("div",Rm,[F[28]||(F[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"HTML",-1)),e("div",Im,[e("div",{ref_key:"gutterRef",ref:j,class:"border border-gray-300 rounded-l-md bg-gray-50 overflow-auto",style:{"max-height":"360px"}},[(a(!0),i(fe,null,be(ae.value,u=>(a(),i("div",{key:u,class:"px-2 text-xs text-gray-500 leading-6"},A(u),1))),128))],512),N(e("textarea",{ref_key:"codeRef",ref:q,"onUpdate:modelValue":F[10]||(F[10]=u=>Q.value=u),rows:"12",required:"",class:"block w-full border border-gray-300 rounded-r-md shadow-sm font-mono leading-6",onScroll:Se},null,544),[[oe,Q.value]])])])):W("",!0)]),e("div",Mm,[J(E,{to:`/websites/${C(g)}/subdomains`,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},{default:je(()=>[...F[30]||(F[30]=[we("Cancel",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:V.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400"},[V.value?(a(),i("span",Um,[J(C(Re),{class:"size-4 animate-spin"}),F[31]||(F[31]=we(" Creating... ",-1))])):(a(),i("span",Dm,"Create Subdomain"))],8,Pm)]),h.value?(a(),i("p",{key:1,class:Me([x.value==="error"?"text-red-600":"text-green-600","mt-3 text-sm"])},A(h.value),3)):W("",!0)],32)])])])])}}},Nm=[{path:"/login",name:"Login",component:zc},{path:"/",name:"Dashboard",component:ya},{path:"/vps",name:"VpsManagement",component:Xa},{path:"/websites",name:"WebsiteManagement",component:so},{path:"/websites/:websiteId/settings",name:"WebsiteSettings",component:qn},{path:"/websites/:websiteId/pages",name:"PagesManagement",component:_u},{path:"/websites/:websiteId/pages/new",name:"PageCreate",component:ls},{path:"/websites/:websiteId/pages/:pageId",name:"PageEdit",component:ls},{path:"/websites/:websiteId/folders",name:"FoldersManagement",component:Yi},{path:"/websites/:websiteId/folders/new",name:"FolderCreate",component:as},{path:"/websites/:websiteId/folders/:folderId",name:"FolderEdit",component:as},{path:"/websites/:websiteId/subdomains",name:"SubdomainsManagement",component:Kp},{path:"/websites/:websiteId/subdomains/new",name:"SubdomainEdit",component:zm},{path:"/profile",name:"AdminProfile",component:Xc},{path:"/monitoring",name:"Monitoring",component:fi},{path:"/settings",name:"Settings",component:Ed}],Lt=js({history:Es(),routes:Nm}),ns=localStorage.getItem("adminToken");ns&&(z.defaults.headers.common["X-Admin-Token"]=ns);z.interceptors.response.use(t=>t,t=>{var c;if(((c=t==null?void 0:t.response)==null?void 0:c.status)===401){try{localStorage.removeItem("adminToken"),delete z.defaults.headers.common["X-Admin-Token"]}catch{}Lt.currentRoute.value.path!=="/login"&&Lt.push("/login")}return Promise.reject(t)});Lt.beforeEach((t,s,c)=>{const g=!!localStorage.getItem("adminToken");if(!g&&t.path!=="/login")return c("/login");if(g&&t.path==="/login")return c("/");c()});Fs(Zs).use(Lt).mount("#app");export{fs as g};
