import{g as X4}from"./main.js";var a_={exports:{}};(function(i_){(function(){var Wm=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},c_=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},l_=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},u_=function(e,t){return ur(function(n,s){return e.eq(t(n),t(s))})},ur=function(e){return{eq:e}},f_=ur(function(e,t){return e===t}),d_=f_,Vm=function(e){return ur(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},m_=function(e,t){return u_(Vm(e),function(n){return l_(n,t)})},jm=function(e){return ur(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!m_(d_).eq(s,o))return!1;for(var r=s.length,a=0;a<r;a++){var i=s[a];if(!e.eq(t[i],n[i]))return!1}return!0})},dl=ur(function(e,t){if(e===t)return!0;var n=Wm(e),s=Wm(t);return n!==s?!1:c_(n)?e===t:n==="array"?Vm(dl).eq(e,t):n==="object"?jm(dl).eq(e,t):!1});const g_=Object.getPrototypeOf,qm=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},p_=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&qm(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},ml=e=>t=>p_(t)===e,gl=e=>t=>typeof t===e,Km=e=>t=>e===t,Qa=(e,t)=>yt(e)&&qm(e,t,(n,s)=>g_(n)===s),J=ml("string"),yt=ml("object"),Gm=e=>Qa(e,Object),Ge=ml("array"),kt=Km(null),xs=gl("boolean"),ct=Km(void 0),qe=e=>e==null,M=e=>!qe(e),Se=gl("function"),mn=gl("number"),Co=(e,t)=>{if(Ge(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},le=()=>{},Sn=(e,t)=>(...n)=>e(t.apply(null,n)),Ym=(e,t)=>n=>e(t(n)),V=e=>()=>e,_t=e=>e,Xm=(e,t)=>e===t;function j(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const fr=e=>t=>!e(t),Zm=e=>()=>{throw new Error(e)},pl=e=>e(),dr=e=>{e()},Le=V(!1),He=V(!0);class m{constructor(t,n){this.tag=t,this.value=n}static some(t){return new m(!0,t)}static none(){return m.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?m.some(t(this.value)):m.none()}bind(t){return this.tag?t(this.value):m.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:m.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return M(t)?m.some(t):m.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}m.singletonNone=new m(!1);const hl=Array.prototype.slice,h_=Array.prototype.indexOf,b_=Array.prototype.push,Qm=(e,t)=>h_.call(e,t),C_=(e,t)=>{const n=Qm(e,t);return n===-1?m.none():m.some(n)},ke=(e,t)=>Qm(e,t)>-1,Fe=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},he=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},P=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},Jm=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},yo=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const a=e[o];(t(a,o)?n:s).push(a)}return{pass:n,fail:s}},se=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},mr=(e,t,n)=>(Jm(e,(s,o)=>{n=t(n,s,o)}),n),Rt=(e,t,n)=>(P(e,(s,o)=>{n=t(n,s,o)}),n),eg=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return m.some(r);if(n(r,s))break}return m.none()},Ye=(e,t)=>eg(e,t,Le),gr=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return m.some(n)}return m.none()},tg=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!Ge(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);b_.apply(t,e[n])}return t},sn=(e,t)=>tg(he(e,t)),Un=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},pr=e=>{const t=hl.call(e,0);return t.reverse(),t},Ja=(e,t)=>se(e,n=>!ke(t,n)),bl=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},Ns=(e,t)=>{const n=hl.call(e,0);return n.sort(t),n},ei=(e,t)=>t>=0&&t<e.length?m.some(e[t]):m.none(),Pt=e=>ei(e,0),As=e=>ei(e,e.length-1),Ft=Se(Array.from)?Array.from:e=>hl.call(e),vo=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return m.none()},y_=(e,t)=>{const n=[],s=Se(t)?o=>Fe(n,r=>t(r,o)):o=>ke(n,o);for(let o=0,r=e.length;o<r;o++){const a=e[o];s(a)||n.push(a)}return n},Dt=Object.keys,v_=Object.hasOwnProperty,Ae=(e,t)=>{const n=Dt(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],a=e[r];t(a,r)}},ti=(e,t)=>E_(e,(n,s)=>({k:s,v:t(n,s)})),E_=(e,t)=>{const n={};return Ae(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},Cl=e=>(t,n)=>{e[n]=t},ng=(e,t,n,s)=>{Ae(e,(o,r)=>{(t(o,r)?n:s)(o,r)})},S_=(e,t)=>{const n={},s={};return ng(e,t,Cl(n),Cl(s)),{t:n,f:s}},hr=(e,t)=>{const n={};return ng(e,t,Cl(n),le),n},ni=(e,t)=>{const n=[];return Ae(e,(s,o)=>{n.push(t(s,o))}),n},yl=e=>ni(e,_t),Re=(e,t)=>oe(e,t)?m.from(e[t]):m.none(),oe=(e,t)=>v_.call(e,t),Eo=(e,t)=>oe(e,t)&&e[t]!==void 0&&e[t]!==null,w_=(e,t,n=dl)=>jm(n).eq(e,t),sg=e=>{const t={};return P(e,n=>{t[n]={}}),Dt(t)},og=e=>e.length!==void 0,vl=Array.isArray,k_=e=>{if(vl(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},si=(e,t,n)=>{if(!e)return!1;if(n=n||e,og(e)){for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(const s in e)if(oe(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},El=(e,t)=>{const n=[];return si(e,(s,o)=>{n.push(t(s,o,e))}),n},br=(e,t)=>{const n=[];return si(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},__=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},oi=(e,t,n,s)=>{let o=ct(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},rg=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},Ts=e=>e[e.length-1],Rs=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},x_=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,a=e.isiOS()||e.isAndroid(),i=a||s("(pointer:coarse)"),c=o||!r&&a&&s("(min-device-width:768px)"),l=r||a&&!c,u=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,f=!l&&!c&&!u;return{isiPad:V(o),isiPhone:V(r),isTablet:V(c),isPhone:V(l),isTouch:V(i),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:V(u),isDesktop:V(f)}},N_=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},A_=(e,t)=>{const n=N_(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return Sl(s(1),s(2))},T_=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?ag():A_(e,n)},ag=()=>Sl(0,0),Sl=(e,t)=>({major:e,minor:t}),Cr={nu:Sl,detect:T_,unknown:ag},R_=(e,t)=>vo(t.brands,n=>{const s=n.brand.toLowerCase();return Ye(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:Cr.nu(parseInt(n.version,10),0)}))}),ig=(e,t)=>{const n=String(t).toLowerCase();return Ye(e,s=>s.search(n))},P_=(e,t)=>ig(e,t).map(n=>{const s=Cr.detect(n.versionRegexes,t);return{current:n.name,version:s}}),D_=(e,t)=>ig(e,t).map(n=>{const s=Cr.detect(n.versionRegexes,t);return{current:n.name,version:s}}),O_=(e,t)=>e.substring(t),cg=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,lg=(e,t)=>st(e,t)?O_(e,t.length):e,ft=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return o!==-1?ct(s)?!0:o+t.length<=s:!1},st=(e,t)=>cg(e,t,0),wl=(e,t)=>cg(e,t,e.length-t.length),kl=e=>t=>t.replace(e,""),So=kl(/^\s+|\s+$/g),B_=kl(/^\s+/g),ug=kl(/\s+$/g),wn=e=>e.length>0,yr=e=>!wn(e),I_=(e,t)=>t<=0?"":new Array(t+1).join(e),ri=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?m.none():m.some(n)},_l=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,zn=e=>t=>ft(t,e),L_=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ft(e,"edge/")&&ft(e,"chrome")&&ft(e,"safari")&&ft(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,_l],search:e=>ft(e,"chrome")&&!ft(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ft(e,"msie")||ft(e,"trident")},{name:"Opera",versionRegexes:[_l,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:zn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:zn("firefox")},{name:"Safari",versionRegexes:[_l,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ft(e,"safari")||ft(e,"mobile/"))&&ft(e,"applewebkit")}],$_=[{name:"Windows",search:zn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ft(e,"iphone")||ft(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:zn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:zn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:zn("linux"),versionRegexes:[]},{name:"Solaris",search:zn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:zn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:zn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],fg={browsers:V(L_),oses:V($_)},F_="Edge",M_="Chromium",U_="IE",z_="Opera",H_="Firefox",W_="Safari",V_=()=>dg({current:void 0,version:Cr.unknown()}),dg=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(F_),isChromium:s(M_),isIE:s(U_),isOpera:s(z_),isFirefox:s(H_),isSafari:s(W_)}},mg={unknown:V_,nu:dg},j_="Windows",q_="iOS",K_="Android",G_="Linux",Y_="macOS",X_="Solaris",Z_="FreeBSD",Q_="ChromeOS",J_=()=>gg({current:void 0,version:Cr.unknown()}),gg=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s(j_),isiOS:s(q_),isAndroid:s(K_),isMacOS:s(Y_),isLinux:s(G_),isSolaris:s(X_),isFreeBSD:s(Z_),isChromeOS:s(Q_)}},pg={unknown:J_,nu:gg},ex={detect:(e,t,n)=>{const s=fg.browsers(),o=fg.oses(),r=t.bind(c=>R_(s,c)).orThunk(()=>P_(s,e)).fold(mg.unknown,mg.nu),a=D_(o,e).fold(pg.unknown,pg.nu),i=x_(a,r,e,n);return{browser:r,os:a,deviceType:i}}},tx=e=>window.matchMedia(e).matches;let nx=Rs(()=>ex.detect(navigator.userAgent,m.from(navigator.userAgentData),tx));const kn=()=>nx(),sx=navigator.userAgent,xl=kn(),_n=xl.browser,xn=xl.os,Ps=xl.deviceType,ox=sx.indexOf("Windows Phone")!==-1,be={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:_n.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!_n.isIE(),windowsPhone:ox,browser:{current:_n.current,version:_n.version,isChromium:_n.isChromium,isEdge:_n.isEdge,isFirefox:_n.isFirefox,isIE:_n.isIE,isOpera:_n.isOpera,isSafari:_n.isSafari},os:{current:xn.current,version:xn.version,isAndroid:xn.isAndroid,isChromeOS:xn.isChromeOS,isFreeBSD:xn.isFreeBSD,isiOS:xn.isiOS,isLinux:xn.isLinux,isMacOS:xn.isMacOS,isSolaris:xn.isSolaris,isWindows:xn.isWindows},deviceType:{isDesktop:Ps.isDesktop,isiPad:Ps.isiPad,isiPhone:Ps.isiPhone,isPhone:Ps.isPhone,isTablet:Ps.isTablet,isTouch:Ps.isTouch,isWebView:Ps.isWebView}},rx=/^\s*|\s*$/g,hg=e=>qe(e)?"":(""+e).replace(rx,""),ax=(e,t)=>t?t==="array"&&vl(e)?!0:typeof e===t:e!==void 0,ix=(e,t,n={})=>{const s=J(e)?e.split(t||","):e||[];let o=s.length;for(;o--;)n[s[o]]={};return n},cx=oe,lx=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(oe(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},bg=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),si(e,(o,r)=>t.call(s,o,r,n)===!1?!1:(bg(o,t,n,s),!0)))},L={trim:hg,isArray:vl,is:ax,toArray:k_,makeMap:ix,each:si,map:El,grep:br,inArray:__,hasOwn:cx,extend:lx,walk:bg,resolve:(e,t=window)=>{const n=e.split(".");for(let s=0,o=n.length;s<o&&(t=t[n[s]],!!t);s++);return t},explode:(e,t)=>Ge(e)?e:e===""?[]:El(e.split(t||","),hg),_addCacheSuffix:e=>{const t=be.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},wo=(e,t,n=Xm)=>e.exists(s=>n(s,t)),Cg=(e,t,n=Xm)=>dt(e,t,n).getOr(e.isNone()&&t.isNone()),ux=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},dt=(e,t,n)=>e.isSome()&&t.isSome()?m.some(n(e.getOrDie(),t.getOrDie())):m.none(),fx=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?m.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):m.none(),ko=(e,t)=>e?m.some(t):m.none(),dx=typeof window<"u"?window:Function("return this;")(),mx=(e,t)=>{let n=t??dx;for(let s=0;s<e.length&&n!==void 0&&n!==null;++s)n=n[e[s]];return n},yg=(e,t)=>{const n=e.split(".");return mx(n,t)},gx=(e,t)=>yg(e,t),px=(e,t)=>{const n=gx(e,t);if(n==null)throw new Error(e+" not available on this browser");return n},hx=Object.getPrototypeOf,bx=e=>px("HTMLElement",e),Cx=e=>{const t=yg("ownerDocument.defaultView",e);return yt(e)&&(bx(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(hx(e).constructor.name))},vg=8,Eg=9,Sg=11,vr=1,wg=3,pe=e=>e.dom.nodeName.toLowerCase(),kg=e=>e.dom.nodeType,ai=e=>t=>kg(t)===e,yx=e=>kg(e)===vg||pe(e)==="#comment",ii=e=>Mt(e)&&Cx(e.dom),Mt=ai(vr),jt=ai(wg),vx=ai(Eg),Ex=ai(Sg),ci=e=>t=>Mt(t)&&pe(t)===e,_g=(e,t,n)=>{if(J(n)||xs(n)||mn(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},ot=(e,t,n)=>{_g(e.dom,t,n)},Hn=(e,t)=>{const n=e.dom;Ae(t,(s,o)=>{_g(n,o,s)})},Ut=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},Wn=(e,t)=>m.from(Ut(e,t)),Er=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},rt=(e,t)=>{e.dom.removeAttribute(t)},Sx=e=>{const t=e.dom.attributes;return t==null||t.length===0},xg=e=>Rt(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),Nl=(e,t)=>{const n=Ut(e,t);return n===void 0||n===""?[]:n.split(" ")},wx=(e,t,n)=>{const o=Nl(e,t).concat([n]);return ot(e,t,o.join(" ")),!0},kx=(e,t,n)=>{const s=se(Nl(e,t),o=>o!==n);return s.length>0?ot(e,t,s.join(" ")):rt(e,t),!1},Sr=e=>e.dom.classList!==void 0,Ng=e=>Nl(e,"class"),Ag=(e,t)=>wx(e,"class",t),Tg=(e,t)=>kx(e,"class",t),_x=(e,t)=>ke(Ng(e),t)?Tg(e,t):Ag(e,t),_o=(e,t)=>{Sr(e)?e.dom.classList.add(t):Ag(e,t)},Rg=e=>{(Sr(e)?e.dom.classList:Ng(e)).length===0&&rt(e,"class")},wr=(e,t)=>{Sr(e)?e.dom.classList.remove(t):Tg(e,t),Rg(e)},xx=(e,t)=>{const n=Sr(e)?e.dom.classList.toggle(t):_x(e,t);return Rg(e),n},Al=(e,t)=>Sr(e)&&e.dom.classList.contains(t),Nx=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return kr(s.childNodes[0])},Ax=(e,t)=>{const s=(t||document).createElement(e);return kr(s)},Tx=(e,t)=>{const s=(t||document).createTextNode(e);return kr(s)},kr=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},C={fromHtml:Nx,fromTag:Ax,fromText:Tx,fromDom:kr,fromPoint:(e,t,n)=>m.from(e.dom.elementFromPoint(t,n)).map(kr)},Pg=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},gn=(e,t)=>{const n=e.dom;if(n.nodeType!==vr)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Dg=e=>e.nodeType!==vr&&e.nodeType!==Eg&&e.nodeType!==Sg||e.childElementCount===0,Rx=(e,t)=>{const n=t===void 0?document:t.dom;return Dg(n)?[]:he(n.querySelectorAll(e),C.fromDom)},Px=(e,t)=>{const n=t===void 0?document:t.dom;return Dg(n)?m.none():m.from(n.querySelector(e)).map(C.fromDom)},ye=(e,t)=>e.dom===t.dom,Vn=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},Og=e=>C.fromDom(e.dom.ownerDocument),jn=e=>vx(e)?e:Og(e),Dx=e=>C.fromDom(jn(e).dom.documentElement),_r=e=>C.fromDom(jn(e).dom.defaultView),on=e=>m.from(e.dom.parentNode).map(C.fromDom),li=e=>m.from(e.dom.parentElement).map(C.fromDom),Bg=(e,t)=>{const n=Se(t)?t:Le;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,a=C.fromDom(r);if(o.push(a),n(a)===!0)break;s=r}return o},Ox=e=>{const t=n=>se(n,s=>!ye(e,s));return on(e).map(at).map(t).getOr([])},Ds=e=>m.from(e.dom.previousSibling).map(C.fromDom),xr=e=>m.from(e.dom.nextSibling).map(C.fromDom),Ig=e=>pr(Pg(e,Ds)),Lg=e=>Pg(e,xr),at=e=>he(e.dom.childNodes,C.fromDom),xo=(e,t)=>{const n=e.dom.childNodes;return m.from(n[t]).map(C.fromDom)},Tl=e=>xo(e,0),Rl=e=>xo(e,e.dom.childNodes.length-1),Pl=e=>e.dom.childNodes.length,Bx=e=>e.dom.hasChildNodes(),Ix=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return C.fromDom(t)},Dl=e=>Ex(e)&&M(e.dom.host),$g=Se(Element.prototype.attachShadow)&&Se(Node.prototype.getRootNode),Lx=V($g),os=$g?e=>C.fromDom(e.dom.getRootNode()):jn,Ol=e=>Dl(e)?e:Ix(jn(e)),$x=e=>Dl(e)?e:C.fromDom(jn(e).dom.body),Fx=e=>{const t=os(e);return Dl(t)?m.some(t):m.none()},Mx=e=>C.fromDom(e.dom.host),Fg=e=>{if(Lx()&&M(e.target)){const t=C.fromDom(e.target);if(Mt(t)&&Ux(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Pt(n)}}return m.from(e.target)},Ux=e=>M(e.dom.shadowRoot),No=e=>{const t=jt(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return Fx(C.fromDom(t)).fold(()=>n.body.contains(t),Ym(No,Mx))};var Mg=(e,t,n,s,o)=>e(n,s)?m.some(n):Se(o)&&o(n)?m.none():t(n,s,o);const qn=(e,t,n)=>{let s=e.dom;const o=Se(n)?n:Le;for(;s.parentNode;){s=s.parentNode;const r=C.fromDom(s);if(t(r))return m.some(r);if(o(r))break}return m.none()},Os=(e,t,n)=>Mg((o,r)=>r(o),qn,e,t,n),zx=(e,t)=>{const n=e.dom;return n.parentNode?Hx(C.fromDom(n.parentNode),s=>!ye(e,s)&&t(s)):m.none()},Hx=(e,t)=>{const n=o=>t(C.fromDom(o));return Ye(e.dom.childNodes,n).map(C.fromDom)},Ug=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=C.fromDom(s.childNodes[o]);if(t(r))return m.some(r);const a=n(s.childNodes[o]);if(a.isSome())return a}return m.none()};return n(e.dom)},Nr=(e,t,n)=>qn(e,s=>gn(s,t),n),Ar=(e,t)=>Px(t,e),Bs=(e,t,n)=>Mg((o,r)=>gn(o,r),Nr,e,t,n),Wx=e=>Bs(e,"[contenteditable]"),Is=(e,t=!1)=>No(e)?e.dom.isContentEditable:Wx(e).fold(V(t),n=>Vx(n)==="true"),Vx=e=>e.dom.contentEditable,Tr=e=>e.style!==void 0&&Se(e.style.getPropertyValue),zg=(e,t,n)=>{if(!J(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Tr(e)&&e.style.setProperty(t,n)},jx=(e,t)=>{Tr(e)&&e.style.removeProperty(t)},Hg=(e,t,n)=>{const s=e.dom;zg(s,t,n)},ui=(e,t)=>{const n=e.dom;Ae(t,(s,o)=>{zg(n,o,s)})},Nn=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!No(e)?Wg(n,t):o},Wg=(e,t)=>Tr(e)?e.style.getPropertyValue(t):"",fi=(e,t)=>{const n=e.dom,s=Wg(n,t);return m.from(s).filter(o=>o.length>0)},Bl=e=>{const t={},n=e.dom;if(Tr(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},Vg=(e,t)=>{const n=e.dom;jx(n,t),wo(Wn(e,"style").map(So),"")&&rt(e,"style")},qx=e=>e.dom.offsetWidth,Ot=(e,t)=>{on(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},Kn=(e,t)=>{xr(e).fold(()=>{on(e).each(o=>{We(o,t)})},s=>{Ot(s,t)})},Il=(e,t)=>{Tl(e).fold(()=>{We(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},We=(e,t)=>{e.dom.appendChild(t.dom)},jg=(e,t)=>{Ot(e,t),We(t,e)},Kx=(e,t)=>{P(t,(n,s)=>{const o=s===0?e:t[s-1];Kn(o,n)})},Ls=(e,t)=>{P(t,n=>{We(e,n)})},Ao=e=>{e.dom.textContent="",P(at(e),t=>{Pe(t)})},Pe=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Gn=e=>{const t=at(e);t.length>0&&Kx(e,t),Pe(e)},Gx=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,at(C.fromDom(s))},Ll=e=>he(e,C.fromDom),qg=e=>e.dom.innerHTML,di=(e,t)=>{const s=Og(e).dom,o=C.fromDom(s.createDocumentFragment()),r=Gx(t,s);Ls(o,r),Ao(e),We(e,o)},Yx=e=>{const t=C.fromTag("div"),n=C.fromDom(e.dom.cloneNode(!0));return We(t,n),qg(t)},Xx=(e,t,n,s,o,r,a)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:a}),Zx=e=>{const t=C.fromDom(Fg(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=Sn(s,n);return Xx(t,e.clientX,e.clientY,n,s,o,e)},Qx=(e,t)=>n=>{e(n)&&t(Zx(n))},Jx=(e,t,n,s,o)=>{const r=Qx(n,s);return e.dom.addEventListener(t,r,o),{unbind:j(tN,e,t,r,o)}},eN=(e,t,n,s)=>Jx(e,t,n,s,!1),tN=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},Kg=(e,t)=>({left:e,top:t,translate:(s,o)=>Kg(e+s,t+o)}),To=Kg,nN=e=>{const t=e.getBoundingClientRect();return To(t.left,t.top)},mi=(e,t)=>e!==void 0?e:t!==void 0?t:0,sN=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return To(n.offsetLeft,n.offsetTop);const r=mi(s==null?void 0:s.pageYOffset,o.scrollTop),a=mi(s==null?void 0:s.pageXOffset,o.scrollLeft),i=mi(o.clientTop,n.clientTop),c=mi(o.clientLeft,n.clientLeft);return $l(e).translate(a-c,r-i)},$l=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?To(s.offsetLeft,s.offsetTop):No(e)?nN(t):To(0,0)},Fl=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return To(n,s)},Gg=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Yg=(e,t)=>{kn().browser.isSafari()&&Se(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},oN=e=>{const t=e===void 0?window:e;return kn().browser.isFirefox()?m.none():m.from(t.visualViewport)},Xg=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),Zg=e=>{const t=e===void 0?window:e,n=t.document,s=Fl(C.fromDom(n));return oN(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,a=o.clientHeight;return Xg(s.left,s.top,r,a)},o=>Xg(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},rN=(e,t)=>se(at(e),t),Qg=(e,t)=>{let n=[];return P(at(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(Qg(s,t))}),n},mt=(e,t)=>Rx(t,e),Jg=(e,t,n)=>Nr(e,t,n).isSome();class Xe{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,s,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let r=t[s];if(r)return r;for(let a=t.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(r=a[s],r)return r}}}findPreviousNode(t,n){if(t){const s=t.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(let r=s.lastChild;r;r=r.lastChild)if(!r.lastChild)return r}return s}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const $s=e=>t=>!!t&&t.nodeType===e,gi=e=>!!e&&!Object.getPrototypeOf(e),q=$s(1),Yn=e=>q(e)&&ii(C.fromDom(e)),aN=e=>q(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Rr=e=>{const t=e.toLowerCase();return n=>M(n)&&n.nodeName.toLowerCase()===t},pn=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return ke(t,s)}return!1}},pi=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(q(s)){const o=s.ownerDocument.defaultView;if(o)for(let r=0;r<n.length;r++){const a=o.getComputedStyle(s,null);if((a?a.getPropertyValue(e):null)===n[r])return!0}}return!1}},ep=e=>t=>q(t)&&t.hasAttribute(e),iN=(e,t)=>n=>q(n)&&n.getAttribute(e)===t,Fs=e=>q(e)&&e.hasAttribute("data-mce-bogus"),cN=e=>q(e)&&e.getAttribute("data-mce-bogus")==="all",Xn=e=>q(e)&&e.tagName==="TABLE",tp=e=>t=>!!(Yn(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),Ml=pn(["textarea","input"]),B=$s(3),lN=$s(4),uN=$s(7),rs=$s(8),Pr=$s(9),Ul=$s(11),$e=Rr("br"),np=Rr("img"),rn=tp("true"),De=tp("false"),hi=pn(["td","th"]),fN=pn(["td","th","caption"]),An=pn(["video","audio","object","embed"]),dN=Rr("li"),zl=Rr("details"),mN=Rr("summary"),Dr="\uFEFF",Je=" ",Hl=e=>e===Dr,gN=e=>e.replace(/\uFEFF/g,""),Wl=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?m.from(r.dom.nodeValue):m.none();return{get:n,getOption:s,set:(r,a)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=a}}})(jt,"text"),bi=e=>Wl.get(e),sp=e=>Wl.getOption(e),pN=(e,t)=>Wl.set(e,t),hN=["td","th"],bN=["thead","tbody","tfoot"],CN=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],yN=["li","dd","dt"],vN=["ul","ol","dl"],EN=["pre","script","textarea","style"],Ro=e=>{let t;return n=>(t=t||bl(e,He),oe(t,pe(n)))},SN=e=>pe(e)==="table",Ms=e=>Mt(e)&&pe(e)==="br",op=Ro(CN),Vl=Ro(vN),Or=Ro(yN),wN=Ro(bN),Br=Ro(hN),Ci=Ro(EN),kN=e=>{const t=[];let n=e.dom;for(;n;)t.push(C.fromDom(n)),n=n.lastChild;return t},_N=e=>{const t=mt(e,"br"),n=se(kN(e).slice(-1),Ms);t.length===n.length&&P(n,Pe)},Ir=()=>{const e=C.fromTag("br");return ot(e,"data-mce-bogus","1"),e},as=e=>{Ao(e),We(e,Ir())},xN=(e,t)=>{Rl(e).each(n=>{Ds(n).each(s=>{t.isBlock(pe(e))&&Ms(n)&&t.isBlock(pe(s))&&Pe(n)})})},Ze=Dr,yi=Hl,zt=gN,NN=e=>e.insertContent(Ze,{preserve_zwsp:!0}),AN=q,Po=B,Do=e=>(Po(e)&&(e=e.parentNode),AN(e)&&e.hasAttribute("data-mce-caret")),is=e=>Po(e)&&yi(e.data),qt=e=>Do(e)||is(e),rp=e=>e.firstChild!==e.lastChild||!$e(e.firstChild),TN=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Ze),r=e.parentNode;if(t){const a=e.previousSibling;if(Po(a)){if(qt(a))return a;if(Ei(a))return a.splitText(a.data.length-1)}r==null||r.insertBefore(o,e)}else{const a=e.nextSibling;if(Po(a)){if(qt(a))return a;if(vi(a))return a.splitText(1),a}e.nextSibling?r==null||r.insertBefore(o,e.nextSibling):r==null||r.appendChild(o)}return o},jl=e=>{const t=e.container();return B(t)?t.data.charAt(e.offset())===Ze||e.isAtStart()&&is(t.previousSibling):!1},ql=e=>{const t=e.container();return B(t)?t.data.charAt(e.offset()-1)===Ze||e.isAtEnd()&&is(t.nextSibling):!1},RN=(e,t,n)=>{var s;const r=((s=t.ownerDocument)!==null&&s!==void 0?s:document).createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(Ir().dom);const a=t.parentNode;return n?a==null||a.insertBefore(r,t):t.nextSibling?a==null||a.insertBefore(r,t.nextSibling):a==null||a.appendChild(r),r},vi=e=>Po(e)&&e.data[0]===Ze,Ei=e=>Po(e)&&e.data[e.data.length-1]===Ze,PN=e=>{var t;const n=e.getElementsByTagName("br"),s=n[n.length-1];Fs(s)&&((t=s.parentNode)===null||t===void 0||t.removeChild(s))},Kl=e=>e&&e.hasAttribute("data-mce-caret")?(PN(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,ap=e=>Do(e.startContainer),ip=rn,DN=De,ON=$e,BN=B,IN=pn(["script","style","textarea"]),cp=pn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),LN=pn(["table"]),$N=qt,an=e=>$N(e)?!1:BN(e)?!IN(e.parentNode):cp(e)||ON(e)||LN(e)||Gl(e),FN=e=>q(e)&&e.getAttribute("unselectable")==="true",Gl=e=>!FN(e)&&DN(e),MN=(e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(Gl(n))return!1;if(ip(n))return!0}return!0},UN=e=>Gl(e)?!Rt(Ft(e.getElementsByTagName("*")),(t,n)=>t||ip(n),!1):!1,zN=e=>cp(e)||UN(e),lp=(e,t)=>an(e)&&MN(e,t),HN=/^[ \t\r\n]*$/,cs=e=>HN.test(e),WN=e=>{for(const t of e)if(!Hl(t))return!1;return!0},VN=e=>" \f	\v".indexOf(e)!==-1,up=e=>e===`
`||e==="\r",jN=(e,t)=>t<e.length&&t>=0?up(e[t]):!1,fp=(e,t=4,n=!0,s=!0)=>{const o=I_(" ",t),r=e.replace(/\t/g,o);return Rt(r,(i,c)=>VN(c)||c===Je?i.pcIsSpace||i.str===""&&n||i.str.length===r.length-1&&s||jN(r,i.str.length+1)?{pcIsSpace:!1,str:i.str+Je}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:up(c),str:i.str+c},{pcIsSpace:!1,str:""}).str},qN=(e,t)=>{const n=C.fromDom(t),s=C.fromDom(e);return Jg(s,"pre,code",j(ye,n))},KN=(e,t)=>B(e)&&cs(e.data)&&!qN(e,t),GN=e=>q(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Si=(e,t)=>an(e)&&!KN(e,t)||GN(e)||YN(e),YN=ep("data-mce-bookmark"),XN=ep("data-mce-bogus"),ZN=iN("data-mce-bogus","all"),QN=e=>li(C.fromDom(e)).exists(t=>!Is(t)),JN=(e,t)=>{let n=0;if(Si(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const o=new Xe(s,e);do{if(t){if(ZN(s)){s=o.next(!0);continue}if(XN(s)){s=o.next();continue}}if(rn(s)&&QN(s))return!1;if($e(s)){n++,s=o.next();continue}if(Si(s,e))return!1;s=o.next()}while(s);return n<=1}},Ue=(e,t=!0)=>JN(e.dom,t),Us=e=>e.toLowerCase()==="svg",Yl=e=>Us(e.nodeName),dp=e=>(e==null?void 0:e.nodeName)==="svg"?"svg":"html",eA=["svg"],tA=()=>{let e=[];const t=()=>e[e.length-1];return{track:r=>{Yl(r)&&e.push(r);let a=t();return a&&!a.contains(r)&&(e.pop(),a=t()),dp(a)},current:()=>dp(t()),reset:()=>{e=[]}}},wi="data-mce-block",nA=e=>se(Dt(e),t=>!/[A-Z]/.test(t)),Xl=e=>he(nA(e),t=>`${t}:`+he(eA,n=>`not(${n} ${t})`).join(":")).join(","),mp=(e,t)=>M(t.querySelector(e))?(t.setAttribute(wi,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(wi),!1),gp=(e,t)=>{const n=Xl(e.getTransparentElements()),s=Xl(e.getBlockElements());return se(t.querySelectorAll(n),o=>mp(s,o))},pp=(e,t)=>{var n;const s=t?"lastChild":"firstChild";for(let o=e[s];o;o=o[s])if(Ue(C.fromDom(o))){(n=o.parentNode)===null||n===void 0||n.removeChild(o);return}},sA=(e,t)=>{const n=document.createRange(),s=e.parentNode;if(s){n.setStartBefore(e),n.setEndBefore(t);const o=n.extractContents();pp(o,!0),n.setStartAfter(t),n.setEndAfter(e);const r=n.extractContents();pp(r,!1),Ue(C.fromDom(o))||s.insertBefore(o,e),Ue(C.fromDom(t))||s.insertBefore(t,e),Ue(C.fromDom(r))||s.insertBefore(r,e),s.removeChild(e)}},oA=(e,t,n)=>{const s=e.getBlockElements(),o=C.fromDom(t),r=i=>pe(i)in s,a=i=>ye(i,o);P(Ll(n),i=>{qn(i,r,a).each(c=>{const l=rN(i,u=>r(u)&&!e.isValidChild(pe(c),pe(u)));if(l.length>0){const u=li(c);P(l,f=>{qn(f,r,a).each(d=>{sA(d.dom,f.dom)})}),u.each(f=>gp(e,f.dom))}})})},rA=(e,t,n)=>{P([...n,...zs(e,t)?[t]:[]],s=>P(mt(C.fromDom(s),s.nodeName.toLowerCase()),o=>{cA(e,o.dom)&&Gn(o)}))},Zl=(e,t)=>{const n=gp(e,t);oA(e,t,n),rA(e,t,n)},aA=(e,t)=>{if(eu(e,t)){const n=Xl(e.getBlockElements());mp(n,t)}},iA=(e,t,n)=>{const s=r=>ye(r,C.fromDom(t)),o=Bg(C.fromDom(n),s);ei(o,o.length-2).filter(Mt).fold(()=>Zl(e,t),r=>Zl(e,r.dom))},Ql=e=>e.hasAttribute(wi),Jl=(e,t)=>oe(e.getTransparentElements(),t),eu=(e,t)=>q(t)&&Jl(e,t.nodeName),zs=(e,t)=>eu(e,t)&&Ql(t),cA=(e,t)=>eu(e,t)&&!Ql(t),tu=(e,t)=>t.type===1&&Jl(e,t.name)&&J(t.attr(wi)),lA=kn().browser,hp=e=>Ye(e,Mt),uA=e=>lA.isFirefox()&&pe(e)==="table"?hp(at(e)).filter(t=>pe(t)==="caption").bind(t=>hp(Lg(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,bp=(e,t)=>e.children&&ke(e.children,t),fA=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&Nn(C.fromDom(e),"position")==="static"){const i=t.getBoundingClientRect();return s=i.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=i.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let a=t;for(;a&&a!==n&&a.nodeType&&!bp(a,n);){const i=a;s+=i.offsetLeft||0,o+=i.offsetTop||0,a=i.offsetParent}for(a=t.parentNode;a&&a!==n&&a.nodeType&&!bp(a,n);)s-=a.scrollLeft||0,o-=a.scrollTop||0,a=a.parentNode;o+=uA(C.fromDom(t))}return{x:s,y:o}},Cp=(e,t={})=>{let n=0;const s={},o=C.fromDom(e),r=jn(o),a=y=>{t.referrerPolicy=y},i=y=>{t.contentCssCors=y},c=y=>{We(Ol(o),y)},l=y=>{const v=Ol(o);Ar(v,"#"+y).each(Pe)},u=y=>Re(s,y).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),f=y=>new Promise((v,E)=>{let S;const T=L._addCacheSuffix(y),O=u(T);s[T]=O,O.count++;const U=(z,Z)=>{P(z,dr),O.status=Z,O.passed=[],O.failed=[],S&&(S.onload=null,S.onerror=null,S=null)},A=()=>U(O.passed,2),_=()=>U(O.failed,3);if(v&&O.passed.push(v),E&&O.failed.push(E),O.status===1)return;if(O.status===2){A();return}if(O.status===3){_();return}O.status=1;const R=C.fromTag("link",r.dom);Hn(R,{rel:"stylesheet",type:"text/css",id:O.id}),t.contentCssCors&&ot(R,"crossOrigin","anonymous"),t.referrerPolicy&&ot(R,"referrerpolicy",t.referrerPolicy),S=R.dom,S.onload=A,S.onerror=_,c(R),ot(R,"href",T)}),d=(y,v)=>{const E=u(y);s[y]=E,E.count++;const S=C.fromTag("style",r.dom);Hn(S,{rel:"stylesheet",type:"text/css",id:E.id}),S.dom.innerHTML=v,c(S)},p=y=>Promise.allSettled(he(y,E=>f(E).then(V(E)))).then(E=>{const S=yo(E,T=>T.status==="fulfilled");return S.fail.length>0?Promise.reject(he(S.fail,T=>T.reason)):he(S.pass,T=>T.value)}),h=y=>{const v=L._addCacheSuffix(y);Re(s,v).each(E=>{--E.count===0&&(delete s[v],l(E.id))})};return{load:f,loadRawCss:d,loadAll:p,unload:h,unloadRawCss:y=>{Re(s,y).each(v=>{--v.count===0&&(delete s[y],l(v.id))})},unloadAll:y=>{P(y,v=>{h(v)})},_setReferrerPolicy:a,_setContentCssCors:i}},yp=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=os(n).dom;return m.from(e.get(r)).getOrThunk(()=>{const a=Cp(r,s);return e.set(r,a),a})}}})(),dA=e=>e.nodeName.toLowerCase()==="span",vp=(e,t,n)=>M(e)&&(Si(e,t)||n.isInline(e.nodeName.toLowerCase())),mA=(e,t,n)=>{const s=new Xe(e,t).prev(!1),o=new Xe(e,t).next(!1),r=ct(s)||vp(s,t,n),a=ct(o)||vp(o,t,n);return r&&a},Ep=e=>dA(e)&&e.getAttribute("data-mce-type")==="bookmark",gA=(e,t,n)=>B(e)&&e.data.length>0&&mA(e,t,n),pA=e=>q(e)?e.childNodes.length>0:!1,hA=e=>Ul(e)||Pr(e),nu=(e,t,n,s)=>{var o;const r=s||t;if(q(t)&&Ep(t))return t;const a=t.childNodes;for(let i=a.length-1;i>=0;i--)nu(e,a[i],n,r);if(q(t)){const i=t.childNodes;i.length===1&&Ep(i[0])&&((o=t.parentNode)===null||o===void 0||o.insertBefore(i[0],t))}return!hA(t)&&!Si(t,r)&&!pA(t)&&!gA(t,r,n)&&e.remove(t),t},bA=L.makeMap,ki=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_i=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,CA=/[<>&\"\']/g,yA=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,vA={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Hs={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},EA={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},SA=e=>{const t=C.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},Sp=(e,t)=>{const n={};if(e){const s=e.split(",");t=t||10;for(let o=0;o<s.length;o+=2){const r=String.fromCharCode(parseInt(s[o],t));if(!Hs[r]){const a="&"+s[o+1]+";";n[r]=a,n[a]=r}}return n}else return},su=Sp("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),wp=(e,t)=>e.replace(t?ki:_i,n=>Hs[n]||n),wA=e=>(""+e).replace(CA,t=>Hs[t]||t),kp=(e,t)=>e.replace(t?ki:_i,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":Hs[n]||"&#"+n.charCodeAt(0)+";"),ou=(e,t,n)=>{const s=n||su;return e.replace(t?ki:_i,o=>Hs[o]||s[o]||o)},Ws={encodeRaw:wp,encodeAllRaw:wA,encodeNumeric:kp,encodeNamed:ou,getEncodeFunc:(e,t)=>{const n=Sp(t)||su,s=(a,i)=>a.replace(i?ki:_i,c=>Hs[c]!==void 0?Hs[c]:n[c]!==void 0?n[c]:c.length>1?"&#"+((c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320)+65536)+";":"&#"+c.charCodeAt(0)+";"),o=(a,i)=>ou(a,i,n),r=bA(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:ou:r.numeric?kp:wp},decode:e=>e.replace(yA,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):vA[n]||String.fromCharCode(n)):EA[t]||su[t]||SA(t))},lt=(e,t)=>(e=L.trim(e),e?e.split(t||" "):[]),_p=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),kA=e=>{const t=/^(~)?(.+)$/;return sn(lt(e,","),n=>{const s=t.exec(n);if(s){const o=s[1]==="~",r=o?"span":"div",a=s[2];return[{inline:o,cloneName:r,name:a}]}else return[]})},_A=e=>{let t,n,s;if(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",s="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const r="a ins del canvas map";t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav "+r,s+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"}e!=="html5-strict"&&(t+=" xml:lang",s=[s,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const o=[n,s].join(" ");return{globalAttributes:t,blockContent:n,phrasingContent:s,flowContent:o}},xA=e=>{const{globalAttributes:t,phrasingContent:n,flowContent:s}=_A(e),o={},r=(c,l,u)=>{o[c]={attributes:bl(l,V({})),attributesOrder:l,children:bl(u,V({}))}},a=(c,l="",u="")=>{const f=lt(u),d=lt(c);let p=d.length;const h=lt([t,l].join(" "));for(;p--;)r(d[p],h.slice(),f)},i=(c,l)=>{const u=lt(c),f=lt(l);let d=u.length;for(;d--;){const p=o[u[d]];for(let h=0,g=f.length;h<g;h++)p.attributes[f[h]]={},p.attributesOrder.push(f[h])}};return e!=="html5-strict"&&(P(lt("acronym applet basefont big font strike tt"),u=>{a(u,"",n)}),P(lt("center dir isindex noframes"),u=>{a(u,"",s)})),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s),a("dd div","",s),a("address dt caption","",e==="html4"?n:s),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),a("blockquote","cite",s),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",s),a("dl","","dt dd"),a("a","href target rel media hreflang type",e==="html4"?n:s),a("q","cite",n),a("ins del","cite datetime",s),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",s),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[s,"param"].join(" ")),a("param","name value"),a("map","name",[s,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",s),a("th","colspan rowspan headers scope abbr",s),a("form","accept-charset action autocomplete enctype method name novalidate target",s),a("fieldset","disabled form name",[s,"legend"].join(" ")),a("label","form for",n),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?s:n),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[s,"li"].join(" ")),a("noscript","",s),e!=="html4"&&(a("wbr"),a("ruby","",[n,"rt rp"].join(" ")),a("figcaption","",s),a("mark rt rp bdi","",n),a("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),a("canvas","width height",s),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[s,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[s,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[n,"option"].join(" ")),a("article section nav aside main header footer","",s),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[s,"figcaption"].join(" ")),a("time","datetime",n),a("dialog","open",s),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",n),a("progress","value max",n),a("meter","value min max low high optimum",n),a("details","open",[s,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name"),r("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),e!=="html4"&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("img","loading"),i("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&P([o.video,o.audio],c=>{delete c.children.audio,delete c.children.video}),P(lt("a form meter progress dfn"),c=>{o[c]&&delete o[c].children[c]}),delete o.caption.children.table,delete o.script,o},NA=e=>e==="-"?"remove":"add",AA=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return sn(lt(e,","),n=>{const s=t.exec(n);if(s){const o=s[1],r=o?NA(o):"replace",a=s[2],i=lt(s[3],"|");return[{operation:r,name:a,validChildren:i}]}else return[]})},TA=(e,t)=>{const n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,s=/[*?+]/,{attributes:o,attributesOrder:r}=t;return P(lt(e,"|"),a=>{const i=n.exec(a);if(i){const c={},l=i[1],u=i[2].replace(/[\\:]:/g,":"),f=i[3],d=i[4];if(l==="!"&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(u),c.required=!0),l==="-"){delete o[u],r.splice(L.inArray(r,u),1);return}if(f&&(f==="="?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:u,value:d}),c.defaultValue=d):f==="~"?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:u,value:d}),c.forcedValue=d):f==="<"&&(c.validValues=L.makeMap(d,"?"))),s.test(u)){const p=c;t.attributePatterns=t.attributePatterns||[],p.pattern=_p(u),t.attributePatterns.push(p)}else o[u]||r.push(u),o[u]=c}})},RA=(e,t)=>{Ae(e.attributes,(n,s)=>{t.attributes[s]=n}),t.attributesOrder.push(...e.attributesOrder)},PA=(e,t)=>{const n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return sn(lt(t,","),s=>{const o=n.exec(s);if(o){const r=o[1],a=o[2],i=o[3],c=o[4],l=o[5],u={attributes:{},attributesOrder:[]};if(e.each(f=>RA(f,u)),r==="#"?u.paddEmpty=!0:r==="-"&&(u.removeEmpty=!0),c==="!"&&(u.removeEmptyAttrs=!0),l&&TA(l,u),i&&(u.outputName=a),a==="@")if(e.isNone())e=m.some(u);else return[];return[i?{name:a,element:u,aliasName:i}:{name:a,element:u}]}else return[]})},xi={},Lr=L.makeMap,hn=L.each,ru=L.extend,xp=L.explode,Np=(e,t={})=>{const n=Lr(e," ",Lr(e.toUpperCase()," "));return ru(n,t)},Ap=e=>Np("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),au=(e,t)=>{if(e){const n={};return J(e)&&(e={"*":e}),hn(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?Lr(s,/[, ]/):xp(s,/[, ]/)}),n}else return},ls=(e={})=>{var t;const n={},s={};let o=[];const r={},a={},i=(ne,fe,Ee)=>{const Te=e[ne];if(Te)return Lr(Te,/[, ]/,Lr(Te.toUpperCase(),/[, ]/));{let Oe=xi[ne];return Oe||(Oe=Np(fe,Ee),xi[ne]=Oe),Oe}},c=(t=e.schema)!==null&&t!==void 0?t:"html5",l=xA(c);e.verify_html===!1&&(e.valid_elements="*[*]");const u=au(e.valid_styles),f=au(e.invalid_styles,"map"),d=au(e.valid_classes,"map"),p=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),h=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),g=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),b=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),y="td th iframe video audio object script code",v=i("non_empty_elements",y+" pre svg",g),E=i("move_caret_before_on_enter_elements",y+" table",g),S="h1 h2 h3 h4 h5 h6",T=i("text_block_elements",S+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),O=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",T),U=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),A=i("transparent_elements","a ins del canvas map"),_=i("wrap_block_elements","pre "+S);hn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),ne=>{a[ne]=new RegExp("</"+ne+"[^>]*>","gi")});const R=ne=>{const fe=m.from(n["@"]),Ee=/[*?+]/;P(PA(fe,ne??""),({name:Te,element:Oe,aliasName:nn})=>{if(nn&&(n[nn]=Oe),Ee.test(Te)){const ar=Oe;ar.pattern=_p(Te),o.push(ar)}else n[Te]=Oe})},z=ne=>{o=[],P(Dt(n),fe=>{delete n[fe]}),R(ne)},Z=ne=>{delete xi.text_block_elements,delete xi.block_elements,P(kA(ne??""),({inline:fe,name:Ee,cloneName:Te})=>{if(s[Ee]=s[Te],r[Ee]=Te,v[Ee.toUpperCase()]={},v[Ee]={},fe||(O[Ee.toUpperCase()]={},O[Ee]={}),!n[Ee]){let Oe=n[Te];Oe=ru({},Oe),delete Oe.removeEmptyAttrs,delete Oe.removeEmpty,n[Ee]=Oe}Ae(s,(Oe,nn)=>{Oe[Te]&&(s[nn]=Oe=ru({},s[nn]),Oe[Ee]=Oe[Te])})})},re=ne=>{P(AA(ne??""),({operation:fe,name:Ee,validChildren:Te})=>{const Oe=fe==="replace"?{"#comment":{}}:s[Ee];P(Te,nn=>{fe==="remove"?delete Oe[nn]:Oe[nn]={}}),s[Ee]=Oe})},ie=ne=>{const fe=n[ne];if(fe)return fe;let Ee=o.length;for(;Ee--;){const Te=o[Ee];if(Te.pattern.test(ne))return Te}};e.valid_elements?(z(e.valid_elements),hn(l,(ne,fe)=>{s[fe]=ne.children})):(hn(l,(ne,fe)=>{n[fe]={attributes:ne.attributes,attributesOrder:ne.attributesOrder},s[fe]=ne.children}),hn(lt("strong/b em/i"),ne=>{const fe=lt(ne,"/");n[fe[1]].outputName=fe[0]}),hn(U,(ne,fe)=>{n[fe]&&(e.padd_empty_block_inline_children&&(n[fe].paddInEmptyBlock=!0),n[fe].removeEmpty=!0)}),hn(lt("ol ul blockquote a table tbody"),ne=>{n[ne]&&(n[ne].removeEmpty=!0)}),hn(lt("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),ne=>{n[ne]&&(n[ne].paddEmpty=!0)}),hn(lt("span"),ne=>{n[ne].removeEmptyAttrs=!0})),delete n.svg,Z(e.custom_elements),re(e.valid_children),R(e.extended_valid_elements),re("+ol[ul|ol],+ul[ul|ol]"),hn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(ne,fe)=>{n[fe]&&(n[fe].parentsRequired=lt(ne))}),e.invalid_elements&&hn(xp(e.invalid_elements),ne=>{n[ne]&&delete n[ne]}),ie("span")||R("span[!data-mce-type|*]");const Ce=V(u),we=V(f),Ie=V(d),nt=V(b),Ve=V(O),F=V(T),K=V(U),ge=V(Object.seal(g)),de=V(h),G=V(v),Y=V(E),I=V(p),ee=V(A),ue=V(_),ve=V(Object.seal(a)),xe=(ne,fe)=>{const Ee=s[ne.toLowerCase()];return!!(Ee&&Ee[fe.toLowerCase()])},ht=(ne,fe)=>{const Ee=ie(ne);if(Ee)if(fe){if(Ee.attributes[fe])return!0;const Te=Ee.attributePatterns;if(Te){let Oe=Te.length;for(;Oe--;)if(Te[Oe].pattern.test(fe))return!0}}else return!0;return!1},$t=ne=>oe(Ve(),ne),Fn=ne=>!st(ne,"#")&&ht(ne)&&!$t(ne),bt=ne=>oe(ue(),ne)||Fn(ne),fn=V(r);return{type:c,children:s,elements:n,getValidStyles:Ce,getValidClasses:Ie,getBlockElements:Ve,getInvalidStyles:we,getVoidElements:ge,getTextBlockElements:F,getTextInlineElements:K,getBoolAttrs:nt,getElementRule:ie,getSelfClosingElements:de,getNonEmptyElements:G,getMoveCaretBeforeOnEnterElements:Y,getWhitespaceElements:I,getTransparentElements:ee,getSpecialElements:ve,isValidChild:xe,isValid:ht,isBlock:$t,isInline:Fn,isWrapper:bt,getCustomElements:fn,addValidElements:R,setValidElements:z,addCustomElements:Z,addValidChildren:re}},DA=e=>({value:OA(e)}),OA=e=>lg(e,"#").toUpperCase(),iu=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},BA=e=>{const t=iu(e.red)+iu(e.green)+iu(e.blue);return DA(t)},IA=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,LA=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Tp=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),Rp=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),a=parseInt(n,10),i=parseFloat(s);return Tp(o,r,a,i)},Pp=e=>{if(e==="transparent")return m.some(Tp(0,0,0,0));const t=IA.exec(e);if(t!==null)return m.some(Rp(t[1],t[2],t[3],"1"));const n=LA.exec(e);return n!==null?m.some(Rp(n[1],n[2],n[3],n[4])):m.none()},$A=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,$r=e=>Pp(e).map(BA).map(t=>"#"+t.value).getOr(e),cu=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,r={};let a,i;const c=Dr;t&&(a=t.getValidStyles(),i=t.getInvalidStyles());const l=(`\\" \\' \\; \\: ; : `+c).split(" ");for(let f=0;f<l.length;f++)r[l[f]]=c+f,r[c+f]=l[f];const u={parse:f=>{const d={};let p=!1;const h=e.url_converter,g=e.url_converter_scope||u,b=(A,_,R)=>{const z=d[A+"-top"+_];if(!z)return;const Z=d[A+"-right"+_];if(!Z)return;const re=d[A+"-bottom"+_];if(!re)return;const ie=d[A+"-left"+_];if(!ie)return;const Ce=[z,Z,re,ie];let we=Ce.length-1;for(;we--&&Ce[we]===Ce[we+1];);we>-1&&R||(d[A+_]=we===-1?Ce[0]:Ce.join(" "),delete d[A+"-top"+_],delete d[A+"-right"+_],delete d[A+"-bottom"+_],delete d[A+"-left"+_])},y=A=>{const _=d[A];if(!_)return;const R=_.indexOf(",")>-1?[_]:_.split(" ");let z=R.length;for(;z--;)if(R[z]!==R[0])return!1;return d[A]=R[0],!0},v=(A,_,R,z)=>{y(_)&&y(R)&&y(z)&&(d[A]=d[_]+" "+d[R]+" "+d[z],delete d[_],delete d[R],delete d[z])},E=A=>(p=!0,r[A]),S=(A,_)=>(p&&(A=A.replace(/\uFEFF[0-9]/g,R=>r[R])),_||(A=A.replace(/\\([\'\";:])/g,"$1")),A),T=A=>String.fromCharCode(parseInt(A.slice(1),16)),O=A=>A.replace(/\\[0-9a-f]+/gi,T),U=(A,_,R,z,Z,re)=>{if(Z=Z||re,Z)return Z=S(Z),"'"+Z.replace(/\'/g,"\\'")+"'";if(_=S(_||R||z||""),!e.allow_script_urls){const ie=_.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(ie)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(ie))return""}return h&&(_=h.call(g,_,"style")),"url('"+_.replace(/\'/g,"\\'")+"')"};if(f){f=f.replace(/[\u0000-\u001F]/g,""),f=f.replace(/\\[\"\';:\uFEFF]/g,E).replace(/\"[^\"]+\"|\'[^\']+\'/g,_=>_.replace(/[;:]/g,E));let A;for(;A=s.exec(f);){s.lastIndex=A.index+A[0].length;let _=A[1].replace(o,"").toLowerCase(),R=A[2].replace(o,"");if(_&&R){if(_=O(_),R=O(R),_.indexOf(c)!==-1||_.indexOf('"')!==-1||!e.allow_script_urls&&(_==="behavior"||/expression\s*\(|\/\*|\*\//.test(R)))continue;_==="font-weight"&&R==="700"?R="bold":(_==="color"||_==="background-color")&&(R=R.toLowerCase()),J(e.force_hex_color)&&e.force_hex_color!=="off"&&Pp(R).each(z=>{(e.force_hex_color==="always"||z.alpha===1)&&(R=$r($A(z)))}),R=R.replace(n,U),d[_]=p?S(R,!0):R}}b("border","",!0),b("border","-width"),b("border","-color"),b("border","-style"),b("padding",""),b("margin",""),v("border","border-width","border-style","border-color"),d.border==="medium none"&&delete d.border,d["border-image"]==="none"&&delete d["border-image"]}return d},serialize:(f,d)=>{let p="";const h=(b,y)=>{const v=y[b];if(v)for(let E=0,S=v.length;E<S;E++){const T=v[E],O=f[T];O&&(p+=(p.length>0?" ":"")+T+": "+O+";")}},g=(b,y)=>{if(!i||!y)return!0;let v=i["*"];return v&&v[b]?!1:(v=i[y],!(v&&v[b]))};return d&&a?(h("*",a),h(d,a)):Ae(f,(b,y)=>{b&&g(y,d)&&(p+=(p.length>0?" ":"")+y+": "+b+";")}),p}};return u},FA={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},MA=e=>e instanceof Event||Se(e.initEvent),UA=e=>e.isDefaultPrevented===He||e.isDefaultPrevented===Le,zA=e=>qe(e.preventDefault)||MA(e),Dp=(e,t)=>{const n=t??{};for(const s in e)oe(FA,s)||(n[s]=e[s]);return M(e.composedPath)&&(n.composedPath=()=>e.composedPath()),M(e.getModifierState)&&(n.getModifierState=s=>e.getModifierState(s)),M(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},lu=(e,t,n,s)=>{var o;const r=Dp(t,s);return r.type=e,qe(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),zA(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=He,Se(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=He,Se(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=He,r.stopPropagation()},UA(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?He:Le,r.isPropagationStopped=r.cancelBubble===!0?He:Le,r.isImmediatePropagationStopped=Le)),r},HA="mce-data-",WA=/^(?:mouse|contextmenu)|click/,uu=(e,t,n,s)=>{e.addEventListener(t,n,s||!1)},Ni=(e,t,n,s)=>{e.removeEventListener(t,n,s||!1)},VA=e=>M(e)&&WA.test(e.type),Fr=(e,t)=>{const n=lu(e.type,e,document,t);if(VA(e)&&ct(e.pageX)&&!ct(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,a=n;a.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),a.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},jA=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,a=()=>{Ni(e,"DOMContentLoaded",a),Ni(e,"load",a),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?a():uu(e,"DOMContentLoaded",a),n.domLoaded||uu(e,"load",a)};class Vs{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=HA+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let a;const i=window,c=d=>{r.executeHandlers(Fr(d||i.event),l)};if(!t||B(t)||rs(t))return s;let l;t[r.expando]?l=t[r.expando]:(l=r.count++,t[r.expando]=l,r.events[l]={}),o=o||t;const u=n.split(" ");let f=u.length;for(;f--;){let d=u[f],p=c,h=!1,g=!1;if(d==="DOMContentLoaded"&&(d="ready"),r.domLoaded&&d==="ready"&&t.readyState==="complete"){s.call(o,Fr({type:d}));continue}!r.hasFocusIn&&(d==="focusin"||d==="focusout")&&(h=!0,g=d==="focusin"?"focus":"blur",p=b=>{const y=Fr(b||i.event);y.type=y.type==="focus"?"focusin":"focusout",r.executeHandlers(y,l)}),a=r.events[l][d],a?d==="ready"&&r.domLoaded?s(Fr({type:d})):a.push({func:s,scope:o}):(r.events[l][d]=a=[{func:s,scope:o}],a.fakeName=g,a.capture=h,a.nativeHandler=p,d==="ready"?jA(t,p,r):uu(t,g||d,p,h))}return t=a=null,s}unbind(t,n,s){if(!t||B(t)||rs(t))return this;const o=t[this.expando];if(o){let r=this.events[o];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const c=a[i],l=r[c];if(l){if(s){let u=l.length;for(;u--;)if(l[u].func===s){const f=l.nativeHandler,d=l.fakeName,p=l.capture,h=l.slice(0,u).concat(l.slice(u+1));h.nativeHandler=f,h.fakeName=d,h.capture=p,r[c]=h}}(!s||l.length===0)&&(delete r[c],Ni(t,l.fakeName||c,l.nativeHandler,l.capture))}}}else Ae(r,(a,i)=>{Ni(t,a.fakeName||i,a.nativeHandler,a.capture)}),r={};for(const a in r)if(oe(r,a))return this;delete this.events[o];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){if(!t||B(t)||rs(t))return this;const o=Fr({type:n,target:t},s);do{const r=t[this.expando];r&&this.executeHandlers(o,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||B(t)||rs(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let s=n.length;for(;s--;)t=n[s],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,a=o.length;r<a;r++){const i=o[r];if(i&&i.func.call(i.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}Vs.Event=new Vs;const fu=L.each,qA=L.grep,du="data-mce-style",KA=L.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Mr=(e,t,n)=>{qe(n)||n===""?rt(e,t):ot(e,t,n)},Op=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Oo=(e,t)=>{let n=0;if(e)for(let s=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const r=o.nodeType;t&&B(o)&&(r===s||!o.data.length)||(n++,s=r)}return n},Bp=(e,t)=>{const n=Ut(t,"style"),s=e.serialize(e.parse(n),pe(t));Mr(t,du,s)},GA=(e,t)=>mn(e)?oe(KA,t)?e+"":e+"px":e,Ip=(e,t,n)=>{const s=Op(t);qe(n)||n===""?Vg(e,s):Hg(e,s,GA(n,s))},YA=(e,t,n)=>{const s=t.keep_values,o={set:(a,i,c)=>{const l=C.fromDom(a);Se(t.url_converter)&&M(i)&&(i=t.url_converter.call(t.url_converter_scope||n(),String(i),c,a));const u="data-mce-"+c;Mr(l,u,i),Mr(l,c,i)},get:(a,i)=>{const c=C.fromDom(a);return Ut(c,"data-mce-"+i)||Ut(c,i)}},r={style:{set:(a,i)=>{const c=C.fromDom(a);s&&Mr(c,du,i),rt(c,"style"),J(i)&&ui(c,e.parse(i))},get:a=>{const i=C.fromDom(a),c=Ut(i,du)||Ut(i,"style");return e.serialize(e.parse(c),pe(i))}}};return s&&(r.href=r.src=o),r},Ne=(e,t={})=>{const n={},s=window,o={};let r=0;const a=!0,i=!0,c=yp.forElement(C.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),l=[],u=t.schema?t.schema:ls({}),f=cu({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope,force_hex_color:t.force_hex_color},t.schema),d=t.ownEvents?new Vs:Vs.Event,p=u.getBlockElements(),h=w=>J(w)?oe(p,w):q(w)&&(oe(p,w.nodeName)||zs(u,w)),g=w=>w&&e&&J(w)?e.getElementById(w):w,b=w=>{const k=g(w);return M(k)?C.fromDom(k):null},y=(w,k,$="")=>{let D;const Q=b(w);if(M(Q)&&Mt(Q)){const me=Ga[k];me&&me.get?D=me.get(Q.dom,k):D=Ut(Q,k)}return M(D)?D:$},v=w=>{const k=g(w);return qe(k)?[]:k.attributes},E=(w,k,$)=>{K(w,D=>{if(q(D)){const Q=C.fromDom(D),me=$===""?null:$,Be=Ut(Q,k),Ke=Ga[k];Ke&&Ke.set?Ke.set(Q.dom,me,k):Mr(Q,k,me),Be!==me&&t.onSetAttrib&&t.onSetAttrib({attrElm:Q.dom,attrName:k,attrValue:me})}})},S=(w,k)=>w.cloneNode(k),T=()=>t.root_element||e.body,O=w=>{const k=Zg(w);return{x:k.x,y:k.y,w:k.width,h:k.height}},U=(w,k)=>fA(e.body,g(w),k),A=(w,k,$)=>{K(w,D=>{const Q=C.fromDom(D);Ip(Q,k,$),t.update_styles&&Bp(f,Q)})},_=(w,k)=>{K(w,$=>{const D=C.fromDom($);Ae(k,(Q,me)=>{Ip(D,me,Q)}),t.update_styles&&Bp(f,D)})},R=(w,k,$)=>{const D=g(w);if(!(qe(D)||!Yn(D)&&!aN(D)))return $?Nn(C.fromDom(D),Op(k)):(k=k.replace(/-(\D)/g,(Q,me)=>me.toUpperCase()),k==="float"&&(k="cssFloat"),D.style?D.style[k]:void 0)},z=w=>{const k=g(w);if(!k)return{w:0,h:0};let $=R(k,"width"),D=R(k,"height");return(!$||$.indexOf("px")===-1)&&($="0"),(!D||D.indexOf("px")===-1)&&(D="0"),{w:parseInt($,10)||k.offsetWidth||k.clientWidth,h:parseInt(D,10)||k.offsetHeight||k.clientHeight}},Z=w=>{const k=g(w),$=U(k),D=z(k);return{x:$.x,y:$.y,w:D.w,h:D.h}},re=(w,k)=>{if(!w)return!1;const $=Ge(w)?w:[w];return Fe($,D=>gn(C.fromDom(D),k))},ie=(w,k,$,D)=>{const Q=[];let me=g(w);D=D===void 0;const Be=$||(T().nodeName!=="BODY"?T().parentNode:null);if(J(k))if(k==="*")k=q;else{const Ke=k;k=je=>re(je,Ke)}for(;me&&!(me===Be||qe(me.nodeType)||Pr(me)||Ul(me));){if(!k||k(me))if(D)Q.push(me);else return[me];me=me.parentNode}return D?Q:null},Ce=(w,k,$)=>{const D=ie(w,k,$,!1);return D&&D.length>0?D[0]:null},we=(w,k,$)=>{let D=k;if(w){J(k)&&(D=Q=>re(Q,k));for(let Q=w[$];Q;Q=Q[$])if(Se(D)&&D(Q))return Q}return null},Ie=(w,k)=>we(w,k,"nextSibling"),nt=(w,k)=>we(w,k,"previousSibling"),Ve=w=>Se(w.querySelectorAll),F=(w,k)=>{var $,D;const Q=(D=($=g(k))!==null&&$!==void 0?$:t.root_element)!==null&&D!==void 0?D:e;return Ve(Q)?Ft(Q.querySelectorAll(w)):[]},K=function(w,k,$){const D=$??this;if(Ge(w)){const Q=[];return fu(w,(me,Be)=>{const Ke=g(me);Ke&&Q.push(k.call(D,Ke,Be))}),Q}else{const Q=g(w);return Q?k.call(D,Q):!1}},ge=(w,k)=>{K(w,$=>{Ae(k,(D,Q)=>{E($,Q,D)})})},de=(w,k)=>{K(w,$=>{const D=C.fromDom($);di(D,k)})},G=(w,k,$,D,Q)=>K(w,me=>{const Be=J(k)?e.createElement(k):k;return M($)&&ge(Be,$),D&&(!J(D)&&D.nodeType?Be.appendChild(D):J(D)&&de(Be,D)),Q?Be:me.appendChild(Be)}),Y=(w,k,$)=>G(e.createElement(w),w,k,$,!0),I=Ws.decode,ee=Ws.encodeAllRaw,ue=(w,k,$="")=>{let D="<"+w;for(const Q in k)Eo(k,Q)&&(D+=" "+Q+'="'+ee(k[Q])+'"');return yr($)&&oe(u.getVoidElements(),w)?D+" />":D+">"+$+"</"+w+">"},ve=w=>{const k=e.createElement("div"),$=e.createDocumentFragment();$.appendChild(k),w&&(k.innerHTML=w);let D;for(;D=k.firstChild;)$.appendChild(D);return $.removeChild(k),$},xe=(w,k)=>K(w,$=>{const D=C.fromDom($);return k&&P(at(D),Q=>{jt(Q)&&Q.dom.length===0?Pe(Q):Ot(D,Q)}),Pe(D),D.dom}),ht=w=>K(w,k=>{const $=k.attributes;for(let D=$.length-1;D>=0;D--)k.removeAttributeNode($.item(D))}),$t=w=>f.parse(w),Fn=(w,k)=>f.serialize(w,k),bt=w=>{if(_s!==Ne.DOM&&e===document){if(n[w])return;n[w]=!0}let k=e.getElementById("mceDefaultStyles");if(!k){k=e.createElement("style"),k.id="mceDefaultStyles",k.type="text/css";const $=e.head;$.firstChild?$.insertBefore(k,$.firstChild):$.appendChild(k)}k.styleSheet?k.styleSheet.cssText+=w:k.appendChild(e.createTextNode(w))},fn=w=>{w||(w=""),P(w.split(","),k=>{o[k]=!0,c.load(k).catch(le)})},ne=(w,k,$)=>{K(w,D=>{if(q(D)){const Q=C.fromDom(D),me=k.split(" ");P(me,Be=>{M($)?($?_o:wr)(Q,Be):xx(Q,Be)})}})},fe=(w,k)=>{ne(w,k,!0)},Ee=(w,k)=>{ne(w,k,!1)},Te=(w,k)=>{const $=b(w),D=k.split(" ");return M($)&&Un(D,Q=>Al($,Q))},Oe=w=>{K(w,k=>Vg(C.fromDom(k),"display"))},nn=w=>{K(w,k=>Hg(C.fromDom(k),"display","none"))},ar=w=>{const k=b(w);return M(k)&&wo(fi(k,"display"),"none")},Va=w=>(w||"mce_")+r++,ho=w=>{const k=b(w);return M(k)?q(k.dom)?k.dom.outerHTML:Yx(k):""},Ss=(w,k)=>{K(w,$=>{q($)&&($.outerHTML=k)})},ws=(w,k)=>{const $=g(k);return K(w,D=>{const Q=$==null?void 0:$.parentNode,me=$==null?void 0:$.nextSibling;return Q&&(me?Q.insertBefore(D,me):Q.appendChild(D)),D})},ja=(w,k,$)=>K(k,D=>{var Q;const me=Ge(k)?w.cloneNode(!0):w;return $&&fu(qA(D.childNodes),Be=>{me.appendChild(Be)}),(Q=D.parentNode)===null||Q===void 0||Q.replaceChild(me,D),D}),cl=(w,k)=>{if(w.nodeName!==k.toUpperCase()){const $=Y(k);return fu(v(w),D=>{E($,D.nodeName,y(w,D.nodeName))}),ja($,w,!0),$}else return w},ll=(w,k)=>{let $=w;for(;$;){let D=k;for(;D&&$!==D;)D=D.parentNode;if($===D)break;$=$.parentNode}return!$&&w.ownerDocument?w.ownerDocument.documentElement:$},ir=w=>{if(q(w)){const k=w.nodeName.toLowerCase()==="a"&&!y(w,"href")&&y(w,"id");if(y(w,"name")||y(w,"data-mce-bookmark")||k)return!0}return!1},ul=(w,k,$)=>{let D=0;if(ir(w))return!1;const Q=w.firstChild;if(Q){const me=new Xe(Q,w),Be=u?u.getWhitespaceElements():{},Ke=k||(u?u.getNonEmptyElements():null);let je=Q;do{if(q(je)){const Ya=je.getAttribute("data-mce-bogus");if(Ya){je=me.next(Ya==="all");continue}const Xa=je.nodeName.toLowerCase();if(Ke&&Ke[Xa]){if(Xa==="br"){D++,je=me.next();continue}return!1}if(ir(je))return!1}if(rs(je)||B(je)&&!cs(je.data)&&(!($!=null&&$.includeZwsp)||!WN(je.data))||B(je)&&je.parentNode&&Be[je.parentNode.nodeName]&&cs(je.data))return!1;je=me.next()}while(je)}return D<=1},ks=()=>e.createRange(),cr=(w,k,$)=>{let D=ks(),Q,me;if(w&&k&&w.parentNode&&k.parentNode){const Be=w.parentNode;return D.setStart(Be,Oo(w)),D.setEnd(k.parentNode,Oo(k)),Q=D.extractContents(),D=ks(),D.setStart(k.parentNode,Oo(k)+1),D.setEnd(Be,Oo(w)+1),me=D.extractContents(),Be.insertBefore(nu(_s,Q,u),w),$?Be.insertBefore($,w):Be.insertBefore(k,w),Be.insertBefore(nu(_s,me,u),w),xe(w),$||k}else return},dn=(w,k,$,D)=>{if(Ge(w)){let Q=w.length;const me=[];for(;Q--;)me[Q]=dn(w[Q],k,$,D);return me}else return t.collect&&(w===e||w===s)&&l.push([w,k,$,D]),d.bind(w,k,$,D||_s)},ns=(w,k,$)=>{if(Ge(w)){let D=w.length;const Q=[];for(;D--;)Q[D]=ns(w[D],k,$);return Q}else{if(l.length>0&&(w===e||w===s)){let D=l.length;for(;D--;){const[Q,me,Be]=l[D];w===Q&&(!k||k===me)&&(!$||$===Be)&&d.unbind(Q,me,Be)}}return d.unbind(w,k,$)}},qa=(w,k,$)=>d.dispatch(w,k,$),Ka=(w,k,$)=>d.dispatch(w,k,$),fl=w=>{if(w&&Yn(w)){const k=w.getAttribute("data-mce-contenteditable");return k&&k!=="inherit"?k:w.contentEditable!=="inherit"?w.contentEditable:null}else return null},_s={doc:e,settings:t,win:s,files:o,stdMode:a,boxModel:i,styleSheetLoader:c,boundEvents:l,styles:f,schema:u,events:d,isBlock:h,root:null,clone:S,getRoot:T,getViewPort:O,getRect:Z,getSize:z,getParent:Ce,getParents:ie,get:g,getNext:Ie,getPrev:nt,select:F,is:re,add:G,create:Y,createHTML:ue,createFragment:ve,remove:xe,setStyle:A,getStyle:R,setStyles:_,removeAllAttribs:ht,setAttrib:E,setAttribs:ge,getAttrib:y,getPos:U,parseStyle:$t,serializeStyle:Fn,addStyle:bt,loadCSS:fn,addClass:fe,removeClass:Ee,hasClass:Te,toggleClass:ne,show:Oe,hide:nn,isHidden:ar,uniqueId:Va,setHTML:de,getOuterHTML:ho,setOuterHTML:Ss,decode:I,encode:ee,insertAfter:ws,replace:ja,rename:cl,findCommonAncestor:ll,run:K,getAttribs:v,isEmpty:ul,createRng:ks,nodeIndex:Oo,split:cr,bind:dn,unbind:ns,fire:Ka,dispatch:qa,getContentEditable:fl,getContentEditableParent:w=>{const k=T();let $=null;for(let D=w;D&&D!==k&&($=fl(D),$===null);D=D.parentNode);return $},isEditable:w=>{if(M(w)){const k=q(w)?w:w.parentElement;return M(k)&&Yn(k)&&Is(C.fromDom(k))}else return!1},destroy:()=>{if(l.length>0){let w=l.length;for(;w--;){const[k,$,D]=l[w];d.unbind(k,$,D)}}Ae(o,(w,k)=>{c.unload(k),delete o[k]})},isChildOf:(w,k)=>w===k||k.contains(w),dumpRng:w=>"startContainer: "+w.startContainer.nodeName+", startOffset: "+w.startOffset+", endContainer: "+w.endContainer.nodeName+", endOffset: "+w.endOffset},Ga=YA(f,t,V(_s));return _s};Ne.DOM=Ne(document),Ne.nodeIndex=Oo;const XA=Ne.DOM,ZA=0,QA=1,Ai=2,Lp=3;class Zn{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=XA;let r;const a=()=>{o.remove(l),r&&(r.onerror=r.onload=r=null)},i=()=>{a(),n()},c=()=>{a(),s("Failed to load script: "+t)},l=o.uniqueId();r=document.createElement("script"),r.id=l,r.type="text/javascript",r.src=L._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=i,r.onerror=c,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===Ai}markDone(t){this.states[t]=Ai}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=ZA),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(c,l)=>{Re(n.scriptLoadedCallbacks,l).each(u=>{P(u,f=>f[c](l))}),delete n.scriptLoadedCallbacks[l]},o=c=>{const l=se(c,u=>u.status==="rejected");return l.length>0?Promise.reject(sn(l,({reason:u})=>Ge(u)?u:[u])):Promise.resolve()},r=c=>Promise.allSettled(he(c,l=>n.states[l]===Ai?(s("resolve",l),Promise.resolve()):n.states[l]===Lp?(s("reject",l),Promise.reject(l)):(n.states[l]=QA,n.loadScript(l).then(()=>{n.states[l]=Ai,s("resolve",l);const u=n.queue;return u.length>0?(n.queue=[],r(u).then(o)):Promise.resolve()},()=>(n.states[l]=Lp,s("reject",l),Promise.reject(l)))))),a=c=>(n.loading=!0,r(c).then(l=>{n.loading=!1;const u=n.queueLoadedCallbacks.shift();return m.from(u).each(dr),o(l)})),i=sg(t);return n.loading?new Promise((c,l)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(c,l)})}):a(i)}}Zn.ScriptLoader=new Zn;const et=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},JA=(e,t)=>{const n=e.indexOf(t);return n!==-1&&e.indexOf(t,n+1)>n},eT=e=>yt(e)&&oe(e,"raw"),tT=e=>Ge(e)&&e.length>1,Ur={},mu=et("en"),$p=()=>Re(Ur,mu.get()),bn={getData:()=>ti(Ur,e=>({...e})),setCode:e=>{e&&mu.set(e)},getCode:()=>mu.get(),add:(e,t)=>{let n=Ur[e];n||(Ur[e]=n={});const s=he(Dt(t),o=>o.toLowerCase());Ae(t,(o,r)=>{const a=r.toLowerCase();a!==r&&JA(s,a)?(oe(t,a)||(n[a]=o),n[r]=o):n[a]=o})},translate:e=>{const t=$p().getOr({}),n=a=>Se(a)?Object.prototype.toString.call(a):s(a)?"":""+a,s=a=>a===""||a===null||a===void 0,o=a=>{const i=n(a);return oe(t,i)?n(t[i]):Re(t,i.toLowerCase()).map(n).getOr(i)},r=a=>a.replace(/{context:\w+}$/,"");if(s(e))return"";if(eT(e))return n(e.raw);if(tT(e)){const a=e.slice(1),i=o(e[0]).replace(/\{([0-9]+)\}/g,(c,l)=>oe(a,l)?n(a[l]):c);return r(i)}return r(o(e))},isRtl:()=>$p().bind(e=>Re(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>oe(Ur,e)},vt=()=>{const e=[],t={},n={},s=[],o=(g,b)=>{const y=se(s,v=>v.name===g&&v.state===b);P(y,v=>v.resolve())},r=g=>oe(t,g),a=g=>oe(n,g),i=g=>{if(n[g])return n[g].instance},c=(g,b)=>{const y=bn.getCode(),v=","+(b||"")+",";!y||b&&v.indexOf(","+y+",")===-1||Zn.ScriptLoader.add(t[g]+"/langs/"+y+".js")},l=(g,b)=>{vt.languageLoad!==!1&&(r(g)?c(g,b):h(g,"loaded").then(()=>c(g,b)))},u=(g,b)=>(e.push(b),n[g]={instance:b},o(g,"added"),b),f=g=>{delete t[g],delete n[g]},d=(g,b)=>J(b)?J(g)?{prefix:"",resource:b,suffix:""}:{prefix:g.prefix,resource:b,suffix:g.suffix}:b,p=(g,b)=>{if(t[g])return Promise.resolve();let y=J(b)?b:b.prefix+b.resource+b.suffix;y.indexOf("/")!==0&&y.indexOf("://")===-1&&(y=vt.baseURL+"/"+y),t[g]=y.substring(0,y.lastIndexOf("/"));const v=()=>(o(g,"loaded"),Promise.resolve());return n[g]?v():Zn.ScriptLoader.add(y).then(v)},h=(g,b="added")=>b==="added"&&a(g)||b==="loaded"&&r(g)?Promise.resolve():new Promise(y=>{s.push({name:g,state:b,resolve:y})});return{items:e,urls:t,lookup:n,get:i,requireLangPack:l,add:u,remove:f,createUrl:d,load:p,waitFor:h}};vt.languageLoad=!0,vt.baseURL="",vt.PluginManager=vt(),vt.ThemeManager=vt(),vt.ModelManager=vt();const nT=e=>{const t=et(m.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(m.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:i=>{n(),t.set(m.some(i))}}},sT=e=>{const t=et(m.none()),n=()=>t.get().each(i=>clearInterval(i));return{clear:()=>{n(),t.set(m.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:i=>{n(),t.set(m.some(setInterval(i,e)))}}},us=()=>{const e=nT(le);return{...e,on:n=>e.get().each(n)}},Ti=(e,t)=>{let n=null;return{cancel:()=>{kt(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{kt(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},gu=(e,t)=>{let n=null;const s=()=>{kt(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},zr=V("mce-annotation"),js=V("data-mce-annotation"),Bo=V("data-mce-annotation-uid"),Hr=V("data-mce-annotation-active"),Wr=V("data-mce-annotation-classes"),Vr=V("data-mce-annotation-attrs"),Fp=e=>t=>ye(t,e),Mp=(e,t)=>{const n=e.selection.getRng(),s=C.fromDom(n.startContainer),o=C.fromDom(e.getBody()),r=t.fold(()=>"."+zr(),c=>`[${js()}="${c}"]`),a=xo(s,n.startOffset).getOr(s);return Bs(a,r,Fp(o)).bind(c=>Wn(c,`${Bo()}`).bind(l=>Wn(c,`${js()}`).map(u=>{const f=zp(e,l);return{uid:l,name:u,elements:f}})))},oT=e=>Mt(e)&&Al(e,zr()),Up=(e,t)=>Er(e,"data-mce-bogus")||Jg(e,'[data-mce-bogus="all"]',Fp(t)),zp=(e,t)=>{const n=C.fromDom(e.getBody()),s=mt(n,`[${Bo()}="${t}"]`);return se(s,o=>!Up(o,n))},Hp=(e,t)=>{const n=C.fromDom(e.getBody()),s=mt(n,`[${js()}="${t}"]`),o={};return P(s,r=>{if(!Up(r,n)){const a=Ut(r,Bo()),i=Re(o,a).getOr([]);o[a]=i.concat([r])}}),o},rT=(e,t)=>{const n=et({}),s=()=>({listeners:[],previous:us()}),o=(f,d)=>{r(f,p=>(d(p),p))},r=(f,d)=>{const p=n.get(),h=Re(p,f).getOrThunk(s),g=d(h);p[f]=g,n.set(p)},a=(f,d,p)=>{o(f,h=>{P(h.listeners,g=>g(!0,f,{uid:d,nodes:he(p,b=>b.dom)}))})},i=f=>{o(f,d=>{P(d.listeners,p=>p(!1,f))})},c=(f,d)=>{P(zp(e,f),p=>{d?ot(p,Hr(),"true"):rt(p,Hr())})},l=gu(()=>{const f=Ns(t.getNames());P(f,d=>{r(d,p=>{const h=p.previous.get();return Mp(e,m.some(d)).fold(()=>{h.each(g=>{i(d),p.previous.clear(),c(g,!1)})},({uid:g,name:b,elements:y})=>{wo(h,g)||(h.each(v=>c(v,!1)),a(b,g,y),p.previous.set(g),c(g,!0))}),{previous:p.previous,listeners:p.listeners}})})},30);return e.on("remove",()=>{l.cancel()}),e.on("NodeChange",()=>{l.throttle()}),{addListener:(f,d)=>{r(f,p=>({previous:p.previous,listeners:p.listeners.concat([d])}))}}},aT=(e,t)=>{const n=js(),s=r=>m.from(r.attr(n)).bind(t.lookup),o=r=>{var a,i;r.attr(Bo(),null),r.attr(js(),null),r.attr(Hr(),null);const c=m.from(r.attr(Vr())).map(d=>d.split(",")).getOr([]),l=m.from(r.attr(Wr())).map(d=>d.split(",")).getOr([]);P(c,d=>r.attr(d,null));const u=(i=(a=r.attr("class"))===null||a===void 0?void 0:a.split(" "))!==null&&i!==void 0?i:[],f=Ja(u,[zr()].concat(l));r.attr("class",f.length>0?f.join(" "):null),r.attr(Wr(),null),r.attr(Vr(),null)};e.serializer.addTempAttr(Hr()),e.serializer.addAttributeFilter(n,r=>{for(const a of r)s(a).each(i=>{i.persistent===!1&&(a.name==="span"?a.unwrap():o(a))})})},iT=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>Re(e,o).map(r=>r.settings),getNames:()=>Dt(e)}};let Wp=0;const jr=e=>{const n=new Date().getTime(),s=Math.floor(Math.random()*1e9);return Wp++,e+"_"+s+Wp+String(n)},cT=(e,t)=>{P(t,n=>{_o(e,n)})},lT=(e,t)=>{P(t,n=>{wr(e,n)})},Vp=(e,t)=>C.fromDom(e.dom.cloneNode(t)),qs=e=>Vp(e,!1),jp=e=>Vp(e,!0),uT=(e,t)=>{const n=C.fromTag(t),s=xg(e);return Hn(n,s),n},fT=(e,t)=>{const n=uT(e,t);Kn(e,n);const s=at(e);return Ls(n,s),Pe(e),n},qp=(e,t,n=Le)=>{const s=new Xe(e,t),o=r=>{let a;do a=s[r]();while(a&&!B(a)&&!n(a));return m.from(a).filter(B)};return{current:()=>m.from(s.current()).filter(B),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},Ks=(e,t)=>{const n=t||(a=>e.isBlock(a)||$e(a)||De(a)),s=(a,i,c,l)=>{if(B(a)){const u=l(a,i,a.data);if(u!==-1)return m.some({container:a,offset:u})}return c().bind(u=>s(u.container,u.offset,c,l))};return{backwards:(a,i,c,l)=>{const u=qp(a,l??e.getRoot(),n);return s(a,i,()=>u.prev().map(f=>({container:f,offset:f.length})),c).getOrNull()},forwards:(a,i,c,l)=>{const u=qp(a,l??e.getRoot(),n);return s(a,i,()=>u.next().map(f=>({container:f,offset:0})),c).getOrNull()}}},Io=Math.round,Gs=e=>e?{left:Io(e.left),top:Io(e.top),bottom:Io(e.bottom),right:Io(e.right),width:Io(e.width),height:Io(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Kp=(e,t)=>(e=Gs(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),dT=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,Gp=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,qr=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:Gp(t.top-e.bottom,e,t)},Kr=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:Gp(t.bottom-e.top,e,t),mT=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,gT=e=>Rt(e,(t,n)=>t.fold(()=>m.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),a=Math.max(n.right,s.right),i=Math.max(n.bottom,s.bottom);return m.some({top:r,right:a,bottom:i,left:o,width:a-o,height:i-r})}),m.none()),Yp=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},pT=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),hT=(e,t,n)=>Math.min(Math.max(e,t),n),Ri=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},fs=(e,t)=>{if(q(e)&&e.hasChildNodes()){const n=e.childNodes,s=hT(t,0,n.length-1);return n[s]}else return e},bT=(e,t)=>{if(!(t<0&&q(e)&&e.hasChildNodes()))return fs(e,t)},CT=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Xp=e=>J(e)&&e.charCodeAt(0)>=768&&CT.test(e),yT=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},vT=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},Zp=q,ET=an,Qp=pi("display","block table"),ST=pi("float","left right"),Gr=vT(Zp,ET,fr(ST)),wT=fr(pi("white-space","pre pre-line pre-wrap")),Yr=B,pu=$e,Jp=Ne.nodeIndex,Pi=bT,hu=e=>e?e.createRange():Ne.DOM.createRng(),bu=e=>J(e)&&/[\r\n\t ]/.test(e),eh=e=>!!e.setStart&&!!e.setEnd,Cu=e=>{const t=e.startContainer,n=e.startOffset;if(bu(e.toString())&&wT(t.parentNode)&&B(t)){const s=t.data;if(bu(s[n-1])||bu(s[n+1]))return!0}return!1},kT=e=>{const t=e.ownerDocument,n=hu(t),s=t.createTextNode(Je),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=Gs(n.getBoundingClientRect());return o.removeChild(s),r},_T=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&B(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),ds(r)}else return null},th=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,ds=e=>{var t;let n;const s=e.getClientRects();return s.length>0?n=Gs(s[0]):n=Gs(e.getBoundingClientRect()),!eh(e)&&pu(e)&&th(n)?kT(e):th(n)&&eh(e)&&(t=_T(e))!==null&&t!==void 0?t:n},Ys=(e,t)=>{const n=Kp(e,t);return n.width=1,n.right=n.left+1,n},xT=e=>{const t=[],n=a=>{a.height!==0&&(t.length>0&&dT(a,t[t.length-1])||t.push(a))},s=(a,i)=>{const c=hu(a.ownerDocument);if(i<a.data.length){if(Xp(a.data[i]))return;if(Xp(a.data[i-1])&&(c.setStart(a,i),c.setEnd(a,i+1),!Cu(c))){n(Ys(ds(c),!1));return}}i>0&&(c.setStart(a,i-1),c.setEnd(a,i),Cu(c)||n(Ys(ds(c),!1))),i<a.data.length&&(c.setStart(a,i),c.setEnd(a,i+1),Cu(c)||n(Ys(ds(c),!0)))},o=e.container(),r=e.offset();if(Yr(o))return s(o,r),t;if(Zp(o))if(e.isAtEnd()){const a=Pi(o,r);Yr(a)&&s(a,a.data.length),Gr(a)&&!pu(a)&&n(Ys(ds(a),!1))}else{const a=Pi(o,r);if(Yr(a)&&s(a,0),Gr(a)&&e.isAtEnd())return n(Ys(ds(a),!1)),t;const i=Pi(e.container(),e.offset()-1);Gr(i)&&!pu(i)&&(Qp(i)||Qp(a)||!Gr(a))&&n(Ys(ds(i),!1)),Gr(a)&&n(Ys(ds(a),!0))}return t},N=(e,t,n)=>{const s=()=>(Yr(e),t===0),o=()=>Yr(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const u=hu(e.ownerDocument);return u.setStart(e,t),u.setEnd(e,t),u},a=()=>(n||(n=xT(N(e,t))),n),i=()=>a().length>0,c=u=>u&&e===u.container()&&t===u.offset(),l=u=>Pi(e,u?t-1:t);return{container:V(e),offset:V(t),toRange:r,getClientRects:a,isVisible:i,isAtStart:s,isAtEnd:o,isEqual:c,getNode:l}};N.fromRangeStart=e=>N(e.startContainer,e.startOffset),N.fromRangeEnd=e=>N(e.endContainer,e.endOffset),N.after=e=>N(e.parentNode,Jp(e)+1),N.before=e=>N(e.parentNode,Jp(e)),N.isAbove=(e,t)=>dt(Pt(t.getClientRects()),As(e.getClientRects()),qr).getOr(!1),N.isBelow=(e,t)=>dt(As(t.getClientRects()),Pt(e.getClientRects()),Kr).getOr(!1),N.isAtStart=e=>e?e.isAtStart():!1,N.isAtEnd=e=>e?e.isAtEnd():!1,N.isTextPosition=e=>e?B(e.container()):!1,N.isElementPosition=e=>!N.isTextPosition(e);const Di=(e,t)=>{B(t)&&t.data.length===0&&e.remove(t)},NT=(e,t,n)=>{t.insertNode(n),Di(e,n.previousSibling),Di(e,n.nextSibling)},AT=(e,t,n)=>{const s=m.from(n.firstChild),o=m.from(n.lastChild);t.insertNode(n),s.each(r=>Di(e,r.previousSibling)),o.each(r=>Di(e,r.nextSibling))},yu=(e,t,n)=>{Ul(n)?AT(e,t,n):NT(e,t,n)},Cn=B,nh=Fs,sh=Ne.nodeIndex,oh=e=>{const t=e.parentNode;return nh(t)?oh(t):t},vu=e=>e?oi(e.childNodes,(t,n)=>(nh(n)&&n.nodeName!=="BR"?t=t.concat(vu(n)):t.push(n),t),[]):[],TT=(e,t)=>{let n=e;for(;(n=n.previousSibling)&&Cn(n);)t+=n.data.length;return t},rh=e=>t=>e===t,RT=e=>{let t,n;t=vu(oh(e)),n=rg(t,rh(e),e),t=t.slice(0,n+1);const s=oi(t,(o,r,a)=>(Cn(r)&&Cn(t[a-1])&&o++,o),0);return t=br(t,pn([e.nodeName])),n=rg(t,rh(e),e),n-s},ah=e=>(Cn(e)?"text()":e.nodeName.toLowerCase())+"["+RT(e)+"]",PT=(e,t,n)=>{const s=[];for(let o=t.parentNode;o&&o!==e;o=o.parentNode)s.push(o);return s},ih=(e,t)=>{let n=[],s=t.container(),o=t.offset(),r;if(Cn(s))r=TT(s,o);else{const i=s.childNodes;o>=i.length?(r="after",o=i.length-1):r="before",s=i[o]}n.push(ah(s));let a=PT(e,s);return a=br(a,fr(Fs)),n=n.concat(El(a,i=>ah(i))),n.reverse().join("/")+","+r},DT=(e,t,n)=>{let s=vu(e);return s=br(s,(o,r)=>!Cn(o)||!Cn(s[r-1])),s=br(s,pn([t])),s[n]},OT=(e,t)=>{let n=e,s=0;for(;Cn(n);){const o=n.data.length;if(t>=s&&t<=s+o){e=n,t=t-s;break}if(!Cn(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return Cn(e)&&t>e.data.length&&(t=e.data.length),N(e,t)},ch=(e,t)=>{if(!t)return null;const n=t.split(","),s=n[0].split("/"),o=n.length>1?n[1]:"before",r=oi(s,(a,i)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return c?(c[1]==="text()"&&(c[1]="#text"),DT(a,c[1],parseInt(c[2],10))):null},e);if(!r)return null;if(!Cn(r)&&r.parentNode){let a;return o==="after"?a=sh(r)+1:a=sh(r),N(r.parentNode,a)}return OT(r,parseInt(o,10))},Oi=De,BT=(e,t,n)=>{let s=e(t.data.slice(0,n)).length;for(let o=t.previousSibling;o&&B(o);o=o.previousSibling)s+=e(o.data).length;return s},lh=(e,t,n,s,o)=>{const r=o?s.startContainer:s.endContainer;let a=o?s.startOffset:s.endOffset;const i=[],c=e.getRoot();if(B(r))i.push(n?BT(t,r,a):a);else{let l=0;const u=r.childNodes;a>=u.length&&u.length&&(l=1,a=Math.max(0,u.length-1)),i.push(e.nodeIndex(u[a],n)+l)}for(let l=r;l&&l!==c;l=l.parentNode)i.push(e.nodeIndex(l,n));return i},IT=(e,t,n,s)=>{const o=t.dom,r=lh(o,e,n,s,!0),a=t.isForward(),i=ap(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:r,forward:a,...i};{const c=lh(o,e,n,s,!1);return{start:r,end:c,forward:a,...i}}},Eu=(e,t,n)=>{let s=0;return L.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++;return}}),s},uh=(e,t)=>{let n=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(q(n)&&n.nodeName==="TR"){const o=n.childNodes;n=o[Math.min(t?s:s-1,o.length-1)],n&&(s=t?0:n.childNodes.length,t?e.setStart(n,s):e.setEnd(n,s))}},fh=e=>(uh(e,!0),uh(e,!1),e),dh=(e,t)=>{if(q(e)&&(e=fs(e,t),Oi(e)))return e;if(qt(e)){B(e)&&Do(e)&&(e=e.parentNode);let n=e.previousSibling;if(Oi(n)||(n=e.nextSibling,Oi(n)))return n}},LT=e=>dh(e.startContainer,e.startOffset)||dh(e.endContainer,e.endOffset),mh=(e,t,n)=>{const s=n.getNode(),o=n.getRng();if(s.nodeName==="IMG"||Oi(s)){const a=s.nodeName;return{name:a,index:Eu(n.dom,a,s)}}const r=LT(o);if(r){const a=r.tagName;return{name:a,index:Eu(n.dom,a,r)}}return IT(e,n,t,o)},$T=e=>{const t=e.getRng();return{start:ih(e.dom.getRoot(),N.fromRangeStart(t)),end:ih(e.dom.getRoot(),N.fromRangeEnd(t)),forward:e.isForward()}},FT=e=>({rng:e.getRng(),forward:e.isForward()}),gh=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},ph=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),a=e.getNode(),i=a.nodeName,c=e.isForward();if(i==="IMG")return{name:i,index:Eu(n,i,a)};const l=fh(s.cloneRange());if(!r){l.collapse(!1);const f=gh(n,o+"_end",t);yu(n,l,f)}s=fh(s),s.collapse(!0);const u=gh(n,o+"_start",t);return yu(n,s,u),e.moveToBookmark({id:o,keep:!0,forward:c}),{id:o,forward:c}},MT=(e,t,n=!1)=>t===2?mh(zt,n,e):t===3?$T(e):t?FT(e):ph(e,!1),Su=j(mh,_t,!0),hh=e=>{const t=r=>r(e),n=V(e),s=()=>o,o={tag:!0,inner:e,fold:(r,a)=>a(e),isValue:He,isError:Le,map:r=>xt.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>m.some(e)};return o},bh=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:Le,isError:He,map:t,mapError:s=>xt.error(s(e)),bind:t,exists:Le,forall:He,getOr:_t,or:_t,getOrThunk:pl,orThunk:pl,getOrDie:Zm(String(e)),each:le,toOptional:m.none};return n},xt={value:hh,error:bh,fromOption:(e,t)=>e.fold(()=>bh(t),hh)},Tn={generate:e=>{if(!Ge(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return P(e,(s,o)=>{const r=Dt(s);if(r.length!==1)throw new Error("one and only one name per case");const a=r[0],i=s[a];if(n[a]!==void 0)throw new Error("duplicate key detected:"+a);if(a==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ge(i))throw new Error("case arguments must be an array");t.push(a),n[a]=(...c)=>{const l=c.length;if(l!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+l);return{fold:(...f)=>{if(f.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+f.length);return f[o].apply(null,c)},match:f=>{const d=Dt(f);if(t.length!==d.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+d.join(","));if(!Un(t,h=>ke(d,h)))throw new Error("Not all branches were specified when using match. Specified: "+d.join(", ")+`
Required: `+t.join(", "));return f[a].apply(null,c)},log:f=>{console.log(f,{constructors:t,constructor:a,params:c})}}}}),n}};Tn.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const UT=e=>{const t=[],n=[];return P(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},zT=e=>e.type==="inline-command"||e.type==="inline-format",HT=e=>e.type==="block-command"||e.type==="block-format",WT=e=>{const t=s=>xt.error({message:s,pattern:e}),n=(s,o,r)=>{if(e.format!==void 0){let a;if(Ge(e.format)){if(!Un(e.format,J))return t(s+" pattern has non-string items in the `format` array");a=e.format}else if(J(e.format))a=[e.format];else return t(s+" pattern has non-string `format` parameter");return xt.value(o(a))}else return e.cmd!==void 0?J(e.cmd)?xt.value(r(e.cmd,e.value)):t(s+" pattern has non-string `cmd` parameter"):t(s+" pattern is missing both `format` and `cmd` parameters")};if(!yt(e))return t("Raw pattern is not an object");if(!J(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!J(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,o=e.end;return o.length===0&&(o=s,s=""),n("Inline",r=>({type:"inline-format",start:s,end:o,format:r}),(r,a)=>({type:"inline-command",start:s,end:o,cmd:r,value:a}))}else return e.replacement!==void 0?J(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):xt.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,o)=>({type:"block-command",start:e.start,cmd:s,value:o}))},Ch=e=>se(e,HT),yh=e=>se(e,zT),VT=(e,t)=>({inlinePatterns:yh(e),blockPatterns:Ch(e),dynamicPatternsLookup:t}),vh=e=>{const t=UT(he(e,WT));return P(t.errors,n=>console.error(n.message,n.pattern)),t.values},jT=e=>t=>{const n=e(t);return vh(n)},wu=kn().deviceType,qT=wu.isTouch(),KT=Ne.DOM,GT=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Rt(t,(n,s)=>{const o=s.split("="),r=o[0],a=o.length>1?o[1]:r;return n[So(r)]=So(a),n},{})},Eh=e=>Qa(e,RegExp),W=e=>t=>t.options.get(e),ku=e=>J(e)||yt(e),Sh=(e,t="")=>n=>{const s=J(n);if(s)if(n.indexOf("=")!==-1){const o=GT(n);return{value:Re(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},YT=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:Sh(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:Sh(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=J(n)&&wn(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:n=>{const s=ke(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:n=>xs(n)?{valid:!0,value:n}:J(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||J(n)||Co(n,J);return s?J(n)?{value:he(n.split(","),So),valid:s}:Ge(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Nu(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=J(n)||Co(n,J);return s?{value:Ge(n)?n:he(n.split(","),So),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:n=>{const s=xs(n)||J(n);return s?n===!1||wu.isiPhone()||wu.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!qT}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||J(n)||Se(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:n=>{const s=n===!1||J(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:ku}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:ku}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:ku}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>J(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>Co(n,yt)||n===!1?{value:vh(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:n=>Se(n)?{value:jT(n),valid:!0}:{valid:!1,message:"Must be a single function"},default:n=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>Co(n,Eh)?{value:n,valid:!0}:Eh(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!1}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:n=>{const s=ke(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:n=>{const s=ke(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("force_hex_color",{processor:n=>{const s=["always","rgb_only","off"],o=ke(s,n);return o?{value:n,valid:o}:{valid:!1,message:`Must be one of: ${s.join(", ")}.`}},default:"off"}),t("sandbox_iframes",{processor:"boolean",default:!1}),t("convert_unsafe_embeds",{processor:"boolean",default:!1}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:bn.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:KT.getAttrib(e.getElement(),"placeholder")})})},XT=W("iframe_attrs"),ZT=W("doctype"),wh=W("document_base_url"),QT=W("body_id"),JT=W("body_class"),kh=W("content_security_policy"),eR=W("br_in_pre"),gt=W("forced_root_block"),Xr=W("forced_root_block_attrs"),tR=W("newline_behavior"),nR=W("br_newline_selector"),sR=W("no_newline_selector"),oR=W("keep_styles"),rR=W("end_container_on_empty_block"),_h=W("automatic_uploads"),xh=W("images_reuse_filename"),aR=W("images_replace_blob_uris"),Nh=W("icons"),iR=W("icons_url"),cR=W("images_upload_url"),lR=W("images_upload_base_path"),uR=W("images_upload_credentials"),fR=W("images_upload_handler"),dR=W("content_css_cors"),_u=W("referrer_policy"),Ah=W("language"),mR=W("language_url"),Th=W("indent_use_margin"),gR=W("indentation"),pR=W("content_css"),hR=W("content_style"),Rh=W("font_css"),bR=W("directionality"),CR=W("inline_boundaries_selector"),Ph=W("object_resizing"),yR=W("resize_img_proportional"),vR=W("placeholder"),Dh=W("event_root"),ER=W("service_message"),Lo=W("theme"),SR=W("theme_url"),xu=W("model"),wR=W("model_url"),Zr=W("inline_boundaries"),kR=W("formats"),_R=W("preview_styles"),xR=W("format_empty_lines"),NR=W("format_noneditable_selector"),AR=W("custom_ui_selector"),Nu=W("inline"),TR=W("hidden_input"),RR=W("submit_patch"),PR=W("add_form_submit_trigger"),DR=W("add_unload_trigger"),OR=W("custom_undo_redo_levels"),BR=W("disable_nodechange"),Oh=W("readonly"),IR=W("editable_root"),Bh=W("content_css_cors"),Bi=W("plugins"),LR=W("external_plugins"),$R=W("block_unsupported_drop"),FR=W("visual"),MR=W("visual_table_class"),Ih=W("visual_anchor_class"),UR=W("iframe_aria_text"),zR=W("setup"),HR=W("init_instance_callback"),WR=W("urlconverter_callback"),VR=W("auto_focus"),jR=W("browser_spellcheck"),qR=W("protect"),KR=W("paste_block_drop"),Ii=W("paste_data_images"),GR=W("paste_preprocess"),YR=W("paste_postprocess"),XR=W("newdocument_content"),ZR=W("paste_webkit_styles"),QR=W("paste_remove_styles_if_webkit"),JR=W("paste_merge_formats"),eP=W("smart_paste"),tP=W("paste_as_text"),nP=W("paste_tab_spaces"),sP=W("allow_html_data_urls"),oP=W("text_patterns"),rP=W("text_patterns_lookup"),Lh=W("noneditable_class"),aP=W("editable_class"),iP=W("noneditable_regexp"),cP=W("preserve_cdata"),lP=W("highlight_on_focus"),Au=W("xss_sanitization"),uP=W("init_content_sync"),fP=e=>e.options.isSet("text_patterns_lookup"),dP=e=>L.explode(e.options.get("font_size_style_values")),mP=e=>L.explode(e.options.get("font_size_classes")),gP=e=>e.options.get("encoding")==="xml",$h=e=>L.explode(e.options.get("images_file_types")),pP=W("table_tab_navigation"),hP=W("details_initial_state"),bP=W("details_serialized_state"),CP=W("force_hex_color"),Tu=W("sandbox_iframes"),yP=q,Fh=B,Mh=e=>{const t=e.parentNode;t&&t.removeChild(e)},Uh=e=>{const t=zt(e);return{count:e.length-t.length,text:t}},zh=e=>{let t;for(;(t=e.data.lastIndexOf(Ze))!==-1;)e.deleteData(t,1)},Hh=(e,t)=>(Xs(e),t),vP=(e,t)=>{const n=Uh(e.data.substr(0,t.offset())),s=Uh(e.data.substr(t.offset()));return(n.text+s.text).length>0?(zh(e),N(e,t.offset()-n.count)):t},EP=(e,t)=>{const n=t.container(),s=C_(Ft(n.childNodes),e).map(o=>o<t.offset()?N(n,t.offset()-1):t).getOr(t);return Xs(e),s},SP=(e,t)=>Fh(e)&&t.container()===e?vP(e,t):Hh(e,t),wP=(e,t)=>t.container()===e.parentNode?EP(e,t):Hh(e,t),kP=(e,t)=>N.isTextPosition(t)?SP(e,t):wP(e,t),Xs=e=>{yP(e)&&qt(e)&&(rp(e)?e.removeAttribute("data-mce-caret"):Mh(e)),Fh(e)&&(zh(e),e.data.length===0&&Mh(e))},_P=De,xP=An,NP=hi,AP="*[contentEditable=false],video,audio,embed,object",Wh=(e,t,n)=>{const s=Kp(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const i=e.ownerDocument.documentElement;o=e.scrollLeft||i.scrollLeft,r=e.scrollTop||i.scrollTop}else{const i=e.getBoundingClientRect();o=e.scrollLeft-i.left,r=e.scrollTop-i.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),s.left+=a,s.right+=a),s},TP=e=>{var t,n;const s=mt(C.fromDom(e),AP);for(let o=0;o<s.length;o++){const r=s[o].dom;let a=r.previousSibling;if(Ei(a)){const i=a.data;i.length===1?(t=a.parentNode)===null||t===void 0||t.removeChild(a):a.deleteData(i.length-1,1)}a=r.nextSibling,vi(a)&&(a.data.length===1?(n=a.parentNode)===null||n===void 0||n.removeChild(a):a.deleteData(0,1))}},RP=(e,t,n,s)=>{const o=us();let r,a;const i=gt(e),c=e.dom,l=(g,b)=>{let y;if(u(),NP(b))return null;if(n(b)){const v=RN(i,b,g),E=Wh(t,b,g);c.setStyle(v,"top",E.top),a=v;const S=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(S,{...E}),c.add(t,S),o.set({caret:S,element:b,before:g}),g&&c.addClass(S,"mce-visual-caret-before"),f(),y=b.ownerDocument.createRange(),y.setStart(v,0),y.setEnd(v,0)}else return a=TN(b,g),y=b.ownerDocument.createRange(),Qr(a.nextSibling)?(y.setStart(a,0),y.setEnd(a,0)):(y.setStart(a,1),y.setEnd(a,1)),y;return y},u=()=>{TP(t),a&&(Xs(a),a=null),o.on(g=>{c.remove(g.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},f=()=>{r=setInterval(()=>{o.on(g=>{s()?c.toggleClass(g.caret,"mce-visual-caret-hidden"):c.addClass(g.caret,"mce-visual-caret-hidden")})},500)};return{show:l,hide:u,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(g=>{const b=Wh(t,g.element,g.before);c.setStyles(g.caret,{...b})})},destroy:()=>clearInterval(r)}},Vh=()=>be.browser.isFirefox(),Qr=e=>_P(e)||xP(e),Jr=e=>(Qr(e)||Xn(e)&&Vh())&&li(C.fromDom(e)).exists(Is),PP=rn,Ru=De,DP=An,jh=pi("display","block table table-cell table-caption list-item"),qh=qt,Kh=Do,OP=q,BP=B,IP=an,$o=e=>e>0,Zs=e=>e<0,Li=(e,t)=>{let n;for(;n=e(t);)if(!Kh(n))return n;return null},ea=(e,t,n,s,o)=>{const r=new Xe(e,s),a=Ru(e)||Kh(e);let i;if(Zs(t)){if(a&&(i=Li(r.prev.bind(r),!0),n(i)))return i;for(;i=Li(r.prev.bind(r),o);)if(n(i))return i}if($o(t)){if(a&&(i=Li(r.next.bind(r),!0),n(i)))return i;for(;i=Li(r.next.bind(r),o);)if(n(i))return i}return null},LP=(e,t)=>{const n=o=>PP(o.dom),s=o=>o.dom===t;return qn(C.fromDom(e),n,s).map(o=>o.dom).getOr(t)},ms=(e,t)=>{for(;e&&e!==t;){if(jh(e))return e;e=e.parentNode}return null},Rn=(e,t,n)=>ms(e.container(),n)===ms(t.container(),n),Pu=(e,t)=>{if(!t)return m.none();const n=t.container(),s=t.offset();return OP(n)?m.from(n.childNodes[s+e]):m.none()},Gh=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},$P=(e,t,n)=>ms(t,e)===ms(n,e),Yh=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let r=o[s];if(r&&qh(r)&&(r=r[s]),Ru(r)||DP(r)){if($P(t,r,o))return r;break}if(IP(r))break;o=o.parentNode}return null},ta=j(Gh,!0),na=j(Gh,!1),Du=(e,t,n)=>{let s;const o=j(Yh,!0,t),r=j(Yh,!1,t),a=n.startContainer,i=n.startOffset;if(Do(a)){const c=BP(a)?a.parentNode:a,l=c.getAttribute("data-mce-caret");if(l==="before"&&(s=c.nextSibling,Jr(s)))return ta(s);if(l==="after"&&(s=c.previousSibling,Jr(s)))return na(s)}if(!n.collapsed)return n;if(B(a)){if(qh(a)){if(e===1){if(s=r(a),s)return ta(s);if(s=o(a),s)return na(s)}if(e===-1){if(s=o(a),s)return na(s);if(s=r(a),s)return ta(s)}return n}if(Ei(a)&&i>=a.data.length-1)return e===1&&(s=r(a),s)?ta(s):n;if(vi(a)&&i<=1)return e===-1&&(s=o(a),s)?na(s):n;if(i===a.data.length)return s=r(a),s?ta(s):n;if(i===0)return s=o(a),s?na(s):n}return n},Xh=(e,t)=>Pu(e?0:-1,t).filter(Ru),sa=(e,t,n)=>{const s=Du(e,t,n);return e===-1?N.fromRangeStart(s):N.fromRangeEnd(s)},$i=e=>m.from(e.getNode()).map(C.fromDom),FP=e=>m.from(e.getNode(!0)).map(C.fromDom),Ou=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Fi=(e,t)=>{const n=Rn(e,t);return!n&&$e(e.getNode())?!0:n};var tt;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(tt||(tt={}));const MP=De,Pn=B,Zh=q,Bu=$e,Fo=an,Qh=zN,Mi=lp,UP=(e,t)=>{const n=[];let s=e;for(;s&&s!==t;)n.push(s),s=s.parentNode;return n},Jh=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,eb=(e,t)=>{if($o(e)){if(Fo(t.previousSibling)&&!Pn(t.previousSibling))return N.before(t);if(Pn(t))return N(t,0)}if(Zs(e)){if(Fo(t.nextSibling)&&!Pn(t.nextSibling))return N.after(t);if(Pn(t))return N(t,t.data.length)}return Zs(e)?Bu(t)?N.before(t):N.after(t):N.before(t)},zP=(e,t)=>{const n=t.nextSibling;return n&&Fo(n)?Pn(n)?N(n,0):N.before(n):Iu(tt.Forwards,N.after(t),e)},Iu=(e,t,n)=>{let s,o,r,a;if(!Zh(n)||!t)return null;if(t.isEqual(N.after(n))&&n.lastChild){if(a=N.after(n.lastChild),Zs(e)&&Fo(n.lastChild)&&Zh(n.lastChild))return Bu(n.lastChild)?N.before(n.lastChild):a}else a=t;const i=a.container();let c=a.offset();if(Pn(i)){if(Zs(e)&&c>0)return N(i,--c);if($o(e)&&c<i.length)return N(i,++c);s=i}else{if(Zs(e)&&c>0&&(o=Jh(i,c-1),Fo(o)))return!Qh(o)&&(r=ea(o,e,Mi,o),r)?Pn(r)?N(r,r.data.length):N.after(r):Pn(o)?N(o,o.data.length):N.before(o);if($o(e)&&c<i.childNodes.length&&(o=Jh(i,c),Fo(o)))return Bu(o)?zP(n,o):!Qh(o)&&(r=ea(o,e,Mi,o),r)?Pn(r)?N(r,0):N.before(r):Pn(o)?N(o,0):N.after(o);s=o||a.getNode()}if(s&&($o(e)&&a.isAtEnd()||Zs(e)&&a.isAtStart())&&(s=ea(s,e,He,n,!0),Mi(s,n)))return eb(e,s);o=s&&ea(s,e,Mi,n);const l=Ts(se(UP(i,n),MP));return l&&(!o||!l.contains(o))?($o(e)?a=N.after(l):a=N.before(l),a):o?eb(e,o):null},Dn=e=>({next:t=>Iu(tt.Forwards,t,e),prev:t=>Iu(tt.Backwards,t,e)}),HP=(e,t,n)=>{const s=e?N.before(n):N.after(n);return Kt(e,t,s)},WP=e=>$e(e)?N.before(e):N.after(e),tb=e=>N.isTextPosition(e)?e.offset()===0:an(e.getNode()),nb=e=>{if(N.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return an(e.getNode(!0))},sb=(e,t)=>!N.isTextPosition(e)&&!N.isTextPosition(t)&&e.getNode()===t.getNode(!0),VP=e=>!N.isTextPosition(e)&&$e(e.getNode()),jP=(e,t,n)=>e?!sb(t,n)&&!VP(t)&&nb(t)&&tb(n):!sb(n,t)&&tb(t)&&nb(n),Kt=(e,t,n)=>{const s=Dn(t);return m.from(e?s.next(n):s.prev(n))},Mo=(e,t,n)=>Kt(e,t,n).bind(s=>Rn(n,s,t)&&jP(e,n,s)?Kt(e,t,s):m.some(s)),ob=(e,t,n,s)=>Mo(e,t,n).bind(o=>s(o)?ob(e,t,o,s):m.some(o)),Uo=(e,t)=>{const n=e?t.firstChild:t.lastChild;return B(n)?m.some(N(n,e?0:n.data.length)):n?an(n)?m.some(e?N.before(n):WP(n)):HP(e,t,n):m.none()},Nt=j(Kt,!0),Bt=j(Kt,!1),pt=j(Uo,!0),cn=j(Uo,!1),Lu="_mce_caret",Gt=e=>q(e)&&e.id===Lu,Qs=(e,t)=>{let n=t;for(;n&&n!==e;){if(Gt(n))return n;n=n.parentNode}return null},qP=e=>J(e.start),KP=e=>oe(e,"rng"),GP=e=>oe(e,"id"),rb=e=>oe(e,"name"),ab=e=>L.isArray(e.start),Ui=e=>!rb(e)&&xs(e.forward)?e.forward:!0,ib=(e,t)=>(q(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),YP=(e,t)=>{const n=m.from(ch(e.getRoot(),t.start)),s=m.from(ch(e.getRoot(),t.end));return dt(n,s,(o,r)=>{const a=e.createRng();return a.setStart(o.container(),o.offset()),a.setEnd(r.container(),r.offset()),{range:a,forward:Ui(t)}})},XP=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Ze);e.appendChild(o),t.setStart(o,0),t.setEnd(o,0)},ZP=e=>!e.hasChildNodes(),QP=(e,t)=>cn(e).fold(Le,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),cb=(e,t,n)=>ZP(t)&&Qs(e,t)?(XP(t,n),!0):!1,lb=(e,t,n,s)=>{const o=n[t?"start":"end"],r=e.getRoot();if(o){let a=r,i=o[0];for(let c=o.length-1;a&&c>=1;c--){const l=a.childNodes;if(cb(r,a,s))return!0;if(o[c]>l.length-1)return cb(r,a,s)?!0:QP(a,s);a=l[o[c]]}B(a)&&(i=Math.min(o[0],a.data.length)),q(a)&&(i=Math.min(o[0],a.childNodes.length)),t?s.setStart(a,i):s.setEnd(a,i)}return!0},$u=e=>B(e)&&e.data.length>0,ub=(e,t,n)=>{const s=e.get(n.id+"_"+t),o=s==null?void 0:s.parentNode,r=n.keep;if(s&&o){let a,i;if(t==="start"?r?s.hasChildNodes()?(a=s.firstChild,i=1):$u(s.nextSibling)?(a=s.nextSibling,i=0):$u(s.previousSibling)?(a=s.previousSibling,i=s.previousSibling.data.length):(a=o,i=e.nodeIndex(s)+1):(a=o,i=e.nodeIndex(s)):r?s.hasChildNodes()?(a=s.firstChild,i=1):$u(s.previousSibling)?(a=s.previousSibling,i=s.previousSibling.data.length):(a=o,i=e.nodeIndex(s)):(a=o,i=e.nodeIndex(s)),!r){const c=s.previousSibling,l=s.nextSibling;L.each(L.grep(s.childNodes),f=>{B(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});let u;for(;u=e.get(n.id+"_"+t);)e.remove(u,!0);if(B(l)&&B(c)&&!be.browser.isOpera()){const f=c.data.length;c.appendData(l.data),e.remove(l),a=c,i=f}}return m.some(N(a,i))}else return m.none()},JP=(e,t)=>{const n=e.createRng();return lb(e,!0,t,n)&&lb(e,!1,t,n)?m.some({range:n,forward:Ui(t)}):m.none()},eD=(e,t)=>{const n=ub(e,"start",t),s=ub(e,"end",t);return dt(n,s.or(n),(o,r)=>{const a=e.createRng();return a.setStart(ib(e,o.container()),o.offset()),a.setEnd(ib(e,r.container()),r.offset()),{range:a,forward:Ui(t)}})},tD=(e,t)=>m.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),nD=(e,t)=>{const n=e.dom;if(t){if(ab(t))return JP(n,t);if(qP(t))return YP(n,t);if(GP(t))return eD(n,t);if(rb(t))return tD(n,t);if(KP(t))return m.some({range:t.rng,forward:Ui(t)})}return m.none()},sD=(e,t,n)=>MT(e,t,n),oD=(e,t)=>{nD(e,t).each(({range:n,forward:s})=>{e.setRng(n,s)})},Yt=e=>q(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",zi=(e=>t=>e===t)(Je),zo=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Fu=e=>!zo(e)&&!zi(e)&&!Hl(e),Mu=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},rD=e=>sn(e,t=>{const n=Ri(t);return n?[C.fromDom(n)]:[]}),aD=e=>Mu(e).length>1,iD=e=>se(rD(e),Br),cD=e=>mt(e,"td[data-mce-selected],th[data-mce-selected]"),fb=(e,t)=>{const n=cD(t);return n.length>0?n:iD(e)},Ho=e=>fb(Mu(e.selection.getSel()),C.fromDom(e.getBody())),oa=(e,t)=>Nr(e,"table",t),lD=e=>{const t=e.startContainer,n=e.startOffset;return B(t)?n===0?m.some(C.fromDom(t)):m.none():m.from(t.childNodes[n]).map(C.fromDom)},uD=e=>{const t=e.endContainer,n=e.endOffset;return B(t)?n===t.data.length?m.some(C.fromDom(t)):m.none():m.from(t.childNodes[n-1]).map(C.fromDom)},db=e=>Tl(e).fold(V([e]),t=>[e].concat(db(t))),Uu=e=>Rl(e).fold(V([e]),t=>pe(t)==="br"?Ds(t).map(n=>[e].concat(Uu(n))).getOr([]):[e].concat(Uu(t))),zu=(e,t)=>dt(lD(t),uD(t),(n,s)=>{const o=Ye(db(e),j(ye,n)),r=Ye(Uu(e),j(ye,s));return o.isSome()&&r.isSome()}).getOr(!1),Hu=(e,t,n,s)=>{const o=n,r=new Xe(n,o),a=hr(e.schema.getMoveCaretBeforeOnEnterElements(),(c,l)=>!ke(["td","th","table"],l.toLowerCase()));let i=n;do{if(B(i)&&L.trim(i.data).length!==0){s?t.setStart(i,0):t.setEnd(i,i.data.length);return}if(a[i.nodeName]){s?t.setStartBefore(i):i.nodeName==="BR"?t.setEndBefore(i):t.setEndAfter(i);return}}while(i=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Hi=e=>{const t=e.selection.getSel();return M(t)&&t.rangeCount>0},Wu=(e,t)=>{const n=Ho(e);n.length>0?P(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},mb=(e,t,n)=>{const s=ph(e,t);n(s),e.moveToBookmark(s)},ra=e=>mn(e==null?void 0:e.nodeType),Vu=e=>q(e)&&!Yt(e)&&!Gt(e)&&!Fs(e),fD=(e,t)=>{if(Vu(t)&&!/^(TD|TH)$/.test(t.nodeName)){const n=e.getAttrib(t,"data-mce-selected"),s=parseInt(n,10);return!isNaN(s)&&s>0}else return!1},gb=(e,t,n)=>{const{selection:s,dom:o}=e,r=s.getNode(),a=De(r);mb(s,!0,()=>{t()}),a&&De(r)&&o.isChildOf(r,e.getBody())?e.selection.select(r):n(s.getStart())&&dD(o,s)},dD=(e,t)=>{var n,s;const o=t.getRng(),{startContainer:r,startOffset:a}=o,i=t.getNode();if(!fD(e,i)&&q(r)){const c=r.childNodes,l=e.getRoot();let u;if(a<c.length){const f=c[a];u=new Xe(f,(n=e.getParent(f,e.isBlock))!==null&&n!==void 0?n:l)}else{const f=c[c.length-1];u=new Xe(f,(s=e.getParent(f,e.isBlock))!==null&&s!==void 0?s:l),u.next(!0)}for(let f=u.current();f;f=u.next()){if(e.getContentEditable(f)==="false")return;if(B(f)&&!qu(f)){o.setStart(f,0),t.setRng(o);return}}}},pb=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=e[s];e;e=e[s])if(q(e)||!qu(e))return e}},ju=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||zs(e,t),Wo=(e,t,n)=>e.schema.isValidChild(t,n),qu=(e,t=!1)=>{if(M(e)&&B(e)){const n=t?e.data.replace(/ /g," "):e.data;return cs(n)}else return!1},mD=e=>M(e)&&B(e)&&e.length===0,gD=(e,t)=>{const n="[data-mce-cef-wrappable]",s=NR(e),o=yr(s)?n:`${n},${s}`;return gn(C.fromDom(t),o)},hb=(e,t)=>{const n=e.dom;return Vu(t)&&n.getContentEditable(t)==="false"&&gD(e,t)&&n.select('[contenteditable="true"]',t).length===0},gs=(e,t)=>Se(e)?e(t):(M(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),Ku=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Gu=(e,t)=>{if(qe(e))return null;{let n=String(e);return(t==="color"||t==="backgroundColor")&&(n=$r(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Wi=(e,t,n)=>{const s=e.getStyle(t,n);return Gu(s,n)},bb=(e,t)=>{let n;return e.getParent(t,s=>q(s)?(n=e.getStyle(s,"text-decoration"),!!n&&n!=="none"):!1),n},Vi=(e,t,n)=>e.getParents(t,n,e.getRoot()),Yu=(e,t,n)=>{const s=e.formatter.get(t);return M(s)&&Fe(s,n)},pD=(e,t)=>Yu(e,t,s=>{const o=r=>Se(r)||r.length>1&&r.charAt(0)==="%";return Fe(["styles","attributes"],r=>Re(s,r).exists(a=>{const i=Ge(a)?a:yl(a);return Fe(i,o)}))}),hD=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>hr(r,(a,i)=>Fe(s,c=>c===i));return Yu(e,t,r=>{const a=o(r);return Yu(e,n,i=>{const c=o(i);return w_(a,c)})})},On=e=>Eo(e,"block"),bD=e=>On(e)&&e.wrapper===!0,CD=e=>On(e)&&e.wrapper!==!0,Xt=e=>Eo(e,"selector"),Qe=e=>Eo(e,"inline"),yD=e=>Xt(e)&&Qe(e)&&wo(Re(e,"mixed"),!0),Xu=e=>Xt(e)&&e.expand!==!1&&!Qe(e),vD=e=>{const t=[];let n=e;for(;n;){if(B(n)&&n.data!==Ze||n.childNodes.length>1)return[];q(n)&&t.push(n),n=n.firstChild}return t},Cb=e=>vD(e).length>0,Zu=e=>Gt(e.dom)&&Cb(e.dom),Vo=Yt,yb=Vi,vb=qu,ED=ju,SD=e=>$e(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Eb=(e,t)=>{let n=t;for(;n;){if(q(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},Sb=(e,t,n,s)=>{const o=t.data;if(e){for(let r=n;r>0;r--)if(s(o.charAt(r-1)))return r}else for(let r=n;r<o.length;r++)if(s(o.charAt(r)))return r;return-1},wD=(e,t,n)=>Sb(e,t,n,s=>zi(s)||zo(s)),kD=(e,t,n)=>Sb(e,t,n,Fu),wb=(e,t,n,s,o,r)=>{let a;const i=e.getParent(n,e.isBlock)||t,c=(u,f,d)=>{const p=Ks(e),h=o?p.backwards:p.forwards;return m.from(h(u,f,(g,b)=>Vo(g.parentNode)?-1:(a=g,d(o,g,b)),i))};return c(n,s,wD).bind(u=>r?c(u.container,u.offset+(o?-1:0),kD):m.some(u)).orThunk(()=>a?m.some({container:a,offset:o?0:a.length}):m.none())},kb=(e,t,n,s,o)=>{const r=s[o];B(s)&&yr(s.data)&&r&&(s=r);const a=yb(e,s);for(let i=0;i<a.length;i++)for(let c=0;c<t.length;c++){const l=t[c];if(!(M(l.collapsed)&&l.collapsed!==n.collapsed)&&Xt(l)&&e.is(a[i],l.selector))return a[i]}return s},_b=(e,t,n,s)=>{var o;let r=n;const a=e.getRoot(),i=t[0];if(On(i)&&(r=i.wrapper?null:e.getParent(n,i.block,a)),!r){const c=(o=e.getParent(n,"LI,TD,TH,SUMMARY"))!==null&&o!==void 0?o:a;r=e.getParent(B(n)?n.parentNode:n,l=>l!==a&&ED(e.schema,l),c)}if(r&&On(i)&&i.wrapper&&(r=yb(e,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r&&r[s]&&!e.isBlock(r[s])&&(r=r[s],!Ku(r,"br")););return r||n},xb=(e,t,n,s)=>{const o=n.parentNode;return M(n[s])?!1:o===t||qe(o)||e.isBlock(o)?!0:xb(e,t,o,s)},ji=(e,t,n,s,o)=>{let r=n;const a=o?"previousSibling":"nextSibling",i=e.getRoot();if(B(n)&&!vb(n)&&(o?s>0:s<n.data.length))return n;for(;r;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let c=r[a];c;c=c[a]){const l=B(c)&&!xb(e,i,c,a);if(!Vo(c)&&!SD(c)&&!vb(c,l))return r}if(r===i||r.parentNode===i){n=r;break}r=r.parentNode}return n},Nb=e=>Vo(e.parentNode)||Vo(e),Js=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:a,endOffset:i}=t;const c=n[0];return q(o)&&o.hasChildNodes()&&(o=fs(o,r),B(o)&&(r=0)),q(a)&&a.hasChildNodes()&&(a=fs(a,t.collapsed?i:i-1),B(a)&&(i=a.data.length)),o=Eb(e,o),a=Eb(e,a),Nb(o)&&(o=Vo(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,B(o)&&(r=t.collapsed?o.length:0)),Nb(a)&&(a=Vo(a)?a:a.parentNode,t.collapsed?a=a.nextSibling||a:a=a.previousSibling||a,B(a)&&(i=t.collapsed?0:a.length)),t.collapsed&&(wb(e,e.getRoot(),o,r,!0,s).each(({container:f,offset:d})=>{o=f,r=d}),wb(e,e.getRoot(),a,i,!1,s).each(({container:f,offset:d})=>{a=f,i=d})),(Qe(c)||c.block_expand)&&((!Qe(c)||!B(o)||r===0)&&(o=ji(e,n,o,r,!0)),(!Qe(c)||!B(a)||i===a.data.length)&&(a=ji(e,n,a,i,!1))),Xu(c)&&(o=kb(e,n,t,o,"previousSibling"),a=kb(e,n,t,a,"nextSibling")),(On(c)||Xt(c))&&(o=_b(e,n,o,"previousSibling"),a=_b(e,n,a,"nextSibling"),On(c)&&(e.isBlock(o)||(o=ji(e,n,o,r,!0)),e.isBlock(a)||(a=ji(e,n,a,i,!1)))),q(o)&&o.parentNode&&(r=e.nodeIndex(o),o=o.parentNode),q(a)&&a.parentNode&&(i=e.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:r,endContainer:a,endOffset:i}},aa=(e,t,n)=>{var s;const o=t.startOffset,r=fs(t.startContainer,o),a=t.endOffset,i=fs(t.endContainer,a-1),c=b=>{const y=b[0];B(y)&&y===r&&o>=y.data.length&&b.splice(0,1);const v=b[b.length-1];return a===0&&b.length>0&&v===i&&B(v)&&b.splice(b.length-1,1),b},l=(b,y,v)=>{const E=[];for(;b&&b!==v;b=b[y])E.push(b);return E},u=(b,y)=>e.getParent(b,v=>v.parentNode===y,y),f=(b,y,v)=>{const E=v?"nextSibling":"previousSibling";for(let S=b,T=S.parentNode;S&&S!==y;S=T){T=S.parentNode;const O=l(S===b?S:S[E],E);O.length&&(v||O.reverse(),n(c(O)))}};if(r===i)return n(c([r]));const d=(s=e.findCommonAncestor(r,i))!==null&&s!==void 0?s:e.getRoot();if(e.isChildOf(r,i))return f(r,d,!0);if(e.isChildOf(i,r))return f(i,d);const p=u(r,d)||r,h=u(i,d)||i;f(r,p,!0);const g=l(p===r?p:p.nextSibling,"nextSibling",h===i?h.nextSibling:h);g.length&&n(c(g)),f(i,h)},_D=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],xD=e=>jt(e)&&bi(e)===Ze,ND=(e,t,n,s)=>on(t).fold(()=>"skipping",o=>s==="br"||xD(t)?"valid":oT(t)?"existing":Gt(t.dom)?"caret":Fe(_D,r=>gn(t,r))?"valid-block":!Wo(e,n,s)||!Wo(e,pe(o),n)?"invalid-child":"valid"),AD=(e,t)=>{const n=Js(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},Ab=(e,t,n,s,o,r)=>{const{uid:a=t,...i}=n;_o(e,zr()),ot(e,`${Bo()}`,a),ot(e,`${js()}`,s);const{attributes:c={},classes:l=[]}=o(a,i);if(Hn(e,c),cT(e,l),r){l.length>0&&ot(e,`${Wr()}`,l.join(","));const u=Dt(c);u.length>0&&ot(e,`${Vr()}`,u.join(","))}},TD=e=>{wr(e,zr()),rt(e,`${Bo()}`),rt(e,`${js()}`),rt(e,`${Hr()}`);const t=Wn(e,`${Vr()}`).map(s=>s.split(",")).getOr([]),n=Wn(e,`${Wr()}`).map(s=>s.split(",")).getOr([]);P(t,s=>rt(e,s)),lT(e,n),rt(e,`${Wr()}`),rt(e,`${Vr()}`)},Tb=(e,t,n,s,o)=>{const r=C.fromTag("span",e);return Ab(r,t,n,s,o,!1),r},RD=(e,t,n,s,o,r)=>{const a=[],i=Tb(e.getDoc(),n,r,s,o),c=us(),l=()=>{c.clear()},u=()=>c.get().getOrThunk(()=>{const h=qs(i);return a.push(h),c.set(h),h}),f=h=>{P(h,d)},d=h=>{switch(ND(e,h,"span",pe(h))){case"invalid-child":{l();const b=at(h);f(b),l();break}case"valid-block":{l(),Ab(h,n,r,s,o,!0);break}case"valid":{const b=u();jg(h,b);break}}},p=h=>{const g=he(h,C.fromDom);f(g)};return aa(e.dom,t,h=>{l(),p(h)}),a},PD=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),a=Ho(e).length>0,i=jr("mce-annotation");if(r.collapsed&&!a&&AD(e,r),o.getRng().collapsed&&!a){const c=Tb(e.getDoc(),i,s,t,n.decorate);di(c,Je),o.getRng().insertNode(c.dom),o.select(c.dom)}else mb(o,!1,()=>{Wu(e,c=>{RD(e,c,i,t,n.decorate,s)})})})},Rb=e=>{const t=iT();aT(e,t);const n=rT(e,t),s=ci("span"),o=r=>{P(r,a=>{s(a)?Gn(a):TD(a)})};return{register:(r,a)=>{t.register(r,a)},annotate:(r,a)=>{t.lookup(r).each(i=>{PD(e,r,i,a)})},annotationChanged:(r,a)=>{n.addListener(r,a)},remove:r=>{Mp(e,m.some(r)).each(({elements:a})=>{const i=e.selection.getBookmark();o(a),e.selection.moveToBookmark(i)})},removeAll:r=>{const a=e.selection.getBookmark();Ae(Hp(e,r),(i,c)=>{o(i)}),e.selection.moveToBookmark(a)},getAll:r=>{const a=Hp(e,r);return ti(a,i=>he(i,c=>c.dom))}}},ia=e=>({getBookmark:j(sD,e),moveToBookmark:j(oD,e)});ia.isBookmarkNode=Yt;const Pb=(e,t,n)=>n.collapsed?!1:Fe(n.getClientRects(),s=>mT(s,e,t)),DD=(e,t)=>e.dispatch("PreProcess",t),OD=(e,t)=>e.dispatch("PostProcess",t),BD=e=>{e.dispatch("remove")},ID=e=>{e.dispatch("detach")},LD=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},$D=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},FD=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},MD=e=>{e.dispatch("PreInit")},UD=e=>{e.dispatch("PostRender")},zD=e=>{e.dispatch("Init")},HD=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},Db=(e,t,n)=>{e.dispatch(t,n)},Ob=(e,t,n,s)=>{e.dispatch("FormatApply",{format:t,node:n,vars:s})},Bb=(e,t,n,s)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:s})},WD=(e,t)=>e.dispatch("BeforeSetContent",t),Ib=(e,t)=>e.dispatch("SetContent",t),VD=(e,t)=>e.dispatch("BeforeGetContent",t),Lb=(e,t)=>e.dispatch("GetContent",t),jD=(e,t)=>{e.dispatch("AutocompleterStart",t)},qD=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},KD=e=>{e.dispatch("AutocompleterEnd")},GD=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),YD=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),$b=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),XD=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),H={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||H.metaKeyPressed(e),metaKeyPressed:e=>be.os.isMacOS()||be.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},eo="data-mce-selected",ZD="table,img,figure.image,hr,video,span.mce-preview-object,details",Fb=Math.abs,qi=Math.round,Qu={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},QD=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Mb=(e,t)=>{const n=t.dom,s=t.getDoc(),o=document,r=t.getBody();let a,i,c,l,u,f,d,p,h,g,b,y,v,E,S,T,O;const U=I=>M(I)&&(np(I)||n.is(I,"figure.image")),A=I=>An(I)||n.hasClass(I,"mce-preview-object"),_=(I,ee)=>{if(QD(I)){const ue=I.touches[0];return U(I.target)&&!Pb(ue.clientX,ue.clientY,ee)}else return U(I.target)&&!Pb(I.clientX,I.clientY,ee)},R=I=>{const ee=I.target;_(I,t.selection.getRng())&&!I.isDefaultPrevented()&&t.selection.select(ee)},z=I=>n.hasClass(I,"mce-preview-object")&&M(I.firstElementChild)?[I,I.firstElementChild]:n.is(I,"figure.image")?[I.querySelector("img")]:[I],Z=I=>{const ee=Ph(t);return!ee||I.getAttribute("data-mce-resize")==="false"||I===t.getBody()?!1:n.hasClass(I,"mce-preview-object")&&M(I.firstElementChild)?gn(C.fromDom(I.firstElementChild),ee):gn(C.fromDom(I),ee)},re=I=>A(I)?n.create("img",{src:be.transparentSrc}):I.cloneNode(!0),ie=(I,ee,ue)=>{if(M(ue)){const ve=z(I);P(ve,xe=>{xe.style[ee]||!t.schema.isValid(xe.nodeName.toLowerCase(),ee)?n.setStyle(xe,ee,ue):n.setAttrib(xe,ee,""+ue)})}},Ce=(I,ee,ue)=>{ie(I,"width",ee),ie(I,"height",ue)},we=I=>{let ee,ue,ve,xe,ht;ee=I.screenX-f,ue=I.screenY-d,E=ee*l[2]+g,S=ue*l[3]+b,E=E<5?5:E,S=S<5?5:S,(U(a)||A(a))&&yR(t)!==!1?ve=!H.modifierPressed(I):ve=H.modifierPressed(I),ve&&(Fb(ee)>Fb(ue)?(S=qi(E*y),E=qi(S/y)):(E=qi(S/y),S=qi(E*y))),Ce(i,E,S),xe=l.startPos.x+ee,ht=l.startPos.y+ue,xe=xe>0?xe:0,ht=ht>0?ht:0,n.setStyles(c,{left:xe,top:ht,display:"block"}),c.innerHTML=E+" &times; "+S,l[2]<0&&i.clientWidth<=E&&n.setStyle(i,"left",p+(g-E)),l[3]<0&&i.clientHeight<=S&&n.setStyle(i,"top",h+(b-S)),ee=r.scrollWidth-T,ue=r.scrollHeight-O,ee+ue!==0&&n.setStyles(c,{left:xe-ee,top:ht-ue}),v||($D(t,a,g,b,"corner-"+l.name),v=!0)},Ie=()=>{const I=v;v=!1,I&&(ie(a,"width",E),ie(a,"height",S)),n.unbind(s,"mousemove",we),n.unbind(s,"mouseup",Ie),o!==s&&(n.unbind(o,"mousemove",we),n.unbind(o,"mouseup",Ie)),n.remove(i),n.remove(c),n.remove(u),nt(a),I&&(FD(t,a,E,S,"corner-"+l.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},nt=I=>{de();const ee=n.getPos(I,r),ue=ee.x,ve=ee.y,xe=I.getBoundingClientRect(),ht=xe.width||xe.right-xe.left,$t=xe.height||xe.bottom-xe.top;a!==I&&(F(),a=I,E=S=0);const Fn=t.dispatch("ObjectSelected",{target:I});Z(I)&&!Fn.isDefaultPrevented()?Ae(Qu,(bt,fn)=>{const ne=Ee=>{const Te=z(a)[0];f=Ee.screenX,d=Ee.screenY,g=Te.clientWidth,b=Te.clientHeight,y=b/g,l=bt,l.name=fn,l.startPos={x:ht*bt[0]+ue,y:$t*bt[1]+ve},T=r.scrollWidth,O=r.scrollHeight,u=n.add(r,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=re(a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:ue,top:ve,margin:0}),Ce(i,ht,$t),i.removeAttribute(eo),r.appendChild(i),n.bind(s,"mousemove",we),n.bind(s,"mouseup",Ie),o!==s&&(n.bind(o,"mousemove",we),n.bind(o,"mouseup",Ie)),c=n.add(r,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},g+" &times; "+b)};let fe=n.get("mceResizeHandle"+fn);fe&&n.remove(fe),fe=n.add(r,"div",{id:"mceResizeHandle"+fn,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+fn+"-resize; margin:0; padding:0"}),n.bind(fe,"mousedown",Ee=>{Ee.stopImmediatePropagation(),Ee.preventDefault(),ne(Ee)}),bt.elm=fe,n.setStyles(fe,{left:ht*bt[0]+ue-fe.offsetWidth/2,top:$t*bt[1]+ve-fe.offsetHeight/2})}):F(!1)},Ve=Ti(nt,0),F=(I=!0)=>{Ve.cancel(),de(),a&&I&&a.removeAttribute(eo),Ae(Qu,(ee,ue)=>{const ve=n.get("mceResizeHandle"+ue);ve&&(n.unbind(ve),n.remove(ve))})},K=(I,ee)=>n.isChildOf(I,ee),ge=I=>{if(v||t.removed||t.composing)return;const ee=I.type==="mousedown"?I.target:e.getNode(),ue=Bs(C.fromDom(ee),ZD).map(xe=>xe.dom).filter(xe=>n.isEditable(xe.parentElement)||xe.nodeName==="IMG"&&n.isEditable(xe)).getOrUndefined(),ve=M(ue)?n.getAttrib(ue,eo,"1"):"1";if(P(n.select(`img[${eo}],hr[${eo}]`),xe=>{xe.removeAttribute(eo)}),M(ue)&&K(ue,r)&&t.hasFocus()){G();const xe=e.getStart(!0);if(K(xe,ue)&&K(e.getEnd(!0),ue)){n.setAttrib(ue,eo,ve),Ve.throttle(ue);return}}F()},de=()=>{Ae(Qu,I=>{I.elm&&(n.unbind(I.elm),delete I.elm)})},G=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{G(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",ge),t.on("keyup compositionend",I=>{a&&a.nodeName==="TABLE"&&ge(I)}),t.on("hide blur",F),t.on("contextmenu longpress",R,!0)}),t.on("remove",de),{isResizable:Z,showResizeRect:nt,hideResizeRect:F,updateResizeRect:ge,destroy:()=>{Ve.cancel(),a=i=u=null}}},JD=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},e1=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},Ub=(e,t,n)=>{const s=e.document.createRange();return JD(s,t),e1(s,n),s},Ju=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},ca=Tn.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),zb=(e,t,n)=>t(C.fromDom(n.startContainer),n.startOffset,C.fromDom(n.endContainer),n.endOffset),t1=(e,t)=>t.match({domRange:n=>({ltr:V(n),rtl:m.none}),relative:(n,s)=>({ltr:Rs(()=>Ub(e,n,s)),rtl:Rs(()=>m.some(Ub(e,s,n)))}),exact:(n,s,o,r)=>({ltr:Rs(()=>Ju(e,n,s,o,r)),rtl:Rs(()=>m.some(Ju(e,o,r,n,s)))})}),n1=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>ca.rtl(C.fromDom(o.endContainer),o.endOffset,C.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>zb(e,ca.ltr,n)):zb(e,ca.ltr,n)},s1=(e,t)=>{const n=t1(e,t);return n1(e,n)};ca.ltr,ca.rtl;const Hb={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},o1=(e,t,n)=>{var s,o;return m.from((o=(s=e.dom).caretPositionFromPoint)===null||o===void 0?void 0:o.call(s,t,n)).bind(r=>{if(r.offsetNode===null)return m.none();const a=e.dom.createRange();return a.setStart(r.offsetNode,r.offset),a.collapse(),m.some(a)})},r1=(e,t,n)=>{var s,o;return m.from((o=(s=e.dom).caretRangeFromPoint)===null||o===void 0?void 0:o.call(s,t,n))},a1=document.caretPositionFromPoint?o1:document.caretRangeFromPoint?r1:m.none,i1=(e,t,n)=>{const s=C.fromDom(e.document);return a1(s,t,n).map(o=>Hb.create(C.fromDom(o.startContainer),o.startOffset,C.fromDom(o.endContainer),o.endOffset))},ef=Tn.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),c1=(e,t,n,s)=>e.fold(t,n,s),l1=e=>e.fold(_t,_t,_t),u1=ef.before,f1=ef.on,d1=ef.after,Qn={before:u1,on:f1,after:d1,cata:c1,getStart:l1},Ki=Tn.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),m1=e=>Ki.exact(e.start,e.soffset,e.finish,e.foffset),g1=e=>e.match({domRange:t=>C.fromDom(t.startContainer),relative:(t,n)=>Qn.getStart(t),exact:(t,n,s,o)=>t}),p1=Ki.domRange,h1=Ki.relative,b1=Ki.exact,C1=e=>{const t=g1(e);return _r(t)},y1=Hb.create,jo={domRange:p1,relative:h1,exact:b1,exactFromRange:m1,getWin:C1,range:y1},Gi=(e,t)=>{const n=pe(e);return n==="input"?Qn.after(e):ke(["br","img"],n)?t===0?Qn.before(e):Qn.after(e):Qn.on(e,t)},v1=(e,t)=>{const n=e.fold(Qn.before,Gi,Qn.after),s=t.fold(Qn.before,Gi,Qn.after);return jo.relative(n,s)},Wb=(e,t,n,s)=>{const o=Gi(e,t),r=Gi(n,s);return jo.relative(o,r)},E1=e=>e.match({domRange:t=>{const n=C.fromDom(t.startContainer),s=C.fromDom(t.endContainer);return Wb(n,t.startOffset,s,t.endOffset)},relative:v1,exact:Wb}),tf=(e,t)=>{const s=document.createDocumentFragment();return P(e,o=>{s.appendChild(o.dom)}),C.fromDom(s)},S1=e=>{const t=jo.getWin(e).dom,n=(o,r,a,i)=>Ju(t,o,r,a,i),s=E1(e);return s1(t,s).match({ltr:n,rtl:n})},w1=(e,t,n)=>i1(e,t,n),Vb=(e,t,n)=>{const s=_r(C.fromDom(n));return w1(s.dom,e,t).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined()},nf=(e,t)=>M(e)&&M(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,k1=(e,t,n)=>{let s=e;for(;s&&s!==t;){if(n(s))return s;s=s.parentNode}return null},jb=(e,t,n)=>k1(e,t,n)!==null,_1=(e,t,n)=>jb(e,t,s=>s.nodeName===n),x1=(e,t)=>qt(e)&&!jb(e,t,Gt),qb=(e,t,n)=>{const s=t.parentNode;if(s){const o=new Xe(t,e.getParent(s,e.isBlock)||e.getRoot());let r;for(;r=o[n?"prev":"next"]();)if($e(r))return!0}return!1},N1=(e,t)=>{var n;return((n=e.previousSibling)===null||n===void 0?void 0:n.nodeName)===t},A1=(e,t)=>{let n=t;for(;n&&n!==e;){if(De(n))return!0;n=n.parentNode}return!1},sf=(e,t,n,s,o)=>{const r=e.getRoot(),a=e.schema.getNonEmptyElements(),i=o.parentNode;let c,l;if(!i)return m.none();const u=e.getParent(i,e.isBlock)||r;if(s&&$e(o)&&t&&e.isEmpty(u))return m.some(N(i,e.nodeIndex(o)));const f=new Xe(o,u);for(;l=f[s?"prev":"next"]();){if(e.getContentEditableParent(l)==="false"||x1(l,r))return m.none();if(B(l)&&l.data.length>0)return _1(l,r,"A")?m.none():m.some(N(l,s?l.data.length:0));if(e.isBlock(l)||a[l.nodeName.toLowerCase()])return m.none();c=l}return rs(c)?m.none():n&&c?m.some(N(c,0)):m.none()},Kb=(e,t,n,s)=>{const o=e.getRoot();let r,a=!1,i=n?s.startContainer:s.endContainer,c=n?s.startOffset:s.endOffset;const l=q(i)&&c===i.childNodes.length,u=e.schema.getNonEmptyElements();let f=n;if(qt(i))return m.none();if(q(i)&&c>i.childNodes.length-1&&(f=!1),Pr(i)&&(i=o,c=0),i===o){if(f&&(r=i.childNodes[c>0?c-1:0],r&&(qt(r)||u[r.nodeName]||Xn(r))))return m.none();if(i.hasChildNodes()){if(c=Math.min(!f&&c>0?c-1:c,i.childNodes.length-1),i=i.childNodes[c],c=B(i)&&l?i.data.length:0,!t&&i===o.lastChild&&Xn(i)||A1(o,i)||qt(i)||zl(i))return m.none();if(i.hasChildNodes()&&!Xn(i)){r=i;const d=new Xe(i,o);do{if(De(r)||qt(r)){a=!1;break}if(B(r)&&r.data.length>0){c=f?0:r.data.length,i=r,a=!0;break}if(u[r.nodeName.toLowerCase()]&&!fN(r)){c=e.nodeIndex(r),i=r.parentNode,f||c++,a=!0;break}}while(r=f?d.next():d.prev())}}}return t&&(B(i)&&c===0&&sf(e,l,t,!0,i).each(d=>{i=d.container(),c=d.offset(),a=!0}),q(i)&&(r=i.childNodes[c],r||(r=i.childNodes[c-1]),r&&$e(r)&&!N1(r,"A")&&!qb(e,r,!1)&&!qb(e,r,!0)&&sf(e,l,t,!0,r).each(d=>{i=d.container(),c=d.offset(),a=!0}))),f&&!t&&B(i)&&c===i.data.length&&sf(e,l,t,!1,i).each(d=>{i=d.container(),c=d.offset(),a=!0}),a&&i?m.some(N(i,c)):m.none()},Yi=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=N.fromRangeStart(t);return Kb(e,n,!0,s).each(r=>{(!n||!N.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||Kb(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),nf(t,s)?m.none():m.some(s)},Xi=(e,t)=>e.splitText(t),Zi=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;if(t===s&&B(t)){if(n>0&&n<t.data.length)if(s=Xi(t,n),t=s.previousSibling,o>n){o=o-n;const r=Xi(s,o).previousSibling;t=s=r,o=r.data.length,n=0}else o=0}else if(B(t)&&n>0&&n<t.data.length&&(t=Xi(t,n),n=0),B(s)&&o>0&&o<s.data.length){const r=Xi(s,o).previousSibling;s=r,o=r.data.length}return{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},to=e=>({walk:(r,a)=>aa(e,r,a),split:Zi,expand:(r,a={type:"word"})=>{if(a.type==="word"){const i=Js(e,r,[{inline:"span"}]),c=e.createRng();return c.setStart(i.startContainer,i.startOffset),c.setEnd(i.endContainer,i.endOffset),c}return r},normalize:r=>Yi(e,r).fold(Le,a=>(r.setStart(a.startContainer,a.startOffset),r.setEnd(a.endContainer,a.endOffset),!0))});to.compareRanges=nf,to.getCaretRangeFromPoint=Vb,to.getSelectedNode=Ri,to.getNode=fs;const T1=((e,t)=>{const n=(i,c)=>{if(!mn(c)&&!c.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+c);const l=i.dom;Tr(l)&&(l.style[e]=c+"px")},s=i=>{const c=t(i);if(c<=0||c===null){const l=Nn(i,e);return parseFloat(l)||0}return c},o=s,r=(i,c)=>Rt(c,(l,u)=>{const f=Nn(i,u),d=f===void 0?0:parseInt(f,10);return isNaN(d)?l:l+d},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(i,c,l)=>{const u=r(i,l);return c>u?c-u:0}}})("height",e=>{const t=e.dom;return No(e)?t.getBoundingClientRect().height:t.offsetHeight}),R1=e=>T1.get(e),Gb=()=>C.fromDom(document),Yb=(e,t)=>e.view(t).fold(V([]),s=>{const o=e.owner(s),r=Yb(e,o);return[s].concat(r)}),P1=(e,t)=>{const n=t.owner(e);return Yb(t,n)};var D1=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?m.none():m.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(C.fromDom)},owner:e=>jn(e)});const O1=e=>{const t=Gb(),n=Fl(t),s=P1(e,D1),o=$l(e),r=mr(s,(a,i)=>{const c=$l(i);return{left:a.left+c.left,top:a.top+c.top}},{left:0,top:0});return To(r.left+o.left+n.left,r.top+o.top+n.top)},of=e=>pe(e)==="textarea",B1=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),I1=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},L1=(e,t)=>{const n=at(e);if(n.length===0||of(e))return{element:e,offset:t};if(t<n.length&&!of(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return of(s)?{element:e,offset:t}:pe(s)==="img"?{element:s,offset:1}:jt(s)?{element:s,offset:bi(s).length}:{element:s,offset:at(s).length}}},Xb=(e,t)=>{const n=sN(e),s=R1(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},$1=(e,t)=>{const n=L1(e,t),s=C.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Ze+"</span>");return Ot(n.element,s),Xb(s,()=>Pe(s))},F1=e=>Xb(C.fromDom(e),le),Zb=(e,t,n,s)=>{U1(e,(o,r)=>M1(e,t,n,s),n)},Qb=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(B1(e,r))return;const a=Fl(t).top;n(e,t,a,s,o),I1(e,r)},M1=(e,t,n,s)=>{const o=C.fromDom(e.getBody()),r=C.fromDom(e.getDoc());qx(o);const a=$1(C.fromDom(n.startContainer),n.startOffset);Qb(e,r,t,a,s),a.cleanup()},Jb=(e,t,n,s)=>{const o=C.fromDom(e.getDoc());Qb(e,o,n,F1(t),s)},U1=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,a=n.endOffset;t(C.fromDom(s),C.fromDom(r));const i=e.dom.createRng();i.setStart(s,o),i.setEnd(r,a),e.selection.setRng(n)},rf=(e,t,n,s,o)=>{const r=t.pos;if(s)Gg(r.left,r.top,o);else{const a=r.top-n+t.height;Gg(-e.getBody().getBoundingClientRect().left,a,o)}},eC=(e,t,n,s,o,r)=>{const a=s+n,i=o.pos.top,c=o.bottom,l=c-i>=s;i<n?rf(e,o,s,r!==!1,t):i>a?rf(e,o,s,l?r!==!1:r===!0,t):c>a&&!l&&rf(e,o,s,r===!0,t)},tC=(e,t,n,s,o)=>{const r=_r(t).dom.innerHeight;eC(e,t,n,r,s,o)},nC=(e,t,n,s,o)=>{const r=_r(t).dom.innerHeight;eC(e,t,n,r,s,o);const a=O1(s.element),i=Zg(window);a.top<i.y?Yg(s.element,o!==!1):a.top>i.bottom&&Yg(s.element,o===!0)},z1=(e,t,n)=>Zb(e,tC,t,n),H1=(e,t,n)=>Jb(e,t,tC,n),W1=(e,t,n)=>Zb(e,nC,t,n),V1=(e,t,n)=>Jb(e,t,nC,n),j1=(e,t,n)=>{(e.inline?H1:V1)(e,t,n)},la=(e,t,n)=>{(e.inline?z1:W1)(e,t,n)},sC=(e,t=!1)=>e.dom.focus({preventScroll:t}),oC=e=>{const t=os(e).dom;return e.dom===t.activeElement},af=(e=Gb())=>m.from(e.dom.activeElement).map(C.fromDom),q1=e=>af(os(e)).filter(t=>e.dom.contains(t.dom)),rC=(e,t)=>{const n=jt(t)?bi(t).length:at(t).length+1;return e>n?n:e<0?0:e},K1=e=>jo.range(e.start,rC(e.soffset,e.start),e.finish,rC(e.foffset,e.finish)),aC=(e,t)=>!gi(t.dom)&&(Vn(e,t)||ye(e,t)),iC=e=>t=>aC(e,t.start)&&aC(e,t.finish),G1=e=>e.inline||be.browser.isFirefox(),Y1=e=>jo.range(C.fromDom(e.startContainer),e.startOffset,C.fromDom(e.endContainer),e.endOffset),X1=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?m.none():m.from(t.getRangeAt(0))).map(Y1)},Z1=e=>{const t=_r(e);return X1(t.dom).filter(iC(e))},Q1=(e,t)=>m.from(t).filter(iC(e)).map(K1),J1=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),m.some(t)}catch{return m.none()}},cf=e=>{const t=G1(e)?Z1(C.fromDom(e.getBody())):m.none();e.bookmark=t.isSome()?t:e.bookmark},lf=e=>(e.bookmark?e.bookmark:m.none()).bind(n=>Q1(C.fromDom(e.getBody()),n)).bind(J1),eO=e=>{lf(e).each(t=>e.selection.setRng(t))},cC={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},tO=(e,t)=>(mn(t)||(t=0),setTimeout(e,t)),nO=(e,t)=>(mn(t)||(t=0),setInterval(e,t)),Zt={setEditorTimeout:(e,t,n)=>tO(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=nO(()=>{e.removed?clearInterval(s):t()},n);return s}},sO=e=>e.type==="nodechange"&&e.selectionChange,oO=(e,t)=>{const n=()=>{t.throttle()};Ne.DOM.bind(document,"mouseup",n),e.on("remove",()=>{Ne.DOM.unbind(document,"mouseup",n)})},rO=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},aO=(e,t)=>{rO(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{sO(n)||cf(e)})},iO=e=>{const t=Ti(()=>{cf(e)},0);e.on("init",()=>{e.inline&&oO(e,t),aO(e,t)}),e.on("remove",()=>{t.cancel()})};let qo;const uf=Ne.DOM,cO=e=>q(e)&&cC.isEditorUIElement(e),ff=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},Qi=(e,t)=>{const n=AR(e);return uf.getParent(t,o=>cO(o)||(n?e.dom.is(o,n):!1))!==null},df=e=>{try{const t=os(C.fromDom(e.getElement()));return af(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},lO=(e,t)=>{const n=t.editor;iO(n);const s=(o,r)=>{if(lP(o)&&o.inline!==!0){const a=C.fromDom(o.getContainer());r(a,"tox-edit-focus")}};n.on("focusin",()=>{const o=e.focusedEditor;ff(df(n))&&s(n,_o),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Zt.setEditorTimeout(n,()=>{const o=e.focusedEditor;(!ff(df(n))||o!==n)&&s(n,wr),!Qi(n,df(n))&&o===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),qo||(qo=o=>{const r=e.activeEditor;r&&Fg(o).each(a=>{const i=a;i.ownerDocument===document&&i!==document.body&&!Qi(r,i)&&e.focusedEditor===r&&(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},uf.bind(document,"focusin",qo))},uO=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&qo&&(uf.unbind(document,"focusin",qo),qo=null)},fO=e=>{e.on("AddEditor",j(lO,e)),e.on("RemoveEditor",j(uO,e))},dO=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),mO=e=>e.collapsed?m.from(fs(e.startContainer,e.startOffset)).map(C.fromDom):m.none(),gO=(e,t)=>mO(t).bind(n=>wN(n)?m.some(n):Vn(e,n)?m.none():m.some(e)),lC=(e,t)=>{gO(C.fromDom(e.getBody()),t).bind(n=>pt(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},mf=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},pO=e=>oC(e)||q1(e).isSome(),hO=e=>M(e.iframeElement)&&oC(C.fromDom(e.iframeElement)),bO=e=>{const t=e.getBody();return t&&pO(C.fromDom(t))},CO=e=>{const t=os(C.fromDom(e.getElement()));return af(t).filter(n=>!ff(n.dom)&&Qi(e,n.dom)).isSome()},no=e=>e.inline?bO(e):hO(e),uC=e=>no(e)||CO(e),yO=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable(),M(e.bookmark)&&!no(e)&&lf(e).each(r=>{e.selection.setRng(r),s=r});const o=dO(e,t.getNode());if(o&&e.dom.isChildOf(o,n)){mf(o),lC(e,s),gf(e);return}e.inline||(be.browser.isOpera()||mf(n),e.getWin().focus()),(be.browser.isFirefox()||e.inline)&&(mf(n),lC(e,s)),gf(e)},gf=e=>e.editorManager.setActive(e),vO=(e,t)=>{e.removed||(t?gf(e):yO(e))},fC=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),dC=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return m.from(r).map(C.fromDom).map(i=>!s||!t.collapsed?xo(i,o(i,a)).getOr(i):i).bind(i=>Mt(i)?m.some(i):on(i).filter(Mt)).map(i=>i.dom).getOr(e)},mC=(e,t,n=!1)=>dC(e,t,!0,n,(s,o)=>Math.min(Pl(s),o)),gC=(e,t,n=!1)=>dC(e,t,!1,n,(s,o)=>o>0?o-1:o),pC=(e,t)=>{const n=e;for(;e&&B(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},EO=(e,t)=>{if(!t)return e;let n=t.startContainer,s=t.endContainer;const o=t.startOffset,r=t.endOffset;let a=t.commonAncestorContainer;t.collapsed||(n===s&&r-o<2&&n.hasChildNodes()&&(a=n.childNodes[o]),B(n)&&B(s)&&(n.length===o?n=pC(n.nextSibling,!0):n=n.parentNode,r===0?s=pC(s.previousSibling,!1):s=s.parentNode,n&&n===s&&(a=n)));const i=B(a)?a.parentNode:a;return Yn(i)?i:e},SO=(e,t,n,s)=>{const o=[],r=e.getRoot(),a=e.getParent(n||mC(r,t,t.collapsed),e.isBlock),i=e.getParent(s||gC(r,t,t.collapsed),e.isBlock);if(a&&a!==r&&o.push(a),a&&i&&a!==i){let c;const l=new Xe(a,r);for(;(c=l.next())&&c!==i;)e.isBlock(c)&&o.push(c)}return i&&a!==i&&i!==r&&o.push(i),o},wO=(e,t,n)=>m.from(t).bind(s=>m.from(s.parentNode).map(o=>{const r=e.nodeIndex(s),a=e.createRng();return a.setStart(o,r),a.setEnd(o,r+1),n&&(Hu(e,a,s,!0),Hu(e,a,s,!1)),a})),pf=(e,t)=>he(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),kO=e=>pe(e)==="img"?1:sp(e).fold(()=>at(e).length,t=>t.length),_O=e=>sp(e).filter(t=>t.trim().length!==0||t.indexOf(Je)>-1).isSome(),xO=e=>ii(e)&&Ut(e,"contenteditable")==="false",NO=["img","br"],hC=e=>_O(e)||ke(NO,pe(e))||xO(e),AO=e=>Ug(e,hC),TO=e=>RO(e,hC),RO=(e,t)=>{const n=s=>{const o=at(s);for(let r=o.length-1;r>=0;r--){const a=o[r];if(t(a))return m.some(a);const i=n(a);if(i.isSome())return i}return m.none()};return n(e)},bC="[data-mce-autocompleter]",PO=(e,t)=>{if(CC(C.fromDom(e.getBody())).isNone()){const n=C.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());We(n,C.fromDom(t.extractContents())),t.insertNode(n.dom),on(n).each(s=>s.dom.normalize()),TO(n).map(s=>{e.selection.setCursorLocation(s.dom,kO(s))})}},DO=e=>Bs(e,bC),CC=e=>Ar(e,bC),OO=(e,t)=>CC(t).each(n=>{const s=e.selection.getBookmark();Gn(n),e.selection.moveToBookmark(s)}),BO={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ji=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let a=e.parent;a&&a!==t;a=a.parent)if(r=a[o],r)return r}},IO=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!cs(n))return!1;const s=e.parent;return!(s&&(s.name!=="span"||s.attr("style"))&&/^[ ]+$/.test(n))},yC=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Et{static create(t,n){const s=new Et(t,BO[t]||1);return n&&Ae(n,(o,r)=>{s.attr(r,o)}),s}constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;if(!J(t))return M(t)&&Ae(t,(r,a)=>{s.attr(a,r)}),s;const o=s.attributes;if(o){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new Et(t.name,t.type),s=t.attributes;if(s){const o=[];o.map={};for(let r=0,a=s.length;r<a;r++){const i=s[r];i.name!=="id"&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o&&(o.next=s),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s&&(s.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=Ji(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=Ji(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){var o;const r=this;let a=r.firstChild;if(yC(r))return!1;if(a)do{if(a.type===1){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||yC(a))return!1}if(a.type===8||a.type===3&&!IO(a)||a.type===3&&a.parent&&n[a.parent.name]&&cs((o=a.value)!==null&&o!==void 0?o:"")||s&&s(a))return!1}while(a=Ji(a,r));return!0}walk(t){return Ji(this,null,t)}}const LO=L.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),vC=e=>J(e.nodeValue)&&e.nodeValue.includes(Ze),EC=e=>`${e.length===0?"":`${he(e,t=>`[${t}]`).join(",")},`}[data-mce-bogus="all"]`,$O=(e,t)=>t.querySelectorAll(EC(e)),SC=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>vC(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),wC=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(vC(t)){const n=t.parentNode;return n&&oe(LO,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),FO=e=>SC(e).nextNode()!==null,MO=e=>wC(e).nextNode()!==null,UO=(e,t)=>t.querySelector(EC(e))!==null,zO=(e,t)=>{P($O(e,t),n=>{const s=C.fromDom(n);Ut(s,"data-mce-bogus")==="all"?Pe(s):P(e,o=>{Er(s,o)&&rt(s,o)})})},kC=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},HO=Sn(kC,SC),WO=Sn(kC,wC),_C=(e,t)=>{const n=[{condition:j(UO,t),action:j(zO,t)},{condition:FO,action:HO},{condition:MO,action:WO}];let s=e,o=!1;return P(n,({condition:r,action:a})=>{r(s)&&(o||(s=e.cloneNode(!0),o=!0),a(s))}),s},xC=e=>{const t=mt(e,"[data-mce-bogus]");P(t,n=>{Ut(n,"data-mce-bogus")==="all"?Pe(n):Ms(n)?(Ot(n,C.fromText(Dr)),Pe(n)):Gn(n)})},NC=e=>{const t=mt(e,"input");P(t,n=>{rt(n,"name")})},VO=(e,t)=>{const n=gt(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},jO=(e,t)=>{const n=e.getDoc(),s=os(C.fromDom(e.getBody())),o=C.fromTag("div",n);ot(o,"data-mce-bogus","all"),ui(o,{position:"fixed",left:"-9999999px",top:"0"}),di(o,t.innerHTML),xC(o),NC(o);const r=$x(s);We(r,o);const a=zt(o.dom.innerText);return Pe(o),a},qO=(e,t,n)=>{let s;return t.format==="raw"?s=L.trim(zt(_C(n,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?s=jO(e,n):t.format==="tree"?s=e.serializer.serialize(n,t):s=VO(e,e.serializer.serialize(n,t)),t.format!=="text"&&!Ci(C.fromDom(n))&&J(s)?L.trim(s):s},KO=(e,t)=>m.from(e.getBody()).fold(V(t.format==="tree"?new Et("body",11):""),n=>qO(e,t,n)),AC=L.makeMap,TC=e=>{const t=[];e=e||{};const n=e.indent,s=AC(e.indent_before||""),o=AC(e.indent_after||""),r=Ws.getEncodeFunc(e.entity_encoding||"raw",e.entities),a=e.element_format!=="xhtml";return{start:(i,c,l)=>{if(n&&s[i]&&t.length>0){const u=t[t.length-1];u.length>0&&u!==`
`&&t.push(`
`)}if(t.push("<",i),c)for(let u=0,f=c.length;u<f;u++){const d=c[u];t.push(" ",d.name,'="',r(d.value,!0),'"')}if(!l||a?t[t.length]=">":t[t.length]=" />",l&&n&&o[i]&&t.length>0){const u=t[t.length-1];u.length>0&&u!==`
`&&t.push(`
`)}},end:i=>{let c;t.push("</",i,">"),n&&o[i]&&t.length>0&&(c=t[t.length-1],c.length>0&&c!==`
`&&t.push(`
`))},text:(i,c)=>{i.length>0&&(t[t.length]=c?i:r(i))},cdata:i=>{t.push("<![CDATA[",i,"]]>")},comment:i=>{t.push("<!--",i,"-->")},pi:(i,c)=>{c?t.push("<?",i," ",r(c),"?>"):t.push("<?",i,"?>"),n&&t.push(`
`)},doctype:i=>{t.push("<!DOCTYPE",i,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},ps=(e={},t=ls())=>{const n=TC(e);return e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,a={3:c=>{var l;n.text((l=c.value)!==null&&l!==void 0?l:"",c.raw)},8:c=>{var l;n.comment((l=c.value)!==null&&l!==void 0?l:"")},7:c=>{n.pi(c.name,c.value)},10:c=>{var l;n.doctype((l=c.value)!==null&&l!==void 0?l:"")},4:c=>{var l;n.cdata((l=c.value)!==null&&l!==void 0?l:"")},11:c=>{let l=c;if(l=l.firstChild)do i(l);while(l=l.next)}};n.reset();const i=c=>{var l;const u=a[c.type];if(u)u(c);else{const f=c.name,d=f in t.getVoidElements();let p=c.attributes;if(r&&p&&p.length>1){const h=[];h.map={};const g=t.getElementRule(c.name);if(g){for(let b=0,y=g.attributesOrder.length;b<y;b++){const v=g.attributesOrder[b];if(v in p.map){const E=p.map[v];h.map[v]=E,h.push({name:v,value:E})}}for(let b=0,y=p.length;b<y;b++){const v=p[b].name;if(!(v in h.map)){const E=p.map[v];h.map[v]=E,h.push({name:v,value:E})}}p=h}}if(n.start(f,p,d),Us(f))J(c.value)&&n.text(c.value,!0),n.end(f);else if(!d){let h=c.firstChild;if(h){(f==="pre"||f==="textarea")&&h.type===3&&((l=h.value)===null||l===void 0?void 0:l[0])===`
`&&n.text(`
`,!0);do i(h);while(h=h.next)}n.end(f)}}};return o.type===1&&!e.inner?i(o):o.type===3?a[3](o):a[11](o),n.getContent()}}},RC=new Set;P(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{RC.add(t)});const PC=["font","text-decoration","text-emphasis"],hf=(e,t)=>Dt(e.parseStyle(e.getAttrib(t,"style"))),GO=e=>RC.has(e),YO=(e,t)=>Un(hf(e,t),n=>!GO(n)),XO=e=>se(e,t=>Fe(PC,n=>st(t,n))),ZO=(e,t,n)=>{const s=hf(e,t),o=hf(e,n),r=a=>{var i,c;const l=(i=e.getStyle(t,a))!==null&&i!==void 0?i:"",u=(c=e.getStyle(n,a))!==null&&c!==void 0?c:"";return wn(l)&&wn(u)&&l!==u};return Fe(s,a=>{const i=c=>Fe(c,l=>l===a);if(!i(o)&&i(PC)){const c=XO(o);return Fe(c,r)}else return r(a)})},DC=(e,t,n)=>m.from(n.container()).filter(B).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),bf=j(DC,!0,zo),Cf=j(DC,!1,zo),QO=e=>{const t=e.container();return B(t)&&(t.data.length===0||yi(t.data)&&ia.isBookmarkNode(t.parentNode))},hs=(e,t)=>n=>Pu(e?0:-1,n).filter(t).isSome(),OC=e=>np(e)&&Nn(C.fromDom(e),"display")==="block",BC=e=>De(e)&&!cN(e),JO=hs(!0,OC),eB=hs(!1,OC),ua=hs(!0,An),fa=hs(!1,An),IC=hs(!0,Xn),LC=hs(!1,Xn),bs=hs(!0,BC),Cs=hs(!1,BC),tB=e=>e.slice(0,-1),nB=(e,t,n)=>Vn(t,e)?tB(Bg(e,s=>n(s)||ye(s,t))):[],$C=(e,t)=>nB(e,t,Le),Jn=(e,t)=>[e].concat($C(e,t)),yf=(e,t,n)=>ob(e,t,n,QO),sB=e=>t=>e.isBlock(pe(t)),FC=(e,t,n)=>Ye(Jn(C.fromDom(t.container()),e),sB(n)),MC=(e,t,n,s)=>yf(e,t.dom,n).forall(o=>FC(t,n,s).fold(()=>!Rn(o,n,t.dom),r=>!Rn(o,n,t.dom)&&Vn(r,C.fromDom(o.container())))),UC=(e,t,n,s)=>FC(t,n,s).fold(()=>yf(e,t.dom,n).forall(o=>!Rn(o,n,t.dom)),o=>yf(e,o.dom,n).isNone()),vf=j(UC,!1),zC=j(UC,!0),oB=j(MC,!1),rB=j(MC,!0),aB=e=>$i(e).exists(Ms),ec=(e,t,n,s)=>{const o=se(Jn(C.fromDom(n.container()),t),a=>s.isBlock(pe(a))),r=Pt(o).getOr(t);return Kt(e,r.dom,n).filter(aB)},Ef=(e,t,n)=>$i(t).exists(Ms)||ec(!0,e,t,n).isSome(),Sf=(e,t,n)=>FP(t).exists(Ms)||ec(!1,e,t,n).isSome(),iB=j(ec,!1),cB=j(ec,!0),HC=e=>N.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),WC=(e,t,n)=>{const s=se(Jn(C.fromDom(t.container()),e),o=>n.isBlock(pe(o)));return Pt(s).getOr(e)},VC=(e,t,n)=>HC(t)?Cf(t):Cf(t)||Bt(WC(e,t,n).dom,t).exists(Cf),jC=(e,t,n)=>HC(t)?bf(t):bf(t)||Nt(WC(e,t,n).dom,t).exists(bf),lB=e=>ke(["pre","pre-wrap"],e),wf=e=>$i(e).bind(t=>Os(t,Mt)).exists(t=>lB(Nn(t,"white-space"))),uB=(e,t)=>Bt(e.dom,t).isNone(),fB=(e,t)=>Nt(e.dom,t).isNone(),dB=(e,t,n)=>uB(e,t)||fB(e,t)||vf(e,t,n)||zC(e,t,n)||Sf(e,t,n)||Ef(e,t,n),mB=e=>M(e)&&De(e)&&jh(e),qC=(e,t)=>n=>mB(new Xe(n,e)[t]()),gB=(e,t)=>{const n=Nt(e.dom,t).getOr(t),s=qC(e.dom,"next");return t.isAtEnd()&&(s(t.container())||s(n.container()))},pB=(e,t)=>{const n=Bt(e.dom,t).getOr(t),s=qC(e.dom,"prev");return t.isAtStart()&&(s(t.container())||s(n.container()))},KC=(e,t,n)=>wf(t)?!1:dB(e,t,n)||VC(e,t,n)||jC(e,t,n),da=(e,t,n)=>wf(t)?!1:vf(e,t,n)||oB(e,t,n)||Sf(e,t,n)||VC(e,t,n)||pB(e,t),hB=e=>{const t=e.container(),n=e.offset();return B(t)&&n<t.data.length?N(t,n+1):e},ma=(e,t,n)=>wf(t)?!1:zC(e,t,n)||rB(e,t,n)||Ef(e,t,n)||jC(e,t,n)||gB(e,t),kf=(e,t,n)=>da(e,t,n)||ma(e,hB(t),n),GC=(e,t)=>zi(e.charAt(t)),YC=(e,t)=>zo(e.charAt(t)),bB=e=>{const t=e.container();return B(t)&&ft(t.data,Je)},CB=e=>{const t=e.split("");return he(t,(n,s)=>zi(n)&&s>0&&s<t.length-1&&Fu(t[s-1])&&Fu(t[s+1])?" ":n).join("")},XC=(e,t,n,s)=>{const o=t.data,r=N(t,0);return!n&&GC(o,0)&&!kf(e,r,s)?(t.data=" "+o.slice(1),!0):n&&YC(o,0)&&da(e,r,s)?(t.data=Je+o.slice(1),!0):!1},yB=e=>{const t=e.data,n=CB(t);return n!==t?(e.data=n,!0):!1},ZC=(e,t,n,s)=>{const o=t.data,r=N(t,o.length-1);return!n&&GC(o,o.length-1)&&!kf(e,r,s)?(t.data=o.slice(0,-1)+" ",!0):n&&YC(o,o.length-1)&&ma(e,r,s)?(t.data=o.slice(0,-1)+Je,!0):!1},vB=(e,t,n)=>{const s=t.container();if(!B(s))return m.none();if(bB(t)){const o=XC(e,s,!1,n)||yB(s)||ZC(e,s,!1,n);return ko(o,t)}else if(kf(e,t,n)){const o=XC(e,s,!0,n)||ZC(e,s,!0,n);return ko(o,t)}else return m.none()},EB=e=>{const t=C.fromDom(e.getBody());e.selection.isCollapsed()&&vB(t,N.fromRangeStart(e.selection.getRng()),e.schema).each(n=>{e.selection.setRng(n.toRange())})},QC=(e,t,n,s)=>{if(n===0)return;const o=C.fromDom(e),r=qn(o,l=>s.isBlock(pe(l))).getOr(o),a=e.data.slice(t,t+n),i=t+n>=e.data.length&&ma(r,N(e,e.data.length),s),c=t===0&&da(r,N(e,0),s);e.replaceData(t,n,fp(a,4,c,i))},tc=(e,t,n)=>{const s=e.data.slice(t),o=s.length-B_(s).length;QC(e,t,o,n)},_f=(e,t,n)=>{const s=e.data.slice(0,t),o=s.length-ug(s).length;QC(e,t-o,o,n)},xf=(e,t,n,s,o=!0)=>{const r=ug(e.data).length,a=o?e:t,i=o?t:e;return o?a.appendData(i.data):a.insertData(0,i.data),Pe(C.fromDom(i)),s&&tc(a,r,n),a},SB=(e,t)=>{const n=e.container(),s=e.offset();return!N.isTextPosition(e)&&n===t.parentNode&&s>N.before(t).offset()},wB=(e,t)=>SB(t,e)?N(t.container(),t.offset()-1):t,kB=e=>B(e)?N(e,0):N.before(e),_B=e=>B(e)?N(e,e.data.length):N.after(e),JC=e=>an(e.previousSibling)?m.some(_B(e.previousSibling)):e.previousSibling?cn(e.previousSibling):m.none(),ey=e=>an(e.nextSibling)?m.some(kB(e.nextSibling)):e.nextSibling?pt(e.nextSibling):m.none(),xB=(e,t)=>m.from(t.previousSibling?t.previousSibling:t.parentNode).bind(n=>Bt(e,N.before(n))).orThunk(()=>Nt(e,N.after(t))),NB=(e,t)=>Nt(e,N.after(t)).orThunk(()=>Bt(e,N.before(t))),AB=(e,t)=>JC(t).orThunk(()=>ey(t)).orThunk(()=>xB(e,t)),TB=(e,t)=>ey(t).orThunk(()=>JC(t)).orThunk(()=>NB(e,t)),RB=(e,t,n)=>e?TB(t,n):AB(t,n),PB=(e,t,n)=>RB(e,t,n).map(j(wB,n)),ty=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},DB=e=>t=>t.dom===e,OB=(e,t)=>t&&oe(e.schema.getBlockElements(),pe(t)),BB=(e,t)=>{if(Ue(e)){const n=C.fromHtml('<br data-mce-bogus="1">');return t?P(at(e),s=>{Zu(s)||Pe(s)}):Ao(e),We(e,n),m.some(N.before(n.dom))}else return m.none()},IB=(e,t,n,s)=>{const o=Ds(e).filter(jt),r=xr(e).filter(jt);return Pe(e),fx(o,r,t,(a,i,c)=>{const l=a.dom,u=i.dom,f=l.data.length;return xf(l,u,n,s),c.container()===u?N(l,f):c}).orThunk(()=>(s&&(o.each(a=>_f(a.dom,a.dom.length,n)),r.each(a=>tc(a.dom,0,n))),t))},LB=(e,t)=>oe(e.schema.getTextInlineElements(),pe(t)),so=(e,t,n,s=!0,o=!1)=>{const r=PB(t,e.getBody(),n.dom),a=qn(n,j(OB,e),DB(e.getBody())),i=IB(n,r,e.schema,LB(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):a.bind(c=>BB(c,o)).fold(()=>{s&&ty(e,t,i)},c=>{s&&ty(e,t,m.some(c))})},$B=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,FB=e=>$B.test(e),oo=(e,t)=>gn(C.fromDom(t),CR(e))&&!zs(e.schema,t)&&e.dom.isEditable(t),ny=e=>{var t;return Ne.DOM.getStyle(e,"direction",!0)==="rtl"||FB((t=e.textContent)!==null&&t!==void 0?t:"")},MB=(e,t,n)=>se(Ne.DOM.getParents(n.container(),"*",t),e),ys=(e,t,n)=>{const s=MB(e,t,n);return m.from(s[s.length-1])},UB=(e,t,n)=>{const s=ms(t,e),o=ms(n,e);return M(s)&&s===o},zB=e=>jl(e)||ql(e),Qt=(e,t)=>{const n=t.container(),s=t.offset();return e?is(n)?B(n.nextSibling)?N(n.nextSibling,0):N.after(n):jl(t)?N(n,s+1):t:is(n)?B(n.previousSibling)?N(n.previousSibling,n.previousSibling.data.length):N.before(n):ql(t)?N(n,s-1):t},sy=j(Qt,!0),oy=j(Qt,!1),ry=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},HB=e=>{e.execCommand("delete")},Nf=e=>ry(e,"Delete"),WB=e=>ry(e,"ForwardDelete"),VB=e=>t=>wo(on(t),e,ye),jB=e=>op(e)||Or(e),nc=(e,t)=>Vn(e,t)?Os(t,jB,VB(e)):m.none(),Af=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},ay=(e,t,n)=>dt(pt(n),cn(n),(s,o)=>{const r=Qt(!0,s),a=Qt(!1,o),i=Qt(!1,t);return e?Nt(n,i).exists(c=>c.isEqual(a)&&t.isEqual(r)):Bt(n,i).exists(c=>c.isEqual(r)&&t.isEqual(a))}).getOr(!0),iy=e=>(yx(e)?Ds(e):Rl(e)).bind(iy).orThunk(()=>m.some(e)),cy=(e,t,n,s=!0)=>{var o;t.deleteContents();const r=iy(n).getOr(n),a=C.fromDom((o=e.dom.getParent(r.dom,e.dom.isBlock))!==null&&o!==void 0?o:n.dom);if(a.dom===e.getBody()?Af(e,s):Ue(a)&&(as(a),s&&e.selection.setCursorLocation(a.dom,0)),!ye(n,a)){const i=wo(on(a),n)?[]:Ox(a);P(i.concat(at(n)),c=>{!ye(c,a)&&!Vn(c,a)&&Ue(c)&&Pe(c)})}},qB=(e,t,n)=>qn(e,t,n).isSome(),KB=(e,t)=>zx(e,t).isSome(),ly=(e,t)=>Ug(e,t).isSome(),GB=e=>t=>ye(e,t),Tf=e=>mt(e,"td,th"),uy=(e,t)=>oa(C.fromDom(e),t),YB=e=>dt(e.startTable,e.endTable,(t,n)=>{const s=ly(t,r=>ye(r,n)),o=ly(n,r=>ye(r,t));return!s&&!o?e:{...e,startTable:s?m.none():e.startTable,endTable:o?m.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),XB=e=>YB(e),ZB=(e,t)=>{const n=uy(e.startContainer,t),s=uy(e.endContainer,t),o=n.isSome(),r=s.isSome(),a=dt(n,s,ye).getOr(!1);return XB({startTable:n,endTable:s,isStartInTable:o,isEndInTable:r,isSameTable:a,isMultiTable:!a&&o&&r})},Rf=(e,t)=>({start:e,end:t}),QB=(e,t,n)=>({rng:e,table:t,cells:n}),ga=Tn.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),sc=(e,t)=>Bs(C.fromDom(e),"td,th",t),fy=e=>!ye(e.start,e.end),dy=(e,t)=>oa(e.start,t).bind(n=>oa(e.end,t).bind(s=>ko(ye(n,s),n))),JB=(e,t)=>!fy(e)&&dy(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),eI=(e,t)=>{const n=sc(e.startContainer,t),s=sc(e.endContainer,t);return dt(n,s,Rf)},tI=e=>t=>oa(t,e).bind(n=>As(Tf(n)).map(s=>Rf(t,s))),nI=e=>t=>oa(t,e).bind(n=>Pt(Tf(n)).map(s=>Rf(s,t))),Pf=e=>t=>dy(t,e).map(n=>QB(t,n,Tf(n))),my=(e,t,n,s)=>{if(n.collapsed||!e.forall(fy))return m.none();if(t.isSameTable){const o=e.bind(Pf(s));return m.some({start:o,end:o})}else{const o=sc(n.startContainer,s),r=sc(n.endContainer,s),a=o.bind(tI(s)).bind(Pf(s)),i=r.bind(nI(s)).bind(Pf(s));return m.some({start:a,end:i})}},gy=(e,t)=>gr(e,n=>ye(n,t)),Df=e=>dt(gy(e.cells,e.rng.start),gy(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),sI=(e,t,n)=>e.exists(s=>JB(s,n)&&zu(s.start,t)),py=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},oI=(e,t,n,s)=>my(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,a=Df(o).getOr([]);if(r&&o.cells.length===a.length)return m.some(ga.fullTable(o.table));if(a.length>0){if(r)return m.some(ga.partialTable(a,m.none()));{const i=py(n,t);return m.some(ga.partialTable(a,m.some({...t,rng:i})))}}else return m.none()}),rI=(e,t,n,s)=>my(e,t,n,s).bind(({start:o,end:r})=>{const a=o.bind(Df).getOr([]),i=r.bind(Df).getOr([]);if(a.length>0&&i.length>0){const c=py(n,t);return m.some(ga.multiTable(a,i,c))}else return m.none()}),aI=(e,t)=>{const n=GB(e),s=eI(t,n),o=ZB(t,n);return sI(s,t,n)?s.map(r=>ga.singleCellTable(t,r.start)):o.isMultiTable?rI(s,o,t,n):oI(s,o,t,n)},hy=e=>P(e,t=>{rt(t,"contenteditable"),as(t)}),iI=(e,t)=>m.from(e.dom.getParent(t,e.dom.isBlock)).map(C.fromDom),cI=(e,t,n)=>{n.each(s=>{t?Pe(s):(as(s),e.selection.setCursorLocation(s.dom,0))})},Of=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Bf(e,o,t,!1).each(r=>r())},by=e=>{const t=Ho(e),n=C.fromDom(e.selection.getNode());hi(n.dom)&&Ue(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&Fe(t,s=>ye(s,n))&&ot(n,"data-mce-selected","1")},Cy=(e,t,n)=>m.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:a})=>{const i=iI(e,a?r.endContainer:r.startContainer);r.deleteContents(),cI(e,a,i.filter(Ue));const c=a?t[0]:t[t.length-1];return Of(e,c,s,a),Ue(c)?m.none():m.some(a?t.slice(1):t.slice(0,-1))}).getOr(t);hy(o),by(e)}),lI=(e,t,n,s)=>m.some(()=>{const o=e.selection.getRng(),r=t[0],a=n[n.length-1];Of(e,r,o,!0),Of(e,a,o,!1);const i=Ue(r)?t:t.slice(1),c=Ue(a)?n:n.slice(0,-1);hy(i.concat(c)),s.deleteContents(),by(e)}),Bf=(e,t,n,s=!0)=>m.some(()=>{cy(e,t,n,s)}),uI=(e,t)=>m.some(()=>so(e,!1,t)),fI=(e,t,n)=>aI(t,n).bind(s=>s.fold(j(Bf,e),j(uI,e),j(Cy,e),j(lI,e))),dI=(e,t)=>oc(e,t),mI=(e,t,n,s)=>If(t,s).fold(()=>fI(e,t,n),o=>dI(e,o)),gI=(e,t,n)=>{const s=C.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?Cy(e,n,m.none()):mI(e,s,o,t)},yy=(e,t)=>Ye(Jn(t,e),Br),If=(e,t)=>Ye(Jn(t,e),ci("caption")),pI=(e,t,n,s,o)=>Mo(n,e.getBody(),o).bind(r=>yy(t,C.fromDom(r.getNode())).bind(a=>ye(a,s)?m.none():m.some(le))),oc=(e,t)=>m.some(()=>{as(t),e.selection.setCursorLocation(t.dom,0)}),hI=(e,t,n,s)=>pt(e.dom).bind(o=>cn(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),bI=(e,t)=>oc(e,t),CI=(e,t,n)=>If(e,C.fromDom(n.getNode())).fold(()=>m.some(le),s=>ko(!ye(s,t),le)),yI=(e,t,n,s,o)=>Mo(n,e.getBody(),o).fold(()=>m.some(le),r=>hI(s,n,o,r)?bI(e,s):CI(t,s,r)),vI=(e,t,n,s)=>{const o=N.fromRangeStart(e.selection.getRng());return yy(n,s).bind(r=>Ue(r)?oc(e,r):pI(e,n,t,r,o))},EI=(e,t,n,s)=>{const o=N.fromRangeStart(e.selection.getRng());return Ue(s)?oc(e,s):yI(e,n,t,s,o)},vy=(e,t)=>e?IC(t):LC(t),SI=(e,t)=>{const n=N.fromRangeStart(e.selection.getRng());return vy(t,n)||Kt(t,e.getBody(),n).exists(s=>vy(t,s))},wI=(e,t,n)=>{const s=C.fromDom(e.getBody());return If(s,n).fold(()=>vI(e,t,s,n).orThunk(()=>ko(SI(e,t),le)),o=>EI(e,t,s,o))},Lf=(e,t)=>{const n=C.fromDom(e.selection.getStart(!0)),s=Ho(e);return e.selection.isCollapsed()&&s.length===0?wI(e,t,n):gI(e,n,s)},ro=(e,t)=>{let n=t;for(;n&&n!==e;){if(rn(n)||De(n))return n;n=n.parentNode}return null},kI=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],_I=L.each,$f=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),s=(r,a)=>{if(r.nodeName!==a.nodeName||r.nodeType!==a.nodeType)return!1;const i=l=>{const u={};return _I(t.getAttribs(l),f=>{const d=f.nodeName.toLowerCase();d!=="style"&&!o(d)&&(u[d]=t.getAttrib(l,d))}),u},c=(l,u)=>{for(const f in l)if(oe(l,f)){const d=u[f];if(ct(d)||l[f]!==d)return!1;delete u[f]}for(const f in u)if(oe(u,f))return!1;return!0};return q(r)&&q(a)&&(!c(i(r),i(a))||!c(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(a,"style"))))?!1:!Yt(r)&&!Yt(a)},o=r=>Fe(kI,a=>st(r,a))||n.has(r);return{compare:s,isAttributeInternal:o}},Ey=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),xI=e=>e.name==="summary",NI=(e,t)=>{let n=e;for(;n=n.walk();)t(n)},Sy=(e,t,n,s)=>{const o=n.name;for(let r=0,a=e.length;r<a;r++){const i=e[r];if(i.name===o){const c=s.nodes[o];c?c.nodes.push(n):s.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let r=0,a=t.length;r<a;r++){const i=t[r],c=i.name;if(c in n.attributes.map){const l=s.attributes[c];l?l.nodes.push(n):s.attributes[c]={filter:i,nodes:[n]}}}},AI=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&NI(n,o=>{Sy(e,t,o,s)}),s},wy=(e,t)=>{const n=(s,o)=>{Ae(s,r=>{const a=Ft(r.nodes);P(r.filter.callbacks,i=>{for(let c=a.length-1;c>=0;c--){const l=a[c];(!(o?l.attr(r.filter.name)!==void 0:l.name===r.filter.name)||qe(l.parent))&&a.splice(c,1)}a.length>0&&i(a,r.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},ky=(e,t,n,s={})=>{const o=AI(e,t,n);wy(o,s)},Ff=(e,t,n,s)=>{if((e.pad_empty_with_br||t.insert)&&n(s)){const r=new Et("br",1);t.insert&&r.attr("data-mce-bogus","1"),s.empty().append(r)}else s.empty().append(new Et("#text",3)).value=Je},TI=e=>{var t;return _y(e,"#text")&&((t=e==null?void 0:e.firstChild)===null||t===void 0?void 0:t.value)===Je},_y=(e,t)=>{const n=e==null?void 0:e.firstChild;return M(n)&&n===e.lastChild&&n.name===t},RI=(e,t)=>{const n=e.getElementRule(t.name);return(n==null?void 0:n.paddEmpty)===!0},pa=(e,t,n,s)=>s.isEmpty(t,n,o=>RI(e,o)),PI=(e,t)=>M(e)&&(t(e)||e.name==="br"),DI=e=>{let t;for(let n=e;n;n=n.parent){const s=n.attr("contenteditable");if(s==="false")break;s==="true"&&(t=n)}return m.from(t)},Mf=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)n&&!t.isValidChild(n.name,o.name)&&Mf(o,t,n);e.unwrap()}},Uf=(e,t,n,s=le)=>{const o=t.getTextBlockElements(),r=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=L.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),c=new Set,l=u=>u!==n&&!i[u.name];for(let u=0;u<e.length;u++){const f=e[u];let d,p,h;if(!f.parent||c.has(f))continue;if(o[f.name]&&f.parent.name==="li"){let b=f.next;for(;b&&o[b.name];){b.name="li",c.add(b),f.parent.insert(b,f.parent);b=b.next}f.unwrap();continue}const g=[f];for(d=f.parent;d&&!t.isValidChild(d.name,f.name)&&l(d);d=d.parent)g.push(d);if(d&&g.length>1)if(zf(t,f,d))Mf(f,t);else{g.reverse(),p=g[0].clone(),s(p);let b=p;for(let y=0;y<g.length-1;y++){t.isValidChild(b.name,g[y].name)&&y>0?(h=g[y].clone(),s(h),b.append(h)):h=b;for(let v=g[y].firstChild;v&&v!==g[y+1];){const E=v.next;h.append(v),v=E}b=h}pa(t,r,a,p)?d.insert(f,g[0],!0):(d.insert(p,g[0],!0),d.insert(f,p)),d=g[0],(pa(t,r,a,d)||_y(d,"br"))&&d.empty().remove()}else if(f.parent){if(f.name==="li"){let b=f.prev;if(b&&(b.name==="ul"||b.name==="ol")){b.append(f);continue}if(b=f.next,b&&(b.name==="ul"||b.name==="ol")&&b.firstChild){b.insert(f,b.firstChild,!0);continue}const y=new Et("ul",1);s(y),f.wrap(y);continue}if(t.isValidChild(f.parent.name,"div")&&t.isValidChild("div",f.name)){const b=new Et("div",1);s(b),f.wrap(b)}else Mf(f,t)}}},OI=(e,t)=>{let n=e;for(;n;){if(n.name===t)return!0;n=n.parent}return!1},zf=(e,t,n=t.parent)=>n?e.children[t.name]&&!e.isValidChild(n.name,t.name)||t.name==="a"&&OI(n,"a")?!0:xI(n)&&Ey(t)?!((n==null?void 0:n.firstChild)===t&&(n==null?void 0:n.lastChild)===t):!1:!1,BI=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},II=e=>{const t=N.fromRangeStart(e),n=N.fromRangeEnd(e),s=e.commonAncestorContainer;return Kt(!1,s,n).map(o=>!Rn(t,n,s)&&Rn(t,o,s)?BI(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},Hf=e=>e.collapsed?e:II(e),LI=e=>M(e.firstChild)&&e.firstChild===e.lastChild,$I=e=>e.name==="br"||e.value===Je,FI=(e,t)=>e.getBlockElements()[t.name]&&LI(t)&&$I(t.firstChild),MI=(e,t)=>{const n=e.getNonEmptyElements();return M(t)&&(t.isEmpty(n)||FI(e,t))},UI=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),MI(e,s)&&(s=s==null?void 0:s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},zI=e=>{var t,n;const s=e.firstChild,o=e.lastChild;return s&&s.nodeName==="META"&&((t=s.parentNode)===null||t===void 0||t.removeChild(s)),o&&o.id==="mce_marker"&&((n=o.parentNode)===null||n===void 0||n.removeChild(o)),e},HI=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return zI(o)},WI=e=>{var t;return se((t=e==null?void 0:e.childNodes)!==null&&t!==void 0?t:[],n=>n.nodeName==="LI")},VI=e=>e.data===Je||$e(e),jI=e=>M(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&VI(e.firstChild),qI=e=>!e.firstChild||jI(e),KI=e=>e.length>0&&qI(e[e.length-1])?e.slice(0,-1):e,Wf=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},GI=(e,t)=>!!Wf(e,t),YI=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},XI=(e,t)=>{const n=N.before(e),o=Dn(t).next(n);return o?o.toRange():null},xy=(e,t)=>{const n=N.after(e),o=Dn(t).prev(n);return o?o.toRange():null},ZI=(e,t,n,s)=>{const o=YI(e,s),r=e.parentNode;return r&&(r.insertBefore(o[0],e),L.each(t,a=>{r.insertBefore(a,e)}),r.insertBefore(o[1],e),r.removeChild(e)),xy(t[t.length-1],n)},QI=(e,t,n)=>{const s=e.parentNode;return s&&L.each(t,o=>{s.insertBefore(o,e)}),XI(e,n)},JI=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),xy(t[0],n)),eL=(e,t,n,s)=>{const o=HI(t,e,s),r=Wf(t,n.startContainer),a=KI(WI(o.firstChild)),i=1,c=2,l=t.getRoot(),u=f=>{const d=N.fromRangeStart(n),p=Dn(t.getRoot()),h=f===i?p.prev(d):p.next(d),g=h==null?void 0:h.getNode();return g?Wf(t,g)!==r:!0};return r?u(i)?QI(r,a,l):u(c)?JI(r,a,l,t):ZI(r,a,l,n):null},tL=["pre"],nL=(e,t,n,s)=>{var o;const r=t.firstChild,a=t.lastChild,i=a.attr("data-mce-type")==="bookmark"?a.prev:a,c=r===i,l=ke(tL,r.name);if(c&&l){const u=r.attr("contenteditable")!=="false",f=((o=e.getParent(n,e.isBlock))===null||o===void 0?void 0:o.nodeName.toLowerCase())===r.name,d=m.from(ro(s,n)).forall(rn);return u&&f&&d}else return!1},Vf=hi,sL=(e,t,n)=>{if(M(n)){const s=e.getParent(t.endContainer,Vf);return n===s&&zu(C.fromDom(n),t)}else return!1},oL=(e,t,n)=>{var s;if(n.getAttribute("data-mce-bogus")==="all")(s=n.parentNode)===null||s===void 0||s.insertBefore(e.dom.createFragment(t),n);else{const o=n.firstChild,r=n.lastChild;!o||o===r&&o.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},rL=(e,t,n)=>{m.from(e.getParent(t,"td,th")).map(C.fromDom).each(s=>xN(s,n))},aL=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=$f(e);L.each(s.select("*[data-mce-fragment]"),a=>{if(M(n[a.nodeName.toLowerCase()])&&YO(s,a)){for(let c=a.parentElement;M(c)&&c!==o&&!ZO(s,a,c);c=c.parentElement)if(r.compare(c,a)){s.remove(a,!0);break}}})}},iL=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},cL=e=>{L.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},lL=e=>!!e.getAttribute("data-mce-fragment"),uL=(e,t)=>M(t)&&!e.schema.getVoidElements()[t.nodeName],fL=(e,t)=>{var n,s,o;let r;const a=e.dom,i=e.selection;if(!t)return;i.scrollIntoView(t);const c=ro(e.getBody(),t);if(c&&a.getContentEditable(c)==="false"){a.remove(t),i.select(c);return}let l=a.createRng();const u=t.previousSibling;if(B(u)){l.setStart(u,(s=(n=u.nodeValue)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0);const p=t.nextSibling;B(p)&&(u.appendData(p.data),(o=p.parentNode)===null||o===void 0||o.removeChild(p))}else l.setStartBefore(t),l.setEndBefore(t);const f=p=>{let h=N.fromRangeStart(p);return h=Dn(e.getBody()).next(h),h==null?void 0:h.toRange()},d=a.getParent(t,a.isBlock);if(a.remove(t),d&&a.isEmpty(d)){const p=Vf(d);Ao(C.fromDom(d)),l.setStart(d,0),l.setEnd(d,0),!p&&!lL(d)&&(r=f(l))?(l=r,a.remove(d)):a.add(d,a.create("br",p?{}:{"data-mce-bogus":"1"}))}i.setRng(l)},dL=e=>{const t=e.dom,n=Hf(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,Vf);sL(t,n,s)?Bf(e,n,C.fromDom(s)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&B(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)},mL=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return m.some(t);return m.none()},gL=(e,t,n)=>{var s;return Fe(n.children(),Ey)&&((s=e.getParent(t,e.isBlock))===null||s===void 0?void 0:s.nodeName)==="SUMMARY"},pL=(e,t,n)=>{var s,o;const r=e.selection,a=e.dom,i=e.parser,c=n.merge,l=ps({validate:!0},e.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=zt(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,u);let f=r.getRng();const d=f.startContainer,p=e.getBody();d===p&&r.isCollapsed()&&a.isBlock(p.firstChild)&&uL(e,p.firstChild)&&a.isEmpty(p.firstChild)&&(f=a.createRng(),f.setStart(p.firstChild,0),f.setEnd(p.firstChild,0),r.setRng(f)),r.isCollapsed()||dL(e);const h=r.getNode(),g={context:h.nodeName.toLowerCase(),data:n.data,insert:!0},b=i.parse(t,g);if(n.paste===!0&&UI(e.schema,b)&&GI(a,h))return f=eL(l,a,r.getRng(),b),f&&r.setRng(f),t;n.paste===!0&&nL(a,b,h,e.getBody())&&((s=b.firstChild)===null||s===void 0||s.unwrap()),iL(b);let y=b.lastChild;if(y&&y.attr("id")==="mce_marker"){const v=y;for(y=y.prev;y;y=y.walk(!0))if(y.type===3||!a.isBlock(y.name)){y.parent&&e.schema.isValidChild(y.parent.name,"span")&&y.parent.insert(v,y,y.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(h),!g.invalid&&!gL(a,h,b))t=l.serialize(b),oL(e,t,h);else{e.selection.setContent(u);let v=r.getNode(),E;const S=e.getBody();for(Pr(v)?v=E=S:E=v;E&&E!==S;)v=E,E=E.parentNode;t=v===S?S.innerHTML:a.getOuterHTML(v);const T=i.parse(t),O=mL(T),U=O.bind(DI).getOr(T);O.each(z=>z.replace(b));const A=b.children(),_=(o=b.parent)!==null&&o!==void 0?o:T;b.unwrap();const R=se(A,z=>zf(e.schema,z,_));Uf(R,e.schema,U),ky(i.getNodeFilters(),i.getAttributeFilters(),T),t=l.serialize(T),v===S?a.setHTML(S,t):a.setOuterHTML(v,t)}return aL(e,c),fL(e,a.get("mce_marker")),cL(e.getBody()),rL(a,r.getStart(),e.schema),iA(e.schema,e.getBody(),r.getStart()),t},rc=e=>e instanceof Et,hL=e=>{no(e)&&pt(e.getBody()).each(t=>{const n=t.getNode(),s=Xn(n)?pt(n).getOr(t):t;e.selection.setRng(s.toRange())})},jf=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&hL(e)},bL=(e,t,n,s)=>{if(n=zt(n),n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=gt(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,Xr(e),n)):n||(n=o),jf(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=ps({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=Ci(C.fromDom(t))?n:L.trim(n);return jf(e,o,s.no_selection),{content:o,html:o}}},CL=(e,t,n,s)=>{ky(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=ps({validate:!1},e.schema).serialize(n),r=zt(Ci(C.fromDom(t))?o:L.trim(o));return jf(e,r,s.no_selection),{content:n,html:r}},yL=(e,t,n)=>m.from(e.getBody()).map(s=>rc(t)?CL(e,s,t,n):bL(e,s,t,n)).getOr({content:t,html:rc(n.content)?"":n.content}),Ny=e=>Se(e)?e:Le,vL=(e,t,n)=>{let s=e.dom;const o=Ny(n);for(;s.parentNode;){s=s.parentNode;const r=C.fromDom(s),a=t(r);if(a.isSome())return a;if(o(r))break}return m.none()},qf=(e,t,n)=>{const s=t(e),o=Ny(n);return s.orThunk(()=>o(e)?m.none():vL(e,t,o))},Kf=Ku,Ay=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(Xt(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},Gf=(e,t,n,s,o)=>{const r=e.dom.getRoot();if(t===r)return!1;const a=e.dom.getParent(t,i=>Ay(e,i,n)?!0:i.parentNode===r||!!Bn(e,i,n,s,!0));return!!Bn(e,a,n,s,o)},ac=(e,t,n)=>Qe(n)&&Kf(t,n.inline)||On(n)&&Kf(t,n.block)?!0:Xt(n)?q(t)&&e.is(t,n.selector):!1,Ty=(e,t,n,s,o,r)=>{const a=n[s],i=s==="attributes";if(Se(n.onmatch))return n.onmatch(t,n,s);if(a){if(og(a)){for(let c=0;c<a.length;c++)if(i?e.getAttrib(t,a[c]):Wi(e,t,a[c]))return!0}else for(const c in a)if(oe(a,c)){const l=i?e.getAttrib(t,c):Wi(e,t,c),u=gs(a[c],r),f=qe(l)||yr(l);if(f&&qe(u))continue;if(o&&f&&!n.exact||(!o||n.exact)&&!Kf(l,Gu(u,c)))return!1}}return!0},Bn=(e,t,n,s,o)=>{const r=e.formatter.get(n),a=e.dom;if(r&&q(t))for(let i=0;i<r.length;i++){const c=r[i];if(ac(e.dom,t,c)&&Ty(a,t,c,"attributes",o,s)&&Ty(a,t,c,"styles",o,s)){const l=c.classes;if(l){for(let u=0;u<l.length;u++)if(!e.dom.hasClass(t,gs(l[u],s)))return}return c}}},Yf=(e,t,n,s,o)=>{if(s)return Gf(e,s,t,n,o);if(s=e.selection.getNode(),Gf(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&Gf(e,r,t,n,o))},EL=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,a=>{for(let i=0;i<t.length;i++){const c=t[i];!o[c]&&Bn(e,a,c,n)&&(o[c]=!0,s.push(c))}},e.dom.getRoot()),s},SL=(e,t)=>{const n=o=>ye(o,C.fromDom(e.getBody())),s=(o,r)=>Bn(e,o.dom,r)?m.some(r):m.none();return m.from(e.selection.getStart(!0)).bind(o=>qf(C.fromDom(o),r=>vo(t,a=>s(r,a)),n)).getOrNull()},wL=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n&&e.selection.isEditable()){const o=e.selection.getStart(),r=Vi(s,o);for(let a=n.length-1;a>=0;a--){const i=n[a];if(!Xt(i))return!0;for(let c=r.length-1;c>=0;c--)if(s.is(r[c],i.selector))return!0}}return!1},kL=(e,t,n)=>Rt(n,(s,o)=>{const r=pD(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),ha=Ze,_L=(e,t)=>e.importNode(t,!0),Ry=e=>{if(e){const t=new Xe(e,e);for(let n=t.current();n;n=t.next())if(B(n))return n}return null},Xf=e=>{const t=C.fromTag("span");return Hn(t,{id:Lu,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&We(t,C.fromText(ha)),t},xL=e=>{const t=Ry(e);return t&&t.data.charAt(0)===ha&&t.deleteData(0,1),t},Zf=(e,t,n)=>{const s=e.dom,o=e.selection;if(Cb(t))so(e,!1,C.fromDom(t),n,!0);else{const r=o.getRng(),a=s.getParent(t,s.isBlock),i=r.startContainer,c=r.startOffset,l=r.endContainer,u=r.endOffset,f=xL(t);s.remove(t,!0),i===f&&c>0&&r.setStart(f,c-1),l===f&&u>0&&r.setEnd(f,u-1),a&&s.isEmpty(a)&&as(C.fromDom(a)),o.setRng(r)}},Qf=(e,t,n)=>{const s=e.dom,o=e.selection;if(t)Zf(e,t,n);else if(t=Qs(e.getBody(),o.getStart()),!t)for(;t=s.get(Lu);)Zf(e,t,n)},NL=(e,t,n)=>{var s,o;const r=e.dom,a=r.getParent(n,j(ju,e.schema));a&&r.isEmpty(a)?(s=n.parentNode)===null||s===void 0||s.replaceChild(t,n):(_N(C.fromDom(n)),r.isEmpty(n)?(o=n.parentNode)===null||o===void 0||o.replaceChild(t,n):r.insertAfter(t,n))},Py=(e,t)=>(e.appendChild(t),t),Dy=(e,t)=>{var n;const s=mr(e,(r,a)=>Py(r,a.cloneNode(!1)),t),o=(n=s.ownerDocument)!==null&&n!==void 0?n:document;return Py(s,o.createTextNode(ha))},AL=(e,t,n,s,o,r)=>{const a=e.formatter,i=e.dom,c=se(Dt(a.get()),f=>f!==s&&!ft(f,"removeformat")),l=kL(e,n,c);if(se(l,f=>!hD(e,f,s)).length>0){const f=n.cloneNode(!1);return i.add(t,f),a.remove(s,o,f,r),i.remove(f),m.some(f)}else return m.none()},TL=(e,t,n)=>{let s;const o=e.selection,r=e.formatter.get(t);if(!r)return;const a=o.getRng();let i=a.startOffset;const l=a.startContainer.nodeValue;s=Qs(e.getBody(),o.getStart());const u=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&i>0&&i<l.length&&u.test(l.charAt(i))&&u.test(l.charAt(i-1))){const f=o.getBookmark();a.collapse(!0);let d=Js(e.dom,a,r);d=Zi(d),e.formatter.apply(t,n,d),o.moveToBookmark(f)}else{let f=s?Ry(s):null;(!s||(f==null?void 0:f.data)!==ha)&&(s=_L(e.getDoc(),Xf(!0).dom),f=s.firstChild,a.insertNode(s),i=1),e.formatter.apply(t,n,s),o.setCursorLocation(f,i)}},RL=(e,t,n,s)=>{const o=e.dom,r=e.selection;let a=!1;const i=e.formatter.get(t);if(!i)return;const c=r.getRng(),l=c.startContainer,u=c.startOffset;let f=l;B(l)&&(u!==l.data.length&&(a=!0),f=f.parentNode);const d=[];let p;for(;f;){if(Bn(e,f,t,n,s)){p=f;break}f.nextSibling&&(a=!0),d.push(f),f=f.parentNode}if(p)if(a){const h=r.getBookmark();c.collapse(!0);let g=Js(o,c,i,!0);g=Zi(g),e.formatter.remove(t,n,g,s),r.moveToBookmark(h)}else{const h=Qs(e.getBody(),p),g=M(h)?o.getParents(p.parentNode,He,h):[],b=Xf(!1).dom;NL(e,b,h??p);const y=AL(e,b,p,t,n,s),v=Dy([...d,...y.toArray(),...g],b);h&&Zf(e,h,M(h)),r.setCursorLocation(v,1),o.isEmpty(p)&&o.remove(p)}},PL=(e,t,n)=>{const s=e.selection,o=e.getBody();Qf(e,null,n),(t===8||t===46)&&s.isCollapsed()&&s.getStart().innerHTML===ha&&Qf(e,Qs(o,s.getStart()),!0),(t===37||t===39)&&Qf(e,Qs(o,s.getStart()),!0)},DL=e=>B(e)&&wl(e.data,Je),OL=e=>{e.on("mouseup keydown",t=>{PL(e,t.keyCode,DL(e.selection.getRng().endContainer))})},Oy=e=>{const t=Xf(!1),n=Dy(e,t.dom);return{caretContainer:t,caretPosition:N(n,0)}},By=(e,t)=>{const{caretContainer:n,caretPosition:s}=Oy(t);return Ot(C.fromDom(e),n),Pe(C.fromDom(e)),s},BL=(e,t)=>{const{caretContainer:n,caretPosition:s}=Oy(t);return e.insertNode(n.dom),s},Iy=(e,t)=>{if(Gt(t.dom))return!1;const n=e.schema.getTextInlineElements();return oe(n,pe(t))&&!Gt(t.dom)&&!Fs(t.dom)},ba={},Ly=pn(["pre"]),IL=(e,t)=>{ba[e]||(ba[e]=[]),ba[e].push(t)},LL=(e,t)=>{oe(ba,e)&&P(ba[e],n=>{n(t)})};IL("pre",e=>{const t=e.selection.getRng(),n=o=>r=>{const a=r.previousSibling;return Ly(a)&&ke(o,a)},s=(o,r)=>{const a=C.fromDom(r),i=jn(a).dom;Pe(a),Ls(C.fromDom(o),[C.fromTag("br",i),C.fromTag("br",i),...at(a)])};if(!t.collapsed){const o=e.selection.getSelectedBlocks(),r=se(se(o,Ly),n(o));P(r,a=>{s(a.previousSibling,a)})}});const $y=["fontWeight","fontStyle","color","fontSize","fontFamily"],$L=e=>yt(e.styles)&&Fe(Dt(e.styles),t=>ke($y,t)),FL=e=>Ye(e,t=>Qe(t)&&t.inline==="span"&&$L(t)),Fy=(e,t)=>{const n=e.get(t);return Ge(n)?FL(n):m.none()},My=(e,t)=>Bt(t,N.fromRangeStart(e)).isNone(),Uy=(e,t)=>Nt(t,N.fromRangeEnd(e)).exists(n=>!$e(n.getNode())||Nt(t,n).isSome())===!1,zy=e=>t=>dN(t)&&e.isEditable(t),ML=e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(t.length===1)return My(n,t[0])&&Uy(n,t[0])?t:[];{const s=Pt(t).filter(a=>My(n,a)).toArray(),o=As(t).filter(a=>Uy(n,a)).toArray(),r=t.slice(1,-1);return s.concat(r).concat(o)}},UL=e=>se(ML(e),zy(e.dom)),Hy=e=>se(e.getSelectedBlocks(),zy(e.dom)),Jf=L.each,ed=e=>q(e)&&!Yt(e)&&!Gt(e)&&!Fs(e),Wy=(e,t)=>{for(let n=e;n;n=n[t]){if(B(n)&&wn(n.data))return e;if(q(n)&&!Yt(n))return n}return e},Vy=(e,t,n)=>{const s=$f(e),o=Yn(t)&&e.dom.isEditable(t),r=Yn(n)&&e.dom.isEditable(n);if(o&&r){const a=Wy(t,"previousSibling"),i=Wy(n,"nextSibling");if(s.compare(a,i)){for(let c=a.nextSibling;c&&c!==i;){const l=c;c=c.nextSibling,a.appendChild(l)}return e.dom.remove(i),L.each(L.grep(i.childNodes),c=>{a.appendChild(c)}),a}}return n},jy=(e,t,n,s)=>{var o;if(s&&t.merge_siblings!==!1){const r=(o=Vy(e,pb(s),s))!==null&&o!==void 0?o:s;Vy(e,r,pb(r,!0))}},zL=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";Jf(e.select(s,n),o=>{ed(o)&&e.isEditable(o)&&Jf(t.styles,(r,a)=>{e.setStyle(o,a,"")})})}},td=(e,t,n)=>{Jf(e.childNodes,s=>{ed(s)&&(t(s)&&n(s),s.hasChildNodes()&&td(s,t,n))})},HL=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},qy=(e,t)=>n=>!!(n&&Wi(e,n,t)),Ky=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),HL(e,s)},ao=Tn.generate([{keep:[]},{rename:["name"]},{removed:[]}]),WL=/^(src|href|style)$/,nd=L.each,ic=Ku,VL=e=>/^(TR|TH|TD)$/.test(e.nodeName),Gy=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),Yy=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(q(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return B(s)&&n&&o>=s.data.length&&(s=new Xe(s,e.getBody()).next()||s),B(s)&&!n&&o===0&&(s=new Xe(s,e.getBody()).prev()||s),s},Xy=(e,t)=>{const n=t?"firstChild":"lastChild",s=e[n];return VL(e)&&s?e.nodeName==="TR"&&s[n]||s:e},sd=(e,t,n,s)=>{var o;const r=e.create(n,s);return(o=t.parentNode)===null||o===void 0||o.insertBefore(r,t),r.appendChild(t),r},Zy=(e,t,n,s,o)=>{const r=C.fromDom(t),a=C.fromDom(e.create(s,o)),i=n?Lg(r):Ig(r);return Ls(a,i),n?(Ot(r,a),Il(a,r)):(Kn(r,a),We(a,r)),a.dom},jL=(e,t)=>t.links&&e.nodeName==="A",Qy=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,a=gt(e);On(n)&&s===r.getRoot()&&(!n.list_block||!ic(t,n.list_block))&&P(Ft(t.childNodes),i=>{Wo(e,a,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=sd(r,i,a),r.setAttribs(o,Xr(e))):o=null}),!(yD(n)&&!ic(n.inline,t))&&r.remove(t,!0)},Jy=(e,t,n)=>mn(e)?{name:t,value:null}:{name:e,value:gs(t,n)},ev=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},tv=(e,t,n,s,o)=>{let r=!1;nd(n.styles,(a,i)=>{const{name:c,value:l}=Jy(i,a,s),u=Gu(l,c);(n.remove_similar||kt(l)||!q(o)||ic(Wi(e,o,c),u))&&e.setStyle(t,c,""),r=!0}),r&&ev(e,t)},qL=(e,t,n)=>{t==="removeformat"?P(Hy(e.selection),s=>{P($y,o=>e.dom.setStyle(s,o,"")),ev(e.dom,s)}):Fy(e.formatter,t).each(s=>{P(Hy(e.selection),o=>tv(e.dom,o,s,n,null))})},nv=(e,t,n,s,o)=>{const r=e.dom,a=$f(e),i=e.schema;if(Qe(t)&&Jl(i,t.inline)&&zs(i,s)&&s.parentElement===e.getBody())return Qy(e,s,t),ao.removed();if(!t.ceFalseOverride&&s&&r.getContentEditableParent(s)==="false"||s&&!ac(r,s,t)&&!jL(s,t))return ao.keep();const c=s,l=t.preserve_attributes;if(Qe(t)&&t.remove==="all"&&Ge(l)){const u=se(r.getAttribs(c),f=>ke(l,f.name.toLowerCase()));if(r.removeAllAttribs(c),P(u,f=>r.setAttrib(c,f.name,f.value)),u.length>0)return ao.rename("span")}if(t.remove!=="all"){tv(r,c,t,n,o),nd(t.attributes,(f,d)=>{const{name:p,value:h}=Jy(d,f,n);if(t.remove_similar||kt(h)||!q(o)||ic(r.getAttrib(o,p),h)){if(p==="class"){const g=r.getAttrib(c,p);if(g){let b="";if(P(g.split(/\s+/),y=>{/mce\-\w+/.test(y)&&(b+=(b?" ":"")+y)}),b){r.setAttrib(c,p,b);return}}}if(WL.test(p)&&c.removeAttribute("data-mce-"+p),p==="style"&&pn(["li"])(c)&&r.getStyle(c,"list-style-type")==="none"){c.removeAttribute(p),r.setStyle(c,"list-style-type","none");return}p==="class"&&c.removeAttribute("className"),c.removeAttribute(p)}}),nd(t.classes,f=>{f=gs(f,n),(!q(o)||r.hasClass(o,f))&&r.removeClass(c,f)});const u=r.getAttribs(c);for(let f=0;f<u.length;f++){const d=u[f].nodeName;if(!a.isAttributeInternal(d))return ao.keep()}}return t.remove!=="none"?(Qy(e,c,t),ao.removed()):ao.keep()},KL=(e,t,n,s,o)=>{let r;return t.parentNode&&P(Vi(e.dom,t.parentNode).reverse(),a=>{if(!r&&q(a)&&a.id!=="_start"&&a.id!=="_end"){const i=Bn(e,a,n,s,o);i&&i.split!==!1&&(r=a)}}),r},GL=(e,t,n,s)=>nv(e,t,n,s,s).fold(V(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),V(null)),YL=(e,t,n,s,o,r,a,i)=>{var c,l;let u,f;const d=e.dom;if(n){const p=n.parentNode;for(let h=s.parentNode;h&&h!==p;h=h.parentNode){let g=d.clone(h,!1);for(let b=0;b<t.length&&(g=GL(e,t[b],i,g),g!==null);b++);g&&(u&&g.appendChild(u),f||(f=g),u=g)}(!a.mixed||!d.isBlock(n))&&(s=(c=d.split(n,s))!==null&&c!==void 0?c:s),u&&f&&((l=o.parentNode)===null||l===void 0||l.insertBefore(u,o),f.appendChild(o),Qe(a)&&jy(e,a,i,u))}return s},XL=(e,t,n,s,o)=>{const r=e.formatter.get(t),a=r[0],i=e.dom,c=e.selection,l=g=>{const b=KL(e,g,t,n,o);return YL(e,r,b,g,g,!0,a,n)},u=g=>Yt(g)&&q(g)&&(g.id==="_start"||g.id==="_end"),f=g=>Fe(r,b=>Ca(e,b,n,g,g)),d=g=>{const b=Ft(g.childNodes),v=f(g)||Fe(r,T=>ac(i,g,T)),E=g.parentNode;if(!v&&M(E)&&Xu(a)&&f(E),a.deep&&b.length)for(let T=0;T<b.length;T++)d(b[T]);P(["underline","line-through","overline"],T=>{q(g)&&e.dom.getStyle(g,"text-decoration")===T&&g.parentNode&&bb(i,g.parentNode)===T&&Ca(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:T}},void 0,g)})},p=g=>{const b=i.get(g?"_start":"_end");if(b){let y=b[g?"firstChild":"lastChild"];return u(y)&&(y=y[g?"firstChild":"lastChild"]),B(y)&&y.data.length===0&&(y=g?b.previousSibling||b.nextSibling:b.nextSibling||b.previousSibling),i.remove(b,!0),y}else return null},h=g=>{let b,y,v=Js(i,g,r,g.collapsed);if(a.split){if(v=Zi(v),b=Yy(e,v,!0),y=Yy(e,v),b!==y){if(b=Xy(b,!0),y=Xy(y,!1),Gy(i,b,y)){const S=m.from(b.firstChild).getOr(b);l(Zy(i,S,!0,"span",{id:"_start","data-mce-type":"bookmark"})),p(!0);return}if(Gy(i,y,b)){const S=m.from(y.lastChild).getOr(y);l(Zy(i,S,!1,"span",{id:"_end","data-mce-type":"bookmark"})),p(!1);return}b=sd(i,b,"span",{id:"_start","data-mce-type":"bookmark"}),y=sd(i,y,"span",{id:"_end","data-mce-type":"bookmark"});const E=i.createRng();E.setStartAfter(b),E.setEndBefore(y),aa(i,E,S=>{P(S,T=>{!Yt(T)&&!Yt(T.parentNode)&&l(T)})}),l(b),l(y),b=p(!0),y=p()}else b=y=l(b);v.startContainer=b.parentNode?b.parentNode:b,v.startOffset=i.nodeIndex(b),v.endContainer=y.parentNode?y.parentNode:y,v.endOffset=i.nodeIndex(y)+1}aa(i,v,E=>{P(E,d)})};if(s){if(ra(s)){const g=i.createRng();g.setStartBefore(s),g.setEndAfter(s),h(g)}else h(s);Bb(e,t,s,n);return}!c.isCollapsed()||!Qe(a)||Ho(e).length?(gb(e,()=>Wu(e,h),g=>Qe(a)&&Yf(e,t,n,g)),e.nodeChanged()):RL(e,t,n,o),qL(e,t,n),Bb(e,t,s,n)},sv=(e,t,n,s,o)=>{(s||e.selection.isEditable())&&XL(e,t,n,s,o)},Ca=(e,t,n,s,o)=>nv(e,t,n,s,o).fold(Le,r=>(e.dom.rename(s,r),!0),He),ov=L.each,ZL=(e,t,n,s)=>{const o=r=>{if(Yn(r)&&q(r.parentNode)&&e.isEditable(r)){const a=bb(e,r.parentNode);e.getStyle(r,"color")&&a?e.setStyle(r,"text-decoration",a):e.getStyle(r,"text-decoration")===a&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(L.walk(s,o,"childNodes"),o(s))},QL=(e,t,n,s)=>{if(t.styles&&t.styles.backgroundColor){const o=qy(e,"fontSize");td(s,r=>o(r)&&e.isEditable(r),Ky(e,"backgroundColor",gs(t.styles.backgroundColor,n)))}},JL=(e,t,n,s)=>{if(Qe(t)&&(t.inline==="sub"||t.inline==="sup")){const o=qy(e,"fontSize");td(s,a=>o(a)&&e.isEditable(a),Ky(e,"fontSize",""));const r=se(e.select(t.inline==="sup"?"sub":"sup",s),e.isEditable);e.remove(r,!0)}},e$=(e,t,n,s)=>{ov(t,o=>{Qe(o)&&ov(e.dom.select(o.inline,s),r=>{ed(r)&&Ca(e,o,n,r,o.exact?r:null)}),zL(e.dom,o,s)})},t$=(e,t,n,s,o)=>{const r=o.parentNode;Bn(e,r,n,s)&&Ca(e,t,s,o)||t.merge_with_parents&&r&&e.dom.getParent(r,a=>Bn(e,a,n,s)?(Ca(e,t,s,o),!0):!1)},cc=L.each,n$=(e,t,n,s)=>{if(xR(e)&&Qe(t)&&n.parentNode){const o=Ap(e.schema),r=KB(C.fromDom(n),a=>Gt(a.dom));return Eo(o,s)&&Ue(C.fromDom(n.parentNode),!1)&&!r}else return!1},rv=(e,t,n,s)=>{if(cc(n.styles,(o,r)=>{e.setStyle(t,r,gs(o,s))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},s$=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],a=!s&&e.selection.isCollapsed(),i=e.dom,c=e.selection,l=(h,g=r)=>{Se(g.onformat)&&g.onformat(h,g,n,s),rv(i,h,g,n),cc(g.attributes,(b,y)=>{i.setAttrib(h,y,gs(b,n))}),cc(g.classes,b=>{const y=gs(b,n);i.hasClass(h,y)||i.addClass(h,y)})},u=(h,g)=>{let b=!1;return cc(h,y=>Xt(y)?i.getContentEditable(g)==="false"&&!y.ceFalseOverride||M(y.collapsed)&&y.collapsed!==a?!0:i.is(g,y.selector)&&!Gt(g)?(l(g,y),b=!0,!1):!0:!1),b},f=h=>{if(J(h)){const g=i.create(h);return l(g),g}else return null},d=(h,g,b)=>{const y=[];let v=!0;const E=r.inline||r.block,S=f(E),T=A=>bD(r)&&Bn(e,A,t,n),O=(A,_,R)=>{const z=CD(r)&&ju(e.schema,A)&&Wo(e,_,E);return R&&z},U=(A,_,R,z)=>{const Z=A.nodeName.toLowerCase(),re=Wo(e,E,Z)&&Wo(e,_,E),ie=!b&&B(A)&&yi(A.data),Ce=Gt(A),we=!Qe(r)||!h.isBlock(A);return(R||z)&&re&&!ie&&!Ce&&we};aa(h,g,A=>{let _;const R=z=>{let Z=!1,re=v,ie=!1;const Ce=z.parentNode,we=Ce.nodeName.toLowerCase(),Ie=h.getContentEditable(z);M(Ie)&&(re=v,v=Ie==="true",Z=!0,ie=hb(e,z));const nt=v&&!Z;if($e(z)&&!n$(e,r,z,we)){_=null,On(r)&&h.remove(z);return}if(T(z)){_=null;return}if(O(z,we,nt)){const Ve=h.rename(z,E);l(Ve),y.push(Ve),_=null;return}if(Xt(r)){let Ve=u(o,z);if(!Ve&&M(Ce)&&Xu(r)&&(Ve=u(o,Ce)),!Qe(r)||Ve){_=null;return}}M(S)&&U(z,we,nt,ie)?(_||(_=h.clone(S,!1),Ce.insertBefore(_,z),y.push(_)),ie&&Z&&(v=re),_.appendChild(z)):(_=null,P(Ft(z.childNodes),R),Z&&(v=re),_=null)};P(A,R)}),r.links===!0&&P(y,A=>{const _=R=>{R.nodeName==="A"&&l(R,r),P(Ft(R.childNodes),_)};_(A)}),P(y,A=>{const _=Z=>{let re=0;return P(Z.childNodes,ie=>{!mD(ie)&&!Yt(ie)&&re++}),re},R=Z=>Ye(Z.childNodes,Vu).filter(ie=>h.getContentEditable(ie)!=="false"&&ac(h,ie,r)).map(ie=>{const Ce=h.clone(ie,!1);return l(Ce),h.replace(Ce,Z,!0),h.remove(ie,!0),Ce}).getOr(Z),z=_(A);if((y.length>1||!h.isBlock(A))&&z===0){h.remove(A,!0);return}(Qe(r)||On(r)&&r.wrapper)&&(!r.exact&&z===1&&(A=R(A)),e$(e,o,n,A),t$(e,r,t,n,A),QL(h,r,n,A),ZL(h,r,n,A),JL(h,r,n,A),jy(e,r,n,A))})},p=ra(s)?s:c.getNode();if(i.getContentEditable(p)==="false"&&!hb(e,p)){s=p,u(o,s),Ob(e,t,s,n);return}if(r){if(s)if(ra(s)){if(!u(o,s)){const h=i.createRng();h.setStartBefore(s),h.setEndAfter(s),d(i,Js(i,h,o),!0)}}else d(i,s,!0);else!a||!Qe(r)||Ho(e).length?(c.setRng(Hf(c.getRng())),gb(e,()=>{Wu(e,(h,g)=>{const b=g?h:Js(i,h,o);d(i,b,!1)})},He),e.nodeChanged()):TL(e,t,n),Fy(e.formatter,t).each(h=>{P(UL(e.selection),g=>rv(i,g,h,n))});LL(t,e)}Ob(e,t,s,n)},av=(e,t,n,s)=>{(s||e.selection.isEditable())&&s$(e,t,n,s)},iv=e=>oe(e,"vars"),o$=(e,t)=>{e.set({}),t.on("NodeChange",n=>{fv(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=m.from(n.node).map(o=>ra(o)?o:o.startContainer).bind(o=>q(o)?m.some(o):m.from(o.parentElement)).getOrThunk(()=>cv(t));fv(t,s,e.get())})},cv=e=>e.selection.getStart(),lv=(e,t,n,s,o)=>eg(t,i=>{const c=e.formatter.matchNode(i,n,o??{},s);return!ct(c)},i=>Ay(e,i,n)?!0:s?!1:M(e.formatter.matchNode(i,n,o,!0))),uv=(e,t)=>{const n=t??cv(e);return se(Vi(e.dom,n),s=>q(s)&&!Fs(s))},fv=(e,t,n)=>{const s=uv(e,t);Ae(n,(o,r)=>{const a=i=>{const c=lv(e,s,r,i.similar,iv(i)?i.vars:void 0),l=c.isSome();if(i.state.get()!==l){i.state.set(l);const u=c.getOr(t);iv(i)?i.callback(l,{node:u,format:r,parents:s}):P(i.callbacks,f=>f(l,{node:u,format:r,parents:s}))}};P([o.withSimilar,o.withoutSimilar],a),P(o.withVars,a)})},r$=(e,t,n,s,o,r)=>{const a=t.get();P(n.split(","),i=>{const c=Re(a,i).getOrThunk(()=>{const u={withSimilar:{state:et(!1),similar:!0,callbacks:[]},withoutSimilar:{state:et(!1),similar:!1,callbacks:[]},withVars:[]};return a[i]=u,u}),l=()=>{const u=uv(e);return lv(e,u,i,o,r).isSome()};if(ct(r)){const u=o?c.withSimilar:c.withoutSimilar;u.callbacks.push(s),u.callbacks.length===1&&u.state.set(l())}else c.withVars.push({state:et(l()),similar:o,vars:r,callback:s})}),t.set(a)},a$=(e,t,n)=>{const s=e.get();P(t.split(","),o=>Re(s,o).each(r=>{s[o]={withSimilar:{...r.withSimilar,callbacks:se(r.withSimilar.callbacks,a=>a!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:se(r.withoutSimilar.callbacks,a=>a!==n)},withVars:se(r.withVars,a=>a.callback!==n)}})),e.set(s)},i$=(e,t,n,s,o,r)=>(r$(e,t,n,s,o,r),{unbind:()=>a$(t,n,s)}),c$=(e,t,n,s)=>{const o=e.formatter.get(t);o&&(Yf(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?sv(e,t,n,s):av(e,t,n,s))},dv=L.explode,mv=()=>{const e={};return{addFilter:(o,r)=>{P(dv(o),a=>{oe(e,a)||(e[a]={name:a,callbacks:[]}),e[a].callbacks.push(r)})},getFilters:()=>yl(e),removeFilter:(o,r)=>{P(dv(o),a=>{if(oe(e,a))if(M(r)){const i=e[a],c=se(i.callbacks,l=>l!==r);c.length>0?i.callbacks=c:delete e[a]}else delete e[a]})}}},l$=(e,t)=>{P(t,n=>{e.attr(n,null)})},u$=(e,t,n)=>{e.addNodeFilter("font",s=>{P(s,o=>{const r=t.parse(o.attr("style")),a=o.attr("color"),i=o.attr("face"),c=o.attr("size");a&&(r.color=a),i&&(r["font-family"]=i),c&&ri(c).each(l=>{r["font-size"]=n[l-1]}),o.name="span",o.attr("style",t.serialize(r)),l$(o,["color","face","size"])})})},f$=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";P(s,r=>{if(o)r.name="s";else{const a=n.parse(r.attr("style"));a["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(a))}})})},d$=(e,t,n)=>{var s;const o=cu();t.convert_fonts_to_spans&&u$(e,o,L.explode((s=t.font_size_legacy_values)!==null&&s!==void 0?s:"")),f$(e,n,o)},m$=(e,t,n)=>{t.inline_styles&&d$(e,t,n)},gv=(e,t,n)=>{t.addNodeFilter("br",(s,o,r)=>{const a=L.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),c=n.getWhitespaceElements();a.body=1;const l=u=>u.name in a||tu(n,u);for(let u=0,f=s.length;u<f;u++){let d=s[u],p=d.parent;if(p&&l(p)&&d===p.lastChild){let h=d.prev;for(;h;){const g=h.name;if(g!=="span"||h.attr("data-mce-type")!=="bookmark"){g==="br"&&(d=null);break}h=h.prev}if(d&&(d.remove(),pa(n,i,c,p))){const g=n.getElementRule(p.name);g&&(g.removeEmpty?p.remove():g.paddEmpty&&Ff(e,r,l,p))}}else{let h=d;for(;p&&p.firstChild===h&&p.lastChild===h&&(h=p,!a[p.name]);)p=p.parent;if(h===p){const g=new Et("#text",3);g.value=Je,d.replace(g)}}}})},g$=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),p$=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},od=e=>{const[t,...n]=e.split(","),s=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const r=o[2]===";base64",a=r?p$(s):decodeURIComponent(s);return m.some({type:o[1],data:a,base64Encoded:r})}else return m.none()},pv=(e,t,n=!0)=>{let s=t;if(n)try{s=atob(t)}catch{return m.none()}const o=new Uint8Array(s.length);for(let r=0;r<o.length;r++)o[r]=s.charCodeAt(r);return m.some(new Blob([o],{type:e}))},h$=e=>new Promise((t,n)=>{od(e).bind(({type:s,data:o,base64Encoded:r})=>pv(s,o,r)).fold(()=>n("Invalid data URI"),t)}),b$=e=>st(e,"blob:")?g$(e):st(e,"data:")?h$(e):Promise.reject("Unknown URI format"),hv=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{var o;n((o=s.error)===null||o===void 0?void 0:o.message)},s.readAsDataURL(e)});let C$=0;const y$=e=>"blobid"+C$++,bv=(e,t,n)=>od(e).bind(({data:s,type:o,base64Encoded:r})=>{if(t&&!r)return m.none();{const a=r?s:btoa(s);return n(a,o)}}),Cv=(e,t,n)=>{const s=e.create(y$(),t,n);return e.add(s),s},yv=(e,t,n=!1)=>bv(t,n,(s,o)=>m.from(e.getByData(s,o)).orThunk(()=>pv(o,s).map(r=>Cv(e,r,s)))),v$=(e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(st(t,"blob:")){const s=e.getByUri(t);return M(s)?Promise.resolve(s):b$(t).then(o=>hv(o).then(r=>bv(r,!1,a=>m.some(Cv(e,o,a))).getOrThunk(n)))}else return st(t,"data:")?yv(e,t).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},E$=e=>M(e.attr("data-mce-bogus")),S$=e=>e.attr("src")===be.transparentSrc||M(e.attr("data-mce-placeholder")),w$=(e,t)=>{const{blob_cache:n}=t;if(n){const s=o=>{const r=o.attr("src");S$(o)||E$(o)||qe(r)||yv(n,r,!0).each(a=>{o.attr("src",a.blobUri())})};e.addAttributeFilter("src",o=>P(o,s))}},rd=(e,t)=>st(e,`${t}/`),k$=(e,t,n,s,o)=>{let r;ct(e)?r="iframe":rd(e,"image")?r="img":rd(e,"video")?r="video":rd(e,"audio")?r="audio":r="iframe";const a=new Et(r,1);return a.attr(r==="audio"?{src:t}:{src:t,width:n,height:s}),(r==="audio"||r==="video")&&a.attr("controls",""),r==="iframe"&&o&&a.attr("sandbox",""),a},_$=(e,t)=>{const n=e.schema;t.remove_trailing_brs&&gv(t,e,n),e.addAttributeFilter("href",o=>{let r=o.length;const a=c=>c.split(" ").filter(u=>u.length>0).concat(["noopener"]).sort().join(" "),i=c=>{const l=c?L.trim(c):"";return/\b(noopener)\b/g.test(l)?l:a(l)};if(!t.allow_unsafe_link_target)for(;r--;){const c=o[r];c.name==="a"&&c.attr("target")==="_blank"&&c.attr("rel",i(c.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",o=>{let r=o.length,a,i,c,l;for(;r--;)if(l=o[r],l.name==="a"&&l.firstChild&&!l.attr("href"))for(c=l.parent,a=l.lastChild;a&&c;)i=a.prev,c.insert(a,l),a=i}),t.fix_list_elements&&e.addNodeFilter("ul,ol",o=>{let r=o.length,a,i;for(;r--;)if(a=o[r],i=a.parent,i&&(i.name==="ul"||i.name==="ol"))if(a.prev&&a.prev.name==="li")a.prev.append(a);else{const c=new Et("li",1);c.attr("style","list-style-type: none"),a.wrap(c)}});const s=n.getValidClasses();t.validate&&s&&e.addAttributeFilter("class",o=>{var r;let a=o.length;for(;a--;){const i=o[a],c=(r=i.attr("class"))!==null&&r!==void 0?r:"",l=L.explode(c," ");let u="";for(let f=0;f<l.length;f++){const d=l[f];let p=!1,h=s["*"];h&&h[d]&&(p=!0),h=s[i.name],!p&&h&&h[d]&&(p=!0),p&&(u&&(u+=" "),u+=d)}u.length||(u=null),i.attr("class",u)}}),w$(e,t),t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",o=>P(o,r=>{r.replace(k$(r.attr("type"),r.name==="object"?r.attr("data"):r.attr("src"),r.attr("width"),r.attr("height"),t.sandbox_iframes))})),t.sandbox_iframes&&e.addNodeFilter("iframe",o=>P(o,r=>r.attr("sandbox","")))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:vv,setPrototypeOf:Ev,isFrozen:x$,getPrototypeOf:N$,getOwnPropertyDescriptor:A$}=Object;let{freeze:It,seal:ln,create:Sv}=Object,{apply:ad,construct:id}=typeof Reflect<"u"&&Reflect;It||(It=function(t){return t}),ln||(ln=function(t){return t}),ad||(ad=function(t,n,s){return t.apply(n,s)}),id||(id=function(t,n){return new t(...n)});const lc=Jt(Array.prototype.forEach),wv=Jt(Array.prototype.pop),ya=Jt(Array.prototype.push),uc=Jt(String.prototype.toLowerCase),cd=Jt(String.prototype.toString),kv=Jt(String.prototype.match),va=Jt(String.prototype.replace),T$=Jt(String.prototype.indexOf),R$=Jt(String.prototype.trim),yn=Jt(Object.prototype.hasOwnProperty),Lt=Jt(RegExp.prototype.test),Ea=P$(TypeError);function Jt(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return ad(e,t,s)}}function P$(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return id(e,n)}}function _e(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uc;Ev&&Ev(e,null);let s=t.length;for(;s--;){let o=t[s];if(typeof o=="string"){const r=n(o);r!==o&&(x$(t)||(t[s]=r),o=r)}e[o]=!0}return e}function D$(e){for(let t=0;t<e.length;t++)yn(e,t)||(e[t]=null);return e}function io(e){const t=Sv(null);for(const[n,s]of vv(e))yn(e,n)&&(Array.isArray(s)?t[n]=D$(s):s&&typeof s=="object"&&s.constructor===Object?t[n]=io(s):t[n]=s);return t}function Sa(e,t){for(;e!==null;){const s=A$(e,t);if(s){if(s.get)return Jt(s.get);if(typeof s.value=="function")return Jt(s.value)}e=N$(e)}function n(){return null}return n}const _v=It(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ld=It(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ud=It(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O$=It(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),fd=It(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),B$=It(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xv=It(["#text"]),Nv=It(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),dd=It(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Av=It(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fc=It(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),I$=ln(/\{\{[\w\W]*|[\w\W]*\}\}/gm),L$=ln(/<%[\w\W]*|[\w\W]*%>/gm),$$=ln(/\${[\w\W]*}/gm),F$=ln(/^data-[\-\w.\u00B7-\uFFFF]/),M$=ln(/^aria-[\-\w]+$/),Tv=ln(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),U$=ln(/^(?:\w+script|data):/i),z$=ln(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Rv=ln(/^html$/i),H$=ln(/^[a-z][.\w]*(-[.\w]+)+$/i);var Pv=Object.freeze({__proto__:null,MUSTACHE_EXPR:I$,ERB_EXPR:L$,TMPLIT_EXPR:$$,DATA_ATTR:F$,ARIA_ATTR:M$,IS_ALLOWED_URI:Tv,IS_SCRIPT_OR_DATA:U$,ATTR_WHITESPACE:z$,DOCTYPE_NAME:Rv,CUSTOM_ELEMENT:H$});const wa={element:1,text:3,progressingInstruction:7,comment:8,document:9},W$=function(){return typeof window>"u"?null:window},V$=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(s=n.getAttribute(o));const r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function Dv(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:W$();const t=ce=>Dv(ce);if(t.version="3.1.7",t.removed=[],!e||!e.document||e.document.nodeType!==wa.document)return t.isSupported=!1,t;let{document:n}=e;const s=n,o=s.currentScript,{DocumentFragment:r,HTMLTemplateElement:a,Node:i,Element:c,NodeFilter:l,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:d,trustedTypes:p}=e,h=c.prototype,g=Sa(h,"cloneNode"),b=Sa(h,"remove"),y=Sa(h,"nextSibling"),v=Sa(h,"childNodes"),E=Sa(h,"parentNode");if(typeof a=="function"){const ce=n.createElement("template");ce.content&&ce.content.ownerDocument&&(n=ce.content.ownerDocument)}let S,T="";const{implementation:O,createNodeIterator:U,createDocumentFragment:A,getElementsByTagName:_}=n,{importNode:R}=s;let z={};t.isSupported=typeof vv=="function"&&typeof E=="function"&&O&&O.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Z,ERB_EXPR:re,TMPLIT_EXPR:ie,DATA_ATTR:Ce,ARIA_ATTR:we,IS_SCRIPT_OR_DATA:Ie,ATTR_WHITESPACE:nt,CUSTOM_ELEMENT:Ve}=Pv;let{IS_ALLOWED_URI:F}=Pv,K=null;const ge=_e({},[..._v,...ld,...ud,...fd,...xv]);let de=null;const G=_e({},[...Nv,...dd,...Av,...fc]);let Y=Object.seal(Sv(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),I=null,ee=null,ue=!0,ve=!0,xe=!1,ht=!0,$t=!1,Fn=!0,bt=!1,fn=!1,ne=!1,fe=!1,Ee=!1,Te=!1,Oe=!0,nn=!1;const ar="user-content-";let Va=!0,ho=!1,Ss={},ws=null;const ja=_e({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let cl=null;const ll=_e({},["audio","video","img","source","image","track"]);let ir=null;const ul=_e({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ks="http://www.w3.org/1998/Math/MathML",cr="http://www.w3.org/2000/svg",dn="http://www.w3.org/1999/xhtml";let ns=dn,qa=!1,Ka=null;const fl=_e({},[ks,cr,dn],cd);let lr=null;const Xk=["application/xhtml+xml","text/html"],Zk="text/html";let ut=null,bo=null;const _s=n.createElement("form"),Ga=function(x){return x instanceof RegExp||x instanceof Function},w=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(bo&&bo===x)){if((!x||typeof x!="object")&&(x={}),x=io(x),lr=Xk.indexOf(x.PARSER_MEDIA_TYPE)===-1?Zk:x.PARSER_MEDIA_TYPE,ut=lr==="application/xhtml+xml"?cd:uc,K=yn(x,"ALLOWED_TAGS")?_e({},x.ALLOWED_TAGS,ut):ge,de=yn(x,"ALLOWED_ATTR")?_e({},x.ALLOWED_ATTR,ut):G,Ka=yn(x,"ALLOWED_NAMESPACES")?_e({},x.ALLOWED_NAMESPACES,cd):fl,ir=yn(x,"ADD_URI_SAFE_ATTR")?_e(io(ul),x.ADD_URI_SAFE_ATTR,ut):ul,cl=yn(x,"ADD_DATA_URI_TAGS")?_e(io(ll),x.ADD_DATA_URI_TAGS,ut):ll,ws=yn(x,"FORBID_CONTENTS")?_e({},x.FORBID_CONTENTS,ut):ja,I=yn(x,"FORBID_TAGS")?_e({},x.FORBID_TAGS,ut):{},ee=yn(x,"FORBID_ATTR")?_e({},x.FORBID_ATTR,ut):{},Ss=yn(x,"USE_PROFILES")?x.USE_PROFILES:!1,ue=x.ALLOW_ARIA_ATTR!==!1,ve=x.ALLOW_DATA_ATTR!==!1,xe=x.ALLOW_UNKNOWN_PROTOCOLS||!1,ht=x.ALLOW_SELF_CLOSE_IN_ATTR!==!1,$t=x.SAFE_FOR_TEMPLATES||!1,Fn=x.SAFE_FOR_XML!==!1,bt=x.WHOLE_DOCUMENT||!1,fe=x.RETURN_DOM||!1,Ee=x.RETURN_DOM_FRAGMENT||!1,Te=x.RETURN_TRUSTED_TYPE||!1,ne=x.FORCE_BODY||!1,Oe=x.SANITIZE_DOM!==!1,nn=x.SANITIZE_NAMED_PROPS||!1,Va=x.KEEP_CONTENT!==!1,ho=x.IN_PLACE||!1,F=x.ALLOWED_URI_REGEXP||Tv,ns=x.NAMESPACE||dn,Y=x.CUSTOM_ELEMENT_HANDLING||{},x.CUSTOM_ELEMENT_HANDLING&&Ga(x.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Y.tagNameCheck=x.CUSTOM_ELEMENT_HANDLING.tagNameCheck),x.CUSTOM_ELEMENT_HANDLING&&Ga(x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Y.attributeNameCheck=x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),x.CUSTOM_ELEMENT_HANDLING&&typeof x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Y.allowCustomizedBuiltInElements=x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$t&&(ve=!1),Ee&&(fe=!0),Ss&&(K=_e({},xv),de=[],Ss.html===!0&&(_e(K,_v),_e(de,Nv)),Ss.svg===!0&&(_e(K,ld),_e(de,dd),_e(de,fc)),Ss.svgFilters===!0&&(_e(K,ud),_e(de,dd),_e(de,fc)),Ss.mathMl===!0&&(_e(K,fd),_e(de,Av),_e(de,fc))),x.ADD_TAGS&&(K===ge&&(K=io(K)),_e(K,x.ADD_TAGS,ut)),x.ADD_ATTR&&(de===G&&(de=io(de)),_e(de,x.ADD_ATTR,ut)),x.ADD_URI_SAFE_ATTR&&_e(ir,x.ADD_URI_SAFE_ATTR,ut),x.FORBID_CONTENTS&&(ws===ja&&(ws=io(ws)),_e(ws,x.FORBID_CONTENTS,ut)),Va&&(K["#text"]=!0),bt&&_e(K,["html","head","body"]),K.table&&(_e(K,["tbody"]),delete I.tbody),x.TRUSTED_TYPES_POLICY){if(typeof x.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ea('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof x.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ea('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=x.TRUSTED_TYPES_POLICY,T=S.createHTML("")}else S===void 0&&(S=V$(p,o)),S!==null&&typeof T=="string"&&(T=S.createHTML(""));It&&It(x),bo=x}},k=_e({},["mi","mo","mn","ms","mtext"]),$=_e({},["annotation-xml"]),D=_e({},["title","style","font","a","script"]),Q=_e({},[...ld,...ud,...O$]),me=_e({},[...fd,...B$]),Be=function(x){let X=E(x);(!X||!X.tagName)&&(X={namespaceURI:ns,tagName:"template"});const ae=uc(x.tagName),Me=uc(X.tagName);return Ka[x.namespaceURI]?x.namespaceURI===cr?X.namespaceURI===dn?ae==="svg":X.namespaceURI===ks?ae==="svg"&&(Me==="annotation-xml"||k[Me]):!!Q[ae]:x.namespaceURI===ks?X.namespaceURI===dn?ae==="math":X.namespaceURI===cr?ae==="math"&&$[Me]:!!me[ae]:x.namespaceURI===dn?X.namespaceURI===cr&&!$[Me]||X.namespaceURI===ks&&!k[Me]?!1:!me[ae]&&(D[ae]||!Q[ae]):!!(lr==="application/xhtml+xml"&&Ka[x.namespaceURI]):!1},Ke=function(x){ya(t.removed,{element:x});try{E(x).removeChild(x)}catch{b(x)}},je=function(x,X){try{ya(t.removed,{attribute:X.getAttributeNode(x),from:X})}catch{ya(t.removed,{attribute:null,from:X})}if(X.removeAttribute(x),x==="is"&&!de[x])if(fe||Ee)try{Ke(X)}catch{}else try{X.setAttribute(x,"")}catch{}},Ya=function(x){let X=null,ae=null;if(ne)x="<remove></remove>"+x;else{const Ct=kv(x,/^[\r\n\t ]+/);ae=Ct&&Ct[0]}lr==="application/xhtml+xml"&&ns===dn&&(x='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+x+"</body></html>");const Me=S?S.createHTML(x):x;if(ns===dn)try{X=new d().parseFromString(Me,lr)}catch{}if(!X||!X.documentElement){X=O.createDocument(ns,"template",null);try{X.documentElement.innerHTML=qa?T:Me}catch{}}const Tt=X.body||X.documentElement;return x&&ae&&Tt.insertBefore(n.createTextNode(ae),Tt.childNodes[0]||null),ns===dn?_.call(X,bt?"html":"body")[0]:bt?X.documentElement:Tt},Xa=function(x){return U.call(x.ownerDocument||x,x,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},Qk=function(x){return x instanceof f&&(typeof x.nodeName!="string"||typeof x.textContent!="string"||typeof x.removeChild!="function"||!(x.attributes instanceof u)||typeof x.removeAttribute!="function"||typeof x.setAttribute!="function"||typeof x.namespaceURI!="string"||typeof x.insertBefore!="function"||typeof x.hasChildNodes!="function")},Jk=function(x){return typeof i=="function"&&x instanceof i},ss=function(x,X,ae){z[x]&&lc(z[x],Me=>{Me.call(t,X,ae,bo)})},e_=function(x){let X=null;if(ss("beforeSanitizeElements",x,null),Qk(x))return Ke(x),!0;const ae=ut(x.nodeName);if(ss("uponSanitizeElement",x,{tagName:ae,allowedTags:K}),x.hasChildNodes()&&!Jk(x.firstElementChild)&&Lt(/<[/\w]/g,x.innerHTML)&&Lt(/<[/\w]/g,x.textContent)||x.nodeType===wa.progressingInstruction||Fn&&x.nodeType===wa.comment&&Lt(/<[/\w]/g,x.data))return Ke(x),!0;if(!K[ae]||I[ae]){if(!I[ae]&&n_(ae)&&(Y.tagNameCheck instanceof RegExp&&Lt(Y.tagNameCheck,ae)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(ae)))return!1;if(Va&&!ws[ae]){const Me=E(x)||x.parentNode,Tt=v(x)||x.childNodes;if(Tt&&Me){const Ct=Tt.length;for(let Vt=Ct-1;Vt>=0;--Vt){const Mn=g(Tt[Vt],!0);Mn.__removalCount=(x.__removalCount||0)+1,Me.insertBefore(Mn,y(x))}}}return Ke(x),!0}return x instanceof c&&!Be(x)||(ae==="noscript"||ae==="noembed"||ae==="noframes")&&Lt(/<\/no(script|embed|frames)/i,x.innerHTML)?(Ke(x),!0):($t&&x.nodeType===wa.text&&(X=x.textContent,lc([Z,re,ie],Me=>{X=va(X,Me," ")}),x.textContent!==X&&(ya(t.removed,{element:x.cloneNode()}),x.textContent=X)),ss("afterSanitizeElements",x,null),!1)},t_=function(x,X,ae){if(Oe&&(X==="id"||X==="name")&&(ae in n||ae in _s))return!1;if(!(ve&&!ee[X]&&Lt(Ce,X))){if(!(ue&&Lt(we,X))){if(!de[X]||ee[X]){if(!(n_(x)&&(Y.tagNameCheck instanceof RegExp&&Lt(Y.tagNameCheck,x)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(x))&&(Y.attributeNameCheck instanceof RegExp&&Lt(Y.attributeNameCheck,X)||Y.attributeNameCheck instanceof Function&&Y.attributeNameCheck(X))||X==="is"&&Y.allowCustomizedBuiltInElements&&(Y.tagNameCheck instanceof RegExp&&Lt(Y.tagNameCheck,ae)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(ae))))return!1}else if(!ir[X]){if(!Lt(F,va(ae,nt,""))){if(!((X==="src"||X==="xlink:href"||X==="href")&&x!=="script"&&T$(ae,"data:")===0&&cl[x])){if(!(xe&&!Lt(Ie,va(ae,nt,"")))){if(ae)return!1}}}}}}return!0},n_=function(x){return x!=="annotation-xml"&&kv(x,Ve)},s_=function(x){ss("beforeSanitizeAttributes",x,null);const{attributes:X}=x;if(!X)return;const ae={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:de};let Me=X.length;for(;Me--;){const Tt=X[Me],{name:Ct,namespaceURI:Vt,value:Mn}=Tt,Za=ut(Ct);let wt=Ct==="value"?Mn:R$(Mn);const Y4=wt;if(ae.attrName=Za,ae.attrValue=wt,ae.keepAttr=!0,ae.forceKeepAttr=void 0,ss("uponSanitizeAttribute",x,ae),wt=ae.attrValue,ae.forceKeepAttr)continue;if(!ae.keepAttr){je(Ct,x);continue}if(!ht&&Lt(/\/>/i,wt)){je(Ct,x);continue}$t&&lc([Z,re,ie],r_=>{wt=va(wt,r_," ")});const o_=ut(x.nodeName);if(!t_(o_,Za,wt)){je(Ct,x);continue}if(nn&&(Za==="id"||Za==="name")&&(je(Ct,x),wt=ar+wt),Fn&&Lt(/((--!?|])>)|<\/(style|title)/i,wt)){je(Ct,x);continue}if(S&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Vt)switch(p.getAttributeType(o_,Za)){case"TrustedHTML":{wt=S.createHTML(wt);break}case"TrustedScriptURL":{wt=S.createScriptURL(wt);break}}if(wt!==Y4)try{Vt?x.setAttributeNS(Vt,Ct,wt):x.setAttribute(Ct,wt),Qk(x)?Ke(x):wv(t.removed)}catch{}}ss("afterSanitizeAttributes",x,null)},G4=function ce(x){let X=null;const ae=Xa(x);for(ss("beforeSanitizeShadowDOM",x,null);X=ae.nextNode();)ss("uponSanitizeShadowNode",X,null),!e_(X)&&(X.content instanceof r&&ce(X.content),s_(X));ss("afterSanitizeShadowDOM",x,null)};return t.sanitize=function(ce){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=null,ae=null,Me=null,Tt=null;if(qa=!ce,qa&&(ce="<!-->"),typeof ce!="string"&&!Jk(ce))if(typeof ce.toString=="function"){if(ce=ce.toString(),typeof ce!="string")throw Ea("dirty is not a string, aborting")}else throw Ea("toString is not a function");if(!t.isSupported)return ce;if(fn||w(x),t.removed=[],typeof ce=="string"&&(ho=!1),ho){if(ce.nodeName){const Mn=ut(ce.nodeName);if(!K[Mn]||I[Mn])throw Ea("root node is forbidden and cannot be sanitized in-place")}}else if(ce instanceof i)X=Ya("<!---->"),ae=X.ownerDocument.importNode(ce,!0),ae.nodeType===wa.element&&ae.nodeName==="BODY"||ae.nodeName==="HTML"?X=ae:X.appendChild(ae);else{if(!fe&&!$t&&!bt&&ce.indexOf("<")===-1)return S&&Te?S.createHTML(ce):ce;if(X=Ya(ce),!X)return fe?null:Te?T:""}X&&ne&&Ke(X.firstChild);const Ct=Xa(ho?ce:X);for(;Me=Ct.nextNode();)e_(Me)||(Me.content instanceof r&&G4(Me.content),s_(Me));if(ho)return ce;if(fe){if(Ee)for(Tt=A.call(X.ownerDocument);X.firstChild;)Tt.appendChild(X.firstChild);else Tt=X;return(de.shadowroot||de.shadowrootmode)&&(Tt=R.call(s,Tt,!0)),Tt}let Vt=bt?X.outerHTML:X.innerHTML;return bt&&K["!doctype"]&&X.ownerDocument&&X.ownerDocument.doctype&&X.ownerDocument.doctype.name&&Lt(Rv,X.ownerDocument.doctype.name)&&(Vt="<!DOCTYPE "+X.ownerDocument.doctype.name+`>
`+Vt),$t&&lc([Z,re,ie],Mn=>{Vt=va(Vt,Mn," ")}),S&&Te?S.createHTML(Vt):Vt},t.setConfig=function(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};w(ce),fn=!0},t.clearConfig=function(){bo=null,fn=!1},t.isValidAttribute=function(ce,x,X){bo||w({});const ae=ut(ce),Me=ut(x);return t_(ae,Me,X)},t.addHook=function(ce,x){typeof x=="function"&&(z[ce]=z[ce]||[],ya(z[ce],x))},t.removeHook=function(ce){if(z[ce])return wv(z[ce])},t.removeHooks=function(ce){z[ce]&&(z[ce]=[])},t.removeAllHooks=function(){z={}},t}var Ov=Dv();const Bv=L.each,j$=L.trim,q$=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],K$={ftp:21,http:80,https:443,mailto:25},G$=["img","video"],Y$=(e,t)=>M(e)?!e:M(t)?!ke(G$,t):!0,X$=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},Iv=(e,t,n)=>{const s=X$(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?Y$(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class un{static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=Ws.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!Iv(s,o,n)}}static getDocumentBaseUrl(t){var n;let s;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?s=(n=t.href)!==null&&n!==void 0?n:"":s=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}constructor(t,n={}){this.path="",this.directory="",t=j$(t),this.settings=n;const s=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const i=s?s.path:new un(document.location.href).directory;if((s==null?void 0:s.protocol)==="")t="//mce_host"+o.toAbsPath(i,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);c&&(t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(i,c[1])+c[2])}}t=t.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);a&&Bv(q$,(i,c)=>{let l=a[c];l&&(l=l.replace(/\(mce_at\)/g,"@@")),o[i]=l}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new un(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const s=this.getURI(),o=n.getURI();if(s===o||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===o)return s;let r=this.toRelPath(this.path,n.path);return n.query&&(r+="?"+n.query),n.anchor&&(r+="#"+n.anchor),r}toAbsolute(t,n){const s=new un(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?K$[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,a;const i=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(i.length>=c.length){for(r=0,a=i.length;r<a;r++)if(r>=c.length||i[r]!==c[r]){s=r+1;break}}if(i.length<c.length){for(r=0,a=c.length;r<a;r++)if(r>=i.length||i[r]!==c[r]){s=r+1;break}}if(s===1)return n;for(r=0,a=i.length-(s-1);r<a;r++)o+="../";for(r=s-1,a=c.length;r<a;r++)r!==s-1?o+="/"+c[r]:o+=c[r];return o}toAbsPath(t,n){let s=0;const o=/\/$/.test(n)?"/":"",r=t.split("/"),a=n.split("/"),i=[];Bv(r,f=>{f&&i.push(f)});const c=[];for(let f=a.length-1;f>=0;f--)if(!(a[f].length===0||a[f]===".")){if(a[f]===".."){s++;continue}if(s>0){s--;continue}c.push(a[f])}const l=i.length-s;let u;return l<=0?u=pr(c).join("/"):u=i.slice(0,l).join("/")+"/"+pr(c).join("/"),u.indexOf("/")!==0&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const Z$=L.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),md="data-mce-type";let Lv=0;const $v=(e,t,n,s,o)=>{var r,a,i,c;const l=t.validate,u=n.getSpecialElements();e.nodeType===vg&&!t.allow_conditional_comments&&/^\[if/i.test((r=e.nodeValue)!==null&&r!==void 0?r:"")&&(e.nodeValue=" "+e.nodeValue);const f=(a=o==null?void 0:o.tagName)!==null&&a!==void 0?a:e.nodeName.toLowerCase();if(s!=="html"&&n.isValid(s)){M(o)&&(o.allowedTags[f]=!0);return}if(e.nodeType!==vr||f==="body")return;const d=C.fromDom(e),p=Er(d,md),h=Ut(d,"data-mce-bogus");if(!p&&J(h)){h==="all"?Pe(d):Gn(d);return}const g=n.getElementRule(f);if(l&&!g){oe(u,f)?Pe(d):Gn(d);return}else M(o)&&(o.allowedTags[f]=!0);if(l&&g&&!p){if(P((i=g.attributesForced)!==null&&i!==void 0?i:[],b=>{ot(d,b.name,b.value==="{$uid}"?`mce_${Lv++}`:b.value)}),P((c=g.attributesDefault)!==null&&c!==void 0?c:[],b=>{Er(d,b.name)||ot(d,b.name,b.value==="{$uid}"?`mce_${Lv++}`:b.value)}),g.attributesRequired&&!Fe(g.attributesRequired,b=>Er(d,b))){Gn(d);return}if(g.removeEmptyAttrs&&Sx(d)){Gn(d);return}g.outputName&&g.outputName!==f&&fT(d,g.outputName)}},Q$=(e,t,n,s,o)=>{const r=e.tagName.toLowerCase(),{attrName:a,attrValue:i}=o;o.keepAttr=Fv(t,n,s,r,a,i),o.keepAttr?(o.allowedAttributes[a]=!0,Uv(a,n)&&(o.attrValue=a),t.allow_svg_data_urls&&st(i,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):Mv(e,a)&&(o.forceKeepAttr=!0)},Fv=(e,t,n,s,o,r)=>n!=="html"&&!Us(s)?!0:!(o in Z$&&Iv(e,r,s))&&(!e.validate||t.isValid(s,o)||st(o,"data-")||st(o,"aria-")),Mv=(e,t)=>e.hasAttribute(md)&&(t==="id"||t==="class"||t==="style"),Uv=(e,t)=>e in t.getBoolAttrs(),J$=(e,t,n,s)=>{const{attributes:o}=e;for(let r=o.length-1;r>=0;r--){const a=o[r],i=a.name,c=a.value;!Fv(t,n,s,e.tagName.toLowerCase(),i,c)&&!Mv(e,i)?e.removeAttribute(i):Uv(i,n)&&e.setAttribute(i,i)}},eF=(e,t,n)=>{const s=Ov();return s.addHook("uponSanitizeElement",(o,r)=>{$v(o,e,t,n.track(o),r)}),s.addHook("uponSanitizeAttribute",(o,r)=>{Q$(o,e,t,n.current(),r)}),s},tF=(e,t)=>{const s={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return s.PARSER_MEDIA_TYPE=t,e.allow_script_urls?s.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(s.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),s},nF=e=>{const t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(s=>`xlink:${s}`),n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};return Ov().sanitize(e,n),e.innerHTML},sF=(e,t)=>{const n=tA();if(e.sanitize){const s=eF(e,t,n);return{sanitizeHtmlElement:(r,a)=>{s.sanitize(r,tF(e,a)),s.removed=[],n.reset()},sanitizeNamespaceElement:nF}}else return{sanitizeHtmlElement:(r,a)=>{const i=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let c;for(;c=i.nextNode();){const l=n.track(c);$v(c,e,t,l),q(c)&&J$(c,e,t,l)}n.reset()},sanitizeNamespaceElement:le}},zv=L.makeMap,Hv=L.extend,Wv=(e,t,n,s)=>{const o=e.name,r=o in n&&o!=="title"&&o!=="textarea"&&o!=="noscript",a=t.childNodes;for(let i=0,c=a.length;i<c;i++){const l=a[i],u=new Et(l.nodeName.toLowerCase(),l.nodeType);if(q(l)){const f=l.attributes;for(let d=0,p=f.length;d<p;d++){const h=f[d];u.attr(h.name,h.value)}Us(u.name)&&(s(l),u.value=l.innerHTML)}else B(l)?(u.value=l.data,r&&(u.raw=!0)):(rs(l)||lN(l)||uN(l))&&(u.value=l.data);Us(u.name)||Wv(u,l,n,s),e.append(u)}},oF=(e,t,n)=>{const s=[];for(let o=e,r=o;o;r=o,o=o.walk()){const a=o;P(t,i=>i(a)),qe(a.parent)&&a!==e?o=r:s.push(a)}for(let o=s.length-1;o>=0;o--){const r=s[o];P(n,a=>a(r))}},rF=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=Hv(zv("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=Ap(t),l=/[ \t\r\n]+/g,u=/^[ \t\r\n]+/,f=/[ \t\r\n]+$/,d=v=>{let E=v.parent;for(;M(E);){if(E.name in a)return!0;E=E.parent}return!1},p=v=>{let E=v;for(;M(E);){if(E.name in c)return pa(t,r,a,E);E=E.parent}return!1},h=v=>v.name in i||tu(t,v)||Us(v.name)&&v.parent===e,g=(v,E)=>{const S=E?v.prev:v.next;return M(S)||qe(v.parent)?!1:h(v.parent)&&(v.parent!==e||s.isRootContent===!0)};return[v=>{var E;if(v.type===3&&!d(v)){let S=(E=v.value)!==null&&E!==void 0?E:"";S=S.replace(l," "),(PI(v.prev,h)||g(v,!0))&&(S=S.replace(u,"")),S.length===0?v.remove():v.value=S}},v=>{var E;if(v.type===1){const S=t.getElementRule(v.name);if(o&&S){const T=pa(t,r,a,v);S.paddInEmptyBlock&&T&&p(v)?Ff(n,s,h,v):S.removeEmpty&&T?h(v)?v.remove():v.unwrap():S.paddEmpty&&(T||TI(v))&&Ff(n,s,h,v)}}else if(v.type===3&&!d(v)){let S=(E=v.value)!==null&&E!==void 0?E:"";(v.next&&h(v.next)||g(v,!1))&&(S=S.replace(f,"")),S.length===0?v.remove():v.value=S}}]},aF=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},Ko=(e={},t=ls())=>{const n=mv(),s=mv(),o={validate:!0,root_name:"body",sanitize:!0,...e},r=new DOMParser,a=sF(o,t),i=(E,S,T="html")=>{const O=T==="xhtml"?"application/xhtml+xml":"text/html",U=oe(t.getSpecialElements(),S.toLowerCase()),A=U?`<${S}>${E}</${S}>`:E,_=T==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${A}</body></html>`:`<body>${A}</body>`,R=r.parseFromString(_,O).body;return a.sanitizeHtmlElement(R,O),U?R.firstChild:R},c=n.addFilter,l=n.getFilters,u=n.removeFilter,f=s.addFilter,d=s.getFilters,p=s.removeFilter,h=(E,S)=>{zf(t,E)&&S.push(E)},g=(E,S)=>{const T=J(S.attr(md)),O=S.type===1&&!oe(E,S.name)&&!tu(t,S)&&!Us(S.name);return S.type===3||O&&!T},b=(E,S)=>{const T=Hv(zv("script,style,head,html,body,title,meta,param"),t.getBlockElements()),O=/^[ \t\r\n]+/,U=/[ \t\r\n]+$/;let A=E.firstChild,_=null;const R=z=>{var Z,re;z&&(A=z.firstChild,A&&A.type===3&&(A.value=(Z=A.value)===null||Z===void 0?void 0:Z.replace(O,"")),A=z.lastChild,A&&A.type===3&&(A.value=(re=A.value)===null||re===void 0?void 0:re.replace(U,"")))};if(t.isValidChild(E.name,S.toLowerCase())){for(;A;){const z=A.next;g(T,A)?(_||(_=new Et(S,1),_.attr(o.forced_root_block_attrs),E.insert(_,A)),_.append(A)):(R(_),_=null),A=z}R(_)}},v={schema:t,addAttributeFilter:f,getAttributeFilters:d,removeAttributeFilter:p,addNodeFilter:c,getNodeFilters:l,removeNodeFilter:u,parse:(E,S={})=>{var T;const O=o.validate,U=(T=S.context)!==null&&T!==void 0?T:o.root_name,A=i(E,U,S.format);Zl(t,A);const _=new Et(U,11);Wv(_,A,t.getSpecialElements(),a.sanitizeNamespaceElement),A.innerHTML="";const[R,z]=rF(_,t,o,S),Z=[],re=O?Ie=>h(Ie,Z):le,ie={nodes:{},attributes:{}},Ce=Ie=>Sy(l(),d(),Ie,ie);if(oF(_,[R,Ce],[z,re]),Z.reverse(),O&&Z.length>0)if(S.context){const{pass:Ie,fail:nt}=yo(Z,Ve=>Ve.parent===_);Uf(nt,t,_,Ce),S.invalid=Ie.length>0}else Uf(Z,t,_,Ce);const we=aF(o,S);return we&&(_.name==="body"||S.isRootContent)&&b(_,we),S.invalid||wy(ie,S),_}};return _$(v,o),m$(v,o,t),v},iF=e=>rc(e)?ps({validate:!1}).serialize(e):e,Vv=(e,t,n)=>{const s=iF(e),o=t(s);if(o.isDefaultPrevented())return o;if(rc(e))if(o.content!==s){const r=Ko({validate:!1,forced_root_block:!1,...n}).parse(o.content,{context:e.name});return{...o,content:r}}else return{...o,content:e};else return o},jv=(e,t)=>{if(t.no_events)return xt.value(t);{const n=VD(e,t);return n.isDefaultPrevented()?xt.error(Lb(e,{content:"",...n}).content):xt.value(n)}},qv=(e,t,n)=>n.no_events?t:Vv(t,o=>Lb(e,{...n,content:o}),{sanitize:Au(e),sandbox_iframes:Tu(e)}).content,gd=(e,t)=>{if(t.no_events)return xt.value(t);{const n=Vv(t.content,s=>WD(e,{...t,content:s}),{sanitize:Au(e),sandbox_iframes:Tu(e)});return n.isDefaultPrevented()?(Ib(e,n),xt.error(void 0)):xt.value(n)}},pd=(e,t,n)=>{n.no_events||Ib(e,{...n,content:t})},hd=(e,t,n)=>({element:e,width:t,rows:n}),Kv=(e,t)=>({element:e,cells:t}),cF=(e,t)=>({x:e,y:t}),Gv=(e,t)=>Wn(e,t).bind(ri).getOr(1),lF=(e,t,n,s,o)=>{const r=Gv(o,"rowspan"),a=Gv(o,"colspan"),i=e.rows;for(let c=n;c<n+r;c++){i[c]||(i[c]=Kv(jp(s),[]));for(let l=t;l<t+a;l++){const u=i[c].cells;u[l]=c===n&&l===t?o:qs(o)}}},uF=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},fF=(e,t,n)=>{for(;uF(e,t,n);)t++;return t},Yv=e=>Rt(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),Xv=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(ye(o[r],t))return m.some(cF(r,s))}return m.none()},Zv=(e,t,n,s,o)=>{const r=[],a=e.rows;for(let i=n;i<=o;i++){const c=a[i].cells,l=t<s?c.slice(t,s+1):c.slice(s,t+1);r.push(Kv(a[i].element,l))}return r},dF=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,a=n.y,i=o<a?Zv(e,s,o,r,a):Zv(e,s,a,r,o);return hd(e.element,Yv(i),i)},mF=(e,t)=>{const n=qs(e.element),s=C.fromTag("tbody");return Ls(s,t),We(n,s),n},gF=e=>he(e.rows,t=>{const n=he(t.cells,o=>{const r=jp(o);return rt(r,"colspan"),rt(r,"rowspan"),r}),s=qs(t.element);return Ls(s,n),s}),pF=e=>{const t=hd(qs(e),0,[]);return P(mt(e,"tr"),(n,s)=>{P(mt(n,"td,th"),(o,r)=>{lF(t,fF(t,r,s),s,n,o)})}),hd(t.element,Yv(t.rows),t.rows)},hF=e=>mF(e,gF(e)),bF=(e,t,n)=>Xv(e,t).bind(s=>Xv(e,n).map(o=>dF(e,s,o))),CF=e=>Ye(e,t=>pe(t)==="ul"||pe(t)==="ol"),yF=(e,t)=>Ye(e,n=>pe(n)==="li"&&zu(n,t)).fold(V([]),n=>CF(e).map(s=>{const o=C.fromTag(pe(s)),r=hr(Bl(s),(a,i)=>st(i,"list-style"));return ui(o,r),[C.fromTag("li"),o]}).getOr([])),vF=(e,t)=>{const n=Rt(t,(s,o)=>(We(o,s),o),e);return t.length>0?tf([n]):n},EF=e=>Or(e)?on(e).filter(Vl).fold(V([]),t=>[e,t]):Vl(e)?[e]:[],SF=(e,t,n)=>{const s=C.fromDom(t.commonAncestorContainer),o=Jn(s,e),r=se(o,c=>n.isWrapper(pe(c))),a=yF(o,t),i=r.concat(a.length?a:EF(s));return he(i,qs)},Qv=()=>tf([]),wF=(e,t,n)=>vF(C.fromDom(t.cloneContents()),SF(e,t,n)),kF=(e,t)=>Nr(t,"table",j(ye,e)),_F=(e,t)=>kF(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=pF(n);return bF(r,s,o).map(a=>tf([hF(a)]))}).getOrThunk(Qv),xF=(e,t,n)=>t.length>0&&t[0].collapsed?Qv():wF(e,t[0],n),NF=(e,t,n)=>{const s=fb(t,e);return s.length>0?_F(e,s):xF(e,t,n)},dc=(e,t)=>t>=0&&t<e.length&&zo(e.charAt(t)),Jv=e=>zt(e.innerText),AF=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),TF=e=>m.from(e.selection.getRng()).map(t=>{var n;const s=m.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),r=AF(s),a=C.fromDom(t.cloneContents());xC(a),NC(a);const i=e.dom.add(o,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},a.dom),c=Jv(i),l=zt((n=i.textContent)!==null&&n!==void 0?n:"");if(e.dom.remove(i),dc(l,0)||dc(l,l.length-1)){const u=s.getOr(o),f=Jv(u),d=f.indexOf(c);if(d===-1)return c;{const p=dc(f,d-1),h=dc(f,d+c.length);return(p?" ":"")+c+(h?" ":"")}}else return c}).getOr(""),RF=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=pf(e,Mu(o)),a=t.contextual?NF(C.fromDom(e.getBody()),r,e.schema).dom:n.cloneContents();return a&&s.appendChild(a),e.selection.serializer.serialize(s,t)},PF=(e,t)=>{if(t.format==="text")return TF(e);{const n=RF(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},DF=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),OF=(e,t,n={})=>{const s=DF(n,t);return jv(e,s).fold(_t,o=>{const r=PF(e,o);return qv(e,r,o)})},bd=0,eE=1,tE=2,BF=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(u,f,d)=>({start:u,end:f,diag:d}),a=(u,f,d,p,h)=>{const g=c(u,f,d,p);if(g===null||g.start===f&&g.diag===f-p||g.end===u&&g.diag===u-d){let b=u,y=d;for(;b<f||y<p;)b<f&&y<p&&e[b]===t[y]?(h.push([bd,e[b]]),++b,++y):f-u>p-d?(h.push([tE,e[b]]),++b):(h.push([eE,t[y]]),++y)}else{a(u,g.start,d,g.start-g.diag,h);for(let b=g.start;b<g.end;++b)h.push([bd,e[b]]);a(g.end,f,g.end-g.diag,p,h)}},i=(u,f,d,p)=>{let h=u;for(;h-f<p&&h<d&&e[h]===t[h-f];)++h;return r(u,h,f)},c=(u,f,d,p)=>{const h=f-u,g=p-d;if(h===0||g===0)return null;const b=h-g,y=g+h,v=(y%2===0?y:y+1)/2;s[1+v]=u,o[1+v]=f+1;let E,S,T,O,U;for(E=0;E<=v;++E){for(S=-E;S<=E;S+=2){for(T=S+v,S===-E||S!==E&&s[T-1]<s[T+1]?s[T]=s[T+1]:s[T]=s[T-1]+1,O=s[T],U=O-u+d-S;O<f&&U<p&&e[O]===t[U];)s[T]=++O,++U;if(b%2!==0&&b-E<=S&&S<=b+E&&o[T-b]<=s[T])return i(o[T-b],S+u-d,f,p)}for(S=b-E;S<=b+E;S+=2){for(T=S+v-b,S===b-E||S!==b+E&&o[T+1]<=o[T-1]?o[T]=o[T+1]-1:o[T]=o[T-1],O=o[T]-1,U=O-u+d-S;O>=u&&U>=d&&e[O]===t[U];)o[T]=O--,U--;if(b%2===0&&-E<=S&&S<=E&&o[T]<=s[T+b])return i(o[T],S+u-d,f,p)}}return null},l=[];return a(0,e.length,0,t.length,l),l},nE=e=>q(e)?e.outerHTML:B(e)?Ws.encodeRaw(e.data,!1):rs(e)?"<!--"+e.data+"-->":"",IF=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},LF=(e,t,n)=>{const s=IF(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.insertBefore(s,o)}else e.appendChild(s)},$F=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}},FF=(e,t)=>{let n=0;P(e,s=>{s[0]===bd?n++:s[0]===eE?(LF(t,s[1],n),n++):s[0]===tE&&$F(t,n)})},MF=(e,t)=>se(he(Ft(e.childNodes),Sn(zt,nE)),n=>n.length>0),UF=(e,t)=>{const n=he(Ft(t.childNodes),nE);return FF(BF(n,e),t),t},zF=Rs(()=>document.implementation.createHTMLDocument("undo")),HF=e=>e.querySelector("iframe")!==null,WF=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),VF=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),mc=e=>{const t=e.serializer.getTempAttrs(),n=_C(e.getBody(),t);return HF(n)?WF(MF(n)):VF(zt(n.innerHTML))},Cd=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?UF(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:M(s)&&ab(s)?!s.isFakeCaret:!0}),s&&(e.selection.moveToBookmark(s),e.selection.scrollIntoView())},yd=e=>e.type==="fragmented"?e.fragments.join(""):e.content,sE=e=>{const t=C.fromTag("body",zF());return di(t,yd(e)),P(mt(t,"*[data-mce-bogus]"),Gn),qg(t)},jF=(e,t)=>yd(e)===yd(t),qF=(e,t)=>sE(e)===sE(t),vd=(e,t)=>!e||!t?!1:jF(e,t)?!0:qF(e,t),Ed=e=>e.get()===0,gc=(e,t,n)=>{Ed(n)&&(e.typing=t)},oE=(e,t)=>{e.typing&&(gc(e,!1,t),e.add())},KF=e=>{e.typing&&(e.typing=!1,e.add())},GF=(e,t,n)=>{Ed(t)&&n.set(Su(e.selection))},YF=(e,t,n,s,o,r,a)=>{const i=mc(e),c=L.extend(r||{},i);if(!Ed(s)||e.removed)return null;const l=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:c,lastLevel:l,originalEvent:a}).isDefaultPrevented()||l&&vd(l,c))return null;t.data[n.get()]&&o.get().each(d=>{t.data[n.get()].beforeBookmark=d});const u=OR(e);if(u&&t.data.length>u){for(let d=0;d<t.data.length-1;d++)t.data[d]=t.data[d+1];t.data.length--,n.set(t.data.length)}c.bookmark=Su(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(c),n.set(t.data.length-1);const f={level:c,lastLevel:l,originalEvent:a};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",f),e.dispatch("change",f)):e.dispatch("AddUndo",f),c},XF=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},ZF=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,a=t.data[n.get()-1];Cd(e,a,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},QF=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],Cd(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},JF=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,gc(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],Cd(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},eM=e=>{e.clear(),e.add()},tM=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!vd(mc(e),t.data[0]),nM=(e,t)=>t.get()<e.data.length-1&&!e.typing,sM=(e,t,n)=>(oE(e,t),e.beforeChange(),e.ignore(n),e.add()),oM=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},rM=(e,t)=>{const n=e.dom,s=M(t)?t:e.getBody();P(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=MR(e),a=n.getAttrib(o,"border");(!a||a==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const i=n.getAttrib(o,"name")||o.id,c=Ih(e);i&&e.hasVisual?n.addClass(o,c):n.removeClass(o,c)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},rE=e=>({init:{bindEvents:le},undoManager:{beforeChange:(t,n)=>GF(e,t,n),add:(t,n,s,o,r,a)=>YF(e,t,n,s,o,r,a),undo:(t,n,s)=>JF(e,t,n,s),redo:(t,n)=>QF(e,t,n),clear:(t,n)=>XF(e,t,n),reset:t=>eM(t),hasUndo:(t,n)=>tM(e,t,n),hasRedo:(t,n)=>nM(t,n),transact:(t,n,s)=>sM(t,n,s),ignore:(t,n)=>oM(t,n),extra:(t,n,s,o)=>ZF(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>Yf(e,t,n,s,o),matchAll:(t,n)=>EL(e,t,n),matchNode:(t,n,s,o)=>Bn(e,t,n,s,o),canApply:t=>wL(e,t),closest:t=>SL(e,t),apply:(t,n,s)=>av(e,t,n,s),remove:(t,n,s,o)=>sv(e,t,n,s,o),toggle:(t,n,s)=>c$(e,t,n,s),formatChanged:(t,n,s,o,r)=>i$(e,t,n,s,o,r)},editor:{getContent:t=>KO(e,t),setContent:(t,n)=>yL(e,t,n),insertContent:(t,n)=>pL(e,t,n),addVisual:t=>rM(e,t)},selection:{getContent:(t,n)=>OF(e,t,n)},autocompleter:{addDecoration:t=>PO(e,t),removeDecoration:()=>OO(e,C.fromDom(e.getBody()))},raw:{getModel:()=>m.none()}}),aM=e=>{const t=l=>yt(l)?l:{},{init:n,undoManager:s,formatter:o,editor:r,selection:a,autocompleter:i,raw:c}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(l,u,f)=>s.transact(f),ignore:(l,u)=>s.ignore(u),extra:(l,u,f,d)=>s.extra(f,d)},formatter:{match:(l,u,f,d)=>o.match(l,t(u),d),matchAll:o.matchAll,matchNode:o.matchNode,canApply:l=>o.canApply(l),closest:l=>o.closest(l),apply:(l,u,f)=>o.apply(l,t(u)),remove:(l,u,f,d)=>o.remove(l,t(u)),toggle:(l,u,f)=>o.toggle(l,t(u)),formatChanged:(l,u,f,d,p)=>o.formatChanged(u,f,d,p)},editor:{getContent:l=>r.getContent(l),setContent:(l,u)=>({content:r.setContent(l,u),html:""}),insertContent:(l,u)=>(r.insertContent(l),""),addVisual:r.addVisual},selection:{getContent:(l,u)=>a.getContent(u)},autocompleter:{addDecoration:i.addDecoration,removeDecoration:i.removeDecoration},raw:{getModel:()=>m.some(c.getRawModel())}}},iM=()=>{const e=V(null),t=V("");return{init:{bindEvents:le},undoManager:{beforeChange:le,add:e,undo:e,redo:e,clear:le,reset:le,hasUndo:Le,hasRedo:Le,transact:e,ignore:le,extra:le},formatter:{match:Le,matchAll:V([]),matchNode:V(void 0),canApply:Le,closest:t,apply:le,remove:le,toggle:le,formatChanged:V({unbind:le})},editor:{getContent:t,setContent:V({content:"",html:""}),insertContent:V(""),addVisual:le},selection:{getContent:t},autocompleter:{addDecoration:le,removeDecoration:le},raw:{getModel:V(m.none())}}},In=e=>oe(e.plugins,"rtc"),cM=e=>Re(e.plugins,"rtc").bind(t=>m.from(t.setup)),lM=e=>{const t=e;return cM(e).fold(()=>(t.rtcInstance=rE(e),m.none()),n=>(t.rtcInstance=iM(),m.some(()=>n().then(s=>(t.rtcInstance=aM(s),s.rtc.isRemote)))))},Sd=e=>e.rtcInstance?e.rtcInstance:rE(e),ze=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},uM=(e,t,n)=>{ze(e).undoManager.beforeChange(t,n)},fM=(e,t,n,s,o,r,a)=>ze(e).undoManager.add(t,n,s,o,r,a),dM=(e,t,n,s)=>ze(e).undoManager.undo(t,n,s),mM=(e,t,n)=>ze(e).undoManager.redo(t,n),gM=(e,t,n)=>{ze(e).undoManager.clear(t,n)},pM=(e,t)=>{ze(e).undoManager.reset(t)},hM=(e,t,n)=>ze(e).undoManager.hasUndo(t,n),bM=(e,t,n)=>ze(e).undoManager.hasRedo(t,n),CM=(e,t,n,s)=>ze(e).undoManager.transact(t,n,s),yM=(e,t,n)=>{ze(e).undoManager.ignore(t,n)},vM=(e,t,n,s,o)=>{ze(e).undoManager.extra(t,n,s,o)},EM=(e,t,n,s,o)=>ze(e).formatter.match(t,n,s,o),SM=(e,t,n)=>ze(e).formatter.matchAll(t,n),wM=(e,t,n,s,o)=>ze(e).formatter.matchNode(t,n,s,o),kM=(e,t)=>ze(e).formatter.canApply(t),_M=(e,t)=>ze(e).formatter.closest(t),xM=(e,t,n,s)=>{ze(e).formatter.apply(t,n,s)},NM=(e,t,n,s,o)=>{ze(e).formatter.remove(t,n,s,o)},AM=(e,t,n,s)=>{ze(e).formatter.toggle(t,n,s)},TM=(e,t,n,s,o,r)=>ze(e).formatter.formatChanged(t,n,s,o,r),RM=(e,t)=>Sd(e).editor.getContent(t),PM=(e,t,n)=>Sd(e).editor.setContent(t,n),DM=(e,t,n)=>Sd(e).editor.insertContent(t,n),OM=(e,t,n)=>ze(e).selection.getContent(t,n),BM=(e,t)=>ze(e).editor.addVisual(t),aE=e=>ze(e).init.bindEvents(),IM=(e,t)=>ze(e).autocompleter.addDecoration(t),LM=e=>ze(e).autocompleter.removeDecoration(),$M=(e,t={})=>{const n=t.format?t.format:"html";return OM(e,n,t)},iE=e=>e.dom.length===0?(Pe(e),m.none()):m.some(e),FM=(e,t)=>e.filter(n=>ia.isBookmarkNode(n.dom)).bind(t?xr:Ds),MM=(e,t,n,s,o)=>{const r=e.dom,a=t.dom,i=s?r.length:a.length;s?(xf(r,a,o,!1,!s),n.setStart(a,i)):(xf(a,r,o,!1,!s),n.setEnd(a,i))},UM=(e,t,n)=>{on(e).each(s=>{const o=e.dom;t&&da(s,N(o,0),n)?tc(o,0,n):!t&&ma(s,N(o,o.length),n)&&_f(o,o.length,n)})},cE=(e,t,n,s,o)=>{e.bind(r=>((s?_f:tc)(r.dom,s?r.dom.length:0,o),t.filter(jt).map(i=>MM(r,i,n,s,o)))).orThunk(()=>FM(t,s).or(t).filter(jt).map(a=>UM(a,s,o)))},zM=(e,t,n)=>{const s=m.from(t.firstChild).map(C.fromDom),o=m.from(t.lastChild).map(C.fromDom);e.deleteContents(),e.insertNode(t);const r=s.bind(Ds).filter(jt).bind(iE),a=o.bind(xr).filter(jt).bind(iE);cE(r,s,e,!0,n),cE(a,o,e,!1,n),e.collapse(!1)},HM=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),WM=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return ps({validate:!1},e.schema).serialize(r)}else return t.content},VM=(e,t,n={})=>{const s=HM(n,t);gd(e,s).each(o=>{const r=WM(e,o),a=e.selection.getRng();zM(a,a.createContextualFragment(r),e.schema),e.selection.setRng(a),la(e,a),pd(e,r,o)})},lE=(e,t,n)=>{if(oe(e,t)){const s=se(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var jM=(e,t)=>{let n,s;const o=(i,c)=>Ye(c,l=>e.is(l,i)),r=i=>e.getParents(i,void 0,e.getRoot()),a=()=>{n={},s={},t.on("NodeChange",i=>{const c=i.element,l=r(c),u={};Ae(n,(f,d)=>{o(d,l).each(p=>{s[d]||(P(f,h=>{h(!0,{node:p,selector:d,parents:l})}),s[d]=f),u[d]=f})}),Ae(s,(f,d)=>{u[d]||(delete s[d],P(f,p=>{p(!1,{node:c,selector:d,parents:l})}))})})};return{selectorChangedWithUnbind:(i,c)=>(n||a(),n[i]||(n[i]=[]),n[i].push(c),o(i,r(t.selection.getStart())).each(()=>{s[i]=n[i]}),{unbind:()=>{lE(n,i,c),lE(s,i,c)}})}};const uE=e=>!!(e&&e.ownerDocument)&&Vn(C.fromDom(e.ownerDocument),C.fromDom(e)),qM=e=>e?uE(e.startContainer)&&uE(e.endContainer):!1,fE=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:a}=jM(e,s),i=(F,K)=>{const ge=e.createRng();M(F)&&M(K)?(ge.setStart(F,K),ge.setEnd(F,K),S(ge),y(!1)):(Hu(e,ge,s.getBody(),!0),S(ge))},c=F=>$M(s,F),l=(F,K)=>VM(s,F,K),u=F=>mC(s.getBody(),E(),F),f=F=>gC(s.getBody(),E(),F),d=(F,K)=>nt.getBookmark(F,K),p=F=>nt.moveToBookmark(F),h=(F,K)=>(wO(e,F,K).each(S),F),g=()=>{const F=E(),K=v();return!F||F.item?!1:F.compareEndPoints?F.compareEndPoints("StartToEnd",F)===0:!K||F.collapsed},b=()=>{const F=E(),K=s.getBody().querySelectorAll('[data-mce-selected="1"]');return K.length>0?Un(K,ge=>e.isEditable(ge.parentElement)):fC(e,F)},y=F=>{const K=E();K.collapse(!!F),S(K)},v=()=>t.getSelection?t.getSelection():t.document.selection,E=()=>{let F;const K=(de,G,Y)=>{try{return G.compareBoundaryPoints(de,Y)}catch{return-1}},ge=t.document;if(M(s.bookmark)&&!no(s)){const de=lf(s);if(de.isSome())return de.map(G=>pf(s,[G])[0]).getOr(ge.createRange())}try{const de=v();de&&!gi(de.anchorNode)&&(de.rangeCount>0?F=de.getRangeAt(0):F=ge.createRange(),F=pf(s,[F])[0])}catch{}if(F||(F=ge.createRange()),Pr(F.startContainer)&&F.collapsed){const de=e.getRoot();F.setStart(de,0),F.setEnd(de,0)}return o&&r&&(K(F.START_TO_START,F,o)===0&&K(F.END_TO_END,F,o)===0?F=r:(o=null,r=null)),F},S=(F,K)=>{if(!qM(F))return;const ge=v();if(F=s.dispatch("SetSelectionRange",{range:F,forward:K}).range,ge){r=F;try{ge.removeAllRanges(),ge.addRange(F)}catch{}K===!1&&ge.extend&&(ge.collapse(F.endContainer,F.endOffset),ge.extend(F.startContainer,F.startOffset)),o=ge.rangeCount>0?ge.getRangeAt(0):null}if(!F.collapsed&&F.startContainer===F.endContainer&&(ge!=null&&ge.setBaseAndExtent)&&F.endOffset-F.startOffset<2&&F.startContainer.hasChildNodes()){const G=F.startContainer.childNodes[F.startOffset];G&&G.nodeName==="IMG"&&(ge.setBaseAndExtent(F.startContainer,F.startOffset,F.endContainer,F.endOffset),(ge.anchorNode!==F.startContainer||ge.focusNode!==F.endContainer)&&ge.setBaseAndExtent(G,0,G,1))}s.dispatch("AfterSetSelectionRange",{range:F,forward:K})},T=F=>(l(e.getOuterHTML(F)),F),O=()=>EO(s.getBody(),E()),U=(F,K)=>SO(e,E(),F,K),A=()=>{const F=v(),K=F==null?void 0:F.anchorNode,ge=F==null?void 0:F.focusNode;if(!F||!K||!ge||gi(K)||gi(ge))return!0;const de=e.createRng(),G=e.createRng();try{de.setStart(K,F.anchorOffset),de.collapse(!0),G.setStart(ge,F.focusOffset),G.collapse(!0)}catch{return!0}return de.compareBoundaryPoints(de.START_TO_START,G)<=0},Ie={dom:e,win:t,serializer:n,editor:s,expand:(F={type:"word"})=>S(to(e).expand(E(),F)),collapse:y,setCursorLocation:i,getContent:c,setContent:l,getBookmark:d,moveToBookmark:p,select:h,isCollapsed:g,isEditable:b,isForward:A,setNode:T,getNode:O,getSel:v,setRng:S,getRng:E,getStart:u,getEnd:f,getSelectedBlocks:U,normalize:()=>{const F=E(),K=v();if(!aD(K)&&Hi(s)){const ge=Yi(e,F);return ge.each(de=>{S(de,A())}),ge.getOr(F)}return F},selectorChanged:(F,K)=>(a(F,K),Ie),selectorChangedWithUnbind:a,getScrollContainer:()=>{let F,K=e.getRoot();for(;K&&K.nodeName!=="BODY";){if(K.scrollHeight>K.clientHeight){F=K;break}K=K.parentNode}return F},scrollIntoView:(F,K)=>{M(F)?j1(s,F,K):la(s,E(),K)},placeCaretAt:(F,K)=>S(Vb(F,K,s.getDoc())),getBoundingClientRect:()=>{const F=E();return F.collapsed?N.fromRangeStart(F).getClientRects()[0]:F.getBoundingClientRect()},destroy:()=>{t=o=r=null,Ve.destroy()}},nt=ia(Ie),Ve=Mb(Ie,s);return Ie.bookmarkManager=nt,Ie.controlSelection=Ve,Ie},KM=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const a=s[r];a.attr("tabindex",a.attr("data-mce-tabindex")),a.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,a=t.url_converter,i=t.url_converter_scope;let c=s.length;for(;c--;){const l=s[c];let u=l.attr(r);u!==void 0?(l.attr(o,u.length>0?u:null),l.attr(r,null)):(u=l.attr(o),o==="style"?u=n.serializeStyle(n.parseStyle(u),l.name):a&&(u=a.call(i,u,o,l.name)),l.attr(o,u.length>0?u:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let a=r.attr("class");a&&(a=a.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",a.length>0?a:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let a=s.length;for(;a--;){const i=s[a];i.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(m.from(i.firstChild).exists(l=>{var u;return!yi((u=l.value)!==null&&u!==void 0?u:"")})?i.unwrap():i.remove())}}),e.addNodeFilter("script,style",(s,o)=>{var r;const a=c=>c.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let i=s.length;for(;i--;){const c=s[i],l=c.firstChild,u=(r=l==null?void 0:l.value)!==null&&r!==void 0?r:"";if(o==="script"){const f=c.attr("type");f&&c.attr("type",f==="mce-no/type"?null:f.replace(/^mce\-/,"")),t.element_format==="xhtml"&&l&&u.length>0&&(l.value=`// <![CDATA[
`+a(u)+`
// ]]>`)}else t.element_format==="xhtml"&&l&&u.length>0&&(l.value=`<!--
`+a(u)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o],a=r.value;t.preserve_cdata&&(a==null?void 0:a.indexOf("[CDATA["))===0?(r.name="#cdata",r.type=4,r.value=n.decode(a.replace(/^\[CDATA\[|\]\]$/g,""))):(a==null?void 0:a.indexOf("mce:protected "))===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(a).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const a=s[r];a.type===7?a.remove():a.type===1&&o==="input"&&!a.attr("type")&&a.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{P(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.remove_trailing_brs&&gv(t,e,e.schema)},GM=e=>{const t=s=>(s==null?void 0:s.name)==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},YM=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const a=document.implementation;if(a.createHTMLDocument){const i=a.createHTMLDocument("");L.each(r.nodeName==="BODY"?r.childNodes:[r],c=>{i.body.appendChild(i.importNode(c,!0))}),r.nodeName!=="BODY"?r=i.body.firstChild:r=i.body,s=o.doc,o.doc=i}return DD(e,{...n,node:r}),s&&(o.doc=s),r},XM=(e,t)=>M(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,ZM=(e,t,n)=>XM(e,n)?YM(e,t,n):t,QM=(e,t,n)=>{L.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},JM=(e,t,n)=>!t.no_events&&e?OD(e,{...t,content:n}).content:n,eU=(e,t,n)=>{const s=zt(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Ci(C.fromDom(t))?s:L.trim(s)},tU=(e,t,n)=>{const s=n.selection?{forced_root_block:!1,...n}:n,o=e.parse(t,s);return GM(o),o},nU=(e,t,n)=>ps(e,t).serialize(n),sU=(e,t,n,s,o)=>{const r=nU(t,n,s);return JM(e,o,r)},oU=(e,t)=>{const n=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},o=t&&t.dom?t.dom:Ne.DOM,r=t&&t.schema?t.schema:ls(s),a=Ko(s,r);KM(a,s,o);const i=(c,l={})=>{const u={format:"html",...l},f=ZM(t,c,u),d=eU(o,f,u),p=tU(a,d,u);return u.format==="tree"?p:sU(t,s,r,p,u)};return{schema:r,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:i,addRules:r.addValidElements,setRules:r.setValidElements,addTempAttr:j(QM,a,n),getTempAttrs:V(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},dE=(e,t)=>{const n=oU(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},rU="html",aU=(e,t)=>({...e,format:t,get:!0,getInner:!0}),iU=(e,t={})=>{const n=t.format?t.format:rU,s=aU(t,n);return jv(e,s).fold(_t,o=>{const r=RM(e,o);return qv(e,r,o)})},cU="html",lU=(e,t)=>({format:cU,...e,set:!0,content:t}),wd=(e,t,n={})=>{const s=lU(n,t);return gd(e,s).map(o=>{const r=PM(e,o.content,o);return pd(e,r.html,o),r.content}).getOr(t)},uU="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),fU="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),dU="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),mE=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],gE=(e,t)=>{const n=se(t,s=>oe(e,s));return Ns(n)},mU=e=>{const t=gE(e,uU),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),Ns(t)},gU=e=>gE(e,fU),pE=(e,t)=>{const n=L.makeMap(e.plugins," "),o=se(t,r=>oe(n,r));return Ns(o)},pU=e=>pE(e,dU),hU=e=>pE(e,mE.map(t=>t.name)),bU=(e,t)=>{const n=mU(e),s=pU(t),o=s.length>0,r=n.length>0,a=t.theme==="mobile";if(o||r||a){const i=`
- `,c=a?`

Themes:${i}mobile`:"",l=o?`

Plugins:${i}${s.join(i)}`:"",u=r?`

Options:${i}${n.join(i)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+c+l+u)}},CU=e=>Ye(mE,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),yU=(e,t)=>{const n=gU(e),s=hU(t),o=s.length>0,r=n.length>0;if(o||r){const a=`
- `,i=o?`

Plugins:${a}${s.map(CU).join(a)}`:"",c=r?`

Options:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+i+c)}},vU=(e,t)=>{bU(e,t),yU(e,t)},pc=Ne.DOM,EU=e=>{pc.setStyle(e.id,"display",e.orgDisplay)},hc=e=>m.from(e).each(t=>t.destroy()),SU=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const s=n.dom;t.selection=n.win=n.dom=s.doc=null}},wU=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),pc.unbind(t,"submit reset",e.formEventDelegate))},kU=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&M(o==null?void 0:o.nextSibling)&&pc.remove(o.nextSibling),BD(e),e.editorManager.remove(e),!e.inline&&s&&EU(e),ID(e),pc.remove(e.getContainer()),hc(t),hc(n),e.destroy()}},_U=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),hc(n),hc(s)),wU(e),SU(e),e.destroyed=!0}},bc=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>oe(e,o)}})(),Go=vt.ModelManager,hE=(e,t)=>t.dom[e],bE=(e,t)=>parseInt(Nn(t,e),10),xU=j(hE,"clientWidth"),NU=j(hE,"clientHeight"),AU=j(bE,"margin-top"),TU=j(bE,"margin-left"),RU=e=>e.dom.getBoundingClientRect(),PU=(e,t,n)=>{const s=xU(e),o=NU(e);return t>=0&&n>=0&&t<=s&&n<=o},DU=(e,t,n,s)=>{const o=RU(t),r=e?o.left+t.dom.clientLeft+TU(t):0,a=e?o.top+t.dom.clientTop+AU(t):0,i=n-r,c=s-a;return{x:i,y:c}},OU=(e,t,n)=>{const s=C.fromDom(e.getBody()),o=e.inline?s:Dx(s),r=DU(e.inline,o,t,n);return PU(o,r.x,r.y)},BU=e=>m.from(e).map(C.fromDom),IU=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return BU(t).map(No).getOr(!1)};var LU=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const CE=e=>{const t=[],n=()=>{const d=e.theme;return d&&d.getNotificationManagerImpl?d.getNotificationManagerImpl():LU()},s=()=>m.from(t[0]),o=(d,p)=>d.type===p.type&&d.text===p.text&&!d.progressBar&&!d.timeout&&!p.progressBar&&!p.timeout,r=()=>{P(t,d=>{d.reposition()})},a=d=>{t.push(d)},i=d=>{gr(t,p=>p===d).each(p=>{t.splice(p,1)})},c=(d,p=!0)=>e.removed||!IU(e)?{}:(p&&e.dispatch("BeforeOpenNotification",{notification:d}),Ye(t,h=>o(n().getArgs(h),d)).getOrThunk(()=>{e.editorManager.setActive(e);const h=n().open(d,()=>{i(h),r(),uC(e)&&s().fold(()=>e.focus(),g=>sC(C.fromDom(g.getEl())))});return a(h),r(),e.dispatch("OpenNotification",{notification:{...h}}),h})),l=()=>{s().each(d=>{n().close(d),i(d),r()})},u=V(t);return(d=>{d.on("SkinLoaded",()=>{const p=ER(d);p&&c({text:p,type:"warning",timeout:0},!1),r()}),d.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),d.on("remove",()=>{P(t.slice(),p=>{n().close(p)})})})(e),{open:c,close:l,getNotifications:u}},Yo=vt.PluginManager,co=vt.ThemeManager;var $U=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const yE=e=>{let t=[];const n=()=>{const g=e.theme;return g&&g.getWindowManagerImpl?g.getWindowManagerImpl():$U()},s=(g,b)=>(...y)=>b?b.apply(g,y):void 0,o=g=>{e.dispatch("OpenWindow",{dialog:g})},r=g=>{e.dispatch("CloseWindow",{dialog:g})},a=g=>{t.push(g),o(g)},i=g=>{r(g),t=se(t,b=>b!==g),t.length===0&&e.focus()},c=()=>m.from(t[t.length-1]),l=g=>{e.editorManager.setActive(e),cf(e),e.ui.show();const b=g();return a(b),b},u=(g,b)=>l(()=>n().open(g,b,i)),f=g=>l(()=>n().openUrl(g,i)),d=(g,b,y)=>{const v=n();v.alert(g,s(y||v,b))},p=(g,b,y)=>{const v=n();v.confirm(g,s(y||v,b))},h=()=>{c().each(g=>{n().close(g),i(g)})};return e.on("remove",()=>{P(t,g=>{n().close(g)})}),{open:u,openUrl:f,alert:d,confirm:p,close:h}},vE=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Cc=(e,t)=>{e._skinLoaded?vE(e,t):e.on("SkinLoaded",()=>{vE(e,t)})},FU=(e,t)=>{Cc(e,bn.translate(["Failed to upload image: {0}",t]))},ka=(e,t,n)=>{Db(e,t,{message:n}),console.error(n)},_a=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,MU=(e,t,n)=>{ka(e,"PluginLoadError",_a("plugin",t,n))},UU=(e,t,n)=>{ka(e,"IconsLoadError",_a("icons",t,n))},zU=(e,t,n)=>{ka(e,"LanguageLoadError",_a("language",t,n))},HU=(e,t,n)=>{ka(e,"ThemeLoadError",_a("theme",t,n))},WU=(e,t,n)=>{ka(e,"ModelLoadError",_a("model",t,n))},VU=(e,t,n)=>{const s=bn.translate(["Failed to initialize plugin: {0}",t]);Db(e,"PluginLoadError",{message:s}),yc(s,n),Cc(e,s)},yc=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},jU=e=>/^[a-z0-9\-]+$/i.test(e),kd=e=>"content/"+e+"/content.css",qU=e=>tinymce.Resource.has(kd(e)),KU=e=>EE(e,pR(e)),GU=e=>EE(e,Rh(e)),EE=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return he(t,r=>qU(r)?r:jU(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},YU=e=>{e.contentCSS=e.contentCSS.concat(KU(e),GU(e))},XU=e=>e?Ft(e.getElementsByTagName("img")):[],ZU=(e,t)=>{const n={};return{findAll:(o,r=He)=>{const a=se(XU(o),c=>{const l=c.src;return c.hasAttribute("data-mce-bogus")||c.hasAttribute("data-mce-placeholder")||!l||l===be.transparentSrc?!1:st(l,"blob:")?!e.isUploaded(l)&&r(c):st(l,"data:")?r(c):!1}),i=he(a,c=>{const l=c.src;if(oe(n,l))return n[l].then(u=>J(u)?u:{image:c,blobInfo:u.blobInfo});{const u=v$(t,l).then(f=>(delete n[l],{image:c,blobInfo:f})).catch(f=>(delete n[l],f));return n[l]=u,u}});return Promise.all(i)}}},SE=()=>{let n={};const s=(d,p)=>({status:d,resultUri:p}),o=d=>d in n;return{hasBlobUri:o,getResultUri:d=>{const p=n[d];return p?p.resultUri:null},isPending:d=>o(d)?n[d].status===1:!1,isUploaded:d=>o(d)?n[d].status===2:!1,markPending:d=>{n[d]=s(1,null)},markUploaded:(d,p)=>{n[d]=s(2,p)},removeFailed:d=>{delete n[d]},destroy:()=>{n={}}}};let QU=0;const JU=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},ez=e=>e+QU+++JU(),tz=()=>{let e=[];const t=f=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[f.toLowerCase()]||"dat",n=(f,d,p,h,g)=>{if(J(f))return s({id:f,name:h,filename:g,blob:d,base64:p});if(yt(f))return s(f);throw new Error("Unknown input type")},s=f=>{if(!f.blob||!f.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const d=f.id||ez("blobid"),p=f.name||d,h=f.blob;return{id:V(d),name:V(p),filename:V(f.filename||p+"."+t(h.type)),blob:V(h),base64:V(f.base64),blobUri:V(f.blobUri||URL.createObjectURL(h)),uri:V(f.uri)}},o=f=>{a(f.id())||e.push(f)},r=f=>Ye(e,f).getOrUndefined(),a=f=>r(d=>d.id()===f);return{create:n,add:o,get:a,getByUri:f=>r(d=>d.blobUri()===f),getByData:(f,d)=>r(p=>p.base64()===f&&p.blob().type===d),findFirst:r,removeByUri:f=>{e=se(e,d=>d.blobUri()===f?(URL.revokeObjectURL(d.blobUri()),!1):!0)},destroy:()=>{P(e,f=>{URL.revokeObjectURL(f.blobUri())}),e=[]}}},nz=(e,t)=>{const n={},s=(g,b)=>g?g.replace(/\/$/,"")+"/"+b.replace(/^\//,""):b,o=(g,b)=>new Promise((y,v)=>{const E=new XMLHttpRequest;E.open("POST",t.url),E.withCredentials=t.credentials,E.upload.onprogress=T=>{b(T.loaded/T.total*100)},E.onerror=()=>{v("Image upload failed due to a XHR Transport error. Code: "+E.status)},E.onload=()=>{if(E.status<200||E.status>=300){v("HTTP Error: "+E.status);return}const T=JSON.parse(E.responseText);if(!T||!J(T.location)){v("Invalid JSON: "+E.responseText);return}y(s(t.basePath,T.location))};const S=new FormData;S.append("file",g.blob(),g.filename()),E.send(S)}),r=Se(t.handler)?t.handler:o,a=()=>new Promise(g=>{g([])}),i=(g,b)=>({url:b,blobInfo:g,status:!0}),c=(g,b)=>({url:"",blobInfo:g,status:!1,error:b}),l=(g,b)=>{L.each(n[g],y=>{y(b)}),delete n[g]},u=(g,b,y)=>(e.markPending(g.blobUri()),new Promise(v=>{let E,S;try{const T=()=>{E&&(E.close(),S=le)},O=A=>{T(),e.markUploaded(g.blobUri(),A),l(g.blobUri(),i(g,A)),v(i(g,A))},U=A=>{T(),e.removeFailed(g.blobUri()),l(g.blobUri(),c(g,A)),v(c(g,A))};S=A=>{A<0||A>100||m.from(E).orThunk(()=>m.from(y).map(pl)).each(_=>{E=_,_.progressBar.value(A)})},b(g,S).then(O,A=>{U(J(A)?{message:A}:A)})}catch(T){v(c(g,T))}})),f=g=>g===o,d=g=>{const b=g.blobUri();return new Promise(y=>{n[b]=n[b]||[],n[b].push(y)})},p=(g,b)=>(g=L.grep(g,y=>!e.isUploaded(y.blobUri())),Promise.all(L.map(g,y=>e.isPending(y.blobUri())?d(y):u(y,r,b))));return{upload:(g,b)=>!t.url&&f(r)?a():p(g,b)}},wE=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),kE=(e,t)=>nz(t,{url:cR(e),basePath:lR(e),credentials:uR(e),handler:fR(e)}),sz=e=>{const t=SE(),n=kE(e,t);return{upload:(s,o=!0)=>n.upload(s,o?wE(e):void 0)}},oz=(e,t)=>e.dom.isEmpty(t.dom)&&M(e.schema.getTextBlockElements()[pe(t)]),rz=e=>t=>{oz(e,t)&&We(t,C.fromHtml('<br data-mce-bogus="1" />'))},az=e=>{const t=tz();let n,s;const o=SE(),r=[],a=E=>S=>e.selection?E(S):[],i=E=>E+(E.indexOf("?")===-1?"?":"&")+new Date().getTime(),c=(E,S,T)=>{let O=0;do O=E.indexOf(S,O),O!==-1&&(E=E.substring(0,O)+T+E.substr(O+S.length),O+=T.length-S.length+1);while(O!==-1);return E},l=(E,S,T)=>{const O=`src="${T}"${T===be.transparentSrc?' data-mce-placeholder="1"':""}`;return E=c(E,`src="${S}"`,O),E=c(E,'data-mce-src="'+S+'"','data-mce-src="'+T+'"'),E},u=(E,S)=>{P(e.undoManager.data,T=>{T.type==="fragmented"?T.fragments=he(T.fragments,O=>l(O,E,S)):T.content=l(T.content,E,S)})},f=(E,S)=>{const T=e.convertURL(S,"src");u(E.src,S),Hn(C.fromDom(E),{src:xh(e)?i(S):S,"data-mce-src":T})},d=()=>(n||(n=kE(e,o)),b().then(a(E=>{const S=he(E,T=>T.blobInfo);return n.upload(S,wE(e)).then(a(T=>{const O=[];let U=!1;const A=he(T,(_,R)=>{const{blobInfo:z,image:Z}=E[R];let re=!1;return _.status&&aR(e)?(_.url&&!ft(Z.src,_.url)&&(U=!0),t.removeByUri(Z.src),In(e)||f(Z,_.url)):_.error&&(_.error.remove&&(u(Z.src,be.transparentSrc),O.push(Z),re=!0),FU(e,_.error.message)),{element:Z,status:_.status,uploadUri:_.url,blobInfo:z,removed:re}});return O.length>0&&!In(e)?e.undoManager.transact(()=>{P(Ll(O),_=>{const R=on(_);Pe(_),R.each(rz(e)),t.removeByUri(_.dom.src)})}):U&&e.undoManager.dispatchChange(),A}))}))),p=()=>_h(e)?d():Promise.resolve([]),h=E=>Un(r,S=>S(E)),g=E=>{r.push(E)},b=()=>(s||(s=ZU(o,t)),s.findAll(e.getBody(),h).then(a(E=>{const S=se(E,T=>J(T)?(Cc(e,T),!1):T.uriType!=="blob");return In(e)||P(S,T=>{u(T.image.src,T.blobInfo.blobUri()),T.image.src=T.blobInfo.blobUri(),T.image.removeAttribute("data-mce-src")}),S}))),y=()=>{t.destroy(),o.destroy(),s=n=null},v=E=>E.replace(/src="(blob:[^"]+)"/g,(S,T)=>{const O=o.getResultUri(T);if(O)return'src="'+O+'"';let U=t.getByUri(T);return U||(U=Rt(e.editorManager.get(),(A,_)=>A||_.editorUpload&&_.editorUpload.blobCache.getByUri(T),void 0)),U?'src="data:'+U.blob().type+";base64,"+U.base64()+'"':S});return e.on("SetContent",()=>{_h(e)?p():b()}),e.on("RawSaveContent",E=>{E.content=v(E.content)}),e.on("GetContent",E=>{E.source_view||E.format==="raw"||E.format==="tree"||(E.content=v(E.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",E=>{P(E,S=>{const T=S.attr("src");if(!T||t.getByUri(T))return;const O=o.getResultUri(T);O&&S.attr("src",O)})})}),{blobCache:t,addFilter:g,uploadImages:d,uploadImagesAuto:p,scanForImages:b,destroy:y}},iz=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},a={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[a,o,r]:[o,a,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,a)=>q(o)&&o.hasAttribute("href"),onformat:(o,r,a)=>{L.each(a,(i,c)=>{t.setAttrib(o,c,i)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return L.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},_E={remove_similar:!0,inherit:!1},Xo={selector:"td,th",..._E},cz={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Xo},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Xo},tablecellbordercolor:{styles:{borderColor:"%value"},...Xo},tablecellclass:{classes:["%value"],...Xo},tableclass:{selector:"table",classes:["%value"],..._E},tablecellborderstyle:{styles:{borderStyle:"%value"},...Xo},tablecellborderwidth:{styles:{borderWidth:"%value"},...Xo}},lz=V(cz),uz=e=>{const t={},n=a=>M(a)?t[a]:t,s=a=>oe(t,a),o=(a,i)=>{a&&(J(a)?(Ge(i)||(i=[i]),P(i,c=>{ct(c.deep)&&(c.deep=!Xt(c)),ct(c.split)&&(c.split=!Xt(c)||Qe(c)),ct(c.remove)&&Xt(c)&&!Qe(c)&&(c.remove="none"),Xt(c)&&Qe(c)&&(c.mixed=!0,c.block_expand=!0),J(c.classes)&&(c.classes=c.classes.split(/\s+/))}),t[a]=i):Ae(a,(c,l)=>{o(l,c)}))},r=a=>(a&&t[a]&&delete t[a],t);return o(iz(e)),o(lz()),o(kR(e)),{get:n,has:s,register:o,unregister:r}},vc=L.each,en=Ne.DOM,_d=e=>M(e)&&yt(e),xE=(e,t)=>{const n=t&&t.schema||ls({}),s=(c,l)=>{l.classes.length>0&&en.addClass(c,l.classes.join(" ")),en.setAttribs(c,l.attrs)},o=c=>{const l=J(c)?{name:c,classes:[],attrs:{}}:c,u=en.create(l.name);return s(u,l),u},r=(c,l)=>{const u=n.getElementRule(c.nodeName.toLowerCase()),f=u==null?void 0:u.parentsRequired;return f&&f.length?l&&ke(f,l)?l:f[0]:!1},a=(c,l,u)=>{let f;const d=l[0],p=_d(d)?d.name:void 0,h=r(c,p);if(h)p===h?(f=d,l=l.slice(1)):f=h;else if(d)f=d,l=l.slice(1);else if(!u)return c;const g=f?o(f):en.create("div");g.appendChild(c),u&&L.each(u,y=>{const v=o(y);g.insertBefore(v,c)});const b=_d(f)?f.siblings:void 0;return a(g,l,b)},i=en.create("div");if(e.length>0){const c=e[0],l=o(c),u=_d(c)?c.siblings:void 0;i.appendChild(a(l,e.slice(1),u))}return i},fz=e=>{e=L.trim(e);let t="div";const n={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,a,i)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":L.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(a==="["){const c=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},dz=e=>J(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),L.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=L.map(t.split(/(?:~\+|~|\+)/),fz),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()):[],mz=(e,t)=>{let n="",s=_R(e);if(s==="")return"";const o=d=>J(d)?d.replace(/%(\w+)/g,""):"",r=(d,p)=>en.getStyle(p??e.getBody(),d,!0);if(J(t)){const d=e.formatter.get(t);if(!d)return"";t=d[0]}if("preview"in t){const d=t.preview;if(d===!1)return"";s=d||s}let a=t.block||t.inline||"span",i;const c=dz(t.selector);c.length>0?(c[0].name||(c[0].name=a),a=t.selector,i=xE(c,e)):i=xE([a],e);const l=en.select(a,i)[0]||i.firstChild;vc(t.styles,(d,p)=>{const h=o(d);h&&en.setStyle(l,p,h)}),vc(t.attributes,(d,p)=>{const h=o(d);h&&en.setAttrib(l,p,h)}),vc(t.classes,d=>{const p=o(d);en.hasClass(l,p)||en.addClass(l,p)}),e.dispatch("PreviewFormats"),en.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i);const u=r("fontSize"),f=/px$/.test(u)?parseInt(u,10):0;return vc(s.split(" "),d=>{let p=r(d,l);if(!(d==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(p)&&(p=r(d),$r(p).toLowerCase()==="#ffffff"))&&!(d==="color"&&$r(p).toLowerCase()==="#000000")){if(d==="font-size"&&/em|%$/.test(p)){if(f===0)return;p=parseFloat(p)/(/%$/.test(p)?100:1)*f+"px"}d==="border"&&p&&(n+="padding:0 2px;"),n+=d+":"+p+";"}}),e.dispatch("AfterPreviewFormats"),en.remove(i),n},gz=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},NE=e=>{const t=uz(e),n=et({});return gz(e),OL(e),In(e)||o$(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{xM(e,s,o,r)},remove:(s,o,r,a)=>{NM(e,s,o,r,a)},toggle:(s,o,r)=>{AM(e,s,o,r)},match:(s,o,r,a)=>EM(e,s,o,r,a),closest:s=>_M(e,s),matchAll:(s,o)=>SM(e,s,o),matchNode:(s,o,r,a)=>wM(e,s,o,r,a),canApply:s=>kM(e,s),formatChanged:(s,o,r,a)=>TM(e,n,s,o,r,a),getCssText:j(mz,e)}},AE=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},pz=(e,t,n)=>{const s=et(!1),o=c=>{gc(t,!1,n),t.add({},c)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",c=>{const l=c.command;AE(l)||(oE(t,n),t.beforeChange())}),e.on("ExecCommand",c=>{const l=c.command;AE(l)||o(c)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",c=>{const l=c.keyCode;if(c.isDefaultPrevented())return;const u=be.os.isMacOS()&&c.key==="Meta";(l>=33&&l<=36||l>=37&&l<=40||l===45||c.ctrlKey||u)&&(o(),e.nodeChanged()),(l===46||l===8)&&e.nodeChanged(),s.get()&&t.typing&&!vd(mc(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged())}),e.on("keydown",c=>{const l=c.keyCode;if(c.isDefaultPrevented())return;if(l>=33&&l<=36||l>=37&&l<=40||l===45){t.typing&&o(c);return}const u=c.ctrlKey&&!c.altKey||c.metaKey;if((l<16||l>20)&&l!==224&&l!==91&&!t.typing&&!u){t.beforeChange(),gc(t,!0,n),t.add({},c),s.set(!0);return}(be.os.isMacOS()?c.metaKey:c.ctrlKey&&!c.altKey)&&t.beforeChange()}),e.on("mousedown",c=>{t.typing&&o(c)});const r=c=>c.inputType==="insertReplacementText",a=c=>c.inputType==="insertText"&&c.data===null,i=c=>c.inputType==="insertFromPaste"||c.inputType==="insertFromDrop";e.on("input",c=>{c.inputType&&(r(c)||a(c)||i(c))&&o(c)}),e.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||e.nodeChanged()})},hz=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},TE=e=>{const t=us(),n=et(0),s=et(0),o={data:[],typing:!1,beforeChange:()=>{uM(e,n,t)},add:(r,a)=>fM(e,o,s,n,t,r,a),dispatchChange:()=>{e.setDirty(!0);const r=mc(e);r.bookmark=Su(e.selection),e.dispatch("change",{level:r,lastLevel:ei(o.data,s.get()).getOrUndefined()})},undo:()=>dM(e,o,n,s),redo:()=>mM(e,s,o.data),clear:()=>{gM(e,o,s)},reset:()=>{pM(e,o)},hasUndo:()=>hM(e,o,s),hasRedo:()=>bM(e,o,s),transact:r=>CM(e,o,n,r),ignore:r=>{yM(e,n,r)},extra:(r,a)=>{vM(e,o,s,r,a)}};return In(e)||pz(e,o,n),hz(e),o},bz=[9,27,H.HOME,H.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,H.DOWN,H.UP,H.LEFT,H.RIGHT].concat(be.browser.isFirefox()?[224]:[]),RE="data-mce-placeholder",PE=e=>e.type==="keydown"||e.type==="keyup",DE=e=>{const t=e.keyCode;return t===H.BACKSPACE||t===H.DELETE},Cz=e=>{if(PE(e)){const t=e.keyCode;return!DE(e)&&(H.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||ke(bz,t))}else return!1},yz=e=>PE(e)&&!(DE(e)||e.type==="keyup"&&e.keyCode===229),vz=(e,t,n)=>{if(Ue(C.fromDom(t),!1)){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},Ez=e=>{var t;const n=e.dom,s=gt(e),o=(t=vR(e))!==null&&t!==void 0?t:"",r=(a,i)=>{if(Cz(a))return;const c=e.getBody(),l=yz(a)?!1:vz(n,c,s);(n.getAttrib(c,RE)!==""!==l||i)&&(n.setAttrib(c,RE,l?o:null),n.setAttrib(c,"aria-placeholder",l?o:null),HD(e,l),e.on(l?"keydown":"keyup",r),e.off(l?"keyup":"keydown",r))};wn(o)&&e.on("init",a=>{r(a,!0),e.on("change SetContent ExecCommand",r),e.on("paste",i=>Zt.setEditorTimeout(e,()=>r(i)))})},Sz=(e,t)=>({block:e,position:t}),wz=(e,t)=>({from:e,to:t}),xd=(e,t)=>{const n=C.fromDom(e),s=C.fromDom(t.container());return nc(n,s).map(o=>Sz(o,t))},kz=e=>!ye(e.from.block,e.to.block),OE=(e,t)=>Os(t,o=>Br(o)||rn(o.dom),o=>ye(o,e)).filter(Mt).getOr(e),_z=(e,t)=>{const n=C.fromDom(e);return ye(OE(n,t.from.block),OE(n,t.to.block))},xz=e=>De(e.from.block.dom)===!1&&De(e.to.block.dom)===!1,Nz=e=>{const t=n=>op(n)||Ql(n.dom);return t(e.from.block)&&t(e.to.block)},Az=(e,t,n)=>$e(n.position.getNode())&&!Ue(n.block)?Uo(!1,n.block.dom).bind(s=>s.isEqual(n.position)?Kt(t,e,s).bind(o=>xd(e,o)):m.some(n)).getOr(n):n,Tz=(e,t,n)=>{const s=xd(e,N.fromRangeStart(n)),o=s.bind(r=>Kt(t,e,r.position).bind(a=>xd(e,a).map(i=>Az(e,t,i))));return dt(s,o,wz).filter(r=>kz(r)&&_z(e,r)&&xz(r)&&Nz(r))},Rz=(e,t,n)=>n.collapsed?Tz(e,t,n):m.none(),Pz=(e,t)=>{const n=at(e);return gr(n,s=>t.isBlock(pe(s))).fold(V(n),s=>n.slice(0,s))},BE=(e,t)=>{const n=Pz(e,t);return P(n,Pe),n},IE=(e,t)=>{const n=Jn(t,e);return Ye(n.reverse(),s=>Ue(s)).each(Pe)},Dz=e=>se(Ig(e),t=>!Ue(t)).length===0,Oz=(e,t,n,s,o)=>{if(Ue(n))return as(n),pt(n.dom);Dz(o)&&Ue(t)&&Ot(o,C.fromTag("br"));const r=Bt(n.dom,N.before(o.dom));return P(BE(t,s),a=>{Ot(o,a)}),IE(e,t),r},Bz=(e,t)=>e.isInline(pe(t)),Iz=(e,t,n,s)=>{if(Ue(n)){if(Ue(t)){const a=mr((i=>{const c=(l,u)=>Tl(l).fold(()=>u,f=>Bz(s,f)?c(f,u.concat(qs(f))):u);return c(i,[])})(n),(i,c)=>(jg(i,c),c),Ir());Ao(t),We(t,a)}return Pe(n),pt(t.dom)}const o=cn(n.dom);return P(BE(t,s),r=>{We(n,r)}),IE(e,t),o},Lz=(e,t)=>{const n=Jn(t,e);return m.from(n[n.length-1])},$z=(e,t)=>Vn(t,e)?Lz(t,e):m.none(),LE=(e,t)=>{Uo(e,t.dom).bind(n=>m.from(n.getNode())).map(C.fromDom).filter(Ms).each(Pe)},$E=(e,t,n,s)=>(LE(!0,t),LE(!1,n),$z(t,n).fold(j(Iz,e,t,n,s),j(Oz,e,t,n,s))),FE=(e,t,n,s,o)=>t?$E(e,s,n,o):$E(e,n,s,o),Nd=(e,t)=>{const n=C.fromDom(e.getBody());return Rz(n.dom,t,e.selection.getRng()).map(o=>()=>{FE(n,t,o.from.block,o.to.block,e.schema).each(r=>{e.selection.setRng(r.toRange())})})},Fz=(e,t,n)=>{const s=t.getRng();return dt(nc(e,C.fromDom(s.startContainer)),nc(e,C.fromDom(s.endContainer)),(o,r)=>ye(o,r)?m.none():m.some(()=>{s.deleteContents(),FE(e,!0,o,r,n).each(a=>{t.setRng(a.toRange())})})).getOr(m.none())},ME=(e,t)=>{const n=C.fromDom(t),s=j(ye,e);return qn(n,Br,s).isSome()},Mz=(e,t)=>ME(e,t.startContainer)||ME(e,t.endContainer),Uz=(e,t)=>{const n=Bt(e.dom,N.fromRangeStart(t)).isNone(),s=Nt(e.dom,N.fromRangeEnd(t)).isNone();return!Mz(e,t)&&n&&s},zz=e=>m.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),Hz=e=>{const t=C.fromDom(e.getBody()),n=e.selection.getRng();return Uz(t,n)?zz(e):Fz(t,e.selection,e.schema)},Ad=(e,t)=>e.selection.isCollapsed()?m.none():Hz(e),es=(e,t,n,s,o)=>m.from(t._selectionOverrides.showCaret(e,n,s,o)),Wz=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},xa=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?m.none():m.some(Wz(t)),Vz=(e,t,n)=>{const s=Du(1,e.getBody(),t),o=N.fromRangeStart(s),r=o.getNode();if(Qr(r))return es(1,e,r,!o.isAtEnd(),!1);const a=o.getNode(!0);if(Qr(a))return es(1,e,a,!1,!1);const i=ro(e.dom.getRoot(),o.getNode());return Qr(i)?es(1,e,i,!1,n):m.none()},Td=(e,t,n)=>t.collapsed?Vz(e,t,n).getOr(t):t,jz=e=>bs(e)||ua(e),qz=e=>Cs(e)||fa(e),Kz=(e,t)=>{B(t)&&t.data.length===0&&e.remove(t)},UE=(e,t,n,s,o,r)=>{es(s,e,r.getNode(!o),o,!0).each(a=>{if(t.collapsed){const i=t.cloneRange();o?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else t.deleteContents();e.selection.setRng(a)}),Kz(e.dom,n)},Gz=(e,t)=>{const n=e.selection.getRng();if(!B(n.commonAncestorContainer))return m.none();const s=t?tt.Forwards:tt.Backwards,o=Dn(e.getBody()),r=j(Ou,t?o.next:o.prev),a=t?jz:qz,i=sa(s,e.getBody(),n),c=r(i),l=c&&Qt(t,c);if(!l||!Fi(i,l))return m.none();if(a(l))return m.some(()=>UE(e,n,i.getNode(),s,t,l));const u=r(l);return u&&a(u)&&Fi(l,u)?m.some(()=>UE(e,n,i.getNode(),s,t,u)):m.none()},Rd=(e,t)=>Gz(e,t),Pd=(e,t)=>{const n=e.getBody();return t?pt(n).filter(bs):cn(n).filter(Cs)},Dd=e=>{const t=e.selection.getRng();return!t.collapsed&&(Pd(e,!0).exists(n=>n.isEqual(N.fromRangeStart(t)))||Pd(e,!1).exists(n=>n.isEqual(N.fromRangeEnd(t))))},Yz=e=>M(e)&&(Br(C.fromDom(e))||Or(C.fromDom(e))),Ht=Tn.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Xz=(e,t)=>{const n=t.getNode(!e),s=e?"after":"before";return q(n)&&n.getAttribute("data-mce-caret")===s},Zz=(e,t,n,s,o)=>{const r=a=>o.isInline(a.nodeName.toLowerCase())&&!Rn(n,s,e);return Xh(!t,n).fold(()=>Xh(t,s).fold(Le,r),r)},zE=(e,t,n,s)=>{const o=s.getNode(!t);return nc(C.fromDom(e),C.fromDom(n.getNode())).map(r=>Ue(r)?Ht.remove(r.dom):Ht.moveToElement(o)).orThunk(()=>m.some(Ht.moveToElement(o)))},HE=(e,t,n,s)=>Kt(t,e,n).bind(o=>Yz(o.getNode())||Zz(e,t,n,o,s)?m.none():t&&De(o.getNode())||!t&&De(o.getNode(!0))?zE(e,t,n,o):t&&Cs(n)||!t&&bs(n)?m.some(Ht.moveToPosition(o)):m.none()),Qz=(e,t)=>qe(t)?m.none():e&&De(t.nextSibling)?m.some(Ht.moveToElement(t.nextSibling)):!e&&De(t.previousSibling)?m.some(Ht.moveToElement(t.previousSibling)):m.none(),Jz=(e,t,n)=>n.fold(s=>m.some(Ht.remove(s)),s=>m.some(Ht.moveToElement(s)),s=>Rn(t,s,e)?m.none():m.some(Ht.moveToPosition(s))),eH=(e,t,n,s)=>Xz(t,n)?Qz(t,n.getNode(!t)).orThunk(()=>HE(e,t,n,s)):HE(e,t,n,s).bind(o=>Jz(e,n,o)),tH=(e,t,n,s)=>{const o=Du(t?1:-1,e,n),r=N.fromRangeStart(o),a=C.fromDom(e);return!t&&Cs(r)?m.some(Ht.remove(r.getNode(!0))):t&&bs(r)?m.some(Ht.remove(r.getNode())):!t&&bs(r)&&Sf(a,r,s)?iB(a,r,s).map(i=>Ht.remove(i.getNode())):t&&Cs(r)&&Ef(a,r,s)?cB(a,r,s).map(i=>Ht.remove(i.getNode())):eH(e,t,r,s)},nH=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),so(e,t,C.fromDom(n)),!0),sH=(e,t)=>n=>{const s=t?N.before(n):N.after(n);return e.selection.setRng(s.toRange()),!0},oH=e=>t=>(e.selection.setRng(t.toRange()),!0),WE=(e,t)=>m.from(ro(e.getBody(),t)),rH=(e,t)=>{const n=e.selection.getNode();return WE(e,n).filter(De).fold(()=>tH(e.getBody(),t,e.selection.getRng(),e.schema).map(s=>()=>s.fold(nH(e,t),sH(e,t),oH(e))),()=>m.some(le))},aH=e=>{P(mt(e,".mce-offscreen-selection"),Pe)},iH=(e,t)=>{const n=e.selection.getNode();return De(n)&&!hi(n)?WE(e,n.parentNode).filter(De).fold(()=>m.some(()=>{aH(C.fromDom(e.getBody())),so(e,t,C.fromDom(e.selection.getNode())),Af(e)}),()=>m.some(le)):Dd(e)?m.some(()=>{cy(e,e.selection.getRng(),C.fromDom(e.getBody()))}):m.none()},VE=e=>{const t=e.dom,n=e.selection,s=ro(e.getBody(),n.getNode());if(rn(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(N.before(o).toRange())}return!0},Od=(e,t)=>e.selection.isCollapsed()?rH(e,t):iH(e,t),cH=(e,t)=>{const n=N.fromRangeStart(e.selection.getRng());return Kt(t,e.getBody(),n).filter(s=>t?JO(s):eB(s)).bind(s=>Pu(t?0:-1,s)).map(s=>()=>e.selection.select(s))},Bd=(e,t)=>e.selection.isCollapsed()?cH(e,t):m.none(),Zo=B,jE=e=>Zo(e)&&e.data[0]===Ze,qE=e=>Zo(e)&&e.data[e.data.length-1]===Ze,KE=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(Ze)},lH=e=>{var t;if(Zo(e.previousSibling))return qE(e.previousSibling)||e.previousSibling.appendData(Ze),e.previousSibling;if(Zo(e))return jE(e)||e.insertData(0,Ze),e;{const n=KE(e);return(t=e.parentNode)===null||t===void 0||t.insertBefore(n,e),n}},uH=e=>{var t,n;if(Zo(e.nextSibling))return jE(e.nextSibling)||e.nextSibling.insertData(0,Ze),e.nextSibling;if(Zo(e))return qE(e)||e.appendData(Ze),e;{const s=KE(e);return e.nextSibling?(t=e.parentNode)===null||t===void 0||t.insertBefore(s,e.nextSibling):(n=e.parentNode)===null||n===void 0||n.appendChild(s),s}},Ec=(e,t)=>e?lH(t):uH(t),fH=j(Ec,!0),dH=j(Ec,!1),GE=(e,t)=>B(e.container())?Ec(t,e.container()):Ec(t,e.getNode()),YE=(e,t)=>{const n=t.get();return n&&e.container()===n&&is(n)},Id=(e,t)=>t.fold(n=>{Xs(e.get());const s=fH(n);return e.set(s),m.some(N(s,s.length-1))},n=>pt(n).map(s=>{if(YE(s,e)){const o=e.get();return N(o,1)}else{Xs(e.get());const o=GE(s,!0);return e.set(o),N(o,1)}}),n=>cn(n).map(s=>{if(YE(s,e)){const o=e.get();return N(o,o.length-1)}else{Xs(e.get());const o=GE(s,!1);return e.set(o),N(o,o.length-1)}}),n=>{Xs(e.get());const s=dH(n);return e.set(s),m.some(N(s,1))}),XE=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return m.none()},St=Tn.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),ZE=(e,t)=>{const n=ms(t,e);return n||e},mH=(e,t,n)=>{const s=sy(n),o=ZE(t,s.container());return ys(e,o,s).fold(()=>Nt(o,s).bind(j(ys,e,o)).map(r=>St.before(r)),m.none)},gH=(e,t)=>Qs(e,t)===null,QE=(e,t,n)=>ys(e,t,n).filter(j(gH,t)),pH=(e,t,n)=>{const s=oy(n);return QE(e,t,s).bind(o=>Bt(o,s).isNone()?m.some(St.start(o)):m.none())},hH=(e,t,n)=>{const s=sy(n);return QE(e,t,s).bind(o=>Nt(o,s).isNone()?m.some(St.end(o)):m.none())},bH=(e,t,n)=>{const s=oy(n),o=ZE(t,s.container());return ys(e,o,s).fold(()=>Bt(o,s).bind(j(ys,e,o)).map(r=>St.after(r)),m.none)},JE=e=>!ny(Ld(e)),Ln=(e,t,n)=>XE([mH,pH,hH,bH],[e,t,n]).filter(JE),Ld=e=>e.fold(_t,_t,_t,_t),eS=e=>e.fold(V("before"),V("start"),V("end"),V("after")),Sc=e=>e.fold(St.before,St.before,St.after,St.after),$d=e=>e.fold(St.start,St.start,St.end,St.end),CH=(e,t)=>eS(e)===eS(t)&&Ld(e)===Ld(t),yH=(e,t,n,s,o,r)=>dt(ys(t,n,s),ys(t,n,o),(a,i)=>a!==i&&UB(n,a,i)?St.after(e?a:i):r).getOr(r),vH=(e,t)=>e.fold(He,n=>!CH(n,t)),EH=(e,t,n,s,o)=>{const r=Qt(e,o);return Kt(e,n,r).map(j(Qt,e)).fold(()=>s.map(Sc),c=>Ln(t,n,c).map(j(yH,e,t,n,r,c)).filter(j(vH,s))).filter(JE)},SH=(e,t)=>e?t.fold(Sn(m.some,St.start),m.none,Sn(m.some,St.after),m.none):t.fold(m.none,Sn(m.some,St.before),m.none,Sn(m.some,St.end)),wH=(e,t,n,s)=>{const o=Qt(e,s),r=Ln(t,n,o);return Ln(t,n,o).bind(j(SH,e)).orThunk(()=>EH(e,t,n,r,s))},kH=e=>Se(e.selection.getSel().modify),tS=(e,t,n)=>{const s=e?1:-1;return t.setRng(N(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},_H=(e,t)=>{const n=t.selection.getRng(),s=e?N.fromRangeEnd(n):N.fromRangeStart(n);return kH(t)?e&&jl(s)?tS(!0,t.selection,s):!e&&ql(s)?tS(!1,t.selection,s):!1:!1};var $n;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})($n||($n={}));const wc=(e,t)=>e===tt.Backwards?pr(t):t,xH=(e,t,n)=>e===tt.Forwards?t.next(n):t.prev(n),NH=(e,t,n,s)=>$e(s.getNode(t===tt.Forwards))?$n.Br:Rn(n,s)===!1?$n.Block:$n.Wrap,nS=(e,t,n,s)=>{const o=Dn(n);let r=s;const a=[];for(;r;){const i=xH(t,o,r);if(!i)break;if($e(i.getNode(!1)))return t===tt.Forwards?{positions:wc(t,a).concat([i]),breakType:$n.Br,breakAt:m.some(i)}:{positions:wc(t,a),breakType:$n.Br,breakAt:m.some(i)};if(!i.isVisible()){r=i;continue}if(e(r,i)){const c=NH(n,t,r,i);return{positions:wc(t,a),breakType:c,breakAt:m.some(i)}}a.push(i),r=i}return{positions:wc(t,a),breakType:$n.Eol,breakAt:m.none()}},sS=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===tt.Backwards?r.concat(o):[o].concat(r)}).getOr([]),Fd=(e,t)=>Rt(e,(n,s)=>n.fold(()=>m.some(s),o=>dt(Pt(o.getClientRects()),Pt(s.getClientRects()),(r,a)=>{const i=Math.abs(t-r.left);return Math.abs(t-a.left)<=i?s:o}).or(n)),m.none()),kc=(e,t)=>Pt(t.getClientRects()).bind(n=>Fd(e,n.left)),Na=j(nS,N.isAbove,-1),Aa=j(nS,N.isBelow,1),oS=j(sS,-1,Na),rS=j(sS,1,Aa),aS=(e,t)=>Na(e,t).breakAt.isNone(),iS=(e,t)=>Aa(e,t).breakAt.isNone(),AH=e=>pt(e).map(t=>[t].concat(Aa(e,t).positions)).getOr([]),TH=e=>cn(e).map(t=>Na(e,t).positions.concat(t)).getOr([]),RH=(e,t)=>kc(oS(e,t),t),PH=(e,t)=>kc(rS(e,t),t),DH=De,cS=(e,t)=>Math.abs(e.left-t),lS=(e,t)=>Math.abs(e.right-t),OH=e=>Eo(e,"node"),uS=(e,t)=>oi(e,(n,s)=>{const o=Math.min(cS(n,t),lS(n,t)),r=Math.min(cS(s,t),lS(s,t));return r===o&&OH(s)&&DH(s.node)||r<o?s:n}),BH=e=>{const t=n=>he(n,s=>{const o=Gs(s);return o.node=e,o});if(q(e))return t(e.getClientRects());if(B(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},fS=e=>sn(e,BH);var Ta;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ta||(Ta={}));const IH=(e,t,n,s)=>{let o=s;for(;o=ea(o,e,lp,t);)if(n(o))return},dS=(e,t,n,s,o,r)=>{let a=0;const i=[],c=f=>{let d=fS([f]);e===-1&&(d=d.reverse());for(let p=0;p<d.length;p++){const h=d[p];if(!n(h,l)){if(i.length>0&&t(h,Ts(i))&&a++,h.line=a,o(h))return!0;i.push(h)}}return!1},l=Ts(r.getClientRects());if(!l)return i;const u=r.getNode();return u&&(c(u),IH(e,s,c,u)),i},LH=(e,t)=>t.line>e,$H=(e,t)=>t.line===e,FH=j(dS,Ta.Up,qr,Kr),MH=j(dS,Ta.Down,Kr,qr),mS=e=>Ts(e.getClientRects()),UH=(e,t,n,s)=>{const o=Dn(t);let r,a,i,c;const l=[];let u=0;e===1?(r=o.next,a=Kr,i=qr,c=N.after(s)):(r=o.prev,a=qr,i=Kr,c=N.before(s));const f=mS(c);do{if(!c.isVisible())continue;const d=mS(c);if(i(d,f))continue;l.length>0&&a(d,Ts(l))&&u++;const p=Gs(d);if(p.position=c,p.line=u,n(p))return l;l.push(p)}while(c=r(c));return l},gS=e=>t=>LH(e,t),Md=e=>t=>$H(e,t),ts=(e,t)=>{e.selection.setRng(t),la(e,e.selection.getRng())},Ud=(e,t,n)=>m.some(Td(e,t,n)),pS=(e,t,n,s,o,r)=>{const a=t===tt.Forwards,i=Dn(e.getBody()),c=j(Ou,a?i.next:i.prev),l=a?s:o;if(!n.collapsed){const h=Ri(n);if(r(h))return es(t,e,h,t===tt.Backwards,!1);if(Dd(e)){const g=n.cloneRange();return g.collapse(t===tt.Backwards),m.from(g)}}const u=sa(t,e.getBody(),n);if(l(u))return xa(e,u.getNode(!a));let f=c(u);const d=ap(n);if(f)f=Qt(a,f);else return d?m.some(n):m.none();if(l(f))return es(t,e,f.getNode(!a),a,!1);const p=c(f);return p&&l(p)&&Fi(f,p)?es(t,e,p.getNode(!a),a,!1):d?Ud(e,f.toRange(),!1):m.none()},hS=(e,t,n,s,o,r)=>{const a=sa(t,e.getBody(),n),i=Ts(a.getClientRects()),c=t===Ta.Down,l=e.getBody();if(!i)return m.none();if(Dd(e)){const b=c?N.fromRangeEnd(n):N.fromRangeStart(n);return(c?PH:RH)(l,b).orThunk(()=>m.from(b)).map(v=>v.toRange())}const f=(c?MH:FH)(l,gS(1),a),d=se(f,Md(1)),p=i.left,h=uS(d,p);if(h&&r(h.node)){const b=Math.abs(p-h.left),y=Math.abs(p-h.right);return es(t,e,h.node,b<y,!1)}let g;if(s(a)?g=a.getNode():o(a)?g=a.getNode(!0):g=Ri(n),g){const b=UH(t,l,gS(1),g);let y=uS(se(b,Md(1)),p);if(y||(y=Ts(se(b,Md(0))),y))return Ud(e,y.position.toRange(),!1)}return d.length===0?zd(e,c).filter(c?o:s).map(b=>Td(e,b.toRange(),!1)):m.none()},zd=(e,t)=>{const n=e.selection.getRng(),s=t?N.fromRangeEnd(n):N.fromRangeStart(n),o=LP(s.container(),e.getBody());if(t){const r=Aa(o,s);return As(r.positions)}else{const r=Na(o,s);return Pt(r.positions)}},bS=(e,t,n)=>zd(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),_c=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},CS=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},yS=(e,t,n)=>Id(t,n).map(s=>(_c(e,s),n)),zH=(e,t,n)=>{const s=N.fromRangeStart(e);if(e.collapsed)return s;{const o=N.fromRangeEnd(e);return n?Bt(t,o).getOr(o):Nt(t,s).getOr(s)}},HH=(e,t,n)=>{const s=e.getBody(),o=zH(e.selection.getRng(),s,n),r=j(oo,e);return wH(n,r,s,o).bind(i=>yS(e,t,i))},WH=(e,t,n)=>{const s=he(mt(C.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),a=>a.dom),o=se(s,e),r=se(n,e);P(Ja(o,r),j(CS,!1)),P(Ja(r,o),j(CS,!0))},VH=(e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const s=N.fromRangeStart(e.selection.getRng());N.isTextPosition(s)&&!zB(s)&&(_c(e,kP(n,s)),t.set(null))}},jH=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=se(s,e);P(o,r=>{const a=N.fromRangeStart(t.selection.getRng());Ln(e,t.getBody(),a).bind(i=>yS(t,n,i))})}},vS=(e,t,n)=>Zr(e)?HH(e,t,n).isSome():!1,ES=(e,t,n)=>Zr(t)?_H(e,t):!1,qH=e=>{const t=et(null),n=j(oo,e);return e.on("NodeChange",s=>{Zr(e)&&(WH(n,e.dom,s.parents),VH(e,t),jH(n,e,t,s.parents))}),t},KH=j(ES,!0),GH=j(ES,!1),xc=(e,t,n)=>{if(Zr(e)){const s=zd(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?N.fromRangeEnd(o):N.fromRangeStart(o)});return Ln(j(oo,e),e.getBody(),s).exists(o=>{const r=Sc(o);return Id(n,r).exists(a=>(_c(e,a),!0))})}else return!1},YH=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},XH=e=>dt(pt(e),cn(e),(t,n)=>{const s=Qt(!0,t),o=Qt(!1,n);return Nt(e,s).forall(r=>r.isEqual(o))}).getOr(!0),SS=(e,t)=>n=>Id(t,n).map(s=>()=>_c(e,s)),wS=(e,t,n,s)=>{const o=e.getBody(),r=j(oo,e);e.undoManager.ignore(()=>{e.selection.setRng(YH(n,s)),Nf(e),Ln(r,o,N.fromRangeStart(e.selection.getRng())).map($d).bind(SS(e,t)).each(dr)}),e.nodeChanged()},ZH=(e,t)=>{const n=ms(t,e);return n||e},QH=(e,t,n,s)=>{const o=ZH(e.getBody(),s.container()),r=j(oo,e),a=Ln(r,o,s);return a.bind(c=>n?c.fold(V(m.some($d(c))),m.none,V(m.some(Sc(c))),m.none):c.fold(m.none,V(m.some(Sc(c))),m.none,V(m.some($d(c))))).map(SS(e,t)).getOrThunk(()=>{const c=Mo(n,o,s),l=c.bind(u=>Ln(r,o,u));return dt(a,l,()=>ys(r,o,s).bind(u=>XH(u)?m.some(()=>{so(e,n,C.fromDom(u))}):m.none())).getOrThunk(()=>l.bind(()=>c.map(u=>()=>{n?wS(e,t,s,u):wS(e,t,u,s)})))})},Hd=(e,t,n)=>{if(e.selection.isCollapsed()&&Zr(e)){const s=N.fromRangeStart(e.selection.getRng());return QH(e,t,n,s)}return m.none()},JH=e=>Pl(e)>1,kS=(e,t)=>{const n=C.fromDom(e.getBody()),s=C.fromDom(e.selection.getStart()),o=Jn(s,n);return gr(o,t).fold(V(o),r=>o.slice(0,r))},e2=e=>Pl(e)===1,t2=e=>kS(e,t=>e.schema.isBlock(pe(t))||JH(t)),n2=e=>kS(e,t=>e.schema.isBlock(pe(t))),_S=(e,t)=>{const n=j(Iy,e);return sn(t,s=>n(s)?[s.dom]:[])},xS=e=>{const t=n2(e);return _S(e,t)},s2=(e,t,n,s)=>{const o=_S(t,s);if(o.length===0)so(t,e,n);else{const r=By(n.dom,o);t.selection.setRng(r.toRange())}},o2=(e,t)=>{const n=se(t2(e),e2);return As(n).bind(s=>{const o=N.fromRangeStart(e.selection.getRng());return ay(t,o,s.dom)&&!Zu(s)?m.some(()=>s2(t,e,s,n)):m.none()})},r2=(e,t)=>{const n=t.parentElement;return $e(t)&&!kt(n)&&e.dom.isEmpty(n)},a2=e=>Zu(C.fromDom(e)),NS=(e,t)=>{const n=e.selection.getStart(),s=r2(e,n)||a2(n)?By(n,t):BL(e.selection.getRng(),t);e.selection.setRng(s.toRange())},i2=(e,t)=>{const n=Ja(t,xS(e));n.length>0&&NS(e,n)},AS=e=>B(e.startContainer),c2=e=>e.startOffset===0&&AS(e),l2=(e,t)=>{const n=t.startContainer.parentElement;return!kt(n)&&Iy(e,C.fromDom(n))},u2=e=>{const t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!kt(t)&&!kt(n)&&t.isEqualNode(n)},f2=e=>{const t=e.endContainer;return e.endOffset===(B(t)?t.length:t.childNodes.length)},d2=e=>u2(e)&&f2(e),m2=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),g2=e=>d2(e)||m2(e),p2=e=>{const t=e.selection.getRng();return c2(t)&&l2(e,t)&&g2(t)},h2=e=>{if(p2(e)){const t=xS(e);return m.some(()=>{Nf(e),i2(e,t)})}else return m.none()},Wd=(e,t)=>e.selection.isCollapsed()?o2(e,t):h2(e),b2=(e,t)=>qB(e,n=>Gt(n.dom),n=>t.isBlock(pe(n))),C2=e=>b2(C.fromDom(e.selection.getStart()),e.schema),y2=e=>{const t=e.selection.getRng();return t.collapsed&&(AS(t)||e.dom.isEmpty(t.startContainer))&&!C2(e)},Ra=e=>(y2(e)&&NS(e,[]),!0),Vd=(e,t,n)=>M(n)?m.some(()=>{e._selectionOverrides.hideFakeCaret(),so(e,t,C.fromDom(n))}):m.none(),v2=(e,t)=>{const n=t?ua:fa,s=t?tt.Forwards:tt.Backwards,o=sa(s,e.getBody(),e.selection.getRng());return n(o)?Vd(e,t,o.getNode(!t)):m.from(Qt(t,o)).filter(r=>n(r)&&Fi(o,r)).bind(r=>Vd(e,t,r.getNode(!t)))},E2=(e,t)=>{const n=e.selection.getNode();return An(n)?Vd(e,t,n):m.none()},jd=(e,t)=>e.selection.isCollapsed()?v2(e,t):E2(e,t),S2=e=>Os(e,t=>rn(t.dom)||De(t.dom)).exists(t=>rn(t.dom)),qd=e=>ri(e??"").getOr(0),TS=(e,t)=>{const n=e||SN(t)?"margin":"padding",s=Nn(t,"direction")==="rtl"?"-right":"-left";return n+s},w2=(e,t,n,s,o,r)=>{const a=TS(n,C.fromDom(r)),i=qd(e.getStyle(r,a));if(t==="outdent"){const c=Math.max(0,i-s);e.setStyle(r,a,c?c+o:"")}else{const c=i+s+o;e.setStyle(r,a,c)}},k2=(e,t)=>Un(t,n=>{const s=TS(Th(e),n),o=fi(n,s).map(qd).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),RS=e=>{const t=DS(e);return!e.mode.isReadOnly()&&(t.length>1||k2(e,t))},PS=e=>Vl(e)||Or(e),_2=e=>on(e).exists(PS),DS=e=>se(Ll(e.selection.getSelectedBlocks()),t=>!PS(t)&&!_2(t)&&S2(t)),OS=(e,t)=>{var n,s;const{dom:o}=e,r=gR(e),a=(s=(n=/[a-z%]+$/i.exec(r))===null||n===void 0?void 0:n[0])!==null&&s!==void 0?s:"px",i=qd(r),c=Th(e);P(DS(e),l=>{w2(o,t,c,i,a,l.dom)})},x2=e=>OS(e,"indent"),BS=e=>OS(e,"outdent"),IS=e=>{if(e.selection.isCollapsed()&&RS(e)){const t=e.dom,n=e.selection.getRng(),s=N.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&vf(C.fromDom(o),s,e.schema))return m.some(()=>BS(e))}return m.none()},LS=(e,t,n)=>vo([IS,Od,Rd,(s,o)=>Hd(s,t,o),Nd,Lf,Bd,jd,Ad,Wd],s=>s(e,n)).filter(s=>e.selection.isEditable()),N2=(e,t)=>{LS(e,t,!1).fold(()=>{e.selection.isEditable()&&(Nf(e),Af(e))},dr)},A2=(e,t)=>{LS(e,t,!0).fold(()=>{e.selection.isEditable()&&WB(e)},dr)},T2=(e,t)=>{e.addCommand("delete",()=>{N2(e,t)}),e.addCommand("forwardDelete",()=>{A2(e,t)})},$S=5,R2=400,FS=e=>e.touches===void 0||e.touches.length!==1?m.none():m.some(e.touches[0]),P2=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>$S||s>$S},D2=e=>{const t=us(),n=et(!1),s=gu(o=>{e.dispatch("longpress",{...o,type:"longpress"}),n.set(!0)},R2);e.on("touchstart",o=>{FS(o).each(r=>{s.cancel();const a={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(a)})},!0),e.on("touchmove",o=>{s.cancel(),FS(o).each(r=>{t.on(a=>{P2(r,a)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},Kd=(e,t)=>oe(e,t.nodeName),O2=(e,t)=>B(t)?!0:q(t)?!Kd(e.getBlockElements(),t)&&!Yt(t)&&!zs(e,t)&&!Yl(t):!1,B2=(e,t,n)=>Fe($C(C.fromDom(n),C.fromDom(t)),s=>Kd(e,s.dom)),I2=(e,t)=>{if(B(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||Kd(e,t.nextSibling)||Yl(t.nextSibling)}return!1},MS=e=>e.dom.create(gt(e),Xr(e)),L2=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements(),r=n.getStart(),a=e.getBody();let i,c,l=!1;const u=gt(e);if(!r||!q(r))return;const f=a.nodeName.toLowerCase();if(!s.isValidChild(f,u.toLowerCase())||B2(o,a,r))return;const d=n.getRng(),{startContainer:p,startOffset:h,endContainer:g,endOffset:b}=d,y=no(e);let v=a.firstChild;for(;v;)if(q(v)&&aA(s,v),O2(s,v)){if(I2(o,v)){c=v,v=v.nextSibling,t.remove(c);continue}i||(i=MS(e),a.insertBefore(i,v),l=!0),c=v,v=v.nextSibling,i.appendChild(c)}else i=null,v=v.nextSibling;l&&y&&(d.setStart(p,h),d.setEnd(g,b),n.setRng(d),e.nodeChanged())},US=(e,t,n)=>{const s=C.fromDom(MS(e)),o=Ir();We(s,o),n(t,s);const r=document.createRange();return r.setStartBefore(o.dom),r.setEndBefore(o.dom),r},$2=e=>{e.on("NodeChange",j(L2,e))},zS=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,F2=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],a=r>0?t.charAt(r-1):"";if(a==='"')return s;if(a===">"){const i=t.lastIndexOf("<",r);if(i!==-1&&t.substring(i,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},M2=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],F2(e,o,Lh(e)));n.content=o}},U2=(e,t)=>Un(e,n=>{const s=t.match(n);return s!==null&&s[0].length===t.length}),z2=e=>{const t="contenteditable",n=" "+L.trim(aP(e))+" ",s=" "+L.trim(Lh(e))+" ",o=zS(n),r=zS(s),a=iP(e);a.length>0&&e.on("BeforeSetContent",i=>{M2(e,a,i)}),e.parser.addAttributeFilter("class",i=>{let c=i.length;for(;c--;){const l=i[c];o(l)?l.attr(t,"true"):r(l)&&l.attr(t,"false")}}),e.serializer.addAttributeFilter(t,i=>{let c=i.length;for(;c--;){const l=i[c];if(!o(l)&&!r(l))continue;const u=l.attr("data-mce-content");a.length>0&&u?U2(a,u)?(l.name="#text",l.type=3,l.raw=!0,l.value=u):l.remove():l.attr(t,null)}})},H2=e=>Ar(C.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),HS=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Kl(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},W2=(e,t)=>{const n=H2(e);if(n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),HS(e,n);return}rp(n)&&(HS(e,n),e.undoManager.add())}},V2=e=>{e.on("keyup compositionstart",j(W2,e))},WS=De,j2=(e,t,n)=>pS(t,e,n,bs,Cs,WS),q2=(e,t,n)=>hS(t,e,n,r=>bs(r)||IC(r),r=>Cs(r)||LC(r),WS),K2=e=>{const t=e.dom.create(gt(e));return t.innerHTML='<br data-mce-bogus="1">',t},VS=(e,t,n)=>{const s=Dn(e.getBody()),o=j(Ou,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(N.fromRangeStart(n))){const i=C.fromDom(K2(e));t===1?Kn(C.fromDom(r),i):Ot(C.fromDom(r),i),e.selection.select(i.dom,!0),e.selection.collapse()}}},G2=(e,t)=>{const n=t?tt.Forwards:tt.Backwards,s=e.selection.getRng();return j2(n,e,s).orThunk(()=>(VS(e,n,s),m.none()))},Y2=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return q2(n,e,s).orThunk(()=>(VS(e,n,s),m.none()))},X2=(e,t)=>{const n=t?e.getEnd(!0):e.getStart(!0);return ny(n)?!t:t},jS=(e,t)=>G2(e,X2(e.selection,t)).exists(n=>(ts(e,n),!0)),qS=(e,t)=>Y2(e,t).exists(n=>(ts(e,n),!0)),KS=(e,t)=>bS(e,t,t?Cs:bs),Nc=(e,t)=>Pd(e,!t).map(n=>{const s=n.toRange(),o=e.selection.getRng();return t?s.setStart(o.startContainer,o.startOffset):s.setEnd(o.endContainer,o.endOffset),s}).exists(n=>(ts(e,n),!0)),Z2=e=>ke(["figcaption"],pe(e)),Q2=(e,t,n)=>{const s=j(ye,t);return Os(C.fromDom(e.container()),o=>n.isBlock(pe(o)),s).filter(Z2)},J2=(e,t,n)=>t?iS(e.dom,n):aS(e.dom,n),eW=(e,t)=>{const n=C.fromDom(e.getBody()),s=N.fromRangeStart(e.selection.getRng());return Q2(s,n,e.schema).exists(()=>{if(J2(n,t,s)){const r=US(e,n,t?We:Il);return e.selection.setRng(r),!0}else return!1})},GS=(e,t)=>e.selection.isCollapsed()?eW(e,t):!1,tW=(e,t,n)=>{const s=e.selection.getRng(),o=N.fromRangeStart(s);return e.getBody().firstChild===t&&aS(n,o)?(e.execCommand("InsertNewBlockBefore"),!0):!1},nW=(e,t)=>{const n=e.selection.getRng(),s=N.fromRangeStart(n);return e.getBody().lastChild===t&&iS(t,s)?(e.execCommand("InsertNewBlockAfter"),!0):!1},sW=(e,t)=>t?m.from(e.dom.getParent(e.selection.getNode(),"details")).map(n=>nW(e,n)).getOr(!1):m.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(n=>m.from(e.dom.getParent(n,"details")).map(s=>tW(e,s,n))).getOr(!1),YS=(e,t)=>sW(e,t),XS={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},oW=e=>he(e,t=>({...XS,...t})),rW=e=>he(e,t=>({...XS,...t})),ZS=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,aW=(e,t)=>sn(oW(e),n=>ZS(n,t)?[n]:[]),iW=(e,t)=>sn(rW(e),n=>ZS(n,t)?[n]:[]),te=(e,...t)=>()=>e.apply(null,t),Pa=(e,t)=>Ye(aW(e,t),n=>n.action()),QS=(e,t)=>vo(iW(e,t),n=>n.action()),JS=(e,t)=>{const n=t?tt.Forwards:tt.Backwards,s=e.selection.getRng();return pS(e,n,s,ua,fa,An).exists(o=>(ts(e,o),!0))},e0=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return hS(e,n,s,ua,fa,An).exists(o=>(ts(e,o),!0))},t0=(e,t)=>bS(e,t,t?fa:ua),n0=Tn.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Da={...n0,none:e=>n0.none(e)},cW=(e,t)=>s0(e,t,He),s0=(e,t,n)=>sn(at(e),s=>gn(s,t)?n(s)?[s]:[]:s0(s,t,n)),lW=(e,t,n=Le)=>{if(n(t))return m.none();if(ke(e,pe(t)))return m.some(t);const s=o=>gn(o,"table")||n(o);return Nr(t,e.join(","),s)},uW=(e,t)=>lW(["td","th"],e,t),fW=e=>cW(e,"th,td"),o0=(e,t)=>Bs(e,"table",t),Gd=(e,t,n,s,o=He)=>{const r=s===1;if(!r&&n<=0)return Da.first(e[0]);if(r&&n>=e.length-1)return Da.last(e[e.length-1]);{const a=n+s,i=e[a];return o(i)?Da.middle(t,i):Gd(e,t,a,s,o)}},r0=(e,t)=>o0(e,t).bind(n=>{const s=fW(n);return gr(s,r=>ye(e,r)).map(r=>({index:r,all:s}))}),dW=(e,t,n)=>r0(e,n).fold(()=>Da.none(e),o=>Gd(o.all,e,o.index,1,t)),mW=(e,t,n)=>r0(e,n).fold(()=>Da.none(),o=>Gd(o.all,e,o.index,-1,t)),gW=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),pW=(e,t)=>sn(t,n=>{const s=gW(Gs(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),hW=(e,t,n)=>Rt(e,(s,o)=>s.fold(()=>m.some(o),r=>{const a=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),i=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return m.some(i<a?o:r)}),m.none()),a0=(e,t,n,s,o)=>{const r=mt(C.fromDom(n),"td,th,caption").map(i=>i.dom),a=se(pW(e,r),i=>t(i,o));return hW(a,s,o).map(i=>i.cell)},bW=e=>e.bottom,CW=e=>e.top,yW=(e,t)=>e.y<t,vW=(e,t)=>e.y>t,EW=j(a0,bW,yW),SW=j(a0,CW,vW),wW=(e,t)=>Pt(t.getClientRects()).bind(n=>EW(e,n.left,n.top)).bind(n=>kc(TH(n),t)),kW=(e,t)=>As(t.getClientRects()).bind(n=>SW(e,n.left,n.top)).bind(n=>kc(AH(n),t)),_W=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),xW=e=>e.breakType===$n.Wrap&&e.positions.length===0,NW=e=>e.breakType===$n.Br&&e.positions.length===1,i0=(e,t,n)=>{const s=e(t,n);return xW(s)||!$e(n.getNode())&&NW(s)?!_W(e,t,s):s.breakAt.isNone()},AW=j(i0,Na),TW=j(i0,Aa),RW=(e,t,n)=>{const s=N.fromRangeStart(t);return Uo(!e,n).exists(o=>o.isEqual(s))},PW=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return Vh()&&RW(t,o,n)?(es(r,e,n,!t,!1).each(a=>{ts(e,a)}),!0):!1},DW=(e,t,n)=>wW(t,n).orThunk(()=>Pt(n.getClientRects()).bind(s=>Fd(oS(e,N.before(t)),s.left))).getOr(N.before(t)),OW=(e,t,n)=>kW(t,n).orThunk(()=>Pt(n.getClientRects()).bind(s=>Fd(rS(e,N.after(t)),s.left))).getOr(N.after(t)),c0=(e,t)=>{const n=t.getNode(e);return Xn(n)?m.some(n):m.none()},BW=(e,t,n)=>{t.undoManager.transact(()=>{const s=e?Kn:Ot,o=US(t,C.fromDom(n),s);ts(t,o)})},l0=(e,t,n)=>{const s=c0(!!t,n),o=t===!1;s.fold(()=>ts(e,n.toRange()),r=>Uo(o,e.getBody()).filter(a=>a.isEqual(n)).fold(()=>ts(e,n.toRange()),a=>BW(t,e,r)))},IW=(e,t,n,s)=>{const o=e.selection.getRng(),r=N.fromRangeStart(o),a=e.getBody();if(!t&&AW(s,r)){const i=DW(a,n,r);return l0(e,t,i),!0}else if(t&&TW(s,r)){const i=OW(a,n,r);return l0(e,t,i),!0}else return!1},u0=(e,t,n)=>m.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>m.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),f0=(e,t)=>u0(e,t,PW),Yd=(e,t)=>u0(e,t,IW),LW=e=>{const t=jo.exact(e,0,e,0);return S1(t)},d0=(e,t,n)=>n.fold(m.none,m.none,(s,o)=>AO(o).map(r=>LW(r)),s=>(e.execCommand("mceTableInsertRowAfter"),m0(e,t,s))),m0=(e,t,n)=>d0(e,t,dW(n,Is)),$W=(e,t,n)=>d0(e,t,mW(n,Is)),g0=(e,t)=>{const n=["table","li","dl"],s=C.fromDom(e.getBody()),o=i=>{const c=pe(i);return ye(i,s)||ke(n,c)},r=e.selection.getRng(),a=C.fromDom(t?r.endContainer:r.startContainer);return uW(a,o).map(i=>(o0(i,o).each(u=>{e.model.table.clearSelectedCells(u.dom)}),e.selection.collapse(!t),(t?m0:$W)(e,o,i).each(u=>{e.selection.setRng(u)}),!0)).getOr(!1)},FW=(e,t,n)=>{const s=be.os.isMacOS()||be.os.isiOS();Pa([{keyCode:H.RIGHT,action:te(jS,e,!0)},{keyCode:H.LEFT,action:te(jS,e,!1)},{keyCode:H.UP,action:te(qS,e,!1)},{keyCode:H.DOWN,action:te(qS,e,!0)},...s?[{keyCode:H.UP,action:te(Nc,e,!1),metaKey:!0,shiftKey:!0},{keyCode:H.DOWN,action:te(Nc,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:H.RIGHT,action:te(f0,e,!0)},{keyCode:H.LEFT,action:te(f0,e,!1)},{keyCode:H.UP,action:te(Yd,e,!1)},{keyCode:H.DOWN,action:te(Yd,e,!0)},{keyCode:H.UP,action:te(Yd,e,!1)},{keyCode:H.UP,action:te(YS,e,!1)},{keyCode:H.DOWN,action:te(YS,e,!0)},{keyCode:H.RIGHT,action:te(JS,e,!0)},{keyCode:H.LEFT,action:te(JS,e,!1)},{keyCode:H.UP,action:te(e0,e,!1)},{keyCode:H.DOWN,action:te(e0,e,!0)},{keyCode:H.RIGHT,action:te(vS,e,t,!0)},{keyCode:H.LEFT,action:te(vS,e,t,!1)},{keyCode:H.RIGHT,ctrlKey:!s,altKey:s,action:te(KH,e,t)},{keyCode:H.LEFT,ctrlKey:!s,altKey:s,action:te(GH,e,t)},{keyCode:H.UP,action:te(GS,e,!1)},{keyCode:H.DOWN,action:te(GS,e,!0)}],n).each(o=>{n.preventDefault()})},MW=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||FW(e,t,n)})},vn=(e,t)=>({container:e,offset:t}),Ac=Ne.DOM,Tc=e=>t=>e===t?-1:0,UW=e=>t=>e.isBlock(t)||ke(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",Xd=(e,t,n)=>{if(B(e)&&t>=0)return m.some(vn(e,t));{const s=Ks(Ac);return m.from(s.backwards(e,t,Tc(e),n)).map(o=>vn(o.container,o.container.data.length))}},zW=(e,t,n)=>{if(B(e)&&t>=e.length)return m.some(vn(e,t));{const s=Ks(Ac);return m.from(s.forwards(e,t,Tc(e),n)).map(o=>vn(o.container,0))}},Zd=(e,t,n)=>{if(!B(e))return m.none();const s=e.data;if(t>=0&&t<=s.length)return m.some(vn(e,t));{const o=Ks(Ac);return m.from(o.backwards(e,t,Tc(e),n)).bind(r=>{const a=r.container.data;return Zd(r.container,t+a.length,n)})}},p0=(e,t,n)=>{if(!B(e))return m.none();const s=e.data;if(t<=s.length)return m.some(vn(e,t));{const o=Ks(Ac);return m.from(o.forwards(e,t,Tc(e),n)).bind(r=>p0(r.container,t-s.length,n))}},Qd=(e,t,n,s,o)=>{const r=Ks(e,UW(e));return m.from(r.backwards(t,n,s,o))},HW=e=>e.collapsed&&B(e.startContainer),h0=e=>zt(e.toString().replace(/\u00A0/g," ")),b0=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,Jd=(e,t)=>e.substring(t.length),WW=(e,t,n)=>{let s;const o=n.charAt(0);for(s=t-1;s>=0;s--){const r=e.charAt(s);if(b0(r))return m.none();if(o===r&&ft(e,n,s,t))break}return m.some(s)},VW=(e,t,n,s=0)=>{if(!HW(t))return m.none();const o={text:"",offset:0},r=(i,c,l)=>(o.text=l+o.text,o.offset+=c,WW(o.text,o.offset,n).getOr(c)),a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return Qd(e,t.startContainer,t.startOffset,r,a).bind(i=>{const c=t.cloneRange();if(c.setStart(i.container,i.offset),c.setEnd(t.endContainer,t.endOffset),c.collapsed)return m.none();const l=h0(c);return l.lastIndexOf(n)!==0||Jd(l,n).length<s?m.none():m.some({text:Jd(l,n),range:c,trigger:n})})},C0=(e,t,n,s=0)=>DO(C.fromDom(t.startContainer)).fold(()=>VW(e,t,n,s),o=>{const r=e.createRng();r.selectNode(o.dom);const a=h0(r);return m.some({range:r,text:Jd(a,n),trigger:n})}),jW=e=>e.nodeType===wg,qW=e=>e.nodeType===vr,y0=e=>{if(jW(e))return vn(e,e.data.length);{const t=e.childNodes;return t.length>0?y0(t[t.length-1]):vn(e,t.length)}},v0=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?v0(n[t],0):n.length>0&&qW(e)&&n.length===t?y0(n[n.length-1]):vn(e,t)},KW=(e,t)=>{var n;const s=(n=e.getParent(t.container,e.isBlock))!==null&&n!==void 0?n:e.getRoot();return Qd(e,t.container,t.offset,(o,r)=>r===0?-1:r,s).filter(o=>{const r=o.container.data.charAt(o.offset-1);return!b0(r)}).isSome()},GW=e=>t=>{const n=v0(t.startContainer,t.startOffset);return!KW(e,n)},YW=(e,t,n)=>vo(n.triggers,s=>C0(e,t,s)),XW=(e,t)=>{const n=t(),s=e.selection.getRng();return YW(e.dom,s,n).bind(o=>E0(e,t,o))},E0=(e,t,n,s={})=>{var o;const r=t(),i=(o=e.selection.getRng().startContainer.nodeValue)!==null&&o!==void 0?o:"",c=se(r.lookupByTrigger(n.trigger),u=>n.text.length>=u.minChars&&u.matches.getOrThunk(()=>GW(e.dom))(n.range,i,n.text));if(c.length===0)return m.none();const l=Promise.all(he(c,u=>u.fetch(n.text,u.maxResults,s).then(d=>({matchText:n.text,items:d,columns:u.columns,onAction:u.onAction,highlightOn:u.highlightOn}))));return m.some({lookupData:l,context:n})};var En;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(En||(En={}));const em=(e,t,n)=>e.stype===En.Error?t(e.serror):n(e.svalue),ZW=e=>{const t=[],n=[];return P(e,s=>{em(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},QW=(e,t)=>e.stype===En.Error?{stype:En.Error,serror:t(e.serror)}:e,JW=(e,t)=>e.stype===En.Value?{stype:En.Value,svalue:t(e.svalue)}:e,eV=(e,t)=>e.stype===En.Value?t(e.svalue):e,tV=(e,t)=>e.stype===En.Error?t(e.serror):e,S0=e=>({stype:En.Value,svalue:e}),w0=e=>({stype:En.Error,serror:e}),it={fromResult:e=>e.fold(w0,S0),toResult:e=>em(e,xt.error,xt.value),svalue:S0,partition:ZW,serror:w0,bind:eV,bindError:tV,map:JW,mapError:QW,fold:em},tm=e=>yt(e)&&Dt(e).length>100?" removed due to size":JSON.stringify(e,null,2),nV=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:V("... (only showing first ten failures)")}]):e;return he(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},Rc=(e,t)=>it.serror([{path:e,getErrorInfo:t}]),sV=(e,t,n)=>Rc(e,()=>'Could not find valid *required* value for "'+t+'" in '+tm(n)),oV=(e,t)=>Rc(e,()=>'Choice schema did not contain choice key: "'+t+'"'),rV=(e,t,n)=>Rc(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+tm(t)),aV=(e,t)=>Rc(e,V(t)),iV=(e,t,n,s)=>Re(n,s).fold(()=>rV(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),cV=(e,t)=>({extract:(o,r)=>Re(r,e).fold(()=>oV(o,e),i=>iV(o,r,t,i)),toString:()=>"chooseOn("+e+"). Possible values: "+Dt(t)}),lV=(e,t)=>t,uV=(e,t)=>Gm(e)&&Gm(t)?Pc(e,t):t,k0=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)oe(o,r)&&(n[r]=e(n[r],o[r]))}return n},Pc=k0(uV),fV=k0(lV),_0=()=>({tag:"required",process:{}}),dV=e=>({tag:"defaultedThunk",process:e}),x0=e=>dV(V(e)),mV=()=>({tag:"option",process:{}}),gV=(e,t)=>e.length>0?it.svalue(Pc(t,fV.apply(void 0,e))):it.svalue(t),N0=e=>Sn(it.serror,tg)(e),pV={consolidateObj:(e,t)=>{const n=it.partition(e);return n.errors.length>0?N0(n.errors):gV(n.values,t)},consolidateArr:e=>{const t=it.partition(e);return t.errors.length>0?N0(t.errors):it.svalue(t.values)}},hV=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),bV=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),A0=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},nm=e=>{const t=(s,o)=>it.bindError(e(o),r=>aV(s,r)),n=V("val");return{extract:t,toString:n}},CV=nm(it.svalue),yV=(e,t,n,s)=>Re(t,n).fold(()=>sV(e,n,t),s),T0=(e,t,n,s)=>{const o=Re(e,t).getOrThunk(()=>n(e));return s(o)},vV=(e,t,n)=>n(Re(e,t)),EV=(e,t,n,s)=>{const o=Re(e,t).map(r=>r===!0?n(e):r);return s(o)},SV=(e,t,n,s,o)=>{const r=i=>o.extract(t.concat([s]),i),a=i=>i.fold(()=>it.svalue(m.none()),c=>{const l=o.extract(t.concat([s]),c);return it.map(l,m.some)});switch(e.tag){case"required":return yV(t,n,s,r);case"defaultedThunk":return T0(n,s,e.process,r);case"option":return vV(n,s,a);case"defaultedOptionThunk":return EV(n,s,e.process,a);case"mergeWithThunk":return T0(n,s,V({}),i=>{const c=Pc(e.process(n),i);return r(c)})}},wV=(e,t,n)=>{const s={},o=[];for(const r of n)A0(r,(a,i,c,l)=>{const u=SV(c,e,t,a,l);it.fold(u,f=>{o.push(...f)},f=>{s[i]=f})},(a,i)=>{s[a]=i(t)});return o.length>0?it.serror(o):it.svalue(s)},sm=e=>({extract:(s,o)=>wV(s,o,e),toString:()=>`obj{
`+he(e,o=>A0(o,(r,a,i,c)=>r+" -> "+c.toString(),(r,a)=>"state("+r+")")).join(`
`)+"}"}),R0=e=>({extract:(s,o)=>{const r=he(o,(a,i)=>e.extract(s.concat(["["+i+"]"]),a));return pV.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),kV=e=>nm(t=>e(t).fold(it.serror,it.svalue)),_V=(e,t,n)=>{const s=t.extract([e],n);return it.mapError(s,o=>({input:n,errors:o}))},xV=(e,t,n)=>it.toResult(_V(e,t,n)),NV=e=>`Errors: 
`+nV(e.errors).join(`
`)+`

Input object: `+tm(e.input),P0=(e,t)=>cV(e,ti(t,sm)),AV=V(CV),Dc=(e,t)=>nm(n=>{const s=typeof n;return e(n)?it.svalue(n):it.serror(`Expected type: ${t} but got: ${s}`)}),TV=Dc(mn,"number"),Oc=Dc(J,"string"),RV=Dc(xs,"boolean"),om=Dc(Se,"function"),Oa=hV,D0=bV,PV=e=>kV(t=>ke(e,t)?xt.value(t):xt.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),O0=(e,t)=>Oa(e,e,_0(),t),B0=e=>O0(e,Oc),I0=e=>O0(e,om),DV=(e,t)=>Oa(e,e,_0(),R0(t)),rm=(e,t)=>Oa(e,e,mV(),t),Bc=e=>rm(e,Oc),OV=e=>rm(e,om),BV=(e,t)=>Oa(e,e,x0(t),AV()),Qo=(e,t,n)=>Oa(e,e,x0(t),n),L0=(e,t)=>Qo(e,t,TV),IV=(e,t)=>Qo(e,t,Oc),$0=(e,t,n)=>Qo(e,t,PV(n)),am=(e,t)=>Qo(e,t,RV),im=(e,t)=>Qo(e,t,om),LV=(e,t,n)=>Qo(e,t,R0(n)),$V=B0("type"),FV=I0("fetch"),cm=I0("onAction"),MV=im("onSetup",()=>le),UV=Bc("text"),zV=Bc("icon"),HV=Bc("tooltip"),WV=Bc("label"),VV=am("active",!1),jV=am("enabled",!0),F0=am("primary",!1),qV=e=>BV("columns",e),Ba=e=>IV("type",e),KV=sm([$V,B0("trigger"),L0("minChars",1),qV(1),L0("maxResults",10),OV("matches"),FV,cm,LV("highlightOn",[],Oc)]),GV=e=>xV("Autocompleter",KV,{trigger:e.ch,...e}),lm=[jV,HV,zV,UV,MV],M0=[VV].concat(lm),YV=[im("predicate",Le),$0("scope","node",["node","editor"]),$0("position","selection",["node","selection","line"])],XV=lm.concat([Ba("contextformbutton"),F0,cm,D0("original",_t)]),ZV=M0.concat([Ba("contextformbutton"),F0,cm,D0("original",_t)]),QV=lm.concat([Ba("contextformbutton")]),JV=M0.concat([Ba("contextformtogglebutton")]),e3=P0("type",{contextformbutton:XV,contextformtogglebutton:ZV});sm([Ba("contextform"),im("initValue",V("")),WV,DV("commands",e3),rm("launch",P0("type",{contextformbutton:QV,contextformtogglebutton:JV}))].concat(YV));const t3=e=>{const t=e.ui.registry.getAll().popups,n=ti(t,a=>GV(a).fold(i=>{throw new Error(NV(i))},_t)),s=sg(ni(n,a=>a.trigger)),o=yl(n);return{dataset:n,triggers:s,lookupByTrigger:a=>se(o,i=>i.trigger===a)}},n3=(e,t)=>{const n=gu(t.load,50);e.on("keypress compositionend",s=>{s.which!==27&&n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27&&t.cancelIfNecessary()}),e.on("remove",n.cancel)},s3=e=>{const t=us(),n=et(!1),s=t.isSet,o=()=>{s()&&(LM(e),KD(e),n.set(!1),t.clear())},r=l=>{s()||(IM(e,l.range),t.set({trigger:l.trigger,matchLength:l.text.length}))},a=Rs(()=>t3(e)),i=l=>t.get().map(u=>C0(e.dom,e.selection.getRng(),u.trigger).bind(f=>E0(e,a,f,l))).getOrThunk(()=>XW(e,a)),c=l=>{i(l).fold(o,u=>{r(u.context),u.lookupData.then(f=>{t.get().map(d=>{const p=u.context;d.trigger===p.trigger&&(p.text.length-d.matchLength>=10?o():(t.set({...d,matchLength:p.text.length}),n.get()?qD(e,{lookupData:f}):(n.set(!0),jD(e,{lookupData:f}))))})})})};e.addCommand("mceAutocompleterReload",(l,u)=>{const f=yt(u)?u.fetchOptions:{};c(f)}),e.addCommand("mceAutocompleterClose",o),n3(e,{cancelIfNecessary:o,load:c})},o3=kn().browser.isSafari(),U0=e=>as(C.fromDom(e)),z0=(e,t)=>{var n;return e.startOffset===0&&e.endOffset===((n=t.textContent)===null||n===void 0?void 0:n.length)},Ic=(e,t)=>m.from(e.getParent(t.container(),"details")),H0=(e,t)=>Ic(e,t).isSome(),r3=(e,t)=>{const n=m.from(e.getParent(t.startContainer,"details")),s=m.from(e.getParent(t.endContainer,"details"));if(n.isSome()||s.isSome()){const o=n.bind(r=>m.from(e.select("summary",r)[0]));return m.some({startSummary:o,startDetails:n,endDetails:s})}else return m.none()},a3=(e,t)=>pt(t).exists(n=>n.isEqual(e)),i3=(e,t)=>cn(t).exists(n=>$e(n.getNode())&&Bt(t,n).exists(s=>s.isEqual(e))||n.isEqual(e)),c3=(e,t)=>t.startSummary.exists(n=>a3(e,n)),l3=(e,t)=>t.startSummary.exists(n=>i3(e,n)),u3=(e,t)=>t.startDetails.exists(n=>Bt(n,e).forall(s=>t.startSummary.exists(o=>!o.contains(e.container())&&o.contains(s.container())))),f3=(e,t,n)=>n.startDetails.exists(s=>Nt(e,t).forall(o=>!s.contains(o.container()))),W0=(e,t)=>{const n=t.getNode();ct(n)||e.selection.setCursorLocation(n,t.offset())},V0=(e,t,n)=>{const s=e.dom.getParent(t.container(),"details");if(s&&!s.open){const o=e.dom.select("summary",s)[0];o&&(n?pt(o):cn(o)).each(a=>W0(e,a))}else W0(e,t)},d3=(e,t)=>{const n=c=>c.contains(e.startContainer),s=c=>c.contains(e.endContainer),o=t.startSummary.exists(n),r=t.startSummary.exists(s),a=t.startDetails.forall(c=>t.endDetails.forall(l=>c!==l));return(o||r)&&!(o&&r)||a},j0=(e,t,n)=>{const{dom:s,selection:o}=e,r=e.getBody();if(n==="character"){const a=N.fromRangeStart(o.getRng()),i=s.getParent(a.container(),s.isBlock),c=Ic(s,a),l=i&&s.isEmpty(i),u=kt(i==null?void 0:i.previousSibling),f=kt(i==null?void 0:i.nextSibling);return l&&(t?f:u)&&Mo(!t,r,a).exists(h=>H0(s,h)&&!Cg(c,Ic(s,h)))?!0:Mo(t,r,a).fold(Le,d=>{const p=Ic(s,d);if(H0(s,d)&&!Cg(c,p)){if(t||V0(e,d,!1),i&&l){if(t&&u)return!0;if(!t&&f)return!0;V0(e,d,t),e.dom.remove(i)}return!0}else return!1})}else return!1},m3=(e,t,n,s)=>{const r=e.selection.getRng(),a=N.fromRangeStart(r),i=e.getBody();return s==="selection"?d3(r,t):n?l3(a,t)||f3(i,a,t):c3(a,t)||u3(a,t)},g3=(e,t,n)=>r3(e.dom,e.selection.getRng()).fold(()=>j0(e,t,n),s=>m3(e,s,t,n)||j0(e,t,n)),p3=(e,t,n)=>{const s=e.selection,o=s.getNode(),r=s.getRng(),a=N.fromRangeStart(r);return mN(o)?(n==="selection"&&z0(r,o)||ay(t,a,o)?U0(o):e.undoManager.transact(()=>{const i=s.getSel();let{anchorNode:c,anchorOffset:l,focusNode:u,focusOffset:f}=i??{};const d=()=>{M(c)&&M(l)&&M(u)&&M(f)&&(i==null||i.setBaseAndExtent(c,l,u,f))},p=()=>{c=i==null?void 0:i.anchorNode,l=i==null?void 0:i.anchorOffset,u=i==null?void 0:i.focusNode,f=i==null?void 0:i.focusOffset},h=(b,y)=>{P(b.childNodes,v=>{ra(v)&&y.appendChild(v)})},g=e.dom.create("span",{"data-mce-bogus":"1"});h(o,g),o.appendChild(g),d(),(n==="word"||n==="line")&&(i==null||i.modify("extend",t?"right":"left",n)),!s.isCollapsed()&&z0(s.getRng(),g)?U0(o):(e.execCommand(t?"ForwardDelete":"Delete"),p(),h(g,o),d()),e.dom.remove(g)}),!0):!1},lo=(e,t,n)=>g3(e,t,n)||o3&&p3(e,t,n)?m.some(le):m.none(),q0=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:le,inputType:n},a=Dp(new InputEvent(e));return t.dispatch(e,{...a,...r,...s})},Ia=q0("input"),Lc=q0("beforeinput"),K0=kn(),G0=K0.os,Y0=G0.isMacOS()||G0.isiOS(),h3=K0.browser.isFirefox(),b3=(e,t,n)=>{const s=n.keyCode===H.BACKSPACE?"deleteContentBackward":"deleteContentForward",o=e.selection.isCollapsed(),r=o?"character":"selection",a=i=>o?i?"word":"line":"selection";QS([{keyCode:H.BACKSPACE,action:te(IS,e)},{keyCode:H.BACKSPACE,action:te(Od,e,!1)},{keyCode:H.DELETE,action:te(Od,e,!0)},{keyCode:H.BACKSPACE,action:te(Rd,e,!1)},{keyCode:H.DELETE,action:te(Rd,e,!0)},{keyCode:H.BACKSPACE,action:te(Hd,e,t,!1)},{keyCode:H.DELETE,action:te(Hd,e,t,!0)},{keyCode:H.BACKSPACE,action:te(Lf,e,!1)},{keyCode:H.DELETE,action:te(Lf,e,!0)},{keyCode:H.BACKSPACE,action:te(lo,e,!1,r)},{keyCode:H.DELETE,action:te(lo,e,!0,r)},...Y0?[{keyCode:H.BACKSPACE,altKey:!0,action:te(lo,e,!1,a(!0))},{keyCode:H.DELETE,altKey:!0,action:te(lo,e,!0,a(!0))},{keyCode:H.BACKSPACE,metaKey:!0,action:te(lo,e,!1,a(!1))}]:[{keyCode:H.BACKSPACE,ctrlKey:!0,action:te(lo,e,!1,a(!0))},{keyCode:H.DELETE,ctrlKey:!0,action:te(lo,e,!0,a(!0))}],{keyCode:H.BACKSPACE,action:te(Bd,e,!1)},{keyCode:H.DELETE,action:te(Bd,e,!0)},{keyCode:H.BACKSPACE,action:te(jd,e,!1)},{keyCode:H.DELETE,action:te(jd,e,!0)},{keyCode:H.BACKSPACE,action:te(Ad,e,!1)},{keyCode:H.DELETE,action:te(Ad,e,!0)},{keyCode:H.BACKSPACE,action:te(Nd,e,!1)},{keyCode:H.DELETE,action:te(Nd,e,!0)},{keyCode:H.BACKSPACE,action:te(Wd,e,!1)},{keyCode:H.DELETE,action:te(Wd,e,!0)}],n).filter(i=>e.selection.isEditable()).each(i=>{n.preventDefault(),Lc(e,s).isDefaultPrevented()||(i(),Ia(e,s))})},C3=(e,t,n)=>Pa([{keyCode:H.BACKSPACE,action:te(VE,e)},{keyCode:H.DELETE,action:te(VE,e)},...Y0?[{keyCode:H.BACKSPACE,altKey:!0,action:te(Ra,e)},{keyCode:H.DELETE,altKey:!0,action:te(Ra,e)},...n?[{keyCode:h3?224:91,action:te(Ra,e)}]:[]]:[{keyCode:H.BACKSPACE,ctrlKey:!0,action:te(Ra,e)},{keyCode:H.DELETE,ctrlKey:!0,action:te(Ra,e)}]],t),y3=(e,t)=>{let n=!1;e.on("keydown",s=>{n=s.keyCode===H.BACKSPACE,s.isDefaultPrevented()||b3(e,t,s)}),e.on("keyup",s=>{s.isDefaultPrevented()||C3(e,s,n),n=!1})},v3=e=>{for(;e;){if(q(e)||B(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Jo=(e,t)=>{const n=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const r=v3(t.firstChild);r&&/^(UL|OL|DL)$/.test(r.nodeName)&&t.insertBefore(n.doc.createTextNode(Je),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const r=new Xe(t,t);let a=t,i;for(;i=r.current();){if(B(i)){o.setStart(i,0),o.setEnd(i,0);break}if(s[i.nodeName.toLowerCase()]){o.setStartBefore(i),o.setEndBefore(i);break}a=i,i=r.next()}i||(o.setStart(a,0),o.setEnd(a,0))}else $e(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),la(e,o)},La=(e,t)=>{const n=e.getRoot();let s,o=t;for(;o!==n&&o&&e.getContentEditable(o)!=="false";){if(e.getContentEditable(o)==="true"){s=o;break}o=o.parentNode}return o!==n?s:n},um=e=>m.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),E3=e=>um(e).fold(V(""),t=>t.nodeName.toUpperCase()),S3=e=>um(e).filter(t=>Or(C.fromDom(t))).isSome(),fm=e=>{e.innerHTML='<br data-mce-bogus="1">'},w3=(e,t,n)=>{const s=e.dom;m.from(n.style).map(s.parseStyle).each(c=>{const u={...Bl(C.fromDom(t)),...c};s.setStyles(t,u)});const o=m.from(n.class).map(c=>c.split(/\s+/)),r=m.from(t.className).map(c=>se(c.split(/\s+/),l=>l!==""));dt(o,r,(c,l)=>{const u=se(l,d=>!ke(c,d)),f=[...c,...u];s.setAttrib(t,"class",f.join(" "))});const a=["style","class"],i=hr(n,(c,l)=>!ke(a,l));s.setAttribs(t,i)},$a=(e,t)=>{if(gt(e).toLowerCase()===t.tagName.toLowerCase()){const s=Xr(e);w3(e,t,s)}},X0=(e,t,n,s,o=!0,r,a)=>{const i=e.dom,c=e.schema,l=gt(e),u=n?n.nodeName.toUpperCase():"";let f=t;const d=c.getTextInlineElements();let p;r||u==="TABLE"||u==="HR"?p=i.create(r||l,a||{}):p=n.cloneNode(!1);let h=p;if(!o)i.setAttrib(p,"style",null),i.setAttrib(p,"class",null);else do if(d[f.nodeName]){if(Gt(f)||Yt(f))continue;const g=f.cloneNode(!1);i.setAttrib(g,"id",""),p.hasChildNodes()?(g.appendChild(p.firstChild),p.appendChild(g)):(h=g,p.appendChild(g))}while((f=f.parentNode)&&f!==s);return $a(e,p),fm(h),p},k3=(e,t)=>e.dom.getParent(t,zl),_3=(e,t,n)=>{let s=t;for(;s&&s!==e&&kt(s.nextSibling);){const o=s.parentElement;if(!o||!n(o))return zl(o);s=o}return!1},x3=(e,t,n)=>!t&&n.nodeName.toLowerCase()===gt(e)&&e.dom.isEmpty(n)&&_3(e.getBody(),n,s=>oe(e.schema.getTextBlockElements(),s.nodeName.toLowerCase())),N3=(e,t,n)=>{var s,o,r;const a=t(gt(e)),i=k3(e,n);i&&(e.dom.insertAfter(a,i),Jo(e,a),((r=(o=(s=n.parentElement)===null||s===void 0?void 0:s.childNodes)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0)>1&&e.dom.remove(n))},A3=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,T3=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},Z0=(e,t)=>{const n=e==null?void 0:e.parentNode;return M(n)&&n.nodeName===t},Q0=e=>M(e)&&/^(OL|UL|LI)$/.test(e.nodeName),dm=e=>M(e)&&/^(LI|DT|DD)$/.test(e.nodeName),R3=e=>Q0(e)&&Q0(e.parentNode),$c=e=>{const t=e.parentNode;return dm(t)?t:e},Fc=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!q(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},J0=e=>Rt(ni(Bl(C.fromDom(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),P3=(e,t,n,s,o)=>{const r=e.dom,a=e.selection.getRng(),i=n.parentNode;if(n===e.getBody()||!i)return;R3(n)&&(o="LI");const c=dm(s)?J0(s):void 0;let l=dm(s)&&c?t(o,{style:J0(s)}):t(o);if(Fc(n,s,!0)&&Fc(n,s,!1))if(Z0(n,"LI")){const u=$c(n);r.insertAfter(l,u),T3(n)?r.remove(u):r.remove(n)}else r.replace(l,n);else if(Fc(n,s,!0))Z0(n,"LI")?(r.insertAfter(l,$c(n)),l.appendChild(r.doc.createTextNode(" ")),l.appendChild(n)):i.insertBefore(l,n),r.remove(s);else if(Fc(n,s,!1))r.insertAfter(l,$c(n)),r.remove(s);else{n=$c(n);const u=a.cloneRange();u.setStartAfter(s),u.setEndAfter(n);const f=u.extractContents();if(o==="LI"&&A3(f,"LI")){const d=se(he(l.children,C.fromDom),fr(ci("br")));l=f.firstChild,r.insertAfter(f,n),P(d,p=>Il(C.fromDom(l),p)),c&&l.setAttribute("style",c)}else r.insertAfter(f,n),r.insertAfter(l,n);r.remove(s)}Jo(e,l)},D3=e=>{P(Qg(C.fromDom(e),jt),t=>{const n=t.dom;n.nodeValue=zt(n.data)})},O3=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"},B3=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),mm=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,gm=(e,t)=>M(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",I3=(e,t,n)=>{var s;const o=[];if(!n)return;let r=n;for(;r=r.firstChild;){if(e.isBlock(r))return;q(r)&&!t[r.nodeName.toLowerCase()]&&o.push(r)}let a=o.length;for(;a--;)r=o[a],(!r.hasChildNodes()||r.firstChild===r.lastChild&&((s=r.firstChild)===null||s===void 0?void 0:s.nodeValue)===""||B3(e,r))&&e.remove(r)},pm=(e,t,n)=>B(t)?e?n===1&&t.data.charAt(n-1)===Ze?0:n:n===t.data.length-1&&t.data.charAt(n)===Ze?t.data.length:n:n,L3=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,pm(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,pm(!1,e.endContainer,e.endOffset)),t},$3=e=>{let t=e;do B(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},F3=(e,t,n,s,o)=>{var r,a;const i=e.dom,c=(r=La(i,s))!==null&&r!==void 0?r:i.getRoot();let l=i.getParent(s,i.isBlock);if(!l||!gm(i,l)){if(l=l||c,!l.hasChildNodes()){const p=i.create(t);return $a(e,p),l.appendChild(p),n.setStart(p,0),n.setEnd(p,0),p}let u=s;for(;u&&u.parentNode!==l;)u=u.parentNode;let f;for(;u&&!i.isBlock(u);)f=u,u=u.previousSibling;const d=(a=f==null?void 0:f.parentElement)===null||a===void 0?void 0:a.nodeName;if(f&&d&&e.schema.isValidChild(d,t.toLowerCase())){const p=f.parentNode,h=i.create(t);for($a(e,h),p.insertBefore(h,f),u=f;u&&!i.isBlock(u);){const g=u.nextSibling;h.appendChild(u),u=g}n.setStart(s,o),n.setEnd(s,o)}}return s},M3=(e,t)=>{t.normalize();const n=t.lastChild;(!n||q(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},U3=(e,t)=>{const n=rR(e);return qe(t)?!1:J(n)?ke(L.explode(n),t.nodeName.toLowerCase()):n},ew={insert:(e,t)=>{let n,s,o,r,a=!1;const i=e.dom,c=e.schema,l=c.getNonEmptyElements(),u=e.selection.getRng(),f=gt(e),d=C.fromDom(u.startContainer),p=xo(d,u.startOffset),h=p.exists(R=>ii(R)&&!Is(R)),g=u.collapsed&&h,b=(R,z)=>X0(e,n,O,T,oR(e),R,z),y=R=>{const z=pm(R,n,s);if(B(n)&&(R?z>0:z<n.data.length))return!1;if(n.parentNode===O&&a&&!R||R&&q(n)&&n===O.firstChild)return!0;if(mm(n,"TABLE")||mm(n,"HR"))return a&&!R||!a&&R;const Z=new Xe(n,O);B(n)&&(R&&z===0?Z.prev():!R&&z===n.data.length&&Z.next());let re;for(;re=Z.current();){if(q(re)){if(!re.getAttribute("data-mce-bogus")){const ie=re.nodeName.toLowerCase();if(l[ie]&&ie!=="br")return!1}}else if(B(re)&&!cs(re.data))return!1;R?Z.prev():Z.next()}return!0},v=()=>{let R;return/^(H[1-6]|PRE|FIGURE)$/.test(o)&&U!=="HGROUP"?R=b(f):R=b(),U3(e,r)&&gm(i,r)&&i.isEmpty(O,void 0,{includeZwsp:!0})?R=i.split(r,O):i.insertAfter(R,O),Jo(e,R),R};Yi(i,u).each(R=>{u.setStart(R.startContainer,R.startOffset),u.setEnd(R.endContainer,R.endOffset)}),n=u.startContainer,s=u.startOffset;const E=!!(t&&t.shiftKey),S=!!(t&&t.ctrlKey);q(n)&&n.hasChildNodes()&&!g&&(a=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,a&&B(n)?s=n.data.length:s=0);const T=La(i,n);if(!T||O3(e,n))return;E||(n=F3(e,f,u,n,s));let O=i.getParent(n,i.isBlock)||i.getRoot();r=M(O==null?void 0:O.parentNode)?i.getParent(O.parentNode,i.isBlock):null,o=O?O.nodeName.toUpperCase():"";const U=r?r.nodeName.toUpperCase():"";if(U==="LI"&&!S){const R=r;O=R,r=R.parentNode,o=U}if(q(r)&&x3(e,E,O))return N3(e,b,O);if(/^(LI|DT|DD)$/.test(o)&&q(r)&&i.isEmpty(O)){P3(e,b,r,O,f);return}if(!g&&(O===e.getBody()||!gm(i,O)))return;const A=O.parentNode;let _;if(g)_=b(f),p.fold(()=>{We(d,C.fromDom(_))},R=>{Ot(R,C.fromDom(_))}),e.selection.setCursorLocation(_,0);else if(Do(O))_=Kl(O),i.isEmpty(O)&&fm(O),$a(e,_),Jo(e,_);else if(y(!1))_=v();else if(y(!0)&&A){_=A.insertBefore(b(),O);const R=Bx(C.fromDom(u.startContainer))&&u.collapsed;Jo(e,mm(O,"HR")||R?_:O)}else{const R=L3(u).cloneRange();R.setEndAfter(O);const z=R.extractContents();D3(z),$3(z),_=z.firstChild,i.insertAfter(z,O),I3(i,l,_),M3(i,O),i.isEmpty(O)&&fm(O),_.normalize(),i.isEmpty(_)?(i.remove(_),v()):($a(e,_),Jo(e,_))}i.setAttrib(_,"id",""),e.dispatch("NewBlock",{newBlock:_})},fakeEventName:"insertParagraph"},z3=(e,t,n)=>{const s=new Xe(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||B(o)&&o.length>0)return!0;return!1},tw=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),la(e,s)},H3=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,a=!1;Yi(s,o).each(p=>{o.setStart(p.startContainer,p.startOffset),o.setEnd(p.endContainer,p.endOffset)});let i=o.startOffset,c=o.startContainer;if(q(c)&&c.hasChildNodes()){const p=i>c.childNodes.length-1;c=c.childNodes[Math.min(i,c.childNodes.length-1)]||c,p&&B(c)?i=c.data.length:i=0}let l=s.getParent(c,s.isBlock);const u=l&&l.parentNode?s.getParent(l.parentNode,s.isBlock):null,f=u?u.nodeName.toUpperCase():"",d=!!(t&&t.ctrlKey);f==="LI"&&!d&&(l=u),B(c)&&i>=c.data.length&&(z3(e.schema,c,l||s.getRoot())||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),a=!0)),r=s.create("br"),yu(s,o,r),tw(e,r,a),e.undoManager.add()},W3=(e,t)=>{const n=C.fromTag("br");Ot(C.fromDom(t),n),e.undoManager.add()},V3=(e,t)=>{q3(e.getBody(),t)||Kn(C.fromDom(t),C.fromTag("br"));const n=C.fromTag("br");Kn(C.fromDom(t),n),tw(e,n.dom,!1),e.undoManager.add()},j3=e=>$e(e.getNode()),q3=(e,t)=>j3(N.after(t))?!0:Nt(e,N.after(t)).map(n=>$e(n.getNode())).getOr(!1),nw=e=>e&&e.nodeName==="A"&&"href"in e,K3=e=>e.fold(Le,nw,nw,Le),G3=e=>{const t=j(oo,e),n=N.fromRangeStart(e.selection.getRng());return Ln(t,e.getBody(),n).filter(K3)},Y3=(e,t)=>{t.fold(le,j(W3,e),j(V3,e),le)},sw={insert:(e,t)=>{const n=G3(e);n.isSome()?n.each(j(Y3,e)):H3(e,t)},fakeEventName:"insertLineBreak"},ow=(e,t)=>um(e).filter(n=>t.length>0&&gn(C.fromDom(n),t)).isSome(),X3=e=>ow(e,nR(e)),Z3=e=>ow(e,sR(e)),Wt=Tn.generate([{br:[]},{block:[]},{none:[]}]),Q3=(e,t)=>Z3(e),rw=e=>(t,n)=>S3(t)===e,aw=(e,t)=>(n,s)=>E3(n)===e.toUpperCase()===t,J3=e=>{const t=La(e.dom,e.selection.getStart());return qe(t)},Fa=e=>aw("pre",e),ej=()=>aw("summary",!0),Mc=e=>(t,n)=>eR(t)===e,tj=(e,t)=>X3(e),Uc=(e,t)=>t,nj=e=>{const t=gt(e),n=La(e.dom,e.selection.getStart());return M(n)&&e.schema.isValidChild(n.nodeName,t)},sj=e=>{const t=e.selection.getRng(),n=C.fromDom(t.startContainer),o=xo(n,t.startOffset).map(r=>ii(r)&&!Is(r));return t.collapsed&&o.getOr(!0)},tn=(e,t)=>(n,s)=>Rt(e,(r,a)=>r&&a(n,s),!0)?m.some(t):m.none(),oj=(e,t)=>XE([tn([Q3],Wt.none()),tn([Fa(!0),J3],Wt.none()),tn([ej()],Wt.br()),tn([Fa(!0),Mc(!1),Uc],Wt.br()),tn([Fa(!0),Mc(!1)],Wt.block()),tn([Fa(!0),Mc(!0),Uc],Wt.block()),tn([Fa(!0),Mc(!0)],Wt.br()),tn([rw(!0),Uc],Wt.br()),tn([rw(!0)],Wt.block()),tn([tj],Wt.br()),tn([Uc],Wt.br()),tn([nj],Wt.block()),tn([sj],Wt.block())],[e,!!(t&&t.shiftKey)]).getOr(Wt.none()),zc=(e,t,n)=>{t.selection.isCollapsed()||HB(t),!(M(n)&&Lc(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),M(n)&&Ia(t,e.fakeEventName))},iw=(e,t)=>{const n=()=>zc(sw,e,t),s=()=>zc(ew,e,t),o=oj(e,t);switch(tR(e)){case"linebreak":o.fold(n,n,le);break;case"block":o.fold(s,s,le);break;case"invert":o.fold(s,n,le);break;default:o.fold(n,s,le);break}},cw=kn(),rj=cw.os.isiOS()&&cw.browser.isSafari(),lw=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),KF(e.undoManager),e.undoManager.transact(()=>{iw(e,t)}))},aj=e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(B(t)){const n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,s=t.data.charAt(e.startOffset-1);return n.test(s)}else return!1},ij=e=>{let t=m.none();const n=o=>{t=m.some(o.selection.getBookmark()),o.undoManager.add()},s=(o,r)=>{o.undoManager.undo(),t.fold(le,a=>o.selection.moveToBookmark(a)),lw(o,r),t=m.none()};e.on("keydown",o=>{o.keyCode===H.ENTER&&(rj&&aj(e.selection.getRng())?n(e):lw(e,o))}),e.on("keyup",o=>{o.keyCode===H.ENTER&&t.each(()=>s(e,o))})},cj=(e,t,n)=>{const s=be.os.isMacOS()||be.os.isiOS();Pa([{keyCode:H.END,action:te(KS,e,!0)},{keyCode:H.HOME,action:te(KS,e,!1)},...s?[]:[{keyCode:H.HOME,action:te(Nc,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:H.END,action:te(Nc,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:H.END,action:te(t0,e,!0)},{keyCode:H.HOME,action:te(t0,e,!1)},{keyCode:H.END,action:te(xc,e,!0,t)},{keyCode:H.HOME,action:te(xc,e,!1,t)}],n).each(o=>{n.preventDefault()})},lj=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||cj(e,t,n)})},uj=e=>{e.on("input",t=>{t.isComposing||EB(e)})},fj=kn(),dj=(e,t,n)=>{Pa([{keyCode:H.PAGE_UP,action:te(xc,e,!1,t)},{keyCode:H.PAGE_DOWN,action:te(xc,e,!0,t)}],n)},uw=e=>e.stopImmediatePropagation(),fw=e=>e.keyCode===H.PAGE_UP||e.keyCode===H.PAGE_DOWN,dw=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",uw,!0):!n&&e.get()&&t.off("NodeChange",uw),e.set(n)},mj=(e,t)=>{if(fj.os.isMacOS())return;const n=et(!1);e.on("keydown",s=>{fw(s)&&dw(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||dj(e,t,s),fw(s)&&n.get()&&(dw(n,e,!1),e.nodeChanged())})},gj=e=>{e.on("beforeinput",t=>{(!e.selection.isEditable()||Fe(t.getTargetRanges(),n=>!fC(e.dom,n)))&&t.preventDefault()})},mw=(e,t)=>{const n=t.container(),s=t.offset();return B(n)?(n.insertData(s,e),m.some(N(n,s+e.length))):$i(t).map(o=>{const r=C.fromText(e);return t.isAtEnd()?Kn(o,r):Ot(o,r),N(r.dom,e.length)})},gw=j(mw,Je),pw=j(mw," "),pj=(e,t,n)=>KC(e,t,n)?gw(t):pw(t),hj=e=>t=>t.fold(n=>Bt(e.dom,N.before(n)),n=>pt(n),n=>cn(n),n=>Nt(e.dom,N.after(n))),bj=(e,t,n)=>s=>KC(e,s,n)?gw(t):pw(t),hw=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},Cj=(e,t)=>e.isEditable(e.getParent(t,"summary")),yj=e=>{const t=N.fromRangeStart(e.selection.getRng()),n=C.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=j(oo,e),o=N.fromRangeStart(e.selection.getRng());return Ln(s,e.getBody(),o).bind(hj(n)).map(r=>()=>bj(n,t,e.schema)(r).each(hw(e)))}else return m.none()},vj=e=>{const t=()=>{const n=C.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const s=N.fromRangeStart(e.selection.getRng());pj(n,s,e.schema).each(hw(e))};return ko(be.browser.isFirefox()&&e.selection.isEditable()&&Cj(e.dom,e.selection.getRng().startContainer),t)},Ej=(e,t)=>{QS([{keyCode:H.SPACEBAR,action:te(yj,e)},{keyCode:H.SPACEBAR,action:te(vj,e)}],t).each(n=>{t.preventDefault(),Lc(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),Ia(e,"insertText",{data:" "}))})},Sj=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||Ej(e,t)})},wj=e=>pP(e)?[{keyCode:H.TAB,action:te(g0,e,!0)},{keyCode:H.TAB,shiftKey:!0,action:te(g0,e,!1)}]:[],kj=(e,t)=>{Pa([...wj(e)],t).each(n=>{t.preventDefault()})},_j=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||kj(e,t)})},xj=e=>{if(e.addShortcut("Meta+P","","mcePrint"),s3(e),In(e))return et(null);{const t=qH(e);return gj(e),V2(e),MW(e,t),y3(e,t),ij(e),Sj(e),uj(e),_j(e),lj(e,t),mj(e,t),t}};class Nj{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),a={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!nf(a,n))&&t.dispatch("SelectionChange"),n=a}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);o&&Hi(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&Hi(t)&&(t.selection.getNode().nodeName==="IMG"?Zt.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let s;if(this.editor.initialized&&n&&!BR(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();s=n.getStart(!0)||o,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,o))&&(s=o);const r=[];this.editor.dom.getParent(s,a=>a===o?!0:(r.push(a),!1)),this.editor.dispatch("NodeChange",{...t,element:s,parents:r})}}isSameElementPath(t){let n;const s=this.editor,o=pr(s.dom.getParents(t,He,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const bw=jr("image"),Aj=e=>{const t=e;return m.from(t[bw])},Tj=(e,t)=>{const n=e;n[bw]=t},hm=jr("event"),Rj=e=>{const t=e;return m.from(t[hm])},Hc=e=>t=>{const n=t;n[hm]=e},Pj=(e,t)=>Hc(t)(e),Cw=Hc(0),Dj=Hc(2),Oj=Hc(1),Bj=(e=>t=>{const n=t;return m.from(n[hm]).exists(s=>s===e)})(0),Ij=()=>Object.freeze({length:0,item:e=>null}),bm=jr("mode"),Lj=e=>{const t=e;return m.from(t[bm])},Wc=e=>t=>{const n=t;n[bm]=e},yw=(e,t)=>Wc(t)(e),vw=Wc(0),Cm=Wc(2),$j=Wc(1),Ew=e=>t=>{const n=t;return m.from(n[bm]).exists(s=>s===e)},er=Ew(0),Sw=Ew(1),Fj=(e,t)=>({...t,get length(){return t.length},add:(n,s)=>{if(er(e))if(J(n)){if(!ct(s))return t.add(n,s)}else return t.add(n);return null},remove:n=>{er(e)&&t.remove(n)},clear:()=>{er(e)&&t.clear()}}),Mj=["none","copy","link","move"],Uj=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],ym=()=>{const e=new window.DataTransfer;let t="move",n="all";const s={get dropEffect(){return t},set dropEffect(o){ke(Mj,o)&&(t=o)},get effectAllowed(){return n},set effectAllowed(o){Bj(s)&&ke(Uj,o)&&(n=o)},get items(){return Fj(s,e.items)},get files(){return Sw(s)?Ij():e.files},get types(){return e.types},setDragImage:(o,r,a)=>{er(s)&&(Tj(s,{image:o,x:r,y:a}),e.setDragImage(o,r,a))},getData:o=>Sw(s)?"":e.getData(o),setData:(o,r)=>{er(s)&&e.setData(o,r)},clearData:o=>{er(s)&&e.clearData(o)}};return vw(s),s},zj=e=>{const t=ym(),n=Lj(e);return Cm(e),Cw(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,Aj(e).each(s=>t.setDragImage(s.image,s.x,s.y)),P(e.types,s=>{s!=="Files"&&t.setData(s,e.getData(s))}),P(e.files,s=>t.items.add(s)),Rj(e).each(s=>{Pj(t,s)}),n.each(s=>{yw(e,s),yw(t,s)}),t},Hj=e=>{const t=e.getData("text/html");return t===""?m.none():m.some(t)},ww=(e,t)=>e.setData("text/html",t),kw="x-tinymce/html",Vc=V(kw),vm="<!-- "+kw+" -->",Wj=e=>vm+e,Vj=e=>e.replace(vm,""),_w=e=>e.indexOf(vm)!==-1,jj=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),qj=(e,t)=>{let n="<"+e;const s=ni(t,(o,r)=>r+'="'+Ws.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},Kj=(e,t,n)=>{const s=e.split(/\n\n/),o=qj(t,n),r="</"+t+">",a=he(s,c=>c.split(/\n/).join("<br />")),i=c=>o+c+r;return a.length===1?a[0]:he(a,i).join("")},xw="%MCEPASTEBIN%",Gj=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},xw);be.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",a=>{a.stopPropagation()}),r.focus(),s.select(r,!0)},Yj=(e,t)=>{const n=e.dom;if(Em(e)){let s;const o=t.get();for(;s=Em(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},Em=e=>e.dom.get("mcepastebin"),Xj=e=>M(e)&&e.id==="mcepastebin",Zj=e=>{const t=e.dom,n=(a,i)=>{a.appendChild(i),t.remove(i,!0)},[s,...o]=se(e.getBody().childNodes,Xj);P(o,a=>{n(s,a)});const r=t.select("div[id=mcepastebin]",s);for(let a=r.length-1;a>=0;a--){const i=t.create("div");s.insertBefore(i,r[a]),n(i,r[a])}return s?s.innerHTML:""},Nw=e=>e===xw,Qj=e=>{const t=et(null);return{create:()=>Gj(e,t),remove:()=>Yj(e,t),getEl:()=>Em(e),getHtml:()=>Zj(e),getLastRng:t.get}},Aw=(e,t)=>(L.each(t,n=>{Qa(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),Jj=e=>{const t=ls(),n=Ko({},t);let s="";const o=t.getVoidElements(),r=L.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements(),i=c=>{const l=c.name,u=c;if(l==="br"){s+=`
`;return}if(l!=="wbr"){if(o[l]&&(s+=" "),r[l]){s+=" ";return}if(c.type===3&&(s+=c.value),!(c.name in t.getVoidElements())){let f=c.firstChild;if(f)do i(f);while(f=f.next)}a[l]&&u.next&&(s+=`
`,l==="p"&&(s+=`
`))}};return e=Aw(e,[/<!\[[^\]]+\]>/g]),i(n.parse(e)),s},Tw=e=>(e=Aw(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":Je],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),e8=e=>{let t=0;return()=>e+t++},t8=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return L.hasOwn(n,t)?"image/"+n[t]:"image/"+t},n8=(e,t)=>{const n=Ko({sanitize:Au(e),sandbox_iframes:Tu(e)},e.schema);n.addNodeFilter("meta",o=>{L.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return ps({validate:!0},e.schema).serialize(s)},Rw=(e,t)=>({content:e,cancelled:t}),s8=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=YD(e,s,n);return Rw(o.node.innerHTML,o.isDefaultPrevented())},o8=(e,t,n)=>{const s=GD(e,t,n),o=n8(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?s8(e,o,n):Rw(o,s.isDefaultPrevented())},r8=(e,t,n)=>o8(e,t,n),Sm=(e,t)=>(e.insertContent(t,{merge:JR(e),paste:!0}),!0),wm=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),a8=(e,t)=>wm(t)&&Fe($h(e),n=>wl(t.toLowerCase(),`.${n.toLowerCase()}`)),i8=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),c8=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),l8=(e,t,n)=>!e.selection.isCollapsed()&&wm(t)?c8(e,t,n):!1,u8=(e,t,n)=>a8(e,t)?i8(e,t,n):!1,f8=(e,t)=>{L.each([l8,u8,Sm],n=>!n(e,t,Sm))},d8=(e,t,n)=>{n||!eP(e)?Sm(e,t):f8(e,t)},m8=e8("mceclip"),g8=e=>{const t=ym();return ww(t,e),Cm(t),t},Pw=(e,t,n,s,o)=>{const r=r8(e,t,n);if(!r.cancelled){const a=r.content,i=()=>d8(e,a,s);o?Lc(e,"insertFromPaste",{dataTransfer:g8(a)}).isDefaultPrevented()||(i(),Ia(e,"insertFromPaste")):i()}},jc=(e,t,n,s)=>{const o=n||_w(t);Pw(e,Vj(t),o,!1,s)},km=(e,t,n)=>{const s=e.dom.encode(t).replace(/\r\n/g,`
`),o=fp(s,nP(e)),r=Kj(o,gt(e),Xr(e));Pw(e,r,!1,!0,n)},Dw=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},vs=(e,t)=>t in e&&e[t].length>0,Ow=e=>vs(e,"text/html")||vs(e,"text/plain"),p8=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return M(n)?e.dom.encode(n[1]):void 0},h8=(e,t,n,s)=>{const o=m8(),r=xh(e)&&M(n.name),a=r?p8(e,n.name):o,i=r?n.name:void 0,c=t.create(o,n,s,a,i);return t.add(c),c},b8=(e,t)=>{od(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const r=o?n:btoa(n),a=t.file,i=e.editorUpload.blobCache,c=i.getByData(r,s),l=c??h8(e,i,a,r);jc(e,`<img src="${l.blobUri()}">`,!1,!0)})},C8=e=>e.type==="paste",y8=e=>Promise.all(he(e,t=>hv(t).then(n=>({file:t,uri:n})))),v8=e=>{const t=$h(e);return n=>st(n.type,"image/")&&Fe(t,s=>t8(s)===n.type)},E8=(e,t)=>{const n=t.items?sn(Ft(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?Ft(t.files):[];return se(n.length>0?n:s,v8(e))},Bw=(e,t,n)=>{const s=C8(t)?t.clipboardData:t.dataTransfer;if(Ii(e)&&s){const o=E8(e,s);if(o.length>0)return t.preventDefault(),y8(o).then(r=>{n&&e.selection.setRng(n),P(r,a=>{b8(e,a)})}),!0}return!1},S8=e=>{var t,n;return be.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},w8=e=>H.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,_m=(e,t,n,s,o)=>{let r=Tw(n);const a=vs(t,Vc())||_w(n),i=!a&&jj(r),c=wm(r);(Nw(r)||!r.length||i&&!c)&&(s=!0),(s||c)&&(vs(t,"text/plain")&&i?r=t["text/plain"]:r=Jj(r)),!Nw(r)&&(s?km(e,r,o):jc(e,r,a,o))},k8=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{w8(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||S8(r))return;const a=n.get()==="text"||s;s=!1;const i=Dw(r.clipboardData);!Ow(i)&&Bw(e,r,o())||(vs(i,"text/html")?(r.preventDefault(),_m(e,i,i["text/html"],a,!0)):vs(i,"text/plain")&&vs(i,"text/uri-list")?(r.preventDefault(),_m(e,i,i["text/plain"],a,!0)):(t.create(),Zt.setEditorTimeout(e,()=>{const c=t.getHtml();t.remove(),_m(e,i,c,a,!1)},0)))})},_8=e=>{const t=o=>st(o,"webkit-fake-url"),n=o=>st(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,a)=>{if(!Ii(e)&&s(a))for(const i of o){const c=i.attr("src");J(c)&&!i.attr("data-mce-object")&&c!==be.transparentSrc&&(t(c)||!sP(e)&&n(c))&&i.remove()}})},x8=(e,t,n)=>{k8(e,t,n),_8(e)},N8=(e,t)=>{t.get()==="text"?(t.set("html"),$b(e,!1)):(t.set("text"),$b(e,!0)),e.focus()},A8=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{N8(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&jc(e,s.html,s.internal,!1),s.text&&km(e,s.text,!1)})},T8=(e,t,n)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(Vc(),t),!0}catch{return!1}else return!1},Iw=(e,t,n,s)=>{T8(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},Lw=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(a),s.add(e.getBody(),r);const i=o.getRng();a.focus();const c=s.createRng();c.selectNodeContents(a),o.setRng(c),Zt.setEditorTimeout(e,()=>{o.setRng(i),s.remove(r),n()},0)},$w=e=>({html:Wj(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),R8=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),Fw=e=>!e.selection.isCollapsed()||R8(e),P8=e=>t=>{!t.isDefaultPrevented()&&Fw(e)&&e.selection.isEditable()&&Iw(t,$w(e),Lw(e),()=>{if(be.browser.isChromium()||be.browser.isFirefox()){const n=e.selection.getRng();Zt.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},D8=e=>t=>{!t.isDefaultPrevented()&&Fw(e)&&Iw(t,$w(e),Lw(e),le)},O8=e=>{e.on("cut",P8(e)),e.on("copy",D8(e))},Mw=(e,t)=>{var n,s;return to.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},B8=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},Uw=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},I8=e=>Fe(e.files,t=>/^image\//.test(t.type)),L8=(e,t,n,s)=>{const o=e.getParent(n,a=>zs(t,a));if(!kt(e.getParent(n,"summary")))return!0;if(o&&oe(s,"text/html")){const a=new DOMParser().parseFromString(s["text/html"],"text/html").body;return!kt(a.querySelector(o.nodeName.toLowerCase()))}else return!1},$8=e=>{e.on("input",t=>{const n=s=>kt(s.querySelector("summary"));if(t.inputType==="deleteByDrag"){const s=se(e.dom.select("details"),n);P(s,o=>{$e(o.firstChild)&&o.firstChild.remove();const r=e.dom.create("summary");r.appendChild(Ir().dom),o.prepend(r)})}})},F8=(e,t)=>{KR(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),Ii(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&I8(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented())return;const s=Mw(e,n);if(qe(s))return;const o=Dw(n.dataTransfer),r=vs(o,Vc());if((!Ow(o)||B8(o))&&Bw(e,n,s))return;const a=o[Vc()],i=a||o["text/html"]||o["text/plain"],c=L8(e.dom,e.schema,s.startContainer,o),l=t.get();l&&!c||i&&(n.preventDefault(),Zt.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(a||l&&c)&&e.execCommand("Delete"),Uw(e,s);const u=Tw(i);o["text/html"]?jc(e,u,r,!0):km(e,u,!0)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{Ii(e)&&!t.get()&&(n.preventDefault(),Uw(e,Mw(e,n))),n.type==="dragend"&&t.set(!1)}),$8(e)},M8=e=>{const t=o=>r=>{o(e,r)},n=GR(e);Se(n)&&e.on("PastePreProcess",t(n));const s=YR(e);Se(s)&&e.on("PastePostProcess",t(s))},U8=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},z8=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,zw=e=>L.trim(e).replace(z8,$r).toLowerCase(),H8=(e,t,n)=>{const s=ZR(e);if(n||s==="all"||!QR(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,a=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,c,l,u)=>{const f=r.parseStyle(r.decode(l)),d={};for(let h=0;h<o.length;h++){const g=f[o[h]];let b=g,y=r.getStyle(a,o[h],!0);/color/.test(o[h])&&(b=zw(b),y=zw(y)),y!==b&&(d[o[h]]=g)}const p=r.serializeStyle(d,"span");return p?c+' style="'+p+'"'+u:c+u})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,a,i,c)=>a+' style="'+i+'"'+c),t},W8=e=>{(be.browser.isChromium()||be.browser.isSafari())&&U8(e,H8)},V8=e=>{const t=et(!1),n=et(tP(e)?"text":"html"),s=Qj(e);W8(e),A8(e,n),M8(e),e.on("PreInit",()=>{O8(e),F8(e,t),x8(e,s,n)})},j8=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},q8=e=>{e.parser.addNodeFilter("details",t=>{const n=hP(e);P(t,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const n=bP(e);P(t,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})})},K8=e=>{j8(e),q8(e)},G8=$e,Hw=B,Y8=e=>De(e.dom),X8=e=>rn(e.dom),Ww=e=>t=>ye(C.fromDom(e),t),Z8=(e,t,n)=>Os(C.fromDom(e),s=>X8(s)||n.isBlock(pe(s)),Ww(t)).getOr(C.fromDom(t)).dom,Vw=(e,t)=>Os(C.fromDom(e),Y8,Ww(t)),jw=(e,t,n)=>{const s=new Xe(e,t),o=n?s.next.bind(s):s.prev.bind(s);let r=e;for(let a=n?e:o();a&&!G8(a);a=o())an(a)&&(r=a);return r},Q8=(e,t,n)=>{const o=N.fromRangeStart(e).getNode(),r=Z8(o,t,n),a=jw(o,r,!1),i=jw(o,r,!0),c=document.createRange();return Vw(a,r).fold(()=>{Hw(a)?c.setStart(a,0):c.setStartBefore(a)},l=>c.setStartBefore(l.dom)),Vw(i,r).fold(()=>{Hw(i)?c.setEnd(i,i.data.length):c.setEndAfter(i)},l=>c.setEndAfter(l.dom)),c},J8=e=>{const t=Q8(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Hf(t))},eq=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),J8(e))})};var tr;(function(e){e.Before="before",e.After="after"})(tr||(tr={}));const tq=(e,t)=>Math.abs(e.left-t),nq=(e,t)=>Math.abs(e.right-t),sq=(e,t)=>e>=t.top&&e<=t.bottom,oq=(e,t)=>e.top<t.bottom&&e.bottom>t.top,rq=(e,t)=>{const n=pT(e,t)/Math.min(e.height,t.height);return oq(e,t)&&n>.5},aq=(e,t)=>{const n=se(e,s=>sq(t,s));return gT(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=yo(e,a=>rq(a,s));return[o,r]})},iq=(e,t)=>({node:e.node,position:tq(e,t)<nq(e,t)?tr.Before:tr.After}),cq=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),xm=(e,t,n,s)=>{const o=f=>an(f.node)?m.some(f):q(f.node)?xm(Ft(f.node.childNodes),t,n,!1):m.none(),r=(f,d,p)=>o(d).filter(h=>Math.abs(p(f,t,n)-p(h,t,n))<2&&B(h.node)),a=(f,d)=>{const p=Ns(f,(h,g)=>d(h,t,n)-d(g,t,n));return vo(p,o).map(h=>s&&!B(h.node)&&p.length>1?r(h,p[1],d).getOr(h):h)},[i,c]=aq(fS(e),n),{pass:l,fail:u}=yo(c,f=>f.top<n);return a(i,cq).orThunk(()=>a(u,Yp)).orThunk(()=>a(l,Yp))},lq=(e,t,n,s)=>{const o=(r,a)=>{const i=l=>q(l)&&l.classList.contains("mce-drag-container"),c=se(r.dom.childNodes,fr(i));return a.fold(()=>xm(c,n,s,!0),l=>{const u=se(c,f=>f!==l.dom);return xm(u,n,s,!0)}).orThunk(()=>(ye(r,e)?m.none():li(r)).bind(u=>o(u,m.some(r))))};return o(t,m.none())},uq=(e,t,n)=>{const s=C.fromDom(e),o=jn(s),a=C.fromPoint(o,t,n).filter(i=>Vn(s,i)).getOr(s);return lq(s,a,t,n)},qw=(e,t,n)=>uq(e,t,n).filter(s=>Jr(s.node)).map(s=>iq(s,t)),Kw=e=>{var t,n;const s=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,a=o.defaultView;return{top:s.top+((t=a==null?void 0:a.scrollY)!==null&&t!==void 0?t:0)-r.clientTop,left:s.left+((n=a==null?void 0:a.scrollX)!==null&&n!==void 0?n:0)-r.clientLeft}},fq=e=>e.inline?Kw(e.getBody()):{left:0,top:0},dq=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},mq=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},gq=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=Kw(e.getContentAreaContainer()),s=mq(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},pq=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),hq=(e,t)=>pq(fq(e),dq(e),gq(e,t)),Gw=e=>({target:e,srcElement:e}),bq=(e,t,n,s)=>({...t,dataTransfer:s,type:e,...Gw(n)}),Cq=(e,t,n)=>{const s=Zm("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:s,initEvent:s,preventDefault:le,stopImmediatePropagation:le,stopPropagation:le,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:s,initMouseEvent:s,getModifierState:s,dataTransfer:n,...Gw(t)}},yq=(e,t)=>{const n=zj(e);return t==="dragstart"?(Cw(n),vw(n)):t==="drop"?(Dj(n),Cm(n)):(Oj(n),$j(n)),n},vq=(e,t,n,s)=>{const o=yq(n,e);return ct(s)?Cq(e,t,o):bq(e,s,t,o)},qc=32,Eq=100,Kc=8,Gc=16,Yw=De,Sq=yT(Yw,rn),wq=(e,t,n)=>Yw(n)&&n!==t&&e.isEditable(n.parentElement),kq=(e,t,n)=>qe(t)||t===n||e.dom.isChildOf(t,n)?!1:e.dom.isEditable(t),_q=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),a.appendChild(r),a},xq=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},Yc=(e,t)=>n=>()=>{const s=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:s+t,behavior:"smooth"})},Xw=Yc("left",-qc),Zw=Yc("left",qc),Qw=Yc("top",-qc),Jw=Yc("top",qc),Nq=(e,t,n,s,o,r,a,i,c,l,u,f)=>{let d=0,p=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(d=t.pageX+n-o),t.pageY+s>r&&(p=t.pageY+s-r),e.style.width=n-d+"px",e.style.height=s-p+"px";const h=c.clientHeight,g=c.clientWidth,b=a+c.getBoundingClientRect().top,y=i+c.getBoundingClientRect().left;u.on(v=>{v.intervalId.clear(),v.dragging&&f&&(a+Kc>=h?v.intervalId.set(Jw(l)):a-Kc<=0?v.intervalId.set(Qw(l)):i+Kc>=g?v.intervalId.set(Zw(l)):i-Kc<=0?v.intervalId.set(Xw(l)):b+Gc>=window.innerHeight?v.intervalId.set(Jw(window)):b-Gc<=0?v.intervalId.set(Qw(window)):y+Gc>=window.innerWidth?v.intervalId.set(Zw(window)):y-Gc<=0&&v.intervalId.set(Xw(window)))})},ek=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Aq=(e,t)=>{const n=e.getParent(t.parentNode,e.isBlock);ek(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&as(C.fromDom(n))},Tq=e=>e.button===0,Rq=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),Pq=(e,t)=>n=>{if(Tq(n)){const s=Ye(t.dom.getParents(n.target),Sq).getOr(null);if(M(s)&&wq(t.dom,t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),a=t.getDoc().documentElement;e.set({element:s,dataTransfer:ym(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:a.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:_q(t,s,s.offsetWidth,s.offsetHeight),intervalId:sT(Eq)})}}},Dq=(e,t,n)=>{e._selectionOverrides.hideFakeCaret(),qw(e.getBody(),t,n).fold(()=>e.selection.placeCaretAt(t,n),s=>{const o=e._selectionOverrides.showCaret(1,s.node,s.position===tr.Before,!1);o?e.selection.setRng(o):e.selection.placeCaretAt(t,n)})},Ma=(e,t,n,s,o)=>{t==="dragstart"&&ww(s,e.dom.getOuterHTML(n));const r=vq(t,n,s,o);return e.dispatch(t,r)},Oq=(e,t)=>{const n=Ti((o,r)=>Dq(t,o,r),0);t.on("remove",n.cancel);const s=e;return o=>e.on(r=>{const a=Math.max(Math.abs(o.screenX-r.screenX),Math.abs(o.screenY-r.screenY));if(!r.dragging&&a>10){const i=Ma(t,"dragstart",r.element,r.dataTransfer,o);if(M(i.dataTransfer)&&(r.dataTransfer=i.dataTransfer),i.isDefaultPrevented())return;r.dragging=!0,t.focus()}if(r.dragging){const i=o.currentTarget===t.getDoc().documentElement,c=Rq(r,hq(t,o));xq(r.ghost,t.getBody()),Nq(r.ghost,c,r.width,r.height,r.maxX,r.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),s,i),n.throttle(o.clientX,o.clientY)}})},Bq=e=>{const t=e.getSel();if(M(t)){const s=t.getRangeAt(0).startContainer;return B(s)?s.parentNode:s}else return null},Iq=(e,t)=>n=>{e.on(s=>{var o;if(s.intervalId.clear(),s.dragging){if(kq(t,Bq(t.selection),s.element)){const r=(o=t.getDoc().elementFromPoint(n.clientX,n.clientY))!==null&&o!==void 0?o:t.getBody();Ma(t,"drop",r,s.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{Aq(t.dom,s.element),Hj(s.dataTransfer).each(i=>t.insertContent(i)),t._selectionOverrides.hideFakeCaret()})}Ma(t,"dragend",t.getBody(),s.dataTransfer,n)}}),nk(e)},tk=(e,t,n)=>{e.on(s=>{s.intervalId.clear(),s.dragging&&n.fold(()=>Ma(t,"dragend",s.element,s.dataTransfer),o=>Ma(t,"dragend",s.element,s.dataTransfer,o))}),nk(e)},Lq=(e,t)=>n=>tk(e,t,m.some(n)),nk=e=>{e.on(t=>{t.intervalId.clear(),ek(t.ghost)}),e.clear()},$q=e=>{const t=us(),n=Ne.DOM,s=document,o=Pq(t,e),r=Oq(t,e),a=Iq(t,e),i=Lq(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",a),n.bind(s,"mousemove",r),n.bind(s,"mouseup",i),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",i)}),e.on("keydown",c=>{c.keyCode===H.ESC&&tk(t,e,m.none())})},Fq=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(ke(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&Cc(e,"Dropped file type is not supported"))}},n=o=>{Qi(e,o.target)&&t(o)},s=()=>{const o=Ne.DOM,r=e.dom,a=document,i=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];P(c,l=>{o.bind(a,l,n),r.bind(i,l,t)}),e.on("remove",()=>{P(c,l=>{o.unbind(a,l,n),r.unbind(i,l,t)})})};e.on("init",()=>{Zt.setEditorTimeout(e,s,0)})},Mq=e=>{$q(e),$R(e)&&Fq(e)},Uq=e=>{const t=Ti(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=Td(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},zq=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(An(n)){const s=ro(e.getBody(),n),o=De(s)?s:n;e.selection.getNode()!==o&&xa(e,o).each(r=>e.selection.setRng(r))}})})},Ua=De,sk=(e,t)=>ro(e.getBody(),t),Hq=e=>{const t=e.selection,n=e.dom,s=e.getBody(),o=RP(e,s,n.isBlock,()=>no(e)),r="sel-"+n.uniqueId(),a="data-mce-selected";let i;const c=U=>M(U)&&n.hasClass(U,"mce-offscreen-selection"),l=U=>U!==s&&(Ua(U)||An(U))&&n.isChildOf(U,s)&&n.isEditable(U.parentNode),u=U=>{U&&t.setRng(U)},f=(U,A,_,R=!0)=>e.dispatch("ShowCaret",{target:A,direction:U,before:_}).isDefaultPrevented()?null:(R&&t.scrollIntoView(A,U===-1),o.show(_,A)),d=U=>{U.hasAttribute("data-mce-caret")&&(Kl(U),t.scrollIntoView(U))},p=()=>{e.on("click",A=>{n.isEditable(A.target)||(A.preventDefault(),e.focus())}),e.on("blur NewBlock",S),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",A=>{const _=A.target,R=sk(e,_);Ua(R)?(A.preventDefault(),xa(e,R).each(E)):l(_)&&xa(e,_).each(E)},!0),e.on("mousedown",A=>{const _=A.target;if(_!==s&&_.nodeName!=="HTML"&&!n.isChildOf(_,s)||!OU(e,A.clientX,A.clientY))return;S(),O();const R=sk(e,_);Ua(R)?(A.preventDefault(),xa(e,R).each(E)):qw(s,A.clientX,A.clientY).each(z=>{A.preventDefault();const Z=f(1,z.node,z.position===tr.Before,!1);u(Z),Yn(R)?R.focus():e.getBody().focus()})}),e.on("keypress",A=>{H.modifierPressed(A)||Ua(t.getNode())&&A.preventDefault()}),e.on("GetSelectionRange",A=>{let _=A.range;if(i){if(!i.parentNode){i=null;return}_=_.cloneRange(),_.selectNode(i),A.range=_}}),e.on("SetSelectionRange",A=>{A.range=b(A.range);const _=E(A.range,A.forward);_&&(A.range=_)});const U=A=>q(A)&&A.id==="mcepastebin";e.on("AfterSetSelectionRange",A=>{const _=A.range,R=_.startContainer.parentElement;!g(_)&&!U(R)&&O(),c(R)||S()}),Mq(e),Uq(e),zq(e)},h=U=>qt(U)||vi(U)||Ei(U),g=U=>h(U.startContainer)||h(U.endContainer),b=U=>{const A=e.schema.getVoidElements(),_=n.createRng(),R=U.startContainer,z=U.startOffset,Z=U.endContainer,re=U.endOffset;return oe(A,R.nodeName.toLowerCase())?z===0?_.setStartBefore(R):_.setStartAfter(R):_.setStart(R,z),oe(A,Z.nodeName.toLowerCase())?re===0?_.setEndBefore(Z):_.setEndAfter(Z):_.setEnd(Z,re),_},y=(U,A)=>{const _=C.fromDom(e.getBody()),R=e.getDoc(),z=Ar(_,"#"+r).getOrThunk(()=>{const ie=C.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',R);return ot(ie,"id",r),We(_,ie),ie}),Z=n.createRng();Ao(z),Ls(z,[C.fromText(Je,R),C.fromDom(A),C.fromText(Je,R)]),Z.setStart(z.dom.firstChild,1),Z.setEnd(z.dom.lastChild,0),ui(z,{top:n.getPos(U,e.getBody()).y+"px"}),sC(z);const re=t.getSel();return re&&(re.removeAllRanges(),re.addRange(Z)),Z},v=U=>{const A=U.cloneNode(!0),_=e.dispatch("ObjectSelected",{target:U,targetClone:A});if(_.isDefaultPrevented())return null;const R=y(U,_.targetClone),z=C.fromDom(U);return P(mt(C.fromDom(e.getBody()),`*[${a}]`),Z=>{ye(z,Z)||rt(Z,a)}),n.getAttrib(U,a)||U.setAttribute(a,"1"),i=U,O(),R},E=(U,A)=>{if(!U)return null;if(U.collapsed){if(!g(U)){const Z=A?1:-1,re=sa(Z,s,U),ie=re.getNode(!A);if(M(ie)){if(Jr(ie))return f(Z,ie,A?!re.isAtEnd():!1,!1);if(is(ie)&&De(ie.nextSibling)){const we=n.createRng();return we.setStart(ie,0),we.setEnd(ie,0),we}}const Ce=re.getNode(A);if(M(Ce)){if(Jr(Ce))return f(Z,Ce,A?!1:!re.isAtEnd(),!1);if(is(Ce)&&De(Ce.previousSibling)){const we=n.createRng();return we.setStart(Ce,1),we.setEnd(Ce,1),we}}}return null}let _=U.startContainer,R=U.startOffset;const z=U.endOffset;if(B(_)&&R===0&&Ua(_.parentNode)&&(_=_.parentNode,R=n.nodeIndex(_),_=_.parentNode),!q(_))return null;if(z===R+1&&_===U.endContainer){const Z=_.childNodes[R];if(l(Z))return v(Z)}return null},S=()=>{i&&i.removeAttribute(a),Ar(C.fromDom(e.getBody()),"#"+r).each(Pe),i=null},T=()=>{o.destroy(),i=null},O=()=>{o.hide()};return In(e)||p(),{showCaret:f,showBlockCaretContainer:d,hideFakeCaret:O,destroy:T}},Wq=(e,t)=>{let n=t;for(let s=e.previousSibling;B(s);s=s.previousSibling)n+=s.data.length;return n},ok=(e,t,n,s,o)=>{if(B(n)&&(s<0||s>n.data.length))return[];const r=o&&B(n)?[Wq(n,s)]:[s];let a=n;for(;a!==t&&a.parentNode;)r.push(e.nodeIndex(a,o)),a=a.parentNode;return a===t?r.reverse():[]},Nm=(e,t,n,s,o,r,a=!1)=>{const i=ok(e,t,n,s,a),c=ok(e,t,o,r,a);return{start:i,end:c}},rk=(e,t)=>{const n=t.slice(),s=n.pop();return mn(s)?Rt(n,(r,a)=>r.bind(i=>m.from(i.childNodes[a])),m.some(e)).bind(r=>B(r)&&(s<0||s>r.data.length)?m.none():m.some({node:r,offset:s})):m.none()},ak=(e,t)=>rk(e,t.start).bind(({node:n,offset:s})=>rk(e,t.end).map(({node:o,offset:r})=>{const a=document.createRange();return a.setStart(n,s),a.setEnd(o,r),a})),Vq=(e,t,n,s=!1)=>Nm(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s),nr=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t,B(t.firstChild)&&cs(t.firstChild.data)),nr(e,s,n)}},Xc=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(B(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),B(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),nr(e,o,n),o!==r&&nr(e,r,n))},Am=(e,t)=>m.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),ik=(e,t,n)=>{const s=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:Ch(s).concat(e.blockPatterns),inlinePatterns:yh(s).concat(e.inlinePatterns)}},ck=(e,t,n,s)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,s),o.toString()},jq=e=>/^\s[^\s]/.test(e),lk=(e,t,n)=>{zW(t,0,t).each(o=>{const r=o.container;p0(r,n.start.length,t).each(c=>{const l=e.createRng();l.setStart(r,0),l.setEnd(c.container,c.offset),Xc(e,l,u=>u===t)});const a=C.fromDom(r),i=bi(a);jq(i)&&pN(a,i.slice(1))})},qq=(e,t)=>{const n=e.dom,s=t.pattern,o=ak(n.getRoot(),t.range).getOrDie("Unable to resolve path range"),r=(a,i)=>{const c=i.get(a);return Ge(c)&&Pt(c).exists(l=>oe(l,"block"))};return Am(e,o).each(a=>{s.type==="block-format"?r(s.format,e.formatter)&&e.undoManager.transact(()=>{lk(e.dom,a,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{lk(e.dom,a,s),e.execCommand(s.cmd,!1,s.value)})}),!0},Kq=e=>Ns(e,(t,n)=>n.start.length-t.start.length),Gq=(e,t)=>{const n=Kq(e),s=t.replace(Je," ");return Ye(n,o=>t.indexOf(o.start)===0||s.indexOf(o.start)===0)},Yq=(e,t,n,s)=>{var o;const r=e.dom,a=gt(e);if(!r.is(t,a))return[];const i=(o=t.textContent)!==null&&o!==void 0?o:"";return Gq(n.blockPatterns,i).map(c=>L.trim(i).length===c.start.length?[]:[{pattern:c,range:Nm(r,r.getRoot(),t,0,t,0,s)}]).getOr([])},Xq=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();P(t,s=>qq(e,s)),e.selection.moveToBookmark(n)},uk=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Zc=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},fk=(e,t,n)=>{const s=ak(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,a=s.endOffset===0?r:r.splitText(s.endOffset),i=s.startOffset===0?o:o.splitText(s.startOffset),c=i.parentNode,l=a.parentNode;return{prefix:t,end:l.insertBefore(uk(e,t+"-end"),a),start:c.insertBefore(uk(e,t+"-start"),i)}},dk=(e,t,n)=>{nr(e,e.get(t.prefix+"-end"),n),nr(e,e.get(t.prefix+"-start"),n)},Tm=e=>e.start.length===0,Zq=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),a=o.lastIndexOf(e);return a!==-1?a+e.length:r!==-1?r+1:-1},mk=(e,t,n,s)=>{const o=t.start;return Qd(e,s.container,s.offset,Zq(o),n).bind(a=>{var i,c;const l=(c=(i=n.textContent)===null||i===void 0?void 0:i.indexOf(o))!==null&&c!==void 0?c:-1;if(l!==-1&&a.offset>=l+o.length){const f=e.createRng();return f.setStart(a.container,a.offset-o.length),f.setEnd(a.container,a.offset),m.some(f)}else{const f=a.offset-o.length;return Zd(a.container,f,n).map(d=>{const p=e.createRng();return p.setStart(d.container,d.offset),p.setEnd(a.container,a.offset),p}).filter(d=>d.toString()===o).orThunk(()=>mk(e,t,n,vn(a.container,0)))}})},Qq=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const a=e.createRng();return a.setStart(n,s),a.setEnd(n,s),m.some(a)}return Xd(n,s,o).bind(a=>mk(e,t,o,a).bind(c=>{var l;if(r){if(c.endContainer===a.container&&c.endOffset===a.offset)return m.none();if(a.offset===0&&((l=c.endContainer.textContent)===null||l===void 0?void 0:l.length)===c.endOffset)return m.none()}return m.some(c)}))},Jq=(e,t,n,s)=>{const o=e.dom,r=o.getRoot(),a=n.pattern,i=n.position.container,c=n.position.offset;return Zd(i,c-n.pattern.end.length,t).bind(l=>{const u=Nm(o,r,l.container,l.offset,i,c,s);if(Tm(a))return m.some({matches:[{pattern:a,startRng:u,endRng:u}],position:l});{const f=Qc(e,n.remainingPatterns,l.container,l.offset,t,s),d=f.getOr({matches:[],position:l}),p=d.position;return Qq(o,a,p.container,p.offset,t,f.isNone()).map(g=>{const b=Vq(o,r,g,s);return{matches:d.matches.concat([{pattern:a,startRng:b,endRng:u}]),position:vn(g.startContainer,g.startOffset)}})}})},Qc=(e,t,n,s,o,r)=>{const a=e.dom;return Xd(n,s,a.getRoot()).bind(i=>{const c=ck(a,o,n,s);for(let l=0;l<t.length;l++){const u=t[l];if(!wl(c,u.end))continue;const f=t.slice();f.splice(l,1);const d=Jq(e,o,{pattern:u,remainingPatterns:f,position:i},r);if(d.isNone()&&s>0)return Qc(e,t,n,s-1,o,r);if(d.isSome())return d}return m.none()})},gk=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?P(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},e6=(e,t,n,s)=>{const o=Zc(e.dom,n);Xc(e.dom,o,s),gk(e,t,o)},t6=(e,t,n,s,o)=>{const r=e.dom,a=Zc(r,s),i=Zc(r,n);Xc(r,i,o),Xc(r,a,o);const c={prefix:n.prefix,start:n.end,end:s.start},l=Zc(r,c);gk(e,t,l)},n6=(e,t)=>{const n=jr("mce_textpattern"),s=mr(t,(o,r)=>{const a=fk(e,n+`_end${o.length}`,r.endRng);return o.concat([{...r,endMarker:a}])},[]);return mr(s,(o,r)=>{const a=s.length-o.length-1,i=Tm(r.pattern)?r.endMarker:fk(e,n+`_start${a}`,r.startRng);return o.concat([{...r,startMarker:i}])},[])},s6=e=>Ns(e,(t,n)=>n.end.length-t.end.length),o6=(e,t)=>{const n=Un(e,s=>Fe(t,o=>s.pattern.start===o.pattern.start&&s.pattern.end===o.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t},pk=(e,t,n,s,o,r)=>{const a=Qc(e,o.inlinePatterns,n,s,t,r).fold(()=>[],c=>c.matches),i=Qc(e,s6(o.inlinePatterns),n,s,t,r).fold(()=>[],c=>c.matches);return o6(a,i)},hk=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=n6(n,t);P(o,r=>{const a=n.getParent(r.startMarker.start,n.isBlock),i=c=>c===a;Tm(r.pattern)?e6(e,r.pattern,r.endMarker,i):t6(e,r.pattern,r.startMarker,r.endMarker,i),dk(n,r.endMarker,i),dk(n,r.startMarker,i)}),e.selection.moveToBookmark(s)},r6=(e,t)=>{const n=e.selection.getRng();return Am(e,n).map(s=>{var o;const r=Math.max(0,n.startOffset),a=ik(t,s,(o=s.textContent)!==null&&o!==void 0?o:""),i=pk(e,s,n.startContainer,r,a,!0),c=Yq(e,s,a,!0);return c.length>0||i.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{NN(e),hk(e,i),Xq(e,c);const l=e.selection.getRng(),u=Xd(l.startContainer,l.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const d=f.container;d.data.charAt(f.offset-1)===Dr&&(d.deleteData(f.offset-1,1),nr(e.dom,d.parentNode,p=>p===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},a6=(e,t)=>{const n=e.selection.getRng();Am(e,n).map(s=>{const o=Math.max(0,n.startOffset-1),r=ck(e.dom,s,n.startContainer,o),a=ik(t,s,r),i=pk(e,s,n.startContainer,o,a,!1);i.length>0&&e.undoManager.transact(()=>{hk(e,i)})})},bk=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},i6=(e,t)=>bk(e,t,(n,s)=>n===s.keyCode&&!H.modifierPressed(s)),c6=(e,t)=>bk(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),l6=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>VT(oP(e),rP(e)),o=()=>fP(e);e.on("keydown",a=>{if(a.keyCode===13&&!H.modifierPressed(a)&&e.selection.isCollapsed()){const i=s();(i.inlinePatterns.length>0||i.blockPatterns.length>0||o())&&r6(e,i)&&a.preventDefault()}},!0);const r=()=>{if(e.selection.isCollapsed()){const a=s();(a.inlinePatterns.length>0||o())&&a6(e,a)}};e.on("keyup",a=>{i6(n,a)&&r()}),e.on("keypress",a=>{c6(t,a)&&Zt.setEditorTimeout(e,r)})},u6=e=>{l6(e)},f6=e=>{const t=L.each,n=H.BACKSPACE,s=H.DELETE,o=e.dom,r=e.selection,a=e.parser,i=be.browser,c=i.isFirefox(),l=i.isChromium()||i.isSafari(),u=be.deviceType.isiPhone()||be.deviceType.isiPad(),f=be.os.isMacOS()||be.os.isiOS(),d=(G,Y)=>{try{e.getDoc().execCommand(G,!1,String(Y))}catch{}},p=G=>G.isDefaultPrevented(),h=()=>{const G=I=>{const ee=o.create("body"),ue=I.cloneContents();return ee.appendChild(ue),r.serializer.serialize(ee,{format:"html"})},Y=I=>{const ee=G(I),ue=o.createRng();ue.selectNode(e.getBody());const ve=G(ue);return ee===ve};e.on("keydown",I=>{const ee=I.keyCode;if(!p(I)&&(ee===s||ee===n)&&e.selection.isEditable()){const ue=e.selection.isCollapsed(),ve=e.getBody();if(ue&&!Ue(C.fromDom(ve))||!ue&&!Y(e.selection.getRng()))return;I.preventDefault(),e.setContent(""),ve.firstChild&&o.isBlock(ve.firstChild)?e.selection.setCursorLocation(ve.firstChild,0):e.selection.setCursorLocation(ve,0),e.nodeChanged()}})},g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",G=>{let Y;if(G.target===e.getDoc().documentElement)if(Y=r.getRng(),e.getBody().focus(),G.type==="mousedown"){if(qt(Y.startContainer))return;r.placeCaretAt(G.clientX,G.clientY)}else r.setRng(Y)})},y=()=>{e.on("keydown",G=>{if(!p(G)&&G.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const Y=r.getNode(),I=Y.previousSibling;if(Y.nodeName==="HR"){o.remove(Y),G.preventDefault();return}I&&I.nodeName&&I.nodeName.toLowerCase()==="hr"&&(o.remove(I),G.preventDefault())}}})},v=()=>{Range.prototype.getClientRects||e.on("mousedown",G=>{if(!p(G)&&G.target.nodeName==="HTML"){const Y=e.getBody();Y.blur(),Zt.setEditorTimeout(e,()=>{Y.focus()})}})},E=()=>{const G=Ih(e);e.on("click",Y=>{const I=Y.target;/^(IMG|HR)$/.test(I.nodeName)&&o.isEditable(I)&&(Y.preventDefault(),e.selection.select(I),e.nodeChanged()),I.nodeName==="A"&&o.hasClass(I,G)&&I.childNodes.length===0&&o.isEditable(I.parentNode)&&(Y.preventDefault(),r.select(I))})},S=()=>{const G=()=>{const I=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const ee=r.getStart();ee!==e.getBody()&&(o.setAttrib(ee,"style",null),t(I,ue=>{ee.setAttributeNode(ue.cloneNode(!0))}))}},Y=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",I=>{let ee;return!p(I)&&(I.keyCode===8||I.keyCode===46)&&Y()?(ee=G(),e.getDoc().execCommand("delete",!1),ee(),I.preventDefault(),!1):!0}),o.bind(e.getDoc(),"cut",I=>{if(!p(I)&&Y()){const ee=G();Zt.setEditorTimeout(e,()=>{ee()})}})},T=()=>{e.on("keydown",G=>{if(!p(G)&&G.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const Y=r.getNode().previousSibling;if(Y&&Y.nodeName&&Y.nodeName.toLowerCase()==="table")return G.preventDefault(),!1}return!0})},O=()=>{e.on("keydown",G=>{if(p(G)||G.keyCode!==H.BACKSPACE)return;let Y=r.getRng();const I=Y.startContainer,ee=Y.startOffset,ue=o.getRoot();let ve=I;if(!(!Y.collapsed||ee!==0)){for(;ve.parentNode&&ve.parentNode.firstChild===ve&&ve.parentNode!==ue;)ve=ve.parentNode;ve.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,ve),Y=o.createRng(),Y.setStart(I,0),Y.setEnd(I,0),r.setRng(Y))}})},U=()=>{const G=()=>{d("StyleWithCSS",!1),d("enableInlineTableEditing",!1),Ph(e)||d("enableObjectResizing",!1)};Oh(e)||e.on("BeforeExecCommand mousedown",G)},A=()=>{const G=()=>{t(o.select("a:not([data-mce-block])"),Y=>{var I;let ee=Y.parentNode;const ue=o.getRoot();if((ee==null?void 0:ee.lastChild)===Y){for(;ee&&!o.isBlock(ee);){if(((I=ee.parentNode)===null||I===void 0?void 0:I.lastChild)!==ee||ee===ue)return;ee=ee.parentNode}o.add(ee,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Y=>{(Y.type==="setcontent"||Y.command==="mceInsertLink")&&G()})},_=()=>{e.on("init",()=>{d("DefaultParagraphSeparator",gt(e))})},R=G=>{const Y=G.getBody(),I=G.selection.getRng();return I.startContainer===I.endContainer&&I.startContainer===Y&&I.startOffset===0&&I.endOffset===Y.childNodes.length},z=()=>{e.on("keyup focusin mouseup",G=>{!H.modifierPressed(G)&&!R(e)&&r.normalize()},!0)},Z=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},re=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},ie=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",G=>{let Y;G.target.nodeName==="HTML"&&(Y=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Y),e.selection.normalize(),e.nodeChanged())}))},Ce=()=>{f&&e.on("keydown",G=>{H.metaKeyPressed(G)&&!G.shiftKey&&(G.keyCode===37||G.keyCode===39)&&(G.preventDefault(),e.selection.getSel().modify("move",G.keyCode===37?"backward":"forward","lineboundary"))})},we=()=>{e.on("click",G=>{let Y=G.target;do if(Y.tagName==="A"){G.preventDefault();return}while(Y=Y.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Ie=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",G=>{G.preventDefault()})})},nt=()=>{a.addNodeFilter("br",G=>{let Y=G.length;for(;Y--;)G[Y].attr("class")==="Apple-interchange-newline"&&G[Y].remove()})},Ve=le,F=()=>{if(!c||e.removed)return!1;const G=e.selection.getSel();return!G||!G.rangeCount||G.rangeCount===0},K=()=>{l&&(b(),E(),Ie(),g(),u&&(re(),ie(),we())),c&&(v(),U(),Z(),Ce())},ge=()=>{e.on("drop",G=>{var Y;const I=(Y=G.dataTransfer)===null||Y===void 0?void 0:Y.getData("text/html");J(I)&&/^<img[^>]*>$/.test(I)&&e.dispatch("dragend",new window.DragEvent("dragend",G))})},de=()=>{O(),h(),be.windowsPhone||z(),l&&(b(),E(),_(),Ie(),T(),nt(),u?(re(),ie(),we()):g()),c&&(y(),v(),S(),U(),A(),Z(),Ce(),T(),ge())};return In(e)?K():de(),{refreshContentEditable:Ve,isHidden:F}},Rm=Ne.DOM,d6=(e,t)=>{const n=C.fromDom(e.getBody()),s=Ol(os(n)),o=C.fromTag("style");ot(o,"type","text/css"),We(o,C.fromText(t)),We(s,o),e.on("remove",()=>{Pe(o)})},m6=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Pm=e=>hr(e,t=>ct(t)===!1),Ck=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Pm({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:m6(e),sandbox_iframes:t("sandbox_iframes"),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},yk=e=>{const t=e.options.get;return Pm({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},g6=e=>{const t=e.options.get;return{...Ck(e),...yk(e),...Pm({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},p6=e=>{const t=Ko(Ck(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{const o=e.dom,r="data-mce-"+s;let a=n.length;for(;a--;){const i=n[a];let c=i.attr(s);if(c&&!i.attr(r)){if(c.indexOf("data:")===0||c.indexOf("blob:")===0)continue;s==="style"?(c=o.serializeStyle(o.parseStyle(c),i.name),c.length||(c=null),i.attr(r,c),i.attr(s,c)):s==="tabindex"?(i.attr(r,c),i.attr(s,null)):i.attr(r,e.convertURL(c,s,i.name))}}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),cP(e)&&t.addNodeFilter("#cdata",n=>{var s;let o=n.length;for(;o--;){const r=n[o];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode((s=r.value)!==null&&s!==void 0?s:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new Et("br",1))}}),t},h6=e=>{const t=VR(e);t&&Zt.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},b6=e=>{const t=e.dom.getRoot();!e.inline&&(!Hi(e)||e.selection.getStart(!0)===t)&&pt(t).each(n=>{const s=n.getNode(),o=Xn(s)?pt(s).getOr(n):n;e.selection.setRng(o.toRange())})},C6=e=>{e.bindPendingEventDelegates(),e.initialized=!0,zD(e),e.focus(!0),b6(e),e.nodeChanged({initial:!0});const t=HR(e);Se(t)&&t.call(e,e),h6(e)},Dm=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,y6=(e,t,n)=>{const{pass:s,fail:o}=yo(t,i=>tinymce.Resource.has(kd(i))),a=[...s.map(i=>{const c=tinymce.Resource.get(kd(i));return J(c)?Promise.resolve(Dm(e).loadRawCss(i,c)):Promise.resolve()}),Dm(e).loadAll(o)];return e.inline?a:a.concat([e.ui.styleSheetLoader.loadAll(n)])},vk=e=>{const t=Dm(e),n=Rh(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let c="";L.each(e.contentStyles,l=>{c+=l+`\r
`}),e.dom.addStyle(c)}const a=Promise.all(y6(e,s,n)).then(r).catch(r),i=hR(e);return i&&d6(e,i),a},v6=e=>{const t=e.getDoc(),n=e.getBody();MD(e),jR(e)||(t.body.spellcheck=!1,Rm.setAttrib(n,"spellcheck","false")),e.quirks=f6(e),UD(e);const s=bR(e);s!==void 0&&(n.dir=s);const o=qR(e);o&&e.on("BeforeSetContent",r=>{L.each(o,a=>{r.content=r.content.replace(a,i=>"<!--mce:protected "+escape(i)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},E6=e=>{In(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},Om=e=>{e.removed!==!0&&(E6(e),C6(e))},S6=e=>{let t=!1;const n=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(n),t=!0,e.setProgressState(!1)}},Ek=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Rm.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=Oh(e),e._editableRoot=IR(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&Rm.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=az(e),e.schema=ls(yk(e)),e.dom=Ne(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:dR(e),referrerPolicy:_u(e),onSetAttrib:a=>{e.dispatch("SetAttrib",a)},force_hex_color:CP(e)}),e.parser=p6(e),e.serializer=dE(g6(e),e),e.selection=fE(e.dom,e.getWin(),e.serializer,e),e.annotator=Rb(e),e.formatter=NE(e),e.undoManager=TE(e),e._nodeChangeDispatcher=new Nj(e),e._selectionOverrides=Hq(e),D2(e),K8(e),z2(e),In(e)||(eq(e),u6(e));const o=xj(e);T2(e,o),$2(e),Ez(e),V8(e);const r=lM(e);v6(e),r.fold(()=>{const a=S6(e);vk(e).then(()=>{Om(e),a()})},a=>{e.setProgressState(!0),vk(e).then(()=>{a().then(i=>{e.setProgressState(!1),Om(e),aE(e)},i=>{e.notificationManager.open({type:"error",text:String(i)}),Om(e),aE(e)})})})},w6=He,k6=(e,t,n)=>eN(e,t,w6,n),Bm=Ne.DOM,_6=(e,t,n,s)=>{const o=C.fromTag("iframe");return s.each(r=>ot(o,"tabindex",r)),Hn(o,n),Hn(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),_o(o,"tox-edit-area__iframe"),o},x6=e=>{let t=ZT(e)+"<html><head>";wh(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=QT(e),s=JT(e),o=e.translate(UR(e));return kh(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+kh(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},N6=(e,t)=>{const n=e.translate("Rich Text Area"),s=Wn(C.fromDom(e.getElement()),"tabindex").bind(ri),o=_6(e.id,n,XT(e),s).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=x6(e),Bm.add(t.iframeContainer,o)},A6=e=>{const t=e.iframeElement,n=()=>{e.contentDocument=t.contentDocument,Ek(e)};if(uP(e)||be.browser.isFirefox()){const s=e.getDoc();s.open(),s.write(e.iframeHTML),s.close(),n()}else{const s=k6(C.fromDom(t),"load",()=>{s.unbind(),n()});t.srcdoc=e.iframeHTML}},T6=(e,t)=>{N6(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=Bm.isHidden(t.editorContainer)),e.getElement().style.display="none",Bm.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,A6(e)},Sk=Ne.DOM,R6=(e,t,n)=>{const s=Yo.get(n),o=Yo.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=L.trim(n),s&&L.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,Se(r.init)&&(r.init(e,o),t.push(n))}catch(r){VU(e,n,r)}}},P6=e=>e.replace(/^\-/,""),D6=e=>{const t=[];P(Bi(e),n=>{R6(e,t,P6(n))})},O6=e=>{const t=L.trim(Nh(e)),n=e.ui.registry.getAll().icons,s={...bc.get("default").icons,...bc.get(t).icons};Ae(s,(o,r)=>{oe(n,r)||e.ui.registry.addIcon(r,o)})},B6=e=>{const t=Lo(e);if(J(t)){const n=co.get(t);e.theme=n(e,co.urls[t])||{},Se(e.theme.init)&&e.theme.init(e,co.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},I6=e=>{const t=xu(e),n=Go.get(t);e.model=n(e,Go.urls[t])},L6=e=>{const t=e.theme.renderUI;return t?t():kk(e)},$6=e=>{const t=e.getElement(),s=Lo(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},wk=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),F6=e=>{const t=Sk.create("div");return Sk.insertAfter(t,e),wk(t,t)},kk=e=>{const t=e.getElement();return e.inline?wk(null):F6(t)},M6=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,J(Lo(e))?L6(e):Se(Lo(e))?$6(e):kk(e)},U6=(e,t)=>{const n={show:m.from(t.show).getOr(le),hide:m.from(t.hide).getOr(le),isEnabled:m.from(t.isEnabled).getOr(He),setEnabled:s=>{e.mode.isReadOnly()||m.from(t.setEnabled).each(o=>o(s))}};e.ui={...e.ui,...n}},z6=async e=>{e.dispatch("ScriptsLoaded"),O6(e),B6(e),I6(e),D6(e);const t=await M6(e);U6(e,m.from(t.api).getOr({})),e.editorContainer=t.editorContainer,YU(e),e.inline?Ek(e):T6(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},uo=Ne.DOM,_k=e=>e.charAt(0)==="-",H6=(e,t)=>{const n=Ah(t),s=mR(t);if(!bn.hasCode(n)&&n!=="en"){const o=wn(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{zU(t,o,n)})}},W6=(e,t)=>{const n=Lo(e);if(J(n)&&!_k(n)&&!oe(co.urls,n)){const s=SR(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;co.load(n,o).catch(()=>{HU(e,o,n)})}},V6=(e,t)=>{const n=xu(e);if(n!=="plugin"&&!oe(Go.urls,n)){const s=wR(e),o=J(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;Go.load(n,o).catch(()=>{WU(e,o,n)})}},j6=e=>m.from(iR(e)).filter(wn).map(t=>({url:t,name:m.none()})),xk=(e,t,n)=>m.from(t).filter(s=>wn(s)&&!bc.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:m.some(s)})),q6=(e,t,n)=>{const s=xk(t,"default",n),o=j6(t).orThunk(()=>xk(t,Nh(t),""));P(ux([s,o]),r=>{e.add(r.url).catch(()=>{UU(t,r.url,r.name.getOrUndefined())})})},K6=(e,t)=>{const n=(s,o)=>{Yo.load(s,o).catch(()=>{MU(e,o,s)})};Ae(LR(e),(s,o)=>{n(o,s),e.options.set("plugins",Bi(e).concat(o))}),P(Bi(e),s=>{s=L.trim(s),s&&!Yo.urls[s]&&!_k(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},G6=e=>{const t=Lo(e);return!J(t)||M(co.get(t))},Y6=e=>{const t=xu(e);return M(Go.get(t))},X6=(e,t)=>{const n=Zn.ScriptLoader,s=()=>{!e.removed&&G6(e)&&Y6(e)&&z6(e)};W6(e,t),V6(e,t),H6(n,e),q6(n,e,t),K6(e,t),n.loadQueue().then(s,s)},Z6=(e,t)=>yp.forElement(e,{contentCssCors:Bh(t),referrerPolicy:_u(t)}),Q6=e=>{const t=e.id;bn.setCode(Ah(e));const n=()=>{uo.unbind(window,"ready",n),e.render()};if(!Vs.Event.domLoaded){uo.bind(window,"ready",n);return}if(!e.getElement())return;const s=C.fromDom(e.getElement()),o=xg(s);e.on("remove",()=>{Jm(s.dom.attributes,a=>rt(s,a.name)),Hn(s,o)}),e.ui.styleSheetLoader=Z6(s,e),Nu(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||uo.getParent(t,"form");r&&(e.formElement=r,TR(e)&&!Ml(e.getElement())&&(uo.insertAfter(uo.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=a=>{e.dispatch(a.type,a)},uo.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),RR(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=yE(e),e.notificationManager=CE(e),gP(e)&&e.on("GetContent",a=>{a.save&&(a.content=uo.encode(a.content))}),PR(e)&&e.on("submit",()=>{e.initialized&&e.save()}),DR(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),X6(e,e.suffix)},J6=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),XD(e,t))},e5=e=>e._editableRoot,t5=(e,t)=>({sections:V(e),options:V(t)}),Nk=kn().deviceType,Ak=Nk.isPhone(),n5=Nk.isTablet(),za=e=>{if(qe(e))return[];{const t=Ge(e)?e:e.split(/[ ,]/),n=he(t,So);return se(n,wn)}},s5=(e,t)=>{const n=S_(t,(s,o)=>ke(e,o));return t5(n.t,n.f)},o5=(e,t,n={})=>{const s=e.sections(),o=Re(s,t).getOr({});return L.extend({},n,o)},Im=(e,t)=>oe(e.sections(),t),r5=(e,t)=>Im(e,t)?e.sections()[t]:{},a5=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Re(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),i5=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?L.extend({},e.external_plugins,s):s},c5=(e,t)=>[...za(e),...za(t)],l5=(e,t,n,s)=>e&&Im(t,"mobile")?s:n,u5=(e,t,n,s)=>{const o=za(n.forced_plugins),r=za(s.plugins),a=r5(t,"mobile"),i=a.plugins?za(a.plugins):r,c=l5(e,t,r,i),l=c5(o,c);return L.extend(s,{forced_plugins:o,plugins:l})},f5=(e,t)=>e&&Im(t,"mobile"),d5=(e,t,n,s,o)=>{var r;const a=e?{mobile:a5((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},i=s5(["mobile"],Pc(a,o)),c=L.extend(n,s,i.options(),f5(e,i)?o5(i,"mobile"):{},{external_plugins:i5(s,i.options())});return u5(e,i,s,c)},m5=(e,t)=>d5(Ak||n5,Ak,t,e,t),g5=(e,t)=>BM(e,t),p5=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{P("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},h5=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return Fe(o,r=>M(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},b5=e=>{p5(e),h5(e)},C5=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(be.os.isMacOS()||be.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:o,type:"error"})}}})},y5=(e,t,n,s)=>{const o=C.fromDom(e.getRoot());return da(o,N.fromRangeStart(t),s)?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),ma(o,N.fromRangeEnd(t),s)?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},v5=e=>{if(typeof e!="string"){const t=L.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},E5=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?y5(s,n.getRng(),t,e.schema):t},Jc=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:s}=v5(t);gd(e,{...s,content:E5(e,n),format:"html",set:!1,selection:!0}).each(o=>{const r=DM(e,o.content,s);pd(e,r,o),e.addVisual()})}},S5=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{Jc(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{Jc(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{Jc(e,s)},mceInsertContent:(t,n,s)=>{Jc(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(XR(e))}})},w5={"font-size":"size","font-family":"face"},k5=ci("font"),_5=(e,t,n)=>{const s=r=>fi(r,e).orThunk(()=>k5(r)?Re(w5,e).bind(a=>Wn(r,a)):m.none()),o=r=>ye(C.fromDom(t),r);return qf(C.fromDom(n),r=>s(r),o)},x5=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),N5=(e,t)=>m.from(Ne.DOM.getStyle(t,e,!0)),Tk=e=>(t,n)=>m.from(n).map(C.fromDom).filter(Mt).bind(s=>_5(e,t,s.dom).or(N5(e,s.dom))).getOr(""),A5=Tk("font-size"),T5=Sn(x5,Tk("font-family")),R5=e=>pt(e.getBody()).bind(t=>{const n=t.container();return m.from(B(n)?n.parentNode:n)}),P5=e=>m.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?m.none():m.from(e.selection.getStart(!0))}),D5=(e,t)=>P5(e).orThunk(j(R5,e)).map(C.fromDom).filter(Mt).bind(t),Lm=(e,t)=>D5(e,Ym(m.some,t)),Rk=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=dP(e),o=mP(e);return o.length>0?o[n-1]||t:s[n-1]||t}else return t}else return t},O5=e=>{const t=e.split(/\s*,\s*/);return he(t,n=>n.indexOf(" ")!==-1&&!(st(n,'"')||st(n,"'"))?`'${n}'`:n).join(",")},B5=(e,t)=>{const n=Rk(e,t);e.formatter.toggle("fontname",{value:O5(n)}),e.nodeChanged()},I5=e=>Lm(e,t=>T5(e.getBody(),t.dom)).getOr(""),L5=(e,t)=>{e.formatter.toggle("fontsize",{value:Rk(e,t)}),e.nodeChanged()},$5=e=>Lm(e,t=>A5(e.getBody(),t.dom)).getOr(""),F5=e=>Lm(e,t=>{const n=C.fromDom(e.getBody()),s=qf(t,r=>fi(r,"line-height"),j(ye,n)),o=()=>{const r=parseFloat(Nn(t,"line-height")),a=parseFloat(Nn(t,"font-size"));return String(r/a)};return s.getOrThunk(o)}).getOr(""),M5=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},U5=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{B5(e,o)},FontSize:(n,s,o)=>{L5(e,o)},LineHeight:(n,s,o)=>{M5(e,o)},Lang:(n,s,o)=>{var r;t(n,{value:o.code,customValue:(r=o.customCode)!==null&&r!==void 0?r:null})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(J(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},z5=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>I5(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>$5(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>F5(e))},H5=e=>{U5(e),z5(e)},W5=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},V5=e=>{e.editorCommands.addCommands({Indent:()=>{x2(e)},Outdent:()=>{BS(e)}}),e.editorCommands.addCommands({Outdent:()=>RS(e)},"state")},j5=e=>{const t=(n,s,o)=>{const r=J(o)?{href:o}:o,a=e.dom.getParent(e.selection.getNode(),"a");yt(r)&&J(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!a||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,a))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},q5=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const o=e.selection.getBookmark();e.dom.split(s,n),e.selection.moveToBookmark(o)}}}})},K5=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(t==="insertunorderedlist"&&n.tagName==="UL"||t==="insertorderedlist"&&n.tagName==="OL")}},"state")},G5=e=>{q5(e),K5(e)},Y5=(e,t,n,s)=>{const o=e.dom,r=i=>o.isBlock(i)&&i.parentElement===n,a=r(t)?t:o.getParent(s,r,n);return m.from(a).map(C.fromDom)},Pk=(e,t)=>{const n=e.dom,s=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),r=t?s.startContainer:s.endContainer,a=La(n,r);if(!a||!a.isContentEditable)return;const i=t?Ot:Kn,c=gt(e);Y5(e,o,a,r).each(l=>{const u=X0(e,r,l.dom,a,!1,c);i(l,C.fromDom(u)),e.selection.setCursorLocation(u,0),e.dispatch("NewBlock",{newBlock:u}),Ia(e,"insertParagraph")})},X5=e=>Pk(e,!0),Z5=e=>Pk(e,!1),Q5=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{X5(e)},InsertNewBlockAfter:()=>{Z5(e)}})},J5=e=>{e.editorCommands.addCommands({insertParagraph:()=>{zc(ew,e)},mceInsertNewLine:(t,n,s)=>{iw(e,s)},InsertLineBreak:(t,n,s)=>{zc(sw,e)}})},e4=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>q(r)&&o++===s?(e.selection.select(r),!1):!0,e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),rn);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},t4=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s??e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{vO(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},n4=e=>{b5(e),C5(e),W5(e),e4(e),S5(e),j5(e),V5(e),Q5(e),J5(e),G5(e),H5(e),t4(e)},s4=["toggleview"],Dk=e=>ke(s4,e.toLowerCase());class Ok{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,s,o){const r=this.editor,a=t.toLowerCase(),i=o==null?void 0:o.skip_focus;if(r.removed||(a!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)&&!i?r.focus():eO(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const l=this.commands.exec[a];return Se(l)?(l(a,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(!Dk(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return Se(s)?s(n):!1}queryCommandValue(t){if(!Dk(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return Se(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;Ae(t,(o,r)=>{P(r.toLowerCase().split(","),a=>{s[n][a]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,a,i)=>n.call(s??this.editor,a,i)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s??this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s??this.editor)}}const fo="data-mce-contenteditable",o4=(e,t,n)=>{Al(e,t)&&!n?wr(e,t):n&&_o(e,t)},$m=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},el=(e,t)=>{e.dom.contentEditable=t?"true":"false"},r4=e=>{P(mt(e,'*[contenteditable="true"]'),t=>{ot(t,fo,"true"),el(t,!1)})},a4=e=>{P(mt(e,`*[${fo}="true"]`),t=>{rt(t,fo),el(t,!0)})},i4=e=>{m.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},c4=e=>{e.selection.setRng(e.selection.getRng())},l4=(e,t)=>{const n=C.fromDom(e.getBody());o4(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),i4(e),e.readonly=!0,el(n,!1),r4(n)):(e.readonly=!1,e.hasEditableRoot()&&el(n,!0),a4(n),$m(e,"StyleWithCSS",!1),$m(e,"enableInlineTableEditing",!1),$m(e,"enableObjectResizing",!1),uC(e)&&e.focus(),c4(e),e.nodeChanged())},mo=e=>e.readonly,Bk=e=>{e.parser.addAttributeFilter("contenteditable",t=>{mo(e)&&P(t,n=>{n.attr(fo,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(fo,t=>{mo(e)&&P(t,n=>{n.attr("contenteditable",n.attr(fo))})}),e.serializer.addTempAttr(fo)},u4=e=>{e.serializer?Bk(e):e.on("PreInit",()=>{Bk(e)})},f4=e=>e.type==="click",d4=["copy"],m4=e=>ke(d4,e.type),g4=(e,t)=>Bs(t,"a",s=>ye(s,C.fromDom(e.getBody()))).bind(s=>Wn(s,"href")),p4=(e,t)=>{if(f4(t)&&!H.metaKeyPressed(t)){const n=C.fromDom(t.target);g4(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${lg(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else m4(t)&&e.dispatch(t.type,t)},h4=e=>{e.on("ShowCaret",t=>{mo(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{mo(e)&&t.preventDefault()})},b4=L.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Fm{static isNative(t){return!!b4[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Le}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=lu(s,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let a=0,i=r.length;a<i;a++){const c=r[a];if(!c.removed){if(c.once&&this.off(s,c.func),o.isImmediatePropagationStopped())return o;if(c.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=Le),n){const r={func:n,removed:!1};o&&L.extend(r,o);const a=t.toLowerCase().split(" ");let i=a.length;for(;i--;){const c=a[i];let l=this.bindings[c];l||(l=[],this.toggleEvent(c,!0)),s?l=[r,...l]:l=[...l,r],this.bindings[c]=l}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let a=this.bindings[r];if(!r)return Ae(this.bindings,(i,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(a){if(!n)a.length=0;else{const i=yo(a,c=>c.func===n);a=i.fail,this.bindings[r]=a,P(i.pass,c=>{c.removed=!0})}a.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else Ae(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const Ha=e=>(e._eventDispatcher||(e._eventDispatcher=new Fm({scope:e,toggleEvent:(t,n)=>{Fm.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Mm={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return lu(e.toLowerCase(),t??{},s);const o=Ha(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent?r.parent():void 0}return o},on(e,t,n){return Ha(this).on(e,t,n)},off(e,t){return Ha(this).off(e,t)},once(e,t){return Ha(this).once(e,t)},hasEventListeners(e){return Ha(this).has(e)}},tl=Ne.DOM;let go;const nl=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=Dh(e);return n?(e.eventRoot||(e.eventRoot=tl.select(n)[0]),e.eventRoot):e.getBody()},C4=e=>!e.hidden&&!mo(e),Ik=(e,t,n)=>{C4(e)?e.dispatch(t,n):mo(e)&&p4(e,n)},Lk=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=nl(e,t);if(Dh(e)){if(go||(go={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||go&&(Ae(go,(o,r)=>{e.dom.unbind(nl(e,r))}),go=null)})),go[t])return;const s=o=>{const r=o.target,a=e.editorManager.get();let i=a.length;for(;i--;){const c=a[i].getBody();(c===r||tl.isChildOf(r,c))&&Ik(a[i],t,o)}};go[t]=s,tl.bind(n,t,s)}else{const s=o=>{Ik(e,t,o)};tl.bind(n,t,s),e.delegates[t]=s}},$k={...Mm,bindPendingEventDelegates(){const e=this;L.each(e._pendingNativeEvents,t=>{Lk(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?Lk(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(nl(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(Ae(e.delegates,(s,o)=>{e.dom.unbind(nl(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},y4=e=>J(e)?{value:e.split(/[ ,]/),valid:!0}:Co(e,J)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},v4=e=>{const t=(()=>{switch(e){case"array":return Ge;case"boolean":return xs;case"function":return Se;case"number":return mn;case"object":return yt;case"string":return J;case"string[]":return y4;case"object[]":return n=>Co(n,yt);case"regexp":return n=>Qa(n,RegExp);default:return He}})();return n=>Um(n,t,`The value must be a ${e}.`)},E4=e=>J(e.processor),Fk=(e,t)=>{const n=yr(t.message)?"":`. ${t.message}`;return e+n},Mk=e=>e.valid,Um=(e,t,n="")=>{const s=t(e);return xs(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},S4=(e,t,n)=>{if(!ct(t)){const s=Um(t,n);if(Mk(s))return s.value;console.error(Fk(`Invalid default value passed for the "${e}" option`,s))}},w4=(e,t)=>{const n={},s={},o=(f,d,p)=>{const h=Um(d,p);return Mk(h)?(s[f]=h.value,!0):(console.warn(Fk(`Invalid value passed for the ${f} option`,h)),!1)},r=(f,d)=>{const p=E4(d)?v4(d.processor):d.processor,h=S4(f,d.default,p);n[f]={...d,default:h,processor:p},Re(s,f).orThunk(()=>Re(t,f)).each(b=>o(f,b,p))},a=f=>oe(n,f);return{register:r,isRegistered:a,get:f=>Re(s,f).orThunk(()=>Re(n,f).map(d=>d.default)).getOrUndefined(),set:(f,d)=>{if(a(f)){const p=n[f];return p.immutable?(console.error(`"${f}" is an immutable option and cannot be updated`),!1):o(f,d,p.processor)}else return console.warn(`"${f}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:f=>{const d=a(f);return d&&delete s[f],d},isSet:f=>oe(s,f)}},k4=["design","readonly"],Uk=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(a){console.error(`problem while activating editor mode ${s}:`,a);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&l4(e,r.editorReadOnly),t.set(s),LD(e,s)},_4=(e,t,n,s)=>{if(s!==n.get()){if(!oe(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?Uk(e,n,t,s):e.on("init",()=>Uk(e,n,t,s))}},x4=(e,t,n)=>{if(ke(k4,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}}}},N4=e=>{const t=et("design"),n=et({design:{activate:le,deactivate:le,editorReadOnly:!1},readonly:{activate:le,deactivate:le,editorReadOnly:!0}});return u4(e),h4(e),{isReadOnly:()=>mo(e),set:s=>_4(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(x4(n.get(),s,o))}}},zm=L.each,Hm=L.explode,A4={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},zk=L.makeMap("alt,ctrl,shift,meta,access"),T4=e=>e in zk,R4=e=>{const t={},n=be.os.isMacOS()||be.os.isiOS();zm(Hm(e.toLowerCase(),"+"),r=>{T4(r)?t[r]=!0:/^[0-9]{2,}$/.test(r)?t.keyCode=parseInt(r,10):(t.charCode=r.charCodeAt(0),t.keyCode=A4[r]||r.toUpperCase().charCodeAt(0))});const s=[t.keyCode];let o;for(o in zk)t[o]?s.push(o):t[o]=!1;return t.id=s.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class Hk{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(zm(n.shortcuts,o=>{n.matchShortcut(s,o)&&(n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o))}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,a=r.normalizeCommandFunc(s);return zm(Hm(L.trim(t)),i=>{const c=r.createShortcut(i,n,a,o);r.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:L.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=L.map(Hm(t,">"),R4);return r[r.length-1]=L.extend(r[r.length-1],{func:s,scope:o||this.editor}),L.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const P4=()=>{const e={},t={},n={},s={},o={},r={},a={},i={},c=(u,f)=>(d,p)=>{u[d.toLowerCase()]={...p,type:f}},l=(u,f)=>s[u.toLowerCase()]=f;return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(t,"menuitem"),addNestedMenuItem:c(t,"nestedmenuitem"),addToggleMenuItem:c(t,"togglemenuitem"),addAutocompleter:c(n,"autocompleter"),addContextMenu:c(o,"contextmenu"),addContextToolbar:c(r,"contexttoolbar"),addContextForm:c(r,"contextform"),addSidebar:c(a,"sidebar"),addView:c(i,"views"),addIcon:l,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:a,views:i})}},D4=()=>{const e=P4();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},po=Ne.DOM,Wk=L.extend,O4=L.each;class sl{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,Wk(this,$k);const o=this;this.id=t,this.hidden=!1;const r=m5(s.defaultOptions,n);this.options=w4(o,r),YT(o);const a=this.options.get;a("deprecation_warnings")&&vU(n,r);const i=a("suffix");i&&(s.suffix=i),this.suffix=s.suffix;const c=a("base_url");c&&s._setBaseUrl(c),this.baseUri=s.baseURI;const l=_u(o);l&&(Zn.ScriptLoader._setReferrerPolicy(l),Ne.DOM.styleSheetLoader._setReferrerPolicy(l));const u=Bh(o);M(u)&&Ne.DOM.styleSheetLoader._setContentCssCors(u),vt.languageLoad=a("language_load"),vt.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new un(wh(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Nu(o),this.hasVisual=FR(o),this.shortcuts=new Hk(this),this.editorCommands=new Ok(this),n4(this);const f=a("cache_suffix");f&&(be.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:D4(),styleSheetLoader:void 0,show:le,hide:le,setEnabled:le,isEnabled:He},this.mode=N4(o),s.dispatch("SetupEditor",{editor:this});const d=zR(o);Se(d)&&d.call(o,o)}render(){Q6(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return no(this)}translate(t){return bn.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(M(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:He,default:n})),!o.isSet(t)&&!ct(n)?n:o.get(t)}hasPlugin(t,n){return ke(Bi(this),t)?n?Yo.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(po.show(t.getContainer()),po.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(po.hide(t.getContainer()),po.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const o={...t,load:!0},r=Ml(s)?s.value:s.innerHTML,a=n.setContent(r,o);return o.no_events||n.dispatch("LoadContent",{...o,element:s}),a}else return""}save(t={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const o={...t,save:!0,element:s};let r=n.getContent(o);const a={...o,content:r};if(a.no_events||n.dispatch("SaveContent",a),a.format==="raw"&&n.dispatch("RawSaveContent",a),r=a.content,Ml(s))s.value=r;else{(t.is_removing||!n.inline)&&(s.innerHTML=r);const i=po.getParent(n.id,"form");i&&O4(i.elements,c=>c.name===n.id?(c.value=r,!1):!0)}return a.element=o.element=s=null,a.set_dirty!==!1&&n.setDirty(!1),r}setContent(t,n){return wd(this,t,n)}getContent(t){return iU(this,t)}insertContent(t,n){n&&(t=Wk({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?wd(this,this.startContent,{format:"raw"}):wd(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||po.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=po.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const s=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:s==null?void 0:s.body)!==null&&n!==void 0?n:null}convertURL(t,n,s){const o=this,r=o.options.get,a=WR(o);if(Se(a))return a.call(o,t,s,!0,n);if(!r("convert_urls")||s==="link"||yt(s)&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const i=new un(t);return i.protocol!=="http"&&i.protocol!=="https"&&i.protocol!==""?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){g5(this,t)}setEditableRoot(t){J6(this,t)}hasEditableRoot(){return e5(this)}remove(){kU(this)}destroy(t){_U(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const sr=Ne.DOM,ol=L.each;let Vk=!1,rl,At=[];const al=e=>{const t=e.type;ol(Es.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},jk=e=>{if(e!==Vk){const t=Ne.DOM;e?(t.bind(window,"resize",al),t.bind(window,"scroll",al)):(t.unbind(window,"resize",al),t.unbind(window,"scroll",al)),Vk=e}},qk=e=>{const t=At;return At=se(At,n=>e!==n),Es.activeEditor===e&&(Es.activeEditor=At.length>0?At[0]:null),Es.focusedEditor===e&&(Es.focusedEditor=null),t.length!==At.length},B4=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(qk(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},I4=document.compatMode!=="CSS1Compat",Es={...Mm,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.6",releaseDate:"TBD",i18n:bn,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",s=un.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const r=document.getElementsByTagName("script");for(let a=0;a<r.length;a++){const i=r[a].src||"";if(i==="")continue;const c=i.substring(i.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(i)){c.indexOf(".min")!==-1&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"));break}}if(!t&&document.currentScript){const a=document.currentScript.src;a.indexOf(".min")!==-1&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"))}}e.baseURL=new un(s).toAbsolute(t),e.documentBaseURL=s,e.baseURI=new un(e.baseURL),e.suffix=n,fO(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&Ae(s,(o,r)=>{vt.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=L.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(u,f)=>u.inline&&f.tagName.toLowerCase()in s,r=u=>{let f=u.id;return f||(f=Re(u,"name").filter(d=>!sr.get(d)).getOrThunk(sr.uniqueId),u.setAttribute("id",f)),f},a=u=>{const f=e[u];if(f)return f.apply(t,[])},i=u=>be.browser.isIE()||be.browser.isEdge()?(yc("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):I4?(yc("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):J(u.selector)?sr.select(u.selector):M(u.target)?[u.target]:[];let c=u=>{n=u};const l=()=>{let u=0;const f=[];let d;const p=(h,g,b)=>{const y=new sl(h,g,t);f.push(y),y.on("init",()=>{++u===d.length&&c(f)}),y.targetElm=y.targetElm||b,y.render()};sr.unbind(window,"ready",l),a("onpageload"),d=y_(i(e)),L.each(d,h=>{B4(t.get(h.id))}),d=L.grep(d,h=>!t.get(h.id)),d.length===0?c([]):ol(d,h=>{o(e,h)?yc("Could not initialize inline editor on invalid inline target element",h):p(r(h),e,h)})};return sr.bind(window,"ready",l),new Promise(u=>{n?u(n):c=f=>{u(f)}})},get(e){return arguments.length===0?At.slice(0):J(e)?Ye(At,t=>t.id===e).getOr(null):mn(e)&&At[e]?At[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&At.push(e),jk(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),rl||(rl=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",rl))),e},createEditor(e,t){return this.add(new sl(e,t,this))},remove(e){const t=this;let n;if(!e){for(let s=At.length-1;s>=0;s--)t.remove(At[s]);return}if(J(e)){ol(sr.select(e),s=>{n=t.get(s.id),n&&t.remove(n)});return}return n=e,kt(t.get(n.id))?null:(qk(n)&&t.dispatch("RemoveEditor",{editor:n}),At.length===0&&window.removeEventListener("beforeunload",rl),n.remove(),jk(At.length>0),n)},execCommand(e,t,n){var s;const o=this,r=yt(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const a=n.options;new sl(r,a,o).render()}return!0}case"mceRemoveEditor":{const a=o.get(r);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(r);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{ol(At,e=>{e.save()})},addI18n:(e,t)=>{bn.add(e,t)},translate:e=>bn.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new un(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new un(this.baseURL)}};Es.setup();const L4=(()=>{const e=us(),t=r=>({items:r,types:Dt(r),getType:a=>Re(r,a).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),Kk=Math.min,or=Math.max,il=Math.round,Gk=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,a=e.h,i=t.w,c=t.h,l=(n||"").split("");return l[0]==="b"&&(o+=c),l[1]==="r"&&(s+=i),l[0]==="c"&&(o+=il(c/2)),l[1]==="c"&&(s+=il(i/2)),l[3]==="b"&&(o-=a),l[4]==="r"&&(s-=r),l[3]==="c"&&(o-=il(a/2)),l[4]==="c"&&(s-=il(r/2)),rr(s,o,r,a)},$4=(e,t,n,s)=>{for(let o=0;o<s.length;o++){const r=Gk(e,t,s[o]);if(r.x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return s[o]}return null},F4=(e,t,n)=>rr(e.x-t,e.y-n,e.w+t*2,e.h+n*2),M4=(e,t)=>{const n=or(e.x,t.x),s=or(e.y,t.y),o=Kk(e.x+e.w,t.x+t.w),r=Kk(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:rr(n,s,o-n,r-s)},U4=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,a=e.y+e.h;const i=t.x+t.w,c=t.y+t.h,l=or(0,t.x-s),u=or(0,t.y-o),f=or(0,r-i),d=or(0,a-c);return s+=l,o+=u,n&&(r+=l,a+=u,s-=f,o-=d),r-=f,a-=d,rr(s,o,r-s,a-o)},rr=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),z4={inflate:F4,relativePosition:Gk,findBestRelativePosition:$4,intersect:M4,clamp:U4,create:rr,fromClientRect:e=>rr(e.left,e.top,e.width,e.height)},H4=(e,t,n=1e3)=>{let s=!1,o=null;const r=l=>(...u)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),l.apply(null,u))},a=r(e),i=r(t);return{start:(...l)=>{!s&&o===null&&(o=setTimeout(()=>i.apply(null,l),n))},resolve:a,reject:i}},W4=(()=>{const e={},t={},n={};return{load:(c,l)=>{const u=`Script at URL "${l}" failed to load`,f=`Script at URL "${l}" did not call \`tinymce.Resource.add('${c}', data)\` within 1 second`;if(e[c]!==void 0)return e[c];{const d=new Promise((p,h)=>{const g=H4(p,h);t[c]=g.resolve,Zn.ScriptLoader.loadScript(l).then(()=>g.start(f),()=>g.reject(u))});return e[c]=d,d}},add:(c,l)=>{t[c]!==void 0&&(t[c](l),delete t[c]),e[c]=Promise.resolve(l),n[c]=l},has:c=>c in n,get:c=>n[c],unload:c=>{delete e[c]}}})(),V4=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let Wa;try{const e="__storage_test__";Wa=window.localStorage,Wa.setItem(e,e),Wa.removeItem(e)}catch{Wa=V4()}var j4=Wa;const q4={geom:{Rect:z4},util:{Delay:Zt,Tools:L,VK:H,URI:un,EventDispatcher:Fm,Observable:Mm,I18n:bn,LocalStorage:j4,ImageUploader:sz},dom:{EventUtils:Vs,TreeWalker:Xe,TextSeeker:Ks,DOMUtils:Ne,ScriptLoader:Zn,RangeUtils:to,Serializer:dE,StyleSheetLoader:Cp,ControlSelection:Mb,BookmarkManager:ia,Selection:fE,Event:Vs.Event},html:{Styles:cu,Entities:Ws,Node:Et,Schema:ls,DomParser:Ko,Writer:TC,Serializer:ps},Env:be,AddOnManager:vt,Annotator:Rb,Formatter:NE,UndoManager:TE,EditorCommands:Ok,WindowManager:yE,NotificationManager:CE,EditorObservable:$k,Shortcuts:Hk,Editor:sl,FocusManager:cC,EditorManager:Es,DOM:Ne.DOM,ScriptLoader:Zn.ScriptLoader,PluginManager:Yo,ThemeManager:co,ModelManager:Go,IconManager:bc,Resource:W4,FakeClipboard:L4,trim:L.trim,isArray:L.isArray,is:L.is,toArray:L.toArray,makeMap:L.makeMap,each:L.each,map:L.map,grep:L.grep,inArray:L.inArray,extend:L.extend,walk:L.walk,resolve:L.resolve,explode:L.explode,_addCacheSuffix:L._addCacheSuffix},Yk=L.extend(Es,q4),K4=e=>{try{i_.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(Yk),K4(Yk)})()})(a_);var Z4=a_.exports;const Q4=X4(Z4),z9=Object.freeze(Object.defineProperty({__proto__:null,default:Q4},Symbol.toStringTag,{value:"Module"}));export{z9 as t};
