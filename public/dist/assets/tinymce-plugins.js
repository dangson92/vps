function ma(Po,Lo){for(var So=0;So<Lo.length;So++){const zn=Lo[So];if(typeof zn!="string"&&!Array.isArray(zn)){for(const Rn in zn)if(Rn!=="default"&&!(Rn in Po)){const io=Object.getOwnPropertyDescriptor(zn,Rn);io&&Object.defineProperty(Po,Rn,io.get?io:{enumerable:!0,get:()=>zn[Rn]})}}}return Object.freeze(Object.defineProperty(Po,Symbol.toStringTag,{value:"Module"}))}var aM={};tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});const pq=ma({__proto__:null,default:aM},[aM]);var lM={};(function(){const Po=Object.getPrototypeOf,Lo=(e,t,n)=>{var o;return n(e,t.prototype)?!0:((o=e.constructor)===null||o===void 0?void 0:o.name)===t.name},So=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Lo(e,String,(n,o)=>o.isPrototypeOf(n))?"string":t},zn=e=>t=>So(t)===e,Rn=e=>t=>typeof t===e,io=e=>t=>e===t,sn=(e,t)=>$t(e)&&Lo(e,t,(n,o)=>Po(n)===o),ye=zn("string"),$t=zn("object"),An=e=>sn(e,Object),Pn=zn("array"),Zn=io(null),pt=Rn("boolean"),Vt=io(void 0),yn=e=>e==null,rn=e=>!yn(e),Re=Rn("function"),jt=Rn("number"),tt=(e,t)=>{if(Pn(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},se=()=>{},ze=e=>()=>e(),mo=(e,t)=>(...n)=>e(t.apply(null,n)),Ke=(e,t)=>n=>e(t(n)),$=e=>()=>e,We=e=>e,Ft=(e,t)=>e===t;function on(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const mt=e=>t=>!e(t),Y=e=>()=>{throw new Error(e)},Jn=e=>e(),Te=$(!1),gt=$(!0);class v{constructor(t,n){this.tag=t,this.value=n}static some(t){return new v(!0,t)}static none(){return v.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?v.some(t(this.value)):v.none()}bind(t){return this.tag?t(this.value):v.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:v.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return rn(t)?v.some(t):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);const Gt=Array.prototype.slice,Un=Array.prototype.indexOf,To=Array.prototype.push,st=(e,t)=>Un.call(e,t),kt=(e,t)=>{const n=st(e,t);return n===-1?v.none():v.some(n)},Sn=(e,t)=>st(e,t)>-1,Kn=(e,t)=>{for(let n=0,o=e.length;n<o;n++){const r=e[n];if(t(r,n))return!0}return!1},Yt=(e,t)=>{const n=[];for(let o=0;o<e;o++)n.push(t(o));return n},Mo=(e,t)=>{const n=[];for(let o=0;o<e.length;o+=t){const r=Gt.call(e,o,o+t);n.push(r)}return n},Ae=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const a=e[r];o[r]=t(a,r)}return o},Ve=(e,t)=>{for(let n=0,o=e.length;n<o;n++){const r=e[n];t(r,n)}},Ln=(e,t)=>{for(let n=e.length-1;n>=0;n--){const o=e[n];t(o,n)}},Wo=(e,t)=>{const n=[],o=[];for(let r=0,a=e.length;r<a;r++){const i=e[r];(t(i,r)?n:o).push(i)}return{pass:n,fail:o}},Xt=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const a=e[o];t(a,o)&&n.push(a)}return n},gn=(e,t,n)=>(Ln(e,(o,r)=>{n=t(n,o,r)}),n),En=(e,t,n)=>(Ve(e,(o,r)=>{n=t(n,o,r)}),n),Vs=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(t(a,o))return v.some(a);if(n(a,o))break}return v.none()},Q=(e,t)=>Vs(e,t,Te),ne=(e,t)=>{for(let n=0,o=e.length;n<o;n++){const r=e[n];if(t(r,n))return v.some(n)}return v.none()},ie=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!Pn(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);To.apply(t,e[n])}return t},Me=(e,t)=>ie(Ae(e,t)),Pe=(e,t)=>{for(let n=0,o=e.length;n<o;++n){const r=e[n];if(t(r,n)!==!0)return!1}return!0},un=e=>{const t=Gt.call(e,0);return t.reverse(),t},Wn=(e,t)=>Xt(e,n=>!Sn(t,n)),Fe=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const a=e[o];n[String(a)]=t(a,o)}return n},Ee=e=>[e],bt=(e,t)=>{const n=Gt.call(e,0);return n.sort(t),n},Mt=(e,t)=>t>=0&&t<e.length?v.some(e[t]):v.none(),Bt=e=>Mt(e,0),Bn=e=>Mt(e,e.length-1),ko=Re(Array.from)?Array.from:e=>Gt.call(e),xn=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return v.none()},cn=Object.keys,ro=Object.hasOwnProperty,en=(e,t)=>{const n=cn(e);for(let o=0,r=n.length;o<r;o++){const a=n[o],i=e[a];t(i,a)}},an=(e,t)=>_n(e,(n,o)=>({k:o,v:t(n,o)})),_n=(e,t)=>{const n={};return en(e,(o,r)=>{const a=t(o,r);n[a.k]=a.v}),n},hn=e=>(t,n)=>{e[n]=t},po=(e,t,n,o)=>{en(e,(r,a)=>{(t(r,a)?n:o)(r,a)})},zs=(e,t)=>{const n={},o={};return po(e,t,hn(n),hn(o)),{t:n,f:o}},ws=(e,t)=>{const n={};return po(e,t,hn(n),se),n},hs=(e,t)=>{const n=[];return en(e,(o,r)=>{n.push(t(o,r))}),n},ns=(e,t)=>{const n=cn(e);for(let o=0,r=n.length;o<r;o++){const a=n[o],i=e[a];if(t(i,a,e))return v.some(i)}return v.none()},Do=e=>hs(e,We),Xe=(e,t)=>Cn(e,t)?v.from(e[t]):v.none(),Cn=(e,t)=>ro.call(e,t),Ko=(e,t)=>Cn(e,t)&&e[t]!==void 0&&e[t]!==null,Ds=(e,t,n=Ft)=>e.exists(o=>n(o,t)),ps=(e,t,n=Ft)=>Zs(e,t,n).getOr(e.isNone()&&t.isNone()),is=e=>{const t=[],n=o=>{t.push(o)};for(let o=0;o<e.length;o++)e[o].each(n);return t},co=e=>{const t=[];for(let n=0;n<e.length;n++){const o=e[n];if(o.isSome())t.push(o.getOrDie());else return v.none()}return v.some(t)},Zs=(e,t,n)=>e.isSome()&&t.isSome()?v.some(n(e.getOrDie(),t.getOrDie())):v.none(),Ss=(e,t,n,o)=>e.isSome()&&t.isSome()&&n.isSome()?v.some(o(e.getOrDie(),t.getOrDie(),n.getOrDie())):v.none(),dc=(e,t)=>e!=null?v.some(t(e)):v.none(),$s=(e,t)=>e?v.some(t):v.none(),os=(e,t)=>e+t,xs=(e,t)=>e.substring(t),ar=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,Ir=(e,t)=>xo(e,t)?xs(e,t.length):e,No=(e,t)=>Us(e,t)?e:os(e,t),fo=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return r!==-1?Vt(o)?!0:r+t.length<=o:!1},xo=(e,t)=>ar(e,t,0),Us=(e,t)=>ar(e,t,e.length-t.length),Vo=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),z=e=>e.length>0,N=e=>!z(e),de=e=>e.style!==void 0&&Re(e.style.getPropertyValue),pe=(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,e),new Error(r)}return zt(o.childNodes[0])},rt=(e,t)=>{const o=(t||document).createElement(e);return zt(o)},ht=(e,t)=>{const o=(t||document).createTextNode(e);return zt(o)},zt=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},q={fromHtml:pe,fromTag:rt,fromText:ht,fromDom:zt,fromPoint:(e,t,n)=>v.from(e.dom.elementFromPoint(t,n)).map(zt)},It=typeof window<"u"?window:Function("return this;")(),V=(e,t)=>{let n=t??It;for(let o=0;o<e.length&&n!==void 0&&n!==null;++o)n=n[e[o]];return n},j=(e,t)=>{const n=e.split(".");return V(n,t)},we=(e,t)=>j(e,t),Oe=(e,t)=>{const n=we(e,t);if(n==null)throw new Error(e+" not available on this browser");return n},je=Object.getPrototypeOf,it=e=>Oe("HTMLElement",e),nt=e=>{const t=j("ownerDocument.defaultView",e);return $t(e)&&(it(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(je(e).constructor.name))},ot=9,Ot=11,Jt=1,vn=3,lo=e=>e.dom.nodeName.toLowerCase(),Cr=e=>e.dom.nodeType,lr=e=>t=>Cr(t)===e,Tr=e=>qt(e)&&nt(e.dom),qt=lr(Jt),pn=lr(vn),In=lr(ot),Xs=lr(Ot),us=e=>t=>qt(t)&&lo(t)===e,fs=(e,t)=>{const n=e.dom;if(n.nodeType!==Jt)return!1;{const o=n;if(o.matches!==void 0)return o.matches(t);if(o.msMatchesSelector!==void 0)return o.msMatchesSelector(t);if(o.webkitMatchesSelector!==void 0)return o.webkitMatchesSelector(t);if(o.mozMatchesSelector!==void 0)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},uo=e=>e.nodeType!==Jt&&e.nodeType!==ot&&e.nodeType!==Ot||e.childElementCount===0,Ws=(e,t)=>{const n=t===void 0?document:t.dom;return uo(n)?[]:Ae(n.querySelectorAll(e),q.fromDom)},Kc=(e,t)=>{const n=t===void 0?document:t.dom;return uo(n)?v.none():v.from(n.querySelector(e)).map(q.fromDom)},Qn=(e,t)=>e.dom===t.dom,bs=(e,t)=>{const n=e.dom,o=t.dom;return n===o?!1:n.contains(o)},js=e=>q.fromDom(e.dom.ownerDocument),Qo=e=>In(e)?e:js(e),yr=e=>q.fromDom(Qo(e).dom.documentElement),Hr=e=>q.fromDom(Qo(e).dom.defaultView),Fs=e=>v.from(e.dom.parentNode).map(q.fromDom),Pr=e=>Fs(e),Lr=e=>v.from(e.dom.parentElement).map(q.fromDom),Ba=(e,t)=>{const n=Re(t)?t:Te;let o=e.dom;const r=[];for(;o.parentNode!==null&&o.parentNode!==void 0;){const a=o.parentNode,i=q.fromDom(a);if(r.push(i),n(i)===!0)break;o=a}return r},kr=e=>v.from(e.dom.offsetParent).map(q.fromDom),Yc=e=>v.from(e.dom.nextSibling).map(q.fromDom),Js=e=>Ae(e.dom.childNodes,q.fromDom),mc=(e,t)=>{const n=e.dom.childNodes;return v.from(n[t]).map(q.fromDom)},Sc=e=>mc(e,0),Xc=(e,t)=>({element:e,offset:t}),rl=(e,t)=>{const n=Js(e);return n.length>0&&t<n.length?Xc(n[t],0):Xc(e,t)},D=e=>Xs(e)&&rn(e.dom.host),U=Re(Element.prototype.attachShadow)&&Re(Node.prototype.getRootNode),ee=$(U),le=U?e=>q.fromDom(e.dom.getRootNode()):Qo,De=e=>D(e)?e:q.fromDom(Qo(e).dom.body),vt=e=>eo(e).isSome(),eo=e=>{const t=le(e);return D(t)?v.some(t):v.none()},jo=e=>q.fromDom(e.dom.host),Yn=e=>{if(ee()&&rn(e.target)){const t=q.fromDom(e.target);if(qt(t)&&Eo(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Bt(n)}}return v.from(e.target)},Eo=e=>rn(e.dom.shadowRoot),Xn=e=>{const t=pn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return eo(q.fromDom(t)).fold(()=>n.body.contains(t),Ke(Xn,jo))},Cs=()=>Nr(q.fromDom(document)),Nr=e=>{const t=e.dom.body;if(t==null)throw new Error("Body is not available yet");return q.fromDom(t)},Bc=(e,t,n)=>{if(ye(n)||pt(n)||jt(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},Pt=(e,t,n)=>{Bc(e.dom,t,n)},ga=(e,t)=>{const n=e.dom;en(t,(o,r)=>{Bc(n,r,o)})},$o=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},C=(e,t)=>v.from($o(e,t)),F=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},P=(e,t)=>{e.dom.removeAttribute(t)},ue=e=>En(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),Ze=(e,t,n)=>{if(!ye(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);de(e)&&e.style.setProperty(t,n)},tn=(e,t)=>{de(e)&&e.style.removeProperty(t)},Je=(e,t,n)=>{const o=e.dom;Ze(o,t,n)},Co=(e,t)=>{const n=e.dom;en(t,(o,r)=>{Ze(n,r,o)})},Er=(e,t)=>{const n=e.dom;en(t,(o,r)=>{o.fold(()=>{tn(n,r)},a=>{Ze(n,r,a)})})},Fo=(e,t)=>{const n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return r===""&&!Xn(e)?ir(n,t):r},ir=(e,t)=>de(e)?e.style.getPropertyValue(t):"",bo=(e,t)=>{const n=e.dom,o=ir(n,t);return v.from(o).filter(r=>r.length>0)},ha=e=>{const t={},n=e.dom;if(de(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);t[r]=n.style[r]}return t},Yr=(e,t,n)=>{const o=q.fromTag(e);return Je(o,t,n),bo(o,t).isSome()},Nn=(e,t)=>{const n=e.dom;tn(n,t),Ds(C(e,"style").map(Vo),"")&&P(e,"style")},Qs=e=>e.dom.offsetWidth,Oo=(e,t)=>{const n=(d,g)=>{if(!jt(g)&&!g.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+g);const b=d.dom;de(b)&&(b.style[e]=g+"px")},o=d=>{const g=t(d);if(g<=0||g===null){const b=Fo(d,e);return parseFloat(b)||0}return g},r=o,a=(d,g)=>En(g,(b,w)=>{const x=Fo(d,w),k=x===void 0?0:parseInt(x,10);return isNaN(k)?b:b+k},0);return{set:n,get:o,getOuter:r,aggregate:a,max:(d,g,b)=>{const w=a(d,b);return g>w?g-w:0}}},Ic=Oo("height",e=>{const t=e.dom;return Xn(e)?t.getBoundingClientRect().height:t.offsetHeight}),Ro=e=>Ic.get(e),Ia=e=>Ic.getOuter(e),ci=(e,t)=>{const n=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],o=Ic.max(e,t,n);Je(e,"max-height",o+"px")},Ai=(e,t)=>({left:e,top:t,translate:(o,r)=>Ai(e+o,t+r)}),Gn=Ai,gc=e=>{const t=e.getBoundingClientRect();return Gn(t.left,t.top)},Hc=(e,t)=>e!==void 0?e:t!==void 0?t:0,Or=e=>{const t=e.dom.ownerDocument,n=t.body,o=t.defaultView,r=t.documentElement;if(n===e.dom)return Gn(n.offsetLeft,n.offsetTop);const a=Hc(o==null?void 0:o.pageYOffset,r.scrollTop),i=Hc(o==null?void 0:o.pageXOffset,r.scrollLeft),d=Hc(r.clientTop,n.clientTop),g=Hc(r.clientLeft,n.clientLeft);return xc(e).translate(i-g,a-d)},xc=e=>{const t=e.dom,o=t.ownerDocument.body;return o===t?Gn(o.offsetLeft,o.offsetTop):Xn(e)?gc(t):Gn(0,0)},Tl=Oo("width",e=>e.dom.offsetWidth),kl=(e,t)=>Tl.set(e,t),M=e=>Tl.get(e),H=e=>Tl.getOuter(e),ae=(e,t)=>{const n=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],o=Tl.max(e,t,n);Je(e,"max-width",o+"px")},ge=e=>{let t=!1,n;return(...o)=>(t||(t=!0,n=e.apply(null,o)),n)},ut=(e,t,n,o)=>{const r=e.isiOS()&&/ipad/i.test(n)===!0,a=e.isiOS()&&!r,i=e.isiOS()||e.isAndroid(),d=i||o("(pointer:coarse)"),g=r||!a&&i&&o("(min-device-width:768px)"),b=a||i&&!g,w=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,x=!b&&!g&&!w;return{isiPad:$(r),isiPhone:$(a),isTablet:$(g),isPhone:$(b),isTouch:$(d),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:$(w),isDesktop:$(x)}},dn=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n];if(o.test(t))return o}},Yo=(e,t)=>{const n=dn(e,t);if(!n)return{major:0,minor:0};const o=r=>Number(t.replace(n,"$"+r));return wr(o(1),o(2))},er=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?Xo():Yo(e,n)},Xo=()=>wr(0,0),wr=(e,t)=>({major:e,minor:t}),vs={nu:wr,detect:er,unknown:Xo},Gs=(e,t)=>xn(t.brands,n=>{const o=n.brand.toLowerCase();return Q(e,r=>{var a;return o===((a=r.brand)===null||a===void 0?void 0:a.toLowerCase())}).map(r=>({current:r.name,version:vs.nu(parseInt(n.version,10),0)}))}),Pc=(e,t)=>{const n=String(t).toLowerCase();return Q(e,o=>o.search(n))},pa=(e,t)=>Pc(e,t).map(n=>{const o=vs.detect(n.versionRegexes,t);return{current:n.name,version:o}}),Ls=(e,t)=>Pc(e,t).map(n=>{const o=vs.detect(n.versionRegexes,t);return{current:n.name,version:o}}),Lc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ss=e=>t=>fo(t,e),Vr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>fo(e,"edge/")&&fo(e,"chrome")&&fo(e,"safari")&&fo(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Lc],search:e=>fo(e,"chrome")&&!fo(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>fo(e,"msie")||fo(e,"trident")},{name:"Opera",versionRegexes:[Lc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ss("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ss("firefox")},{name:"Safari",versionRegexes:[Lc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(fo(e,"safari")||fo(e,"mobile/"))&&fo(e,"applewebkit")}],Jc=[{name:"Windows",search:ss("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>fo(e,"iphone")||fo(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ss("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ss("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ss("linux"),versionRegexes:[]},{name:"Solaris",search:ss("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ss("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ss("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],_i={browsers:$(Vr),oses:$(Jc)},Mi="Edge",Nc="Chromium",uu="IE",Xr="Opera",fa="Firefox",Di="Safari",du=()=>$i({current:void 0,version:vs.unknown()}),$i=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isEdge:o(Mi),isChromium:o(Nc),isIE:o(uu),isOpera:o(Xr),isFirefox:o(fa),isSafari:o(Di)}},El={unknown:du,nu:$i},gd="Windows",Ol="iOS",hd="Android",pd="Linux",fd="macOS",bd="Solaris",vd="FreeBSD",mu="ChromeOS",cl=()=>gu({current:void 0,version:vs.unknown()}),gu=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isWindows:o(gd),isiOS:o(Ol),isAndroid:o(hd),isMacOS:o(fd),isLinux:o(pd),isSolaris:o(bd),isFreeBSD:o(vd),isChromeOS:o(mu)}},ai={unknown:cl,nu:gu},km={detect:(e,t,n)=>{const o=_i.browsers(),r=_i.oses(),a=t.bind(g=>Gs(o,g)).orThunk(()=>pa(o,e)).fold(El.unknown,El.nu),i=Ls(r,e).fold(ai.unknown,ai.nu),d=ut(i,a,e,n);return{browser:a,os:i,deviceType:d}}},al=e=>window.matchMedia(e).matches;let Qc=ge(()=>km.detect(navigator.userAgent,v.from(navigator.userAgentData),al));const ba=()=>Qc(),li=(e,t,n,o,r,a,i)=>({target:e,x:t,y:n,stop:o,prevent:r,kill:a,raw:i}),Ha=e=>{const t=q.fromDom(Yn(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),r=mo(o,n);return li(t,e.clientX,e.clientY,n,o,r,e)},ll=(e,t)=>n=>{e(n)&&t(Ha(n))},il=(e,t,n,o,r)=>{const a=ll(n,o);return e.dom.addEventListener(t,a,r),{unbind:on(Om,e,t,a,r)}},ul=(e,t,n,o)=>il(e,t,n,o,!1),Em=(e,t,n,o)=>il(e,t,n,o,!0),Om=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},Al=(e,t)=>{Fs(e).each(o=>{o.dom.insertBefore(t.dom,e.dom)})},_l=(e,t)=>{Yc(e).fold(()=>{Fs(e).each(r=>{Ar(r,t)})},o=>{Al(o,t)})},yd=(e,t)=>{Sc(e).fold(()=>{Ar(e,t)},o=>{e.dom.insertBefore(t.dom,o.dom)})},Ar=(e,t)=>{e.dom.appendChild(t.dom)},pu=(e,t,n)=>{mc(e,n).fold(()=>{Ar(e,t)},o=>{Al(o,t)})},wd=(e,t)=>{Ve(t,n=>{Ar(e,n)})},fu=e=>{e.dom.textContent="",Ve(Js(e),t=>{va(t)})},va=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Jr=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return Gn(n,o)},Sd=(e,t,n)=>{const r=(n!==void 0?n.dom:document).defaultView;r&&r.scrollTo(e,t)},Am=e=>{const t=e===void 0?window:e;return ba().browser.isFirefox()?v.none():v.from(t.visualViewport)},xd=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),bu=e=>{const t=e===void 0?window:e,n=t.document,o=Jr(q.fromDom(n));return Am(t).fold(()=>{const r=t.document.documentElement,a=r.clientWidth,i=r.clientHeight;return xd(o.left,o.top,a,i)},r=>xd(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},Ml=()=>q.fromDom(document),vu=(e,t)=>e.view(t).fold($([]),o=>{const r=e.owner(o),a=vu(e,r);return[o].concat(a)}),Bg=(e,t)=>{const n=t.owner(e),o=vu(t,n);return v.some(o)};var _m=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?v.none():v.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(q.fromDom)},owner:e=>js(e)});const dl=e=>{const t=Ml(),n=Jr(t);return Bg(e,_m).fold(on(Or,e),r=>{const a=xc(e),i=gn(r,(d,g)=>{const b=xc(g);return{left:d.left+b.left,top:d.top+b.top}},{left:0,top:0});return Gn(i.left+a.left+n.left,i.top+a.top+n.top)})},wu=(e,t,n)=>({point:e,width:t,height:n}),Cd=(e,t,n,o)=>({x:e,y:t,width:n,height:o}),es=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),Rs=e=>{const t=Or(e),n=H(e),o=Ia(e);return es(t.left,t.top,n,o)},Pa=e=>{const t=dl(e),n=H(e),o=Ia(e);return es(t.left,t.top,n,o)},Fi=(e,t)=>{const n=Math.max(e.x,t.x),o=Math.max(e.y,t.y),r=Math.min(e.right,t.right),a=Math.min(e.bottom,t.bottom),i=r-n,d=a-o;return es(n,o,i,d)},Td=(e,t)=>En(t,(n,o)=>Fi(n,o),e),tr=()=>bu(window);var Dl=tinymce.util.Tools.resolve("tinymce.ThemeManager");const ea=e=>{const t=a=>a(e),n=$(e),o=()=>r,r={tag:!0,inner:e,fold:(a,i)=>i(e),isValue:gt,isError:Te,map:a=>mn.value(a(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:a=>{a(e)},toOptional:()=>v.some(e)};return r},$l=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(o,r)=>o(e),isValue:Te,isError:gt,map:t,mapError:o=>mn.error(o(e)),bind:t,exists:Te,forall:gt,getOr:We,or:We,getOrThunk:Jn,orThunk:Jn,getOrDie:Y(String(e)),each:se,toOptional:v.none};return n},mn={value:ea,error:$l,fromOption:(e,t)=>e.fold(()=>$l(t),ea)};var zr;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(zr||(zr={}));const Ri=(e,t,n)=>e.stype===zr.Error?t(e.serror):n(e.svalue),Fl=e=>{const t=[],n=[];return Ve(e,o=>{Ri(o,r=>n.push(r),r=>t.push(r))}),{values:t,errors:n}},Su=(e,t)=>e.stype===zr.Error?{stype:zr.Error,serror:t(e.serror)}:e,xu=(e,t)=>e.stype===zr.Value?{stype:zr.Value,svalue:t(e.svalue)}:e,_r=(e,t)=>e.stype===zr.Value?t(e.svalue):e,Qr=(e,t)=>e.stype===zr.Error?t(e.serror):e,hc=e=>({stype:zr.Value,svalue:e}),Bs=e=>({stype:zr.Error,serror:e}),ds={fromResult:e=>e.fold(Bs,hc),toResult:e=>Ri(e,mn.error,mn.value),svalue:hc,partition:Fl,serror:Bs,bind:_r,bindError:Qr,map:xu,mapError:Su,fold:Ri},La=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),ii=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Tu=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Mm=(e,t)=>t,Ed=(e,t)=>An(e)&&An(t)?vo(e,t):t,Bi=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const a in r)Cn(r,a)&&(n[a]=e(n[a],r[a]))}return n},vo=Bi(Ed),Na=Bi(Mm),Zr=()=>({tag:"required",process:{}}),ml=e=>({tag:"defaultedThunk",process:e}),Va=e=>ml($(e)),Bl=()=>({tag:"option",process:{}}),wn=e=>({tag:"mergeWithThunk",process:e}),Ii=e=>wn($(e)),Od=(e,t)=>e.length>0?ds.svalue(vo(t,Na.apply(void 0,e))):ds.svalue(t),ku=e=>mo(ds.serror,ie)(e),Dm={consolidateObj:(e,t)=>{const n=ds.partition(e);return n.errors.length>0?ku(n.errors):Od(n.values,t)},consolidateArr:e=>{const t=ds.partition(e);return t.errors.length>0?ku(t.errors):ds.svalue(t.values)}},Il=e=>$t(e)&&cn(e).length>100?" removed due to size":JSON.stringify(e,null,2),Ou=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:$("... (only showing first ten failures)")}]):e;return Ae(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},h=(e,t)=>ds.serror([{path:e,getErrorInfo:t}]),S=(e,t,n)=>h(e,()=>'Could not find valid *required* value for "'+t+'" in '+Il(n)),O=(e,t)=>h(e,()=>'Choice schema did not contain choice key: "'+t+'"'),L=(e,t,n)=>h(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+Il(t)),G=(e,t)=>h(e,()=>"There are unsupported fields: ["+t.join(", ")+"] specified"),$e=(e,t)=>h(e,$(t)),dt=e=>{const t=(o,r)=>ds.bindError(e(r),a=>$e(o,a)),n=$("val");return{extract:t,toString:n}},Zt=dt(ds.svalue),Nt=(e,t,n,o)=>Xe(t,n).fold(()=>S(e,n,t),o),Et=(e,t,n,o)=>{const r=Xe(e,t).getOrThunk(()=>n(e));return o(r)},ts=(e,t,n)=>n(Xe(e,t)),qs=(e,t,n,o)=>{const r=Xe(e,t).map(a=>a===!0?n(e):a);return o(r)},pc=(e,t,n,o,r)=>{const a=d=>r.extract(t.concat([o]),d),i=d=>d.fold(()=>ds.svalue(v.none()),g=>{const b=r.extract(t.concat([o]),g);return ds.map(b,v.some)});switch(e.tag){case"required":return Nt(t,n,o,a);case"defaultedThunk":return Et(n,o,e.process,a);case"option":return ts(n,o,i);case"defaultedOptionThunk":return qs(n,o,e.process,i);case"mergeWithThunk":return Et(n,o,$({}),d=>{const g=vo(e.process(n),d);return a(g)})}},za=(e,t,n)=>{const o={},r=[];for(const a of n)Tu(a,(i,d,g,b)=>{const w=pc(g,e,t,i,b);ds.fold(w,x=>{r.push(...x)},x=>{o[d]=x})},(i,d)=>{o[i]=d(t)});return r.length>0?ds.serror(r):ds.svalue(o)},$m=e=>({extract:(o,r)=>e().extract(o,r),toString:()=>e().toString()}),a0=e=>cn(ws(e,rn)),Vc=e=>{const t=xt(e),n=gn(e,(r,a)=>Tu(a,i=>vo(r,{[i]:!0}),$(r)),{});return{extract:(r,a)=>{const i=pt(a)?[]:a0(a),d=Xt(i,g=>!Ko(n,g));return d.length===0?t.extract(r,a):G(r,d)},toString:t.toString}},xt=e=>({extract:(o,r)=>za(o,r,e),toString:()=>`obj{
`+Ae(e,r=>Tu(r,(a,i,d,g)=>a+" -> "+g.toString(),(a,i)=>"state("+a+")")).join(`
`)+"}"}),Hl=e=>({extract:(o,r)=>{const a=Ae(r,(i,d)=>e.extract(o.concat(["["+d+"]"]),i));return Dm.consolidateArr(a)},toString:()=>"array("+e.toString()+")"}),Pl=(e,t)=>{const n=t!==void 0?t:We;return{extract:(a,i)=>{const d=[];for(const g of e){const b=g.extract(a,i);if(b.stype===zr.Value)return{stype:zr.Value,svalue:n(b.svalue)};d.push(b)}return Dm.consolidateArr(d)},toString:()=>"oneOf("+Ae(e,a=>a.toString()).join(", ")+")"}},Hg=(e,t)=>{const n=(a,i)=>Hl(dt(e)).extract(a,i);return{extract:(a,i)=>{const d=cn(i),g=n(a,d);return ds.bind(g,b=>{const w=Ae(b,x=>La(x,x,Zr(),t));return xt(w).extract(a,i)})},toString:()=>"setOf("+t.toString()+")"}},Ep=(e,t)=>{const n=ge(t);return{extract:(a,i)=>n().extract(a,i),toString:()=>n().toString()}},Hi=mo(Hl,xt),ec=$(Zt),_d=(e,t)=>dt(n=>{const o=typeof n;return e(n)?ds.svalue(n):ds.serror(`Expected type: ${t} but got: ${o}`)}),Md=_d(jt,"number"),nr=_d(ye,"string"),Au=_d(pt,"boolean"),Dd=_d(Re,"function"),Pg=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every(t=>Pg(e[t]));default:return!1}},Lg=dt(e=>Pg(e)?ds.svalue(e):ds.serror("Expected value to be acceptable for sending via postMessage")),Ng=(e,t,n,o)=>Xe(n,o).fold(()=>L(e,n,o),a=>a.extract(e.concat(["branch: "+o]),t)),ui=(e,t)=>({extract:(r,a)=>Xe(a,e).fold(()=>O(r,e),d=>Ng(r,a,t,d)),toString:()=>"chooseOn("+e+"). Possible values: "+cn(t)}),Vg=()=>Hl(Zt),Ll=e=>dt(t=>e(t).fold(ds.serror,ds.svalue)),zg=(e,t)=>Hg(n=>ds.fromResult(e(n)),t),Op=(e,t,n)=>{const o=t.extract([e],n);return ds.mapError(o,r=>({input:n,errors:r}))},as=(e,t,n)=>ds.toResult(Op(e,t,n)),ya=e=>e.fold(t=>{throw new Error(di(t))},We),tc=(e,t,n)=>ya(as(e,t,n)),di=e=>`Errors: 
`+Ou(e.errors).join(`
`)+`

Input object: `+Il(e.input),or=(e,t)=>ui(e,an(t,xt)),Zg=(e,t)=>Ep(e,t),ur=La,Mr=ii,$d=e=>Ll(t=>Sn(e,t)?mn.value(t):mn.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),Ce=e=>ur(e,e,Zr(),ec()),fc=(e,t)=>ur(e,e,Zr(),t),Ap=e=>fc(e,Md),Ts=e=>fc(e,nr),Za=(e,t)=>ur(e,e,Zr(),$d(t)),_p=e=>fc(e,Au),ta=e=>fc(e,Dd),Ug=(e,t)=>ur(e,e,Bl(),dt(n=>ds.serror("The field: "+e+" is forbidden. "+t))),Nl=(e,t)=>ur(e,e,Zr(),xt(t)),Wg=(e,t)=>ur(e,e,Zr(),Hi(t)),Cc=(e,t)=>ur(e,e,Zr(),Hl(t)),oo=e=>ur(e,e,Bl(),ec()),Ua=(e,t)=>ur(e,e,Bl(),t),mi=e=>Ua(e,Md),dr=e=>Ua(e,nr),Fm=(e,t)=>Ua(e,$d(t)),gi=e=>Ua(e,Dd),Rm=(e,t)=>Ua(e,Hl(t)),nc=(e,t)=>Ua(e,xt(t)),jg=(e,t)=>Ua(e,Vc(t)),oe=(e,t)=>ur(e,e,Va(t),ec()),oc=(e,t,n)=>ur(e,e,Va(t),n),gl=(e,t)=>oc(e,t,Md),wa=(e,t)=>oc(e,t,nr),Sa=(e,t,n)=>oc(e,t,$d(n)),mr=(e,t)=>oc(e,t,Au),Is=(e,t)=>oc(e,t,Dd),l0=(e,t)=>oc(e,t,Lg),na=(e,t,n)=>oc(e,t,Hl(n)),Bm=(e,t,n)=>oc(e,t,xt(n)),m=e=>{let t=e;return{get:()=>t,set:r=>{t=r}}},E={generate:e=>{if(!Pn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return Ve(e,(o,r)=>{const a=cn(o);if(a.length!==1)throw new Error("one and only one name per case");const i=a[0],d=o[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Pn(d))throw new Error("case arguments must be an array");t.push(i),n[i]=(...g)=>{const b=g.length;if(b!==d.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+d.length+" ("+d+"), got "+b);return{fold:(...x)=>{if(x.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+x.length);return x[r].apply(null,g)},match:x=>{const k=cn(x);if(t.length!==k.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+k.join(","));if(!Pe(t,B=>Sn(k,B)))throw new Error("Not all branches were specified when using match. Specified: "+k.join(", ")+`
Required: `+t.join(", "));return x[i].apply(null,g)},log:x=>{console.log(x,{constructors:t,constructor:i,params:g})}}}}),n}};E.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const R=e=>{const t=[],n=[];return Ve(e,o=>{o.fold(r=>{t.push(r)},r=>{n.push(r)})}),{errors:t,values:n}},X=(e,t)=>{const n={};return en(e,(o,r)=>{Sn(t,r)||(n[r]=o)}),n},fe=(e,t)=>({[e]:t}),Ie=e=>{const t={};return Ve(e,n=>{t[n.key]=n.value}),t},Qe=(e,t)=>X(e,t),At=(e,t)=>fe(e,t),Lt=e=>Ie(e),rs=(e,t)=>e.length===0?mn.value(t):mn.value(vo(t,Na.apply(void 0,e))),Bo=e=>mn.error(ie(e)),yo=(e,t)=>{const n=R(e);return n.errors.length>0?Bo(n.errors):rs(n.values,t)},bc=e=>Re(e)?e:Te,xa=(e,t,n)=>{let o=e.dom;const r=bc(n);for(;o.parentNode;){o=o.parentNode;const a=q.fromDom(o),i=t(a);if(i.isSome())return i;if(r(a))break}return v.none()},Ca=(e,t,n)=>{const o=t(e),r=bc(n);return o.orThunk(()=>r(e)?v.none():xa(e,t,r))},hl=(e,t)=>Qn(e.element,t.event.target),Fd={can:gt,abort:Te,run:se},Wa=e=>{if(!Ko(e,"can")&&!Ko(e,"abort")&&!Ko(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return{...Fd,...e}},_u=(e,t)=>(...n)=>En(e,(o,r)=>o&&t(r).apply(void 0,n),!0),Mu=(e,t)=>(...n)=>En(e,(o,r)=>o||t(r).apply(void 0,n),!1),Du=e=>Re(e)?{can:gt,abort:Te,run:e}:e,Pi=e=>{const t=_u(e,r=>r.can),n=Mu(e,r=>r.abort);return{can:t,abort:n,run:(...r)=>{Ve(e,a=>{a.run.apply(void 0,r)})}}},Hs=$,ja=Hs("touchstart"),$u=Hs("touchmove"),Mn=Hs("touchend"),cs=Hs("touchcancel"),ls=Hs("mousedown"),Dr=Hs("mousemove"),Rd=Hs("mouseout"),Im=Hs("mouseup"),oa=Hs("mouseover"),$r=Hs("focusin"),Mp=Hs("focusout"),Ga=Hs("keydown"),ay=Hs("keyup"),Fu=Hs("input"),Bd=Hs("change"),Li=Hs("click"),ly=Hs("transitioncancel"),Id=Hs("transitionend"),Dp=Hs("transitionstart"),i0=Hs("selectstart"),ks=e=>$("alloy."+e),$p={tap:ks("tap")},pl=ks("focus"),Ni=ks("blur.post"),Ru=ks("paste.post"),Bu=ks("receive"),zc=ks("execute"),Hm=ks("focus.item"),Pm=$p.tap,iy=ks("longpress"),Gg=ks("sandbox.close"),qg=ks("typeahead.cancel"),Vi=ks("system.init"),u0=ks("system.touchmove"),Kg=ks("system.touchend"),zi=ks("system.scroll"),Vl=ks("system.resize"),Ta=ks("system.attached"),Iu=ks("system.detached"),Zi=ks("system.dismissRequested"),d0=ks("system.repositionRequested"),Yg=ks("focusmanager.shifted"),Fp=ks("slotcontainer.visibility"),Xg=ks("system.external.element.scroll"),m0=ks("change.tab"),g0=ks("dismiss.tab"),Rp=ks("highlight"),Bp=ks("dehighlight"),to=(e,t)=>{Qg(e,e.element,t,{})},yt=(e,t,n)=>{Qg(e,e.element,t,n)},Hu=e=>{to(e,zc())},Jg=(e,t,n)=>{Qg(e,t,n,{})},Qg=(e,t,n,o)=>{const r={target:t,...o};e.getSystem().triggerEvent(n,t,r)},uy=(e,t,n,o)=>{const r={...o,target:t};e.getSystem().triggerEvent(n,t,r)},h0=(e,t,n,o)=>{e.getSystem().triggerEvent(n,t,o.event)},Io=e=>Lt(e),p0=(e,t)=>({key:e,value:Wa({abort:t})}),eh=(e,t)=>({key:e,value:Wa({can:t})}),f0=e=>({key:e,value:Wa({run:(t,n)=>{n.event.prevent()}})}),xe=(e,t)=>({key:e,value:Wa({run:t})}),Ip=(e,t,n)=>({key:e,value:Wa({run:(o,r)=>{t.apply(void 0,[o,r].concat(n))}})}),dy=e=>t=>xe(e,t),th=e=>t=>({key:e,value:Wa({run:(n,o)=>{hl(n,o)&&t(n,o)}})}),my=(e,t)=>xe(e,(n,o)=>{n.getSystem().getByUid(t).each(r=>{h0(r,r.element,e,o)})}),Hd=(e,t,n)=>{const o=t.partUids[n];return my(e,o)},Hp=(e,t)=>xe(e,(n,o)=>{const r=o.event,a=n.getSystem().getByDom(r.target).getOrThunk(()=>Ca(r.target,d=>n.getSystem().getByDom(d).toOptional(),Te).getOr(n));t(n,a,o)}),Pu=e=>xe(e,(t,n)=>{n.cut()}),gy=e=>xe(e,(t,n)=>{n.stop()}),Lu=(e,t)=>th(e)(t),Go=th(Ta()),zl=th(Iu()),Pp=th(Vi()),qa=dy(zc()),Lp=(e,t)=>{const o=(t||document).createElement("div");return o.innerHTML=e,Js(q.fromDom(o))},Np=e=>e.dom.innerHTML,Nu=(e,t)=>{const o=js(e).dom,r=q.fromDom(o.createDocumentFragment()),a=Lp(t,o);wd(r,a),fu(e),Ar(e,r)},hy=e=>{const t=q.fromTag("div"),n=q.fromDom(e.dom.cloneNode(!0));return Ar(t,n),Np(t)},b0=(e,t)=>q.fromDom(e.dom.cloneNode(t)),v0=e=>b0(e,!1),py=e=>b0(e,!0),y0=e=>{if(D(e))return"#shadow-root";{const t=v0(e);return hy(t)}},Ui=e=>y0(e),fy=(e,t,n)=>Qn(t,e.element)&&!Qn(t,n),nh=Io([eh(pl(),(e,t)=>{const n=t.event,o=n.originator,r=n.target;return fy(e,o,r)?(console.warn(pl()+` did not get interpreted by the desired target. 
Originator: `+Ui(o)+`
Target: `+Ui(r)+`
Check the `+pl()+" event handlers"),!1):!0})]);var by=Object.freeze({__proto__:null,events:nh});let w0=0;const et=e=>{const n=new Date().getTime(),o=Math.floor(Math.random()*1e9);return w0++,e+"_"+o+w0+String(n)},vy=$("alloy-id-"),Vp=$("data-alloy-id"),yy=vy(),S0=Vp(),Vu=(e,t)=>{const n=et(yy+e);return Pd(t,n),n},Pd=(e,t)=>{Object.defineProperty(e.dom,S0,{value:t,writable:!0})},Lm=e=>{const t=qt(e)?e.dom[S0]:null;return v.from(t)},Ld=e=>et(e),wy=We,Nm=e=>{const t=r=>`The component must be in a context to execute: ${r}`+(e?`
`+Ui(e().element)+" is not in context.":""),n=r=>()=>{throw new Error(t(r))},o=r=>()=>{console.warn(t(r))};return{debugInfo:$("fake"),triggerEvent:o("triggerEvent"),triggerFocus:o("triggerFocus"),triggerEscape:o("triggerEscape"),broadcast:o("broadcast"),broadcastOn:o("broadcastOn"),broadcastEvent:o("broadcastEvent"),build:n("build"),buildOrPatch:n("buildOrPatch"),addToWorld:n("addToWorld"),removeFromWorld:n("removeFromWorld"),addToGui:n("addToGui"),removeFromGui:n("removeFromGui"),getByUid:n("getByUid"),getByDom:n("getByDom"),isConnected:Te}},Sy=Nm(),zp=(e,t,n)=>{const o=n.toString(),r=o.indexOf(")")+1,a=o.indexOf("("),i=o.substring(a+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:Ka(i.slice(0,1).concat(i.slice(3)))}),e},Ka=e=>Ae(e,t=>Us(t,"/*")?t.substring(0,t.length-2):t),Zp=(e,t)=>{const n=e.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),a=n.substring(r+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:Ka(a)}),e},xy=(e,t)=>{const n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),a=n.substring(r+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Ka(a.slice(1))}),e},oh=et("alloy-premade"),x0=e=>(Object.defineProperty(e.element.dom,oh,{value:e.uid,writable:!0}),At(oh,e)),Cy=e=>Cn(e.dom,oh),Nd=e=>Xe(e,oh),Vm=e=>xy((t,...n)=>e(t.getApis(),t,...n),e),Ya={init:()=>Zc({readState:$("No State required")})},Zc=e=>e,Ty=(e,t)=>{const n=Ae(t,r=>nc(r.name(),[Ce("config"),oe("state",Ya)])),o=as("component.behaviours",xt(n),e.behaviours).fold(r=>{throw new Error(di(r)+`
Complete spec:
`+JSON.stringify(e,null,2))},We);return{list:t,data:an(o,r=>{const a=r.map(i=>({config:i.config,state:i.state.init(i.config)}));return $(a)})}},ky=e=>e.list,Ey=e=>e.data,C0=(e,t)=>{const n={};return en(e,(o,r)=>{en(o,(a,i)=>{const d=Xe(n,i).getOr([]);n[i]=d.concat([t(r,a)])})}),n},Uc=e=>({classes:Vt(e.classes)?[]:e.classes,attributes:Vt(e.attributes)?{}:e.attributes,styles:Vt(e.styles)?{}:e.styles}),T0=(e,t)=>({...e,attributes:{...e.attributes,...t.attributes},styles:{...e.styles,...t.styles},classes:e.classes.concat(t.classes)}),k0=(e,t,n,o)=>{const r={...t};Ve(n,w=>{r[w.name()]=w.exhibit(e,o)});const a=C0(r,(w,x)=>({name:w,modification:x})),i=w=>gn(w,(x,k)=>({...k.modification,...x}),{}),d=gn(a.classes,(w,x)=>x.modification.concat(w),[]),g=i(a.attributes),b=i(a.styles);return Uc({classes:d,attributes:g,styles:b})},sh=(e,t,n,o)=>{try{const r=bt(n,(a,i)=>{const d=a[t],g=i[t],b=o.indexOf(d),w=o.indexOf(g);if(b===-1)throw new Error("The ordering for "+e+" does not have an entry for "+d+`.
Order specified: `+JSON.stringify(o,null,2));if(w===-1)throw new Error("The ordering for "+e+" does not have an entry for "+g+`.
Order specified: `+JSON.stringify(o,null,2));return b<w?-1:w<b?1:0});return mn.value(r)}catch(r){return mn.error([r])}},Oy=(e,t)=>({handler:e,purpose:t}),E0=(e,t)=>({cHandler:e,purpose:t}),Up=(e,t)=>E0(on.apply(void 0,[e.handler].concat(t)),e.purpose),zm=e=>e.cHandler,rh=(e,t)=>({name:e,handler:t}),ch=(e,t)=>{const n={};return Ve(e,o=>{n[o.name()]=o.handlers(t)}),n},Ay=(e,t,n)=>{const o={...n,...ch(t,e)};return C0(o,rh)},O0=(e,t,n,o)=>{const r=Ay(e,n,o);return jp(r,t)},Wp=e=>{const t=Du(e);return(n,o,...r)=>{const a=[n,o].concat(r);t.abort.apply(void 0,a)?o.stop():t.can.apply(void 0,a)&&t.run.apply(void 0,a)}},_y=(e,t)=>mn.error(["The event ("+e+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ae(t,n=>n.name),null,2)]),My=(e,t,n)=>{const o=t[n];return o?sh("Event: "+n,"name",e,o).map(r=>{const a=Ae(r,i=>i.handler);return Pi(a)}):_y(n,e)},jp=(e,t)=>{const n=hs(e,(o,r)=>(o.length===1?mn.value(o[0].handler):My(o,t,r)).map(i=>{const d=Wp(i),g=o.length>1?Xt(t[r],b=>Kn(o,w=>w.name===b)).join(" > "):o[0].name;return At(r,Oy(d,g))}));return yo(n,{})},hi="alloy.base.behaviour",A0=xt([ur("dom","dom",Zr(),xt([Ce("tag"),oe("styles",{}),oe("classes",[]),oe("attributes",{}),oo("value"),oo("innerHtml")])),Ce("components"),Ce("uid"),oe("events",{}),oe("apis",{}),ur("eventOrder","eventOrder",Ii({[zc()]:["disabling",hi,"toggling","typeaheadevents"],[pl()]:[hi,"focusing","keying"],[Vi()]:[hi,"disabling","toggling","representing"],[Fu()]:[hi,"representing","streaming","invalidating"],[Iu()]:[hi,"representing","item-events","tooltipping"],[ls()]:["focusing",hi,"item-type-events"],[ja()]:["focusing",hi,"item-type-events"],[oa()]:["item-type-events","tooltipping"],[Bu()]:["receiving","reflecting","tooltipping"]}),ec()),oo("domModification")]),_0=e=>as("custom.definition",A0,e),M0=e=>({...e.dom,uid:e.uid,domChildren:Ae(e.components,t=>t.element)}),fC=e=>e.domModification.fold(()=>Uc({}),Uc),bC=e=>e.events,zu=(e,t)=>{const n=$o(e,t);return n===void 0||n===""?[]:n.split(" ")},Zm=(e,t,n)=>{const r=zu(e,t).concat([n]);return Pt(e,t,r.join(" ")),!0},D0=(e,t,n)=>{const o=Xt(zu(e,t),r=>r!==n);return o.length>0?Pt(e,t,o.join(" ")):P(e,t),!1},Vd=e=>e.dom.classList!==void 0,Gp=e=>zu(e,"class"),$0=(e,t)=>Zm(e,"class",t),F0=(e,t)=>D0(e,"class",t),Dy=(e,t)=>Sn(Gp(e),t)?F0(e,t):$0(e,t),Es=(e,t)=>{Vd(e)?e.dom.classList.add(t):$0(e,t)},R0=e=>{(Vd(e)?e.dom.classList:Gp(e)).length===0&&P(e,"class")},ys=(e,t)=>{Vd(e)?e.dom.classList.remove(t):F0(e,t),R0(e)},Um=(e,t)=>{const n=Vd(e)?e.dom.classList.toggle(t):Dy(e,t);return R0(e),n},Tc=(e,t)=>Vd(e)&&e.dom.classList.contains(t),Zl=(e,t)=>{Ve(t,n=>{Es(e,n)})},sa=(e,t)=>{Ve(t,n=>{ys(e,n)})},qp=(e,t)=>{Ve(t,n=>{Um(e,n)})},Fr=(e,t)=>Pe(t,n=>Tc(e,n)),$y=e=>{const t=e.dom.classList,n=new Array(t.length);for(let o=0;o<t.length;o++){const r=t.item(o);r!==null&&(n[o]=r)}return n},ah=e=>Vd(e)?$y(e):Gp(e),pi=e=>e.dom.value,Zu=(e,t)=>{if(t===void 0)throw new Error("Value.set was undefined");e.dom.value=t},fi=(e,t,n)=>mc(e,t).map(r=>{if(n.exists(i=>!Qn(i,r))){const i=n.map(lo).getOr("span"),d=q.fromTag(i);return Al(r,d),d}else return r}),Ul=(e,t,n)=>{n.fold(()=>Ar(e,t),o=>{Qn(o,t)||(Al(o,t),va(o))})},B0=(e,t,n)=>{const o=Ae(t,n),r=Js(e);return Ve(r.slice(o.length),va),o},Kp=(e,t,n,o)=>{const r=mc(e,t),a=o(n,r),i=fi(e,t,r);return Ul(e,a.element,i),a},Fy=(e,t,n)=>B0(e,t,(o,r)=>Kp(e,r,o,n)),Ry=(e,t)=>B0(e,t,(n,o)=>{const r=mc(e,o);return Ul(e,n,r),n}),I0=(e,t)=>{const n=cn(e),o=cn(t),r=Wn(o,n),a=zs(e,(i,d)=>!Cn(t,d)||i!==t[d]).t;return{toRemove:r,toSet:a}},H0=(e,t)=>{const{class:n,style:o,...r}=ue(t),{toSet:a,toRemove:i}=I0(e.attributes,r),d=()=>{Ve(i,ce=>P(t,ce)),ga(t,a)},g=ha(t),{toSet:b,toRemove:w}=I0(e.styles,g),x=()=>{Ve(w,ce=>Nn(t,ce)),Co(t,b)},k=ah(t),A=Wn(k,e.classes),B=Wn(e.classes,k),Z=()=>{Zl(t,B),sa(t,A)},re=ce=>{Nu(t,ce)},J=()=>{const ce=e.domChildren;Ry(t,ce)},K=()=>{const ce=t,ke=e.value.getOrUndefined();ke!==pi(ce)&&Zu(ce,ke??"")};return d(),Z(),x(),e.innerHtml.fold(J,re),K(),t},By=e=>{const t=q.fromTag(e.tag);ga(t,e.attributes),Zl(t,e.classes),Co(t,e.styles),e.innerHtml.each(o=>Nu(t,o));const n=e.domChildren;return wd(t,n),e.value.each(o=>{Zu(t,o)}),t},Iy=(e,t)=>{try{const n=H0(e,t);return v.some(n)}catch{return v.none()}},Hy=e=>e.innerHtml.isSome()&&e.domChildren.length>0,P0=(e,t)=>{const n=r=>lo(r)===e.tag&&!Hy(e)&&!Cy(r),o=t.filter(n).bind(r=>Iy(e,r)).getOrThunk(()=>By(e));return Pd(o,e.uid),o},L0=e=>{const t=Xe(e,"behaviours").getOr({});return Me(cn(t),n=>{const o=t[n];return rn(o)?[o.me]:[]})},vC=(e,t)=>Ty(e,t),lh=e=>{const t=L0(e);return vC(e,t)},Py=(e,t,n)=>{const o=M0(e),r=fC(e),a={"alloy.base.modification":r},i=t.length>0?k0(n,a,t,o):r;return T0(o,i)},N0=(e,t,n)=>{const o={"alloy.base.behaviour":bC(e)};return O0(n,e.eventOrder,t,o).getOrDie()},V0=(e,t)=>{const n=()=>ce,o=m(Sy),r=ya(_0(e)),a=lh(e),i=ky(a),d=Ey(a),g=Py(r,i,d),b=P0(g,t),w=N0(r,i,d),x=m(r.components),k=ke=>{o.set(ke)},A=()=>{o.set(Nm(n))},B=()=>{const ke=Js(b),be=Me(ke,he=>o.get().getByDom(he).fold(()=>[],Ee));x.set(be)},Z=ke=>{const be=d;return(Re(be[ke.name()])?be[ke.name()]:()=>{throw new Error("Could not find "+ke.name()+" in "+JSON.stringify(e,null,2))})()},re=ke=>Re(d[ke.name()]),J=()=>r.apis,K=ke=>d[ke]().map(be=>be.state.readState()).getOr("not enabled"),ce={uid:e.uid,getSystem:o.get,config:Z,hasConfigured:re,spec:e,readState:K,getApis:J,connect:k,disconnect:A,element:b,syncComponents:B,components:x.get,events:w};return ce},Yp=(e,t)=>{const n=Xe(e,"components").getOr([]);return t.fold(()=>Ae(n,Ur),o=>Ae(n,(r,a)=>Xp(r,mc(o,a))))},Ly=(e,t)=>{const{events:n,...o}=wy(e),r=Yp(o,t),a={...o,events:{...by,...n},components:r};return mn.value(V0(a,t))},Os=e=>{const t=q.fromText(e);return z0({element:t})},z0=e=>{const t=tc("external.component",Vc([Ce("element"),oo("uid")]),e),n=m(Nm()),o=d=>{n.set(d)},r=()=>{n.set(Nm(()=>i))},a=t.uid.getOrThunk(()=>Ld("external"));Pd(t.element,a);const i={uid:a,getSystem:n.get,config:v.none,hasConfigured:Te,connect:o,disconnect:r,getApis:()=>({}),element:t.element,spec:e,readState:$("No state"),syncComponents:se,components:$([]),events:{}};return x0(i)},Wm=Ld,Ny=e=>Cn(e,"uid"),Xp=(e,t)=>Nd(e).getOrThunk(()=>{const n=Ny(e)?e:{uid:Wm(""),...e};return Ly(n,t).getOrDie()}),Ur=e=>Xp(e,v.none()),ra=x0;var Z0=(e,t,n,o,r)=>e(n,o)?v.some(n):Re(r)&&r(n)?v.none():t(n,o,r);const Jp=(e,t,n)=>{let o=e.dom;const r=Re(n)?n:Te;for(;o.parentNode;){o=o.parentNode;const a=q.fromDom(o);if(t(a))return v.some(a);if(r(a))break}return v.none()},Qp=(e,t,n)=>Z0((r,a)=>a(r),Jp,e,t,n),Vy=(e,t)=>{const n=r=>t(q.fromDom(r));return Q(e.dom.childNodes,n).map(q.fromDom)},U0=(e,t)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const a=q.fromDom(o.childNodes[r]);if(t(a))return v.some(a);const i=n(o.childNodes[r]);if(i.isSome())return i}return v.none()};return n(e.dom)},W0=(e,t,n)=>Qp(e,t,n).isSome(),bi=(e,t,n)=>Jp(e,o=>fs(o,t),n),ef=(e,t)=>Vy(e,n=>fs(n,t)),As=(e,t)=>Kc(t,e),fl=(e,t,n)=>Z0((r,a)=>fs(r,a),bi,e,t,n),jm="aria-controls",j0=e=>Qp(e,n=>{if(!qt(n))return!1;const o=$o(n,"id");return o!==void 0&&o.indexOf(jm)>-1}).bind(n=>{const o=$o(n,"id"),r=le(n);return As(r,`[${jm}="${o}"]`)}),G0=()=>{const e=et(jm);return{id:e,link:o=>{Pt(o,jm,e)},unlink:o=>{P(o,jm)}}},zy=(e,t)=>j0(t).exists(n=>Wi(e,n)),Wi=(e,t)=>W0(t,n=>Qn(n,e.element),Te)||zy(e,t),q0="unknown";var zd;(function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"})(zd||(zd={}));const ih=m({}),tf=(e,t)=>{const n=[],o=new Date().getTime();return{logEventCut:(r,a,i)=>{n.push({outcome:"cut",target:a,purpose:i})},logEventStopped:(r,a,i)=>{n.push({outcome:"stopped",target:a,purpose:i})},logNoParent:(r,a,i)=>{n.push({outcome:"no-parent",target:a,purpose:i})},logEventNoHandlers:(r,a)=>{n.push({outcome:"no-handlers-left",target:a})},logEventResponse:(r,a,i)=>{n.push({outcome:"response",purpose:i,target:a})},write:()=>{const r=new Date().getTime();Sn(["mousemove","mouseover","mouseout",Vi()],e)||console.log(e,{event:e,time:r-o,target:t.dom,sequence:Ae(n,a=>Sn(["cut","stopped","response"],a.outcome)?"{"+a.purpose+"} "+a.outcome+" at ("+Ui(a.target)+")":a.outcome)})}}},K0=(e,t,n)=>{switch(Xe(ih.get(),e).orThunk(()=>{const r=cn(ih.get());return xn(r,a=>e.indexOf(a)>-1?v.some(ih.get()[a]):v.none())}).getOr(zd.NORMAL)){case zd.NORMAL:return n(yC());case zd.LOGGING:{const r=tf(e,t),a=n(r);return r.write(),a}case zd.STOP:return!0}},Zy=["alloy/data/Fields","alloy/debugging/Debugging"],Y0=()=>{const e=new Error;if(e.stack!==void 0){const t=e.stack.split(`
`);return Q(t,n=>n.indexOf("alloy")>0&&!Kn(Zy,o=>n.indexOf(o)>-1)).getOr(q0)}else return q0},Uy={logEventCut:se,logEventStopped:se,logNoParent:se,logEventNoHandlers:se,logEventResponse:se,write:se},uh=(e,t,n)=>K0(e,t,n),yC=$(Uy),ji=$([Ce("menu"),Ce("selectedMenu")]),X0=$([Ce("item"),Ce("selectedItem")]);$(xt(X0().concat(ji())));const Zd=$(xt(X0())),Wy=Nl("initSize",[Ce("numColumns"),Ce("numRows")]),jy=()=>fc("markers",Zd()),Gm=()=>Nl("markers",[Ce("backgroundMenu")].concat(ji()).concat(X0())),Uu=e=>Nl("markers",Ae(e,Ce)),dh=(e,t,n)=>(Y0(),ur(t,t,n,Ll(o=>mn.value((...r)=>o.apply(void 0,r))))),Vn=e=>dh("onHandler",e,Va(se)),Wc=e=>dh("onKeyboardHandler",e,Va(v.none)),Wu=e=>dh("onHandler",e,Zr()),nf=e=>dh("onKeyboardHandler",e,Zr()),zo=(e,t)=>Mr(e,$(t)),of=e=>Mr(e,We),J0=$(Wy),Rr=(e,t,n,o,r,a,i,d=!1)=>({x:e,y:t,bubble:n,direction:o,placement:r,restriction:a,label:`${i}-${r}`,alwaysFit:d}),Gi=E.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ud=(e,t,n,o,r,a,i,d,g)=>e.fold(t,n,o,r,a,i,d,g),Q0=(e,t,n,o)=>e.fold(t,t,o,o,t,o,n,n),eb=(e,t,n,o)=>e.fold(t,o,t,o,n,n,t,o),qm=Gi.southeast,sf=Gi.southwest,rf=Gi.northeast,cf=Gi.northwest,af=Gi.south,Gy=Gi.north,kc=Gi.east,tb=Gi.west,Wd=(e,t,n,o)=>{const r=e+t;return r>o?n:r<n?o:r},ca=(e,t,n)=>Math.min(Math.max(e,t),n),qy=(e,t)=>{switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}},gr=(e,t)=>Fe(["left","right","top","bottom"],n=>Xe(t,n).map(o=>qy(e,o))),lf=(e,t,n)=>{const o=(g,b)=>t[g].map(w=>{const x=g==="top"||g==="bottom",k=x?n.top:n.left,B=(g==="left"||g==="top"?Math.max:Math.min)(w,b)+k;return x?ca(B,e.y,e.bottom):ca(B,e.x,e.right)}).getOr(b),r=o("left",e.x),a=o("top",e.y),i=o("right",e.right),d=o("bottom",e.bottom);return es(r,a,i-r,d-a)},qi="layout",nb=e=>e.x,ob=(e,t)=>e.x+e.width/2-t.width/2,uf=(e,t)=>e.x+e.width-t.width,mh=(e,t)=>e.y-t.height,jd=e=>e.y+e.height,sb=(e,t)=>e.y+e.height/2-t.height/2,Ky=e=>e.x+e.width,Ec=(e,t)=>e.x-t.width,sr=(e,t,n)=>Rr(nb(e),jd(e),n.southeast(),qm(),"southeast",gr(e,{left:1,top:3}),qi),Br=(e,t,n)=>Rr(uf(e,t),jd(e),n.southwest(),sf(),"southwest",gr(e,{right:0,top:3}),qi),Oc=(e,t,n)=>Rr(nb(e),mh(e,t),n.northeast(),rf(),"northeast",gr(e,{left:1,bottom:2}),qi),Ac=(e,t,n)=>Rr(uf(e,t),mh(e,t),n.northwest(),cf(),"northwest",gr(e,{right:0,bottom:2}),qi),sc=(e,t,n)=>Rr(ob(e,t),mh(e,t),n.north(),Gy(),"north",gr(e,{bottom:2}),qi),hr=(e,t,n)=>Rr(ob(e,t),jd(e),n.south(),af(),"south",gr(e,{top:3}),qi),df=(e,t,n)=>Rr(Ky(e),sb(e,t),n.east(),kc(),"east",gr(e,{left:0}),qi),mf=(e,t,n)=>Rr(Ec(e,t),sb(e,t),n.west(),tb(),"west",gr(e,{right:1}),qi),rb=()=>[sr,Br,Oc,Ac,hr,sc,df,mf],gh=()=>[Br,sr,Ac,Oc,hr,sc,df,mf],cb=()=>[Oc,Ac,sr,Br,sc,hr],ab=()=>[Ac,Oc,Br,sr,sc,hr],gf=()=>[sr,Br,Oc,Ac,hr,sc],hf=()=>[Br,sr,Ac,Oc,hr,sc],Yy=(e,t)=>t.universal?e:Xt(e,n=>Sn(t.channels,n));var Xy=Object.freeze({__proto__:null,events:e=>Io([xe(Bu(),(t,n)=>{const o=e.channels,r=cn(o),a=n,i=Yy(r,a);Ve(i,d=>{const g=o[d],b=g.schema,w=tc("channel["+d+`] data
Receiver: `+Ui(t.element),b,a.data);g.onReceive(t,w)})})])}),Jy=[fc("channels",zg(mn.value,Vc([Wu("onReceive"),oe("schema",ec())])))];const hh=(e,t,n)=>qa(o=>{n(o,e,t)}),pf=(e,t,n)=>Pp((o,r)=>{n(o,e,t)}),Qy=(e,t,n,o,r,a)=>{const i=Vc(e),d=nc(t,[jg("config",e)]);return lb(i,d,t,n,o,r,a)},ew=(e,t,n,o,r,a)=>{const i=e,d=nc(t,[Ua("config",e)]);return lb(i,d,t,n,o,r,a)},tw=(e,t,n)=>zp((r,...a)=>{const i=[r].concat(a);return r.config({name:$(e)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+n)},d=>{const g=Array.prototype.slice.call(i,1);return t.apply(void 0,[r,d.config,d.state].concat(g))})},n,t),nw=e=>({key:e,value:void 0}),lb=(e,t,n,o,r,a,i)=>{const d=x=>Ko(x,n)?x[n]():v.none(),g=an(r,(x,k)=>tw(n,x,k)),w={...an(a,(x,k)=>Zp(x,k)),...g,revoke:on(nw,n),config:x=>{const k=tc(n+"-config",e,x);return{key:n,value:{config:k,me:w,configAsRaw:ge(()=>tc(n+"-config",e,x)),initialConfig:x,state:i}}},schema:$(t),exhibit:(x,k)=>Zs(d(x),Xe(o,"exhibit"),(A,B)=>B(k,A.config,A.state)).getOrThunk(()=>Uc({})),name:$(n),handlers:x=>d(x).map(k=>Xe(o,"events").getOr(()=>({}))(k.config,k.state)).getOr({})};return w},He=e=>Lt(e),ff=Vc([Ce("fields"),Ce("name"),oe("active",{}),oe("apis",{}),oe("state",Ya),oe("extra",{})]),rr=e=>{const t=tc("Creating behaviour: "+e.name,ff,e);return Qy(t.fields,t.name,t.active,t.apis,t.extra,t.state)},ib=Vc([Ce("branchKey"),Ce("branches"),Ce("name"),oe("active",{}),oe("apis",{}),oe("state",Ya),oe("extra",{})]),bf=e=>{const t=tc("Creating behaviour: "+e.name,ib,e);return ew(or(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},ub=$(void 0),_c=rr({fields:Jy,name:"receiving",active:Xy});var db=Object.freeze({__proto__:null,exhibit:(e,t)=>Uc({classes:[],styles:t.useFixed()?{}:{position:"relative"}})});const aa=(e,t=!1)=>e.dom.focus({preventScroll:t}),Gd=e=>e.dom.blur(),Km=e=>{const t=le(e).dom;return e.dom===t.activeElement},Wl=(e=Ml())=>v.from(e.dom.activeElement).map(q.fromDom),bl=e=>Wl(le(e)).filter(t=>e.dom.contains(t.dom)),vf=(e,t)=>{const n=le(t),o=Wl(n).bind(a=>{const i=d=>Qn(a,d);return i(t)?v.some(t):U0(t,i)}),r=e(t);return o.each(a=>{Wl(n).filter(i=>Qn(i,a)).fold(()=>{aa(a)},se)}),r},Xa=(e,t,n,o,r)=>{const a=i=>i+"px";return{position:e,left:t.map(a),top:n.map(a),right:o.map(a),bottom:r.map(a)}},ow=e=>({...e,position:v.some(e.position)}),mb=(e,t)=>{Er(e,ow(t))},yf=E.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),gb=(e,t,n,o,r,a)=>{const i=t.rect,d=i.x-n,g=i.y-o,b=i.width,w=i.height,x=r-(d+b),k=a-(g+w),A=v.some(d),B=v.some(g),Z=v.some(x),re=v.some(k),J=v.none();return Ud(t.direction,()=>Xa(e,A,B,J,J),()=>Xa(e,J,B,Z,J),()=>Xa(e,A,J,J,re),()=>Xa(e,J,J,Z,re),()=>Xa(e,A,B,J,J),()=>Xa(e,A,J,J,re),()=>Xa(e,A,B,J,J),()=>Xa(e,J,B,Z,J))},hb=(e,t)=>e.fold(()=>{const n=t.rect;return Xa("absolute",v.some(n.x),v.some(n.y),v.none(),v.none())},(n,o,r,a)=>gb("absolute",t,n,o,r,a),(n,o,r,a)=>gb("fixed",t,n,o,r,a)),wf=(e,t)=>{const n=on(dl,t),o=e.fold(n,n,()=>{const i=Jr();return dl(t).translate(-i.left,-i.top)}),r=H(t),a=Ia(t);return es(o.left,o.top,r,a)},sw=(e,t)=>t.fold(()=>e.fold(tr,tr,es),n=>e.fold($(n),$(n),()=>{const o=pb(e,n.x,n.y);return es(o.left,o.top,n.width,n.height)})),pb=(e,t,n)=>{const o=Gn(t,n),r=()=>{const a=Jr();return o.translate(-a.left,-a.top)};return e.fold($(o),$(o),r)},rw=(e,t,n,o)=>e.fold(t,n,o);yf.none;const cw=yf.relative,aw=yf.fixed,lw=(e,t)=>({anchorBox:e,origin:t}),iw=(e,t)=>lw(e,t),Sf="data-alloy-placement",uw=(e,t)=>{Pt(e,Sf,t)},fb=e=>C(e,Sf),dw=e=>P(e,Sf),ph=E.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),bb=(e,t)=>{const{x:n,y:o,right:r,bottom:a}=t,{x:i,y:d,right:g,bottom:b,width:w,height:x}=e,k=i>=n&&i<=r,A=d>=o&&d<=a,B=k&&A,Z=g<=r&&g>=n,re=b<=a&&b>=o,J=Z&&re,K=Math.min(w,i>=n?r-i:g-n),ce=Math.min(x,d>=o?a-d:b-o);return{originInBounds:B,sizeInBounds:J,visibleW:K,visibleH:ce}},vb=(e,t)=>{const{x:n,y:o,right:r,bottom:a}=t,{x:i,y:d,width:g,height:b}=e,w=Math.max(n,r-g),x=Math.max(o,a-b),k=ca(i,n,w),A=ca(d,o,x),B=Math.min(k+g,r)-k,Z=Math.min(A+b,a)-A;return es(k,A,B,Z)},ju=(e,t,n)=>{const o=$(t.bottom-n.y),r=$(n.bottom-t.y),a=Q0(e,r,r,o),i=$(t.right-n.x),d=$(n.right-t.x);return{maxWidth:eb(e,d,d,i),maxHeight:a}},mw=(e,t,n,o)=>{const r=e.bubble,a=r.offset,i=lf(o,e.restriction,a),d=e.x+a.left,g=e.y+a.top,b=es(d,g,t,n),{originInBounds:w,sizeInBounds:x,visibleW:k,visibleH:A}=bb(b,i),B=w&&x,Z=B?b:vb(b,i),re=Z.width>0&&Z.height>0,{maxWidth:J,maxHeight:K}=ju(e.direction,Z,o),ce={rect:Z,maxHeight:K,maxWidth:J,direction:e.direction,placement:e.placement,classes:{on:r.classesOn,off:r.classesOff},layout:e.label,testY:g};return B||e.alwaysFit?ph.fit(ce):ph.nofit(ce,k,A,re)},gw=(e,t,n,o,r,a)=>{const i=o.width,d=o.height,g=(w,x,k,A,B)=>{const Z=w(n,o,r,e,a),re=mw(Z,i,d,a);return re.fold($(re),(J,K,ce,ke)=>(B===ke?ce>A||K>k:!B&&ke)?re:ph.nofit(x,k,A,B))};return En(t,(w,x)=>{const k=on(g,x);return w.fold($(w),k)},ph.nofit({rect:n,maxHeight:o.height,maxWidth:o.width,direction:qm(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:n.y},-1,-1,!1)).fold(We,We)},xf=e=>{const t=m(v.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(v.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:d=>{n(),t.set(v.some(d))}}},hw=()=>xf(e=>e.destroy()),vi=()=>xf(e=>e.unbind()),On=()=>{const e=xf(se);return{...e,on:n=>e.get().each(n)}},yb=gt,rc=(e,t,n)=>ul(e,t,yb,n),Cf=(e,t,n)=>Em(e,t,yb,n),Tf=Ha,kf=["top","bottom","right","left"],fh="data-alloy-transition-timer",pw=(e,t)=>Fr(e,t.classes),fw=(e,t,n)=>n.exists(o=>{const r=e.mode;return r==="all"?!0:o[r]!==t[r]}),bw=(e,t)=>{const n=o=>parseFloat(o).toFixed(3);return ns(t,(o,r)=>{const a=e[r].map(n),i=o.map(n);return!ps(a,i)}).isSome()},Ym=e=>{const t=a=>{const d=Fo(e,a).split(/\s*,\s*/);return Xt(d,z)},n=a=>{if(ye(a)&&/^[\d.]+/.test(a)){const i=parseFloat(a);return Us(a,"ms")?i:i*1e3}else return 0},o=t("transition-delay"),r=t("transition-duration");return En(r,(a,i,d)=>{const g=n(o[d])+n(i);return Math.max(a,g)},0)},wb=(e,t)=>{const n=vi(),o=vi();let r;const a=b=>{var w;const x=(w=b.raw.pseudoElement)!==null&&w!==void 0?w:"";return Qn(b.target,e)&&N(x)&&Sn(kf,b.raw.propertyName)},i=b=>{if(yn(b)||a(b)){n.clear(),o.clear();const w=b==null?void 0:b.raw.type;(yn(w)||w===Id())&&(clearTimeout(r),P(e,fh),sa(e,t.classes))}},d=rc(e,Dp(),b=>{a(b)&&(d.unbind(),n.set(rc(e,Id(),i)),o.set(rc(e,ly(),i)))}),g=Ym(e);requestAnimationFrame(()=>{r=setTimeout(i,g+17),Pt(e,fh,r)})},xC=(e,t)=>{Zl(e,t.classes),C(e,fh).each(n=>{clearTimeout(parseInt(n,10)),P(e,fh)}),wb(e,t)},Gu=(e,t,n,o,r,a)=>{const i=fw(o,r,a);if(i||pw(e,o)){Je(e,"position",n.position);const d=wf(t,e),g=hb(t,{...r,rect:d}),b=Fe(kf,w=>g[w]);bw(n,b)&&(Er(e,b),i&&xC(e,o),Qs(e))}else sa(e,o.classes)},vw=e=>({width:H(e),height:Ia(e)}),yw=(e,t,n,o)=>{Nn(t,"max-height"),Nn(t,"max-width");const r=vw(t);return gw(t,o.preference,e,r,n,o.bounds)},ww=(e,t)=>{const n=t.classes;sa(e,n.off),Zl(e,n.on)},Sw=(e,t,n)=>{const o=n.maxHeightFunction;o(e,t.maxHeight)},Sb=(e,t,n)=>{const o=n.maxWidthFunction;o(e,t.maxWidth)},Ef=(e,t,n)=>{const o=hb(n.origin,t);n.transition.each(r=>{Gu(e,n.origin,o,r,t,n.lastPlacement)}),mb(e,o)},xw=(e,t)=>{uw(e,t.placement)},xb=(e,t)=>{ci(e,Math.floor(t))},Cb=$((e,t)=>{xb(e,t),Co(e,{"overflow-x":"hidden","overflow-y":"auto"})}),qd=$((e,t)=>{xb(e,t)}),Tb=(e,t,n)=>e[t]===void 0?n:e[t],Cw=(e,t,n,o,r,a,i,d)=>{const g=Tb(i,"maxHeightFunction",Cb()),b=Tb(i,"maxWidthFunction",se),w=e.anchorBox,x=e.origin,k={bounds:sw(x,a),origin:x,preference:o,maxHeightFunction:g,maxWidthFunction:b,lastPlacement:r,transition:d};return Tw(w,t,n,k)},Tw=(e,t,n,o)=>{const r=yw(e,t,n,o);return Ef(t,r,o),xw(t,r),ww(t,r),Sw(t,r,o),Sb(t,r,o),{layout:r.layout,placement:r.placement}},kb=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],jl=(e,t,n,o=1)=>{const r=e*o,a=t*o,i=g=>Xe(n,g).getOr([]),d=(g,b,w)=>{const x=Wn(kb,w);return{offset:Gn(g,b),classesOn:Me(w,i),classesOff:Me(x,i)}};return{southeast:()=>d(-e,t,["top","alignLeft"]),southwest:()=>d(e,t,["top","alignRight"]),south:()=>d(-e/2,t,["top","alignCentre"]),northeast:()=>d(-e,-t,["bottom","alignLeft"]),northwest:()=>d(e,-t,["bottom","alignRight"]),north:()=>d(-e/2,-t,["bottom","alignCentre"]),east:()=>d(e,-t/2,["valignCentre","left"]),west:()=>d(-e,-t/2,["valignCentre","right"]),insetNortheast:()=>d(r,a,["top","alignLeft","inset"]),insetNorthwest:()=>d(-r,a,["top","alignRight","inset"]),insetNorth:()=>d(-r/2,a,["top","alignCentre","inset"]),insetSoutheast:()=>d(r,-a,["bottom","alignLeft","inset"]),insetSouthwest:()=>d(-r,-a,["bottom","alignRight","inset"]),insetSouth:()=>d(-r/2,-a,["bottom","alignCentre","inset"]),insetEast:()=>d(-r,-a/2,["valignCentre","right","inset"]),insetWest:()=>d(r,-a/2,["valignCentre","left","inset"])}},Xm=()=>jl(0,0,{}),Jm=We,bh=(e,t)=>n=>vh(n)==="rtl"?t:e,vh=e=>Fo(e,"direction")==="rtl"?"rtl":"ltr";var ka;(function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"})(ka||(ka={}));const Qm="data-alloy-vertical-dir",Eb=e=>W0(e,t=>qt(t)&&$o(t,"data-alloy-vertical-dir")===ka.BottomToTop),Ki=()=>nc("layouts",[Ce("onLtr"),Ce("onRtl"),oo("onBottomLtr"),oo("onBottomRtl")]),yh=(e,t,n,o,r,a,i)=>{const d=i.map(Eb).getOr(!1),g=t.layouts.map(A=>A.onLtr(e)),b=t.layouts.map(A=>A.onRtl(e)),w=d?t.layouts.bind(A=>A.onBottomLtr.map(B=>B(e))).or(g).getOr(r):g.getOr(n),x=d?t.layouts.bind(A=>A.onBottomRtl.map(B=>B(e))).or(b).getOr(a):b.getOr(o);return bh(w,x)(e)},kw=(e,t,n)=>{const o=t.hotspot,r=wf(n,o.element),a=yh(e.element,t,gf(),hf(),cb(),ab(),v.some(t.hotspot.element));return v.some(Jm({anchorBox:r,bubble:t.bubble.getOr(Xm()),overrides:t.overrides,layouts:a}))};var Ew=[Ce("hotspot"),oo("bubble"),oe("overrides",{}),Ki(),zo("placement",kw)];const Ow=(e,t,n)=>{const o=pb(n,t.x,t.y),r=es(o.left,o.top,t.width,t.height),a=yh(e.element,t,rb(),gh(),rb(),gh(),v.none());return v.some(Jm({anchorBox:r,bubble:t.bubble,overrides:t.overrides,layouts:a}))};var Aw=[Ce("x"),Ce("y"),oe("height",0),oe("width",0),oe("bubble",Xm()),oe("overrides",{}),Ki(),zo("placement",Ow)];const Of=E.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),_w=e=>e.fold(We,(t,n,o)=>t.translate(-n,-o)),Mw=e=>e.fold(We,We),Ob=e=>En(e,(t,n)=>t.translate(n.left,n.top),Gn(0,0)),Dw=e=>{const t=Ae(e,_w);return Ob(t)},Ab=e=>{const t=Ae(e,Mw);return Ob(t)},$w=Of.screen,Fw=Of.absolute,Rw=(e,t,n)=>{const o=Hr(n.root).dom,r=a=>{const i=js(a),d=js(e.element);return Qn(i,d)};return v.from(o.frameElement).map(q.fromDom).filter(r).map(Or)},_b=(e,t,n)=>{const o=js(e.element),r=Jr(o),a=Rw(e,t,n).getOr(r);return Fw(a,r.left,r.top)},Kd=(e,t,n,o)=>{const r=$w(Gn(e,t));return v.some(wu(r,n,o))},Af=(e,t,n,o,r)=>e.map(a=>{const i=[t,a.point],d=rw(o,()=>Ab(i),()=>Ab(i),()=>Dw(i)),g=Cd(d.left,d.top,a.width,a.height),b=n.showAbove?cb():gf(),w=n.showAbove?ab():hf(),x=yh(r,n,b,w,b,w,v.none());return Jm({anchorBox:g,bubble:n.bubble.getOr(Xm()),overrides:n.overrides,layouts:x})}),_f=(e,t,n)=>{const o=_b(e,n,t);return t.node.filter(Xn).bind(r=>{const a=r.dom.getBoundingClientRect(),i=Kd(a.left,a.top,a.width,a.height),d=t.node.getOr(e.element);return Af(i,o,t,n,d)})};var Mf=[Ce("node"),Ce("root"),oo("bubble"),Ki(),oe("overrides",{}),oe("showAbove",!1),zo("placement",_f)];const Mb="\uFEFF",Df="",wh={create:(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o})},Sh=E.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Iw=(e,t,n,o)=>e.fold(t,n,o),Db=e=>e.fold(We,We,We),$b=Sh.before,Hw=Sh.on,$f=Sh.after,Pw={before:$b,on:Hw,after:$f,cata:Iw,getStart:Db},xh=E.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Lw=e=>xh.exact(e.start,e.soffset,e.finish,e.foffset),Ff=e=>e.match({domRange:t=>q.fromDom(t.startContainer),relative:(t,n)=>Pw.getStart(t),exact:(t,n,o,r)=>t}),Nw=xh.domRange,Vw=xh.relative,zw=xh.exact,Zw=e=>{const t=Ff(e);return Hr(t)},Uw=wh.create,Sr={domRange:Nw,relative:Vw,exact:zw,exactFromRange:Lw,getWin:Zw,range:Uw},CC=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,o)=>{e.setStart(n.dom,o)},n=>{e.setStartAfter(n.dom)})},Yd=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,o)=>{e.setEnd(n.dom,o)},n=>{e.setEndAfter(n.dom)})},Fb=(e,t,n)=>{const o=e.document.createRange();return CC(o,t),Yd(o,n),o},Rb=(e,t,n,o,r)=>{const a=e.document.createRange();return a.setStart(t.dom,n),a.setEnd(o.dom,r),a},Bb=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Ww=e=>{const t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?v.some(n).map(Bb):v.none()},jw=e=>{const t=e.getBoundingClientRect();return t.width>0||t.height>0?v.some(t).map(Bb):v.none()},Xd=E.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ch=(e,t,n)=>t(q.fromDom(n.startContainer),n.startOffset,q.fromDom(n.endContainer),n.endOffset),Gw=(e,t)=>t.match({domRange:n=>({ltr:$(n),rtl:v.none}),relative:(n,o)=>({ltr:ge(()=>Fb(e,n,o)),rtl:ge(()=>v.some(Fb(e,o,n)))}),exact:(n,o,r,a)=>({ltr:ge(()=>Rb(e,n,o,r,a)),rtl:ge(()=>v.some(Rb(e,r,a,n,o)))})}),qw=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(r=>r.collapsed===!1).map(r=>Xd.rtl(q.fromDom(r.endContainer),r.endOffset,q.fromDom(r.startContainer),r.startOffset)).getOrThunk(()=>Ch(e,Xd.ltr,n)):Ch(e,Xd.ltr,n)},eg=(e,t)=>{const n=Gw(e,t);return qw(e,n)},Rf=(e,t)=>eg(e,t).match({ltr:(o,r,a,i)=>{const d=e.document.createRange();return d.setStart(o.dom,r),d.setEnd(a.dom,i),d},rtl:(o,r,a,i)=>{const d=e.document.createRange();return d.setStart(a.dom,i),d.setEnd(o.dom,r),d}});Xd.ltr,Xd.rtl;const Ib=(e,t,n)=>Xt(Ba(e,n),t),vc=(e,t)=>Ws(t,e),Hb=(e,t,n,o)=>{const a=js(e).dom.createRange();return a.setStart(e.dom,t),a.setEnd(n.dom,o),a},Bf=(e,t,n,o)=>{const r=Hb(e,t,n,o),a=Qn(e,n)&&t===o;return r.collapsed&&!a},TC=e=>v.from(e.getSelection()),Jd=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return v.some(wh.create(q.fromDom(t.startContainer),t.startOffset,q.fromDom(n.endContainer),n.endOffset))}else return v.none()},kC=e=>{if(e.anchorNode===null||e.focusNode===null)return Jd(e);{const t=q.fromDom(e.anchorNode),n=q.fromDom(e.focusNode);return Bf(t,e.anchorOffset,n,e.focusOffset)?v.some(wh.create(t,e.anchorOffset,n,e.focusOffset)):Jd(e)}},Pb=e=>TC(e).filter(t=>t.rangeCount>0).bind(kC),If=(e,t)=>{const n=Rf(e,t);return Ww(n)},Th=(e,t)=>{const n=Rf(e,t);return jw(n)},Lb=((e,t)=>{const n=a=>{if(!e(a))throw new Error("Can only get "+t+" value of a "+t+" node");return o(a).getOr("")},o=a=>e(a)?v.from(a.dom.nodeValue):v.none();return{get:n,getOption:o,set:(a,i)=>{if(!e(a))throw new Error("Can only set raw "+t+" value of a "+t+" node");a.dom.nodeValue=i}}})(pn,"text"),Kw=e=>Lb.get(e),Qd=(e,t)=>({element:e,offset:t}),Nb=(e,t)=>{const n=Js(e);if(n.length===0)return Qd(e,t);if(t<n.length)return Qd(n[t],0);{const o=n[n.length-1],r=pn(o)?Kw(o).length:Js(o).length;return Qd(o,r)}},qu=(e,t)=>pn(e)?Qd(e,t):Nb(e,t),Ku=e=>e.foffset!==void 0,Vb=(e,t)=>t.getSelection.getOrThunk(()=>()=>Pb(e))().map(o=>{if(Ku(o)){const r=qu(o.start,o.soffset),a=qu(o.finish,o.foffset);return Sr.range(r.element,r.offset,a.element,a.offset)}else return o}),zb=(e,t,n)=>{const o=Hr(t.root).dom,r=_b(e,n,t),a=Vb(o,t).bind(g=>{if(Ku(g))return Th(o,Sr.exactFromRange(g)).orThunk(()=>{const w=q.fromText(Mb);Al(g.start,w);const x=If(o,Sr.exact(w,0,w,1));return va(w),x}).bind(w=>Kd(w.left,w.top,w.width,w.height));{const b=an(g,x=>x.dom.getBoundingClientRect()),w={left:Math.min(b.firstCell.left,b.lastCell.left),right:Math.max(b.firstCell.right,b.lastCell.right),top:Math.min(b.firstCell.top,b.lastCell.top),bottom:Math.max(b.firstCell.bottom,b.lastCell.bottom)};return Kd(w.left,w.top,w.right-w.left,w.bottom-w.top)}}),d=Vb(o,t).bind(g=>Ku(g)?qt(g.start)?v.some(g.start):Lr(g.start):v.some(g.firstCell)).getOr(e.element);return Af(a,r,t,n,d)};var OC=[oo("getSelection"),Ce("root"),oo("bubble"),Ki(),oe("overrides",{}),oe("showAbove",!1),zo("placement",zb)];const Hf="link-layout",Pf=e=>e.x+e.width,kh=(e,t)=>e.x-t.width,Zb=(e,t)=>e.y-t.height+e.height,Ub=e=>e.y,Lf=(e,t,n)=>Rr(Pf(e),Ub(e),n.southeast(),qm(),"southeast",gr(e,{left:0,top:2}),Hf),Wb=(e,t,n)=>Rr(kh(e,t),Ub(e),n.southwest(),sf(),"southwest",gr(e,{right:1,top:2}),Hf),jb=(e,t,n)=>Rr(Pf(e),Zb(e,t),n.northeast(),rf(),"northeast",gr(e,{left:0,bottom:3}),Hf),Nf=(e,t,n)=>Rr(kh(e,t),Zb(e,t),n.northwest(),cf(),"northwest",gr(e,{right:1,bottom:3}),Hf),Vf=()=>[Lf,Wb,jb,Nf],tg=()=>[Wb,Lf,Nf,jb],Gb=(e,t,n)=>{const o=wf(n,t.item.element),r=yh(e.element,t,Vf(),tg(),Vf(),tg(),v.none());return v.some(Jm({anchorBox:o,bubble:Xm(),overrides:t.overrides,layouts:r}))};var qb=[Ce("item"),Ki(),oe("overrides",{}),zo("placement",Gb)],Yw=or("type",{selection:OC,node:Mf,hotspot:Ew,submenu:qb,makeshift:Aw});const Xw=[Cc("classes",nr),Sa("mode","all",["all","layout","placement"])],Jw=[oe("useFixed",Te),oo("getBounds")],Eh=[fc("anchor",Yw),nc("transition",Xw)],Qw=()=>{const e=document.documentElement;return aw(0,0,e.clientWidth,e.clientHeight)},eS=e=>{const t=Or(e.element),n=e.element.dom.getBoundingClientRect();return cw(t.left,t.top,n.width,n.height)},AC=(e,t,n,o,r,a)=>{const i=iw(t.anchorBox,e);return Cw(i,o.element,t.bubble,t.layouts,r,n,t.overrides,a)},_C=(e,t,n,o,r)=>{const a=v.none();Yu(e,t,n,o,r,a)},Yu=(e,t,n,o,r,a)=>{const i=tc("placement.info",xt(Eh),r),d=i.anchor,g=o.element,b=n.get(o.uid);vf(()=>{Je(g,"position","fixed");const w=bo(g,"visibility");Je(g,"visibility","hidden");const x=t.useFixed()?Qw():eS(e);d.placement(e,d,x).each(k=>{const A=a.orThunk(()=>t.getBounds.map(Jn)),B=AC(x,k,A,o,b,i.transition);n.set(o.uid,B)}),w.fold(()=>{Nn(g,"visibility")},k=>{Je(g,"visibility",k)}),bo(g,"left").isNone()&&bo(g,"top").isNone()&&bo(g,"right").isNone()&&bo(g,"bottom").isNone()&&Ds(bo(g,"position"),"fixed")&&Nn(g,"position")},g)};var tS=Object.freeze({__proto__:null,position:_C,positionWithinBounds:Yu,getMode:(e,t,n)=>t.useFixed()?"fixed":"absolute",reset:(e,t,n,o)=>{const r=o.element;Ve(["position","left","right","top","bottom"],a=>Nn(r,a)),dw(r),n.clear(o.uid)}}),zf=Object.freeze({__proto__:null,init:()=>{let e={};return Zc({readState:()=>e,clear:r=>{rn(r)?delete e[r]:e={}},set:(r,a)=>{e[r]=a},get:r=>Xe(e,r)})}});const cc=rr({fields:Jw,name:"positioning",active:db,apis:tS,state:zf}),Zf=e=>e.getSystem().isConnected(),ng=e=>{to(e,Iu());const t=e.components();Ve(t,ng)},og=e=>{const t=e.components();Ve(t,og),to(e,Ta())},Yb=(e,t)=>{e.getSystem().addToWorld(t),Xn(e.element)&&og(t)},em=e=>{ng(e),e.getSystem().removeFromWorld(e)},sg=(e,t)=>{Ar(e.element,t.element)},Xb=e=>{Ve(e.components(),t=>va(t.element)),fu(e.element),e.syncComponents()},nS=(e,t,n)=>{const o=e.components();Xb(e);const r=n(t),a=Wn(o,r);Ve(a,i=>{ng(i),e.getSystem().removeFromWorld(i)}),Ve(r,i=>{Zf(i)?sg(e,i):(e.getSystem().addToWorld(i),sg(e,i),Xn(e.element)&&og(i))}),e.syncComponents()},oS=(e,t,n)=>{const o=e.components(),r=Me(t,d=>Nd(d).toArray());Ve(o,d=>{Sn(r,d)||em(d)});const a=n(t),i=Wn(o,a);Ve(i,d=>{Zf(d)&&em(d)}),Ve(a,d=>{Zf(d)||Yb(e,d)}),e.syncComponents()},Xu=(e,t)=>{rg(e,t,Ar)},rg=(e,t,n)=>{e.getSystem().addToWorld(t),n(e.element,t.element),Xn(e.element)&&og(t),e.syncComponents()},Uf=e=>{ng(e),va(e.element),e.getSystem().removeFromWorld(e)},Gl=e=>{const t=Fs(e.element).bind(n=>e.getSystem().getByDom(n).toOptional());Uf(e),t.each(n=>{n.syncComponents()})},Wf=e=>{const t=e.components();Ve(t,Uf),fu(e.element),e.syncComponents()},yi=(e,t)=>{vl(e,t,Ar)},Oh=(e,t)=>{vl(e,t,_l)},vl=(e,t,n)=>{n(e,t.element);const o=Js(t.element);Ve(o,r=>{t.getByDom(r).each(og)})},sS=e=>{const t=Js(e.element);Ve(t,n=>{e.getByDom(n).each(ng)}),va(e.element)},jf=(e,t,n,o)=>{n.get().each(i=>{Wf(e)});const r=t.getAttachPoint(e);Xu(r,e);const a=e.getSystem().build(o);return Xu(e,a),n.set(a),a},Jb=(e,t,n,o)=>{const r=jf(e,t,n,o);return t.onOpen(e,r),r},$C=(e,t,n,o)=>n.get().map(()=>jf(e,t,n,o)),rS=(e,t,n,o,r)=>{Ah(e,t),Jb(e,t,n,o),r(),nv(e,t)},Qb=(e,t,n)=>{n.get().each(o=>{Wf(e),Gl(e),t.onClose(e,o),n.clear()})},ev=(e,t,n)=>n.isOpen(),cS=(e,t,n,o)=>ev(e,t,n)&&n.get().exists(r=>t.isPartOf(e,r,o)),Gf=(e,t,n)=>n.get(),aS=(e,t,n,o)=>{bo(e.element,t).fold(()=>{P(e.element,n)},r=>{Pt(e.element,n,r)}),Je(e.element,t,o)},tv=(e,t,n)=>{C(e.element,n).fold(()=>Nn(e.element,t),o=>Je(e.element,t,o))},Ah=(e,t,n)=>{const o=t.getAttachPoint(e);Je(e.element,"position",cc.getMode(o)),aS(e,"visibility",t.cloakVisibilityAttr,"hidden")},lS=e=>Kn(["top","left","right","bottom"],t=>bo(e,t).isSome()),nv=(e,t,n)=>{lS(e.element)||Nn(e.element,"position"),tv(e,"visibility",t.cloakVisibilityAttr)};var qf=Object.freeze({__proto__:null,cloak:Ah,decloak:nv,open:Jb,openWhileCloaked:rS,close:Qb,isOpen:ev,isPartOf:cS,getState:Gf,setContent:$C}),ov=Object.freeze({__proto__:null,events:(e,t)=>Io([xe(Gg(),(n,o)=>{Qb(n,e,t)})])}),uS=[Vn("onOpen"),Vn("onClose"),Ce("isPartOf"),Ce("getAttachPoint"),oe("cloakVisibilityAttr","data-precloak-visibility")],dS=Object.freeze({__proto__:null,init:()=>{const e=On(),t=$("not-implemented");return Zc({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}});const Hn=rr({fields:uS,name:"sandboxing",active:ov,apis:qf,state:dS}),wi=$("dismiss.popups"),tm=$("reposition.popups"),Kf=$("mouse.released"),sv=Vc([oe("isExtraPart",Te),nc("fireEventInstead",[oe("event",Zi())])]),cg=e=>{const t=tc("Dismissal",sv,e);return{[wi()]:{schema:Vc([Ce("target")]),onReceive:(n,o)=>{Hn.isOpen(n)&&(Hn.isPartOf(n,o.target)||t.isExtraPart(n,o.target)||t.fireEventInstead.fold(()=>Hn.close(n),a=>to(n,a.event)))}}}},mS=Vc([nc("fireEventInstead",[oe("event",d0())]),ta("doReposition")]),nm=e=>{const t=tc("Reposition",mS,e);return{[tm()]:{onReceive:n=>{Hn.isOpen(n)&&t.fireEventInstead.fold(()=>t.doReposition(n),o=>to(n,o.event))}}}},_h=(e,t,n)=>{t.store.manager.onLoad(e,t,n)},rv=(e,t,n)=>{t.store.manager.onUnload(e,t,n)};var om=Object.freeze({__proto__:null,onLoad:_h,onUnload:rv,setValue:(e,t,n,o)=>{t.store.manager.setValue(e,t,n,o)},getValue:(e,t,n)=>t.store.manager.getValue(e,t,n),getState:(e,t,n)=>n}),Mh=Object.freeze({__proto__:null,events:(e,t)=>{const n=e.resetOnDom?[Go((o,r)=>{_h(o,e,t)}),zl((o,r)=>{rv(o,e,t)})]:[pf(e,t,_h)];return Io(n)}});const Ju=()=>{const e=m(null),t=()=>({mode:"memory",value:e.get()}),n=()=>e.get()===null,o=()=>{e.set(null)};return Zc({set:e.set,get:e.get,isNotSet:n,clear:o,readState:t})},pS=()=>Zc({readState:se}),av=()=>{const e=m({}),t=m({});return Zc({readState:()=>({mode:"dataset",dataByValue:e.get(),dataByText:t.get()}),lookup:i=>Xe(e.get(),i).orThunk(()=>Xe(t.get(),i)),update:i=>{const d=e.get(),g=t.get(),b={},w={};Ve(i,x=>{b[x.value]=x,Xe(x,"meta").each(k=>{Xe(k,"text").each(A=>{w[A]=x})})}),e.set({...d,...b}),t.set({...g,...w})},clear:()=>{e.set({}),t.set({})}})};var fS=Object.freeze({__proto__:null,memory:Ju,dataset:av,manual:pS,init:e=>e.store.manager.state(e)});const ag=(e,t,n,o)=>{const r=t.store;n.update([o]),r.setValue(e,o),t.onSetValue(e,o)},bS=(e,t,n)=>{const o=t.store,r=o.getDataKey(e);return n.lookup(r).getOrThunk(()=>o.getFallbackEntry(r))},vS=(e,t,n)=>{t.store.initialValue.each(r=>{ag(e,t,n,r)})},yS=(e,t,n)=>{n.clear()};var wS=[oo("initialValue"),Ce("getFallbackEntry"),Ce("getDataKey"),Ce("setValue"),zo("manager",{setValue:ag,getValue:bS,onLoad:vS,onUnload:yS,state:av})];const SS=(e,t,n)=>t.store.getValue(e),xS=(e,t,n,o)=>{t.store.setValue(e,o),t.onSetValue(e,o)},CS=(e,t,n)=>{t.store.initialValue.each(o=>{t.store.setValue(e,o)})};var sm=[Ce("getValue"),oe("setValue",se),oo("initialValue"),zo("manager",{setValue:xS,getValue:SS,onLoad:CS,onUnload:se,state:Ya.init})];const TS=(e,t,n,o)=>{n.set(o),t.onSetValue(e,o)},kS=(e,t,n)=>n.get(),ES=(e,t,n)=>{t.store.initialValue.each(o=>{n.isNotSet()&&n.set(o)})},OS=(e,t,n)=>{n.clear()};var Dh=[oo("initialValue"),zo("manager",{setValue:TS,getValue:kS,onLoad:ES,onUnload:OS,state:Ju})],AS=[oc("store",{mode:"memory"},or("mode",{memory:Dh,manual:sm,dataset:wS})),Vn("onSetValue"),oe("resetOnDom",!1)];const Ye=rr({fields:AS,name:"representing",active:Mh,apis:om,extra:{setValueFrom:(e,t)=>{const n=Ye.getValue(t);Ye.setValue(e,n)}},state:fS}),pr=(e,t)=>Bm(e,{},Ae(t,n=>Ug(n.name(),"Cannot configure "+n.name()+" for "+e)).concat([Mr("dump",We)])),$h=e=>e.dump,Ks=(e,t)=>({...He(t),...e.dump}),Ea={field:pr,augment:Ks,get:$h},Fh="placeholder",Rh=E.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Bh=e=>Cn(e,"uiType"),lv=(e,t,n,o)=>e.exists(r=>r!==n.owner)?Rh.single(!0,$(n)):Xe(o,n.name).fold(()=>{throw new Error("Unknown placeholder component: "+n.name+`
Known: [`+cn(o)+`]
Namespace: `+e.getOr("none")+`
Spec: `+JSON.stringify(n,null,2))},r=>r.replace()),iv=(e,t,n,o)=>Bh(n)&&n.uiType===Fh?lv(e,t,n,o):Rh.single(!1,$(n)),Yf=(e,t,n,o)=>iv(e,t,n,o).fold((a,i)=>{const d=Bh(n)?i(t,n.config,n.validated):i(t),g=Xe(d,"components").getOr([]),b=Me(g,w=>Yf(e,t,w,o));return[{...d,components:b}]},(a,i)=>{if(Bh(n)){const d=i(t,n.config,n.validated);return n.validated.preprocess.getOr(We)(d)}else return i(t)}),_S=(e,t,n,o)=>Me(n,r=>Yf(e,t,r,o)),uv=(e,t)=>{let n=!1;const o=()=>n,r=()=>{if(n)throw new Error("Trying to use the same placeholder more than once: "+e);return n=!0,t},a=()=>t.fold((i,d)=>i,(i,d)=>i);return{name:$(e),required:a,used:o,replace:r}},MS=(e,t,n,o)=>{const r=an(o,(i,d)=>uv(d,i)),a=_S(e,t,n,r);return en(r,i=>{if(i.used()===!1&&i.required())throw new Error("Placeholder: "+i.name()+` was not found in components list
Namespace: `+e.getOr("none")+`
Components: `+JSON.stringify(t.components,null,2))}),a},Xf=Rh.single,DS=Rh.multiple,dv=$(Fh),Ih=E.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),rm=oe("factory",{sketch:We}),Yi=oe("schema",[]),Hh=Ce("name"),Ph=ur("pname","pname",ml(e=>"<alloy."+et(e.name)+">"),ec()),Jf=Mr("schema",()=>[oo("preprocess")]),Lh=oe("defaults",$({})),Nh=oe("overrides",$({})),Qf=xt([rm,Yi,Hh,Ph,Lh,Nh]),$S=xt([rm,Yi,Hh,Lh,Nh]),FS=xt([rm,Yi,Hh,Ph,Lh,Nh]),Vh=xt([rm,Jf,Hh,Ce("unit"),Ph,Lh,Nh]),mv=e=>e.fold(v.some,v.none,v.some,v.some),gv=e=>{const t=n=>n.name;return e.fold(t,t,t,t)},RS=e=>e.fold(We,We,We,We),Ja=(e,t)=>n=>{const o=tc("Converting part type",t,n);return e(o)},Wr=Ja(Ih.required,Qf),Qa=Ja(Ih.external,$S),jc=Ja(Ih.optional,FS),zh=Ja(Ih.group,Vh),e1=$("entirety");var BS=Object.freeze({__proto__:null,required:Wr,external:Qa,optional:jc,group:zh,asNamedPart:mv,name:gv,asCommon:RS,original:e1});const hv=(e,t,n,o)=>vo(t.defaults(e,n,o),n,{uid:e.partUids[t.name]},t.overrides(e,n,o)),IC=(e,t,n)=>{const o={},r={};return Ve(n,a=>{a.fold(i=>{o[i.pname]=Xf(!0,(d,g,b)=>i.factory.sketch(hv(d,i,g,b)))},i=>{const d=t.parts[i.name];r[i.name]=$(i.factory.sketch(hv(t,i,d[e1()]),d))},i=>{o[i.pname]=Xf(!1,(d,g,b)=>i.factory.sketch(hv(d,i,g,b)))},i=>{o[i.pname]=DS(!0,(d,g,b)=>{const w=d[i.name];return Ae(w,x=>i.factory.sketch(vo(i.defaults(d,x,b),x,i.overrides(d,x))))})})}),{internals:$(o),externals:$(r)}},t1=(e,t)=>{const n={};return Ve(t,o=>{mv(o).each(r=>{const a=IS(e,r.pname);n[r.name]=i=>{const d=tc("Part: "+r.name+" in "+e,xt(r.schema),i);return{...a,config:i,validated:d}}})}),n},IS=(e,t)=>({uiType:dv(),owner:e,name:t}),n1=(e,t,n)=>({uiType:dv(),owner:e,name:t,config:n,validated:{}}),pv=e=>Me(e,t=>t.fold(v.none,v.some,v.none,v.none).map(n=>Nl(n.name,n.schema.concat([of(e1())]))).toArray()),fv=e=>Ae(e,gv),o1=(e,t,n)=>IC(e,t,n),s1=(e,t,n)=>MS(v.some(e),t,t.components,n),Ao=(e,t,n)=>{const o=t.partUids[n];return e.getSystem().getByUid(o).toOptional()},Xi=(e,t,n)=>Ao(e,t,n).getOrDie("Could not find part: "+n),bv=(e,t,n)=>{const o={},r=t.partUids,a=e.getSystem();return Ve(n,i=>{o[i]=$(a.getByUid(r[i]))}),o},r1=(e,t)=>{const n=e.getSystem();return an(t.partUids,(o,r)=>$(n.getByUid(o)))},vv=e=>cn(e.partUids),c1=(e,t,n)=>{const o={},r=t.partUids,a=e.getSystem();return Ve(n,i=>{o[i]=$(a.getByUid(r[i]).getOrDie())}),o},yv=(e,t)=>{const n=fv(t);return Lt(Ae(n,o=>({key:o,value:e+"-"+o})))},a1=e=>ur("partUids","partUids",wn(t=>yv(t.uid,e)),ec());var HS=Object.freeze({__proto__:null,generate:t1,generateOne:n1,schemas:pv,names:fv,substitutes:o1,components:s1,defaultUids:yv,defaultUidsSchema:a1,getAllParts:r1,getAllPartNames:vv,getPart:Ao,getPartOrDie:Xi,getParts:bv,getPartsOrDie:c1});const cm=(e,t)=>(e.length>0?[Nl("parts",e)]:[]).concat([Ce("uid"),oe("dom",{}),oe("components",[]),of("originalSpec"),oe("debug.sketcher",{})]).concat(t),am=(e,t,n,o,r)=>{const a=cm(o,r);return tc(e+" [SpecSchema]",Vc(a.concat(t)),n)},l1=(e,t,n,o)=>{const r=Ji(o),a=am(e,t,r,[],[]);return n(a,r)},i1=(e,t,n,o,r)=>{const a=Ji(r),i=pv(n),d=a1(n),g=am(e,t,a,i,[d]),b=o1(e,g,n),w=s1(e,g,b.internals());return o(g,w,a,b.externals())},el=e=>Cn(e,"uid"),Ji=e=>el(e)?e:{...e,uid:Ld("uid")},PS=e=>e.uid!==void 0,lg=Vc([Ce("name"),Ce("factory"),Ce("configFields"),oe("apis",{}),oe("extraApis",{})]),LS=Vc([Ce("name"),Ce("factory"),Ce("configFields"),Ce("partFields"),oe("apis",{}),oe("extraApis",{})]),la=e=>{const t=tc("Sketcher for "+e.name,lg,e),n=a=>l1(t.name,t.configFields,t.factory,a),o=an(t.apis,Vm),r=an(t.extraApis,(a,i)=>Zp(a,i));return{name:t.name,configFields:t.configFields,sketch:n,...o,...r}},ac=e=>{const t=tc("Sketcher for "+e.name,LS,e),n=i=>i1(t.name,t.configFields,t.partFields,t.factory,i),o=t1(t.name,t.partFields),r=an(t.apis,Vm),a=an(t.extraApis,(i,d)=>Zp(i,d));return{name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:n,parts:o,...r,...a}},lm=e=>us("input")(e)&&$o(e,"type")!=="radio"||us("textarea")(e);var NS=Object.freeze({__proto__:null,getCurrent:(e,t,n)=>t.find(e)});const VS=[Ce("find")],Dn=rr({fields:VS,name:"composing",apis:NS}),u1=["input","button","textarea","select"],wv=(e,t,n)=>{(t.disabled()?xv:Zh)(e,t)},d1=(e,t)=>t.useNative===!0&&Sn(u1,lo(e.element)),zS=e=>F(e.element,"disabled"),ZS=e=>{Pt(e.element,"disabled","disabled")},US=e=>{P(e.element,"disabled")},WS=e=>$o(e.element,"aria-disabled")==="true",jS=e=>{Pt(e.element,"aria-disabled","true")},Sv=e=>{Pt(e.element,"aria-disabled","false")},xv=(e,t,n)=>{t.disableClass.each(r=>{Es(e.element,r)}),(d1(e,t)?ZS:jS)(e),t.onDisabled(e)},Zh=(e,t,n)=>{t.disableClass.each(r=>{ys(e.element,r)}),(d1(e,t)?US:Sv)(e),t.onEnabled(e)},Cv=(e,t)=>d1(e,t)?zS(e):WS(e);var PC=Object.freeze({__proto__:null,enable:Zh,disable:xv,isDisabled:Cv,onLoad:wv,set:(e,t,n,o)=>{(o?xv:Zh)(e,t)}}),GS=Object.freeze({__proto__:null,exhibit:(e,t)=>Uc({classes:t.disabled()?t.disableClass.toArray():[]}),events:(e,t)=>Io([p0(zc(),(n,o)=>Cv(n,e)),pf(e,t,wv)])}),qS=[Is("disabled",Te),oe("useNative",!0),oo("disableClass"),Vn("onDisabled"),Vn("onEnabled")];const Dt=rr({fields:qS,name:"disabling",active:GS,apis:PC}),ig=(e,t,n,o)=>{const r=vc(e.element,"."+t.highlightClass);Ve(r,a=>{Kn(o,d=>Qn(d.element,a))||(ys(a,t.highlightClass),e.getSystem().getByDom(a).each(d=>{t.onDehighlight(e,d),to(d,Bp())}))})},KS=(e,t,n)=>ig(e,t,n,[]),YS=(e,t,n,o)=>{Uh(e,t,n,o)&&(ys(o.element,t.highlightClass),t.onDehighlight(e,o),to(o,Bp()))},ug=(e,t,n,o)=>{ig(e,t,n,[o]),Uh(e,t,n,o)||(Es(o.element,t.highlightClass),t.onHighlight(e,o),to(o,Rp()))},XS=(e,t,n)=>{Wh(e,t).each(o=>{ug(e,t,n,o)})},m1=(e,t,n)=>{g1(e,t).each(o=>{ug(e,t,n,o)})},Tv=(e,t,n,o)=>{QS(e,t,n,o).fold(r=>{throw r},r=>{ug(e,t,n,r)})},kv=(e,t,n,o)=>{const r=jh(e,t);Q(r,o).each(i=>{ug(e,t,n,i)})},Uh=(e,t,n,o)=>Tc(o.element,t.highlightClass),JS=(e,t,n)=>As(e.element,"."+t.highlightClass).bind(o=>e.getSystem().getByDom(o).toOptional()),QS=(e,t,n,o)=>{const r=vc(e.element,"."+t.itemClass);return v.from(r[o]).fold(()=>mn.error(new Error("No element found with index "+o)),e.getSystem().getByDom)},Wh=(e,t,n)=>As(e.element,"."+t.itemClass).bind(o=>e.getSystem().getByDom(o).toOptional()),g1=(e,t,n)=>{const o=vc(e.element,"."+t.itemClass);return(o.length>0?v.some(o[o.length-1]):v.none()).bind(a=>e.getSystem().getByDom(a).toOptional())},Ev=(e,t,n,o)=>{const r=vc(e.element,"."+t.itemClass);return ne(r,i=>Tc(i,t.highlightClass)).bind(i=>{const d=Wd(i,o,0,r.length-1);return e.getSystem().getByDom(r[d]).toOptional()})},ex=(e,t,n)=>Ev(e,t,n,-1),tx=(e,t,n)=>Ev(e,t,n,1),jh=(e,t,n)=>{const o=vc(e.element,"."+t.itemClass);return is(Ae(o,r=>e.getSystem().getByDom(r).toOptional()))};var Ov=Object.freeze({__proto__:null,dehighlightAll:KS,dehighlight:YS,highlight:ug,highlightFirst:XS,highlightLast:m1,highlightAt:Tv,highlightBy:kv,isHighlighted:Uh,getHighlighted:JS,getFirst:Wh,getLast:g1,getPrevious:ex,getNext:tx,getCandidates:jh}),nx=[Ce("highlightClass"),Ce("itemClass"),Vn("onHighlight"),Vn("onDehighlight")];const no=rr({fields:nx,name:"highlighting",apis:Ov}),ox=[8],Si=[9],ql=[13],Gh=[27],ia=[32],qh=[37],Kh=[38],h1=[39],dg=[40],Av=(e,t,n)=>{const o=un(e.slice(0,t)),r=un(e.slice(t+1));return Q(o.concat(r),n)},sx=(e,t,n)=>{const o=un(e.slice(0,t));return Q(o,n)},rx=(e,t,n)=>{const o=e.slice(0,t),r=e.slice(t+1);return Q(r.concat(o),n)},cx=(e,t,n)=>{const o=e.slice(t+1);return Q(o,n)},$n=e=>t=>{const n=t.raw;return Sn(e,n.which)},Oa=e=>t=>Pe(e,n=>n(t)),Qu=e=>e.raw.shiftKey===!0,ax=e=>e.raw.ctrlKey===!0,mg=mt(Qu),jn=(e,t)=>({matches:e,classification:t}),lx=(e,t)=>Q(e,o=>o.matches(t)).map(o=>o.classification),_v=(e,t,n)=>{t.exists(r=>n.exists(a=>Qn(a,r)))||yt(e,Yg(),{prevFocus:t,newFocus:n})},s=()=>{const e=n=>bl(n.element);return{get:e,set:(n,o)=>{const r=e(n);n.getSystem().triggerFocus(o,n.element);const a=e(n);_v(n,r,a)}}},c=()=>{const e=n=>no.getHighlighted(n).map(o=>o.element);return{get:e,set:(n,o)=>{const r=e(n);n.getSystem().getByDom(o).fold(se,i=>{no.highlight(n,i)});const a=e(n);_v(n,r,a)}}};var l;(function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"})(l||(l={}));const u=(e,t,n,o,r)=>{const a=()=>e.concat([oe("focusManager",s()),oc("focusInside","onFocus",Ll(b=>Sn(["onFocus","onEnterOrSpace","onApi"],b)?mn.value(b):mn.error("Invalid value for focusInside"))),zo("handler",g),zo("state",t),zo("sendFocusIn",r)]),i=(b,w,x,k,A)=>{const B=x(b,w,k,A);return lx(B,w.event).bind(Z=>Z(b,w,k,A))},g={schema:a,processKey:i,toEvents:(b,w)=>{const x=b.focusInside!==l.OnFocusMode?v.none():r(b).map(B=>xe(pl(),(Z,re)=>{B(Z,b,w),re.stop()})),k=(B,Z)=>{const re=$n(ia.concat(ql))(Z.event);b.focusInside===l.OnEnterOrSpaceMode&&re&&hl(B,Z)&&r(b).each(J=>{J(B,b,w),Z.stop()})},A=[xe(Ga(),(B,Z)=>{i(B,Z,n,b,w).fold(()=>{k(B,Z)},re=>{Z.stop()})}),xe(ay(),(B,Z)=>{i(B,Z,o,b,w).each(re=>{Z.stop()})})];return Io(x.toArray().concat(A))}};return g},p=e=>{const t=[oo("onEscape"),oo("onEnter"),oe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),oe("firstTabstop",0),oe("useTabstopAt",gt),oo("visibilitySelector")].concat([e]),n=(J,K)=>{const ce=J.visibilitySelector.bind(ke=>fl(K,ke)).getOr(K);return Ro(ce)>0},o=(J,K)=>{const ce=vc(J.element,K.selector),ke=Xt(ce,be=>n(K,be));return v.from(ke[K.firstTabstop])},r=(J,K)=>K.focusManager.get(J).bind(ce=>fl(ce,K.selector)),a=(J,K)=>n(J,K)&&J.useTabstopAt(K),i=(J,K,ce)=>{o(J,K).each(ke=>{K.focusManager.set(J,ke)})},d=(J,K,ce,ke,be)=>be(K,ce,he=>a(ke,he)).fold(()=>ke.cyclic?v.some(!0):v.none(),he=>(ke.focusManager.set(J,he),v.some(!0))),g=(J,K,ce,ke)=>{const be=vc(J.element,ce.selector);return r(J,ce).bind(he=>ne(be,on(Qn,he)).bind(Le=>d(J,be,Le,ce,ke)))},b=(J,K,ce)=>{const ke=ce.cyclic?Av:sx;return g(J,K,ce,ke)},w=(J,K,ce)=>{const ke=ce.cyclic?rx:cx;return g(J,K,ce,ke)},x=J=>Pr(J).bind(Sc).exists(K=>Qn(K,J)),k=(J,K,ce)=>r(J,ce).filter(ke=>!ce.useTabstopAt(ke)).bind(ke=>(x(ke)?b:w)(J,K,ce)),A=(J,K,ce)=>ce.onEnter.bind(ke=>ke(J,K)),B=(J,K,ce)=>ce.onEscape.bind(ke=>ke(J,K)),Z=$([jn(Oa([Qu,$n(Si)]),b),jn($n(Si),w),jn(Oa([mg,$n(ql)]),A)]),re=$([jn($n(Gh),B),jn($n(Si),k)]);return u(t,Ya.init,Z,re,()=>v.some(i))};var y=p(Mr("cyclic",Te)),T=p(Mr("cyclic",gt));const _=(e,t,n)=>(Jg(e,n,zc()),v.some(!0)),I=(e,t,n)=>lm(n)&&$n(ia)(t.event)?v.none():_(e,t,n),W=(e,t)=>v.some(!0),te=[oe("execute",I),oe("useSpace",!1),oe("useEnter",!0),oe("useControlEnter",!1),oe("useDown",!1)],_e=(e,t,n)=>n.execute(e,t,e.element),qe=(e,t,n,o)=>{const r=n.useSpace&&!lm(e.element)?ia:[],a=n.useEnter?ql:[],i=n.useDown?dg:[],d=r.concat(a).concat(i);return[jn($n(d),_e)].concat(n.useControlEnter?[jn(Oa([ax,$n(ql)]),_e)]:[])},Ue=(e,t,n,o)=>n.useSpace&&!lm(e.element)?[jn($n(ia),W)]:[];var Se=u(te,Ya.init,qe,Ue,()=>v.none());const Ge=()=>{const e=On();return Zc({readState:()=>e.get().map(r=>({numRows:String(r.numRows),numColumns:String(r.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(r,a)=>{e.set({numRows:r,numColumns:a})},getNumRows:()=>e.get().map(r=>r.numRows),getNumColumns:()=>e.get().map(r=>r.numColumns)})};var lt=Object.freeze({__proto__:null,flatgrid:Ge,init:e=>e.state(e)});const Ut=e=>(t,n,o,r)=>{const a=e(t.element);return _s(a,t,n,o,r)},ln=(e,t)=>{const n=bh(e,t);return Ut(n)},Jo=(e,t)=>{const n=bh(t,e);return Ut(n)},cr=e=>(t,n,o,r)=>_s(e,t,n,o,r),_s=(e,t,n,o,r)=>o.focusManager.get(t).bind(i=>e(t.element,i,o,r)).map(i=>(o.focusManager.set(t,i),!0)),Mc=cr,ed=cr,im=cr,Mv=e=>e.offsetWidth<=0&&e.offsetHeight<=0,Yh=e=>!Mv(e.dom),_o=(e,t)=>ne(e,t).map(n=>({index:n,candidates:e})),lc=(e,t,n)=>{const o=i=>Qn(i,t),r=vc(e,n),a=Xt(r,Yh);return _o(a,o)},ic=(e,t)=>ne(e,n=>Qn(t,n)),Aa=(e,t,n,o)=>{const r=Math.floor(t/n),a=t%n;return o(r,a).bind(i=>{const d=i.row*n+i.column;return d>=0&&d<e.length?v.some(e[d]):v.none()})},ua=(e,t,n,o,r)=>Aa(e,t,o,(a,i)=>{const g=a===n-1?e.length-a*o:o,b=Wd(i,r,0,g-1);return v.some({row:a,column:b})}),td=(e,t,n,o,r)=>Aa(e,t,o,(a,i)=>{const d=Wd(a,r,0,n-1),b=d===n-1?e.length-d*o:o,w=ca(i,0,b-1);return v.some({row:d,column:w})}),yc=(e,t,n,o)=>ua(e,t,n,o,1),p1=(e,t,n,o)=>ua(e,t,n,o,-1),gg=(e,t,n,o)=>td(e,t,n,o,-1),Kl=(e,t,n,o)=>td(e,t,n,o,1),jr=[Ce("selector"),oe("execute",I),Wc("onEscape"),oe("captureTab",!1),J0()],ix=(e,t,n)=>{As(e.element,t.selector).each(o=>{t.focusManager.set(e,o)})},ux=(e,t)=>t.focusManager.get(e).bind(n=>fl(n,t.selector)),dx=(e,t,n,o)=>ux(e,n).bind(r=>n.execute(e,t,r)),Xh=e=>(t,n,o,r)=>lc(t,n,o.selector).bind(a=>e(a.candidates,a.index,r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns))),Dv=(e,t,n)=>n.captureTab?v.some(!0):v.none(),f1=(e,t,n)=>n.onEscape(e,t),$v=Xh(p1),um=Xh(yc),EM=Xh(gg),OM=Xh(Kl),AM=$([jn($n(qh),ln($v,um)),jn($n(h1),Jo($v,um)),jn($n(Kh),Mc(EM)),jn($n(dg),ed(OM)),jn(Oa([Qu,$n(Si)]),Dv),jn(Oa([mg,$n(Si)]),Dv),jn($n(ia.concat(ql)),dx)]),_M=$([jn($n(Gh),f1),jn($n(ia),W)]);var MM=u(jr,Ge,AM,_M,()=>v.some(ix));const LC=(e,t,n,o,r)=>{const a=d=>lo(d)==="button"&&$o(d,"disabled")==="disabled",i=(d,g,b)=>r(d,g,o,0,b.length-1,b[g],w=>a(b[w])?i(d,w,b):v.from(b[w]));return lc(e,n,t).bind(d=>{const g=d.index,b=d.candidates;return i(g,g,b)})},NC=(e,t,n,o)=>LC(e,t,n,o,(r,a,i,d,g,b,w)=>{const x=ca(a+i,d,g);return x===r?v.from(b):w(x)}),Fv=(e,t,n,o)=>LC(e,t,n,o,(r,a,i,d,g,b,w)=>{const x=Wd(a,i,d,g);return x===r?v.none():w(x)}),DM=[Ce("selector"),oe("getInitial",v.none),oe("execute",I),Wc("onEscape"),oe("executeOnMove",!1),oe("allowVertical",!0),oe("allowHorizontal",!0),oe("cycles",!0)],$M=(e,t)=>t.focusManager.get(e).bind(n=>fl(n,t.selector)),mx=(e,t,n)=>$M(e,n).bind(o=>n.execute(e,t,o)),FM=(e,t,n)=>{t.getInitial(e).orThunk(()=>As(e.element,t.selector)).each(o=>{t.focusManager.set(e,o)})},VC=(e,t,n)=>(n.cycles?Fv:NC)(e,n.selector,t,-1),zC=(e,t,n)=>(n.cycles?Fv:NC)(e,n.selector,t,1),ZC=e=>(t,n,o,r)=>e(t,n,o,r).bind(()=>o.executeOnMove?mx(t,n,o):v.some(!0)),RM=(e,t,n)=>n.onEscape(e,t),BM=(e,t,n,o)=>{const r=[...n.allowHorizontal?qh:[]].concat(n.allowVertical?Kh:[]),a=[...n.allowHorizontal?h1:[]].concat(n.allowVertical?dg:[]);return[jn($n(r),ZC(ln(VC,zC))),jn($n(a),ZC(Jo(VC,zC))),jn($n(ql),mx),jn($n(ia),mx)]},IM=$([jn($n(ia),W),jn($n(Gh),RM)]);var HM=u(DM,Ya.init,BM,IM,()=>v.some(FM));const Rv=(e,t,n)=>v.from(e[t]).bind(o=>v.from(o[n]).map(r=>({rowIndex:t,columnIndex:n,cell:r}))),UC=(e,t,n,o)=>{const a=e[t].length,i=Wd(n,o,0,a-1);return Rv(e,t,i)},WC=(e,t,n,o)=>{const r=Wd(n,o,0,e.length-1),a=e[r].length,i=ca(t,0,a-1);return Rv(e,r,i)},jC=(e,t,n,o)=>{const a=e[t].length,i=ca(n+o,0,a-1);return Rv(e,t,i)},GC=(e,t,n,o)=>{const r=ca(n+o,0,e.length-1),a=e[r].length,i=ca(t,0,a-1);return Rv(e,r,i)},PM=(e,t,n)=>UC(e,t,n,1),LM=(e,t,n)=>UC(e,t,n,-1),NM=(e,t,n)=>WC(e,n,t,-1),VM=(e,t,n)=>WC(e,n,t,1),zM=(e,t,n)=>jC(e,t,n,-1),ZM=(e,t,n)=>jC(e,t,n,1),UM=(e,t,n)=>GC(e,n,t,-1),WM=(e,t,n)=>GC(e,n,t,1),jM=[Nl("selectors",[Ce("row"),Ce("cell")]),oe("cycles",!0),oe("previousSelector",v.none),oe("execute",I)],GM=(e,t,n)=>{t.previousSelector(e).orThunk(()=>{const r=t.selectors;return As(e.element,r.cell)}).each(r=>{t.focusManager.set(e,r)})},qM=(e,t,n)=>bl(e.element).bind(o=>n.execute(e,t,o)),KM=(e,t)=>Ae(e,n=>vc(n,t.selectors.cell)),Bv=(e,t)=>(n,o,r)=>{const a=r.cycles?e:t;return fl(o,r.selectors.row).bind(i=>{const d=vc(i,r.selectors.cell);return ic(d,o).bind(g=>{const b=vc(n,r.selectors.row);return ic(b,i).bind(w=>{const x=KM(b,r);return a(x,w,g).map(k=>k.cell)})})})},qC=Bv(LM,zM),KC=Bv(PM,ZM),YM=Bv(NM,UM),XM=Bv(VM,WM),JM=$([jn($n(qh),ln(qC,KC)),jn($n(h1),Jo(qC,KC)),jn($n(Kh),Mc(YM)),jn($n(dg),ed(XM)),jn($n(ia.concat(ql)),qM)]),QM=$([jn($n(ia),W)]);var e8=u(jM,Ya.init,JM,QM,()=>v.some(GM));const t8=[Ce("selector"),oe("execute",I),oe("moveOnTab",!1)],YC=(e,t,n)=>n.focusManager.get(e).bind(o=>n.execute(e,t,o)),n8=(e,t,n)=>{As(e.element,t.selector).each(o=>{t.focusManager.set(e,o)})},XC=(e,t,n)=>Fv(e,n.selector,t,-1),JC=(e,t,n)=>Fv(e,n.selector,t,1),o8=(e,t,n,o)=>n.moveOnTab?im(XC)(e,t,n,o):v.none(),s8=(e,t,n,o)=>n.moveOnTab?im(JC)(e,t,n,o):v.none(),r8=$([jn($n(Kh),im(XC)),jn($n(dg),im(JC)),jn(Oa([Qu,$n(Si)]),o8),jn(Oa([mg,$n(Si)]),s8),jn($n(ql),YC),jn($n(ia),YC)]),c8=$([jn($n(ia),W)]);var a8=u(t8,Ya.init,r8,c8,()=>v.some(n8));const l8=[Wc("onSpace"),Wc("onEnter"),Wc("onShiftEnter"),Wc("onLeft"),Wc("onRight"),Wc("onTab"),Wc("onShiftTab"),Wc("onUp"),Wc("onDown"),Wc("onEscape"),oe("stopSpaceKeyup",!1),oo("focusIn")],i8=(e,t,n)=>[jn($n(ia),n.onSpace),jn(Oa([mg,$n(ql)]),n.onEnter),jn(Oa([Qu,$n(ql)]),n.onShiftEnter),jn(Oa([Qu,$n(Si)]),n.onShiftTab),jn(Oa([mg,$n(Si)]),n.onTab),jn($n(Kh),n.onUp),jn($n(dg),n.onDown),jn($n(qh),n.onLeft),jn($n(h1),n.onRight),jn($n(ia),n.onSpace)],u8=(e,t,n)=>[...n.stopSpaceKeyup?[jn($n(ia),W)]:[],jn($n(Gh),n.onEscape)];var d8=u(l8,Ya.init,i8,u8,e=>e.focusIn);const m8=y.schema(),g8=T.schema(),h8=HM.schema(),p8=MM.schema(),f8=e8.schema(),b8=Se.schema(),v8=a8.schema(),y8=d8.schema();var w8=Object.freeze({__proto__:null,acyclic:m8,cyclic:g8,flow:h8,flatgrid:p8,matrix:f8,execution:b8,menu:v8,special:y8});const S8=e=>Ko(e,"setGridSize"),St=bf({branchKey:"mode",branches:w8,name:"keying",active:{events:(e,t)=>e.handler.toEvents(e,t)},apis:{focusIn:(e,t,n)=>{t.sendFocusIn(t).fold(()=>{e.getSystem().triggerFocus(e.element,e.element)},o=>{o(e,t,n)})},setGridSize:(e,t,n,o,r)=>{S8(n)?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:lt}),QC=(e,t)=>{vf(()=>{nS(e,t,()=>Ae(t,e.getSystem().build))},e.element)},eT=(e,t)=>{vf(()=>{oS(e,t,()=>Fy(e.element,t,e.getSystem().buildOrPatch))},e.element)},x8=(e,t,n,o)=>{em(t);const r=Kp(e.element,n,o,e.getSystem().buildOrPatch);Yb(e,r),e.syncComponents()},gx=(e,t,n)=>{const o=e.getSystem().build(n);rg(e,o,t)},C8=(e,t,n,o)=>{Gl(t),gx(e,(r,a)=>pu(r,a,n),o)},T8=(e,t,n,o)=>(t.reuseDom?eT:QC)(e,o),k8=(e,t,n,o)=>{gx(e,Ar,o)},E8=(e,t,n,o)=>{gx(e,yd,o)},O8=(e,t,n,o)=>{const r=Iv(e);Q(r,i=>Qn(o.element,i.element)).each(Gl)},Iv=(e,t)=>e.components(),tT=(e,t,n,o,r)=>{const a=Iv(e);return v.from(a[o]).map(i=>(r.fold(()=>Gl(i),d=>{(t.reuseDom?x8:C8)(e,i,o,d)}),i))};var A8=Object.freeze({__proto__:null,append:k8,prepend:E8,remove:O8,replaceAt:tT,replaceBy:(e,t,n,o,r)=>{const a=Iv(e);return ne(a,o).bind(i=>tT(e,t,n,i,r))},set:T8,contents:Iv});const Kt=rr({fields:[mr("reuseDom",!0)],name:"replacing",apis:A8}),_8=(e,t)=>{const n=Io(t);return rr({fields:[Ce("enabled")],name:e,active:{events:$(n)}})},nn=(e,t)=>{const n=_8(e,t);return{key:e,value:{config:{},me:n,configAsRaw:$({}),initialConfig:{},state:Ya}}},nT=(e,t)=>{t.ignore||(aa(e.element),t.onFocus(e))};var M8=Object.freeze({__proto__:null,focus:nT,blur:(e,t)=>{t.ignore||Gd(e.element)},isFocused:e=>Km(e.element)}),D8=Object.freeze({__proto__:null,exhibit:(e,t)=>{const n=t.ignore?{}:{attributes:{tabindex:"-1"}};return Uc(n)},events:e=>Io([xe(pl(),(t,n)=>{nT(t,e),n.stop()})].concat(e.stopMousedown?[xe(ls(),(t,n)=>{n.event.prevent()})]:[]))}),$8=[Vn("onFocus"),oe("stopMousedown",!1),oe("ignore",!1)];const Ht=rr({fields:$8,name:"focusing",active:D8,apis:M8}),F8=e=>({init:()=>{const n=m(e);return{get:()=>n.get(),set:d=>n.set(d),clear:()=>n.set(e),readState:()=>n.get()}}}),R8=(e,t,n)=>{const o=t.aria;o.update(e,o,n.get())},B8=(e,t,n)=>{t.toggleClass.each(o=>{n.get()?Es(e.element,o):ys(e.element,o)})},b1=(e,t,n,o)=>{const r=n.get();n.set(o),B8(e,t,n),R8(e,t,n),r!==o&&t.onToggled(e,o)},oT=(e,t,n)=>{b1(e,t,n,!n.get())},I8=(e,t,n)=>{b1(e,t,n,!0)},H8=(e,t,n)=>{b1(e,t,n,!1)},P8=(e,t,n)=>n.get(),sT=(e,t,n)=>{b1(e,t,n,t.selected)};var L8=Object.freeze({__proto__:null,onLoad:sT,toggle:oT,isOn:P8,on:I8,off:H8,set:b1}),N8=Object.freeze({__proto__:null,exhibit:()=>Uc({}),events:(e,t)=>{const n=hh(e,t,oT),o=pf(e,t,sT);return Io(ie([e.toggleOnExecute?[n]:[],[o]]))}});const V8=(e,t,n)=>{Pt(e.element,"aria-pressed",n),t.syncWithExpanded&&rT(e,t,n)},z8=(e,t,n)=>{Pt(e.element,"aria-selected",n)},Z8=(e,t,n)=>{Pt(e.element,"aria-checked",n)},rT=(e,t,n)=>{Pt(e.element,"aria-expanded",n)};var U8=[oe("selected",!1),oo("toggleClass"),oe("toggleOnExecute",!0),Vn("onToggled"),oc("aria",{mode:"none"},or("mode",{pressed:[oe("syncWithExpanded",!1),zo("update",V8)],checked:[zo("update",Z8)],expanded:[zo("update",rT)],selected:[zo("update",z8)],none:[zo("update",se)]}))];const fn=rr({fields:U8,name:"toggling",active:N8,apis:L8,state:F8(!1)}),cT=()=>{const e=(t,n)=>{n.stop(),Hu(t)};return[xe(Li(),e),xe(Pm(),e),Pu(ja()),Pu(ls())]},Hv=e=>{const t=n=>qa((o,r)=>{n(o),r.stop()});return Io(ie([e.map(t).toArray(),cT()]))},aT="alloy.item-hover",lT="alloy.item-focus",iT="alloy.item-toggled",uT=e=>{(bl(e.element).isNone()||Ht.isFocused(e))&&(Ht.isFocused(e)||Ht.focus(e),yt(e,aT,{item:e}))},dT=e=>{yt(e,lT,{item:e})},W8=(e,t)=>{yt(e,iT,{item:e,state:t})},mT=$(aT),j8=$(lT),G8=$(iT),q8=e=>e.toggling.map(t=>t.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),K8=e=>({aria:{mode:"checked"},...ws(e,(t,n)=>n!=="exclusive"),onToggled:(t,n)=>{Re(e.onToggled)&&e.onToggled(t,n),W8(t,n)}}),Y8=e=>({dom:e.dom,domModification:{...e.domModification,attributes:{role:q8(e),...e.domModification.attributes,"aria-haspopup":e.hasSubmenu,...e.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Ea.augment(e.itemBehaviours,[e.toggling.fold(fn.revoke,t=>fn.config(K8(t))),Ht.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:t=>{dT(t)}}),St.config({mode:"execution"}),Ye.config({store:{mode:"memory",initialValue:e.data}}),nn("item-type-events",[...cT(),xe(oa(),uT),xe(Hm(),Ht.focus)])]),components:e.components,eventOrder:e.eventOrder}),X8=[Ce("data"),Ce("components"),Ce("dom"),oe("hasSubmenu",!1),oo("toggling"),Ea.field("itemBehaviours",[fn,Ht,St,Ye]),oe("ignoreFocus",!1),oe("domModification",{}),zo("builder",Y8),oe("eventOrder",{})],J8=e=>({dom:e.dom,components:e.components,events:Io([gy(Hm())])}),Q8=[Ce("dom"),Ce("components"),zo("builder",J8)],hx=$("item-widget"),px=$([Wr({name:"widget",overrides:e=>({behaviours:He([Ye.config({store:{mode:"manual",getValue:t=>e.data,setValue:se}})])})})]),e7=e=>{const t=o1(hx(),e,px()),n=s1(hx(),e,t.internals()),o=a=>Ao(a,e,"widget").map(i=>(St.focusIn(i),i)),r=(a,i)=>lm(i.event.target)?v.none():(e.autofocus&&i.setSource(a.element),v.none());return{dom:e.dom,components:n,domModification:e.domModification,events:Io([qa((a,i)=>{o(a).each(d=>{i.stop()})}),xe(oa(),uT),xe(Hm(),(a,i)=>{e.autofocus?o(a):Ht.focus(a)})]),behaviours:Ea.augment(e.widgetBehaviours,[Ye.config({store:{mode:"memory",initialValue:e.data}}),Ht.config({ignore:e.ignoreFocus,onFocus:a=>{dT(a)}}),St.config({mode:"special",focusIn:e.autofocus?a=>{o(a)}:ub(),onLeft:r,onRight:r,onEscape:(a,i)=>!Ht.isFocused(a)&&!e.autofocus?(Ht.focus(a),v.some(!0)):(e.autofocus&&i.setSource(a.element),v.none())})])}},t7=[Ce("uid"),Ce("data"),Ce("components"),Ce("dom"),oe("autofocus",!1),oe("ignoreFocus",!1),Ea.field("widgetBehaviours",[Ye,Ht,St]),oe("domModification",{}),a1(px()),zo("builder",e7)],n7=or("type",{widget:t7,item:X8,separator:Q8}),o7=(e,t)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}),s7=(e,t)=>({mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},previousSelector:t.previousSelector,focusManager:e.focusManager}),r7=(e,t)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}),c7=$([zh({factory:{sketch:e=>{const t=tc("menu.spec item",n7,e);return t.builder(t)}},name:"items",unit:"item",defaults:(e,t)=>Cn(t,"uid")?t:{...t,uid:Ld("item")},overrides:(e,t)=>({type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),a7=$([Ce("value"),Ce("items"),Ce("dom"),Ce("components"),oe("eventOrder",{}),pr("menuBehaviours",[no,Ye,Dn,St]),oc("movement",{mode:"menu",moveOnTab:!0},or("mode",{grid:[J0(),zo("config",o7)],matrix:[zo("config",s7),Ce("rowSelector"),oe("previousSelector",v.none)],menu:[oe("moveOnTab",!0),zo("config",r7)]})),jy(),oe("fakeFocus",!1),oe("focusManager",s()),Vn("onHighlight"),Vn("onDehighlight")]),gT=$("alloy.menu-focus"),l7=(e,t)=>{const n=vc(e.element,'[role="menuitemradio"][aria-checked="true"]');Ve(n,o=>{Qn(o,t.element)||e.getSystem().getByDom(o).each(r=>{fn.off(r)})})},i7=(e,t,n,o)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Ks(e.menuBehaviours,[no.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight,onDehighlight:e.onDehighlight}),Ye.config({store:{mode:"memory",initialValue:e.value}}),Dn.config({find:v.some}),St.config(e.movement.config(e,e.movement))]),events:Io([xe(j8(),(r,a)=>{const i=a.event;r.getSystem().getByDom(i.target).each(d=>{no.highlight(r,d),a.stop(),yt(r,gT(),{menu:r,item:d})})}),xe(mT(),(r,a)=>{const i=a.event.item;no.highlight(r,i)}),xe(G8(),(r,a)=>{const{item:i,state:d}=a.event;d&&$o(i.element,"role")==="menuitemradio"&&l7(r,i)})]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}}),hg=ac({name:"Menu",configFields:a7(),partFields:c7(),factory:i7}),u7=e=>_n(e,(t,n)=>({k:t,v:n})),hT=(e,t,n,o)=>Xe(n,o).bind(r=>Xe(e,r).bind(a=>{const i=hT(e,t,n,a);return v.some([a].concat(i))})).getOr([]),d7=(e,t)=>{const n={};en(e,(i,d)=>{Ve(i,g=>{n[g]=d})});const o=t,r=u7(t),a=an(r,(i,d)=>[d].concat(hT(n,o,r,d)));return an(n,i=>Xe(a,i).getOr([i]))},m7=()=>{const e=m({}),t=m({}),n=m({}),o=On(),r=m({}),a=()=>{e.set({}),t.set({}),n.set({}),o.clear()},i=()=>o.get().isNone(),d=(be,he)=>{t.set({...t.get(),[be]:{type:"prepared",menu:he}})},g=(be,he,Be,Le)=>{o.set(be),e.set(Be),t.set(he),r.set(Le);const Qt=d7(Le,Be);n.set(Qt)},b=be=>ns(e.get(),(he,Be)=>he===be),w=(be,he,Be)=>Z(be).bind(Le=>b(be).bind(Qt=>he(Qt).map(at=>({triggeredMenu:Le,triggeringItem:at,triggeringPath:Be})))),x=(be,he)=>{const Be=Xt(J(be).toArray(),Le=>Z(Le).isSome());return Xe(n.get(),be).bind(Le=>{const Qt=un(Be.concat(Le)),at=Me(Qt,(Ct,_t)=>w(Ct,he,Qt.slice(0,_t+1)).fold(()=>Ds(o.get(),Ct)?[]:[v.none()],so=>[v.some(so)]));return co(at)})},k=be=>Xe(e.get(),be).map(he=>{const Be=Xe(n.get(),be).getOr([]);return[he].concat(Be)}),A=be=>Xe(n.get(),be).bind(he=>he.length>1?v.some(he.slice(1)):v.none()),B=be=>Xe(n.get(),be),Z=be=>re(be).bind(pT),re=be=>Xe(t.get(),be),J=be=>Xe(e.get(),be);return{setMenuBuilt:d,setContents:g,expand:k,refresh:B,collapse:A,lookupMenu:re,lookupItem:J,otherMenus:be=>{const he=r.get();return Wn(cn(he),be)},getPrimary:()=>o.get().bind(Z),getMenus:()=>t.get(),clear:a,isClear:i,getTriggeringPath:x}},pT=e=>e.type==="prepared"?v.some(e.menu):v.none(),fT={init:m7,extractPreparedMenu:pT},bT=et("tiered-menu-item-highlight"),vT=et("tiered-menu-item-dehighlight");var Gc;(function(e){e[e.HighlightMenuAndItem=0]="HighlightMenuAndItem",e[e.HighlightJustMenu=1]="HighlightJustMenu",e[e.HighlightNone=2]="HighlightNone"})(Gc||(Gc={}));const g7=(e,t)=>{const n=On(),o=(Ne,ct,Rt)=>an(Rt,(Tn,Tt)=>{const Wt=()=>hg.sketch({...Tn,value:Tt,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:(wo,qn)=>{yt(wo,bT,{menuComp:wo,itemComp:qn})},onDehighlight:(wo,qn)=>{yt(wo,vT,{menuComp:wo,itemComp:qn})},focusManager:e.fakeFocus?c():s()});return Tt===ct?{type:"prepared",menu:Ne.getSystem().build(Wt())}:{type:"notbuilt",nbMenu:Wt}}),r=fT.init(),a=Ne=>{const ct=o(Ne,e.data.primary,e.data.menus),Rt=g();return r.setContents(e.data.primary,ct,e.data.expansions,Rt),r.getPrimary()},i=Ne=>Ye.getValue(Ne).value,d=(Ne,ct,Rt)=>xn(ct,Tn=>{if(!Tn.getSystem().isConnected())return v.none();const Tt=no.getCandidates(Tn);return Q(Tt,Wt=>i(Wt)===Rt)}),g=Ne=>an(e.data.menus,(ct,Rt)=>Me(ct.items,Tn=>Tn.type==="separator"?[]:[Tn.data.value])),b=no.highlight,w=(Ne,ct)=>{b(Ne,ct),no.getHighlighted(ct).orThunk(()=>no.getFirst(ct)).each(Rt=>{e.fakeFocus?no.highlight(ct,Rt):Jg(Ne,Rt.element,Hm())})},x=(Ne,ct)=>is(Ae(ct,Rt=>Ne.lookupMenu(Rt).bind(Tn=>Tn.type==="prepared"?v.some(Tn.menu):v.none()))),k=(Ne,ct,Rt)=>{const Tn=x(ct,ct.otherMenus(Rt));Ve(Tn,Tt=>{sa(Tt.element,[e.markers.backgroundMenu]),e.stayInDom||Kt.remove(Ne,Tt)})},A=Ne=>n.get().getOrThunk(()=>{const ct={},Rt=vc(Ne.element,`.${e.markers.item}`),Tn=Xt(Rt,Tt=>$o(Tt,"aria-haspopup")==="true");return Ve(Tn,Tt=>{Ne.getSystem().getByDom(Tt).each(Wt=>{const wo=i(Wt);ct[wo]=Wt})}),n.set(ct),ct}),B=(Ne,ct)=>{const Rt=A(Ne);en(Rt,(Tn,Tt)=>{const Wt=Sn(ct,Tt);Pt(Tn.element,"aria-expanded",Wt)})},Z=(Ne,ct,Rt)=>v.from(Rt[0]).bind(Tn=>ct.lookupMenu(Tn).bind(Tt=>{if(Tt.type==="notbuilt")return v.none();{const Wt=Tt.menu,wo=x(ct,Rt.slice(1));return Ve(wo,qn=>{Es(qn.element,e.markers.backgroundMenu)}),Xn(Wt.element)||Kt.append(Ne,ra(Wt)),sa(Wt.element,[e.markers.backgroundMenu]),w(Ne,Wt),k(Ne,ct,Rt),v.some(Wt)}}));let re;(function(Ne){Ne[Ne.HighlightSubmenu=0]="HighlightSubmenu",Ne[Ne.HighlightParent=1]="HighlightParent"})(re||(re={}));const J=(Ne,ct,Rt)=>{if(Rt.type==="notbuilt"){const Tn=Ne.getSystem().build(Rt.nbMenu());return r.setMenuBuilt(ct,Tn),Tn}else return Rt.menu},K=(Ne,ct,Rt=re.HighlightSubmenu)=>{if(ct.hasConfigured(Dt)&&Dt.isDisabled(ct))return v.some(ct);{const Tn=i(ct);return r.expand(Tn).bind(Tt=>(B(Ne,Tt),v.from(Tt[0]).bind(Wt=>r.lookupMenu(Wt).bind(wo=>{const qn=J(Ne,Wt,wo);return Xn(qn.element)||Kt.append(Ne,ra(qn)),e.onOpenSubmenu(Ne,ct,qn,un(Tt)),Rt===re.HighlightSubmenu?(no.highlightFirst(qn),Z(Ne,r,Tt)):(no.dehighlightAll(qn),v.some(ct))}))))}},ce=(Ne,ct)=>{const Rt=i(ct);return r.collapse(Rt).bind(Tn=>(B(Ne,Tn),Z(Ne,r,Tn).map(Tt=>(e.onCollapseMenu(Ne,ct,Tt),Tt))))},ke=(Ne,ct)=>{const Rt=i(ct);return r.refresh(Rt).bind(Tn=>(B(Ne,Tn),Z(Ne,r,Tn)))},be=(Ne,ct)=>lm(ct.element)?v.none():K(Ne,ct,re.HighlightSubmenu),he=(Ne,ct)=>lm(ct.element)?v.none():ce(Ne,ct),Be=(Ne,ct)=>ce(Ne,ct).orThunk(()=>e.onEscape(Ne,ct).map(()=>Ne)),Le=Ne=>(ct,Rt)=>fl(Rt.getSource(),`.${e.markers.item}`).bind(Tn=>ct.getSystem().getByDom(Tn).toOptional().bind(Tt=>Ne(ct,Tt).map(gt))),Qt=Io([xe(gT(),(Ne,ct)=>{const Rt=ct.event.item;r.lookupItem(i(Rt)).each(()=>{const Tn=ct.event.menu;no.highlight(Ne,Tn);const Tt=i(ct.event.item);r.refresh(Tt).each(Wt=>k(Ne,r,Wt))})}),qa((Ne,ct)=>{const Rt=ct.event.target;Ne.getSystem().getByDom(Rt).each(Tn=>{i(Tn).indexOf("collapse-item")===0&&ce(Ne,Tn),K(Ne,Tn,re.HighlightSubmenu).fold(()=>{e.onExecute(Ne,Tn)},se)})}),Go((Ne,ct)=>{a(Ne).each(Rt=>{Kt.append(Ne,ra(Rt)),e.onOpenMenu(Ne,Rt),e.highlightOnOpen===Gc.HighlightMenuAndItem?w(Ne,Rt):e.highlightOnOpen===Gc.HighlightJustMenu&&b(Ne,Rt)})}),xe(bT,(Ne,ct)=>{e.onHighlightItem(Ne,ct.event.menuComp,ct.event.itemComp)}),xe(vT,(Ne,ct)=>{e.onDehighlightItem(Ne,ct.event.menuComp,ct.event.itemComp)}),...e.navigateOnHover?[xe(mT(),(Ne,ct)=>{const Rt=ct.event.item;ke(Ne,Rt),K(Ne,Rt,re.HighlightParent),e.onHover(Ne,Rt)})]:[]]),at=Ne=>no.getHighlighted(Ne).bind(no.getHighlighted),Ct=Ne=>{at(Ne).each(ct=>{ce(Ne,ct)})},_t=Ne=>{r.getPrimary().each(ct=>{w(Ne,ct)})},so=Ne=>v.from(Ne.components()[0]).filter(ct=>$o(ct.element,"role")==="menu"),Fn={collapseMenu:Ct,highlightPrimary:_t,repositionMenus:Ne=>{r.getPrimary().bind(Rt=>at(Ne).bind(Tn=>{const Tt=i(Tn),Wt=Do(r.getMenus()),wo=is(Ae(Wt,fT.extractPreparedMenu));return r.getTriggeringPath(Tt,qn=>d(Ne,wo,qn))}).map(Tn=>({primary:Rt,triggeringPath:Tn}))).fold(()=>{so(Ne).each(Rt=>{e.onRepositionMenu(Ne,Rt,[])})},({primary:Rt,triggeringPath:Tn})=>{e.onRepositionMenu(Ne,Rt,Tn)})}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Ks(e.tmenuBehaviours,[St.config({mode:"special",onRight:Le(be),onLeft:Le(he),onEscape:Le(Be),focusIn:(Ne,ct)=>{r.getPrimary().each(Rt=>{Jg(Ne,Rt.element,Hm())})}}),no.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),Dn.config({find:Ne=>no.getHighlighted(Ne)}),Kt.config({})]),eventOrder:e.eventOrder,apis:Fn,events:Qt}},h7=$("collapse-item"),p7=(e,t,n)=>({primary:e,menus:t,expansions:n}),f7=(e,t)=>({primary:e,menus:At(e,t),expansions:{}}),b7=e=>({value:et(h7()),meta:{text:e}}),pg=la({name:"TieredMenu",configFields:[nf("onExecute"),nf("onEscape"),Wu("onOpenMenu"),Wu("onOpenSubmenu"),Vn("onRepositionMenu"),Vn("onCollapseMenu"),oe("highlightOnOpen",Gc.HighlightMenuAndItem),Nl("data",[Ce("primary"),Ce("menus"),Ce("expansions")]),oe("fakeFocus",!1),Vn("onHighlightItem"),Vn("onDehighlightItem"),Vn("onHover"),Gm(),Ce("dom"),oe("navigateOnHover",!0),oe("stayInDom",!1),pr("tmenuBehaviours",[St,no,Dn,Kt]),oe("eventOrder",{})],apis:{collapseMenu:(e,t)=>{e.collapseMenu(t)},highlightPrimary:(e,t)=>{e.highlightPrimary(t)},repositionMenus:(e,t)=>{e.repositionMenus(t)}},factory:g7,extraApis:{tieredData:p7,singleData:f7,collapseItem:b7}}),v7=(e,t,n,o,r)=>{const a=()=>e.lazySink(t),i=o.type==="horizontal"?{layouts:{onLtr:()=>gf(),onRtl:()=>hf()}}:{},d=b=>b.length===2,g=b=>d(b)?i:{};return pg.sketch({dom:{tag:"div"},data:o.data,markers:o.menu.markers,highlightOnOpen:o.menu.highlightOnOpen,fakeFocus:o.menu.fakeFocus,onEscape:()=>(Hn.close(t),e.onEscape.map(b=>b(t)),v.some(!0)),onExecute:()=>v.some(!0),onOpenMenu:(b,w)=>{cc.positionWithinBounds(a().getOrDie(),w,n,r())},onOpenSubmenu:(b,w,x,k)=>{const A=a().getOrDie();cc.position(A,x,{anchor:{type:"submenu",item:w,...g(k)}})},onRepositionMenu:(b,w,x)=>{const k=a().getOrDie();cc.positionWithinBounds(k,w,n,r()),Ve(x,A=>{const B=g(A.triggeringPath);cc.position(k,A.triggeredMenu,{anchor:{type:"submenu",item:A.triggeringItem,...B}})})}})},y7=(e,t)=>{const n=(k,A)=>e.getRelated(k).exists(Z=>Wi(Z,A)),o=(k,A)=>{Hn.setContent(k,A)},r=(k,A,B)=>{const Z=v.none;a(k,A,B,Z)},a=(k,A,B,Z)=>{const re=e.lazySink(k).getOrDie();Hn.openWhileCloaked(k,A,()=>cc.positionWithinBounds(re,k,B,Z())),Ye.setValue(k,v.some({mode:"position",config:B,getBounds:Z}))},i=(k,A,B)=>{d(k,A,B,v.none)},d=(k,A,B,Z)=>{const re=v7(e,k,A,B,Z);Hn.open(k,re),Ye.setValue(k,v.some({mode:"menu",menu:re}))},g=k=>{Hn.isOpen(k)&&(Ye.setValue(k,v.none()),Hn.close(k))},b=k=>Hn.getState(k),w=k=>{Hn.isOpen(k)&&Ye.getValue(k).each(A=>{switch(A.mode){case"menu":Hn.getState(k).each(pg.repositionMenus);break;case"position":const B=e.lazySink(k).getOrDie();cc.positionWithinBounds(B,k,A.config,A.getBounds());break}})},x={setContent:o,showAt:r,showWithinBounds:a,showMenuAt:i,showMenuWithinBounds:d,hide:g,getContent:b,reposition:w,isOpen:Hn.isOpen};return{uid:e.uid,dom:e.dom,behaviours:Ks(e.inlineBehaviours,[Hn.config({isPartOf:(k,A,B)=>Wi(A,B)||n(k,B),getAttachPoint:k=>e.lazySink(k).getOrDie(),onOpen:k=>{e.onShow(k)},onClose:k=>{e.onHide(k)}}),Ye.config({store:{mode:"memory",initialValue:v.none()}}),_c.config({channels:{...cg({isExtraPart:t.isExtraPart,...e.fireDismissalEventInstead.map(k=>({fireEventInstead:{event:k.event}})).getOr({})}),...nm({...e.fireRepositionEventInstead.map(k=>({fireEventInstead:{event:k.event}})).getOr({}),doReposition:w})}})]),eventOrder:e.eventOrder,apis:x}},ms=la({name:"InlineView",configFields:[Ce("lazySink"),Vn("onShow"),Vn("onHide"),gi("onEscape"),pr("inlineBehaviours",[Hn,Ye,_c]),nc("fireDismissalEventInstead",[oe("event",Zi())]),nc("fireRepositionEventInstead",[oe("event",d0())]),oe("getRelated",v.none),oe("isExtraPart",Te),oe("eventOrder",v.none)],factory:y7,apis:{showAt:(e,t,n,o)=>{e.showAt(t,n,o)},showWithinBounds:(e,t,n,o,r)=>{e.showWithinBounds(t,n,o,r)},showMenuAt:(e,t,n,o)=>{e.showMenuAt(t,n,o)},showMenuWithinBounds:(e,t,n,o,r)=>{e.showMenuWithinBounds(t,n,o,r)},hide:(e,t)=>{e.hide(t)},isOpen:(e,t)=>e.isOpen(t),getContent:(e,t)=>e.getContent(t),setContent:(e,t,n)=>{e.setContent(t,n)},reposition:(e,t)=>{e.reposition(t)}}});var Pv=tinymce.util.Tools.resolve("tinymce.util.Delay");const Gr=la({name:"Button",factory:e=>{const t=Hv(e.action),n=e.dom.tag,o=a=>Xe(e.dom,"attributes").bind(i=>Xe(i,a)),r=()=>{if(n==="button"){const a=o("type").getOr("button"),i=o("role").map(d=>({role:d})).getOr({});return{type:a,...i}}else return{role:e.role.getOr(o("role").getOr("button"))}};return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:Ea.augment(e.buttonBehaviours,[Ht.config({}),St.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:r()},eventOrder:e.eventOrder}},configFields:[oe("uid",void 0),Ce("dom"),oe("components",[]),Ea.field("buttonBehaviours",[Ht,St]),oo("action"),oo("role"),oe("eventOrder",{})]}),w7=e=>{const t=e.dom.attributes!==void 0?e.dom.attributes:[];return En(t,(n,o)=>o.name==="class"?n:{...n,[o.name]:o.value},{})},S7=e=>Array.prototype.slice.call(e.dom.classList,0),nd=e=>{const t=q.fromHtml(e),n=Js(t),o=w7(t),r=S7(t),a=n.length===0?{}:{innerHtml:Np(t)};return{tag:lo(t),classes:r,attributes:o,...a}},go=e=>{const t=PS(e)&&Ko(e,"uid")?e.uid:Ld("memento");return{get:a=>a.getSystem().getByUid(t).getOrDie(),getOpt:a=>a.getSystem().getByUid(t).toOptional(),asSpec:()=>({...e,uid:t})}};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:yT,setPrototypeOf:wT,isFrozen:x7,getPrototypeOf:C7,getOwnPropertyDescriptor:T7}=Object;let{freeze:_a,seal:Yl,create:ST}=Object,{apply:fx,construct:bx}=typeof Reflect<"u"&&Reflect;_a||(_a=function(t){return t}),Yl||(Yl=function(t){return t}),fx||(fx=function(t,n,o){return t.apply(n,o)}),bx||(bx=function(t,n){return new t(...n)});const Lv=yl(Array.prototype.forEach),xT=yl(Array.prototype.pop),v1=yl(Array.prototype.push),Nv=yl(String.prototype.toLowerCase),vx=yl(String.prototype.toString),CT=yl(String.prototype.match),y1=yl(String.prototype.replace),k7=yl(String.prototype.indexOf),E7=yl(String.prototype.trim),xi=yl(Object.prototype.hasOwnProperty),Ma=yl(RegExp.prototype.test),w1=O7(TypeError);function yl(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return fx(e,t,o)}}function O7(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return bx(e,n)}}function Zo(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nv;wT&&wT(e,null);let o=t.length;for(;o--;){let r=t[o];if(typeof r=="string"){const a=n(r);a!==r&&(x7(t)||(t[o]=a),r=a)}e[r]=!0}return e}function A7(e){for(let t=0;t<e.length;t++)xi(e,t)||(e[t]=null);return e}function fg(e){const t=ST(null);for(const[n,o]of yT(e))xi(e,n)&&(Array.isArray(o)?t[n]=A7(o):o&&typeof o=="object"&&o.constructor===Object?t[n]=fg(o):t[n]=o);return t}function S1(e,t){for(;e!==null;){const o=T7(e,t);if(o){if(o.get)return yl(o.get);if(typeof o.value=="function")return yl(o.value)}e=C7(e)}function n(){return null}return n}const TT=_a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),yx=_a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wx=_a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_7=_a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Sx=_a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),M7=_a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kT=_a(["#text"]),ET=_a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),xx=_a(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),OT=_a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Vv=_a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),D7=Yl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$7=Yl(/<%[\w\W]*|[\w\W]*%>/gm),F7=Yl(/\${[\w\W]*}/gm),R7=Yl(/^data-[\-\w.\u00B7-\uFFFF]/),B7=Yl(/^aria-[\-\w]+$/),AT=Yl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),I7=Yl(/^(?:\w+script|data):/i),H7=Yl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_T=Yl(/^html$/i),P7=Yl(/^[a-z][.\w]*(-[.\w]+)+$/i);var MT=Object.freeze({__proto__:null,MUSTACHE_EXPR:D7,ERB_EXPR:$7,TMPLIT_EXPR:F7,DATA_ATTR:R7,ARIA_ATTR:B7,IS_ALLOWED_URI:AT,IS_SCRIPT_OR_DATA:I7,ATTR_WHITESPACE:H7,DOCTYPE_NAME:_T,CUSTOM_ELEMENT:P7});const x1={element:1,text:3,progressingInstruction:7,comment:8,document:9},L7=function(){return typeof window>"u"?null:window},N7=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let o=null;const r="data-tt-policy-suffix";n&&n.hasAttribute(r)&&(o=n.getAttribute(r));const a="dompurify"+(o?"#"+o:"");try{return t.createPolicy(a,{createHTML(i){return i},createScriptURL(i){return i}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function DT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L7();const t=kn=>DT(kn);if(t.version="3.1.7",t.removed=[],!e||!e.document||e.document.nodeType!==x1.document)return t.isSupported=!1,t;let{document:n}=e;const o=n,r=o.currentScript,{DocumentFragment:a,HTMLTemplateElement:i,Node:d,Element:g,NodeFilter:b,NamedNodeMap:w=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:x,DOMParser:k,trustedTypes:A}=e,B=g.prototype,Z=S1(B,"cloneNode"),re=S1(B,"remove"),J=S1(B,"nextSibling"),K=S1(B,"childNodes"),ce=S1(B,"parentNode");if(typeof i=="function"){const kn=n.createElement("template");kn.content&&kn.content.ownerDocument&&(n=kn.content.ownerDocument)}let ke,be="";const{implementation:he,createNodeIterator:Be,createDocumentFragment:Le,getElementsByTagName:Qt}=n,{importNode:at}=o;let Ct={};t.isSupported=typeof yT=="function"&&typeof ce=="function"&&he&&he.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:_t,ERB_EXPR:so,TMPLIT_EXPR:wt,DATA_ATTR:Fn,ARIA_ATTR:Ne,IS_SCRIPT_OR_DATA:ct,ATTR_WHITESPACE:Rt,CUSTOM_ELEMENT:Tn}=MT;let{IS_ALLOWED_URI:Tt}=MT,Wt=null;const wo=Zo({},[...TT,...yx,...wx,...Sx,...kT]);let qn=null;const qr=Zo({},[...ET,...xx,...OT,...Vv]);let qo=Object.seal(ST(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$c=null,ol=null,ru=!0,cu=!0,id=!1,wp=!0,au=!1,t0=!0,ud=!1,n0=!1,uC=!1,Sp=!1,oy=!1,sy=!1,N6=!0,V6=!1;const Mj="user-content-";let dC=!0,o0=!1,xp={},Cp=null;const z6=Zo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Z6=null;const U6=Zo({},["audio","video","img","source","image","track"]);let mC=null;const W6=Zo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ry="http://www.w3.org/1998/Math/MathML",cy="http://www.w3.org/2000/svg",dd="http://www.w3.org/1999/xhtml";let Tp=dd,gC=!1,hC=null;const Dj=Zo({},[ry,cy,dd],vx);let s0=null;const $j=["application/xhtml+xml","text/html"],Fj="text/html";let Fc=null,kp=null;const Rj=n.createElement("form"),j6=function(me){return me instanceof RegExp||me instanceof Function},pC=function(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(kp&&kp===me)){if((!me||typeof me!="object")&&(me={}),me=fg(me),s0=$j.indexOf(me.PARSER_MEDIA_TYPE)===-1?Fj:me.PARSER_MEDIA_TYPE,Fc=s0==="application/xhtml+xml"?vx:Nv,Wt=xi(me,"ALLOWED_TAGS")?Zo({},me.ALLOWED_TAGS,Fc):wo,qn=xi(me,"ALLOWED_ATTR")?Zo({},me.ALLOWED_ATTR,Fc):qr,hC=xi(me,"ALLOWED_NAMESPACES")?Zo({},me.ALLOWED_NAMESPACES,vx):Dj,mC=xi(me,"ADD_URI_SAFE_ATTR")?Zo(fg(W6),me.ADD_URI_SAFE_ATTR,Fc):W6,Z6=xi(me,"ADD_DATA_URI_TAGS")?Zo(fg(U6),me.ADD_DATA_URI_TAGS,Fc):U6,Cp=xi(me,"FORBID_CONTENTS")?Zo({},me.FORBID_CONTENTS,Fc):z6,$c=xi(me,"FORBID_TAGS")?Zo({},me.FORBID_TAGS,Fc):{},ol=xi(me,"FORBID_ATTR")?Zo({},me.FORBID_ATTR,Fc):{},xp=xi(me,"USE_PROFILES")?me.USE_PROFILES:!1,ru=me.ALLOW_ARIA_ATTR!==!1,cu=me.ALLOW_DATA_ATTR!==!1,id=me.ALLOW_UNKNOWN_PROTOCOLS||!1,wp=me.ALLOW_SELF_CLOSE_IN_ATTR!==!1,au=me.SAFE_FOR_TEMPLATES||!1,t0=me.SAFE_FOR_XML!==!1,ud=me.WHOLE_DOCUMENT||!1,Sp=me.RETURN_DOM||!1,oy=me.RETURN_DOM_FRAGMENT||!1,sy=me.RETURN_TRUSTED_TYPE||!1,uC=me.FORCE_BODY||!1,N6=me.SANITIZE_DOM!==!1,V6=me.SANITIZE_NAMED_PROPS||!1,dC=me.KEEP_CONTENT!==!1,o0=me.IN_PLACE||!1,Tt=me.ALLOWED_URI_REGEXP||AT,Tp=me.NAMESPACE||dd,qo=me.CUSTOM_ELEMENT_HANDLING||{},me.CUSTOM_ELEMENT_HANDLING&&j6(me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(qo.tagNameCheck=me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),me.CUSTOM_ELEMENT_HANDLING&&j6(me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(qo.attributeNameCheck=me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),me.CUSTOM_ELEMENT_HANDLING&&typeof me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(qo.allowCustomizedBuiltInElements=me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),au&&(cu=!1),oy&&(Sp=!0),xp&&(Wt=Zo({},kT),qn=[],xp.html===!0&&(Zo(Wt,TT),Zo(qn,ET)),xp.svg===!0&&(Zo(Wt,yx),Zo(qn,xx),Zo(qn,Vv)),xp.svgFilters===!0&&(Zo(Wt,wx),Zo(qn,xx),Zo(qn,Vv)),xp.mathMl===!0&&(Zo(Wt,Sx),Zo(qn,OT),Zo(qn,Vv))),me.ADD_TAGS&&(Wt===wo&&(Wt=fg(Wt)),Zo(Wt,me.ADD_TAGS,Fc)),me.ADD_ATTR&&(qn===qr&&(qn=fg(qn)),Zo(qn,me.ADD_ATTR,Fc)),me.ADD_URI_SAFE_ATTR&&Zo(mC,me.ADD_URI_SAFE_ATTR,Fc),me.FORBID_CONTENTS&&(Cp===z6&&(Cp=fg(Cp)),Zo(Cp,me.FORBID_CONTENTS,Fc)),dC&&(Wt["#text"]=!0),ud&&Zo(Wt,["html","head","body"]),Wt.table&&(Zo(Wt,["tbody"]),delete $c.tbody),me.TRUSTED_TYPES_POLICY){if(typeof me.TRUSTED_TYPES_POLICY.createHTML!="function")throw w1('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof me.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw w1('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ke=me.TRUSTED_TYPES_POLICY,be=ke.createHTML("")}else ke===void 0&&(ke=N7(A,r)),ke!==null&&typeof be=="string"&&(be=ke.createHTML(""));_a&&_a(me),kp=me}},G6=Zo({},["mi","mo","mn","ms","mtext"]),q6=Zo({},["annotation-xml"]),Bj=Zo({},["title","style","font","a","script"]),K6=Zo({},[...yx,...wx,..._7]),Y6=Zo({},[...Sx,...M7]),Ij=function(me){let ft=ce(me);(!ft||!ft.tagName)&&(ft={namespaceURI:Tp,tagName:"template"});const bn=Nv(me.tagName),Ys=Nv(ft.tagName);return hC[me.namespaceURI]?me.namespaceURI===cy?ft.namespaceURI===dd?bn==="svg":ft.namespaceURI===ry?bn==="svg"&&(Ys==="annotation-xml"||G6[Ys]):!!K6[bn]:me.namespaceURI===ry?ft.namespaceURI===dd?bn==="math":ft.namespaceURI===cy?bn==="math"&&q6[Ys]:!!Y6[bn]:me.namespaceURI===dd?ft.namespaceURI===cy&&!q6[Ys]||ft.namespaceURI===ry&&!G6[Ys]?!1:!Y6[bn]&&(Bj[bn]||!K6[bn]):!!(s0==="application/xhtml+xml"&&hC[me.namespaceURI]):!1},lu=function(me){v1(t.removed,{element:me});try{ce(me).removeChild(me)}catch{re(me)}},r0=function(me,ft){try{v1(t.removed,{attribute:ft.getAttributeNode(me),from:ft})}catch{v1(t.removed,{attribute:null,from:ft})}if(ft.removeAttribute(me),me==="is"&&!qn[me])if(Sp||oy)try{lu(ft)}catch{}else try{ft.setAttribute(me,"")}catch{}},X6=function(me){let ft=null,bn=null;if(uC)me="<remove></remove>"+me;else{const Rc=CT(me,/^[\r\n\t ]+/);bn=Rc&&Rc[0]}s0==="application/xhtml+xml"&&Tp===dd&&(me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+me+"</body></html>");const Ys=ke?ke.createHTML(me):me;if(Tp===dd)try{ft=new k().parseFromString(Ys,s0)}catch{}if(!ft||!ft.documentElement){ft=he.createDocument(Tp,"template",null);try{ft.documentElement.innerHTML=gC?be:Ys}catch{}}const da=ft.body||ft.documentElement;return me&&bn&&da.insertBefore(n.createTextNode(bn),da.childNodes[0]||null),Tp===dd?Qt.call(ft,ud?"html":"body")[0]:ud?ft.documentElement:da},J6=function(me){return Be.call(me.ownerDocument||me,me,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT|b.SHOW_PROCESSING_INSTRUCTION|b.SHOW_CDATA_SECTION,null)},Q6=function(me){return me instanceof x&&(typeof me.nodeName!="string"||typeof me.textContent!="string"||typeof me.removeChild!="function"||!(me.attributes instanceof w)||typeof me.removeAttribute!="function"||typeof me.setAttribute!="function"||typeof me.namespaceURI!="string"||typeof me.insertBefore!="function"||typeof me.hasChildNodes!="function")},eM=function(me){return typeof d=="function"&&me instanceof d},md=function(me,ft,bn){Ct[me]&&Lv(Ct[me],Ys=>{Ys.call(t,ft,bn,kp)})},tM=function(me){let ft=null;if(md("beforeSanitizeElements",me,null),Q6(me))return lu(me),!0;const bn=Fc(me.nodeName);if(md("uponSanitizeElement",me,{tagName:bn,allowedTags:Wt}),me.hasChildNodes()&&!eM(me.firstElementChild)&&Ma(/<[/\w]/g,me.innerHTML)&&Ma(/<[/\w]/g,me.textContent)||me.nodeType===x1.progressingInstruction||t0&&me.nodeType===x1.comment&&Ma(/<[/\w]/g,me.data))return lu(me),!0;if(!Wt[bn]||$c[bn]){if(!$c[bn]&&oM(bn)&&(qo.tagNameCheck instanceof RegExp&&Ma(qo.tagNameCheck,bn)||qo.tagNameCheck instanceof Function&&qo.tagNameCheck(bn)))return!1;if(dC&&!Cp[bn]){const Ys=ce(me)||me.parentNode,da=K(me)||me.childNodes;if(da&&Ys){const Rc=da.length;for(let sl=Rc-1;sl>=0;--sl){const iu=Z(da[sl],!0);iu.__removalCount=(me.__removalCount||0)+1,Ys.insertBefore(iu,J(me))}}}return lu(me),!0}return me instanceof g&&!Ij(me)||(bn==="noscript"||bn==="noembed"||bn==="noframes")&&Ma(/<\/no(script|embed|frames)/i,me.innerHTML)?(lu(me),!0):(au&&me.nodeType===x1.text&&(ft=me.textContent,Lv([_t,so,wt],Ys=>{ft=y1(ft,Ys," ")}),me.textContent!==ft&&(v1(t.removed,{element:me.cloneNode()}),me.textContent=ft)),md("afterSanitizeElements",me,null),!1)},nM=function(me,ft,bn){if(N6&&(ft==="id"||ft==="name")&&(bn in n||bn in Rj))return!1;if(!(cu&&!ol[ft]&&Ma(Fn,ft))){if(!(ru&&Ma(Ne,ft))){if(!qn[ft]||ol[ft]){if(!(oM(me)&&(qo.tagNameCheck instanceof RegExp&&Ma(qo.tagNameCheck,me)||qo.tagNameCheck instanceof Function&&qo.tagNameCheck(me))&&(qo.attributeNameCheck instanceof RegExp&&Ma(qo.attributeNameCheck,ft)||qo.attributeNameCheck instanceof Function&&qo.attributeNameCheck(ft))||ft==="is"&&qo.allowCustomizedBuiltInElements&&(qo.tagNameCheck instanceof RegExp&&Ma(qo.tagNameCheck,bn)||qo.tagNameCheck instanceof Function&&qo.tagNameCheck(bn))))return!1}else if(!mC[ft]){if(!Ma(Tt,y1(bn,Rt,""))){if(!((ft==="src"||ft==="xlink:href"||ft==="href")&&me!=="script"&&k7(bn,"data:")===0&&Z6[me])){if(!(id&&!Ma(ct,y1(bn,Rt,"")))){if(bn)return!1}}}}}}return!0},oM=function(me){return me!=="annotation-xml"&&CT(me,Tn)},sM=function(me){md("beforeSanitizeAttributes",me,null);const{attributes:ft}=me;if(!ft)return;const bn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:qn};let Ys=ft.length;for(;Ys--;){const da=ft[Ys],{name:Rc,namespaceURI:sl,value:iu}=da,c0=Fc(Rc);let qc=Rc==="value"?iu:E7(iu);const Pj=qc;if(bn.attrName=c0,bn.attrValue=qc,bn.keepAttr=!0,bn.forceKeepAttr=void 0,md("uponSanitizeAttribute",me,bn),qc=bn.attrValue,bn.forceKeepAttr)continue;if(!bn.keepAttr){r0(Rc,me);continue}if(!wp&&Ma(/\/>/i,qc)){r0(Rc,me);continue}au&&Lv([_t,so,wt],cM=>{qc=y1(qc,cM," ")});const rM=Fc(me.nodeName);if(!nM(rM,c0,qc)){r0(Rc,me);continue}if(V6&&(c0==="id"||c0==="name")&&(r0(Rc,me),qc=Mj+qc),t0&&Ma(/((--!?|])>)|<\/(style|title)/i,qc)){r0(Rc,me);continue}if(ke&&typeof A=="object"&&typeof A.getAttributeType=="function"&&!sl)switch(A.getAttributeType(rM,c0)){case"TrustedHTML":{qc=ke.createHTML(qc);break}case"TrustedScriptURL":{qc=ke.createScriptURL(qc);break}}if(qc!==Pj)try{sl?me.setAttributeNS(sl,Rc,qc):me.setAttribute(Rc,qc),Q6(me)?lu(me):xT(t.removed)}catch{}}md("afterSanitizeAttributes",me,null)},Hj=function kn(me){let ft=null;const bn=J6(me);for(md("beforeSanitizeShadowDOM",me,null);ft=bn.nextNode();)md("uponSanitizeShadowNode",ft,null),!tM(ft)&&(ft.content instanceof a&&kn(ft.content),sM(ft));md("afterSanitizeShadowDOM",me,null)};return t.sanitize=function(kn){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ft=null,bn=null,Ys=null,da=null;if(gC=!kn,gC&&(kn="<!-->"),typeof kn!="string"&&!eM(kn))if(typeof kn.toString=="function"){if(kn=kn.toString(),typeof kn!="string")throw w1("dirty is not a string, aborting")}else throw w1("toString is not a function");if(!t.isSupported)return kn;if(n0||pC(me),t.removed=[],typeof kn=="string"&&(o0=!1),o0){if(kn.nodeName){const iu=Fc(kn.nodeName);if(!Wt[iu]||$c[iu])throw w1("root node is forbidden and cannot be sanitized in-place")}}else if(kn instanceof d)ft=X6("<!---->"),bn=ft.ownerDocument.importNode(kn,!0),bn.nodeType===x1.element&&bn.nodeName==="BODY"||bn.nodeName==="HTML"?ft=bn:ft.appendChild(bn);else{if(!Sp&&!au&&!ud&&kn.indexOf("<")===-1)return ke&&sy?ke.createHTML(kn):kn;if(ft=X6(kn),!ft)return Sp?null:sy?be:""}ft&&uC&&lu(ft.firstChild);const Rc=J6(o0?kn:ft);for(;Ys=Rc.nextNode();)tM(Ys)||(Ys.content instanceof a&&Hj(Ys.content),sM(Ys));if(o0)return kn;if(Sp){if(oy)for(da=Le.call(ft.ownerDocument);ft.firstChild;)da.appendChild(ft.firstChild);else da=ft;return(qn.shadowroot||qn.shadowrootmode)&&(da=at.call(o,da,!0)),da}let sl=ud?ft.outerHTML:ft.innerHTML;return ud&&Wt["!doctype"]&&ft.ownerDocument&&ft.ownerDocument.doctype&&ft.ownerDocument.doctype.name&&Ma(_T,ft.ownerDocument.doctype.name)&&(sl="<!DOCTYPE "+ft.ownerDocument.doctype.name+`>
`+sl),au&&Lv([_t,so,wt],iu=>{sl=y1(sl,iu," ")}),ke&&sy?ke.createHTML(sl):sl},t.setConfig=function(){let kn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};pC(kn),n0=!0},t.clearConfig=function(){kp=null,n0=!1},t.isValidAttribute=function(kn,me,ft){kp||pC({});const bn=Fc(kn),Ys=Fc(me);return nM(bn,Ys,ft)},t.addHook=function(kn,me){typeof me=="function"&&(Ct[kn]=Ct[kn]||[],v1(Ct[kn],me))},t.removeHook=function(kn){if(Ct[kn])return xT(Ct[kn])},t.removeHooks=function(kn){Ct[kn]&&(Ct[kn]=[])},t.removeAllHooks=function(){Ct={}},t}var V7=DT();const $T=e=>V7().sanitize(e);var tl=tinymce.util.Tools.resolve("tinymce.util.I18n");const z7={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},FT="temporary-placeholder",Cx=e=>()=>Xe(e,FT).getOr("!not found!"),Tx=(e,t)=>{const n=e.toLowerCase();if(tl.isRtl()){const o=No(n,"-rtl");return Cn(t,o)?o:n}else return n},RT=(e,t)=>Xe(t,Tx(e,t)),BT=(e,t)=>{const n=t();return RT(e,n).getOrThunk(Cx(n))},Z7=(e,t,n)=>{const o=t();return RT(e,o).or(n).getOrThunk(Cx(o))},U7=e=>tl.isRtl()?Cn(z7,e):!1,kx=()=>nn("add-focusable",[Go(e=>{ef(e.element,"svg").each(t=>Pt(t,"focusable","false"))})]),IT=(e,t,n,o)=>{var r,a;const i=U7(t)?["tox-icon--flip"]:[],d=Xe(n,Tx(t,n)).or(o).getOrThunk(Cx(n));return{dom:{tag:e.tag,attributes:(r=e.attributes)!==null&&r!==void 0?r:{},classes:e.classes.concat(i),innerHtml:d},behaviours:He([...(a=e.behaviours)!==null&&a!==void 0?a:[],kx()])}},Xl=(e,t,n,o=v.none())=>IT(t,e,n(),o),W7=(e,t,n)=>{const o=n(),r=Q(e,a=>Cn(o,Tx(a,o)));return IT(t,r.getOr(FT),o,v.none())},j7={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Ex=la({name:"Notification",factory:e=>{const t=go({dom:nd(`<p>${$T(e.translationProvider(e.text))}</p>`),behaviours:He([Kt.config({})])}),n=A=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${A}%`}}}),o=A=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${A}%`}}),r=go({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},o(0)],behaviours:He([Kt.config({})])}),d={updateProgress:(A,B)=>{A.getSystem().isConnected()&&r.getOpt(A).each(Z=>{Kt.set(Z,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(B)]},o(B)])})},updateText:(A,B)=>{if(A.getSystem().isConnected()){const Z=t.get(A);Kt.set(Z,[Os(B)])}}},g=ie([e.icon.toArray(),e.level.toArray(),e.level.bind(A=>v.from(j7[A])).toArray()]),b=go(Gr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Xl("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:A=>{e.onAction(A)}})),w=W7(g,{tag:"div",classes:["tox-notification__icon"]},e.iconProvider),x={dom:{tag:"div",classes:["tox-notification__body"]},components:[t.asSpec()],behaviours:He([Kt.config({})])},k=[w,x];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(A=>["tox-notification","tox-notification--in",`tox-notification--${A}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:He([Ht.config({}),nn("notification-events",[xe($r(),A=>{b.getOpt(A).each(Ht.focus)})])]),components:k.concat(e.progress?[r.asSpec()]:[]).concat(e.closeButton?[b.asSpec()]:[]),apis:d}},configFields:[oo("level"),Ce("progress"),oo("icon"),Ce("onAction"),Ce("text"),Ce("iconProvider"),Ce("translationProvider"),mr("closeButton",!0)],apis:{updateProgress:(e,t,n)=>{e.updateProgress(t,n)},updateText:(e,t,n)=>{e.updateText(t,n)}}});var G7=(e,t,n)=>{const o=t.backstage.shared,r=()=>{const g=Rs(q.fromDom(e.getContentAreaContainer())),b=tr(),w=ca(b.x,g.x,g.right),x=ca(b.y,g.y,g.bottom),k=Math.max(g.right,b.right),A=Math.max(g.bottom,b.bottom);return v.some(es(w,x,k-w,A-x))};return{open:(g,b)=>{const w=()=>{b(),ms.hide(k)},x=Ur(Ex.sketch({text:g.text,level:Sn(["success","error","warning","warn","info"],g.type)?g.type:void 0,progress:g.progressBar===!0,icon:g.icon,closeButton:g.closeButton,onAction:w,iconProvider:o.providers.icons,translationProvider:o.providers.translate})),k=Ur(ms.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:o.getSink,fireDismissalEventInstead:{},...o.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));n.add(k),jt(g.timeout)&&g.timeout>0&&Pv.setEditorTimeout(e,()=>{w()},g.timeout);const B={close:w,reposition:()=>{const Z=ra(x),re={maxHeightFunction:qd()},J=e.notificationManager.getNotifications();if(J[0]===B){const K={...o.anchors.banner(),overrides:re};ms.showWithinBounds(k,Z,{anchor:K},r)}else kt(J,B).each(K=>{const ce=J[K-1].getEl(),ke={type:"node",root:Cs(),node:v.some(q.fromDom(ce)),overrides:re,layouts:{onRtl:()=>[hr],onLtr:()=>[hr]}};ms.showWithinBounds(k,Z,{anchor:ke},r)})},text:Z=>{Ex.updateText(x,Z)},settings:g,getEl:()=>x.element.dom,progressBar:{value:Z=>{Ex.updateProgress(x,Z)}}};return B},close:g=>{g.close()},getArgs:g=>g.settings}},Jh=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),q7=tinymce.util.Tools.resolve("tinymce.EditorManager"),Qh=tinymce.util.Tools.resolve("tinymce.Env"),wl;(function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"})(wl||(wl={}));var C1;(function(e){e.auto="auto",e.top="top",e.bottom="bottom"})(C1||(C1={}));const Ho=e=>t=>t.options.get(e),T1=e=>t=>v.from(e(t)),HT=e=>{const t=Qh.deviceType.isPhone(),n=Qh.deviceType.isTablet()||t,o=e.options.register,r=i=>ye(i)||i===!1,a=i=>ye(i)||jt(i);o("skin",{processor:i=>ye(i)||i===!1,default:"oxide"}),o("skin_url",{processor:"string"}),o("height",{processor:a,default:Math.max(e.getElement().offsetHeight,400)}),o("width",{processor:a,default:Jh.DOM.getStyle(e.getElement(),"width")}),o("min_height",{processor:"number",default:100}),o("min_width",{processor:"number"}),o("max_height",{processor:"number"}),o("max_width",{processor:"number"}),o("style_formats",{processor:"object[]"}),o("style_formats_merge",{processor:"boolean",default:!1}),o("style_formats_autohide",{processor:"boolean",default:!1}),o("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),o("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),o("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),o("font_size_input_default_unit",{processor:"string",default:"pt"}),o("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),o("content_langs",{processor:"object[]"}),o("removed_menuitems",{processor:"string",default:""}),o("menubar",{processor:i=>ye(i)||pt(i),default:!t}),o("menu",{processor:"object",default:{}}),o("toolbar",{processor:i=>pt(i)||ye(i)||Pn(i)?{value:i,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Yt(9,i=>{o("toolbar"+(i+1),{processor:"string"})}),o("toolbar_mode",{processor:"string",default:n?"scrolling":"floating"}),o("toolbar_groups",{processor:"object",default:{}}),o("toolbar_location",{processor:"string",default:C1.auto}),o("toolbar_persist",{processor:"boolean",default:!1}),o("toolbar_sticky",{processor:"boolean",default:e.inline}),o("toolbar_sticky_offset",{processor:"number",default:0}),o("fixed_toolbar_container",{processor:"string",default:""}),o("fixed_toolbar_container_target",{processor:"object"}),o("ui_mode",{processor:"string",default:"combined"}),o("file_picker_callback",{processor:"function"}),o("file_picker_validator_handler",{processor:"function"}),o("file_picker_types",{processor:"string"}),o("typeahead_urls",{processor:"boolean",default:!0}),o("anchor_top",{processor:r,default:"#top"}),o("anchor_bottom",{processor:r,default:"#bottom"}),o("draggable_modal",{processor:"boolean",default:!1}),o("statusbar",{processor:"boolean",default:!0}),o("elementpath",{processor:"boolean",default:!0}),o("branding",{processor:"boolean",default:!0}),o("promotion",{processor:"boolean",default:!0}),o("resize",{processor:i=>i==="both"||pt(i),default:!Qh.deviceType.isTouch()}),o("sidebar_show",{processor:"string"}),o("help_accessibility",{processor:"boolean",default:e.hasPlugin("help")}),o("default_font_stack",{processor:"string[]",default:[]})},PT=Ho("readonly"),Ox=Ho("height"),Ax=Ho("width"),_x=T1(Ho("min_width")),Mx=T1(Ho("min_height")),zv=T1(Ho("max_width")),Dx=T1(Ho("max_height")),LT=T1(Ho("style_formats")),NT=Ho("style_formats_merge"),VT=Ho("style_formats_autohide"),zT=Ho("content_langs"),ZT=Ho("removed_menuitems"),ep=Ho("toolbar_mode"),UT=Ho("toolbar_groups"),$x=Ho("toolbar_location"),K7=Ho("fixed_toolbar_container"),Y7=Ho("fixed_toolbar_container_target"),WT=Ho("toolbar_persist"),jT=Ho("toolbar_sticky_offset"),GT=Ho("menubar"),Zv=Ho("toolbar"),qT=Ho("file_picker_callback"),KT=Ho("file_picker_validator_handler"),YT=Ho("font_size_input_default_unit"),XT=Ho("file_picker_types"),JT=Ho("typeahead_urls"),QT=Ho("anchor_top"),e5=Ho("anchor_bottom"),t5=Ho("draggable_modal"),n5=Ho("statusbar"),o5=Ho("elementpath"),Fx=Ho("branding"),s5=Ho("resize"),r5=Ho("paste_as_text"),c5=Ho("sidebar_show"),a5=Ho("promotion"),l5=Ho("help_accessibility"),i5=Ho("default_font_stack"),Rx=e=>e.options.get("skin")===!1,Uv=e=>e.options.get("menubar")!==!1,Wv=e=>{const t=e.options.get("skin_url");if(Rx(e))return t;if(t)return e.documentBaseURI.toAbsolute(t);{const n=e.options.get("skin");return q7.baseURL+"/skins/ui/"+n}},jv=e=>v.from(e.options.get("skin_url")),u5=e=>e.options.get("line_height_formats").split(" "),Gv=e=>{const t=Zv(e),n=ye(t),o=Pn(t)&&t.length>0;return!k1(e)&&(o||n||t===!0)},Bx=e=>{const t=Yt(9,o=>e.options.get("toolbar"+(o+1))),n=Xt(t,ye);return $s(n.length>0,n)},k1=e=>Bx(e).fold(()=>{const t=Zv(e);return tt(t,ye)&&t.length>0},gt),Ix=e=>$x(e)===C1.bottom,d5=e=>{var t;if(!e.inline)return v.none();const n=(t=K7(e))!==null&&t!==void 0?t:"";if(n.length>0)return As(Cs(),n);const o=Y7(e);return rn(o)?v.some(q.fromDom(o)):v.none()},tp=e=>e.inline&&d5(e).isSome(),Hx=e=>d5(e).getOrThunk(()=>De(le(q.fromDom(e.getElement())))),Px=e=>e.inline&&!Uv(e)&&!Gv(e)&&!k1(e),E1=e=>(e.options.get("toolbar_sticky")||e.inline)&&!tp(e)&&!Px(e),dm=e=>!tp(e)&&e.options.get("ui_mode")==="split",m5=e=>{const t=e.options.get("menu");return an(t,n=>({...n,items:n.items}))};var X7=Object.freeze({__proto__:null,get ToolbarMode(){return wl},get ToolbarLocation(){return C1},register:HT,getSkinUrl:Wv,getSkinUrlOption:jv,isReadOnly:PT,isSkinDisabled:Rx,getHeightOption:Ox,getWidthOption:Ax,getMinWidthOption:_x,getMinHeightOption:Mx,getMaxWidthOption:zv,getMaxHeightOption:Dx,getUserStyleFormats:LT,shouldMergeStyleFormats:NT,shouldAutoHideStyleFormats:VT,getLineHeightFormats:u5,getContentLanguages:zT,getRemovedMenuItems:ZT,isMenubarEnabled:Uv,isMultipleToolbars:k1,isToolbarEnabled:Gv,isToolbarPersist:WT,getMultipleToolbarsOption:Bx,getUiContainer:Hx,useFixedContainer:tp,isSplitUiMode:dm,getToolbarMode:ep,isDraggableModal:t5,isDistractionFree:Px,isStickyToolbar:E1,getStickyToolbarOffset:jT,getToolbarLocation:$x,isToolbarLocationBottom:Ix,getToolbarGroups:UT,getMenus:m5,getMenubar:GT,getToolbar:Zv,getFilePickerCallback:qT,getFilePickerTypes:XT,useTypeaheadUrls:JT,getAnchorTop:QT,getAnchorBottom:e5,getFilePickerValidatorHandler:KT,getFontSizeInputDefaultUnit:YT,useStatusBar:n5,useElementPath:o5,promotionEnabled:a5,useBranding:Fx,getResize:s5,getPasteAsText:r5,getSidebarShow:c5,useHelpAccessibility:l5,getDefaultFontStack:i5});const g5="[data-mce-autocompleter]",h5=e=>fl(e,g5),J7=e=>As(e,g5),Q7={setup:(e,t)=>{const n=(r,a)=>{yt(r,Ga(),{raw:a})},o=()=>e.getMenu().bind(no.getHighlighted);t.on("keydown",r=>{const a=r.which;e.isActive()&&(e.isMenuOpen()?a===13?(o().each(Hu),r.preventDefault()):a===40?(o().fold(()=>{e.getMenu().each(no.highlightFirst)},i=>{n(i,r)}),r.preventDefault(),r.stopImmediatePropagation()):(a===37||a===38||a===39)&&o().each(i=>{n(i,r),r.preventDefault(),r.stopImmediatePropagation()}):(a===13||a===38||a===40)&&e.cancelIfNecessary())}),t.on("NodeChange",r=>{e.isActive()&&!e.isProcessingAction()&&h5(q.fromDom(r.element)).isNone()&&e.cancelIfNecessary()})}};var Lx;(function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(Lx||(Lx={}));var Ci=Lx;const Nx="tox-menu-nav__js",qv="tox-collection__item",Vx="tox-swatch",eD={normal:Nx,color:Vx},p5="tox-collection__item--enabled",tD="tox-collection__group-heading",f5="tox-collection__item-icon",zx="tox-collection__item-label",nD="tox-collection__item-accessory",b5="tox-collection__item-caret",oD="tox-collection__item-checkmark",O1="tox-collection__item--active",v5="tox-collection__item-container",sD="tox-collection__item-container--column",y5="tox-collection__item-container--row",rD="tox-collection__item-container--align-right",cD="tox-collection__item-container--align-left",aD="tox-collection__item-container--valign-top",lD="tox-collection__item-container--valign-middle",iD="tox-collection__item-container--valign-bottom",w5=e=>Xe(eD,e).getOr(Nx),uD=e=>e==="color"?"tox-swatches":"tox-menu",Zx=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:uD(e),tieredMenu:"tox-tiered-menu"}),bg=e=>{const t=Zx(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:w5(e)}},dD=(e,t,n)=>{const o=Zx(n);return{tag:"div",classes:ie([[o.menu,`tox-menu-${t}-column`],e?[o.hasIcons]:[]])}},mD=[hg.parts.items({})],Kv=(e,t,n)=>{const o=Zx(n);return{dom:{tag:"div",classes:ie([[o.tieredMenu]])},markers:bg(n)}},S5=$([oo("data"),oe("inputAttributes",{}),oe("inputStyles",{}),oe("tag","input"),oe("inputClasses",[]),Vn("onSetValue"),oe("styles",{}),oe("eventOrder",{}),pr("inputBehaviours",[Ye,Ht]),oe("selectOnFocus",!0)]),x5=e=>He([Ht.config({onFocus:e.selectOnFocus?t=>{const n=t.element,o=pi(n);n.dom.setSelectionRange(0,o.length)}:se})]),gD=e=>({...x5(e),...Ks(e.inputBehaviours,[Ye.config({store:{mode:"manual",...e.data.map(t=>({initialValue:t})).getOr({}),getValue:t=>pi(t.element),setValue:(t,n)=>{pi(t.element)!==n&&Zu(t.element,n)}},onSetValue:e.onSetValue})])}),C5=e=>({tag:e.tag,attributes:{type:"text",...e.inputAttributes},styles:e.inputStyles,classes:e.inputClasses}),hD=(e,t)=>({uid:e.uid,dom:C5(e),components:[],behaviours:gD(e),eventOrder:e.eventOrder}),vg=la({name:"Input",configFields:S5(),factory:hD}),T5=et("refetch-trigger-event"),k5=et("redirect-menu-item-interaction"),E5="tox-menu__searcher",Yv=e=>As(e.element,`.${E5}`).bind(t=>e.getSystem().getByDom(t).toOptional()),O5=Yv,pD=(e,t)=>{Ye.setValue(e,t.fetchPattern),e.element.dom.selectionStart=t.selectionStart,e.element.dom.selectionEnd=t.selectionEnd},A5=e=>{const t=Ye.getValue(e),n=e.element.dom.selectionStart,o=e.element.dom.selectionEnd;return{fetchPattern:t,selectionStart:n,selectionEnd:o}},fD=(e,t)=>{C(t.element,"id").each(n=>Pt(e.element,"aria-activedescendant",n))},bD=e=>{const t=(r,a)=>(a.cut(),v.none()),n=(r,a)=>{const i={interactionEvent:a.event,eventType:a.event.raw.type};return yt(r,k5,i),v.some(!0)},o="searcher-events";return{dom:{tag:"div",classes:[qv]},components:[vg.sketch({inputClasses:[E5,"tox-textfield"],inputAttributes:{...e.placeholder.map(r=>({placeholder:e.i18n(r)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:He([nn(o,[xe(Fu(),r=>{to(r,T5)}),xe(Ga(),(r,a)=>{a.event.raw.key==="Escape"&&a.stop()})]),St.config({mode:"special",onLeft:t,onRight:t,onSpace:t,onEnter:n,onEscape:n,onUp:n,onDown:n})]),eventOrder:{keydown:[o,St.name()]}})]}},Xv="tox-collection--results__js",_5=e=>{var t;return e.dom?{...e,dom:{...e.dom,attributes:{...(t=e.dom.attributes)!==null&&t!==void 0?t:{},id:et("aria-item-search-result-id"),"aria-selected":"false"}}}:e},Ux=(e,t)=>n=>{const o=Mo(n,t);return Ae(o,r=>({dom:e,components:r}))},vD=e=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[hg.parts.items({preprocess:e!=="auto"?Ux({tag:"div",classes:["tox-swatches__row"]},e):We})]}]}),yD=e=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[hg.parts.items({preprocess:Ux({tag:"div",classes:["tox-collection__group"]},e)})]}),M5=(e,t)=>{const n=[];let o=[];return Ve(e,(r,a)=>{t(r,a)?(o.length>0&&n.push(o),o=[],(Cn(r.dom,"innerHtml")||r.components&&r.components.length>0)&&o.push(r)):o.push(r)}),o.length>0&&n.push(o),Ae(n,r=>({dom:{tag:"div",classes:["tox-collection__group"]},components:r}))},Wx=(e,t,n)=>hg.parts.items({preprocess:o=>{const r=Ae(o,n);return e!=="auto"&&e>1?Ux({tag:"div",classes:["tox-collection__group"]},e)(r):M5(r,(a,i)=>t[i].type==="separator")}}),D5=(e,t,n=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(e===1?["tox-collection--list"]:["tox-collection--grid"])},components:[Wx(e,t,We)]}),wD=(e,t,n=!0)=>{const o=et("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Xv].concat(e===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:o}},components:[Wx(e,t,_5)]}},SD=(e,t,n)=>{const o=et("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(e===1?["tox-collection--list"]:["tox-collection--grid"])},components:[bD({i18n:tl.translate,placeholder:n.placeholder}),{dom:{tag:"div",classes:[...e===1?["tox-collection--list"]:["tox-collection--grid"],Xv],attributes:{id:o}},components:[Wx(e,t,_5)]}]}},xD=(e,t=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[hg.parts.items({preprocess:n=>M5(n,(o,r)=>e[r].type==="separator")})]}),Jv=e=>Kn(e,t=>"icon"in t&&t.icon!==void 0),od=e=>(console.error(di(e)),console.log(e),v.none()),CD=(e,t,n,o,r)=>{const a=xD(n);return{value:e,dom:a.dom,components:a.components,items:n}},jx=(e,t,n,o,r)=>{const a=()=>r.menuType!=="searchable"?D5(o,n):r.searchMode.searchMode==="search-with-field"?SD(o,n,r.searchMode):wD(o,n);if(r.menuType==="color"){const i=vD(o);return{value:e,dom:i.dom,components:i.components,items:n}}else if(r.menuType==="normal"&&o==="auto"){const i=D5(o,n);return{value:e,dom:i.dom,components:i.components,items:n}}else if(r.menuType==="normal"||r.menuType==="searchable"){const i=a();return{value:e,dom:i.dom,components:i.components,items:n}}else if(r.menuType==="listpreview"&&o!=="auto"){const i=yD(o);return{value:e,dom:i.dom,components:i.components,items:n}}else return{value:e,dom:dD(t,o,r.menuType),components:mD,items:n}},Ns=Ts("type"),Gx=Ts("name"),qx=Ts("label"),sd=Ts("text"),$5=Ts("title"),F5=Ts("icon"),A1=Ts("value"),TD=ta("fetch"),kD=ta("getSubmenuItems"),np=ta("onAction"),ED=ta("onItemAction"),yg=Is("onSetup",()=>se),OD=dr("name"),mm=dr("text"),Sl=dr("icon"),Qv=dr("tooltip"),Kx=dr("label"),AD=dr("shortcut"),_D=gi("select"),e2=mr("active",!1),MD=mr("borderless",!1),Jl=mr("enabled",!0),t2=mr("primary",!1),R5=e=>oe("columns",e),Yx=oe("meta",{}),Xx=Is("onAction",se),wg=e=>wa("type",e),Jx=e=>ur("name","name",ml(()=>et(`${e}-name`)),nr),DD=e=>ur("value","value",ml(()=>et(`${e}-value`)),ec()),B5=xt([Ns,mm]),$D=e=>as("separatormenuitem",B5,e),FD=xt([wg("autocompleteitem"),e2,Jl,Yx,A1,mm,Sl]),RD=e=>as("Autocompleter.Separator",B5,e),BD=e=>as("Autocompleter.Item",FD,e),_1=[Jl,Qv,Sl,mm,yg],ID=xt([Ns,np].concat(_1)),I5=e=>as("toolbarbutton",ID,e),Qx=[e2].concat(_1),HD=xt(Qx.concat([Ns,np])),H5=e=>as("ToggleButton",HD,e),P5=[Is("predicate",Te),Sa("scope","node",["node","editor"]),Sa("position","selection",["node","selection","line"])],PD=_1.concat([wg("contextformbutton"),t2,np,Mr("original",We)]),LD=Qx.concat([wg("contextformbutton"),t2,np,Mr("original",We)]),ND=_1.concat([wg("contextformbutton")]),VD=Qx.concat([wg("contextformtogglebutton")]),zD=or("type",{contextformbutton:PD,contextformtogglebutton:LD}),ZD=xt([wg("contextform"),Is("initValue",$("")),Kx,Cc("commands",zD),Ua("launch",or("type",{contextformbutton:ND,contextformtogglebutton:VD}))].concat(P5)),UD=e=>as("ContextForm",ZD,e),WD=xt([wg("contexttoolbar"),Ts("items")].concat(P5)),jD=e=>as("ContextToolbar",WD,e),GD=[Ns,Ts("src"),dr("alt"),na("classes",[],nr)],qD=xt(GD),KD=[Ns,sd,OD,na("classes",["tox-collection__item-label"],nr)],YD=xt(KD),L5=$m(()=>ui("type",{cardimage:qD,cardtext:YD,cardcontainer:XD})),XD=xt([Ns,wa("direction","horizontal"),wa("align","left"),wa("valign","middle"),Cc("items",L5)]),op=[Jl,mm,AD,DD("menuitem"),Yx],JD=xt([Ns,Kx,Cc("items",L5),yg,Xx].concat(op)),QD=e=>as("cardmenuitem",JD,e),e$=xt([Ns,e2,Sl].concat(op)),t$=e=>as("choicemenuitem",e$,e),N5=[Ns,Ts("fancytype"),Xx],n$=[oe("initData",{})].concat(N5),o$=[gi("select"),Bm("initData",{},[mr("allowCustomColors",!0),wa("storageKey","default"),Rm("colors",ec())])].concat(N5),s$=or("fancytype",{inserttable:n$,colorswatch:o$}),r$=e=>as("fancymenuitem",s$,e),c$=xt([Ns,yg,Xx,Sl].concat(op)),a$=e=>as("menuitem",c$,e),l$=xt([Ns,kD,yg,Sl].concat(op)),i$=e=>as("nestedmenuitem",l$,e),u$=xt([Ns,Sl,e2,yg,np].concat(op)),d$=e=>as("togglemenuitem",u$,e),e4=(e,t,n)=>{const o=vc(e.element,"."+n);if(o.length>0){const r=ne(o,a=>{const i=a.dom.getBoundingClientRect().top,d=o[0].dom.getBoundingClientRect().top;return Math.abs(i-d)>t}).getOr(o.length);return v.some({numColumns:r,numRows:Math.ceil(o.length/r)})}else return v.none()},V5=(e,t)=>He([nn(e,t)]),M1={namedEvents:V5,unnamedEvents:e=>V5(et("unnamed-events"),e)},z5=et("tooltip.exclusive"),D1=et("tooltip.show"),$1=et("tooltip.hide"),Z5=(e,t,n)=>{e.getSystem().broadcastOn([z5],{})};var m$=Object.freeze({__proto__:null,hideAllExclusive:Z5,setComponents:(e,t,n,o)=>{n.getTooltip().each(r=>{r.getSystem().isConnected()&&Kt.set(r,o)})}}),g$=Object.freeze({__proto__:null,events:(e,t)=>{const n=r=>{t.getTooltip().each(a=>{Gl(a),e.onHide(r,a),t.clearTooltip()}),t.clearTimer()},o=r=>{if(!t.isShowing()){Z5(r);const a=e.lazySink(r).getOrDie(),i=r.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Io(e.mode==="normal"?[xe(oa(),d=>{to(r,D1)}),xe(Rd(),d=>{to(r,$1)})]:[]),behaviours:He([Kt.config({})])});t.setTooltip(i),Xu(a,i),e.onShow(r,i),cc.position(a,i,{anchor:e.anchor(r)})}};return Io(ie([[xe(D1,r=>{t.resetTimer(()=>{o(r)},e.delay)}),xe($1,r=>{t.resetTimer(()=>{n(r)},e.delay)}),xe(Bu(),(r,a)=>{const i=a;i.universal||Sn(i.channels,z5)&&n(r)}),zl(r=>{n(r)})],e.mode==="normal"?[xe($r(),r=>{to(r,D1)}),xe(Ni(),r=>{to(r,$1)}),xe(oa(),r=>{to(r,D1)}),xe(Rd(),r=>{to(r,$1)})]:[xe(Rp(),(r,a)=>{to(r,D1)}),xe(Bp(),r=>{to(r,$1)})]]))}}),h$=[Ce("lazySink"),Ce("tooltipDom"),oe("exclusive",!0),oe("tooltipComponents",[]),oe("delay",300),Sa("mode","normal",["normal","follow-highlight"]),oe("anchor",e=>({type:"hotspot",hotspot:e,layouts:{onLtr:$([hr,sc,sr,Oc,Br,Ac]),onRtl:$([hr,sc,sr,Oc,Br,Ac])}})),Vn("onHide"),Vn("onShow")],p$=Object.freeze({__proto__:null,init:()=>{const e=On(),t=On(),n=()=>{e.on(clearTimeout)},o=(a,i)=>{n(),e.set(setTimeout(a,i))},r=$("not-implemented");return Zc({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:n,resetTimer:o,readState:r})}});const U5=rr({fields:h$,name:"tooltipping",active:g$,state:p$,apis:m$}),f$=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),W5="silver.readonly",b$=xt([_p("readonly")]),n2=(e,t)=>{const o=e.mainUi.outerContainer.element,r=[e.mainUi.mothership,...e.uiMotherships];t&&Ve(r,a=>{a.broadcastOn([wi()],{target:o})}),Ve(r,a=>{a.broadcastOn([W5],{readonly:t})})},j5=(e,t)=>{e.on("init",()=>{e.mode.isReadOnly()&&n2(t,!0)}),e.on("SwitchMode",()=>n2(t,e.mode.isReadOnly())),PT(e)&&e.mode.set("readonly")},fr=()=>_c.config({channels:{[W5]:{schema:b$,onReceive:(e,t)=>{Dt.set(e,t.readonly)}}}}),Ql={item:e=>Dt.config({disabled:e,disableClass:"tox-collection__item--state-disabled"}),button:e=>Dt.config({disabled:e}),splitButton:e=>Dt.config({disabled:e,disableClass:"tox-tbtn--disabled"}),toolbarButton:e=>Dt.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1})},o2=(e,t)=>{const n=e.getApi(t);return o=>{o(n)}},gm=(e,t)=>Go(n=>{o2(e,n)(r=>{const a=e.onSetup(r);Re(a)&&t.set(a)})}),hm=(e,t)=>zl(n=>o2(e,n)(t.get())),v$=(e,t)=>qa((n,o)=>{o2(e,n)(e.onAction),!e.triggersSubmenu&&t===Ci.CLOSE_ON_EXECUTE&&(n.getSystem().isConnected()&&to(n,Gg()),o.stop())}),y$={[zc()]:["disabling","alloy.base.behaviour","toggling","item-events"]},sp=is,rp=(e,t,n,o)=>{const r=m(se);return{type:"item",dom:t.dom,components:sp(t.optComponents),data:e.data,eventOrder:y$,hasSubmenu:e.triggersSubmenu,itemBehaviours:He([nn("item-events",[v$(e,n),gm(e,r),hm(e,r)]),Ql.item(()=>!e.enabled||o.isDisabled()),fr(),Kt.config({})].concat(e.itemBehaviours))}},cp=e=>({value:e.value,meta:{text:e.text.getOr(""),...e.meta}}),G5=e=>{const t=Qh.os.isMacOS()||Qh.os.isiOS(),r=t?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},a=e.split("+"),i=Ae(a,d=>{const g=d.toLowerCase().trim();return Cn(r,g)?r[g]:d});return t?i.join(""):i.join("+")},t4=(e,t,n=[f5])=>Xl(e,{tag:"div",classes:n},t),q5=e=>({dom:{tag:"div",classes:[zx]},components:[Os(tl.translate(e))]}),K5=(e,t)=>({dom:{tag:"div",classes:t,innerHtml:e}}),w$=(e,t)=>({dom:{tag:"div",classes:[zx]},components:[{dom:{tag:e.tag,styles:e.styles},components:[Os(tl.translate(t))]}]}),S$=e=>({dom:{tag:"div",classes:[nD]},components:[Os(G5(e))]}),Y5=e=>t4("checkmark",e,[oD]),x$=e=>t4("chevron-right",e,[b5]),C$=e=>t4("chevron-down",e,[b5]),T$=(e,t)=>{const n=e.direction==="vertical"?sD:y5,o=e.align==="left"?cD:rD;return{dom:{tag:"div",classes:[v5,n,o,(()=>{switch(e.valign){case"top":return aD;case"middle":return lD;case"bottom":return iD}})()]},components:t}},k$=(e,t,n)=>({dom:{tag:"img",classes:t,attributes:{src:e,alt:n.getOr("")}}}),E$=(e,t,n)=>{const o="custom",r="remove",a=e.ariaLabel,i=e.value,d=e.iconContent.map(b=>Z7(b,t.icons,n));return{dom:(()=>{const b=Vx,w=d.getOr(""),k={tag:"div",attributes:a.map(A=>({title:t.translate(A)})).getOr({}),classes:[b]};return i===o?{...k,tag:"button",classes:[...k.classes,"tox-swatches__picker-btn"],innerHtml:w}:i===r?{...k,classes:[...k.classes,"tox-swatch--remove"],innerHtml:w}:rn(i)?{...k,attributes:{...k.attributes,"data-mce-color":i},styles:{"background-color":i},innerHtml:w}:k})(),optComponents:[]}},X5=e=>{const t=e.map(n=>({attributes:{title:tl.translate(n),id:et("menu-item")}})).getOr({});return{tag:"div",classes:[Nx,qv],...t}},O$=(e,t,n,o)=>{const r={tag:"div",classes:[f5]},a=k=>Xl(k,r,t.icons,o),i=()=>v.some({dom:r}),d=n?e.iconContent.map(a).orThunk(i):v.none(),g=e.checkMark,b=v.from(e.meta).fold(()=>q5,k=>Cn(k,"style")?on(w$,k.style):q5),w=e.htmlContent.fold(()=>e.textContent.map(b),k=>v.some(K5(k,[zx])));return{dom:X5(e.ariaLabel),optComponents:[d,w,e.shortcutContent.map(S$),g,e.caret]}},F1=(e,t,n,o=v.none())=>e.presets==="color"?E$(e,t,o):O$(e,t,n,o),J5=(e,t)=>Xe(e,"tooltipWorker").map(n=>[U5.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:o=>({type:"submenu",item:o,overrides:{maxHeightFunction:qd}}),mode:"follow-highlight",onShow:(o,r)=>{n(a=>{U5.setComponents(o,[z0({element:q.fromDom(a)})])})}})]).getOr([]),A$=e=>Jh.DOM.encode(e),Q5=(e,t)=>{const n=tl.translate(e),o=A$(n);if(t.length>0){const r=new RegExp(f$(t),"gi");return o.replace(r,a=>`<span class="tox-autocompleter-highlight">${a}</span>`)}else return o},_$=(e,t,n,o,r,a,i,d=!0)=>{const g=F1({presets:o,textContent:v.none(),htmlContent:n?e.text.map(b=>Q5(b,t)):v.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:v.none(),checkMark:v.none(),caret:v.none(),value:e.value},i.providers,d,e.icon);return rp({data:cp(e),enabled:e.enabled,getApi:$({}),onAction:b=>r(e.value,e.meta),onSetup:$(se),triggersSubmenu:!1,itemBehaviours:J5(e.meta,i)},g,a,i.providers)},ek=(e,t)=>Ae(e,n=>{switch(n.type){case"cardcontainer":return T$(n,ek(n.items,t));case"cardimage":return k$(n.src,n.classes,n.alt);case"cardtext":const r=n.name.exists(a=>Sn(t.cardText.highlightOn,a))?v.from(t.cardText.matchText).getOr(""):"";return K5(Q5(n.text,r),n.classes)}}),M$=(e,t,n,o)=>{const r=i=>({isEnabled:()=>!Dt.isDisabled(i),setEnabled:d=>{Dt.set(i,!d),Ve(vc(i.element,"*"),g=>{i.getSystem().getByDom(g).each(b=>{b.hasConfigured(Dt)&&Dt.set(b,!d)})})}}),a={dom:X5(e.label),optComponents:[v.some({dom:{tag:"div",classes:[v5,y5]},components:ek(e.items,o)})]};return rp({data:cp({text:v.none(),...e}),enabled:e.enabled,getApi:r,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:v.from(o.itemBehaviours).getOr([])},a,t,n.providers)},D$=(e,t,n,o,r,a,i,d=!0)=>{const g=w=>({setActive:x=>{fn.set(w,x)},isActive:()=>fn.isOn(w),isEnabled:()=>!Dt.isDisabled(w),setEnabled:x=>Dt.set(w,!x)}),b=F1({presets:n,textContent:t?e.text:v.none(),htmlContent:v.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:v.none(),checkMark:t?v.some(Y5(i.icons)):v.none(),caret:v.none(),value:e.value},i,d);return vo(rp({data:cp(e),enabled:e.enabled,getApi:g,onAction:w=>o(e.value),onSetup:w=>(w.setActive(r),se),triggersSubmenu:!1,itemBehaviours:[]},b,a,i),{toggling:{toggleClass:p5,toggleOnExecute:!1,selected:e.active,exclusive:!0}})},tk=t1(hx(),px()),nk=e=>({value:ck(e)}),ok=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,sk=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rk=e=>ok.test(e)||sk.test(e),ck=e=>Ir(e,"#").toUpperCase(),$$=e=>rk(e)?v.some({value:ck(e)}):v.none(),F$=e=>({value:e.value.replace(ok,(n,o,r,a)=>o+o+r+r+a+a)}),R$=e=>{const t=F$(e),n=sk.exec(t.value);return n===null?["FFFFFF","FF","FF","FF"]:n},n4=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},R1=e=>{const t=n4(e.red)+n4(e.green)+n4(e.blue);return nk(t)},ak=Math.min,lk=Math.max,s2=Math.round,B$=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,I$=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,pm=(e,t,n,o)=>({red:e,green:t,blue:n,alpha:o}),o4=e=>{const t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},ik=e=>{let t,n,o;const r=(e.hue||0)%360;let a=e.saturation/100,i=e.value/100;if(a=lk(0,ak(a,1)),i=lk(0,ak(i,1)),a===0)return t=n=o=s2(255*i),pm(t,n,o,1);const d=r/60,g=i*a,b=g*(1-Math.abs(d%2-1)),w=i-g;switch(Math.floor(d)){case 0:t=g,n=b,o=0;break;case 1:t=b,n=g,o=0;break;case 2:t=0,n=g,o=b;break;case 3:t=0,n=b,o=g;break;case 4:t=b,n=0,o=g;break;case 5:t=g,n=0,o=b;break;default:t=n=o=0}return t=s2(255*(t+w)),n=s2(255*(n+w)),o=s2(255*(o+w)),pm(t,n,o,1)},B1=e=>{const t=R$(e),n=parseInt(t[1],16),o=parseInt(t[2],16),r=parseInt(t[3],16);return pm(n,o,r,1)},uk=(e,t,n,o)=>{const r=parseInt(e,10),a=parseInt(t,10),i=parseInt(n,10),d=parseFloat(o);return pm(r,a,i,d)},s4=e=>{if(e==="transparent")return v.some(pm(0,0,0,0));const t=B$.exec(e);if(t!==null)return v.some(uk(t[1],t[2],t[3],"1"));const n=I$.exec(e);return n!==null?v.some(uk(n[1],n[2],n[3],n[4])):v.none()},dk=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,mk=pm(255,0,0,1),H$=e=>{e.dispatch("SkinLoaded")},P$=(e,t)=>{e.dispatch("SkinLoadError",t)},L$=e=>{e.dispatch("ResizeEditor")},r4=(e,t)=>{e.dispatch("ResizeContent",t)},N$=(e,t)=>{e.dispatch("ScrollContent",t)},gk=(e,t)=>{e.dispatch("TextColorChange",t)},V$=(e,t)=>{e.dispatch("AfterProgressState",{state:t})},z$=(e,t)=>e.dispatch("ResolveName",{name:t.nodeName.toLowerCase(),target:t}),Z$=(e,t)=>{e.dispatch("ToggleToolbarDrawer",{state:t})},U$=(e,t)=>{e.dispatch("StylesTextUpdate",t)},W$=(e,t)=>{e.dispatch("AlignTextUpdate",t)},j$=(e,t)=>{e.dispatch("FontSizeTextUpdate",t)},G$=(e,t)=>{e.dispatch("FontSizeInputTextUpdate",t)},q$=(e,t)=>{e.dispatch("BlocksTextUpdate",t)},K$=(e,t)=>{e.dispatch("FontFamilyTextUpdate",t)},r2=(e,t)=>()=>{e(),t()},Dc=e=>Sg(e,"NodeChange",t=>{t.setEnabled(e.selection.isEditable())}),Y$=(e,t)=>n=>{const o=vi(),r=()=>{n.setActive(e.formatter.match(t));const a=e.formatter.formatChanged(t,n.setActive);o.set(a)};return e.initialized?r():e.once("init",r),()=>{e.off("init",r),o.clear()}},c2=(e,t)=>n=>{const o=Dc(e)(n),r=Y$(e,t)(n);return()=>{o(),r()}},Sg=(e,t,n)=>o=>{const r=()=>n(o),a=()=>{n(o),e.on(t,r)};return e.initialized?a():e.once("init",a),()=>{e.off("init",a),e.off(t,r)}},hk=e=>t=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("mceToggleFormat",!1,t.format)})},Da=(e,t)=>()=>e.execCommand(t);var xg=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const pk={},X$=(e,t=10)=>{const n=xg.getItem(e),o=ye(n)?JSON.parse(n):[],a=(b=>t-b.length<0?b.slice(0,t):b)(o),i=b=>{kt(a,b).each(d),a.unshift(b),a.length>t&&a.pop(),xg.setItem(e,JSON.stringify(a))},d=b=>{a.splice(b,1)};return{add:i,state:()=>a.slice(0)}},fk=e=>Xe(pk,e).getOrThunk(()=>{const t=`tinymce-custom-colors-${e}`,n=xg.getItem(t);if(yn(n)){const r=xg.getItem("tinymce-custom-colors");xg.setItem(t,rn(r)?r:"[]")}const o=X$(t,10);return pk[e]=o,o}),J$=e=>Ae(fk(e).state(),t=>({type:"choiceitem",text:t,icon:"checkmark",value:t})),bk=(e,t)=>{fk(e).add(t)},I1=(e,t,n)=>({hue:e,saturation:t,value:n}),c4=e=>{let t=0,n=0,o=0;const r=e.red/255,a=e.green/255,i=e.blue/255,d=Math.min(r,Math.min(a,i)),g=Math.max(r,Math.max(a,i));if(d===g)return o=d,I1(0,0,o*100);const b=r===d?a-i:i===d?r-a:i-r;return t=r===d?3:i===d?1:5,t=60*(t-b/(g-d)),n=(g-d)/g,o=g,I1(Math.round(t),Math.round(n*100),Math.round(o*100))},Q$=e=>c4(B1(e)),vk=e=>R1(ik(e)),eF=e=>$$(e).orThunk(()=>s4(e).map(R1)).getOrThunk(()=>{const t=document.createElement("canvas");t.height=1,t.width=1;const n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.fillStyle="#FFFFFF",n.fillStyle=e,n.fillRect(0,0,1,1);const o=n.getImageData(0,0,1,1).data,r=o[0],a=o[1],i=o[2],d=o[3];return R1(pm(r,a,i,d))}),a4="forecolor",l4="hilitecolor",tF=5,nF=e=>{const t=[];for(let n=0;n<e.length;n+=2)t.push({text:e[n+1],value:"#"+eF(e[n]).value,icon:"checkmark",type:"choiceitem"});return t},Qi=e=>t=>t.options.get(e),i4="#000000",oF=e=>{const t=e.options.register,n=r=>tt(r,ye)?{value:nF(r),valid:!0}:{valid:!1,message:"Must be an array of strings."},o=r=>jt(r)&&r>0?{value:r,valid:!0}:{valid:!1,message:"Must be a positive number."};t("color_map",{processor:n,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),t("color_map_background",{processor:n}),t("color_map_foreground",{processor:n}),t("color_cols",{processor:o,default:u4(e)}),t("color_cols_foreground",{processor:o,default:yk(e,a4)}),t("color_cols_background",{processor:o,default:yk(e,l4)}),t("custom_colors",{processor:"boolean",default:!0}),t("color_default_foreground",{processor:"string",default:i4}),t("color_default_background",{processor:"string",default:i4})},a2=(e,t)=>t===a4&&e.options.isSet("color_map_foreground")?Qi("color_map_foreground")(e):t===l4&&e.options.isSet("color_map_background")?Qi("color_map_background")(e):Qi("color_map")(e),u4=(e,t="default")=>Math.max(tF,Math.ceil(Math.sqrt(a2(e,t).length))),yk=(e,t)=>{const n=Qi("color_cols")(e),o=u4(e,t);return n===u4(e)?o:n},wk=(e,t="default")=>Math.round(t===a4?Qi("color_cols_foreground")(e):t===l4?Qi("color_cols_background")(e):Qi("color_cols")(e)),Sk=Qi("custom_colors"),sF=Qi("color_default_foreground"),rF=Qi("color_default_background"),cF="rgba(0, 0, 0, 0)",aF=e=>s4(e).exists(t=>t.alpha!==0),lF=e=>Ca(e,t=>{if(qt(t)){const n=Fo(t,"background-color");return $s(aF(n),n)}else return v.none()}).getOr(cF),xk=(e,t)=>{const n=q.fromDom(e.selection.getStart()),o=t==="hilitecolor"?lF(n):Fo(n,"color");return s4(o).map(r=>"#"+R1(r).value)},iF=(e,t,n)=>{e.undoManager.transact(()=>{e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})},uF=(e,t)=>{e.undoManager.transact(()=>{e.focus(),e.formatter.remove(t,{value:null},void 0,!0),e.nodeChanged()})},dF=e=>{e.addCommand("mceApplyTextcolor",(t,n)=>{iF(e,t,n)}),e.addCommand("mceRemoveTextcolor",t=>{uF(e,t)})},Ck=e=>{const t="choiceitem",n={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[n,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[n]},d4=(e,t,n,o)=>{n==="custom"?_k(e)(a=>{a.each(i=>{bk(t,i),e.execCommand("mceApplyTextcolor",t,i),o(i)})},xk(e,t).getOr(i4)):n==="remove"?(o(""),e.execCommand("mceRemoveTextcolor",t)):(o(n),e.execCommand("mceApplyTextcolor",t,n))},m4=(e,t,n)=>e.concat(J$(t).concat(Ck(n))),Tk=(e,t,n)=>o=>{o(m4(e,t,n))},g4=(e,t,n)=>{const o=t==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";e.setIconFill(o,n)},kk=(e,t)=>{e.setTooltip(t)},Ek=(e,t)=>n=>{const o=xk(e,t);return Ds(o,n.toUpperCase())},h4=(e,t,n)=>{if(N(n))return t==="forecolor"?"Text color":"Background color";const o=t==="forecolor"?"Text color {0}":"Background color {0}",r=m4(a2(e,t),t,!1),a=Q(r,i=>i.value===n).getOr({text:""}).text;return e.translate([o,e.translate(a)])},Ok=(e,t,n,o)=>{e.ui.registry.addSplitButton(t,{tooltip:h4(e,n,o.get()),presets:"color",icon:t==="forecolor"?"text-color":"highlight-bg-color",select:Ek(e,n),columns:wk(e,n),fetch:Tk(a2(e,n),n,Sk(e)),onAction:r=>{d4(e,n,o.get(),se)},onItemAction:(r,a)=>{d4(e,n,a,i=>{o.set(i),gk(e,{name:t,color:i})})},onSetup:r=>{g4(r,t,o.get());const a=i=>{i.name===t&&(g4(r,i.name,i.color),kk(r,h4(e,n,i.color)))};return e.on("TextColorChange",a),r2(Dc(e)(r),()=>{e.off("TextColorChange",a)})}})},Ak=(e,t,n,o,r)=>{e.ui.registry.addNestedMenuItem(t,{text:o,icon:t==="forecolor"?"text-color":"highlight-bg-color",onSetup:a=>(kk(a,h4(e,n,r.get())),g4(a,t,r.get()),Dc(e)(a)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:Ek(e,n),initData:{storageKey:n},onAction:a=>{d4(e,n,a.value,i=>{r.set(i),gk(e,{name:t,color:i})})}}]})},_k=e=>(t,n)=>{let o=!1;const r=d=>{const b=d.getData().colorpicker;o?(t(v.from(b)),d.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",b]))},a=(d,g)=>{g.name==="hex-valid"&&(o=g.value)},i={colorpicker:n};e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onAction:a,onSubmit:r,onClose:se,onCancel:()=>{t(v.none())}})},mF=e=>{dF(e);const t=sF(e),n=rF(e),o=m(t),r=m(n);Ok(e,"forecolor","forecolor",o),Ok(e,"backcolor","hilitecolor",r),Ak(e,"forecolor","forecolor","Text color",o),Ak(e,"backcolor","hilitecolor","Background color",r)},p4=(e,t,n,o,r,a,i,d)=>{const g=Jv(t),w=gF(t,n,o,r!=="color"?"normal":"color",a,i,d);return jx(e,g,w,o,{menuType:r})},gF=(e,t,n,o,r,a,i)=>is(Ae(e,d=>d.type==="choiceitem"?t$(d).fold(od,g=>v.some(D$(g,n===1,o,t,a(g.value),r,i,Jv(e)))):v.none())),l2=(e,t)=>{const n=bg(t);return e===1?{mode:"menu",moveOnTab:!0}:e==="auto"?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(t==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:r=>t==="color"?As(r.element,"[aria-checked=true]"):v.none()}},hF=(e,t)=>e===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:e==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:t==="color"?".tox-swatches__row":".tox-collection__group",cell:t==="color"?`.${Vx}`:`.${qv}`}},pF=(e,t)=>{const n=fF(e,t),o=t.colorinput.getColorCols(e.initData.storageKey),r="color",i={...p4(et("menu-value"),n,d=>{e.onAction({value:d})},o,r,Ci.CLOSE_ON_EXECUTE,e.select.getOr(Te),t.shared.providers),markers:bg(r),movement:l2(o,r)};return{type:"widget",data:{value:et("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[tk.widget(hg.sketch(i))]}},fF=(e,t)=>{const n=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold(()=>m4(t.colorinput.getColors(e.initData.storageKey),e.initData.storageKey,n),o=>o.concat(Ck(n)))},Mk=et("cell-over"),Dk=et("cell-execute"),bF=e=>(t,n)=>e.shared.providers.translate(["{0} columns, {1} rows",n,t]),vF=(e,t,n)=>{const o=i=>yt(i,Mk,{row:e,col:t}),r=i=>yt(i,Dk,{row:e,col:t}),a=(i,d)=>{d.stop(),r(i)};return Ur({dom:{tag:"div",attributes:{role:"button","aria-label":n}},behaviours:He([nn("insert-table-picker-cell",[xe(oa(),Ht.focus),xe(zc(),r),xe(Li(),a),xe(Pm(),a)]),fn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ht.config({onFocus:o})])})},yF=(e,t,n)=>{const o=[];for(let r=0;r<t;r++){const a=[];for(let i=0;i<n;i++){const d=e(r+1,i+1);a.push(vF(r,i,d))}o.push(a)}return o},wF=(e,t,n,o,r)=>{for(let a=0;a<o;a++)for(let i=0;i<r;i++)fn.set(e[a][i],a<=t&&i<=n)},SF=e=>Me(e,t=>Ae(t,ra)),$k=(e,t)=>Os(`${t}x${e}`),xF={inserttable:(e,t)=>{const r=bF(t),a=yF(r,10,10),i=$k(0,0),d=go({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[i],behaviours:He([Kt.config({})])});return{type:"widget",data:{value:et("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[tk.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:SF(a).concat(d.asSpec()),behaviours:He([nn("insert-table-picker",[Go(g=>{Kt.set(d.get(g),[i])}),Hp(Mk,(g,b,w)=>{const{row:x,col:k}=w.event;wF(a,x,k,10,10),Kt.set(d.get(g),[$k(x+1,k+1)])}),Hp(Dk,(g,b,w)=>{const{row:x,col:k}=w.event;e.onAction({numRows:x+1,numColumns:k+1}),to(g,Gg())})]),St.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:pF},CF=(e,t)=>Xe(xF,e.fancytype).map(n=>n(e,t)),TF=(e,t,n,o=!0,r=!1)=>{const a=r?C$(n.icons):x$(n.icons),i=g=>({isEnabled:()=>!Dt.isDisabled(g),setEnabled:b=>Dt.set(g,!b),setIconFill:(b,w)=>{As(g.element,`svg path[class="${b}"], rect[class="${b}"]`).each(x=>{Pt(x,"fill",w)})},setTooltip:b=>{const w=n.translate(b);ga(g.element,{"aria-label":w,title:w})}}),d=F1({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:v.none(),ariaLabel:e.text,caret:v.some(a),checkMark:v.none(),shortcutContent:e.shortcut},n,o);return rp({data:cp(e),getApi:i,enabled:e.enabled,onAction:se,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},d,t,n)},kF=(e,t,n,o=!0)=>{const r=i=>({isEnabled:()=>!Dt.isDisabled(i),setEnabled:d=>Dt.set(i,!d)}),a=F1({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:v.none(),ariaLabel:e.text,caret:v.none(),checkMark:v.none(),shortcutContent:e.shortcut},n,o);return rp({data:cp(e),getApi:r,enabled:e.enabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},a,t,n)},EF=e=>({type:"separator",dom:{tag:"div",classes:[qv,tD]},components:e.text.map(Os).toArray()}),OF=(e,t,n,o=!0)=>{const r=i=>({setActive:d=>{fn.set(i,d)},isActive:()=>fn.isOn(i),isEnabled:()=>!Dt.isDisabled(i),setEnabled:d=>Dt.set(i,!d)}),a=F1({iconContent:e.icon,textContent:e.text,htmlContent:v.none(),ariaLabel:e.text,checkMark:v.some(Y5(n.icons)),caret:v.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},n,o);return vo(rp({data:cp(e),enabled:e.enabled,getApi:r,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},a,t,n),{toggling:{toggleClass:p5,toggleOnExecute:!1,selected:e.active}})},AF=_$,Fk=EF,_F=kF,MF=TF,DF=OF,$F=CF,FF=M$;var RF=Object.freeze({__proto__:null,getCoupled:(e,t,n,o)=>n.getOrCreate(e,t,o),getExistingCoupled:(e,t,n,o)=>n.getExisting(e,t,o)}),BF=[fc("others",zg(mn.value,ec()))],IF=Object.freeze({__proto__:null,init:()=>{const e={},t=(a,i)=>{if(cn(a.others).length===0)throw new Error("Cannot find any known coupled components");return Xe(e,i)},n=(a,i,d)=>t(i,d).getOrThunk(()=>{const b=Xe(i.others,d).getOrDie("No information found for coupled component: "+d)(a),w=a.getSystem().build(b);return e[d]=w,w}),o=(a,i,d)=>t(i,d).orThunk(()=>(Xe(i.others,d).getOrDie("No information found for coupled component: "+d),v.none())),r=$({});return Zc({readState:r,getExisting:o,getOrCreate:n})}});const Ms=rr({fields:BF,name:"coupling",apis:RF,state:IF}),f4=e=>{let t=v.none(),n=[];const o=b=>f4(w=>{r(x=>{w(b(x))})}),r=b=>{i()?g(b):n.push(b)},a=b=>{i()||(t=v.some(b),d(n),n=[])},i=()=>t.isSome(),d=b=>{Ve(b,g)},g=b=>{t.each(w=>{setTimeout(()=>{b(w)},0)})};return e(a),{get:r,map:o,isReady:i}},HF={nu:f4,pure:e=>f4(t=>{t(e)})},PF=e=>{setTimeout(()=>{throw e},0)},ap=e=>{const t=g=>{e().then(g,PF)};return{map:g=>ap(()=>e().then(g)),bind:g=>ap(()=>e().then(b=>g(b).toPromise())),anonBind:g=>ap(()=>e().then(()=>g.toPromise())),toLazy:()=>HF.nu(t),toCached:()=>{let g=null;return ap(()=>(g===null&&(g=e()),g))},toPromise:e,get:t}},uc={nu:e=>ap(()=>new Promise(e)),pure:e=>ap(()=>Promise.resolve(e))},Rk=$("sink"),Bk=$(jc({name:Rk(),overrides:$({dom:{tag:"div"},behaviours:He([cc.config({useFixed:gt})]),events:Io([Pu(Ga()),Pu(ls()),Pu(Li())])})})),Ik=(e,t)=>{const n=e.getHotspot(t).getOr(t),o="hotspot",r=e.getAnchorOverrides();return e.layouts.fold(()=>({type:o,hotspot:n,overrides:r}),a=>({type:o,hotspot:n,overrides:r,layouts:a}))},LF=(e,t,n)=>{const o=e.fetch;return o(n).map(t)},NF=(e,t,n,o,r,a,i)=>{const d=LF(e,t,o),g=Hk(o,e);return d.map(b=>b.bind(w=>v.from(pg.sketch({...a.menu(),uid:Ld(""),data:w,highlightOnOpen:i,onOpenMenu:(x,k)=>{const A=g().getOrDie();cc.position(A,k,{anchor:n}),Hn.decloak(r)},onOpenSubmenu:(x,k,A)=>{const B=g().getOrDie();cc.position(B,A,{anchor:{type:"submenu",item:k}}),Hn.decloak(r)},onRepositionMenu:(x,k,A)=>{const B=g().getOrDie();cc.position(B,k,{anchor:n}),Ve(A,Z=>{cc.position(B,Z.triggeredMenu,{anchor:{type:"submenu",item:Z.triggeringItem}})})},onEscape:()=>(Ht.focus(o),Hn.close(r),v.some(!0))}))))},i2=(e,t,n,o,r,a,i)=>{const d=Ik(e,n);return NF(e,t,d,n,o,r,i).map(b=>(b.fold(()=>{Hn.isOpen(o)&&Hn.close(o)},w=>{Hn.cloak(o),Hn.open(o,w),a(o)}),o))},VF=(e,t,n,o,r,a,i)=>(Hn.close(o),uc.pure(o)),b4=(e,t,n,o,r,a)=>{const i=Ms.getCoupled(n,"sandbox");return(Hn.isOpen(i)?VF:i2)(e,t,n,i,o,r,a)},zF=(e,t,n)=>{const o=Dn.getCurrent(t).getOr(t),r=M(e.element);n?Je(o.element,"min-width",r+"px"):kl(o.element,r)},Hk=(e,t)=>e.getSystem().getByUid(t.uid+"-"+Rk()).map(n=>()=>mn.value(n)).getOrThunk(()=>t.lazySink.fold(()=>()=>mn.error(new Error("No internal sink is specified, nor could an external sink be found")),n=>()=>n(e))),Pk=e=>{Hn.getState(e).each(t=>{pg.repositionMenus(t)})},v4=(e,t,n)=>{const o=G0(),r=(d,g)=>{const b=Ik(e,t);o.link(t.element),e.matchWidth&&zF(b.hotspot,g,e.useMinWidth),e.onOpen(b,d,g),n!==void 0&&n.onOpen!==void 0&&n.onOpen(d,g)},a=(d,g)=>{o.unlink(t.element),n!==void 0&&n.onClose!==void 0&&n.onClose(d,g)},i=Hk(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:Ea.augment(e.sandboxBehaviours,[Ye.config({store:{mode:"memory",initialValue:t}}),Hn.config({onOpen:r,onClose:a,isPartOf:(d,g,b)=>Wi(g,b)||Wi(t,b),getAttachPoint:()=>i().getOrDie()}),Dn.config({find:d=>Hn.getState(d).bind(g=>Dn.getCurrent(g))}),_c.config({channels:{...cg({isExtraPart:Te}),...nm({doReposition:Pk})}})])}},Lk=e=>{const t=Ms.getCoupled(e,"sandbox");Pk(t)},y4=()=>[oe("sandboxClasses",[]),Ea.field("sandboxBehaviours",[Dn,_c,Hn,Ye])],ZF=$([Ce("dom"),Ce("fetch"),Vn("onOpen"),Wc("onExecute"),oe("getHotspot",v.some),oe("getAnchorOverrides",$({})),Ki(),pr("dropdownBehaviours",[fn,Ms,St,Ht]),Ce("toggleClass"),oe("eventOrder",{}),oo("lazySink"),oe("matchWidth",!1),oe("useMinWidth",!1),oo("role")].concat(y4())),UF=$([Qa({schema:[Gm(),oe("fakeFocus",!1)],name:"menu",defaults:e=>({onExecute:e.onExecute})}),Bk()]),WF=(e,t,n,o)=>{const r=w=>Xe(e.dom,"attributes").bind(x=>Xe(x,w)),a=w=>{Hn.getState(w).each(x=>{pg.highlightPrimary(x)})},i=(w,x,k)=>b4(e,We,w,o,x,k),d=w=>{i(w,a,Gc.HighlightMenuAndItem).get(se)},g={expand:w=>{fn.isOn(w)||i(w,se,Gc.HighlightNone).get(se)},open:w=>{fn.isOn(w)||i(w,se,Gc.HighlightMenuAndItem).get(se)},refetch:w=>Ms.getExistingCoupled(w,"sandbox").fold(()=>i(w,se,Gc.HighlightMenuAndItem).map(se),k=>i2(e,We,w,k,o,se,Gc.HighlightMenuAndItem).map(se)),isOpen:fn.isOn,close:w=>{fn.isOn(w)&&i(w,se,Gc.HighlightMenuAndItem).get(se)},repositionMenus:w=>{fn.isOn(w)&&Lk(w)}},b=(w,x)=>(Hu(w),v.some(!0));return{uid:e.uid,dom:e.dom,components:t,behaviours:Ks(e.dropdownBehaviours,[fn.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),Ms.config({others:{sandbox:w=>v4(e,w,{onOpen:()=>fn.on(w),onClose:()=>fn.off(w)})}}),St.config({mode:"special",onSpace:b,onEnter:b,onDown:(w,x)=>{if(xl.isOpen(w)){const k=Ms.getCoupled(w,"sandbox");a(k)}else xl.open(w);return v.some(!0)},onEscape:(w,x)=>xl.isOpen(w)?(xl.close(w),v.some(!0)):v.none()}),Ht.config({})]),events:Hv(v.some(d)),eventOrder:{...e.eventOrder,[zc()]:["disabling","toggling","alloy.base.behaviour"]},apis:g,domModification:{attributes:{"aria-haspopup":"true",...e.role.fold(()=>({}),w=>({role:w})),...e.dom.tag==="button"?{type:r("type").getOr("button")}:{}}}}},xl=ac({name:"Dropdown",configFields:ZF(),partFields:UF(),factory:WF,apis:{open:(e,t)=>e.open(t),refetch:(e,t)=>e.refetch(t),expand:(e,t)=>e.expand(t),close:(e,t)=>e.close(t),isOpen:(e,t)=>e.isOpen(t),repositionMenus:(e,t)=>e.repositionMenus(t)}}),jF=e=>{switch(e.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:e}}},GF=e=>{const t=Ye.getValue(e),n=Yv(e).map(A5);xl.refetch(t).get(()=>{const o=Ms.getCoupled(t,"sandbox");n.each(r=>Yv(o).each(a=>pD(a,r)))})},qF=(e,t)=>{KF(e).each(n=>{uy(e,n.element,t.event.eventType,t.event.interactionEvent)})},KF=e=>Hn.getState(e).bind(no.getHighlighted).bind(no.getHighlighted),YF=e=>Tc(e.element,Xv)?v.some(e.element):As(e.element,"."+Xv),Nk=(e,t,n)=>{O5(e).each(o=>{fD(o,n),YF(t).each(a=>{C(a,"id").each(i=>Pt(o.element,"aria-controls",i))})}),Pt(n.element,"aria-selected","true")},XF=(e,t,n)=>{Pt(n.element,"aria-selected","false")},JF=e=>{O5(e).each(t=>Ht.focus(t))},QF=e=>Ms.getExistingCoupled(e,"sandbox").bind(Yv).map(A5).map(n=>n.fetchPattern).getOr("");var u2;(function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"})(u2||(u2={}));const eR=(e,t,n,o,r)=>{const a=n.shared.providers,i=d=>r?{...d,shortcut:v.none(),icon:d.text.isSome()?v.none():d.icon}:d;switch(e.type){case"menuitem":return a$(e).fold(od,d=>v.some(_F(i(d),t,a,o)));case"nestedmenuitem":return i$(e).fold(od,d=>v.some(MF(i(d),t,a,o,r)));case"togglemenuitem":return d$(e).fold(od,d=>v.some(DF(i(d),t,a,o)));case"separator":return $D(e).fold(od,d=>v.some(Fk(d)));case"fancymenuitem":return r$(e).fold(od,d=>$F(d,n));default:return console.error("Unknown item in general menu",e),v.none()}},tR=(e,t,n,o,r,a,i)=>{const d=o===1,g=!d||Jv(e);return is(Ae(e,b=>{switch(b.type){case"separator":return RD(b).fold(od,w=>v.some(Fk(w)));case"cardmenuitem":return QD(b).fold(od,w=>v.some(FF({...w,onAction:x=>{w.onAction(x),n(w.value,w.meta)}},r,a,{itemBehaviours:J5(w.meta,a),cardText:{matchText:t,highlightOn:i}})));case"autocompleteitem":default:return BD(b).fold(od,w=>v.some(AF(w,t,d,"normal",n,r,a,g)))}}))},Vk=(e,t,n,o,r,a)=>{const i=Jv(t),d=is(Ae(t,w=>{const x=A=>r?!Cn(A,"text"):i,k=A=>eR(A,n,o,x(A),r);return w.type==="nestedmenuitem"&&w.getSubmenuItems().length<=0?k({...w,enabled:!1}):k(w)})),g=jF(a);return(r?CD:jx)(e,i,d,1,g)},w4=e=>pg.singleData(e.value,e),nR=(e,t,n,o)=>{const r=l2(t,o),a=bg(o);return{data:w4({...e,movement:r,menuBehaviours:M1.unnamedEvents(t!=="auto"?[]:[Go((i,d)=>{e4(i,4,a.item).each(({numColumns:g,numRows:b})=>{St.setGridSize(i,b,g)})})])}),menu:{markers:bg(o),fakeFocus:n===u2.ContentFocus}}},oR=(e,t)=>h5(q.fromDom(t.startContainer)).map(n=>{const o=e.createRng();return o.selectNode(n.dom),o}),sR={register:(e,t)=>{const n=et("autocompleter"),o=m(!1),r=m(!1),a=Ur(ms.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:n}},components:[],fireDismissalEventInstead:{},inlineBehaviours:He([nn("dismissAutocompleter",[xe(Zi(),()=>w()),xe(Rp(),(re,J)=>{C(J.event.target,"id").each(K=>Pt(q.fromDom(e.getBody()),"aria-activedescendant",K))})])]),lazySink:t.getSink})),i=()=>ms.isOpen(a),d=r.get,g=()=>{if(i()){ms.hide(a),e.dom.remove(n,!1);const re=q.fromDom(e.getBody());C(re,"aria-owns").filter(J=>J===n).each(()=>{P(re,"aria-owns"),P(re,"aria-activedescendant")})}},b=()=>ms.getContent(a).bind(re=>Mt(re.components(),0)),w=()=>e.execCommand("mceAutocompleterClose"),x=re=>{const J=xn(re,K=>v.from(K.columns)).getOr(1);return Me(re,K=>{const ce=K.items;return tR(ce,K.matchText,(ke,be)=>{const he=e.selection.getRng();oR(e.dom,he).each(Be=>{const Le={hide:()=>w(),reload:Qt=>{g(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:Qt})}};o.set(!0),K.onAction(Le,Be,ke,be),o.set(!1)})},J,Ci.BUBBLE_TO_SANDBOX,t,K.highlightOn)})},k=(re,J)=>{J7(q.fromDom(e.getBody())).each(K=>{const ce=xn(re,ke=>v.from(ke.columns)).getOr(1);ms.showMenuAt(a,{anchor:{type:"node",root:q.fromDom(e.getBody()),node:v.from(K)}},nR(jx("autocompleter-value",!0,J,ce,{menuType:"normal"}),ce,u2.ContentFocus,"normal"))}),b().each(no.highlightFirst)},A=re=>{const J=x(re);J.length>0?(k(re,J),Pt(q.fromDom(e.getBody()),"aria-owns",n),e.inline||B()):g()},B=()=>{e.dom.get(n)&&e.dom.remove(n,!1);const re=e.getDoc().documentElement,J=e.selection.getNode(),K=py(a.element);Co(K,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${J.offsetTop}px`,left:`${J.offsetLeft}px`}),e.dom.add(re,K.dom),As(K,'[role="menu"]').each(ce=>{Nn(ce,"position"),Nn(ce,"max-height")})};e.on("AutocompleterStart",({lookupData:re})=>{r.set(!0),o.set(!1),A(re)}),e.on("AutocompleterUpdate",({lookupData:re})=>A(re)),e.on("AutocompleterEnd",()=>{g(),r.set(!1),o.set(!1)});const Z={cancelIfNecessary:w,isMenuOpen:i,isActive:d,isProcessingAction:o.get,getMenu:b};Q7.setup(Z,e)}},rR=["visible","hidden","clip"],zk=e=>Vo(e).length>0&&!Sn(rR,e),Zk=e=>{if(Tr(e)){const t=Fo(e,"overflow-x"),n=Fo(e,"overflow-y");return zk(t)||zk(n)}else return!1},cR=e=>{const t=Ib(e,Zk),n=t.length===0?eo(e).map(jo).map(o=>Ib(o,Zk)).getOr([]):t;return Bt(n).map(o=>({element:o,others:n.slice(1)}))},Cg=(e,t)=>dm(e)?cR(t):v.none(),lp=e=>{const t=[...Ae(e.others,Rs),tr()];return Td(Rs(e.element),t)},H1=(e,t,n)=>fl(e,t,n).isSome(),Uk=(e,t)=>{let n=null;return{cancel:()=>{n!==null&&(clearTimeout(n),n=null)},schedule:(...a)=>{n=setTimeout(()=>{e.apply(null,a),n=null},t)}}},Wk=5,aR=400,jk=e=>{const t=e.raw;return t.touches===void 0||t.touches.length!==1?v.none():v.some(t.touches[0])},lR=(e,t)=>{const n=Math.abs(e.clientX-t.x),o=Math.abs(e.clientY-t.y);return n>Wk||o>Wk},iR=e=>{const t=On(),n=m(!1),o=Uk(b=>{e.triggerEvent(iy(),b),n.set(!0)},aR),r=b=>(jk(b).each(w=>{o.cancel();const x={x:w.clientX,y:w.clientY,target:b.target};o.schedule(b),n.set(!1),t.set(x)}),v.none()),a=b=>(o.cancel(),jk(b).each(w=>{t.on(x=>{lR(w,x)&&t.clear()})}),v.none()),i=b=>{o.cancel();const w=x=>Qn(x.target,b.target);return t.get().filter(w).map(x=>n.get()?(b.prevent(),!1):e.triggerEvent(Pm(),b))},d=Lt([{key:ja(),value:r},{key:$u(),value:a},{key:Mn(),value:i}]);return{fireIfReady:(b,w)=>Xe(d,w).bind(x=>x(b))}},uR=e=>e.raw.which===ox[0]&&!Sn(["input","textarea"],lo(e.target))&&!H1(e.target,'[contenteditable="true"]'),dR=(e,t)=>{const n={stopBackspace:!0,...t},o=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],r=iR(n),a=Ae(o.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),A=>rc(e,A,B=>{r.fireIfReady(B,A).each(re=>{re&&B.kill()}),n.triggerEvent(A,B)&&B.kill()})),i=On(),d=rc(e,"paste",A=>{r.fireIfReady(A,"paste").each(Z=>{Z&&A.kill()}),n.triggerEvent("paste",A)&&A.kill(),i.set(setTimeout(()=>{n.triggerEvent(Ru(),A)},0))}),g=rc(e,"keydown",A=>{n.triggerEvent("keydown",A)?A.kill():n.stopBackspace&&uR(A)&&A.prevent()}),b=rc(e,"focusin",A=>{n.triggerEvent("focusin",A)&&A.kill()}),w=On(),x=rc(e,"focusout",A=>{n.triggerEvent("focusout",A)&&A.kill(),w.set(setTimeout(()=>{n.triggerEvent(Ni(),A)},0))});return{unbind:()=>{Ve(a,A=>{A.unbind()}),g.unbind(),b.unbind(),x.unbind(),d.unbind(),i.on(clearTimeout),w.on(clearTimeout)}}},Gk=(e,t)=>{const n=Xe(e,"target").getOr(t);return m(n)},mR=(e,t)=>{const n=m(!1),o=m(!1);return{stop:()=>{n.set(!0)},cut:()=>{o.set(!0)},isStopped:n.get,isCut:o.get,event:e,setSource:t.set,getSource:t.get}},gR=e=>{const t=m(!1);return{stop:()=>{t.set(!0)},cut:se,isStopped:t.get,isCut:Te,event:e,setSource:Y("Cannot set source of a broadcasted event"),getSource:Y("Cannot get source of a broadcasted event")}},P1=E.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),qk=(e,t,n,o,r,a)=>{const i=e(t,o),d=mR(n,r);return i.fold(()=>(a.logEventNoHandlers(t,o),P1.complete()),g=>{const b=g.descHandler;return zm(b)(d),d.isStopped()?(a.logEventStopped(t,g.element,b.purpose),P1.stopped()):d.isCut()?(a.logEventCut(t,g.element,b.purpose),P1.complete()):Fs(g.element).fold(()=>(a.logNoParent(t,g.element,b.purpose),P1.complete()),x=>(a.logEventResponse(t,g.element,b.purpose),P1.resume(x)))})},Kk=(e,t,n,o,r,a)=>qk(e,t,n,o,r,a).fold(gt,i=>Kk(e,t,n,i,r,a),Te),hR=(e,t,n,o,r)=>{const a=Gk(n,o);return qk(e,t,n,o,a,r)},pR=(e,t,n)=>{const o=gR(t);return Ve(e,r=>{const a=r.descHandler;zm(a)(o)}),o.isStopped()},fR=(e,t,n,o)=>Yk(e,t,n,n.target,o),Yk=(e,t,n,o,r)=>{const a=Gk(n,o);return Kk(e,t,n,o,a,r)},bR=(e,t)=>({element:e,descHandler:t}),vR=(e,t)=>({id:e,descHandler:t}),yR=()=>{const e={},t=(i,d,g)=>{en(g,(b,w)=>{const x=e[w]!==void 0?e[w]:{};x[d]=Up(b,i),e[w]=x})},n=(i,d)=>Lm(d).bind(g=>Xe(i,g)).map(g=>bR(d,g));return{registerId:t,unregisterId:i=>{en(e,(d,g)=>{Cn(d,i)&&delete d[i]})},filterByType:i=>Xe(e,i).map(d=>hs(d,(g,b)=>vR(b,g))).getOr([]),find:(i,d,g)=>Xe(e,d).bind(b=>Ca(g,w=>n(b,w),i))}},wR=()=>{const e=yR(),t={},n=b=>{const w=b.element;return Lm(w).getOrThunk(()=>Vu("uid-",b.element))},o=(b,w)=>{const x=t[w];if(x===b)a(b);else throw new Error('The tagId "'+w+'" is already used by: '+Ui(x.element)+`
Cannot use it for: `+Ui(b.element)+`
The conflicting element is`+(Xn(x.element)?" ":" not ")+"already in the DOM")},r=b=>{const w=n(b);Ko(t,w)&&o(b,w);const x=[b];e.registerId(x,w,b.events),t[w]=b},a=b=>{Lm(b.element).each(w=>{delete t[w],e.unregisterId(w)})};return{find:(b,w,x)=>e.find(b,w,x),filter:b=>e.filterByType(b),register:r,unregister:a,getById:b=>Xe(t,b)}},Ti=la({name:"Container",factory:e=>{const{attributes:t,...n}=e.dom;return{uid:e.uid,dom:{tag:"div",attributes:{role:"presentation",...t},...n},components:e.components,behaviours:$h(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[oe("components",[]),pr("containerBehaviours",[]),oe("events",{}),oe("domModification",{}),oe("eventOrder",{})]}),S4=e=>{const t=J=>Fs(e.element).fold(gt,K=>Qn(J,K)),n=wR(),o=(J,K)=>n.find(t,J,K),r=dR(e.element,{triggerEvent:(J,K)=>uh(J,K.target,ce=>fR(o,J,K,ce))}),a={debugInfo:$("real"),triggerEvent:(J,K,ce)=>{uh(J,K,ke=>Yk(o,J,ce,K,ke))},triggerFocus:(J,K)=>{Lm(J).fold(()=>{aa(J)},ce=>{uh(pl(),J,ke=>(hR(o,pl(),{originator:K,kill:se,prevent:se,target:J},J,ke),!1))})},triggerEscape:(J,K)=>{a.triggerEvent("keydown",J.element,K.event)},getByUid:J=>Z(J),getByDom:J=>re(J),build:Ur,buildOrPatch:Xp,addToGui:J=>{g(J)},removeFromGui:J=>{b(J)},addToWorld:J=>{i(J)},removeFromWorld:J=>{d(J)},broadcast:J=>{k(J)},broadcastOn:(J,K)=>{A(J,K)},broadcastEvent:(J,K)=>{B(J,K)},isConnected:gt},i=J=>{J.connect(a),pn(J.element)||(n.register(J),Ve(J.components(),i),a.triggerEvent(Vi(),J.element,{target:J.element}))},d=J=>{pn(J.element)||(Ve(J.components(),d),n.unregister(J)),J.disconnect()},g=J=>{Xu(e,J)},b=J=>{Gl(J)},w=()=>{r.unbind(),va(e.element)},x=J=>{const K=n.filter(Bu());Ve(K,ce=>{const ke=ce.descHandler;zm(ke)(J)})},k=J=>{x({universal:!0,data:J})},A=(J,K)=>{x({universal:!1,channels:J,data:K})},B=(J,K)=>{const ce=n.filter(J);return pR(ce,K)},Z=J=>n.getById(J).fold(()=>mn.error(new Error('Could not find component with uid: "'+J+'" in system.')),mn.value),re=J=>{const K=Lm(J).getOr("not found");return Z(K)};return i(e),{root:e,element:e.element,destroy:w,add:g,remove:b,getByUid:Z,getByDom:re,addToWorld:i,removeFromWorld:d,broadcast:k,broadcastOn:A,broadcastEvent:B}},SR=(e,t)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ae(e.items,t.interpreter)}),xR=$([oe("prefix","form-field"),pr("fieldBehaviours",[Dn,Ye])]),CR=$([jc({schema:[Ce("dom")],name:"label"}),jc({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[Ce("text")],name:"aria-descriptor"}),Wr({factory:{sketch:e=>{const t=Qe(e,["factory"]);return e.factory.sketch(t)}},schema:[Ce("factory")],name:"field"})]),TR=(e,t,n,o)=>{const r=Ks(e.fieldBehaviours,[Dn.config({find:d=>Ao(d,e,"field")}),Ye.config({store:{mode:"manual",getValue:d=>Dn.getCurrent(d).bind(Ye.getValue),setValue:(d,g)=>{Dn.getCurrent(d).each(b=>{Ye.setValue(b,g)})}}})]),a=Io([Go((d,g)=>{const b=bv(d,e,["label","field","aria-descriptor"]);b.field().each(w=>{const x=et(e.prefix);b.label().each(k=>{Pt(k.element,"for",x),Pt(w.element,"id",x)}),b["aria-descriptor"]().each(k=>{const A=et(e.prefix);Pt(k.element,"id",A),Pt(w.element,"aria-describedby",A)})})})]),i={getField:d=>Ao(d,e,"field"),getLabel:d=>Ao(d,e,"label")};return{uid:e.uid,dom:e.dom,components:t,behaviours:r,events:a,apis:i}},ho=ac({name:"FormField",configFields:xR(),partFields:CR(),factory:TR,apis:{getField:(e,t)=>e.getField(t),getLabel:(e,t)=>e.getLabel(t)}});var kR=Object.freeze({__proto__:null,exhibit:(e,t)=>Uc({attributes:Lt([{key:t.tabAttr,value:"true"}])})}),ER=[oe("tabAttr","data-alloy-tabstop")];const gs=rr({fields:ER,name:"tabstopping",active:kR});var OR=tinymce.util.Tools.resolve("tinymce.html.Entities");const L1=(e,t,n,o)=>{const r=_R(e,t,n,o);return ho.sketch(r)},AR=(e,t)=>L1(e,t,[],[]),_R=(e,t,n,o)=>({dom:Xk(n),components:e.toArray().concat([t]),fieldBehaviours:He(o)}),MR=()=>Xk([]),Xk=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),fm=(e,t)=>ho.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Os(t.translate(e))]}),$a=et("form-component-change"),N1=et("form-close"),bm=et("form-cancel"),eu=et("form-action"),V1=et("form-submit"),x4=et("form-block"),C4=et("form-unblock"),Jk=et("form-tabchange"),Qk=et("form-resize"),DR=(e,t,n)=>{const o=e.label.map(A=>fm(A,t)),r=t.icons(),a=A=>{var B;return(B=r[A])!==null&&B!==void 0?B:A},i=A=>(B,Z)=>{fl(Z.event.target,"[data-collection-item-value]").each(re=>{A(B,Z,re,$o(re,"data-collection-item-value"))})},d=(A,B)=>{const Z=Ae(B,K=>{const ce=tl.translate(K.text),ke=e.columns===1?`<div class="tox-collection__item-label">${ce}</div>`:"",be=`<div class="tox-collection__item-icon">${a(K.icon)}</div>`,he={_:" "," - ":" ","-":" "},Be=ce.replace(/\_| \- |\-/g,Qt=>he[Qt]);return`<div class="tox-collection__item${t.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${OR.encodeAllRaw(K.value)}" title="${Be}" aria-label="${Be}">${be}${ke}</div>`}),re=e.columns!=="auto"&&e.columns>1?Mo(Z,e.columns):[Z],J=Ae(re,K=>`<div class="tox-collection__group">${K.join("")}</div>`);Nu(A.element,J.join(""))},g=i((A,B,Z,re)=>{B.stop(),t.isDisabled()||yt(A,eu,{name:e.name,value:re})}),b=[xe(oa(),i((A,B,Z)=>{aa(Z)})),xe(Li(),g),xe(Pm(),g),xe($r(),i((A,B,Z)=>{As(A.element,"."+O1).each(re=>{ys(re,O1)}),Es(Z,O1)})),xe(Mp(),i(A=>{As(A.element,"."+O1).each(B=>{ys(B,O1)})})),qa(i((A,B,Z,re)=>{yt(A,eu,{name:e.name,value:re})}))],w=(A,B)=>Ae(vc(A.element,".tox-collection__item"),B),x=ho.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(e.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:We},behaviours:He([Dt.config({disabled:t.isDisabled,onDisabled:A=>{w(A,B=>{Es(B,"tox-collection__item--state-disabled"),Pt(B,"aria-disabled",!0)})},onEnabled:A=>{w(A,B=>{ys(B,"tox-collection__item--state-disabled"),P(B,"aria-disabled")})}}),fr(),Kt.config({}),Ye.config({store:{mode:"memory",initialValue:n.getOr([])},onSetValue:(A,B)=>{d(A,B),e.columns==="auto"&&e4(A,5,"tox-collection__item").each(({numRows:Z,numColumns:re})=>{St.setGridSize(A,Z,re)}),to(A,Qk)}}),gs.config({}),St.config(hF(e.columns,"normal")),nn("collection-events",b)]),eventOrder:{[zc()]:["disabling","alloy.base.behaviour","collection-events"]}});return L1(o,x,["tox-form__group--collection"],[])},$R=["input","textarea"],eE=e=>{const t=lo(e);return Sn($R,t)},tE=(e,t)=>{const n=t.getRoot(e).getOr(e.element);ys(n,t.invalidClass),t.notify.each(o=>{eE(e.element)&&Pt(e.element,"aria-invalid",!1),o.getContainer(e).each(r=>{Nu(r,o.validHtml)}),o.onValid(e)})},nE=(e,t,n,o)=>{const r=t.getRoot(e).getOr(e.element);Es(r,t.invalidClass),t.notify.each(a=>{eE(e.element)&&Pt(e.element,"aria-invalid",!0),a.getContainer(e).each(i=>{Nu(i,o)}),a.onInvalid(e,o)})},oE=(e,t,n)=>t.validator.fold(()=>uc.pure(mn.value(!0)),o=>o.validate(e)),T4=(e,t,n)=>(t.notify.each(o=>{o.onValidate(e)}),oE(e,t).map(o=>e.getSystem().isConnected()?o.fold(r=>(nE(e,t,n,r),mn.error(r)),r=>(tE(e,t),mn.value(r))):mn.error("No longer in system")));var FR=Object.freeze({__proto__:null,markValid:tE,markInvalid:nE,query:oE,run:T4,isInvalid:(e,t)=>{const n=t.getRoot(e).getOr(e.element);return Tc(n,t.invalidClass)}}),RR=Object.freeze({__proto__:null,events:(e,t)=>e.validator.map(n=>Io([xe(n.onEvent,o=>{T4(o,e,t).get(We)})].concat(n.validateOnLoad?[Go(o=>{T4(o,e,t).get(se)})]:[]))).getOr({})}),BR=[Ce("invalidClass"),oe("getRoot",v.none),nc("notify",[oe("aria","alert"),oe("getContainer",v.none),oe("validHtml",""),Vn("onValid"),Vn("onInvalid"),Vn("onValidate")]),nc("validator",[Ce("validate"),oe("onEvent","input"),oe("validateOnLoad",!0)])];const tu=rr({fields:BR,name:"invalidating",active:RR,apis:FR,extra:{validation:e=>t=>{const n=Ye.getValue(t);return uc.pure(e(n))}}});var IR=Object.freeze({__proto__:null,events:()=>Io([p0(i0(),gt)]),exhibit:()=>Uc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const z1=rr({fields:[],name:"unselecting",active:IR}),HR=(e,t)=>xl.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:He([Ql.button(t.providers.isDisabled),fr(),z1.config({}),gs.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:n=>uc.nu(o=>e.fetch(o)).map(o=>v.from(w4(vo(p4(et("menu-value"),o,r=>{e.onItemAction(n,r)},e.columns,e.presets,Ci.CLOSE_ON_EXECUTE,Te,t.providers),{movement:l2(e.columns,e.presets)})))),parts:{menu:Kv(!1,1,e.presets)}}),sE=et("color-input-change"),rE=et("color-swatch-change"),cE=et("color-picker-cancel"),PR=(e,t,n,o)=>{const r=ho.parts.field({factory:vg,inputClasses:["tox-textfield"],data:o,onSetValue:b=>tu.run(b).get(se),inputBehaviours:He([Dt.config({disabled:t.providers.isDisabled}),fr(),gs.config({}),tu.config({invalidClass:"tox-textbox-field-invalid",getRoot:b=>Lr(b.element),notify:{onValid:b=>{const w=Ye.getValue(b);yt(b,sE,{color:w})}},validator:{validateOnLoad:!1,validate:b=>{const w=Ye.getValue(b);if(w.length===0)return uc.pure(mn.value(!0));{const x=q.fromTag("span");Je(x,"background-color",w);const k=bo(x,"background-color").fold(()=>mn.error("blah"),A=>mn.value(w));return uc.pure(k)}}}})]),selectOnFocus:!1}),a=e.label.map(b=>fm(b,t.providers)),i=(b,w)=>{yt(b,rE,{value:w})},d=(b,w)=>{g.getOpt(b).each(x=>{w==="custom"?n.colorPicker(k=>{k.fold(()=>to(x,cE),A=>{i(x,A),bk(e.storageKey,A)})},"#ffffff"):w==="remove"?i(x,""):i(x,w)})},g=go(HR({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Br,sr,hr],onLtr:()=>[sr,Br,hr]},components:[],fetch:Tk(n.getColors(e.storageKey),e.storageKey,n.hasCustomColors()),columns:n.getColorCols(e.storageKey),presets:"color",onItemAction:d},t));return ho.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[r,g.asSpec()]}]),fieldBehaviours:He([nn("form-field-events",[xe(sE,(b,w)=>{g.getOpt(b).each(x=>{Je(x.element,"background-color",w.event.color)}),yt(b,$a,{name:e.name})}),xe(rE,(b,w)=>{ho.getField(b).each(x=>{Ye.setValue(x,w.event.value),Dn.getCurrent(b).each(Ht.focus)})}),xe(cE,(b,w)=>{ho.getField(b).each(x=>{Dn.getCurrent(b).each(Ht.focus)})})])])})},LR=jc({schema:[Ce("dom")],name:"label"}),vm=e=>jc({name:""+e+"-edge",overrides:t=>t.model.manager.edgeActions[e].fold(()=>({}),o=>({events:Io([Ip(ja(),(r,a,i)=>o(r,i),[t]),Ip(ls(),(r,a,i)=>o(r,i),[t]),Ip(Dr(),(r,a,i)=>{i.mouseIsDown.get()&&o(r,i)},[t])])}))}),NR=vm("top-left"),VR=vm("top"),zR=vm("top-right"),ZR=vm("right"),UR=vm("bottom-right"),WR=vm("bottom"),jR=vm("bottom-left"),GR=vm("left"),qR=Wr({name:"thumb",defaults:$({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:Io([Hd(ja(),e,"spectrum"),Hd($u(),e,"spectrum"),Hd(Mn(),e,"spectrum"),Hd(ls(),e,"spectrum"),Hd(Dr(),e,"spectrum"),Hd(Im(),e,"spectrum")])})}),d2=e=>Qu(e.event),KR=Wr({schema:[Mr("mouseIsDown",()=>m(!1))],name:"spectrum",overrides:e=>{const n=e.model.manager,o=(r,a)=>n.getValueFromEvent(a).map(i=>n.setValueFrom(r,e,i));return{behaviours:He([St.config({mode:"special",onLeft:(r,a)=>n.onLeft(r,e,d2(a)),onRight:(r,a)=>n.onRight(r,e,d2(a)),onUp:(r,a)=>n.onUp(r,e,d2(a)),onDown:(r,a)=>n.onDown(r,e,d2(a))}),gs.config({}),Ht.config({})]),events:Io([xe(ja(),o),xe($u(),o),xe(ls(),o),xe(Dr(),(r,a)=>{e.mouseIsDown.get()&&o(r,a)})])}}});var YR=[LR,GR,ZR,VR,WR,NR,zR,jR,UR,qR,KR];const Z1=$("slider.change.value"),XR=e=>e.type.indexOf("touch")!==-1,k4=e=>{const t=e.event.raw;if(XR(t)){const n=t;return n.touches!==void 0&&n.touches.length===1?v.some(n.touches[0]).map(o=>Gn(o.clientX,o.clientY)):v.none()}else{const n=t;return n.clientX!==void 0?v.some(n).map(o=>Gn(o.clientX,o.clientY)):v.none()}},JR="top",QR="right",e9="bottom",t9="left",Tg=e=>e.model.minX,kg=e=>e.model.minY,m2=e=>e.model.minX-1,g2=e=>e.model.minY-1,Eg=e=>e.model.maxX,Og=e=>e.model.maxY,h2=e=>e.model.maxX+1,p2=e=>e.model.maxY+1,aE=(e,t,n)=>t(e)-n(e),E4=e=>aE(e,Eg,Tg),O4=e=>aE(e,Og,kg),lE=e=>E4(e)/2,iE=e=>O4(e)/2,ip=(e,t)=>t?e.stepSize*e.speedMultiplier:e.stepSize,uE=e=>e.snapToGrid,dE=e=>e.snapStart,mE=e=>e.rounded,f2=(e,t)=>e[t+"-edge"]!==void 0,gE=e=>f2(e,t9),hE=e=>f2(e,QR),pE=e=>f2(e,JR),fE=e=>f2(e,e9),rd=e=>e.model.value.get(),ym=(e,t)=>({x:e,y:t}),ei=(e,t)=>{yt(e,Z1(),{value:t})},n9=(e,t)=>{ei(e,ym(m2(t),g2(t)))},o9=(e,t)=>{ei(e,g2(t))},s9=(e,t)=>{ei(e,ym(lE(t),g2(t)))},r9=(e,t)=>{ei(e,ym(h2(t),g2(t)))},c9=(e,t)=>{ei(e,h2(t))},a9=(e,t)=>{ei(e,ym(h2(t),iE(t)))},l9=(e,t)=>{ei(e,ym(h2(t),p2(t)))},i9=(e,t)=>{ei(e,p2(t))},u9=(e,t)=>{ei(e,ym(lE(t),p2(t)))},d9=(e,t)=>{ei(e,ym(m2(t),p2(t)))},m9=(e,t)=>{ei(e,m2(t))},g9=(e,t)=>{ei(e,ym(m2(t),iE(t)))},A4=(e,t,n,o)=>e<t?e:e>n?n:e===t?t-1:Math.max(t,e-o),_4=(e,t,n,o)=>e>n?e:e<t?t:e===n?n+1:Math.min(n,e+o),bE=(e,t,n)=>Math.max(t,Math.min(n,e)),h9=(e,t,n,o,r)=>r.fold(()=>{const a=e-t,i=Math.round(a/o)*o;return bE(t+i,t-1,n+1)},a=>{const i=(e-a)%o,d=Math.round(i/o),g=Math.floor((e-a)/o),b=Math.floor((n-a)/o),w=Math.min(b,g+d),x=a+w*o;return Math.max(a,x)}),p9=(e,t,n)=>Math.min(n,Math.max(e,t))-t,vE=e=>{const{min:t,max:n,range:o,value:r,step:a,snap:i,snapStart:d,rounded:g,hasMinEdge:b,hasMaxEdge:w,minBound:x,maxBound:k,screenRange:A}=e,B=b?t-1:t,Z=w?n+1:n;if(r<x)return B;if(r>k)return Z;{const re=p9(r,x,k),J=bE(re/A*o+t,B,Z);return i&&J>=t&&J<=n?h9(J,t,n,a,d):g?Math.round(J):J}},yE=e=>{const{min:t,max:n,range:o,value:r,hasMinEdge:a,hasMaxEdge:i,maxBound:d,maxOffset:g,centerMinEdge:b,centerMaxEdge:w}=e;return r<t?a?0:b:r>n?i?d:w:(r-t)/o*g},M4="top",wE="right",SE="bottom",D4="left",f9="width",b9="height",nu=e=>e.element.dom.getBoundingClientRect(),ti=(e,t)=>e[t],b2=e=>{const t=nu(e);return ti(t,D4)},xE=e=>{const t=nu(e);return ti(t,wE)},v2=e=>{const t=nu(e);return ti(t,M4)},CE=e=>{const t=nu(e);return ti(t,SE)},TE=e=>{const t=nu(e);return ti(t,f9)},kE=e=>{const t=nu(e);return ti(t,b9)},EE=(e,t,n)=>(e+t)/2-n,OE=(e,t)=>{const n=nu(e),o=nu(t),r=ti(n,D4),a=ti(n,wE),i=ti(o,D4);return EE(r,a,i)},AE=(e,t)=>{const n=nu(e),o=nu(t),r=ti(n,M4),a=ti(n,SE),i=ti(o,M4);return EE(r,a,i)},y2=(e,t)=>{yt(e,Z1(),{value:t})},$4=(e,t,n)=>{const o={min:Tg(t),max:Eg(t),range:E4(t),value:n,step:ip(t),snap:uE(t),snapStart:dE(t),rounded:mE(t),hasMinEdge:gE(t),hasMaxEdge:hE(t),minBound:b2(e),maxBound:xE(e),screenRange:TE(e)};return vE(o)},v9=(e,t,n)=>{const o=$4(e,t,n);return y2(e,o),o},y9=(e,t)=>{const n=Tg(t);y2(e,n)},w9=(e,t)=>{const n=Eg(t);y2(e,n)},S9=(e,t,n,o)=>{const a=(e>0?_4:A4)(rd(n),Tg(n),Eg(n),ip(n,o));return y2(t,a),v.some(a)},_E=e=>(t,n,o)=>S9(e,t,n,o).map(gt),x9=e=>k4(e).map(n=>n.left),C9=(e,t,n,o,r)=>{const i=TE(e),d=o.bind(w=>v.some(OE(w,e))).getOr(0),g=r.bind(w=>v.some(OE(w,e))).getOr(i),b={min:Tg(t),max:Eg(t),range:E4(t),value:n,hasMinEdge:gE(t),hasMaxEdge:hE(t),minBound:b2(e),maxBound:xE(e),maxOffset:i,centerMinEdge:d,centerMaxEdge:g};return yE(b)},F4=(e,t,n,o,r,a)=>{const i=C9(t,a,n,o,r);return b2(t)-b2(e)+i},T9=(e,t,n,o)=>{const r=rd(n),a=F4(e,o.getSpectrum(e),r,o.getLeftEdge(e),o.getRightEdge(e),n),i=M(t.element)/2;Je(t.element,"left",a-i+"px")},k9=_E(-1),E9=_E(1),O9=v.none,A9=v.none,_9={"top-left":v.none(),top:v.none(),"top-right":v.none(),right:v.some(c9),"bottom-right":v.none(),bottom:v.none(),"bottom-left":v.none(),left:v.some(m9)};var M9=Object.freeze({__proto__:null,setValueFrom:v9,setToMin:y9,setToMax:w9,findValueOfOffset:$4,getValueFromEvent:x9,findPositionOfValue:F4,setPositionFromValue:T9,onLeft:k9,onRight:E9,onUp:O9,onDown:A9,edgeActions:_9});const w2=(e,t)=>{yt(e,Z1(),{value:t})},R4=(e,t,n)=>{const o={min:kg(t),max:Og(t),range:O4(t),value:n,step:ip(t),snap:uE(t),snapStart:dE(t),rounded:mE(t),hasMinEdge:pE(t),hasMaxEdge:fE(t),minBound:v2(e),maxBound:CE(e),screenRange:kE(e)};return vE(o)},D9=(e,t,n)=>{const o=R4(e,t,n);return w2(e,o),o},$9=(e,t)=>{const n=kg(t);w2(e,n)},F9=(e,t)=>{const n=Og(t);w2(e,n)},R9=(e,t,n,o)=>{const a=(e>0?_4:A4)(rd(n),kg(n),Og(n),ip(n,o));return w2(t,a),v.some(a)},ME=e=>(t,n,o)=>R9(e,t,n,o).map(gt),B9=e=>k4(e).map(n=>n.top),I9=(e,t,n,o,r)=>{const i=kE(e),d=o.bind(w=>v.some(AE(w,e))).getOr(0),g=r.bind(w=>v.some(AE(w,e))).getOr(i),b={min:kg(t),max:Og(t),range:O4(t),value:n,hasMinEdge:pE(t),hasMaxEdge:fE(t),minBound:v2(e),maxBound:CE(e),maxOffset:i,centerMinEdge:d,centerMaxEdge:g};return yE(b)},B4=(e,t,n,o,r,a)=>{const i=I9(t,a,n,o,r);return v2(t)-v2(e)+i},H9=(e,t,n,o)=>{const r=rd(n),a=B4(e,o.getSpectrum(e),r,o.getTopEdge(e),o.getBottomEdge(e),n),i=Ro(t.element)/2;Je(t.element,"top",a-i+"px")},P9=v.none,L9=v.none,N9=ME(-1),V9=ME(1),z9={"top-left":v.none(),top:v.some(o9),"top-right":v.none(),right:v.none(),"bottom-right":v.none(),bottom:v.some(i9),"bottom-left":v.none(),left:v.none()};var Z9=Object.freeze({__proto__:null,setValueFrom:D9,setToMin:$9,setToMax:F9,findValueOfOffset:R4,getValueFromEvent:B9,findPositionOfValue:B4,setPositionFromValue:H9,onLeft:P9,onRight:L9,onUp:N9,onDown:V9,edgeActions:z9});const S2=(e,t)=>{yt(e,Z1(),{value:t})},x2=(e,t)=>({x:e,y:t}),U9=(e,t,n)=>{const o=$4(e,t,n.left),r=R4(e,t,n.top),a=x2(o,r);return S2(e,a),a},W9=(e,t,n,o,r)=>{const a=e>0?_4:A4,i=t?rd(o).x:a(rd(o).x,Tg(o),Eg(o),ip(o,r)),d=t?a(rd(o).y,kg(o),Og(o),ip(o,r)):rd(o).y;return S2(n,x2(i,d)),v.some(i)},C2=(e,t)=>(n,o,r)=>W9(e,t,n,o,r).map(gt),j9=(e,t)=>{const n=Tg(t),o=kg(t);S2(e,x2(n,o))},G9=(e,t)=>{const n=Eg(t),o=Og(t);S2(e,x2(n,o))},q9=e=>k4(e),K9=(e,t,n,o)=>{const r=rd(n),a=F4(e,o.getSpectrum(e),r.x,o.getLeftEdge(e),o.getRightEdge(e),n),i=B4(e,o.getSpectrum(e),r.y,o.getTopEdge(e),o.getBottomEdge(e),n),d=M(t.element)/2,g=Ro(t.element)/2;Je(t.element,"left",a-d+"px"),Je(t.element,"top",i-g+"px")},Y9=C2(-1,!1),X9=C2(1,!1),J9=C2(-1,!0),Q9=C2(1,!0),eB={"top-left":v.some(n9),top:v.some(s9),"top-right":v.some(r9),right:v.some(a9),"bottom-right":v.some(l9),bottom:v.some(u9),"bottom-left":v.some(d9),left:v.some(g9)};var tB=Object.freeze({__proto__:null,setValueFrom:U9,setToMin:j9,setToMax:G9,getValueFromEvent:q9,setPositionFromValue:K9,onLeft:Y9,onRight:X9,onUp:J9,onDown:Q9,edgeActions:eB});const nB=[oe("stepSize",1),oe("speedMultiplier",10),oe("onChange",se),oe("onChoose",se),oe("onInit",se),oe("onDragStart",se),oe("onDragEnd",se),oe("snapToGrid",!1),oe("rounded",!0),oo("snapStart"),fc("model",or("mode",{x:[oe("minX",0),oe("maxX",100),Mr("value",e=>m(e.mode.minX)),Ce("getInitialValue"),zo("manager",M9)],y:[oe("minY",0),oe("maxY",100),Mr("value",e=>m(e.mode.minY)),Ce("getInitialValue"),zo("manager",Z9)],xy:[oe("minX",0),oe("maxX",100),oe("minY",0),oe("maxY",100),Mr("value",e=>m({x:e.mode.minX,y:e.mode.minY})),Ce("getInitialValue"),zo("manager",tB)]})),pr("sliderBehaviours",[St,Ye]),Mr("mouseIsDown",()=>m(!1))],ni=ac({name:"Slider",configFields:nB,partFields:YR,factory:(e,t,n,o)=>{const r=be=>Xi(be,e,"thumb"),a=be=>Xi(be,e,"spectrum"),i=be=>Ao(be,e,"left-edge"),d=be=>Ao(be,e,"right-edge"),g=be=>Ao(be,e,"top-edge"),b=be=>Ao(be,e,"bottom-edge"),w=e.model,x=w.manager,k=(be,he)=>{x.setPositionFromValue(be,he,e,{getLeftEdge:i,getRightEdge:d,getTopEdge:g,getBottomEdge:b,getSpectrum:a})},A=(be,he)=>{w.value.set(he);const Be=r(be);k(be,Be)},B=(be,he)=>{A(be,he);const Be=r(be);return e.onChange(be,Be,he),v.some(!0)},Z=be=>{x.setToMin(be,e)},re=be=>{x.setToMax(be,e)},J=be=>{const he=()=>{Ao(be,e,"thumb").each(Le=>{const Qt=w.value.get();e.onChoose(be,Le,Qt)})},Be=e.mouseIsDown.get();e.mouseIsDown.set(!1),Be&&he()},K=(be,he)=>{he.stop(),e.mouseIsDown.set(!0),e.onDragStart(be,r(be))},ce=(be,he)=>{he.stop(),e.onDragEnd(be,r(be)),J(be)},ke=be=>{Ao(be,e,"spectrum").map(St.focusIn)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ks(e.sliderBehaviours,[St.config({mode:"special",focusIn:ke}),Ye.config({store:{mode:"manual",getValue:be=>w.value.get(),setValue:A}}),_c.config({channels:{[Kf()]:{onReceive:J}}})]),events:Io([xe(Z1(),(be,he)=>{B(be,he.event.value)}),Go((be,he)=>{const Be=w.getInitialValue();w.value.set(Be);const Le=r(be);k(be,Le);const Qt=a(be);e.onInit(be,Le,Qt,w.value.get())}),xe(ja(),K),xe(Mn(),ce),xe(ls(),(be,he)=>{ke(be),K(be,he)}),xe(Im(),ce)]),apis:{resetToMin:Z,resetToMax:re,setValue:A,refresh:k},domModification:{styles:{position:"relative"}}}},apis:{setValue:(e,t,n)=>{e.setValue(t,n)},resetToMin:(e,t)=>{e.resetToMin(t)},resetToMax:(e,t)=>{e.resetToMax(t)},refresh:(e,t)=>{e.refresh(t)}}}),I4=et("rgb-hex-update"),DE=et("slider-update"),$E=et("palette-update"),oB=(e,t)=>{const n=ni.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=ni.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return ni.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:$(0)},components:[n,o],sliderBehaviours:He([Ht.config({})]),onChange:(r,a,i)=>{Pt(r.element,"aria-valuenow",Math.floor(360-i*3.6)),yt(r,DE,{value:i})}})},FE="form",sB=[pr("formBehaviours",[Ye])],RE=e=>"<alloy.field."+e+">",rB=e=>{const t=(()=>{const a=[];return{field:(d,g)=>(a.push(d),n1(FE,RE(d),g)),record:$(a)}})(),n=e(t),o=t.record(),r=Ae(o,a=>Wr({name:a,pname:RE(a)}));return i1(FE,sB,r,aB,n)},cB=(e,t)=>e.fold(()=>mn.error(t),mn.value),aB=(e,t)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Ks(e.formBehaviours,[Ye.config({store:{mode:"manual",getValue:n=>{const o=r1(n,e);return an(o,(r,a)=>r().bind(i=>{const d=Dn.getCurrent(i);return cB(d,new Error(`Cannot find a current component to extract the value from for form part '${a}': `+Ui(i.element)))}).map(Ye.getValue))},setValue:(n,o)=>{en(o,(r,a)=>{Ao(n,e,a).each(i=>{Dn.getCurrent(i).each(d=>{Ye.setValue(d,r)})})})}}})]),apis:{getField:(n,o)=>Ao(n,e,o).bind(Dn.getCurrent)}}),up={getField:Vm((e,t,n)=>e.getField(t,n)),sketch:rB},BE=et("valid-input"),IE=et("invalid-input"),HE=et("validating-input"),H4="colorcustom.rgb.",lB=(e,t,n,o)=>{const r=(k,A)=>tu.config({invalidClass:t("invalid"),notify:{onValidate:B=>{yt(B,HE,{type:k})},onValid:B=>{yt(B,BE,{type:k,value:Ye.getValue(B)})},onInvalid:B=>{yt(B,IE,{type:k,value:Ye.getValue(B)})}},validator:{validate:B=>{const Z=Ye.getValue(B),re=A(Z)?mn.value(!0):mn.error(e("aria.input.invalid"));return uc.pure(re)},validateOnLoad:!1}}),a=(k,A,B,Z,re)=>{const J=e(H4+"range"),K=ho.parts.label({dom:{tag:"label",attributes:{"aria-label":Z}},components:[Os(B)]}),ce=ho.parts.field({data:re,factory:vg,inputAttributes:{type:"text",...A==="hex"?{"aria-live":"polite"}:{}},inputClasses:[t("textfield")],inputBehaviours:He([r(A,k),gs.config({})]),onSetValue:Be=>{tu.isInvalid(Be)&&tu.run(Be).get(se)}}),ke=[K,ce],be=A!=="hex"?[ho.parts["aria-descriptor"]({text:J})]:[],he=ke.concat(be);return{dom:{tag:"div",attributes:{role:"presentation"}},components:he}},i=(k,A)=>{const B=R1(A);return up.getField(k,"hex").each(Z=>{Ht.isFocused(Z)||Ye.setValue(k,{hex:B.value})}),B},d=(k,A)=>{const B=A.red,Z=A.green,re=A.blue;Ye.setValue(k,{red:B,green:Z,blue:re})},g=go({dom:{tag:"div",classes:[t("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),b=(k,A)=>{g.getOpt(k).each(B=>{Je(B.element,"background-color","#"+A.value)})};return la({factory:()=>{const k={red:m(v.some(255)),green:m(v.some(255)),blue:m(v.some(255)),hex:m(v.some("ffffff"))},A=(_t,so)=>{const wt=B1(so);d(_t,wt),J(wt)},B=_t=>k[_t].get(),Z=(_t,so)=>{k[_t].set(so)},re=()=>B("red").bind(_t=>B("green").bind(so=>B("blue").map(wt=>pm(_t,so,wt,1)))),J=_t=>{const so=_t.red,wt=_t.green,Fn=_t.blue;Z("red",v.some(so)),Z("green",v.some(wt)),Z("blue",v.some(Fn))},K=(_t,so)=>{const wt=so.event;wt.type!=="hex"?Z(wt.type,v.none()):o(_t)},ce=(_t,so)=>{n(_t);const wt=nk(so);Z("hex",v.some(wt.value));const Fn=B1(wt);d(_t,Fn),J(Fn),yt(_t,I4,{hex:wt}),b(_t,wt)},ke=(_t,so,wt)=>{const Fn=parseInt(wt,10);Z(so,v.some(Fn)),re().each(Ne=>{const ct=i(_t,Ne);yt(_t,I4,{hex:ct}),b(_t,ct)})},be=_t=>_t.type==="hex",he=(_t,so)=>{const wt=so.event;be(wt)?ce(_t,wt.value):ke(_t,wt.type,wt.value)},Be=_t=>({label:e(H4+_t+".label"),description:e(H4+_t+".description")}),Le=Be("red"),Qt=Be("green"),at=Be("blue"),Ct=Be("hex");return vo(up.sketch(_t=>({dom:{tag:"form",classes:[t("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[_t.field("red",ho.sketch(a(o4,"red",Le.label,Le.description,255))),_t.field("green",ho.sketch(a(o4,"green",Qt.label,Qt.description,255))),_t.field("blue",ho.sketch(a(o4,"blue",at.label,at.description,255))),_t.field("hex",ho.sketch(a(rk,"hex",Ct.label,Ct.description,"ffffff"))),g.asSpec()],formBehaviours:He([tu.config({invalidClass:t("form-invalid")}),nn("rgb-form-events",[xe(BE,he),xe(IE,K),xe(HE,K)])])})),{apis:{updateHex:(_t,so)=>{Ye.setValue(_t,{hex:so.value}),A(_t,so),b(_t,so)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(k,A,B)=>{k.updateHex(A,B)}},extraApis:{}})},iB=(e,t)=>{const n=ni.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),o=ni.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:`<div class=${t("sv-palette-inner-thumb")} role="presentation"></div>`}}),r=(b,w)=>{const{width:x,height:k}=b,A=b.getContext("2d");if(A===null)return;A.fillStyle=w,A.fillRect(0,0,x,k);const B=A.createLinearGradient(0,0,x,0);B.addColorStop(0,"rgba(255,255,255,1)"),B.addColorStop(1,"rgba(255,255,255,0)"),A.fillStyle=B,A.fillRect(0,0,x,k);const Z=A.createLinearGradient(0,0,0,k);Z.addColorStop(0,"rgba(0,0,0,0)"),Z.addColorStop(1,"rgba(0,0,0,1)"),A.fillStyle=Z,A.fillRect(0,0,x,k)},a=(b,w)=>{const x=b.components()[0].element.dom,k=I1(w,100,100),A=ik(k);r(x,dk(A))},i=(b,w)=>{const x=c4(B1(w));ni.setValue(b,{x:x.saturation,y:100-x.value}),Pt(b.element,"aria-valuetext",e(["Saturation {0}%, Brightness {1}%",x.saturation,x.value]))};return la({factory:b=>{const w=$({x:0,y:0}),x=(B,Z,re)=>{jt(re)||Pt(B.element,"aria-valuetext",e(["Saturation {0}%, Brightness {1}%",Math.floor(re.x),Math.floor(100-re.y)])),yt(B,$E,{value:re})},k=(B,Z,re,J)=>{r(re.element.dom,dk(mk))},A=He([Dn.config({find:v.some}),Ht.config({})]);return ni.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":e(["Saturation {0}%, Brightness {1}%",0,0])},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:w},rounded:!1,components:[n,o],onChange:x,onInit:k,sliderBehaviours:A})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(b,w,x)=>{a(w,x)},setThumb:(b,w,x)=>{i(w,x)}},extraApis:{}})},uB=(e,t)=>{const n=r=>{const a=lB(e,t,r.onValidHex,r.onInvalidHex),i=iB(e,t),d=he=>(100-he)/100*360,g=he=>100-he/360*100,b={paletteRgba:m(mk),paletteHue:m(0)},w=go(oB(e,t)),x=go(i.sketch({})),k=go(a.sketch({})),A=(he,Be,Le)=>{x.getOpt(he).each(Qt=>{i.setHue(Qt,Le)})},B=(he,Be)=>{k.getOpt(he).each(Le=>{a.updateHex(Le,Be)})},Z=(he,Be,Le)=>{w.getOpt(he).each(Qt=>{ni.setValue(Qt,g(Le))})},re=(he,Be)=>{x.getOpt(he).each(Le=>{i.setThumb(Le,Be)})},J=(he,Be)=>{const Le=B1(he);b.paletteRgba.set(Le),b.paletteHue.set(Be)},K=(he,Be,Le,Qt)=>{J(Be,Le),Ve(Qt,at=>{at(he,Be,Le)})},ce=()=>{const he=[B];return(Be,Le)=>{const Qt=Le.event.value,at=b.paletteHue.get(),Ct=I1(at,Qt.x,100-Qt.y),_t=vk(Ct);K(Be,_t,at,he)}},ke=()=>{const he=[A,B];return(Be,Le)=>{const Qt=d(Le.event.value),at=b.paletteRgba.get(),Ct=c4(at),_t=I1(Qt,Ct.saturation,Ct.value),so=vk(_t);K(Be,so,Qt,he)}},be=()=>{const he=[A,Z,re];return(Be,Le)=>{const Qt=Le.event.hex,at=Q$(Qt);K(Be,Qt,at.hue,he)}};return{uid:r.uid,dom:r.dom,components:[x.asSpec(),w.asSpec(),k.asSpec()],behaviours:He([nn("colour-picker-events",[xe(I4,be()),xe($E,ce()),xe(DE,ke())]),Dn.config({find:he=>k.getOpt(he)}),St.config({mode:"acyclic"})])}};return la({name:"ColourPicker",configFields:[Ce("dom"),oe("onValidHex",se),oe("onInvalidHex",se)],factory:n})},oi={self:()=>Dn.config({find:v.some}),memento:e=>Dn.config({find:e.getOpt}),childAt:e=>Dn.config({find:t=>mc(t.element,e).bind(n=>t.getSystem().getByDom(n).toOptional())})},dB=xt([oe("preprocess",We),oe("postprocess",We)]),mB=(e,t)=>{const n=tc("RepresentingConfigs.memento processors",dB,t);return Ye.config({store:{mode:"manual",getValue:o=>{const r=e.get(o),a=Ye.getValue(r);return n.postprocess(a)},setValue:(o,r)=>{const a=n.preprocess(r),i=e.get(o);Ye.setValue(i,a)}}})},Ag=(e,t,n)=>Ye.config({store:{mode:"manual",...e.map(o=>({initialValue:o})).getOr({}),getValue:t,setValue:n}}),PE=(e,t,n)=>Ag(e,o=>t(o.element),(o,r)=>n(o.element,r)),gB=e=>PE(e,Np,Nu),T2=e=>Ye.config({store:{mode:"memory",initialValue:e}}),hB={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},pB=e=>t=>ye(t)?e.translate(hB[t]):e.translate(t),fB=(e,t,n)=>{const o=g=>"tox-"+g,r=uB(pB(t),o),a=g=>{yt(g,eu,{name:"hex-valid",value:!0})},i=g=>{yt(g,eu,{name:"hex-valid",value:!1})},d=go(r.sketch({dom:{tag:"div",classes:[o("color-picker-container")],attributes:{role:"presentation"}},onValidHex:a,onInvalidHex:i}));return{dom:{tag:"div"},components:[d.asSpec()],behaviours:He([Ag(n,g=>{const b=d.get(g);return Dn.getCurrent(b).bind(k=>Ye.getValue(k).hex).map(k=>"#"+Ir(k,"#")).getOr("")},(g,b)=>{const w=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,x=v.from(w.exec(b)).bind(B=>Mt(B,1)),k=d.get(g);Dn.getCurrent(k).fold(()=>{console.log("Can not find form")},B=>{Ye.setValue(B,{hex:x.getOr("")}),up.getField(B,"hex").each(Z=>{to(Z,Fu())})})}),oi.self()])}};var bB=tinymce.util.Tools.resolve("tinymce.Resource");const vB=e=>Cn(e,"init"),yB=e=>{const t=On(),n=go({dom:{tag:e.tag}}),o=On();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:He([nn("custom-editor-events",[Go(r=>{n.getOpt(r).each(a=>{(vB(e)?e.init(a.element.dom):bB.load(e.scriptId,e.scriptUrl).then(i=>i(a.element.dom,e.settings))).then(i=>{o.on(d=>{i.setValue(d)}),o.clear(),t.set(i)})})})]),Ag(v.none(),()=>t.get().fold(()=>o.get().getOr(""),r=>r.getValue()),(r,a)=>{t.get().fold(()=>o.set(a),i=>i.setValue(a))}),oi.self()]),components:[n.asSpec()]}};var cd=tinymce.util.Tools.resolve("tinymce.util.Tools");const wB=(e,t)=>{const n=cd.explode(t.getOption("images_file_types")),o=r=>Kn(n,a=>Us(r.name.toLowerCase(),`.${a.toLowerCase()}`));return Xt(ko(e),o)},SB=(e,t,n)=>{const o=(k,A)=>{A.stop()},r=k=>(A,B)=>{Ve(k,Z=>{Z(A,B)})},a=(k,A)=>{var B;if(!Dt.isDisabled(k)){const Z=A.event.raw;d(k,(B=Z.dataTransfer)===null||B===void 0?void 0:B.files)}},i=(k,A)=>{const B=A.event.raw.target;d(k,B.files)},d=(k,A)=>{A&&(Ye.setValue(k,wB(A,t)),yt(k,$a,{name:e.name}))},g=go({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:He([nn("input-file-events",[Pu(Li()),Pu(Pm())])])}),b=k=>({uid:k.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:He([T2(n.getOr([])),oi.self(),Dt.config({}),fn.config({toggleClass:"dragenter",toggleOnExecute:!1}),nn("dropzone-events",[xe("dragenter",r([o,fn.toggle])),xe("dragleave",r([o,fn.toggle])),xe("dragover",o),xe("drop",r([o,a])),xe(Bd(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Os(t.translate("Drop an image here"))]},Gr.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Os(t.translate("Browse for an image")),g.asSpec()],action:A=>{g.get(A).element.dom.click()},buttonBehaviours:He([gs.config({}),Ql.button(t.isDisabled),fr()])})]}]}),w=e.label.map(k=>fm(k,t)),x=ho.parts.field({factory:{sketch:b}});return L1(w,x,["tox-form__group--stretched"],[])},xB=(e,t)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${e.columns}col`]},components:Ae(e.items,t.interpreter)}),CB=(e,t)=>{let n=null,o=null;return{cancel:()=>{Zn(n)||(clearTimeout(n),n=null,o=null)},throttle:(...i)=>{o=i,Zn(n)&&(n=setTimeout(()=>{const d=o;n=null,o=null,e.apply(null,d)},t))}}},TB=(e,t)=>{let n=null;return{cancel:()=>{Zn(n)||(clearTimeout(n),n=null)},throttle:(...a)=>{Zn(n)&&(n=setTimeout(()=>{n=null,e.apply(null,a)},t))}}},P4=(e,t)=>{let n=null;const o=()=>{Zn(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...a)=>{o(),n=setTimeout(()=>{n=null,e.apply(null,a)},t)}}},L4=et("alloy-fake-before-tabstop"),N4=et("alloy-fake-after-tabstop"),LE=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:He([Ht.config({ignore:!0}),gs.config({})])}),NE=(e,t)=>({dom:{tag:"div",classes:["tox-navobj",...e.getOr([])]},components:[LE([L4]),t,LE([N4])],behaviours:He([oi.childAt(1)])}),VE=(e,t)=>{yt(e,Ga(),{raw:{which:9,shiftKey:t}})},kB=(e,t)=>{const n=t.element;Tc(n,L4)?VE(e,!0):Tc(n,N4)&&VE(e,!1)},U1=e=>H1(e,["."+L4,"."+N4].join(","),Te),k2=et("update-dialog"),zE=et("update-title"),ZE=et("update-body"),UE=et("update-footer"),WE=et("body-send-message"),E2=et("dialog-focus-shifted"),V4=ba().browser,W1=V4.isSafari(),EB=V4.isFirefox(),jE=W1||EB,OB=V4.isChromium(),AB=({scrollTop:e,scrollHeight:t,clientHeight:n})=>Math.ceil(e)+n>=t,GE=(e,t)=>e.scrollTo(0,t==="bottom"?99999999:t),_B=(e,t)=>{const n=e.body;return v.from(!/^<!DOCTYPE (html|HTML)/.test(t)&&(!OB&&!W1||rn(n)&&(n.scrollTop!==0||Math.abs(n.scrollHeight-n.clientHeight)>1))?n:e.documentElement)},qE=(e,t,n)=>{const o=e.dom;v.from(o.contentDocument).fold(n,r=>{let a=0;const i=_B(r,t).map(g=>(a=g.scrollTop,g)).forall(AB),d=()=>{const g=o.contentWindow;rn(g)&&(i?GE(g,"bottom"):!i&&jE&&a!==0&&GE(g,a))};W1&&o.addEventListener("load",d,{once:!0}),r.open(),r.write(t),r.close(),W1||d()})},MB=$s(jE,W1?500:200).map(e=>CB(qE,e)),DB=(e,t)=>{const n=m(e.getOr(""));return{getValue:o=>n.get(),setValue:(o,r)=>{if(n.get()!==r){const a=o.element,i=()=>Pt(a,"srcdoc",r);t?MB.fold($(qE),d=>d.throttle)(a,r,i):i()}n.set(r)}}},$B=(e,t,n)=>{const o="tox-dialog__iframe",r=e.transparent?[]:[`${o}--opaque`],a=e.border?["tox-navobj-bordered"]:[],i={...e.label.map(x=>({title:x})).getOr({}),...n.map(x=>({srcdoc:x})).getOr({}),...e.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},d=DB(n,e.streamContent),g=e.label.map(x=>fm(x,t)),b=x=>NE(v.from(a),{uid:x.uid,dom:{tag:"iframe",attributes:i,classes:[o,...r]},behaviours:He([gs.config({}),Ht.config({}),Ag(n,d.getValue,d.setValue),_c.config({channels:{[E2]:{onReceive:(k,A)=>{A.newFocus.each(B=>{Lr(k.element).each(Z=>{(Qn(k.element,B)?Es:ys)(Z,"tox-navobj-bordered-focus")})})}}}})])}),w=ho.parts.field({factory:{sketch:b}});return L1(g,w,["tox-form__group--stretched"],[])},FB=e=>new Promise((t,n)=>{const o=()=>{a(),t(e)},r=[rc(e,"load",o),rc(e,"error",()=>{a(),n("Unable to load data from image: "+e.dom.src)})],a=()=>Ve(r,i=>i.unbind());e.dom.complete&&o()}),RB=(e,t,n,o,r)=>{const a=n*r,i=o*r,d=Math.max(0,e/2-a/2),g=Math.max(0,t/2-i/2);return{left:d.toString()+"px",top:g.toString()+"px",width:a.toString()+"px",height:i.toString()+"px"}},BB=(e,t,n)=>{const o=M(e),r=Ro(e);return Math.min(o/t,r/n,1)},IB=(e,t)=>{const n=m(t.getOr({url:""})),o=go({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:t.map(g=>({src:g.url})).getOr({})}}),r=go({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[o.asSpec()]}),a=(g,b)=>{const w={url:b.url};b.zoom.each(k=>w.zoom=k),b.cachedWidth.each(k=>w.cachedWidth=k),b.cachedHeight.each(k=>w.cachedHeight=k),n.set(w);const x=()=>{const{cachedWidth:k,cachedHeight:A,zoom:B}=w;if(!Vt(k)&&!Vt(A)){if(Vt(B)){const re=BB(g.element,k,A);w.zoom=re}const Z=RB(M(g.element),Ro(g.element),k,A,w.zoom);r.getOpt(g).each(re=>{Co(re.element,Z)})}};o.getOpt(g).each(k=>{const A=k.element;b.url!==$o(A,"src")&&(Pt(A,"src",b.url),ys(g.element,"tox-imagepreview__loaded")),x(),FB(A).then(B=>{g.getSystem().isConnected()&&(Es(g.element,"tox-imagepreview__loaded"),w.cachedWidth=B.dom.naturalWidth,w.cachedHeight=B.dom.naturalHeight,x())})})},i={};e.height.each(g=>i.height=g);const d=t.map(g=>({url:g.url,zoom:v.from(g.zoom),cachedWidth:v.from(g.cachedWidth),cachedHeight:v.from(g.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:i,attributes:{role:"presentation"}},components:[r.asSpec()],behaviours:He([oi.self(),Ag(d,()=>n.get(),a)])}},HB=(e,t)=>{const n="tox-label",o=e.align==="center"?[`${n}--center`]:[],r=e.align==="end"?[`${n}--end`]:[],a={dom:{tag:"label",classes:[n,...o,...r]},components:[Os(t.providers.translate(e.label))]},i=Ae(e.items,t.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[a,...i],behaviours:He([oi.self(),Kt.config({}),gB(v.none()),St.config({mode:"acyclic"})])}},KE=et("toolbar.button.execute"),PB=e=>qa((t,n)=>{o2(e,t)(o=>{yt(t,KE,{buttonApi:o}),e.onAction(o)})}),_g=et("common-button-display-events"),YE={[zc()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Ta()]:["toolbar-button-events",_g],[ls()]:["focusing","alloy.base.behaviour",_g]},z4=e=>Je(e.element,"width",Fo(e.element,"width")),XE=(e,t,n)=>Xl(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:n},t),Z4=(e,t)=>XE(e,t,[]),wm=(e,t)=>XE(e,t,[Kt.config({})]),JE=(e,t,n)=>({dom:{tag:"span",classes:[`${t}__select-label`]},components:[Os(n.translate(e))],behaviours:He([Kt.config({})])}),Cl=et("update-menu-text"),Mg=et("update-menu-icon"),U4=(e,t,n)=>{const o=m(se),r=e.text.map(k=>go(JE(k,t,n.providers))),a=e.icon.map(k=>go(wm(k,n.providers.icons))),i=(k,A)=>{const B=Ye.getValue(k);return Ht.focus(B),yt(B,"keydown",{raw:A.event.raw}),xl.close(B),v.some(!0)},d=e.role.fold(()=>({}),k=>({role:k})),g=e.tooltip.fold(()=>({}),k=>{const A=n.providers.translate(k);return{title:A,"aria-label":A}}),b=Xl("chevron-down",{tag:"div",classes:[`${t}__select-chevron`]},n.providers.icons),w=et("common-button-display-events");return go(xl.sketch({...e.uid?{uid:e.uid}:{},...d,dom:{tag:"button",classes:[t,`${t}--select`].concat(Ae(e.classes,k=>`${t}--${k}`)),attributes:{...g}},components:sp([a.map(k=>k.asSpec()),r.map(k=>k.asSpec()),v.some(b)]),matchWidth:!0,useMinWidth:!0,onOpen:(k,A,B)=>{e.searchable&&JF(B)},dropdownBehaviours:He([...e.dropdownBehaviours,Ql.button(()=>e.disabled||n.providers.isDisabled()),fr(),z1.config({}),Kt.config({}),nn("dropdown-events",[gm(e,o),hm(e,o)]),nn(w,[Go((k,A)=>z4(k))]),nn("menubutton-update-display-text",[xe(Cl,(k,A)=>{r.bind(B=>B.getOpt(k)).each(B=>{Kt.set(B,[Os(n.providers.translate(A.event.text))])})}),xe(Mg,(k,A)=>{a.bind(B=>B.getOpt(k)).each(B=>{Kt.set(B,[wm(A.event.icon,n.providers.icons)])})})])]),eventOrder:vo(YE,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Ta()]:["toolbar-button-events","dropdown-events",w]}),sandboxBehaviours:He([St.config({mode:"special",onLeft:i,onRight:i}),nn("dropdown-sandbox-events",[xe(T5,(k,A)=>{GF(k),A.stop()}),xe(k5,(k,A)=>{qF(k,A),A.stop()})])]),lazySink:n.getSink,toggleClass:`${t}--active`,parts:{menu:{...Kv(!1,e.columns,e.presets),fakeFocus:e.searchable,onHighlightItem:Nk,onCollapseMenu:(k,A,B)=>{no.getHighlighted(B).each(Z=>{Nk(k,B,Z)})},onDehighlightItem:XF}},getAnchorOverrides:()=>({maxHeightFunction:(k,A)=>{Cb()(k,A-10)}}),fetch:k=>uc.nu(on(e.fetch,k))})).asSpec()},LB=e=>ye(e),QE=e=>e.type==="separator",NB=e=>Cn(e,"getSubmenuItems"),VB={type:"separator"},zB=(e,t)=>{const n=En(e,(o,r)=>LB(r)?r===""?o:r==="|"?o.length>0&&!QE(o[o.length-1])?o.concat([VB]):o:Cn(t,r.toLowerCase())?o.concat([t[r.toLowerCase()]]):o:o.concat([r]),[]);return n.length>0&&QE(n[n.length-1])&&n.pop(),n},ZB=(e,t)=>{const n=e.getSubmenuItems(),o=eO(n,t),r=vo(o.menus,{[e.value]:o.items}),a=vo(o.expansions,{[e.value]:e.value});return{item:e,menus:r,expansions:a}},UB=e=>{const t=Xe(e,"value").getOrThunk(()=>et("generated-menu-item"));return vo({value:t},e)},eO=(e,t)=>{const n=zB(ye(e)?e.split(" "):e,t);return gn(n,(o,r)=>{if(NB(r)){const a=UB(r),i=ZB(a,t);return{menus:vo(o.menus,i.menus),items:[i.item,...o.items],expansions:vo(o.expansions,i.expansions)}}else return{...o,items:[r,...o.items]}},{menus:{},expansions:{},items:[]})},WB=e=>e.search.fold(()=>({searchMode:"no-search"}),t=>({searchMode:"search-with-field",placeholder:t.placeholder})),jB=e=>e.search.fold(()=>({searchMode:"no-search"}),t=>({searchMode:"search-with-results"})),dp=(e,t,n,o)=>{const r=et("primary-menu"),a=eO(e,n.shared.providers.menuItems());if(a.items.length===0)return v.none();const i=WB(o),d=Vk(r,a.items,t,n,o.isHorizontalMenu,i),g=jB(o),b=an(a.menus,(x,k)=>Vk(k,x,t,n,!1,g)),w=vo(b,At(r,d));return v.from(pg.tieredData(r,w,a.expansions))},W4=e=>!Cn(e,"items"),tO="data-value",nO=(e,t,n,o)=>Ae(n,r=>W4(r)?{type:"togglemenuitem",text:r.text,value:r.value,active:r.value===o,onAction:()=>{Ye.setValue(e,r.value),yt(e,$a,{name:t}),Ht.focus(e)}}:{type:"nestedmenuitem",text:r.text,getSubmenuItems:()=>nO(e,t,r.items,o)}),j4=(e,t)=>xn(e,n=>W4(n)?$s(n.value===t,n):j4(n.items,t)),GB=(e,t,n)=>{const o=t.shared.providers,r=n.bind(g=>j4(e.items,g)).orThunk(()=>Bt(e.items).filter(W4)),a=e.label.map(g=>fm(g,o)),i=ho.parts.field({dom:{},factory:{sketch:g=>U4({uid:g.uid,text:r.map(b=>b.text),icon:v.none(),tooltip:e.label,role:v.none(),fetch:(b,w)=>{const x=nO(b,e.name,e.items,Ye.getValue(b));w(dp(x,Ci.CLOSE_ON_EXECUTE,t,{isHorizontalMenu:!1,search:v.none()}))},onSetup:$(se),getApi:$({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[gs.config({}),Ag(r.map(b=>b.value),b=>$o(b.element,tO),(b,w)=>{j4(e.items,w).each(x=>{Pt(b.element,tO,x.value),yt(b,Cl,{text:x.text})})})]},"tox-listbox",t.shared)}}),d={dom:{tag:"div",classes:["tox-listboxfield"]},components:[i]};return ho.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ie([a.toArray(),[d]]),fieldBehaviours:He([Dt.config({disabled:$(!e.enabled),onDisabled:g=>{ho.getField(g).each(Dt.disable)},onEnabled:g=>{ho.getField(g).each(Dt.enable)}})])})},qB=(e,t)=>({dom:{tag:"div",classes:e.classes},components:Ae(e.items,t.shared.interpreter)}),KB=(e,t)=>{const n=Ae(e.options,r=>({dom:{tag:"option",value:r.value,innerHtml:r.text}})),o=e.data.map(r=>At("initialValue",r)).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:n,behaviours:Ks(e.selectBehaviours,[Ht.config({}),Ye.config({store:{mode:"manual",getValue:r=>pi(r.element),setValue:(r,a)=>{const i=Bt(e.options);Q(e.options,g=>g.value===a).isSome()?Zu(r.element,a):r.element.dom.selectedIndex===-1&&a===""&&i.each(g=>Zu(r.element,g.value))},...o}})])}},YB=la({name:"HtmlSelect",configFields:[Ce("options"),pr("selectBehaviours",[Ht,Ye]),oe("selectClasses",[]),oe("selectAttributes",{}),oo("data")],factory:KB}),XB=(e,t,n)=>{const o=Ae(e.items,g=>({text:t.translate(g.text),value:g.value})),r=e.label.map(g=>fm(g,t)),a=ho.parts.field({dom:{},...n.map(g=>({data:g})).getOr({}),selectAttributes:{size:e.size},options:o,factory:YB,selectBehaviours:He([Dt.config({disabled:()=>!e.enabled||t.isDisabled()}),gs.config({}),nn("selectbox-change",[xe(Bd(),(g,b)=>{yt(g,$a,{name:e.name})})])])}),i=e.size>1?v.none():v.some(Xl("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},t.icons)),d={dom:{tag:"div",classes:["tox-selectfield"]},components:ie([[a],i.toArray()])};return ho.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ie([r.toArray(),[d]]),fieldBehaviours:He([Dt.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:g=>{ho.getField(g).each(Dt.disable)},onEnabled:g=>{ho.getField(g).each(Dt.enable)}}),fr()])})},JB=$([oe("field1Name","field1"),oe("field2Name","field2"),Wu("onLockedChange"),Uu(["lockClass"]),oe("locked",!1),Ea.field("coupledFieldBehaviours",[Dn,Ye])]),QB=(e,t,n)=>Ao(e,t,n).bind(Dn.getCurrent),oO=(e,t)=>Wr({factory:ho,name:e,overrides:n=>({fieldBehaviours:He([nn("coupled-input-behaviour",[xe(Fu(),o=>{QB(o,n,t).each(r=>{Ao(o,n,"lock").each(a=>{fn.isOn(a)&&n.onLockedChange(o,r,a)})})})])])})}),eI=$([oO("field1","field2"),oO("field2","field1"),Wr({factory:Gr,schema:[Ce("dom")],name:"lock",overrides:e=>({buttonBehaviours:He([fn.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),tI=(e,t,n,o)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Ea.augment(e.coupledFieldBehaviours,[Dn.config({find:v.some}),Ye.config({store:{mode:"manual",getValue:r=>{const a=c1(r,e,["field1","field2"]);return{[e.field1Name]:Ye.getValue(a.field1()),[e.field2Name]:Ye.getValue(a.field2())}},setValue:(r,a)=>{const i=c1(r,e,["field1","field2"]);Ko(a,e.field1Name)&&Ye.setValue(i.field1(),a[e.field1Name]),Ko(a,e.field2Name)&&Ye.setValue(i.field2(),a[e.field2Name])}}})]),apis:{getField1:r=>Ao(r,e,"field1"),getField2:r=>Ao(r,e,"field2"),getLock:r=>Ao(r,e,"lock")}}),nl=ac({name:"FormCoupledInputs",configFields:JB(),partFields:eI(),factory:tI,apis:{getField1:(e,t)=>e.getField1(t),getField2:(e,t)=>e.getField2(t),getLock:(e,t)=>e.getLock(t)}}),nI=e=>{const t={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},n=r=>r in t?t[r]:1;let o=e.value.toFixed(n(e.unit));return o.indexOf(".")!==-1&&(o=o.replace(/\.?0*$/,"")),o+e.unit},G4=e=>{const n=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(n!==null){const o=parseFloat(n[1]),r=n[2];return mn.value({value:o,unit:r})}else return mn.error(e)},sO=(e,t)=>{const n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},o=r=>Cn(n,r);return e.unit===t?v.some(e.value):o(e.unit)&&o(t)?n[e.unit]===n[t]?v.some(e.value):v.some(e.value/n[e.unit]*n[t]):v.none()},q4=e=>v.none(),oI=(e,t)=>n=>sO(n,t).map(o=>({value:o*e,unit:t})),sI=(e,t)=>{const n=G4(e).toOptional(),o=G4(t).toOptional();return Zs(n,o,(r,a)=>sO(r,a.unit).map(i=>a.value/i).map(i=>oI(i,a.unit)).getOr(q4)).getOr(q4)},rI=(e,t)=>{let n=q4;const o=et("ratio-event"),r=x=>Xl(x,{tag:"span",classes:["tox-icon","tox-lock-icon__"+x]},t.icons),a=nl.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[r("lock"),r("unlock")],buttonBehaviours:He([Dt.config({disabled:()=>!e.enabled||t.isDisabled()}),fr(),gs.config({})])}),i=x=>({dom:{tag:"div",classes:["tox-form__group"]},components:x}),d=x=>ho.parts.field({factory:vg,inputClasses:["tox-textfield"],inputBehaviours:He([Dt.config({disabled:()=>!e.enabled||t.isDisabled()}),fr(),gs.config({}),nn("size-input-events",[xe($r(),(k,A)=>{yt(k,o,{isField1:x})}),xe(Bd(),(k,A)=>{yt(k,$a,{name:e.name})})])]),selectOnFocus:!1}),g=x=>({dom:{tag:"label",classes:["tox-label"]},components:[Os(t.translate(x))]}),b=nl.parts.field1(i([ho.parts.label(g("Width")),d(!0)])),w=nl.parts.field2(i([ho.parts.label(g("Height")),d(!1)]));return nl.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[b,w,i([g(Df),a])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(x,k,A)=>{G4(Ye.getValue(x)).each(B=>{n(B).each(Z=>{Ye.setValue(k,nI(Z))})})},coupledFieldBehaviours:He([Dt.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:x=>{nl.getField1(x).bind(ho.getField).each(Dt.disable),nl.getField2(x).bind(ho.getField).each(Dt.disable),nl.getLock(x).each(Dt.disable)},onEnabled:x=>{nl.getField1(x).bind(ho.getField).each(Dt.enable),nl.getField2(x).bind(ho.getField).each(Dt.enable),nl.getLock(x).each(Dt.enable)}}),fr(),nn("size-input-events2",[xe(o,(x,k)=>{const A=k.event.isField1,B=A?nl.getField1(x):nl.getField2(x),Z=A?nl.getField2(x):nl.getField1(x),re=B.map(Ye.getValue).getOr(""),J=Z.map(Ye.getValue).getOr("");n=sI(re,J)})])])})},cI=(e,t,n)=>{const o=ni.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Os(t.translate(e.label))]}),r=ni.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),a=ni.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return ni.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e.min,maxX:e.max,getInitialValue:$(n.getOrThunk(()=>(Math.abs(e.max)-Math.abs(e.min))/2))},components:[o,r,a],sliderBehaviours:He([oi.self(),Ht.config({})]),onChoose:(i,d,g)=>{yt(i,$a,{name:e.name,value:g})}})},aI=(e,t)=>{const n=d=>({dom:{tag:"th",innerHtml:t.translate(d)}}),o=d=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ae(d,n)}]}),r=d=>({dom:{tag:"td",innerHtml:t.translate(d)}}),a=d=>({dom:{tag:"tr"},components:Ae(d,r)}),i=d=>({dom:{tag:"tbody"},components:Ae(d,a)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[o(e.header),i(e.cells)],behaviours:He([gs.config({}),Ht.config({})])}},rO=(e,t)=>{const n=e.label.map(A=>fm(A,t)),o=[Dt.config({disabled:()=>e.disabled||t.isDisabled()}),fr(),St.config({mode:"execution",useEnter:e.multiline!==!0,useControlEnter:e.multiline===!0,execute:A=>(to(A,V1),v.some(!0))}),nn("textfield-change",[xe(Fu(),(A,B)=>{yt(A,$a,{name:e.name})}),xe(Ru(),(A,B)=>{yt(A,$a,{name:e.name})})]),gs.config({})],r=e.validation.map(A=>tu.config({getRoot:B=>Lr(B.element),invalidClass:"tox-invalid",validator:{validate:B=>{const Z=Ye.getValue(B),re=A.validator(Z);return uc.pure(re===!0?mn.value(Z):mn.error(re))},validateOnLoad:A.validateOnLoad}})).toArray(),a=e.placeholder.fold($({}),A=>({placeholder:t.translate(A)})),i=e.inputMode.fold($({}),A=>({inputmode:A})),d={...a,...i},g=ho.parts.field({tag:e.multiline===!0?"textarea":"input",...e.data.map(A=>({data:A})).getOr({}),inputAttributes:d,inputClasses:[e.classname],inputBehaviours:He(ie([o,r])),selectOnFocus:!1,factory:vg}),b=e.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[g]}:g,x=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),k=[Dt.config({disabled:()=>e.disabled||t.isDisabled(),onDisabled:A=>{ho.getField(A).each(Dt.disable)},onEnabled:A=>{ho.getField(A).each(Dt.enable)}}),fr()];return L1(n,b,x,k)},lI=(e,t,n)=>rO({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:!e.enabled,classname:"tox-textfield",validation:v.none(),maximized:e.maximized,data:n},t),iI=(e,t,n)=>rO({name:e.name,multiline:!0,label:e.label,inputMode:v.none(),placeholder:e.placeholder,flex:!0,disabled:!e.enabled,classname:"tox-textarea",validation:v.none(),maximized:e.maximized,data:n},t),j1=(e,t)=>t.getAnimationRoot.fold(()=>e.element,n=>n(e)),ad=e=>e.dimension.property,Dg=(e,t)=>e.dimension.getDimension(t),O2=(e,t)=>{const n=j1(e,t);sa(n,[t.shrinkingClass,t.growingClass])},K4=(e,t)=>{ys(e.element,t.openClass),Es(e.element,t.closedClass),Je(e.element,ad(t),"0px"),Qs(e.element)},Y4=(e,t)=>{ys(e.element,t.closedClass),Es(e.element,t.openClass),Nn(e.element,ad(t))},cO=(e,t,n,o)=>{n.setCollapsed(),Je(e.element,ad(t),Dg(t,e.element)),O2(e,t),K4(e,t),t.onStartShrink(e),t.onShrunk(e)},uI=(e,t,n,o)=>{const r=o.getOrThunk(()=>Dg(t,e.element));n.setCollapsed(),Je(e.element,ad(t),r),Qs(e.element);const a=j1(e,t);ys(a,t.growingClass),Es(a,t.shrinkingClass),K4(e,t),t.onStartShrink(e)},aO=(e,t,n)=>{const o=Dg(t,e.element);(o==="0px"?cO:uI)(e,t,n,v.some(o))},lO=(e,t,n)=>{const o=j1(e,t),r=Tc(o,t.shrinkingClass),a=Dg(t,e.element);Y4(e,t);const i=Dg(t,e.element);(r?()=>{Je(e.element,ad(t),a),Qs(e.element)}:()=>{K4(e,t)})(),ys(o,t.shrinkingClass),Es(o,t.growingClass),Y4(e,t),Je(e.element,ad(t),i),n.setExpanded(),t.onStartGrow(e)},dI=(e,t,n)=>{if(n.isExpanded()){Nn(e.element,ad(t));const o=Dg(t,e.element);Je(e.element,ad(t),o)}},mI=(e,t,n)=>{n.isExpanded()||lO(e,t,n)},gI=(e,t,n)=>{n.isExpanded()&&aO(e,t,n)},hI=(e,t,n)=>{n.isExpanded()&&cO(e,t,n)},pI=(e,t,n)=>n.isExpanded(),fI=(e,t,n)=>n.isCollapsed(),iO=(e,t,n)=>{const o=j1(e,t);return Tc(o,t.growingClass)===!0},uO=(e,t,n)=>{const o=j1(e,t);return Tc(o,t.shrinkingClass)===!0};var bI=Object.freeze({__proto__:null,refresh:dI,grow:mI,shrink:gI,immediateShrink:hI,hasGrown:pI,hasShrunk:fI,isGrowing:iO,isShrinking:uO,isTransitioning:(e,t,n)=>iO(e,t)||uO(e,t),toggleGrow:(e,t,n)=>{(n.isExpanded()?aO:lO)(e,t,n)},disableTransitions:O2,immediateGrow:(e,t,n)=>{n.isExpanded()||(Y4(e,t),Je(e.element,ad(t),Dg(t,e.element)),O2(e,t),n.setExpanded(),t.onStartGrow(e),t.onGrown(e))}}),vI=Object.freeze({__proto__:null,exhibit:(e,t,n)=>{const o=t.expanded;return Uc(o?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:At(t.dimension.property,"0px")})},events:(e,t)=>Io([Lu(Id(),(n,o)=>{o.event.raw.propertyName===e.dimension.property&&(O2(n,e),t.isExpanded()&&Nn(n.element,e.dimension.property),(t.isExpanded()?e.onGrown:e.onShrunk)(n))})])}),yI=[Ce("closedClass"),Ce("openClass"),Ce("shrinkingClass"),Ce("growingClass"),oo("getAnimationRoot"),Vn("onShrunk"),Vn("onStartShrink"),Vn("onGrown"),Vn("onStartGrow"),oe("expanded",!1),fc("dimension",or("property",{width:[zo("property","width"),zo("getDimension",e=>M(e)+"px")],height:[zo("property","height"),zo("getDimension",e=>Ro(e)+"px")]}))],wI=Object.freeze({__proto__:null,init:e=>{const t=m(e.expanded),n=()=>"expanded: "+t.get();return Zc({isExpanded:()=>t.get()===!0,isCollapsed:()=>t.get()===!1,setCollapsed:on(t.set,!1),setExpanded:on(t.set,!0),readState:n})}});const Fa=rr({fields:yI,name:"sliding",active:vI,apis:bI,state:wI}),dO=e=>({isEnabled:()=>!Dt.isDisabled(e),setEnabled:t=>Dt.set(e,!t),setActive:t=>{const n=e.element;t?(Es(n,"tox-tbtn--enabled"),Pt(n,"aria-pressed",!0)):(ys(n,"tox-tbtn--enabled"),P(n,"aria-pressed"))},isActive:()=>Tc(e.element,"tox-tbtn--enabled"),setText:t=>{yt(e,Cl,{text:t})},setIcon:t=>yt(e,Mg,{icon:t})}),G1=(e,t,n,o,r=!0)=>U4({text:e.text,icon:e.icon,tooltip:e.tooltip,searchable:e.search.isSome(),role:o,fetch:(a,i)=>{const d={pattern:e.search.isSome()?QF(a):""};e.fetch(g=>{i(dp(g,Ci.CLOSE_ON_EXECUTE,n,{isHorizontalMenu:!1,search:e.search}))},d,dO(a))},onSetup:e.onSetup,getApi:dO,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...r?[gs.config({})]:[]]},t,n.shared),SI=(e,t,n)=>{const o=a=>i=>{const d=!i.isActive();i.setActive(d),a.storage.set(d),n.shared.getSink().each(g=>{t().getOpt(g).each(b=>{aa(b.element),yt(b,eu,{name:a.name,value:a.storage.get()})})})},r=a=>i=>{i.setActive(a.storage.get())};return a=>{a(Ae(e,i=>{const d=i.text.fold(()=>({}),g=>({text:g}));return{type:i.type,active:!1,...d,onAction:o(i),onSetup:r(i)}}))}},mO=e=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:e,"aria-label":e}},components:[Os(e)]}),gO=et("leaf-label-event-id"),X4=({leaf:e,onLeafAction:t,visible:n,treeId:o,selectedId:r,backstage:a})=>{const i=e.menu.map(g=>G1(g,"tox-mbtn",a,v.none(),n)),d=[mO(e.title)];return i.each(g=>d.push(g)),Gr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(n?["tox-tree--leaf__label--visible"]:[])},components:d,role:"treeitem",action:g=>{t(e.id),g.getSystem().broadcastOn([`update-active-item-${o}`],{value:e.id})},eventOrder:{[Ga()]:[gO,"keying"]},buttonBehaviours:He([...n?[gs.config({})]:[],fn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),_c.config({channels:{[`update-active-item-${o}`]:{onReceive:(g,b)=>{(b.value===e.id?fn.on:fn.off)(g)}}}}),nn(gO,[Go((g,b)=>{r.each(w=>{(w===e.id?fn.on:fn.off)(g)})}),xe(Ga(),(g,b)=>{const w=b.event.raw.code==="ArrowLeft",x=b.event.raw.code==="ArrowRight";w?(bi(g.element,".tox-tree--directory").each(k=>{g.getSystem().getByDom(k).each(A=>{ef(k,".tox-tree--directory__label").each(B=>{A.getSystem().getByDom(B).each(Ht.focus)})})}),b.stop()):x&&b.stop()})])])})},xI=(e,t,n)=>Xl(e,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:n},t),CI=(e,t)=>xI(e,t,[]),hO=et("directory-label-event-id"),TI=({directory:e,visible:t,noChildren:n,backstage:o})=>{const r=e.menu.map(d=>G1(d,"tox-mbtn",o,v.none())),a=[{dom:{tag:"div",classes:["tox-chevron"]},components:[CI("chevron-right",o.shared.providers.icons)]},mO(e.title)];r.each(d=>{a.push(d)});const i=d=>{bi(d.element,".tox-tree--directory").each(g=>{d.getSystem().getByDom(g).each(b=>{const w=!fn.isOn(b);fn.toggle(b),yt(d,"expand-tree-node",{expanded:w,node:e.id})})})};return Gr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(t?["tox-tree--directory__label--visible"]:[])},components:a,action:i,eventOrder:{[Ga()]:[hO,"keying"]},buttonBehaviours:He([...t?[gs.config({})]:[],nn(hO,[xe(Ga(),(d,g)=>{const b=g.event.raw.code==="ArrowRight",w=g.event.raw.code==="ArrowLeft";b&&n&&g.stop(),(b||w)&&bi(d.element,".tox-tree--directory").each(x=>{d.getSystem().getByDom(x).each(k=>{!fn.isOn(k)&&b||fn.isOn(k)&&w?(i(d),g.stop()):w&&!fn.isOn(k)&&(bi(k.element,".tox-tree--directory").each(A=>{ef(A,".tox-tree--directory__label").each(B=>{k.getSystem().getByDom(B).each(Ht.focus)})}),g.stop())})})})])])})},kI=({children:e,onLeafAction:t,visible:n,treeId:o,expandedIds:r,selectedId:a,backstage:i})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:e.map(d=>d.type==="leaf"?X4({leaf:d,selectedId:a,onLeafAction:t,visible:n,treeId:o,backstage:i}):J4({directory:d,expandedIds:r,selectedId:a,onLeafAction:t,labelTabstopping:n,treeId:o,backstage:i})),behaviours:He([Fa.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:n}),Kt.config({})])}),EI=et("directory-event-id"),J4=({directory:e,onLeafAction:t,labelTabstopping:n,treeId:o,backstage:r,expandedIds:a,selectedId:i})=>{const{children:d}=e,g=m(a),b=x=>d.map(k=>k.type==="leaf"?X4({leaf:k,selectedId:i,onLeafAction:t,visible:x,treeId:o,backstage:r}):J4({directory:k,expandedIds:g.get(),selectedId:i,onLeafAction:t,labelTabstopping:x,treeId:o,backstage:r})),w=a.includes(e.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[TI({directory:e,visible:n,noChildren:e.children.length===0,backstage:r}),kI({children:d,expandedIds:a,selectedId:i,onLeafAction:t,visible:w,treeId:o,backstage:r})],behaviours:He([nn(EI,[Go((x,k)=>{fn.set(x,w)}),xe("expand-tree-node",(x,k)=>{const{expanded:A,node:B}=k.event;g.set(A?[...g.get(),B]:g.get().filter(Z=>Z!==B))})]),fn.config({...e.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(x,k)=>{const A=x.components()[1],B=b(k);k?Fa.grow(A):Fa.shrink(A),Kt.set(A,B)}})])}},OI=et("tree-event-id"),AI=(e,t)=>{const n=e.onLeafAction.getOr(se),o=e.onToggleExpand.getOr(se),r=e.defaultExpandedIds,a=m(r),i=m(e.defaultSelectedId),d=et("tree-id"),g=(b,w)=>e.items.map(x=>x.type==="leaf"?X4({leaf:x,selectedId:b,onLeafAction:n,visible:!0,treeId:d,backstage:t}):J4({directory:x,selectedId:b,onLeafAction:n,expandedIds:w,labelTabstopping:!0,treeId:d,backstage:t}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:g(i.get(),a.get()),behaviours:He([St.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),nn(OI,[xe("expand-tree-node",(b,w)=>{const{expanded:x,node:k}=w.event;a.set(x?[...a.get(),k]:a.get().filter(A=>A!==k)),o(a.get(),{expanded:x,node:k})})]),_c.config({channels:{[`update-active-item-${d}`]:{onReceive:(b,w)=>{i.set(v.some(w.value)),Kt.set(b,g(v.some(w.value),a.get()))}}}}),Kt.config({})])}};var _I=Object.freeze({__proto__:null,events:(e,t)=>{const o=e.stream.streams.setup(e,t);return Io([xe(e.event,o),zl(()=>t.cancel())].concat(e.cancelEvent.map(r=>[xe(r,()=>t.cancel())]).getOr([])))}});const pO=e=>{const t=m(null);return Zc({readState:()=>({timer:t.get()!==null?"set":"unset"}),setTimer:a=>{t.set(a)},cancel:()=>{const a=t.get();a!==null&&a.cancel()}})};var MI=Object.freeze({__proto__:null,throttle:pO,init:e=>e.stream.streams.state(e)});const DI=(e,t)=>{const n=e.stream,o=P4(e.onStream,n.delay);return t.setTimer(o),(r,a)=>{o.throttle(r,a),n.stopEvent&&a.stop()}};var $I=[fc("stream",or("mode",{throttle:[Ce("delay"),oe("stopEvent",!0),zo("streams",{setup:DI,state:pO})]})),oe("event","input"),oo("cancelEvent"),Wu("onStream")];const Q4=rr({fields:$I,name:"streaming",active:_I,state:MI}),A2=(e,t,n)=>{const o=Ye.getValue(n);Ye.setValue(t,o),bO(t)},fO=(e,t)=>{const n=e.element,o=pi(n),r=n.dom;$o(n,"type")!=="number"&&t(r,o)},bO=e=>{fO(e,(t,n)=>t.setSelectionRange(n.length,n.length))},FI=(e,t)=>{fO(e,(n,o)=>n.setSelectionRange(t,o.length))},RI=(e,t,n)=>{if(e.selectsOver){const o=Ye.getValue(t),r=e.getDisplayText(o),a=Ye.getValue(n);return e.getDisplayText(a).indexOf(r)===0?v.some(()=>{A2(e,t,n),FI(t,r.length)}):v.none()}else return v.none()},e3=$("alloy.typeahead.itemexecute"),BI=(e,t,n,o)=>{const r=(x,k,A)=>{e.previewing.set(!1);const B=Ms.getCoupled(x,"sandbox");if(Hn.isOpen(B))Dn.getCurrent(B).each(Z=>{no.getHighlighted(Z).fold(()=>{A(Z)},()=>{h0(B,Z.element,"keydown",k)})});else{const Z=re=>{Dn.getCurrent(re).each(A)};i2(e,i(x),x,B,o,Z,Gc.HighlightMenuAndItem).get(se)}},a=x5(e),i=x=>k=>k.map(A=>{const B=Do(A.menus),Z=Me(B,J=>Xt(J.items,K=>K.type==="item"));return Ye.getState(x).update(Ae(Z,J=>J.data)),A}),d=x=>Dn.getCurrent(x),g="typeaheadevents",b=[Ht.config({}),Ye.config({onSetValue:e.onSetValue,store:{mode:"dataset",getDataKey:x=>pi(x.element),getFallbackEntry:x=>({value:x,meta:{}}),setValue:(x,k)=>{Zu(x.element,e.model.getDisplayText(k))},...e.initialData.map(x=>At("initialValue",x)).getOr({})}}),Q4.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:(x,k)=>{const A=Ms.getCoupled(x,"sandbox");if(Ht.isFocused(x)&&pi(x.element).length>=e.minChars){const Z=d(A).bind(J=>no.getHighlighted(J).map(Ye.getValue));e.previewing.set(!0);const re=J=>{d(A).each(K=>{Z.fold(()=>{e.model.selectsOver&&no.highlightFirst(K)},ce=>{no.highlightBy(K,ke=>Ye.getValue(ke).value===ce.value),no.getHighlighted(K).orThunk(()=>(no.highlightFirst(K),v.none()))})})};i2(e,i(x),x,A,o,re,Gc.HighlightJustMenu).get(se)}},cancelEvent:qg()}),St.config({mode:"special",onDown:(x,k)=>(r(x,k,no.highlightFirst),v.some(!0)),onEscape:x=>{const k=Ms.getCoupled(x,"sandbox");return Hn.isOpen(k)?(Hn.close(k),v.some(!0)):v.none()},onUp:(x,k)=>(r(x,k,no.highlightLast),v.some(!0)),onEnter:x=>{const k=Ms.getCoupled(x,"sandbox"),A=Hn.isOpen(k);if(A&&!e.previewing.get())return d(k).bind(B=>no.getHighlighted(B)).map(B=>(yt(x,e3(),{item:B}),!0));{const B=Ye.getValue(x);return to(x,qg()),e.onExecute(k,x,B),A&&Hn.close(k),v.some(!0)}}}),fn.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),Ms.config({others:{sandbox:x=>v4(e,x,{onOpen:()=>fn.on(x),onClose:()=>{e.lazyTypeaheadComp.get().each(k=>P(k.element,"aria-activedescendant")),fn.off(x)}})}}),nn(g,[Go(x=>{e.lazyTypeaheadComp.set(v.some(x))}),zl(x=>{e.lazyTypeaheadComp.set(v.none())}),qa(x=>{const k=se;b4(e,i(x),x,o,k,Gc.HighlightMenuAndItem).get(se)}),xe(e3(),(x,k)=>{const A=Ms.getCoupled(x,"sandbox");A2(e.model,x,k.event.item),to(x,qg()),e.onItemExecute(x,A,k.event.item,Ye.getValue(x)),Hn.close(A),bO(x)})].concat(e.dismissOnBlur?[xe(Ni(),x=>{const k=Ms.getCoupled(x,"sandbox");bl(k.element).isNone()&&Hn.close(k)})]:[]))],w={[Iu()]:[Ye.name(),Q4.name(),g],...e.eventOrder};return{uid:e.uid,dom:C5(vo(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...a,...Ks(e.typeaheadBehaviours,b)},eventOrder:w}},II=$([oo("lazySink"),Ce("fetch"),oe("minChars",5),oe("responseTime",1e3),Vn("onOpen"),oe("getHotspot",v.some),oe("getAnchorOverrides",$({})),oe("layouts",v.none()),oe("eventOrder",{}),Bm("model",{},[oe("getDisplayText",e=>e.meta!==void 0&&e.meta.text!==void 0?e.meta.text:e.value),oe("selectsOver",!0),oe("populateFromBrowse",!0)]),Vn("onSetValue"),Wc("onExecute"),Vn("onItemExecute"),oe("inputClasses",[]),oe("inputAttributes",{}),oe("inputStyles",{}),oe("matchWidth",!0),oe("useMinWidth",!1),oe("dismissOnBlur",!0),Uu(["openClass"]),oo("initialData"),pr("typeaheadBehaviours",[Ht,Ye,Q4,St,fn,Ms]),Mr("lazyTypeaheadComp",()=>m(v.none)),Mr("previewing",()=>m(!0))].concat(S5()).concat(y4())),HI=$([Qa({schema:[Gm()],name:"menu",overrides:e=>({fakeFocus:!0,onHighlightItem:(t,n,o)=>{e.previewing.get()?e.lazyTypeaheadComp.get().each(r=>{RI(e.model,r,o).fold(()=>{e.model.selectsOver?(no.dehighlight(n,o),e.previewing.set(!0)):e.previewing.set(!1)},a=>{a(),e.previewing.set(!1)})}):e.lazyTypeaheadComp.get().each(r=>{e.model.populateFromBrowse&&A2(e.model,r,o),C(o.element,"id").each(a=>Pt(r.element,"aria-activedescendant",a))})},onExecute:(t,n)=>e.lazyTypeaheadComp.get().map(o=>(yt(o,e3(),{item:n}),!0)),onHover:(t,n)=>{e.previewing.set(!1),e.lazyTypeaheadComp.get().each(o=>{e.model.populateFromBrowse&&A2(e.model,o,n)})}})})]),PI=ac({name:"Typeahead",configFields:II(),partFields:HI(),factory:BI}),si=e=>({...e,toCached:()=>si(e.toCached()),bindFuture:g=>si(e.bind(b=>b.fold(w=>uc.pure(mn.error(w)),w=>g(w)))),bindResult:g=>si(e.map(b=>b.bind(g))),mapResult:g=>si(e.map(b=>b.map(g))),mapError:g=>si(e.map(b=>b.mapError(g))),foldResult:(g,b)=>e.map(w=>w.fold(g,b)),withTimeout:(g,b)=>si(uc.nu(w=>{let x=!1;const k=setTimeout(()=>{x=!0,w(mn.error(b()))},g);e.get(A=>{x||(clearTimeout(k),w(A))})}))}),vO=e=>si(uc.nu(e)),yO=e=>si(uc.pure(mn.value(e))),LI={nu:vO,wrap:si,pure:yO,value:yO,error:e=>si(uc.pure(mn.error(e))),fromResult:e=>si(uc.pure(e)),fromFuture:e=>si(e.map(mn.value)),fromPromise:e=>vO(t=>{e.then(n=>{t(mn.value(n))},n=>{t(mn.error(n))})})},_2=(e,t,n=[],o,r,a)=>{const i=t.fold(()=>({}),b=>({action:b})),d={buttonBehaviours:He([Ql.button(()=>!e.enabled||a.isDisabled()),fr(),gs.config({}),nn("button press",[f0("click"),f0("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...i},g=vo(d,{dom:o});return vo(g,{components:r})},NI=(e,t,n,o=[])=>{const r=e.tooltip.map(g=>({"aria-label":n.translate(g),title:n.translate(g)})).getOr({}),a={tag:"button",classes:["tox-tbtn"],attributes:r},i=e.icon.map(g=>Z4(g,n.icons)),d=sp([i]);return _2(e,t,o,a,d,n)},t3=e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},wO=(e,t,n,o=[],r=[])=>{const a=n.translate(e.text),i=e.icon.map(k=>Z4(k,n.icons)),d=[i.getOrThunk(()=>Os(a))],g=e.buttonType.getOr(!e.primary&&!e.borderless?"secondary":"primary"),x={tag:"button",classes:[...t3(g),...i.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...r],attributes:{title:a}};return _2(e,t,o,x,d,n)},SO=(e,t,n,o=[],r=[])=>{const a=wO(e,v.some(t),n,o,r);return Gr.sketch(a)},xO=(e,t)=>n=>{t==="custom"?yt(n,eu,{name:e,value:{}}):t==="submit"?to(n,V1):t==="cancel"?to(n,bm):console.error("Unknown button type: ",t)},VI=(e,t)=>t==="menu",zI=(e,t)=>t==="custom"||t==="cancel"||t==="submit",ZI=(e,t)=>t==="togglebutton",UI=(e,t)=>{var n,o;const r=e.icon.map(K=>wm(K,t.icons)).map(go),a=K=>{yt(K,eu,{name:e.name,value:{setIcon:ce=>{r.map(ke=>ke.getOpt(K).each(be=>{Kt.set(be,[wm(ce,t.icons)])}))}}})},i=e.buttonType.getOr(e.primary?"primary":"secondary"),d={...e,name:(n=e.name)!==null&&n!==void 0?n:"",tooltip:v.from(e.tooltip),enabled:(o=e.enabled)!==null&&o!==void 0?o:!1},g=d.tooltip.map(K=>({"aria-label":t.translate(K),title:t.translate(K)})).getOr({}),b=t3(i??"secondary"),w=e.icon.isSome()&&e.text.isSome(),x={tag:"button",classes:[...b.concat(e.icon.isSome()?["tox-button--icon"]:[]),...e.active?["tox-button--enabled"]:[],...w?["tox-button--icon-and-text"]:[]],attributes:g},k=[],A=t.translate(e.text.getOr("")),B=Os(A),re=[...sp([r.map(K=>K.asSpec())]),...e.text.isSome()?[B]:[]],J=_2(d,v.some(a),k,x,re,t);return Gr.sketch(J)},M2=(e,t,n)=>{if(VI(e,t)){const o=()=>i,r=e,a={...e,type:"menubutton",search:v.none(),onSetup:d=>(d.setEnabled(e.enabled),se),fetch:SI(r.items,o,n)},i=go(G1(a,"tox-tbtn",n,v.none()));return i.asSpec()}else if(zI(e,t)){const o=xO(e.name,t),r={...e,borderless:!1};return SO(r,o,n.shared.providers,[])}else{if(ZI(e,t))return UI(e,n.shared.providers);throw console.error("Unknown footer button type: ",t),new Error("Unknown footer button type")}},WI=(e,t)=>{const n=xO(e.name,"custom");return AR(v.none(),ho.parts.field({factory:Gr,...wO(e,v.some(n),t,[T2(""),oi.self()])}))},jI={type:"separator"},GI=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:se}),n3=(e,t)=>({type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:se}),qI=e=>Ae(e,GI),KI=(e,t)=>Xt(t,n=>n.type===e),CO=(e,t)=>qI(KI(e,t)),YI=e=>CO("header",e.targets),XI=e=>CO("anchor",e.targets),JI=e=>v.from(e.anchorTop).map(t=>n3("<top>",t)).toArray(),QI=e=>v.from(e.anchorBottom).map(t=>n3("<bottom>",t)).toArray(),eH=e=>Ae(e,t=>n3(t,t)),tH=e=>En(e,(t,n)=>t.length===0||n.length===0?t.concat(n):t.concat(jI,n),[]),o3=(e,t)=>{const n=e.toLowerCase();return Xt(t,o=>{var r;const a=o.meta!==void 0&&o.meta.text!==void 0?o.meta.text:o.text,i=(r=o.value)!==null&&r!==void 0?r:"";return fo(a.toLowerCase(),n)||fo(i.toLowerCase(),n)})},nH=(e,t,n)=>{var o,r;const a=Ye.getValue(t),i=(r=(o=a==null?void 0:a.meta)===null||o===void 0?void 0:o.text)!==null&&r!==void 0?r:a.value;return n.getLinkInformation().fold(()=>[],g=>{const b=o3(i,eH(n.getHistory(e)));return e==="file"?tH([b,o3(i,YI(g)),o3(i,ie([JI(g),XI(g),QI(g)]))]):b})},TO=et("aria-invalid"),oH=(e,t,n,o)=>{const r=t.shared.providers,a=K=>{const ce=Ye.getValue(K);n.addToHistory(ce.value,e.filetype)},i={...o.map(K=>({initialData:K})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":TO,type:"url"},minChars:0,responseTime:0,fetch:K=>{const ce=nH(e.filetype,K,n),ke=dp(ce,Ci.BUBBLE_TO_SANDBOX,t,{isHorizontalMenu:!1,search:v.none()});return uc.pure(ke)},getHotspot:K=>B.getOpt(K),onSetValue:(K,ce)=>{K.hasConfigured(tu)&&tu.run(K).get(se)},typeaheadBehaviours:He([...n.getValidationHandler().map(K=>tu.config({getRoot:ce=>Lr(ce.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(ce,ke)=>{w.getOpt(ce).each(be=>{Pt(be.element,"title",r.translate(ke))})}},validator:{validate:ce=>{const ke=Ye.getValue(ce);return LI.nu(be=>{K({type:e.filetype,url:ke.value},he=>{if(he.status==="invalid"){const Be=mn.error(he.message);be(Be)}else{const Be=mn.value(he.message);be(Be)}})})},validateOnLoad:!1}})).toArray(),Dt.config({disabled:()=>!e.enabled||r.isDisabled()}),gs.config({}),nn("urlinput-events",[xe(Fu(),K=>{const ce=pi(K.element),ke=ce.trim();ke!==ce&&Zu(K.element,ke),e.filetype==="file"&&yt(K,$a,{name:e.name})}),xe(Bd(),K=>{yt(K,$a,{name:e.name}),a(K)}),xe(Ru(),K=>{yt(K,$a,{name:e.name}),a(K)})])]),eventOrder:{[Fu()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:K=>K.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:Kv(!1,1,"normal")},onExecute:(K,ce,ke)=>{yt(ce,V1,{})},onItemExecute:(K,ce,ke,be)=>{a(K),yt(K,$a,{name:e.name})}},d=ho.parts.field({...i,factory:PI}),g=e.label.map(K=>fm(K,r)),w=go(((K,ce,ke=K,be=K)=>Xl(ke,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+K],attributes:{title:r.translate(be),"aria-live":"polite",...ce.fold(()=>({}),he=>({id:he}))}},r.icons))("invalid",v.some(TO),"warning")),x=go({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[w.asSpec()]}),k=n.getUrlPicker(e.filetype),A=et("browser.url.event"),B=go({dom:{tag:"div",classes:["tox-control-wrap"]},components:[d,x.asSpec()],behaviours:He([Dt.config({disabled:()=>!e.enabled||r.isDisabled()})])}),Z=go(SO({name:e.name,icon:v.some("browse"),text:e.picker_text.or(e.label).getOr(""),enabled:e.enabled,primary:!1,buttonType:v.none(),borderless:!0},K=>to(K,A),r,[],["tox-browse-url"])),re=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:ie([[B.asSpec()],k.map(()=>Z.asSpec()).toArray()])}),J=K=>{Dn.getCurrent(K).each(ce=>{const ke=Ye.getValue(ce),be={fieldname:e.name,...ke};k.each(he=>{he(be).get(Be=>{Ye.setValue(ce,Be),yt(K,$a,{name:e.name})})})})};return ho.sketch({dom:MR(),components:g.toArray().concat([re()]),fieldBehaviours:He([Dt.config({disabled:()=>!e.enabled||r.isDisabled(),onDisabled:K=>{ho.getField(K).each(Dt.disable),Z.getOpt(K).each(Dt.disable)},onEnabled:K=>{ho.getField(K).each(Dt.enable),Z.getOpt(K).each(Dt.enable)}}),fr(),nn("url-input-events",[xe(A,J)])])})},sH=(e,t)=>{const n=BT(e.icon,t.icons);return Ti.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${e.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:e.url?void 0:n},components:e.url?[Gr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:n,attributes:{title:t.translate(e.iconTooltip)}},action:o=>yt(o,eu,{name:"alert-banner",value:e.url}),buttonBehaviours:He([kx()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]})},rH=(e,t)=>{e.dom.checked=t},cH=e=>e.dom.checked,aH=(e,t,n)=>{const o=g=>(g.element.dom.click(),v.some(!0)),r=ho.parts.field({factory:{sketch:We},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:He([oi.self(),Dt.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:g=>{Lr(g.element).each(b=>Es(b,"tox-checkbox--disabled"))},onEnabled:g=>{Lr(g.element).each(b=>ys(b,"tox-checkbox--disabled"))}}),gs.config({}),Ht.config({}),PE(n,cH,rH),St.config({mode:"special",onEnter:o,onSpace:o,stopSpaceKeyup:!0}),nn("checkbox-events",[xe(Bd(),(g,b)=>{yt(g,$a,{name:e.name})})])])}),a=ho.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Os(t.translate(e.label))],behaviours:He([z1.config({})])}),i=g=>Xl(g==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+g]},t.icons),d=go({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[i("checked"),i("unchecked")]});return ho.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[r,d.asSpec(),a],fieldBehaviours:He([Dt.config({disabled:()=>!e.enabled||t.isDisabled()}),fr()])})},lH=e=>e.presets==="presentation"?Ti.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):Ti.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:He([gs.config({}),Ht.config({})])}),br=e=>(t,n,o,r)=>Xe(n,"name").fold(()=>e(n,r,v.none()),a=>t.field(a,e(n,r,Xe(o,a)))),iH=e=>(t,n,o,r)=>{const a=vo(n,{source:"dynamic"});return br(e)(t,a,o,r)},uH={bar:br((e,t)=>SR(e,t.shared)),collection:br((e,t,n)=>DR(e,t.shared.providers,n)),alertbanner:br((e,t)=>sH(e,t.shared.providers)),input:br((e,t,n)=>lI(e,t.shared.providers,n)),textarea:br((e,t,n)=>iI(e,t.shared.providers,n)),label:br((e,t)=>HB(e,t.shared)),iframe:iH((e,t,n)=>$B(e,t.shared.providers,n)),button:br((e,t)=>WI(e,t.shared.providers)),checkbox:br((e,t,n)=>aH(e,t.shared.providers,n)),colorinput:br((e,t,n)=>PR(e,t.shared,t.colorinput,n)),colorpicker:br((e,t,n)=>fB(e,t.shared.providers,n)),dropzone:br((e,t,n)=>SB(e,t.shared.providers,n)),grid:br((e,t)=>xB(e,t.shared)),listbox:br((e,t,n)=>GB(e,t,n)),selectbox:br((e,t,n)=>XB(e,t.shared.providers,n)),sizeinput:br((e,t)=>rI(e,t.shared.providers)),slider:br((e,t,n)=>cI(e,t.shared.providers,n)),urlinput:br((e,t,n)=>oH(e,t,t.urlinput,n)),customeditor:br(yB),htmlpanel:br(lH),imagepreview:br((e,t,n)=>IB(e,n)),table:br((e,t)=>aI(e,t.shared.providers)),tree:br((e,t)=>AI(e,t)),panel:br((e,t)=>qB(e,t))},dH={field:(e,t)=>t,record:$([])},kO=(e,t,n,o)=>{const r=vo(o,{shared:{interpreter:a=>s3(e,a,n,r)}});return s3(e,t,n,r)},s3=(e,t,n,o)=>Xe(uH,t.type).fold(()=>(console.error(`Unknown factory type "${t.type}", defaulting to container: `,t),t),r=>r(e,t,n,o)),EO=(e,t,n)=>s3(dH,e,t,n),Sm="layout-inset",r3=e=>e.x,OO=(e,t)=>e.x+e.width/2-t.width/2,c3=(e,t)=>e.x+e.width-t.width,a3=e=>e.y,l3=(e,t)=>e.y+e.height-t.height,AO=(e,t)=>e.y+e.height/2-t.height/2,D2=(e,t,n)=>Rr(c3(e,t),l3(e,t),n.insetSouthwest(),cf(),"southwest",gr(e,{right:0,bottom:3}),Sm),$2=(e,t,n)=>Rr(r3(e),l3(e,t),n.insetSoutheast(),rf(),"southeast",gr(e,{left:1,bottom:3}),Sm),q1=(e,t,n)=>Rr(c3(e,t),a3(e),n.insetNorthwest(),sf(),"northwest",gr(e,{right:0,top:2}),Sm),K1=(e,t,n)=>Rr(r3(e),a3(e),n.insetNortheast(),qm(),"northeast",gr(e,{left:1,top:2}),Sm),ri=(e,t,n)=>Rr(OO(e,t),a3(e),n.insetNorth(),af(),"north",gr(e,{top:2}),Sm),Y1=(e,t,n)=>Rr(OO(e,t),l3(e,t),n.insetSouth(),Gy(),"south",gr(e,{bottom:3}),Sm),_O=(e,t,n)=>Rr(c3(e,t),AO(e,t),n.insetEast(),tb(),"east",gr(e,{right:0}),Sm),MO=(e,t,n)=>Rr(r3(e),AO(e,t),n.insetWest(),kc(),"west",gr(e,{left:1}),Sm),mH=e=>{switch(e){case"north":return ri;case"northeast":return K1;case"northwest":return q1;case"south":return Y1;case"southeast":return $2;case"southwest":return D2;case"east":return _O;case"west":return MO}},DO=(e,t,n,o,r)=>fb(o).map(mH).getOr(ri)(e,t,n,o,r),gH=e=>{switch(e){case"north":return Y1;case"northeast":return $2;case"northwest":return D2;case"south":return ri;case"southeast":return K1;case"southwest":return q1;case"east":return MO;case"west":return _O}},hH=(e,t,n,o,r)=>fb(o).map(gH).getOr(ri)(e,t,n,o,r),X1={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},pH=(e,t,n)=>{const r={maxHeightFunction:qd()},a=()=>({type:"node",root:De(le(e())),node:v.from(e()),bubble:jl(12,12,X1),layouts:{onRtl:()=>[K1],onLtr:()=>[q1]},overrides:r}),i=()=>({type:"hotspot",hotspot:t(),bubble:jl(-12,12,X1),layouts:{onRtl:()=>[sr,Br,hr],onLtr:()=>[Br,sr,hr]},overrides:r});return()=>n()?a():i()},fH=(e,t,n,o)=>{const a={maxHeightFunction:qd()},i=()=>({type:"node",root:De(le(t())),node:v.from(t()),bubble:jl(12,12,X1),layouts:{onRtl:()=>[ri],onLtr:()=>[ri]},overrides:a}),d=()=>e?{type:"node",root:De(le(t())),node:v.from(t()),bubble:jl(0,-Ia(t()),X1),layouts:{onRtl:()=>[sc],onLtr:()=>[sc]},overrides:a}:{type:"hotspot",hotspot:n(),bubble:jl(0,0,X1),layouts:{onRtl:()=>[sc],onLtr:()=>[sc]},overrides:a};return()=>o()?i():d()},bH=(e,t,n)=>{const o=()=>({type:"node",root:De(le(e())),node:v.from(e()),layouts:{onRtl:()=>[ri],onLtr:()=>[ri]}}),r=()=>({type:"hotspot",hotspot:t(),layouts:{onRtl:()=>[hr],onLtr:()=>[hr]}});return()=>n()?o():r()},vH=(e,t)=>()=>({type:"selection",root:t(),getSelection:()=>{const n=e.selection.getRng(),o=e.model.table.getSelectedCells();if(o.length>1){const r=o[0],a=o[o.length-1],i={firstCell:q.fromDom(r),lastCell:q.fromDom(a)};return v.some(i)}return v.some(Sr.range(q.fromDom(n.startContainer),n.startOffset,q.fromDom(n.endContainer),n.endOffset))}}),yH=e=>t=>({type:"node",root:e(),node:t}),wH=(e,t,n,o)=>{const r=tp(e),a=()=>q.fromDom(e.getBody()),i=()=>q.fromDom(e.getContentAreaContainer()),d=()=>r||!o();return{inlineDialog:pH(i,t,d),inlineBottomDialog:fH(e.inline,i,n,d),banner:bH(i,t,d),cursor:vH(e,a),node:yH(a)}},SH=e=>(t,n)=>{_k(e)(t,n)},xH=e=>()=>Sk(e),CH=e=>t=>a2(e,t),TH=e=>t=>wk(e,t),kH=e=>({colorPicker:SH(e),hasCustomColors:xH(e),getColors:CH(e),getColorCols:TH(e)}),EH=e=>()=>t5(e),OH=e=>({isDraggableModal:EH(e)}),AH=e=>{const t=m(Ix(e)?"bottom":"top");return{isPositionedAtTop:()=>t.get()==="top",getDockingMode:t.get,setDockingMode:t.set}},$O=e=>Ko(e,"items"),FO=e=>Ko(e,"format"),RO=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],_H=e=>Cn(e,"items"),MH=e=>Cn(e,"block"),DH=e=>Cn(e,"inline"),$H=e=>Cn(e,"selector"),BO=e=>En(e,(t,n)=>{if(_H(n)){const o=BO(n.items);return{customFormats:t.customFormats.concat(o.customFormats),formats:t.formats.concat([{title:n.title,items:o.formats}])}}else if(DH(n)||MH(n)||$H(n)){const r=`custom-${ye(n.name)?n.name:n.title.toLowerCase()}`;return{customFormats:t.customFormats.concat([{name:r,format:n}]),formats:t.formats.concat([{title:n.title,format:r,icon:n.icon}])}}else return{...t,formats:t.formats.concat(n)}},{customFormats:[],formats:[]}),FH=(e,t)=>{const n=BO(t),o=r=>{Ve(r,a=>{e.formatter.has(a.name)||e.formatter.register(a.name,a.format)})};return e.formatter?o(n.customFormats):e.on("init",()=>{o(n.customFormats)}),n.formats},IO=e=>LT(e).map(t=>{const n=FH(e,t);return NT(e)?RO.concat(n):n}).getOr(RO),RH=e=>{const t=cn(e);return t.length===1&&Sn(t,"title")},HO=(e,t,n)=>({...e,type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)}),PO=(e,t,n,o)=>{const r=g=>HO(g,n,o),a=g=>{const b=d(g.items);return{...g,type:"submenu",getStyleItems:$(b)}},i=g=>{const b=ye(g.name)?g.name:et(g.title),w=`custom-${b}`,x={...g,type:"formatter",format:w,isSelected:n(w),getStylePreview:o(w)};return e.formatter.register(b,x),x},d=g=>Ae(g,b=>$O(b)?a(b):FO(b)?r(b):RH(b)?{...b,type:"separator"}:i(b));return d(t)},BH=e=>{const t=d=>()=>e.formatter.match(d),n=d=>()=>{const g=e.formatter.get(d);return g!==void 0?v.some({tag:g.length>0&&(g[0].inline||g[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(d))}):v.none()},o=m([]),r=m([]),a=m(!1);return e.on("PreInit",d=>{const g=IO(e),b=PO(e,g,t,n);o.set(b)}),e.on("addStyleModifications",d=>{const g=PO(e,d.items,t,n);r.set(g),a.set(d.replace)}),{getData:()=>{const d=a.get()?[]:o.get(),g=r.get();return d.concat(g)}}},IH=e=>rn(e)&&e.nodeType===1,HH=cd.trim,LO=e=>t=>!!(IH(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),PH=LO("true"),LH=LO("false"),NO=(e,t,n,o,r)=>({type:e,title:t,url:n,level:o,attach:r}),NH=e=>{let t=e;for(;t=t.parentNode;){const n=t.contentEditable;if(n&&n!=="inherit")return PH(t)}return!1},VH=(e,t)=>Ae(vc(q.fromDom(t),e),n=>n.dom),VO=e=>e.innerText||e.textContent,zH=e=>e.id?e.id:et("h"),ZH=e=>e&&e.nodeName==="A"&&(e.id||e.name)!==void 0,UH=e=>ZH(e)&&ZO(e),zO=e=>e&&/^(H[1-6])$/.test(e.nodeName),ZO=e=>NH(e)&&!LH(e),WH=e=>zO(e)&&ZO(e),jH=e=>zO(e)?parseInt(e.nodeName.substr(1),10):0,GH=e=>{var t;const n=zH(e),o=()=>{e.id=n};return NO("header",(t=VO(e))!==null&&t!==void 0?t:"","#"+n,jH(e),o)},qH=e=>{const t=e.id||e.name,n=VO(e);return NO("anchor",n||"#"+t,"#"+t,0,se)},KH=e=>Ae(Xt(e,WH),GH),YH=e=>Ae(Xt(e,UH),qH),XH=e=>VH("h1,h2,h3,h4,h5,h6,a:not([href])",e),JH=e=>HH(e.title).length>0,QH={find:e=>{const t=XH(e);return Xt(KH(t).concat(YH(t)),JH)}},F2="tinymce-url-history",UO=5,WO=e=>ye(e)&&/^https?/.test(e),eP=e=>Pn(e)&&e.length<=UO&&Pe(e,WO),jO=e=>$t(e)&&ns(e,t=>!eP(t)).isNone(),GO=()=>{const e=xg.getItem(F2);if(e===null)return{};let t;try{t=JSON.parse(e)}catch(n){if(n instanceof SyntaxError)return console.log("Local storage "+F2+" was not valid JSON",n),{};throw n}return jO(t)?t:(console.log("Local storage "+F2+" was not valid format",t),{})},tP=e=>{if(!jO(e))throw new Error(`Bad format for history:
`+JSON.stringify(e));xg.setItem(F2,JSON.stringify(e))},nP=e=>{const t=GO();return Xe(t,e).getOr([])},oP=(e,t)=>{if(!WO(e))return;const n=GO(),o=Xe(n,t).getOr([]),r=Xt(o,a=>a!==e);n[t]=[e].concat(r).slice(0,UO),tP(n)},qO=e=>!!e,sP=e=>an(cd.makeMap(e,/[, ]/),qO),i3=e=>v.from(qT(e)),rP=e=>{const t=v.from(XT(e)).filter(qO).map(sP);return i3(e).fold(Te,n=>t.fold(gt,o=>cn(o).length>0?o:!1))},cP=(e,t)=>{const n=rP(e);return pt(n)?n?i3(e):v.none():n[t]?i3(e):v.none()},aP=(e,t)=>cP(e,t).map(n=>o=>uc.nu(r=>{const a=(d,g)=>{if(!ye(d))throw new Error("Expected value to be string");if(g!==void 0&&!$t(g))throw new Error("Expected meta to be a object");r({value:d,meta:g})},i={filetype:t,fieldname:o.fieldname,...v.from(o.meta).getOr({})};n.call(e,a,o.value,i)})),KO=e=>v.from(e).filter(ye).getOrUndefined(),lP=e=>JT(e)?v.some({targets:QH.find(e.getBody()),anchorTop:KO(QT(e)),anchorBottom:KO(e5(e))}):v.none(),iP=e=>v.from(KT(e)),uP=e=>({getHistory:nP,addToHistory:oP,getLinkInformation:()=>lP(e),getValidationHandler:()=>iP(e),getUrlPicker:t=>aP(e,t)}),dP=(e,t,n,o)=>{const r=m(!1),a=AH(t),i={icons:()=>t.ui.registry.getAll().icons,menuItems:()=>t.ui.registry.getAll().menuItems,translate:tl.translate,isDisabled:()=>t.mode.isReadOnly()||!t.ui.isEnabled(),getOption:t.options.get},d=uP(t),g=BH(t),b=kH(t),w=OH(t),x=()=>r.get(),k=re=>r.set(re),A={shared:{providers:i,anchors:wH(t,n,o,a.isPositionedAtTop),header:a},urlinput:d,styles:g,colorinput:b,dialog:w,isContextMenuOpen:x,setContextMenuState:k},B={...A,shared:{...A.shared,interpreter:re=>EO(re,{},B),getSink:e.popup}},Z={...A,shared:{...A.shared,interpreter:re=>EO(re,{},Z),getSink:e.dialog}};return{popup:B,dialog:Z}},mP=(e,t,n)=>{const o=(he,Be)=>{Ve([t,...n],Le=>{Le.broadcastEvent(he,Be)})},r=(he,Be)=>{Ve([t,...n],Le=>{Le.broadcastOn([he],Be)})},a=he=>r(wi(),{target:he.target}),i=Ml(),d=rc(i,"touchstart",a),g=rc(i,"touchmove",he=>o(u0(),he)),b=rc(i,"touchend",he=>o(Kg(),he)),w=rc(i,"mousedown",a),x=rc(i,"mouseup",he=>{he.raw.button===0&&r(Kf(),{target:he.target})}),k=he=>r(wi(),{target:q.fromDom(he.target)}),A=he=>{he.button===0&&r(Kf(),{target:q.fromDom(he.target)})},B=()=>{Ve(e.editorManager.get(),he=>{e!==he&&he.dispatch("DismissPopups",{relatedTarget:e})})},Z=he=>o(zi(),Tf(he)),re=he=>{r(tm(),{}),o(Vl(),Tf(he))},J=le(q.fromDom(e.getElement())),K=Cf(J,"scroll",he=>{requestAnimationFrame(()=>{const Be=e.getContainer();if(Be!=null){const Qt=Cg(e,t.element).map(at=>[at.element,...at.others]).getOr([]);Kn(Qt,at=>Qn(at,he.target))&&(e.dispatch("ElementScroll",{target:he.target.dom}),o(Xg(),he))}})}),ce=()=>r(tm(),{}),ke=he=>{he.state&&r(wi(),{target:q.fromDom(e.getContainer())})},be=he=>{r(wi(),{target:q.fromDom(he.relatedTarget.getContainer())})};e.on("PostRender",()=>{e.on("click",k),e.on("tap",k),e.on("mouseup",A),e.on("mousedown",B),e.on("ScrollWindow",Z),e.on("ResizeWindow",re),e.on("ResizeEditor",ce),e.on("AfterProgressState",ke),e.on("DismissPopups",be)}),e.on("remove",()=>{e.off("click",k),e.off("tap",k),e.off("mouseup",A),e.off("mousedown",B),e.off("ScrollWindow",Z),e.off("ResizeWindow",re),e.off("ResizeEditor",ce),e.off("AfterProgressState",ke),e.off("DismissPopups",be),w.unbind(),d.unbind(),g.unbind(),b.unbind(),x.unbind(),K.unbind()}),e.on("detach",()=>{Ve([t,...n],sS),Ve([t,...n],he=>he.destroy())})},xr=HS,ou=BS,gP=$([oe("shell",!1),Ce("makeItem"),oe("setupItem",se),Ea.field("listBehaviours",[Kt])]),hP=jc({name:"items",overrides:()=>({behaviours:He([Kt.config({})])})}),pP=$([hP]),fP=$("CustomList"),bP=(e,t,n,o)=>{const r=(d,g)=>{i(d).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},b=>{const w=Kt.contents(b),x=g.length,k=x-w.length,A=k>0?Yt(k,()=>e.makeItem()):[],B=w.slice(x);Ve(B,re=>Kt.remove(b,re)),Ve(A,re=>Kt.append(b,re));const Z=Kt.contents(b);Ve(Z,(re,J)=>{e.setupItem(d,re,g[J],J)})})},a=e.shell?{behaviours:[Kt.config({})],components:[]}:{behaviours:[],components:t},i=d=>e.shell?v.some(d):Ao(d,e,"items");return{uid:e.uid,dom:e.dom,components:a.components,behaviours:Ks(e.listBehaviours,a.behaviours),apis:{setItems:r}}},YO=ac({name:fP(),configFields:gP(),partFields:pP(),factory:bP,apis:{setItems:(e,t,n)=>{e.setItems(t,n)}}}),mp=$([Ce("dom"),oe("shell",!0),pr("toolbarBehaviours",[Kt])]),vP=$([jc({name:"groups",overrides:()=>({behaviours:He([Kt.config({})])})})]),yP=(e,t,n,o)=>{const r=(d,g)=>{a(d).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},b=>{Kt.set(b,g)})},a=d=>e.shell?v.some(d):Ao(d,e,"groups"),i=e.shell?{behaviours:[Kt.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:i.components,behaviours:Ks(e.toolbarBehaviours,i.behaviours),apis:{setGroups:r,refresh:se},domModification:{attributes:{role:"group"}}}},ki=ac({name:"Toolbar",configFields:mp(),partFields:vP(),factory:yP,apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)}}}),wP=se,SP=Te,XO=$([]);var xP=Object.freeze({__proto__:null,setup:wP,isDocked:SP,getBehaviours:XO});const u3=e=>(Ds(bo(e,"position"),"fixed")?v.none():kr(e)).orThunk(()=>{const o=q.fromTag("span");return Fs(e).bind(r=>{Ar(r,o);const a=kr(o);return va(o),a})}),JO=e=>u3(e).map(Or).getOrThunk(()=>Gn(0,0)),CP=(e,t)=>{const n=e.element;Es(n,t.transitionClass),ys(n,t.fadeOutClass),Es(n,t.fadeInClass),t.onShow(e)},TP=(e,t)=>{const n=e.element;Es(n,t.transitionClass),ys(n,t.fadeInClass),Es(n,t.fadeOutClass),t.onHide(e)},kP=(e,t)=>e.y<t.bottom&&e.bottom>t.y,QO=(e,t)=>e.y>=t.y,eA=(e,t)=>e.bottom<=t.bottom,d3=(e,t,n)=>({location:"top",leftX:t,topY:n.bounds.y-e.y}),m3=(e,t,n)=>({location:"bottom",leftX:t,bottomY:e.bottom-n.bounds.bottom}),g3=e=>e.box.x-e.win.x,EP=(e,t,n)=>{const o=t.win,r=t.box,a=g3(t);return xn(e,i=>{switch(i){case"bottom":return eA(r,n.bounds)?v.none():v.some(m3(o,a,n));case"top":return QO(r,n.bounds)?v.none():v.some(d3(o,a,n));default:return v.none()}}).getOr({location:"no-dock"})},OP=(e,t,n)=>Pe(e,o=>{switch(o){case"bottom":return eA(t,n.bounds);case"top":return QO(t,n.bounds)}}),AP=(e,t)=>{const n=t.optScrollEnv.fold($(e.bounds.y),o=>o.scrollElmTop+(e.bounds.y-o.currentScrollTop));return Gn(e.bounds.x,n)},_P=(e,t)=>{const n=t.optScrollEnv.fold($(e.y),o=>e.y+o.currentScrollTop-o.scrollElmTop);return Gn(e.x,n)},h3=(e,t,n)=>n.getInitialPos().map(o=>{const r=AP(o,t);return{box:es(r.left,r.top,M(e),Ro(e)),location:o.location}}),tA=(e,t,n,o,r)=>{const a=_P(t,n),i=es(a.left,a.top,t.width,t.height);o.setInitialPos({style:ha(e),position:Fo(e,"position")||"static",bounds:i,location:r.location})},MP=(e,t,n,o,r)=>{o.getInitialPos().fold(()=>tA(e,t,n,o,r),()=>se)},nA=(e,t,n)=>n.getInitialPos().bind(o=>{var r;switch(n.clearInitialPos(),o.position){case"static":return v.some({morph:"static"});case"absolute":const a=u3(e).getOr(Cs()),i=Rs(a),d=(r=a.dom.scrollTop)!==null&&r!==void 0?r:0;return v.some({morph:"absolute",positionCss:Xa("absolute",Xe(o.style,"left").map(g=>t.x-i.x),Xe(o.style,"top").map(g=>t.y-i.y+d),Xe(o.style,"right").map(g=>i.right-t.right),Xe(o.style,"bottom").map(g=>i.bottom-t.bottom))});default:return v.none()}}),DP=(e,t,n)=>h3(e,t,n).filter(({box:o})=>OP(n.getModes(),o,t)).bind(({box:o})=>nA(e,o,n)),p3=e=>{switch(e.location){case"top":return v.some({morph:"fixed",positionCss:Xa("fixed",v.some(e.leftX),v.some(e.topY),v.none(),v.none())});case"bottom":return v.some({morph:"fixed",positionCss:Xa("fixed",v.some(e.leftX),v.none(),v.none(),v.some(e.bottomY))});default:return v.none()}},$P=(e,t,n)=>{const o=Rs(e),r=tr(),a=EP(n.getModes(),{win:r,box:o},t);return a.location==="top"||a.location==="bottom"?(tA(e,o,t,n,a),p3(a)):v.none()},FP=(e,t,n)=>DP(e,t,n).orThunk(()=>t.optScrollEnv.bind(o=>h3(e,t,n)).bind(({box:o,location:r})=>{const a=tr(),i=g3({win:a,box:o}),d=r==="top"?d3(a,i,t):m3(a,i,t);return p3(d)})),RP=(e,t,n)=>{const o=e.element;return Ds(bo(o,"position"),"fixed")?FP(o,t,n):$P(o,t,n)},BP=(e,t,n)=>{const o=e.element;return h3(o,t,n).bind(({box:r})=>nA(o,r,n))},IP=(e,t,n,o)=>{const r=Rs(e),a=tr(),i=g3({win:a,box:r}),d=o(a,i,t);return d.location==="bottom"||d.location==="top"?(MP(e,r,t,n,d),p3(d)):v.none()},oA=(e,t,n)=>{n.setDocked(!1),Ve(["left","right","top","bottom","position"],o=>Nn(e.element,o)),t.onUndocked(e)},f3=(e,t,n,o)=>{const r=o.position==="fixed";n.setDocked(r),mb(e.element,o),(r?t.onDocked:t.onUndocked)(e)},sA=(e,t,n,o,r=!1)=>{t.contextual.each(a=>{a.lazyContext(e).each(i=>{const d=kP(i,o.bounds);d!==n.isVisible()&&(n.setVisible(d),r&&!d?(Zl(e.element,[a.fadeOutClass]),a.onHide(e)):(d?CP:TP)(e,a))})})},rA=(e,t,n,o,r)=>{sA(e,t,n,o,!0),f3(e,t,n,r.positionCss)},HP=(e,t,n,o,r)=>{switch(r.morph){case"static":return oA(e,t,n);case"absolute":return f3(e,t,n,r.positionCss);case"fixed":return rA(e,t,n,o,r)}},PP=(e,t,n)=>{const o=t.lazyViewport(e);sA(e,t,n,o),RP(e,o,n).each(r=>{HP(e,t,n,o,r)})},LP=(e,t,n)=>{const o=e.element;n.setDocked(!1);const r=t.lazyViewport(e);BP(e,r,n).each(a=>{switch(a.morph){case"static":{oA(e,t,n);break}case"absolute":{f3(e,t,n,a.positionCss);break}}}),n.setVisible(!0),t.contextual.each(a=>{sa(o,[a.fadeInClass,a.fadeOutClass,a.transitionClass]),a.onShow(e)}),R2(e,t,n)},R2=(e,t,n)=>{e.getSystem().isConnected()&&PP(e,t,n)},cA=(e,t,n)=>{n.isDocked()&&LP(e,t,n)},aA=e=>(t,n,o)=>{const r=n.lazyViewport(t);IP(t.element,r,o,e).each(i=>{rA(t,n,o,r,i)})},NP=aA(d3),VP=aA(m3);var zP=Object.freeze({__proto__:null,refresh:R2,reset:cA,isDocked:(e,t,n)=>n.isDocked(),getModes:(e,t,n)=>n.getModes(),setModes:(e,t,n,o)=>n.setModes(o),forceDockToTop:NP,forceDockToBottom:VP}),ZP=Object.freeze({__proto__:null,events:(e,t)=>Io([Lu(Id(),(n,o)=>{e.contextual.each(r=>{Tc(n.element,r.transitionClass)&&(sa(n.element,[r.transitionClass,r.fadeInClass]),(t.isVisible()?r.onShown:r.onHidden)(n)),o.stop()})}),xe(zi(),(n,o)=>{R2(n,e,t)}),xe(Xg(),(n,o)=>{R2(n,e,t)}),xe(Vl(),(n,o)=>{cA(n,e,t)})])}),UP=[nc("contextual",[Ts("fadeInClass"),Ts("fadeOutClass"),Ts("transitionClass"),ta("lazyContext"),Vn("onShow"),Vn("onShown"),Vn("onHide"),Vn("onHidden")]),Is("lazyViewport",()=>({bounds:tr(),optScrollEnv:v.none()})),na("modes",["top","bottom"],nr),Vn("onDocked"),Vn("onUndocked")],WP=Object.freeze({__proto__:null,init:e=>{const t=m(!1),n=m(!0),o=On(),r=m(e.modes),a=()=>`docked:  ${t.get()}, visible: ${n.get()}, modes: ${r.get().join(",")}`;return Zc({isDocked:t.get,setDocked:t.set,getInitialPos:o.get,setInitialPos:o.set,clearInitialPos:o.clear,isVisible:n.get,setVisible:n.set,getModes:r.get,setModes:r.set,readState:a})}});const Ps=rr({fields:UP,name:"docking",active:ZP,apis:zP,state:WP}),b3=$(et("toolbar-height-change")),su={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},lA="tox-tinymce--toolbar-sticky-on",iA="tox-tinymce--toolbar-sticky-off",jP=(e,t)=>{const n=js(t),r=Hr(t).dom.innerHeight,a=Jr(n),i=q.fromDom(e.elm),d=Pa(i),g=Ro(i),b=d.y,w=b+g,x=Or(t),k=Ro(t),A=x.top,B=A+k,Z=Math.abs(A-a.top)<2,re=Math.abs(B-(a.top+r))<2;if(Z&&b<B)Sd(a.left,b-k,n);else if(re&&w>A){const J=b-r+g+k;Sd(a.left,J,n)}},B2=(e,t)=>Sn(Ps.getModes(e),t),v3=e=>{const t=o=>Ia(o)+(parseInt(Fo(o,"margin-top"),10)||0)+(parseInt(Fo(o,"margin-bottom"),10)||0),n=e.element;Lr(n).each(o=>{const r="padding-"+Ps.getModes(e)[0];if(Ps.isDocked(e)){const a=M(o);Je(n,"width",a+"px"),Je(o,r,t(n)+"px")}else Nn(n,"width"),Nn(o,r)})},uA=(e,t)=>{t?(ys(e,su.fadeOutClass),Zl(e,[su.transitionClass,su.fadeInClass])):(ys(e,su.fadeInClass),Zl(e,[su.fadeOutClass,su.transitionClass]))},dA=(e,t)=>{const n=q.fromDom(e.getContainer());t?(Es(n,lA),ys(n,iA)):(Es(n,iA),ys(n,lA))},GP=(e,t)=>{const n=js(t);Wl(n).filter(o=>!Qn(t,o)).filter(o=>Qn(o,q.fromDom(n.dom.body))||bs(e,o)).each(()=>aa(t))},qP=(e,t)=>bl(e).orThunk(()=>t().toOptional().bind(n=>bl(n.element))),KP=(e,t,n)=>{e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",()=>{n().each(Ps.reset)}),e.on("ResizeWindow ResizeEditor",()=>{n().each(v3)}),e.on("SkinLoaded",()=>{n().each(o=>{Ps.isDocked(o)?Ps.reset(o):Ps.refresh(o)})}),e.on("FullscreenStateChanged",()=>{n().each(Ps.reset)})),e.on("AfterScrollIntoView",o=>{n().each(r=>{Ps.refresh(r);const a=r.element;Yh(a)&&jP(o,a)})}),e.on("PostRender",()=>{dA(e,!1)})},YP=e=>e().map(Ps.isDocked).getOr(!1),XP=()=>[_c.config({channels:{[b3()]:{onReceive:v3}}})],mA=(e,t)=>{const n=On(),o=t.getSink,r=d=>{o().each(g=>d(g.element))},a=d=>{e.inline||v3(d),dA(e,Ps.isDocked(d)),d.getSystem().broadcastOn([tm()],{}),o().each(g=>g.getSystem().broadcastOn([tm()],{}))},i=e.inline?[]:XP();return[Ht.config({}),Ps.config({contextual:{lazyContext:d=>{const g=Ia(d.element),b=e.inline?e.getContentAreaContainer():e.getContainer();return v.from(b).map(w=>{const x=Rs(q.fromDom(w));return Cg(e,d.element).fold(()=>{const A=x.height-g,B=x.y+(B2(d,"top")?0:g);return es(x.x,B,x.width,A)},A=>{const B=Fi(x,lp(A)),Z=B2(d,"top")?B.y:B.y+g;return es(B.x,Z,B.width,B.height-g)})})},onShow:()=>{r(d=>uA(d,!0))},onShown:d=>{r(g=>sa(g,[su.transitionClass,su.fadeInClass])),n.get().each(g=>{GP(d.element,g),n.clear()})},onHide:d=>{qP(d.element,o).fold(n.clear,n.set),r(g=>uA(g,!1))},onHidden:()=>{r(d=>sa(d,[su.transitionClass]))},...su},lazyViewport:d=>Cg(e,d.element).fold(()=>{const b=tr(),w=jT(e),x=b.y+(B2(d,"top")?w:0),k=b.height-(B2(d,"bottom")?w:0);return{bounds:es(b.x,x,b.width,k),optScrollEnv:v.none()}},b=>({bounds:lp(b),optScrollEnv:v.some({currentScrollTop:b.element.dom.scrollTop,scrollElmTop:Or(b.element).top})})),modes:[t.header.getDockingMode()],onDocked:a,onUndocked:a}),...i]};var JP=Object.freeze({__proto__:null,setup:KP,isDocked:YP,getBehaviours:mA});const QP=e=>{const t=e.editor,n=e.sticky?mA:XO;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:He(n(t,e.sharedBackstage))}},eL=xt([Ns,fc("items",Pl([Hi([Gx,Cc("items",nr)]),nr]))].concat(_1)),tL=e=>as("GroupToolbarButton",eL,e),nL=[dr("text"),dr("tooltip"),dr("icon"),oc("search",!1,Pl([Au,xt([dr("placeholder")])],e=>pt(e)?e?v.some({placeholder:v.none()}):v.none():v.some(e))),ta("fetch"),Is("onSetup",()=>se)],gA=xt([Ns,...nL]),hA=e=>as("menubutton",gA,e),oL=xt([Ns,Qv,Sl,mm,_D,TD,yg,Sa("presets","normal",["normal","color","listpreview"]),R5(1),np,ED]),sL=e=>as("SplitButton",oL,e);var y3=la({factory:(e,t)=>{const n=(r,a)=>{const i=Ae(a,d=>{const g={type:"menubutton",text:d.text,fetch:w=>{w(d.getItems())}},b=hA(g).mapError(w=>di(w)).getOrDie();return G1(b,"tox-mbtn",t.backstage,v.some("menuitem"))});Kt.set(r,i)},o={focus:St.focusIn,setMenus:n};return{uid:e.uid,dom:e.dom,components:[],behaviours:He([Kt.config({}),nn("menubar-events",[Go(r=>{e.onSetup(r)}),xe(oa(),(r,a)=>{As(r.element,".tox-mbtn--active").each(i=>{fl(a.event.target,".tox-mbtn").each(d=>{Qn(i,d)||r.getSystem().getByDom(i).each(g=>{r.getSystem().getByDom(d).each(b=>{xl.expand(b),xl.close(g),Ht.focus(b)})})})})}),xe(Yg(),(r,a)=>{a.event.prevFocus.bind(i=>r.getSystem().getByDom(i).toOptional()).each(i=>{a.event.newFocus.bind(d=>r.getSystem().getByDom(d).toOptional()).each(d=>{xl.isOpen(i)&&(xl.expand(d),xl.close(i))})})})]),St.config({mode:"flow",selector:".tox-mbtn",onEscape:r=>(e.onEscape(r),v.some(!0))}),gs.config({})]),apis:o,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ce("dom"),Ce("uid"),Ce("onEscape"),Ce("backstage"),oe("onSetup",se)],apis:{focus:(e,t)=>{e.focus(t)},setMenus:(e,t,n)=>{e.setMenus(t,n)}}});const rL="Upgrade",cL="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",aL=e=>({uid:e.uid,dom:e.dom,components:[{dom:{tag:"a",attributes:{href:cL,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:rL}}]}),pA="container",lL=[pr("slotBehaviours",[])],fA=e=>"<alloy.field."+e+">",iL=e=>{const t=(()=>{const a=[];return{slot:(d,g)=>(a.push(d),n1(pA,fA(d),g)),record:$(a)}})(),n=e(t),o=t.record(),r=Ae(o,a=>Wr({name:a,pname:fA(a)}));return i1(pA,lL,r,uL,n)},uL=(e,t)=>{const n=Z=>vv(e),o=(Z,re)=>Ao(Z,e,re),r=(Z,re)=>(J,K)=>Ao(J,e,K).map(ce=>Z(ce,K)).getOr(re),a=Z=>(re,J)=>{Ve(J,K=>Z(re,K))},i=(Z,re)=>$o(Z.element,"aria-hidden")!=="true",d=(Z,re)=>{if(!i(Z)){const J=Z.element;Nn(J,"display"),P(J,"aria-hidden"),yt(Z,Fp(),{name:re,visible:!0})}},g=(Z,re)=>{if(i(Z)){const J=Z.element;Je(J,"display","none"),Pt(J,"aria-hidden","true"),yt(Z,Fp(),{name:re,visible:!1})}},b=r(i,!1),w=r(g),x=a(w),k=Z=>x(Z,n()),A=r(d),B={getSlotNames:n,getSlot:o,isShowing:b,hideSlot:w,hideAllSlots:k,showSlot:A};return{uid:e.uid,dom:e.dom,components:t,behaviours:$h(e.slotBehaviours),apis:B}},wc={...an({getSlotNames:(e,t)=>e.getSlotNames(t),getSlot:(e,t,n)=>e.getSlot(t,n),isShowing:(e,t,n)=>e.isShowing(t,n),hideSlot:(e,t,n)=>e.hideSlot(t,n),hideAllSlots:(e,t)=>e.hideAllSlots(t),showSlot:(e,t,n)=>e.showSlot(t,n)},e=>Vm(e)),sketch:iL},dL=xt([Sl,Qv,Is("onShow",se),Is("onHide",se),yg]),mL=e=>as("sidebar",dL,e),gL=e=>{const{sidebars:t}=e.ui.registry.getAll();Ve(cn(t),n=>{const o=t[n],r=()=>Ds(v.from(e.queryCommandValue("ToggleSidebar")),n);e.ui.registry.addToggleButton(n,{icon:o.icon,tooltip:o.tooltip,onAction:a=>{e.execCommand("ToggleSidebar",!1,n),a.setActive(r())},onSetup:a=>{a.setActive(r());const i=()=>a.setActive(r());return e.on("ToggleSidebar",i),()=>{e.off("ToggleSidebar",i)}}})})},hL=e=>({element:()=>e.element.dom}),pL=(e,t)=>{const n=Ae(cn(t),o=>{const r=t[o],a=ya(mL(r));return{name:o,getApi:hL,onSetup:a.onSetup,onShow:a.onShow,onHide:a.onHide}});return Ae(n,o=>{const r=m(se);return e.slot(o.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:M1.unnamedEvents([gm(o,r),hm(o,r),xe(Fp(),(a,i)=>{const d=i.event;Q(n,b=>b.name===d.name).each(b=>{(d.visible?b.onShow:b.onHide)(b.getApi(a))})})])})})},fL=e=>wc.sketch(t=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:pL(t,e),slotBehaviours:M1.unnamedEvents([Go(n=>wc.hideAllSlots(n))])})),bL=(e,t,n)=>{Dn.getCurrent(e).each(r=>{Kt.set(r,[fL(t)]);const a=n==null?void 0:n.toLowerCase();ye(a)&&Cn(t,a)&&Dn.getCurrent(r).each(i=>{wc.showSlot(i,a),Fa.immediateGrow(r),Nn(r.element,"width"),I2(e.element,"region")})})},I2=(e,t)=>{Pt(e,"role",t)},vL=(e,t)=>{Dn.getCurrent(e).each(o=>{Dn.getCurrent(o).each(a=>{Fa.hasGrown(o)?wc.isShowing(a,t)?(Fa.shrink(o),I2(e.element,"presentation")):(wc.hideAllSlots(a),wc.showSlot(a,t),I2(e.element,"region")):(wc.hideAllSlots(a),wc.showSlot(a,t),Fa.grow(o),I2(e.element,"region"))})})},yL=e=>Dn.getCurrent(e).bind(n=>Fa.isGrowing(n)||Fa.hasGrown(n)?Dn.getCurrent(n).bind(a=>Q(wc.getSlotNames(a),i=>wc.isShowing(a,i))):v.none()),w3=et("FixSizeEvent"),S3=et("AutoSizeEvent"),wL=e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:He([gs.config({}),Ht.config({}),Fa.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:t=>{Dn.getCurrent(t).each(wc.hideAllSlots),to(t,S3)},onGrown:t=>{to(t,S3)},onStartGrow:t=>{yt(t,w3,{width:bo(t.element,"width").getOr("")})},onStartShrink:t=>{yt(t,w3,{width:M(t.element)+"px"})}}),Kt.config({}),Dn.config({find:t=>{const n=Kt.contents(t);return Bt(n)}})])}],behaviours:He([oi.childAt(0),nn("sidebar-sliding-events",[xe(w3,(t,n)=>{Je(t.element,"width",n.event.width)}),xe(S3,(t,n)=>{Nn(t.element,"width")})])])});var SL=Object.freeze({__proto__:null,block:(e,t,n,o)=>{Pt(e.element,"aria-busy",!0);const r=t.getRoot(e).getOr(e),a=He([St.config({mode:"special",onTab:()=>v.some(!0),onShiftTab:()=>v.some(!0)}),Ht.config({})]),i=o(r,a),d=r.getSystem().build(i);Kt.append(r,ra(d)),d.hasConfigured(St)&&t.focus&&St.focusIn(d),n.isBlocked()||t.onBlock(e),n.blockWith(()=>Kt.remove(r,d))},unblock:(e,t,n)=>{P(e.element,"aria-busy"),n.isBlocked()&&t.onUnblock(e),n.clear()},isBlocked:(e,t,n)=>n.isBlocked()}),xL=[Is("getRoot",v.none),mr("focus",!0),Vn("onBlock"),Vn("onUnblock")],CL=Object.freeze({__proto__:null,init:()=>{const e=hw(),t=n=>{e.set({destroy:n})};return Zc({readState:e.isSet,blockWith:t,clear:e.clear,isBlocked:e.isSet})}});const Ei=rr({fields:xL,name:"blocking",apis:SL,state:CL}),TL=e=>(t,n)=>({dom:{tag:"div",attributes:{"aria-label":e.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:nd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),bA=e=>Dn.getCurrent(e).each(t=>aa(t.element,!0)),kL=(e,t)=>{const n="tabindex",o=`data-mce-${n}`;v.from(e.iframeElement).map(q.fromDom).each(r=>{t?(C(r,n).each(a=>Pt(r,o,a)),Pt(r,n,-1)):(P(r,n),C(r,o).each(a=>{Pt(r,n,a),P(r,o)}))})},EL=(e,t,n,o)=>{const r=t.element;if(kL(e,n),n)Ei.block(t,TL(o)),Nn(r,"display"),P(r,"aria-hidden"),e.hasFocus()&&bA(t);else{const a=Dn.getCurrent(t).exists(i=>Km(i.element));Ei.unblock(t),Je(r,"display","none"),Pt(r,"aria-hidden","true"),a&&e.focus()}},OL=e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:He([Kt.config({}),Ei.config({focus:!1}),Dn.config({find:t=>Bt(t.components())})]),components:[]}),AL=e=>e.type==="focusin",_L=e=>AL(e)?(e.composed?Bt(e.composedPath()):v.from(e.target)).map(q.fromDom).filter(qt).exists(n=>Tc(n,"mce-pastebin")):!1,ML=(e,t,n)=>{const o=m(!1),r=On(),a=d=>{o.get()&&!_L(d)&&(d.preventDefault(),bA(t()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",()=>{e.dom.bind(e.getWin(),"focusin",a),e.on("BeforeExecCommand",d=>{d.command.toLowerCase()==="mcefocus"&&d.value!==!0&&a(d)})});const i=d=>{d!==o.get()&&(o.set(d),EL(e,t(),d,n.providers),V$(e,d))};e.on("ProgressState",d=>{if(r.on(clearTimeout),jt(d.time)){const g=Pv.setEditorTimeout(e,()=>i(d.state),d.time);r.set(g)}else i(d.state),r.clear()})},DL=(e,t)=>En(e,(r,a)=>t(a,r.len).fold($(r),d=>({len:d.finish,list:r.list.concat([d])})),{len:0,list:[]}).list,x3=(e,t,n)=>({within:e,extra:t,withinWidth:n}),vA=(e,t,n)=>{const o=DL(e,(d,g)=>{const b=n(d);return v.some({element:d,start:g,finish:g+b,width:b})}),r=Xt(o,d=>d.finish<=t),a=gn(r,(d,g)=>d+g.width,0),i=o.slice(r.length);return{within:r,extra:i,withinWidth:a}},H2=e=>Ae(e,t=>t.element),$L=(e,t,n)=>{const o=H2(e.concat(t));return x3(o,[],n)},FL=(e,t,n,o)=>{const r=H2(e).concat([n]);return x3(r,H2(t),o)},RL=(e,t,n)=>x3(H2(e),[],n),BL=(e,t,n)=>{const o=vA(t,e,n);return o.extra.length===0?v.some(o):v.none()},IL=(e,t,n,o)=>{const r=BL(e,t,n).getOrThunk(()=>vA(t,e-n(o),n)),a=r.within,i=r.extra,d=r.withinWidth;return i.length===1&&i[0].width<=n(o)?$L(a,i,d):i.length>=1?FL(a,i,o,d):RL(a,i,d)},yA=(e,t)=>{const n=Ae(t,o=>ra(o));ki.setGroups(e,n)},HL=e=>xn(e,t=>bl(t.element).bind(n=>t.getSystem().getByDom(n).toOptional())),wA=(e,t,n)=>{const o=t.builtGroups.get();if(o.length===0)return;const r=Xi(e,t,"primary"),a=Ms.getCoupled(e,"overflowGroup");Je(r.element,"visibility","hidden");const i=o.concat([a]),d=HL(i);n([]),yA(r,i);const g=M(r.element),b=IL(g,t.builtGroups.get(),w=>M(w.element),a);b.extra.length===0?(Kt.remove(r,a),n([])):(yA(r,b.within),n(b.extra)),Nn(r.element,"visibility"),Qs(r.element),d.each(Ht.focus)},SA=$([pr("splitToolbarBehaviours",[Ms]),Mr("builtGroups",()=>m([]))]),PL=$([Uu(["overflowToggledClass"]),gi("getOverflowBounds"),Ce("lazySink"),Mr("overflowGroups",()=>m([])),Vn("onOpened"),Vn("onClosed")].concat(SA())),LL=$([Wr({factory:ki,schema:mp(),name:"primary"}),Qa({schema:mp(),name:"overflow"}),Qa({name:"overflow-button"}),Qa({name:"overflow-group"})]),C3=$((e,t)=>{ae(e,Math.floor(t))}),NL=$([Uu(["toggledClass"]),Ce("lazySink"),ta("fetch"),gi("getBounds"),nc("fireDismissalEventInstead",[oe("event",Zi())]),Ki(),Vn("onToggled")]),VL=$([Qa({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:He([fn.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:e.onToggled})])})}),Qa({factory:ki,schema:mp(),name:"toolbar",overrides:e=>({toolbarBehaviours:He([St.config({mode:"cyclic",onEscape:t=>(Ao(t,e,"button").each(Ht.focus),v.none())})])})})]),P2=On(),zL=(e,t)=>{P2.set(!0),T3(e,t),P2.clear()},T3=(e,t)=>{const n=Ms.getCoupled(e,"toolbarSandbox");Hn.isOpen(n)?Hn.close(n):Hn.open(n,t.toolbar())},k3=(e,t,n,o)=>{const r=n.getBounds.map(i=>i()),a=n.lazySink(e).getOrDie();cc.positionWithinBounds(a,t,{anchor:{type:"hotspot",hotspot:e,layouts:o,overrides:{maxWidthFunction:C3()}}},r)},xA=(e,t,n,o,r)=>{ki.setGroups(t,r),k3(e,t,n,o),fn.on(e)},ZL=(e,t,n)=>{const o=G0(),r=(i,d)=>{const g=P2.get().getOr(!1);n.fetch().get(b=>{xA(e,d,n,t.layouts,b),o.link(e.element),g||St.focusIn(d)})},a=()=>{fn.off(e),P2.get().getOr(!1)||Ht.focus(e),o.unlink(e.element)};return{dom:{tag:"div",attributes:{id:o.id}},behaviours:He([St.config({mode:"special",onEscape:i=>(Hn.close(i),v.some(!0))}),Hn.config({onOpen:r,onClose:a,isPartOf:(i,d,g)=>Wi(d,g)||Wi(e,g),getAttachPoint:()=>n.lazySink(e).getOrDie()}),_c.config({channels:{...cg({isExtraPart:Te,...n.fireDismissalEventInstead.map(i=>({fireEventInstead:{event:i.event}})).getOr({})}),...nm({doReposition:()=>{Hn.getState(Ms.getCoupled(e,"toolbarSandbox")).each(i=>{k3(e,i,n,t.layouts)})}})}})])}},xm=ac({name:"FloatingToolbarButton",factory:(e,t,n,o)=>({...Gr.sketch({...o.button(),action:r=>{T3(r,o)},buttonBehaviours:Ea.augment({dump:o.button().buttonBehaviours},[Ms.config({others:{toolbarSandbox:r=>ZL(r,n,e)}})])}),apis:{setGroups:(r,a)=>{Hn.getState(Ms.getCoupled(r,"toolbarSandbox")).each(i=>{xA(r,i,e,n.layouts,a)})},reposition:r=>{Hn.getState(Ms.getCoupled(r,"toolbarSandbox")).each(a=>{k3(r,a,e,n.layouts)})},toggle:r=>{T3(r,o)},toggleWithoutFocusing:r=>{zL(r,o)},getToolbar:r=>Hn.getState(Ms.getCoupled(r,"toolbarSandbox")),isOpen:r=>Hn.isOpen(Ms.getCoupled(r,"toolbarSandbox"))}}),configFields:NL(),partFields:VL(),apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggleWithoutFocusing(t)},getToolbar:(e,t)=>e.getToolbar(t),isOpen:(e,t)=>e.isOpen(t)}}),UL=$([Ce("items"),Uu(["itemSelector"]),pr("tgroupBehaviours",[St])]),WL=$([zh({name:"items",unit:"item"})]),jL=(e,t,n,o)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Ks(e.tgroupBehaviours,[St.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),L2=ac({name:"ToolbarGroup",configFields:UL(),partFields:WL(),factory:jL}),CA=e=>Ae(e,t=>ra(t)),TA=(e,t,n)=>{wA(e,n,o=>{n.overflowGroups.set(o),t.getOpt(e).each(r=>{xm.setGroups(r,CA(o))})})},GL=(e,t,n,o)=>{const r=go(xm.sketch({fetch:()=>uc.nu(a=>{a(CA(e.overflowGroups.get()))}),layouts:{onLtr:()=>[Br,sr],onRtl:()=>[sr,Br],onBottomLtr:()=>[Ac,Oc],onBottomRtl:()=>[Oc,Ac]},getBounds:n.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()},onToggled:(a,i)=>e[i?"onOpened":"onClosed"](a)}));return{uid:e.uid,dom:e.dom,components:t,behaviours:Ks(e.splitToolbarBehaviours,[Ms.config({others:{overflowGroup:()=>L2.sketch({...o["overflow-group"](),items:[r.asSpec()]})}})]),apis:{setGroups:(a,i)=>{e.builtGroups.set(Ae(i,a.getSystem().build)),TA(a,r,e)},refresh:a=>TA(a,r,e),toggle:a=>{r.getOpt(a).each(i=>{xm.toggle(i)})},toggleWithoutFocusing:a=>{r.getOpt(a).each(xm.toggleWithoutFocusing)},isOpen:a=>r.getOpt(a).map(xm.isOpen).getOr(!1),reposition:a=>{r.getOpt(a).each(i=>{xm.reposition(i)})},getOverflow:a=>r.getOpt(a).bind(xm.getToolbar)},domModification:{attributes:{role:"group"}}}},kA=ac({name:"SplitFloatingToolbar",configFields:PL(),partFields:LL(),factory:GL,apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},refresh:(e,t)=>{e.refresh(t)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t),getOverflow:(e,t)=>e.getOverflow(t)}}),qL=$([Uu(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Vn("onOpened"),Vn("onClosed")].concat(SA())),KL=$([Wr({factory:ki,schema:mp(),name:"primary"}),Wr({factory:ki,schema:mp(),name:"overflow",overrides:e=>({toolbarBehaviours:He([Fa.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:t=>{Ao(t,e,"overflow-button").each(n=>{fn.off(n),Ht.focus(n)}),e.onClosed(t)},onGrown:t=>{St.focusIn(t),e.onOpened(t)},onStartGrow:t=>{Ao(t,e,"overflow-button").each(fn.on)}}),St.config({mode:"acyclic",onEscape:t=>(Ao(t,e,"overflow-button").each(Ht.focus),v.some(!0))})])})}),Qa({name:"overflow-button",overrides:e=>({buttonBehaviours:He([fn.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Qa({name:"overflow-group"})]),YL=(e,t)=>Ao(e,t,"overflow").map(Fa.hasGrown).getOr(!1),EA=(e,t)=>{Ao(e,t,"overflow-button").bind(()=>Ao(e,t,"overflow")).each(n=>{E3(e,t),Fa.toggleGrow(n)})},E3=(e,t)=>{Ao(e,t,"overflow").each(n=>{wA(e,t,o=>{const r=Ae(o,a=>ra(a));ki.setGroups(n,r)}),Ao(e,t,"overflow-button").each(o=>{Fa.hasGrown(n)&&fn.on(o)}),Fa.refresh(n)})},XL=(e,t,n,o)=>{const r="alloy.toolbar.toggle",a=(i,d)=>{const g=Ae(d,i.getSystem().build);e.builtGroups.set(g)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ks(e.splitToolbarBehaviours,[Ms.config({others:{overflowGroup:i=>L2.sketch({...o["overflow-group"](),items:[Gr.sketch({...o["overflow-button"](),action:d=>{to(i,r)}})]})}}),nn("toolbar-toggle-events",[xe(r,i=>{EA(i,e)})])]),apis:{setGroups:(i,d)=>{a(i,d),E3(i,e)},refresh:i=>E3(i,e),toggle:i=>EA(i,e),isOpen:i=>YL(i,e)},domModification:{attributes:{role:"group"}}}},O3=ac({name:"SplitSlidingToolbar",configFields:qL(),partFields:KL(),factory:XL,apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},refresh:(e,t)=>{e.refresh(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t)}}),OA=e=>{const t=e.title.fold(()=>({}),n=>({attributes:{title:n}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...t},components:[L2.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:He([gs.config({}),Ht.config({})])}},N2=e=>L2.sketch(OA(e)),AA=(e,t)=>{const n=Go(o=>{const r=Ae(e.initGroups,N2);ki.setGroups(o,r)});return He([Ql.toolbarButton(e.providers.isDisabled),fr(),St.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),nn("toolbar-events",[n])])},_A=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":OA({title:v.none(),items:[]}),"overflow-button":NI({icon:v.some("more-drawer"),enabled:!0,tooltip:v.some("Reveal or hide additional toolbar items")},v.none(),e.providers)},splitToolbarBehaviours:AA(e,t)}},JL=e=>{const t=_A(e),n=4,o=kA.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return kA.sketch({...t,lazySink:e.getSink,getOverflowBounds:()=>{const r=e.moreDrawerData.lazyHeader().element,a=Pa(r),i=yr(r),d=Pa(i),g=Math.max(i.dom.scrollHeight,d.height);return es(a.x+n,d.y,a.width-n*2,g)},parts:{...t.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}},components:[o],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:r=>e.onToggled(r,!0),onClosed:r=>e.onToggled(r,!1)})},QL=e=>{const t=O3.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=O3.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=_A(e);return O3.sketch({...o,components:[t,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:r=>{r.getSystem().broadcastOn([b3()],{type:"opened"}),e.onToggled(r,!0)},onClosed:r=>{r.getSystem().broadcastOn([b3()],{type:"closed"}),e.onToggled(r,!1)}})},V2=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return ki.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===wl.scrolling?["tox-toolbar--scrolling"]:[])},components:[ki.parts.groups({})],toolbarBehaviours:AA(e,t)})},MA=[mm,Sl,dr("tooltip"),Sa("buttonType","secondary",["primary","secondary"]),mr("borderless",!1),ta("onAction")],eN=[...MA,sd,Za("type",["button"])],tN=[...MA,mr("active",!1),Za("type",["togglebutton"])],DA={button:eN,togglebutton:tN},nN=[Za("type",["group"]),na("buttons",[],or("type",DA))],oN=or("type",{...DA,group:nN}),sN=xt([na("buttons",[],oN),ta("onShow"),ta("onHide")]),rN=e=>as("view",sN,e),cN=(e,t)=>{var n,o;const r=e.type==="togglebutton",a=e.icon.map(ce=>wm(ce,t.icons)).map(go),d=ce=>{const ke=Be=>{a.map(Le=>Le.getOpt(ce).each(Qt=>{Kt.set(Qt,[wm(Be,t.icons)])}))},be=Be=>{const Le=ce.element;Be?(Es(Le,"tox-button--enabled"),Pt(Le,"aria-pressed",!0)):(ys(Le,"tox-button--enabled"),P(Le,"aria-pressed"))},he=()=>Tc(ce.element,"tox-button--enabled");if(r)return e.onAction({setIcon:ke,setActive:be,isActive:he});if(e.type==="button")return e.onAction({setIcon:ke})},g={...e,name:r?e.text.getOr(e.icon.getOr("")):(n=e.text)!==null&&n!==void 0?n:e.icon.getOr(""),primary:e.buttonType==="primary",buttonType:v.from(e.buttonType),tooltip:e.tooltip,icon:e.icon,enabled:!0,borderless:e.borderless},b=t3((o=e.buttonType)!==null&&o!==void 0?o:"secondary"),w=r?e.text.map(t.translate):v.some(t.translate(e.text)),x=w.map(Os),k=g.tooltip.or(w).map(ce=>({"aria-label":t.translate(ce),title:t.translate(ce)})).getOr({}),A=a.map(ce=>ce.asSpec()),B=sp([A,x]),Z=e.icon.isSome()&&x.isSome(),re={tag:"button",classes:b.concat(...e.icon.isSome()&&!Z?["tox-button--icon"]:[]).concat(...Z?["tox-button--icon-and-text"]:[]).concat(...e.borderless?["tox-button--naked"]:[]).concat(...e.type==="togglebutton"&&e.active?["tox-button--enabled"]:[]),attributes:k},J=[],K=_2(g,v.some(d),J,re,B,t);return Gr.sketch(K)},$A=(e,t)=>cN(e,t),aN=(e,t)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ae(e.buttons,n=>$A(n,t))}),FA=ba().deviceType,lN=FA.isPhone(),iN=FA.isTablet(),uN=e=>{let t=!1;const n=Ae(e.buttons,o=>o.type==="group"?(t=!0,aN(o,e.providers)):$A(o,e.providers));return{uid:e.uid,dom:{tag:"div",classes:[t?"tox-view__toolbar":"tox-view__header",...lN||iN?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:He([Ht.config({}),St.config({mode:"flow",selector:"button, .tox-button",focusInside:l.OnEnterOrSpaceMode})]),components:t?n:[Ti.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Ti.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:n})]}},dN=e=>({uid:e.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),mN=(e,t,n,o)=>{const r={getPane:a=>xr.getPart(a,e,"pane"),getOnShow:a=>e.viewConfig.onShow,getOnHide:a=>e.viewConfig.onHide};return{uid:e.uid,dom:e.dom,components:t,apis:r}};var gp=ac({name:"silver.View",configFields:[Ce("viewConfig")],partFields:[jc({factory:{sketch:uN},schema:[Ce("buttons"),Ce("providers")],name:"header"}),jc({factory:{sketch:dN},schema:[],name:"pane"})],factory:mN,apis:{getPane:(e,t)=>e.getPane(t),getOnShow:(e,t)=>e.getOnShow(t),getOnHide:(e,t)=>e.getOnHide(t)}});const gN=(e,t,n)=>hs(t,(o,r)=>{const a=ya(rN(o));return e.slot(r,gp.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:a,components:[...a.buttons.length>0?[gp.parts.header({buttons:a.buttons,providers:n})]:[],gp.parts.pane({})]}))}),hN=(e,t)=>wc.sketch(n=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:gN(n,e,t),slotBehaviours:M1.unnamedEvents([Go(o=>wc.hideAllSlots(o))])})),RA=e=>Q(wc.getSlotNames(e),t=>wc.isShowing(e,t)),pN=e=>{const t=e.element;Je(t,"display","none"),Pt(t,"aria-hidden","true")},fN=e=>{const t=e.element;Nn(t,"display"),P(t,"aria-hidden")},bN=e=>({getContainer:$(e)}),BA=(e,t,n)=>{wc.getSlot(e,t).each(o=>{gp.getPane(o).each(r=>{n(o)(bN(r.element.dom))})})},vN=(e,t)=>BA(e,t,gp.getOnShow),yN=(e,t)=>BA(e,t,gp.getOnHide);var z2=la({factory:(e,t)=>{const a={setViews:(i,d)=>{Kt.set(i,[hN(d,t.backstage.shared.providers)])},whichView:i=>Dn.getCurrent(i).bind(RA),toggleView:(i,d,g,b)=>Dn.getCurrent(i).exists(w=>{const x=RA(w),k=x.exists(B=>b===B),A=wc.getSlot(w,b).isSome();return A&&(wc.hideAllSlots(w),k?(pN(i),d()):(g(),fN(i),wc.showSlot(w,b),vN(w,b)),x.each(B=>yN(w,B))),A})};return{uid:e.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:He([Kt.config({}),Dn.config({find:i=>{const d=Kt.contents(i);return Bt(d)}})]),apis:a}},name:"silver.ViewWrapper",configFields:[Ce("backstage")],apis:{setViews:(e,t,n)=>e.setViews(t,n),toggleView:(e,t,n,o,r)=>e.toggleView(t,n,o,r),whichView:(e,t)=>e.whichView(t)}});const wN=(e,t,n)=>{let o=!1;const r={getSocket:a=>xr.getPart(a,e,"socket"),setSidebar:(a,i,d)=>{xr.getPart(a,e,"sidebar").each(g=>bL(g,i,d))},toggleSidebar:(a,i)=>{xr.getPart(a,e,"sidebar").each(d=>vL(d,i))},whichSidebar:a=>xr.getPart(a,e,"sidebar").bind(yL).getOrNull(),getHeader:a=>xr.getPart(a,e,"header"),getToolbar:a=>xr.getPart(a,e,"toolbar"),setToolbar:(a,i)=>{xr.getPart(a,e,"toolbar").each(d=>{const g=Ae(i,N2);d.getApis().setGroups(d,g)})},setToolbars:(a,i)=>{xr.getPart(a,e,"multiple-toolbar").each(d=>{const g=Ae(i,b=>Ae(b,N2));YO.setItems(d,g)})},refreshToolbar:a=>{xr.getPart(a,e,"toolbar").each(d=>d.getApis().refresh(d))},toggleToolbarDrawer:a=>{xr.getPart(a,e,"toolbar").each(i=>{dc(i.getApis().toggle,d=>d(i))})},toggleToolbarDrawerWithoutFocusing:a=>{xr.getPart(a,e,"toolbar").each(i=>{dc(i.getApis().toggleWithoutFocusing,d=>d(i))})},isToolbarDrawerToggled:a=>xr.getPart(a,e,"toolbar").bind(i=>v.from(i.getApis().isOpen).map(d=>d(i))).getOr(!1),getThrobber:a=>xr.getPart(a,e,"throbber"),focusToolbar:a=>{xr.getPart(a,e,"toolbar").orThunk(()=>xr.getPart(a,e,"multiple-toolbar")).each(d=>{St.focusIn(d)})},setMenubar:(a,i)=>{xr.getPart(a,e,"menubar").each(d=>{y3.setMenus(d,i)})},focusMenubar:a=>{xr.getPart(a,e,"menubar").each(i=>{y3.focus(i)})},setViews:(a,i)=>{xr.getPart(a,e,"viewWrapper").each(d=>{z2.setViews(d,i)})},toggleView:(a,i)=>xr.getPart(a,e,"viewWrapper").exists(d=>z2.toggleView(d,()=>r.showMainView(a),()=>r.hideMainView(a),i)),whichView:a=>xr.getPart(a,e,"viewWrapper").bind(z2.whichView).getOrNull(),hideMainView:a=>{o=r.isToolbarDrawerToggled(a),o&&r.toggleToolbarDrawer(a),xr.getPart(a,e,"editorContainer").each(i=>{const d=i.element;Je(d,"display","none"),Pt(d,"aria-hidden","true")})},showMainView:a=>{o&&r.toggleToolbarDrawer(a),xr.getPart(a,e,"editorContainer").each(i=>{const d=i.element;Nn(d,"display"),P(d,"aria-hidden")})}};return{uid:e.uid,dom:e.dom,components:t,apis:r,behaviours:e.behaviours}},SN=ou.optional({factory:y3,name:"menubar",schema:[Ce("backstage")]}),xN=e=>e.type===wl.sliding?QL:e.type===wl.floating?JL:V2,CN=ou.optional({factory:{sketch:e=>YO.sketch({uid:e.uid,dom:e.dom,listBehaviours:He([St.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>V2({type:e.type,uid:et("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),v.some(!0))}),setupItem:(t,n,o,r)=>{ki.setGroups(n,o)},shell:!0})},name:"multiple-toolbar",schema:[Ce("dom"),Ce("onEscape")]}),TN=ou.optional({factory:{sketch:e=>{const t=xN(e),n={type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),v.some(!0)),onToggled:(o,r)=>e.onToolbarToggled(r),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes};return t(n)}},name:"toolbar",schema:[Ce("dom"),Ce("onEscape"),Ce("getSink")]}),kN=ou.optional({factory:{sketch:QP},name:"header",schema:[Ce("dom")]}),EN=ou.optional({factory:{sketch:aL},name:"promotion",schema:[Ce("dom")]}),ON=ou.optional({name:"socket",schema:[Ce("dom")]}),AN=ou.optional({factory:{sketch:wL},name:"sidebar",schema:[Ce("dom")]}),_N=ou.optional({factory:{sketch:OL},name:"throbber",schema:[Ce("dom")]}),MN=ou.optional({factory:z2,name:"viewWrapper",schema:[Ce("backstage")]}),DN=e=>({uid:e.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:e.components}),$N=ou.optional({factory:{sketch:DN},name:"editorContainer",schema:[]});var Uo=ac({name:"OuterContainer",factory:wN,configFields:[Ce("dom"),Ce("behaviours")],partFields:[kN,SN,TN,CN,ON,AN,EN,_N,MN,$N],apis:{getSocket:(e,t)=>e.getSocket(t),setSidebar:(e,t,n,o)=>{e.setSidebar(t,n,o)},toggleSidebar:(e,t,n)=>{e.toggleSidebar(t,n)},whichSidebar:(e,t)=>e.whichSidebar(t),getHeader:(e,t)=>e.getHeader(t),getToolbar:(e,t)=>e.getToolbar(t),setToolbar:(e,t,n)=>{e.setToolbar(t,n)},setToolbars:(e,t,n)=>{e.setToolbars(t,n)},refreshToolbar:(e,t)=>e.refreshToolbar(t),toggleToolbarDrawer:(e,t)=>{e.toggleToolbarDrawer(t)},toggleToolbarDrawerWithoutFocusing:(e,t)=>{e.toggleToolbarDrawerWithoutFocusing(t)},isToolbarDrawerToggled:(e,t)=>e.isToolbarDrawerToggled(t),getThrobber:(e,t)=>e.getThrobber(t),setMenubar:(e,t,n)=>{e.setMenubar(t,n)},focusMenubar:(e,t)=>{e.focusMenubar(t)},focusToolbar:(e,t)=>{e.focusToolbar(t)},setViews:(e,t,n)=>{e.setViews(t,n)},toggleView:(e,t,n)=>e.toggleView(t,n),whichView:(e,t)=>e.whichView(t)}});const FN="file edit view insert format tools table help",IA={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},RN=(e,t,n)=>{const o=ZT(n).split(/[ ,]/);return{text:e.title,getItems:()=>Me(e.items,r=>{const a=r.toLowerCase();return a.trim().length===0?[]:Kn(o,i=>i===a)?[]:a==="separator"||a==="|"?[{type:"separator"}]:t.menuItems[a]?[t.menuItems[a]]:[]})}},A3=e=>e.split(" "),HA=(e,t)=>{const n={...IA,...t.menus},o=cn(t.menus).length>0,r=t.menubar===void 0||t.menubar===!0?A3(FN):A3(t.menubar===!1?"":t.menubar),a=Xt(r,d=>{const g=Cn(IA,d);return o?g||Xe(t.menus,d).exists(b=>Cn(b,"items")):g}),i=Ae(a,d=>{const g=n[d];return RN({title:g.title,items:A3(g.items)},t,e)});return Xt(i,d=>{const g=b=>ye(b)||b.type!=="separator";return d.getItems().length>0&&Kn(d.getItems(),g)})},BN=e=>{const t=()=>{e._skinLoaded=!0,H$(e)};return()=>{e.initialized?t():e.on("init",t)}},IN=(e,t)=>()=>P$(e,{message:t}),PA=(e,t,n)=>(e.on("remove",()=>n.unload(t)),n.load(t)),_3=(e,t,n,o)=>(e.on("remove",()=>o.unloadRawCss(t)),o.loadRawCss(t,n)),HN=async(e,t)=>{const o="ui/"+jv(e).getOr("default")+"/skin.css",r=tinymce.Resource.get(o);if(ye(r))return Promise.resolve(_3(e,o,r,e.ui.styleSheetLoader));{const a=t+"/skin.min.css";return PA(e,a,e.ui.styleSheetLoader)}},PN=async(e,t)=>{if(vt(q.fromDom(e.getElement()))){const r="ui/"+jv(e).getOr("default")+"/skin.shadowdom.css",a=tinymce.Resource.get(r);if(ye(a))return _3(e,r,a,Jh.DOM.styleSheetLoader),Promise.resolve();{const i=t+"/skin.shadowdom.min.css";return PA(e,i,Jh.DOM.styleSheetLoader)}}},LN=async(e,t)=>{jv(t).fold(()=>{const o=Wv(t);o&&t.contentCSS.push(o+(e?"/content.inline":"/content")+".min.css")},o=>{const r="ui/"+o+(e?"/content.inline":"/content")+".css",a=tinymce.Resource.get(r);if(ye(a))_3(t,r,a,t.ui.styleSheetLoader);else{const i=Wv(t);i&&t.contentCSS.push(i+(e?"/content.inline":"/content")+".min.css")}});const n=Wv(t);if(!Rx(t)&&ye(n))return Promise.all([HN(t,n),PN(t,n)]).then()},LA=(e,t)=>LN(e,t).then(BN(t),IN(t,"Skin could not be loaded")),NN=on(LA,!1),VN=on(LA,!0),hp=(e,t,n)=>e.translate([t,e.translate(n)]),zN=(e,t)=>{const n=(i,d,g,b)=>{const w=e.shared.providers.translate(i.title);if(i.type==="separator")return v.some({type:"separator",text:w});if(i.type==="submenu"){const x=Me(i.getStyleItems(),k=>o(k,d,b));return d===0&&x.length<=0?v.none():v.some({type:"nestedmenuitem",text:w,enabled:x.length>0,getSubmenuItems:()=>Me(i.getStyleItems(),k=>o(k,d,b))})}else return v.some({type:"togglemenuitem",text:w,icon:i.icon,active:i.isSelected(b),enabled:!g,onAction:t.onAction(i),...i.getStylePreview().fold(()=>({}),x=>({meta:{style:x}}))})},o=(i,d,g)=>{const b=i.type==="formatter"&&t.isInvalid(i);return d===0?b?[]:n(i,d,!1,g).toArray():n(i,d,b,g).toArray()},r=i=>{const d=t.getCurrentValue(),g=t.shouldHide?0:1;return Me(i,b=>o(b,g,d))};return{validateItems:r,getFetch:(i,d)=>(g,b)=>{const w=d(),x=r(w),k=dp(x,Ci.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:v.none()});b(k)}}},pp=(e,t,n)=>{const o=n.dataset,r=o.type==="basic"?()=>Ae(o.data,a=>HO(a,n.isSelectedFor,n.getPreviewFor)):o.getData;return{items:zN(t,n),getStyleItems:r}},J1=(e,t,n,o,r)=>{const{items:a,getStyleItems:i}=pp(e,t,n),d=b=>({getComponent:$(b),setTooltip:w=>{const x=t.shared.providers.translate(w);ga(b.element,{"aria-label":x,title:x})}}),g=b=>{const w=x=>b.setTooltip(hp(e,o,x.value));return e.on(r,w),r2(Sg(e,"NodeChange",x=>{const k=x.getComponent();n.updateText(k),Dt.set(x.getComponent(),!e.selection.isEditable())})(b),()=>e.off(r,w))};return U4({text:n.icon.isSome()?v.none():n.text,icon:n.icon,tooltip:v.from(n.tooltip),role:v.none(),fetch:a.getFetch(t,i),onSetup:g,getApi:d,columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)},ZN=e=>Ae(e,t=>{let n=t,o=t;const r=t.split("=");return r.length>1&&(n=r[0],o=r[1]),{title:n,format:o}}),UN=e=>({type:"basic",data:e});var fp;(function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"})(fp||(fp={}));const WN=(e,t)=>t===fp.SemiColon?e.replace(/;$/,"").split(";"):e.split(" "),M3=(e,t,n)=>{const o=e.options.get(t);return{type:"basic",data:ZN(WN(o,n))}},jN="Align",NA="Alignment {0}",VA="left",D3=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],zA=e=>{const t=()=>Q(D3,d=>e.formatter.match(d.format)),n=d=>()=>e.formatter.match(d),o=d=>v.none,r=d=>{const b=t().fold($(VA),w=>w.title.toLowerCase());yt(d,Mg,{icon:`align-${b}`}),W$(e,{value:b})},a=UN(D3),i=d=>()=>Q(D3,g=>g.format===d.format).each(g=>e.execCommand(g.command));return{tooltip:hp(e,NA,VA),text:v.none(),icon:v.some("align-left"),isSelectedFor:n,getCurrentValue:v.none,getPreviewFor:o,onAction:i,updateText:r,dataset:a,shouldHide:!1,isInvalid:d=>!e.formatter.canApply(d.format)}},GN=(e,t)=>J1(e,t,zA(e),NA,"AlignTextUpdate"),qN=(e,t)=>{const n=pp(e,t,zA(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate(jN),onSetup:Dc(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},ZA=(e,t)=>{const n=t(),o=Ae(n,r=>r.format);return v.from(e.formatter.closest(o)).bind(r=>Q(n,a=>a.format===r)).orThunk(()=>$s(e.formatter.match("p"),{title:"Paragraph",format:"p"}))},KN="Blocks",UA="Block {0}",$3="Paragraph",WA=e=>{const t=a=>()=>e.formatter.match(a),n=a=>()=>{const i=e.formatter.get(a);return i?v.some({tag:i.length>0&&(i[0].inline||i[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(a))}):v.none()},o=a=>{const d=ZA(e,()=>r.data).fold($($3),g=>g.title);yt(a,Cl,{text:d}),q$(e,{value:d})},r=M3(e,"block_formats",fp.SemiColon);return{tooltip:hp(e,UA,$3),text:v.some($3),icon:v.none(),isSelectedFor:t,getCurrentValue:v.none,getPreviewFor:n,onAction:hk(e),updateText:o,dataset:r,shouldHide:!1,isInvalid:a=>!e.formatter.canApply(a.format)}},YN=(e,t)=>J1(e,t,WA(e),UA,"BlocksTextUpdate"),XN=(e,t)=>{const n=pp(e,t,WA(e));e.ui.registry.addNestedMenuItem("blocks",{text:KN,onSetup:Dc(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},JN="Fonts",jA="Font {0}",F3="System Font",QN=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],GA=e=>{const t=e.split(/\s*,\s*/);return Ae(t,n=>n.replace(/^['"]+|['"]+$/g,""))},qA=(e,t)=>t.length>0&&Pe(t,n=>e.indexOf(n.toLowerCase())>-1),eV=(e,t)=>{if(e.indexOf("-apple-system")===0||t.length>0){const n=GA(e.toLowerCase());return qA(n,QN)||qA(n,t)}else return!1},KA=e=>{const t=()=>{const g=B=>B?GA(B)[0]:"",b=e.queryCommandValue("FontName"),w=d.data,x=b?b.toLowerCase():"",k=i5(e);return{matchOpt:Q(w,B=>{const Z=B.format;return Z.toLowerCase()===x||g(Z).toLowerCase()===g(x).toLowerCase()}).orThunk(()=>$s(eV(x,k),{title:F3,format:x})),font:b}},n=g=>b=>b.exists(w=>w.format===g),o=()=>{const{matchOpt:g}=t();return g},r=g=>()=>v.some({tag:"div",styles:g.indexOf("dings")===-1?{"font-family":g}:{}}),a=g=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontName",!1,g.format)})},i=g=>{const{matchOpt:b,font:w}=t(),x=b.fold($(w),k=>k.title);yt(g,Cl,{text:x}),K$(e,{value:x})},d=M3(e,"font_family_formats",fp.SemiColon);return{tooltip:hp(e,jA,F3),text:v.some(F3),icon:v.none(),isSelectedFor:n,getCurrentValue:o,getPreviewFor:r,onAction:a,updateText:i,dataset:d,shouldHide:!1,isInvalid:Te}},tV=(e,t)=>J1(e,t,KA(e),jA,"FontFamilyTextUpdate"),nV=(e,t)=>{const n=pp(e,t,KA(e));e.ui.registry.addNestedMenuItem("fontfamily",{text:t.shared.providers.translate(JN),onSetup:Dc(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},oV={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},sV=(()=>{const e="[0-9]+",n="[eE]"+("[+-]?"+e),o="\\.",r=d=>`(?:${d})?`,i=`[+-]?(?:${["Infinity",e+o+r(e)+r(n),o+e+r(n),e+r(n)].join("|")})`;return new RegExp(`^(${i})(.*)$`)})(),rV=(e,t)=>Kn(t,n=>Kn(oV[n],o=>e===o)),Z2=(e,t)=>v.from(sV.exec(e)).bind(o=>{const r=Number(o[1]),a=o[2];return rV(a,t)?v.some({value:r,unit:a}):v.none()}),cV=(e,t)=>Z2(e,t).map(({value:n,unit:o})=>n+o),YA={tab:$(9),escape:$(27),enter:$(13),backspace:$(8),delete:$(46),left:$(37),up:$(38),right:$(39),down:$(40),space:$(32),home:$(36),end:$(35),pageUp:$(33),pageDown:$(34)},aV=(e,t,n)=>{let o=v.none();const r=K=>K.map(ce=>Ye.getValue(ce)).getOr(""),a=Sg(e,"NodeChange SwitchMode",K=>{const ce=K.getComponent();o=v.some(ce),n.updateInputValue(ce),Dt.set(ce,!e.selection.isEditable())}),i=K=>({getComponent:$(K)}),d=m(se),g=et("custom-number-input-events"),b=(K,ce,ke)=>{const be=r(o),he=n.getNewValue(be,K),Be=be.length-`${he}`.length,Le=o.map(at=>at.element.dom.selectionStart-Be),Qt=o.map(at=>at.element.dom.selectionEnd-Be);n.onAction(he,ke),o.each(at=>{Ye.setValue(at,he),ce&&(Le.each(Ct=>at.element.dom.selectionStart=Ct),Qt.each(Ct=>at.element.dom.selectionEnd=Ct))})},w=(K,ce)=>b((ke,be)=>ke-be,K,ce),x=(K,ce)=>b((ke,be)=>ke+be,K,ce),k=K=>Lr(K.element).fold(v.none,ce=>(aa(ce),v.some(!0))),A=K=>Km(K.element)?(Sc(K.element).each(ce=>aa(ce)),v.some(!0)):v.none(),B=(K,ce,ke,be)=>{const he=m(se),Be=t.shared.providers.translate(ke),Le=et("altExecuting"),Qt=Sg(e,"NodeChange SwitchMode",Ct=>{Dt.set(Ct.getComponent(),!e.selection.isEditable())}),at=Ct=>{Dt.isDisabled(Ct)||K(!0)};return Gr.sketch({dom:{tag:"button",attributes:{title:Be,"aria-label":Be},classes:be.concat(ce)},components:[Z4(ce,t.shared.providers.icons)],buttonBehaviours:He([Dt.config({}),nn(Le,[gm({onSetup:Qt,getApi:i},he),hm({getApi:i},he),xe(Ga(),(Ct,_t)=>{(_t.event.raw.keyCode===YA.space()||_t.event.raw.keyCode===YA.enter())&&(Dt.isDisabled(Ct)||K(!1))}),xe(Li(),at),xe(Mn(),at)])]),eventOrder:{[Ga()]:[Le,"keying"],[Li()]:[Le,"alloy.base.behaviour"],[Mn()]:[Le,"alloy.base.behaviour"]}})},Z=go(B(K=>w(!1,K),"minus","Decrease font size",[])),re=go(B(K=>x(!1,K),"plus","Increase font size",[])),J=go({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[vg.sketch({inputBehaviours:He([Dt.config({}),nn(g,[gm({onSetup:a,getApi:i},d),hm({getApi:i},d)]),nn("input-update-display-text",[xe(Cl,(K,ce)=>{Ye.setValue(K,ce.event.text)}),xe(Mp(),K=>{n.onAction(Ye.getValue(K))}),xe(Bd(),K=>{n.onAction(Ye.getValue(K))})]),St.config({mode:"special",onEnter:K=>(b(We,!0,!0),v.some(!0)),onEscape:k,onUp:K=>(x(!0,!1),v.some(!0)),onDown:K=>(w(!0,!1),v.some(!0)),onLeft:(K,ce)=>(ce.cut(),v.none()),onRight:(K,ce)=>(ce.cut(),v.none())})])})],behaviours:He([Ht.config({}),St.config({mode:"special",onEnter:A,onSpace:A,onEscape:k}),nn("input-wrapper-events",[xe(oa(),K=>{Ve([Z,re],ce=>{const ke=q.fromDom(ce.get(K).element.dom);Km(ke)&&Gd(ke)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[Z.asSpec(),J.asSpec(),re.asSpec()],behaviours:He([Ht.config({}),St.config({mode:"flow",focusInside:l.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:K=>Km(K.element)?v.none():(aa(K.element),v.some(!0))})])}},lV="Font sizes",XA="Font size {0}",JA="12pt",iV={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},uV={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},dV=(e,t)=>{const n=Math.pow(10,t);return Math.round(e*n)/n},mV=(e,t)=>/[0-9.]+px$/.test(e)?dV(parseInt(e,10)*72/96,t||0)+"pt":Xe(uV,e).getOr(e),gV=e=>Xe(iV,e).getOr(""),QA=e=>{const t=()=>{let g=v.none();const b=d.data,w=e.queryCommandValue("FontSize");if(w)for(let x=3;g.isNone()&&x>=0;x--){const k=mV(w,x),A=gV(k);g=Q(b,B=>B.format===w||B.format===k||B.format===A)}return{matchOpt:g,size:w}},n=g=>b=>b.exists(w=>w.format===g),o=()=>{const{matchOpt:g}=t();return g},r=$(v.none),a=g=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontSize",!1,g.format)})},i=g=>{const{matchOpt:b,size:w}=t(),x=b.fold($(w),k=>k.title);yt(g,Cl,{text:x}),j$(e,{value:x})},d=M3(e,"font_size_formats",fp.Space);return{tooltip:hp(e,XA,JA),text:v.some(JA),icon:v.none(),isSelectedFor:n,getPreviewFor:r,getCurrentValue:o,onAction:a,updateText:i,dataset:d,shouldHide:!1,isInvalid:Te}},hV=(e,t)=>J1(e,t,QA(e),XA,"FontSizeTextUpdate"),pV=e=>{var t;const n={step:1};return(t={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[e])!==null&&t!==void 0?t:n},fV=16,bV=e=>e>=0,vV=e=>{const t=()=>e.queryCommandValue("FontSize");return{updateInputValue:o=>yt(o,Cl,{text:t()}),onAction:(o,r)=>e.execCommand("FontSize",!1,o,{skip_focus:!r}),getNewValue:(o,r)=>{Z2(o,["unsupportedLength","empty"]);const a=t(),i=Z2(o,["unsupportedLength","empty"]).or(Z2(a,["unsupportedLength","empty"])),d=i.map(k=>k.value).getOr(fV),g=YT(e),b=i.map(k=>k.unit).filter(k=>k!=="").getOr(g),w=r(d,pV(b).step),x=`${bV(w)?w:d}${b}`;return x!==a&&G$(e,{value:x}),x}}},yV=(e,t)=>aV(e,t,vV(e)),wV=(e,t)=>{const n=pp(e,t,QA(e));e.ui.registry.addNestedMenuItem("fontsize",{text:lV,onSetup:Dc(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},SV="Formats",e_="Format {0}",t_=(e,t)=>{const n="Paragraph",o=i=>()=>e.formatter.match(i),r=i=>()=>{const d=e.formatter.get(i);return d!==void 0?v.some({tag:d.length>0&&(d[0].inline||d[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(i))}):v.none()},a=i=>{const d=x=>$O(x)?Me(x.items,d):FO(x)?[{title:x.title,format:x.format}]:[],g=Me(IO(e),d),w=ZA(e,$(g)).fold($(n),x=>x.title);yt(i,Cl,{text:w}),U$(e,{value:w})};return{tooltip:hp(e,e_,n),text:v.some(n),icon:v.none(),isSelectedFor:o,getCurrentValue:v.none,getPreviewFor:r,onAction:hk(e),updateText:a,shouldHide:VT(e),isInvalid:i=>!e.formatter.canApply(i.format),dataset:t}},xV=(e,t)=>{const n={type:"advanced",...t.styles};return J1(e,t,t_(e,n),e_,"StylesTextUpdate")},CV=(e,t)=>{const n={type:"advanced",...t.styles},o=pp(e,t,t_(e,n));e.ui.registry.addNestedMenuItem("styles",{text:SV,onSetup:Dc(e),getSubmenuItems:()=>o.items.validateItems(o.getStyleItems())})},TV=$([Ce("toggleClass"),Ce("fetch"),Wu("onExecute"),oe("getHotspot",v.some),oe("getAnchorOverrides",$({})),Ki(),Wu("onItemExecute"),oo("lazySink"),Ce("dom"),Vn("onOpen"),pr("splitDropdownBehaviours",[Ms,St,Ht]),oe("matchWidth",!1),oe("useMinWidth",!1),oe("eventOrder",{}),oo("role")].concat(y4())),kV=Wr({factory:Gr,schema:[Ce("dom")],name:"arrow",defaults:()=>({buttonBehaviours:He([Ht.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(Hu)},buttonBehaviours:He([fn.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),EV=Wr({factory:Gr,schema:[Ce("dom")],name:"button",defaults:()=>({buttonBehaviours:He([Ht.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(n=>{e.onExecute(n,t)})}})}),OV=$([kV,EV,jc({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[Ce("text")],name:"aria-descriptor"}),Qa({schema:[Gm()],name:"menu",defaults:e=>({onExecute:(t,n)=>{t.getSystem().getByUid(e.uid).each(o=>{e.onItemExecute(o,t,n)})}})}),Bk()]),AV=(e,t,n,o)=>{const r=w=>{Dn.getCurrent(w).each(x=>{no.highlightFirst(x),St.focusIn(x)})},a=w=>{b4(e,We,w,o,r,Gc.HighlightMenuAndItem).get(se)},i=w=>(a(w),v.some(!0)),d=w=>{const x=Xi(w,e,"button");return Hu(x),v.some(!0)},g={...Io([Go((w,x)=>{Ao(w,e,"aria-descriptor").each(A=>{const B=et("aria");Pt(A.element,"id",B),Pt(w.element,"aria-describedby",B)})})]),...Hv(v.some(a))},b={repositionMenus:w=>{fn.isOn(w)&&Lk(w)}};return{uid:e.uid,dom:e.dom,components:t,apis:b,eventOrder:{...e.eventOrder,[zc()]:["disabling","toggling","alloy.base.behaviour"]},events:g,behaviours:Ks(e.splitDropdownBehaviours,[Ms.config({others:{sandbox:w=>{const x=Xi(w,e,"arrow");return v4(e,w,{onOpen:()=>{fn.on(x),fn.on(w)},onClose:()=>{fn.off(x),fn.off(w)}})}}}),St.config({mode:"special",onSpace:d,onEnter:d,onDown:i}),Ht.config({}),fn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},U2=ac({name:"SplitDropdown",configFields:TV(),partFields:OV(),factory:AV,apis:{repositionMenus:(e,t)=>e.repositionMenus(t)}}),n_=e=>({isEnabled:()=>!Dt.isDisabled(e),setEnabled:t=>Dt.set(e,!t),setText:t=>yt(e,Cl,{text:t}),setIcon:t=>yt(e,Mg,{icon:t})}),_V=e=>({setActive:t=>{fn.set(e,t)},isActive:()=>fn.isOn(e),isEnabled:()=>!Dt.isDisabled(e),setEnabled:t=>Dt.set(e,!t),setText:t=>yt(e,Cl,{text:t}),setIcon:t=>yt(e,Mg,{icon:t})}),o_=(e,t)=>e.map(n=>({"aria-label":t.translate(n),title:t.translate(n)})).getOr({}),s_=et("focus-button"),R3=(e,t,n,o,r)=>{const a=t.map(d=>go(JE(d,"tox-tbtn",r))),i=e.map(d=>go(wm(d,r.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:o_(n,r)},components:sp([i.map(d=>d.asSpec()),a.map(d=>d.asSpec())]),eventOrder:{[ls()]:["focusing","alloy.base.behaviour",_g],[Ta()]:[_g,"toolbar-group-button-events"]},buttonBehaviours:He([Ql.toolbarButton(r.isDisabled),fr(),nn(_g,[Go((d,g)=>z4(d)),xe(Cl,(d,g)=>{a.bind(b=>b.getOpt(d)).each(b=>{Kt.set(b,[Os(r.translate(g.event.text))])})}),xe(Mg,(d,g)=>{i.bind(b=>b.getOpt(d)).each(b=>{Kt.set(b,[wm(g.event.icon,r.icons)])})}),xe(ls(),(d,g)=>{g.event.prevent(),to(d,s_)})])].concat(o.getOr([])))}},MV=(e,t,n,o)=>{const r=t.shared,a=m(se),i={toolbarButtonBehaviours:[],getApi:n_,onSetup:e.onSetup},d=[nn("toolbar-group-button-events",[gm(i,a),hm(i,a)])];return xm.sketch({lazySink:r.getSink,fetch:()=>uc.nu(g=>{g(Ae(n(e.items),N2))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:R3(e.icon,e.text,e.tooltip,v.some(d),r.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:o}}}})},r_=(e,t,n)=>{var o;const r=m(se),a=R3(e.icon,e.text,e.tooltip,v.none(),n);return Gr.sketch({dom:a.dom,components:a.components,eventOrder:YE,buttonBehaviours:{...He([nn("toolbar-button-events",[PB({onAction:e.onAction,getApi:t.getApi}),gm(t,r),hm(t,r)]),Ql.toolbarButton(()=>!e.enabled||n.isDisabled()),fr()].concat(t.toolbarButtonBehaviours)),[_g]:(o=a.buttonBehaviours)===null||o===void 0?void 0:o[_g]}})},DV=(e,t)=>c_(e,t,[]),c_=(e,t,n)=>r_(e,{toolbarButtonBehaviours:n.length>0?[nn("toolbarButtonWith",n)]:[],getApi:n_,onSetup:e.onSetup},t),$V=(e,t)=>a_(e,t,[]),a_=(e,t,n)=>r_(e,{toolbarButtonBehaviours:[Kt.config({}),fn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[nn("toolbarToggleButtonWith",n)]:[]),getApi:_V,onSetup:e.onSetup},t),FV=(e,t,n)=>o=>uc.nu(r=>t.fetch(r)).map(r=>v.from(w4(vo(p4(et("menu-value"),r,a=>{t.onItemAction(e(o),a)},t.columns,t.presets,Ci.CLOSE_ON_EXECUTE,t.select.getOr(Te),n),{movement:l2(t.columns,t.presets),menuBehaviours:M1.unnamedEvents(t.columns!=="auto"?[]:[Go((a,i)=>{e4(a,4,w5(t.presets)).each(({numRows:d,numColumns:g})=>{St.setGridSize(a,d,g)})})])})))),RV=(e,t)=>{const n=a=>({isEnabled:()=>!Dt.isDisabled(a),setEnabled:i=>Dt.set(a,!i),setIconFill:(i,d)=>{As(a.element,`svg path[class="${i}"], rect[class="${i}"]`).each(g=>{Pt(g,"fill",d)})},setActive:i=>{Pt(a.element,"aria-pressed",i),As(a.element,"span").each(d=>{a.getSystem().getByDom(d).each(g=>fn.set(g,i))})},isActive:()=>As(a.element,"span").exists(i=>a.getSystem().getByDom(i).exists(fn.isOn)),setText:i=>As(a.element,"span").each(d=>a.getSystem().getByDom(d).each(g=>yt(g,Cl,{text:i}))),setIcon:i=>As(a.element,"span").each(d=>a.getSystem().getByDom(d).each(g=>yt(g,Mg,{icon:i}))),setTooltip:i=>{const d=t.providers.translate(i);ga(a.element,{"aria-label":d,title:d})}}),o=m(se),r={getApi:n,onSetup:e.onSetup};return U2.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...o_(e.tooltip,t.providers)}},onExecute:a=>{const i=n(a);i.isEnabled()&&e.onAction(i)},onItemExecute:(a,i,d)=>{},splitDropdownBehaviours:He([Ql.splitButton(t.providers.isDisabled),fr(),nn("split-dropdown-events",[Go((a,i)=>z4(a)),xe(s_,Ht.focus),gm(r,o),hm(r,o)]),z1.config({})]),eventOrder:{[Ta()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:FV(n,e,t.providers),parts:{menu:Kv(!1,e.columns,e.presets)},components:[U2.parts.button(R3(e.icon,e.text,v.none(),v.some([fn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),U2.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:BT("chevron-down",t.providers.icons)},buttonBehaviours:He([Ql.splitButton(t.providers.isDisabled),fr(),kx()])}),U2.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})},BV=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Q1=(e,t)=>(n,o,r)=>{const a=e(n).mapError(i=>di(i)).getOrDie();return t(a,o,r)},IV={button:Q1(I5,(e,t)=>DV(e,t.shared.providers)),togglebutton:Q1(H5,(e,t)=>$V(e,t.shared.providers)),menubutton:Q1(hA,(e,t)=>G1(e,"tox-tbtn",t,v.none(),!1)),splitbutton:Q1(sL,(e,t)=>RV(e,t.shared)),grouptoolbarbutton:Q1(tL,(e,t,n)=>{const o=n.ui.registry.getAll().buttons,r=i=>W2(n,{buttons:o,toolbar:i,allowToolbarGroups:!1},t,v.none()),a={[Qm]:t.shared.header.isPositionedAtTop()?ka.TopToBottom:ka.BottomToTop};switch(ep(n)){case wl.floating:return MV(e,t,r,a);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},HV=(e,t,n)=>Xe(IV,e.type).fold(()=>(console.error("skipping button defined by",e),v.none()),o=>v.some(o(e,t,n))),l_={styles:xV,fontsize:hV,fontsizeinput:yV,fontfamily:tV,blocks:YN,align:GN},PV=e=>{const t=Ae(BV,n=>{const o=Xt(n.items,r=>Cn(e,r)||Cn(l_,r));return{name:n.name,items:o}});return Xt(t,n=>n.items.length>0)},LV=e=>{const t=e.split("|");return Ae(t,n=>({items:n.trim().split(" ")}))},NV=e=>tt(e,t=>Cn(t,"name")&&Cn(t,"items")),VV=e=>{const t=e.toolbar,n=e.buttons;return t===!1?[]:t===void 0||t===!0?PV(n):ye(t)?LV(t):NV(t)?t:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},zV=(e,t,n,o,r,a)=>Xe(t,n.toLowerCase()).orThunk(()=>a.bind(i=>xn(i,d=>Xe(t,d+n.toLowerCase())))).fold(()=>Xe(l_,n.toLowerCase()).map(i=>i(e,r)),i=>i.type==="grouptoolbarbutton"&&!o?(console.warn(`Ignoring the '${n}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),v.none()):HV(i,r,e)),W2=(e,t,n,o)=>{const r=VV(t),a=Ae(r,i=>{const d=Me(i.items,g=>g.trim().length===0?[]:zV(e,t.buttons,g,t.allowToolbarGroups,n,o).toArray());return{title:v.from(e.translate(i.name)),items:d}});return Xt(a,i=>i.items.length>0)},i_=(e,t,n,o)=>{const r=t.mainUi.outerContainer,a=n.toolbar,i=n.buttons;if(tt(a,ye)){const d=a.map(g=>{const b={toolbar:g,buttons:i,allowToolbarGroups:n.allowToolbarGroups};return W2(e,b,o,v.none())});Uo.setToolbars(r,d)}else Uo.setToolbar(r,W2(e,n,o,v.none()))},u_=ba(),ZV=u_.os.isiOS()&&u_.os.version.major<=12,UV=(e,t)=>{const{uiMotherships:n}=t,o=e.dom;let r=e.getWin();const a=e.getDoc().documentElement,i=m(Gn(r.innerWidth,r.innerHeight)),d=m(Gn(a.offsetWidth,a.offsetHeight)),g=()=>{const k=i.get();(k.left!==r.innerWidth||k.top!==r.innerHeight)&&(i.set(Gn(r.innerWidth,r.innerHeight)),r4(e))},b=()=>{const k=e.getDoc().documentElement,A=d.get();(A.left!==k.offsetWidth||A.top!==k.offsetHeight)&&(d.set(Gn(k.offsetWidth,k.offsetHeight)),r4(e))},w=k=>{N$(e,k)};o.bind(r,"resize",g),o.bind(r,"scroll",w);const x=Cf(q.fromDom(e.getBody()),"load",b);e.on("hide",()=>{Ve(n,k=>{Je(k.element,"display","none")})}),e.on("show",()=>{Ve(n,k=>{Nn(k.element,"display")})}),e.on("NodeChange",b),e.on("remove",()=>{x.unbind(),o.unbind(r,"resize",g),o.unbind(r,"scroll",w),r=null})},WV=(e,t,n)=>{dm(e)&&Oh(n.mainUi.mothership.element,n.popupUi.mothership),yi(t,n.dialogUi.mothership)};var jV=Object.freeze({__proto__:null,render:(e,t,n,o,r)=>{const{mainUi:a,uiMotherships:i}=t,d=m(0),g=a.outerContainer;NN(e);const b=q.fromDom(r.targetNode),w=De(le(b));Oh(b,a.mothership),WV(e,w,t),e.on("SkinLoaded",()=>{Uo.setSidebar(g,n.sidebar,c5(e)),i_(e,t,n,o),d.set(e.getWin().innerWidth),Uo.setMenubar(g,HA(e,n)),Uo.setViews(g,n.views),UV(e,t)});const x=Uo.getSocket(g).getOrDie("Could not find expected socket element");if(ZV){Co(x.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Z=TB(()=>{e.dispatch("ScrollContent")},20),re=rc(x.element,"scroll",Z.throttle);e.on("remove",re.unbind)}j5(e,t),e.addCommand("ToggleSidebar",(Z,re)=>{Uo.toggleSidebar(g,re),e.dispatch("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",()=>{var Z;return(Z=Uo.whichSidebar(g))!==null&&Z!==void 0?Z:""}),e.addCommand("ToggleView",(Z,re)=>{if(Uo.toggleView(g,re)){const J=g.element;a.mothership.broadcastOn([wi()],{target:J}),Ve(i,K=>{K.broadcastOn([wi()],{target:J})}),Zn(Uo.whichView(g))&&(e.focus(),e.nodeChanged(),Uo.refreshToolbar(g))}}),e.addQueryValueHandler("ToggleView",()=>{var Z;return(Z=Uo.whichView(g))!==null&&Z!==void 0?Z:""});const k=ep(e),A=()=>{Uo.refreshToolbar(t.mainUi.outerContainer)};(k===wl.sliding||k===wl.floating)&&e.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Z=e.getWin().innerWidth;Z!==d.get()&&(A(),d.set(Z))});const B={setEnabled:Z=>{n2(t,!Z)},isEnabled:()=>!Dt.isDisabled(g)};return{iframeContainer:x.element.dom,editorContainer:g.element.dom,api:B}}});const B3=e=>/^[0-9\.]+(|px)$/i.test(""+e)?v.some(parseInt(""+e,10)):v.none(),I3=e=>jt(e)?e+"px":e,j2=(e,t,n)=>{const o=t.filter(a=>e<a),r=n.filter(a=>e>a);return o.or(r).getOr(e)},GV=e=>{const t=Ox(e),n=Mx(e),o=Dx(e);return B3(t).map(r=>j2(r,n,o))},qV=e=>GV(e).getOr(Ox(e)),d_=e=>{const t=Ax(e),n=_x(e),o=zv(e);return B3(t).map(r=>j2(r,n,o))},KV=e=>d_(e).getOr(Ax(e)),{ToolbarLocation:H3,ToolbarMode:m_}=X7,YV=40,XV=(e,t,n,o,r)=>{const{mainUi:a,uiMotherships:i}=n,d=Jh.DOM,g=tp(e),b=E1(e),w=zv(e).or(d_(e)),x=o.shared.header,k=x.isPositionedAtTop,A=ep(e),B=A===m_.sliding||A===m_.floating,Z=m(!1),re=()=>Z.get()&&!e.removed,J=wt=>B?wt.fold($(0),Fn=>Fn.components().length>1?Ro(Fn.components()[1].element):0):0,K=wt=>{switch($x(e)){case H3.auto:const Fn=Uo.getToolbar(a.outerContainer),Ne=J(Fn),ct=Ro(wt.element)-Ne,Rt=Rs(t);if(Rt.y>ct)return"top";{const Tt=yr(t),Wt=Math.max(Tt.dom.scrollHeight,Ro(Tt));return Rt.bottom<Wt-ct||tr().bottom<Rt.bottom-ct?"bottom":"top"}case H3.bottom:return"bottom";case H3.top:default:return"top"}},ce=wt=>{r.on(Fn=>{Ps.setModes(Fn,[wt]),x.setDockingMode(wt);const Ne=k()?ka.TopToBottom:ka.BottomToTop;Pt(Fn.element,Qm,Ne)})},ke=()=>{r.on(wt=>{const Fn=w.getOrThunk(()=>{const Ne=B3(Fo(Cs(),"margin-left")).getOr(0);return M(Cs())-Or(t).left+Ne});Je(wt.element,"max-width",Fn+"px")})},be=wt=>{r.on(Fn=>{const Ne=Uo.getToolbar(a.outerContainer),ct=J(Ne),Rt=Rs(t),{top:Tn,left:Tt}=he(e,a.outerContainer.element).fold(()=>({top:k()?Math.max(Rt.y-Ro(Fn.element)+ct,0):Rt.bottom,left:Rt.x}),qn=>{var qr;const qo=Rs(qn),$c=(qr=qn.dom.scrollTop)!==null&&qr!==void 0?qr:0,ol=Qn(qn,Cs()),ru=ol?Math.max(Rt.y-Ro(Fn.element)+ct,0):Rt.y-qo.y+$c-Ro(Fn.element)+ct;return{top:k()?ru:Rt.bottom,left:ol?Rt.x:Rt.x-qo.x}}),Wt={position:"absolute",left:Math.round(Tt)+"px",top:Math.round(Tn)+"px"},wo=wt.map(qn=>{const qr=Jr(),qo=150,$c=window.innerWidth-(Tt-qr.left);return{width:Math.max(Math.min(qn,$c),qo)+"px"}}).getOr({});Co(a.outerContainer.element,{...Wt,...wo})})},he=(wt,Fn)=>dm(wt)?u3(Fn):v.none(),Be=()=>{Ve(i,wt=>{wt.broadcastOn([tm()],{})})},Le=()=>{if(g)return v.none();if(Or(a.outerContainer.element).left+H(a.outerContainer.element)>=window.innerWidth-YV||bo(a.outerContainer.element,"width").isSome()){Je(a.outerContainer.element,"position","absolute"),Je(a.outerContainer.element,"left","0px"),Nn(a.outerContainer.element,"width");const Fn=H(a.outerContainer.element);return v.some(Fn)}else return v.none()},Qt=wt=>{if(!re())return;g||ke();const Fn=g?v.none():Le();B&&Uo.refreshToolbar(a.outerContainer),g||be(Fn),b&&r.on(wt),Be()},at=()=>g||!b||!re()?!1:r.get().exists(wt=>{const Fn=x.getDockingMode(),Ne=K(wt);return Ne!==Fn?(ce(Ne),!0):!1});return{isVisible:re,isPositionedAtTop:k,show:()=>{Z.set(!0),Je(a.outerContainer.element,"display","flex"),d.addClass(e.getBody(),"mce-edit-focus"),Ve(i,wt=>{Nn(wt.element,"display")}),at(),dm(e)?Qt(wt=>Ps.isDocked(wt)?Ps.reset(wt):Ps.refresh(wt)):Qt(Ps.refresh)},hide:()=>{Z.set(!1),Je(a.outerContainer.element,"display","none"),d.removeClass(e.getBody(),"mce-edit-focus"),Ve(i,wt=>{Je(wt.element,"display","none")})},update:Qt,updateMode:()=>{at()&&Qt(Ps.reset)},repositionPopups:Be}},g_=(e,t)=>{const n=Rs(e);return{pos:t?n.y:n.bottom,bounds:n}},JV=(e,t,n,o)=>{const r=m(g_(t,n.isPositionedAtTop())),a=b=>{const{pos:w,bounds:x}=g_(t,n.isPositionedAtTop()),{pos:k,bounds:A}=r.get(),B=x.height!==A.height||x.width!==A.width;r.set({pos:w,bounds:x}),B&&r4(e,b),n.isVisible()&&(k!==w?n.update(Ps.reset):B&&(n.updateMode(),n.repositionPopups()))};o||(e.on("activate",n.show),e.on("deactivate",n.hide)),e.on("SkinLoaded ResizeWindow",()=>n.update(Ps.reset)),e.on("NodeChange keydown",b=>{requestAnimationFrame(()=>a(b))});let i=0;const d=P4(()=>n.update(Ps.refresh),33);e.on("ScrollWindow",()=>{const b=Jr().left;b!==i&&(i=b,d.throttle()),n.updateMode()}),dm(e)&&e.on("ElementScroll",b=>{n.update(Ps.refresh)});const g=vi();g.set(Cf(q.fromDom(e.getBody()),"load",b=>a(b.raw))),e.on("remove",()=>{g.clear()})};var QV=Object.freeze({__proto__:null,render:(e,t,n,o,r)=>{const{mainUi:a}=t,i=On(),d=q.fromDom(r.targetNode),g=XV(e,d,t,o,i),b=WT(e);VN(e);const w=()=>{if(i.isSet()){g.show();return}i.set(Uo.getHeader(a.outerContainer).getOrDie());const k=Hx(e);dm(e)?(Oh(d,a.mothership),Oh(d,t.popupUi.mothership)):yi(k,a.mothership),yi(k,t.dialogUi.mothership),i_(e,t,n,o),Uo.setMenubar(a.outerContainer,HA(e,n)),g.show(),JV(e,d,g,b),e.nodeChanged()};e.on("show",w),e.on("hide",g.hide),b||(e.on("focus",w),e.on("blur",g.hide)),e.on("init",()=>{(e.hasFocus()||b)&&w()}),j5(e,t);const x={show:w,hide:g.hide,setEnabled:k=>{n2(t,!k)},isEnabled:()=>!Dt.isDisabled(a.outerContainer)};return{editorContainer:a.outerContainer.element.dom,api:x}}});const ez=()=>{const e=On(),t=On(),n=On();return{dialogUi:e,popupUi:t,mainUi:n,getUiMotherships:()=>{const a=e.get().map(d=>d.mothership),i=t.get().map(d=>d.mothership);return a.fold(()=>i.toArray(),d=>i.fold(()=>[d],g=>Qn(d.element,g.element)?[d]:[d,g]))},lazyGetInOuterOrDie:(a,i)=>()=>n.get().bind(d=>i(d.outerContainer)).getOrDie(`Could not find ${a} element in OuterContainer`)}},tz="contexttoolbar-show",h_="contexttoolbar-hide",nz=e=>({hide:()=>to(e,Gg()),getValue:()=>Ye.getValue(e)}),p_=(e,t)=>xe(KE,(n,o)=>{const r=e.get(n),a=nz(r);t.onAction(a,o.event.buttonApi)}),oz=(e,t,n)=>{const{primary:o,...r}=t.original,a=ya(I5({...r,type:"button",onAction:se}));return c_(a,n,[p_(e,t)])},sz=(e,t,n)=>{const{primary:o,...r}=t.original,a=ya(H5({...r,type:"togglebutton",onAction:se}));return a_(a,n,[p_(e,t)])},rz=e=>e.type==="contextformtogglebutton",cz=(e,t,n)=>rz(t)?sz(e,t,n):oz(e,t,n),az=(e,t,n)=>{const o=Ae(t,i=>go(cz(e,i,n)));return{asSpecs:()=>Ae(o,i=>i.asSpec()),findPrimary:i=>xn(t,(d,g)=>d.primary?v.from(o[g]).bind(b=>b.getOpt(i)).filter(mt(Dt.isDisabled)):v.none())}},f_=(e,t)=>{const n=e.label.fold(()=>({}),a=>({"aria-label":a})),o=go(vg.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:He([St.config({mode:"special",onEnter:a=>r.findPrimary(a).map(i=>(Hu(i),!0)),onLeft:(a,i)=>(i.cut(),v.none()),onRight:(a,i)=>(i.cut(),v.none())})])})),r=az(o,e.commands,t);return[{title:v.none(),items:[o.asSpec()]},{title:v.none(),items:r.asSpecs()}]},lz={renderContextForm:(e,t,n)=>V2({type:e,uid:et("context-toolbar"),initGroups:f_(t,n),onEscape:v.none,cyclicKeying:!0,providers:n}),buildInitGroups:f_},b_=(e,t,n)=>t.bottom-e.y>=n&&e.bottom-t.y>=n,iz=e=>{const t=e.getBoundingClientRect();if(t.height<=0&&t.width<=0){const n=rl(q.fromDom(e.startContainer),e.startOffset).element;return(pn(n)?Fs(n):v.some(n)).filter(qt).map(r=>r.dom.getBoundingClientRect()).getOr(t)}else return t},P3=e=>{const t=e.selection.getRng(),n=iz(t);if(e.inline){const o=Jr();return es(o.left+n.left,o.top+n.top,n.width,n.height)}else{const o=Pa(q.fromDom(e.getBody()));return es(o.x+n.left,o.y+n.top,n.width,n.height)}},uz=(e,t)=>t.filter(n=>Xn(n)&&Tr(n)).map(Pa).getOrThunk(()=>P3(e)),dz=(e,t,n)=>{const o=Math.max(e.x+n,t.x),r=Math.min(e.right-n,t.right);return{x:o,width:r-o}},mz=(e,t,n,o,r,a)=>{const i=q.fromDom(e.getContainer()),d=As(i,".tox-editor-header").getOr(i),g=Rs(d),b=g.y>=t.bottom,w=o&&!b;if(e.inline&&w)return{y:Math.max(g.bottom+a,n.y),bottom:n.bottom};if(e.inline&&!w)return{y:n.y,bottom:Math.min(g.y-a,n.bottom)};const x=r==="line"?Rs(i):t;return w?{y:Math.max(g.bottom+a,n.y),bottom:Math.min(x.bottom-a,n.bottom)}:{y:Math.max(x.y+a,n.y),bottom:Math.min(g.y-a,n.bottom)}},v_=(e,t,n,o=0)=>{const r=bu(window),a=Rs(q.fromDom(e.getContentAreaContainer())),i=Uv(e)||Gv(e)||k1(e),{x:d,width:g}=dz(a,r,o);if(e.inline&&!i)return es(d,r.y,g,r.height);{const b=t.header.isPositionedAtTop(),{y:w,bottom:x}=mz(e,a,r,b,n,o);return es(d,w,g,x-w)}},G2=12,y_={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},w_={maxHeightFunction:qd(),maxWidthFunction:C3()},gz=(e,t)=>{const n=e.selection.getRng(),o=rl(q.fromDom(n.startContainer),n.startOffset);return n.startContainer===n.endContainer&&n.startOffset===n.endOffset-1&&Qn(o.element,t)},hz=(e,t,n)=>{const o=bo(e,"position");Je(e,"position",t);const r=n(e);return o.each(a=>Je(e,"position",a)),r},S_=e=>e==="node",pz=(e,t,n,o,r)=>{const a=P3(e),i=o.lastElement().exists(d=>Qn(n,d));if(gz(e,n))return i?DO:ri;if(i)return hz(t,o.getMode(),()=>b_(a,Rs(t),-20)&&!o.isReposition()?hH:DO);{const d=o.getMode()==="fixed"?r.y+Jr().top:r.y,g=Ro(t)+G2;return d+g<=a.y?ri:Y1}},fz=(e,t,n,o)=>{const r=g=>(b,w,x,k,A)=>{const B=pz(e,k,g,n,A),Z={...b,y:A.y,height:A.height};return{...B(Z,w,x,k,A),alwaysFit:!0}},a=g=>S_(o)?[r(g)]:[];return t?{onLtr:g=>[hr,sr,Br,Oc,Ac,sc].concat(a(g)),onRtl:g=>[hr,Br,sr,Ac,Oc,sc].concat(a(g))}:{onLtr:g=>[sc,hr,Oc,sr,Ac,Br].concat(a(g)),onRtl:g=>[sc,hr,Ac,Br,Oc,sr].concat(a(g))}},bz=(e,t,n,o)=>t==="line"?{bubble:jl(G2,0,y_),layouts:{onLtr:()=>[df],onRtl:()=>[mf]},overrides:w_}:{bubble:jl(0,G2,y_,1/G2),layouts:fz(e,n,o,t),overrides:w_},L3=(e,t)=>{const n=Xt(t,a=>a.predicate(e.dom)),{pass:o,fail:r}=Wo(n,a=>a.type==="contexttoolbar");return{contextToolbars:o,contextForms:r}},vz=e=>{if(e.length<=1)return e;{const t=a=>Kn(e,i=>i.position===a),n=a=>Xt(e,i=>i.position===a),o=t("selection"),r=t("node");if(o||r)if(r&&o){const a=n("node"),i=Ae(n("selection"),d=>({...d,position:"node"}));return a.concat(i)}else return n(o?"selection":"node");else return n("line")}},yz=e=>{if(e.length<=1)return e;{const t=o=>Q(e,r=>r.position===o);return t("selection").orThunk(()=>t("node")).orThunk(()=>t("line")).map(o=>o.position).fold(()=>[],o=>Xt(e,r=>r.position===o))}},wz=(e,t,n)=>{const o=L3(e,t);if(o.contextForms.length>0)return v.some({elem:e,toolbars:[o.contextForms[0]]});{const r=L3(e,n);if(r.contextForms.length>0)return v.some({elem:e,toolbars:[r.contextForms[0]]});if(o.contextToolbars.length>0||r.contextToolbars.length>0){const a=vz(o.contextToolbars.concat(r.contextToolbars));return v.some({elem:e,toolbars:a})}else return v.none()}},Sz=(e,t,n)=>e(t)?v.none():xa(t,o=>{if(qt(o)){const{contextToolbars:r,contextForms:a}=L3(o,n.inNodeScope),i=a.length>0?a:yz(r);return i.length>0?v.some({elem:o,toolbars:i}):v.none()}else return v.none()},e),xz=(e,t)=>{const n=q.fromDom(t.getBody()),o=i=>Qn(i,n),r=i=>!o(i)&&!bs(n,i),a=q.fromDom(t.selection.getNode());return r(a)?v.none():wz(a,e.inNodeScope,e.inEditorScope).orThunk(()=>Sz(o,a,e))},Cz=(e,t)=>{const n={},o=[],r=[],a={},i={},d=(w,x)=>{const k=ya(UD(x));n[w]=k,k.launch.map(A=>{a["form:"+w]={...x.launch,type:A.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{t(k)}}}),k.scope==="editor"?r.push(k):o.push(k),i[w]=k},g=(w,x)=>{jD(x).each(k=>{x.scope==="editor"?r.push(k):o.push(k),i[w]=k})},b=cn(e);return Ve(b,w=>{const x=e[w];x.type==="contextform"?d(w,x):x.type==="contexttoolbar"&&g(w,x)}),{forms:n,inNodeScope:o,inEditorScope:r,lookupTable:i,formNavigators:a}},x_=et("forward-slide"),C_=et("backward-slide"),N3=et("change-slide-event"),V3="tox-pop--resizing",Tz=e=>{const t=m([]);return ms.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:n=>{t.set([]),ms.getContent(n).each(o=>{Nn(o.element,"visibility")}),ys(n.element,V3),Nn(n.element,"width")},inlineBehaviours:He([nn("context-toolbar-events",[Lu(Id(),(n,o)=>{o.event.raw.propertyName==="width"&&(ys(n.element,V3),Nn(n.element,"width"))}),xe(N3,(n,o)=>{const r=n.element;Nn(r,"width");const a=M(r);ms.setContent(n,o.event.contents),Es(r,V3);const i=M(r);Je(r,"width",a+"px"),ms.getContent(n).each(d=>{o.event.focus.bind(g=>(aa(g),bl(r))).orThunk(()=>(St.focusIn(d),Wl(le(r))))}),setTimeout(()=>{Je(n.element,"width",i+"px")},0)}),xe(x_,(n,o)=>{ms.getContent(n).each(r=>{t.set(t.get().concat([{bar:r,focus:Wl(le(n.element))}]))}),yt(n,N3,{contents:o.event.forwardContents,focus:v.none()})}),xe(C_,(n,o)=>{Bn(t.get()).each(r=>{t.set(t.get().slice(0,t.get().length-1)),yt(n,N3,{contents:ra(r.bar),focus:r.focus})})})]),St.config({mode:"special",onEscape:n=>Bn(t.get()).fold(()=>e.onEscape(),o=>(to(n,C_),v.some(!0)))})]),lazySink:()=>mn.value(e.sink)})},z3="tox-pop--transition",kz=(e,t,n,o)=>{const r=o.backstage,a=r.shared,i=ba().deviceType.isTouch,d=On(),g=On(),b=On(),w=Ur(Tz({sink:n,onEscape:()=>(e.focus(),v.some(!0))})),x=()=>{const at=b.get().getOr("node"),Ct=S_(at)?1:0;return v_(e,a,at,Ct)},k=()=>!e.removed&&!(i()&&r.isContextMenuOpen()),A=at=>Ds(Zs(at,d.get(),Qn),!0),B=()=>{if(k()){const at=x(),Ct=Ds(b.get(),"node")?uz(e,d.get()):P3(e);return at.height<=0||!b_(Ct,at,.01)}else return!0},Z=()=>{d.clear(),g.clear(),b.clear(),ms.hide(w)},re=()=>{if(ms.isOpen(w)){const at=w.element;Nn(at,"display"),B()?Je(at,"display","none"):(g.set(0),ms.reposition(w))}},J=at=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[at],behaviours:He([St.config({mode:"acyclic"}),nn("pop-dialog-wrap-events",[Go(Ct=>{e.shortcuts.add("ctrl+F9","focus statusbar",()=>St.focusIn(Ct))}),zl(Ct=>{e.shortcuts.remove("ctrl+F9")})])])}),K=ge(()=>Cz(t,at=>{const Ct=be([at]);yt(w,x_,{forwardContents:J(Ct)})})),ce=(at,Ct)=>W2(e,{buttons:at,toolbar:Ct.items,allowToolbarGroups:!1},o.backstage,v.some(["form:"])),ke=(at,Ct)=>lz.buildInitGroups(at,Ct),be=at=>{const{buttons:Ct}=e.ui.registry.getAll(),_t=K(),so={...Ct,..._t.formNavigators},wt=ep(e)===wl.scrolling?wl.scrolling:wl.default,Fn=ie(Ae(at,Ne=>Ne.type==="contexttoolbar"?ce(so,Ne):ke(Ne,a.providers)));return V2({type:wt,uid:et("context-toolbar"),initGroups:Fn,onEscape:v.none,cyclicKeying:!0,providers:a.providers})},he=(at,Ct)=>{const _t=at==="node"?a.anchors.node(Ct):a.anchors.cursor(),so=bz(e,at,i(),{lastElement:d.get,isReposition:()=>Ds(g.get(),0),getMode:()=>cc.getMode(n)});return vo(_t,so)},Be=(at,Ct)=>{if(Qt.cancel(),!k())return;const _t=be(at),so=at[0].position,wt=he(so,Ct);b.set(so),g.set(1);const Fn=w.element;Nn(Fn,"display"),A(Ct)||(ys(Fn,z3),cc.reset(n,w)),ms.showWithinBounds(w,J(_t),{anchor:wt,transition:{classes:[z3],mode:"placement"}},()=>v.some(x())),Ct.fold(d.clear,d.set),B()&&Je(Fn,"display","none")};let Le=!1;const Qt=P4(()=>{if(!(!e.hasFocus()||e.removed||Le))if(Tc(w.element,z3))Qt.throttle();else{const at=K();xz(at,e).fold(Z,Ct=>{Be(Ct.toolbars,v.some(Ct.elem))})}},17);e.on("init",()=>{e.on("remove",Z),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",re),e.on("click keyup focus SetContent",Qt.throttle),e.on(h_,Z),e.on(tz,at=>{const Ct=K();Xe(Ct.lookupTable,at.toolbarKey).each(_t=>{Be([_t],$s(at.target!==e,at.target)),ms.getContent(w).each(St.focusIn)})}),e.on("focusout",at=>{Pv.setEditorTimeout(e,()=>{bl(n.element).isNone()&&bl(w.element).isNone()&&Z()},0)}),e.on("SwitchMode",()=>{e.mode.isReadOnly()&&Z()}),e.on("AfterProgressState",at=>{at.state?Z():e.hasFocus()&&Qt.throttle()}),e.on("dragstart",()=>{Le=!0}),e.on("dragend drop",()=>{Le=!1}),e.on("NodeChange",at=>{bl(w.element).fold(Qt.throttle,se)})})},Ez=e=>{Ve([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],n=>{e.ui.registry.addToggleButton(n.name,{tooltip:n.text,icon:n.icon,onAction:Da(e,n.cmd),onSetup:c2(e,n.name)})}),e.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Dc(e),onAction:Da(e,"JustifyNone")})},T_=(e,t)=>{const n=()=>{const o=t.getOptions(e),r=t.getCurrent(e).map(t.hash),a=On();return Ae(o,i=>({type:"togglemenuitem",text:t.display(i),onSetup:d=>{const g=w=>{w&&(a.on(x=>x.setActive(!1)),a.set(d)),d.setActive(w)};g(Ds(r,t.hash(i)));const b=t.watcher(e,i,g);return()=>{a.clear(),b()}},onAction:()=>t.setCurrent(e,i)}))};e.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:o=>o(n()),onSetup:t.onToolbarSetup}),e.ui.registry.addNestedMenuItem(t.name,{type:"nestedmenuitem",text:t.text,getSubmenuItems:n,onSetup:t.onMenuSetup})},Oz=e=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:u5,hash:t=>cV(t,["fixed","relative","empty"]).getOr(t),display:We,watcher:(t,n,o)=>t.formatter.formatChanged("lineheight",o,!1,{value:n}).unbind,getCurrent:t=>v.from(t.queryCommandValue("LineHeight")),setCurrent:(t,n)=>t.execCommand("LineHeight",!1,n),onToolbarSetup:Dc(e),onMenuSetup:Dc(e)}),Az=e=>v.from(zT(e)).map(n=>({name:"language",text:"Language",icon:"language",getOptions:$(n),hash:o=>Vt(o.customCode)?o.code:`${o.code}/${o.customCode}`,display:o=>o.title,watcher:(o,r,a)=>{var i;return o.formatter.formatChanged("lang",a,!1,{value:r.code,customValue:(i=r.customCode)!==null&&i!==void 0?i:null}).unbind},getCurrent:o=>{const r=q.fromDom(o.selection.getNode());return Ca(r,a=>v.some(a).filter(qt).bind(i=>C(i,"lang").map(g=>{const b=C(i,"data-mce-lang").getOrUndefined();return{code:g,customCode:b,title:""}})))},setCurrent:(o,r)=>o.execCommand("Lang",!1,r),onToolbarSetup:o=>{const r=vi();return o.setActive(e.formatter.match("lang",{},void 0,!0)),r.set(e.formatter.formatChanged("lang",o.setActive,!0)),r2(r.clear,Dc(e)(o))},onMenuSetup:Dc(e)})),_z=e=>{T_(e,Oz(e)),Az(e).each(t=>T_(e,t))},Mz=(e,t)=>{qN(e,t),nV(e,t),CV(e,t),XN(e,t),wV(e,t)},Dz=e=>Sg(e,"NodeChange",t=>{t.setEnabled(e.queryCommandState("outdent")&&e.selection.isEditable())}),$z=e=>{e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Dz(e),onAction:Da(e,"outdent")}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Dc(e),onAction:Da(e,"indent")})},Fz=e=>{$z(e)},k_=(e,t)=>n=>{n.setActive(t.get());const o=r=>{t.set(r.state),n.setActive(r.state)};return e.on("PastePlainTextToggle",o),r2(()=>e.off("PastePlainTextToggle",o),Dc(e)(n))},Rz=e=>{const t=m(r5(e)),n=()=>e.execCommand("mceTogglePlainTextPaste");e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:n,onSetup:k_(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:n,onSetup:k_(e,t)})},Z3=(e,t)=>()=>{e.execCommand("mceToggleFormat",!1,t)},Bz=e=>{cd.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(t,n)=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:c2(e,t.name),onAction:Z3(e,t.name)})});for(let t=1;t<=6;t++){const n="h"+t;e.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+t,onSetup:c2(e,n),onAction:Z3(e,n)})}},Iz=e=>{cd.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:Da(e,t.action)})}),cd.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:Dc(e),onAction:Da(e,t.action)})})},Hz=e=>{cd.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:Da(e,t.action),onSetup:c2(e,t.name)})})},Pz=e=>{Bz(e),Iz(e),Hz(e)},Lz=e=>{cd.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:Da(e,t.action)})}),cd.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onSetup:Dc(e),onAction:Da(e,t.action)})}),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Dc(e),onAction:Z3(e,"code")})},Nz=e=>{Pz(e),Lz(e)},q2=(e,t)=>Sg(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",n=>{n.setEnabled(!e.mode.isReadOnly()&&e.undoManager[t]())}),Vz=e=>{e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:q2(e,"hasUndo"),onAction:Da(e,"undo")}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:q2(e,"hasRedo"),onAction:Da(e,"redo")})},zz=e=>{e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:q2(e,"hasUndo"),onAction:Da(e,"undo")}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:q2(e,"hasRedo"),onAction:Da(e,"redo")})},Zz=e=>{Vz(e),zz(e)},Uz=e=>Sg(e,"VisualAid",t=>{t.setActive(e.hasVisual)}),Wz=e=>{e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:Uz(e),onAction:Da(e,"mceToggleVisualAid")})},jz=e=>{e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Da(e,"mceToggleVisualAid")})},Gz=e=>{jz(e),Wz(e)},qz=(e,t)=>{Ez(e),Nz(e),Mz(e,t),Zz(e),mF(e),Gz(e),Fz(e),_z(e),Rz(e)},Kz=e=>ye(e)?e.split(/[ ,]/):e,E_=e=>t=>t.options.get(e),Yz=e=>{const t=e.options.register;t("contextmenu_avoid_overlap",{processor:"string",default:""}),t("contextmenu_never_use_native",{processor:"boolean",default:!1}),t("contextmenu",{processor:n=>n===!1?{value:[],valid:!0}:ye(n)||tt(n,ye)?{value:Kz(n),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},O_=E_("contextmenu_never_use_native"),Xz=E_("contextmenu_avoid_overlap"),Jz=e=>A_(e).length===0,A_=e=>{const t=e.ui.registry.getAll().contextMenus,n=e.options.get("contextmenu");return e.options.isSet("contextmenu")?n:Xt(n,o=>Cn(t,o))},e0=(e,t)=>({type:"makeshift",x:e,y:t}),Qz=(e,t,n)=>e0(e.x+t,e.y+n),__=e=>e.type==="longpress"||e.type.indexOf("touch")===0,eZ=e=>{if(__(e)){const t=e.touches[0];return e0(t.pageX,t.pageY)}else return e0(e.pageX,e.pageY)},tZ=e=>{if(__(e)){const t=e.touches[0];return e0(t.clientX,t.clientY)}else return e0(e.clientX,e.clientY)},nZ=(e,t)=>{const n=Jh.DOM.getPos(e);return Qz(t,n.x,n.y)},oZ=(e,t)=>t.type==="contextmenu"||t.type==="longpress"?e.inline?eZ(t):nZ(e.getContentAreaContainer(),tZ(t)):M_(e),M_=e=>({type:"selection",root:q.fromDom(e.selection.getNode())}),sZ=e=>({type:"node",node:v.some(q.fromDom(e.selection.getNode())),root:q.fromDom(e.getBody())}),D_=(e,t,n)=>{switch(n){case"node":return sZ(e);case"point":return oZ(e,t);case"selection":return M_(e)}},rZ=(e,t,n,o,r,a)=>{const i=n(),d=D_(e,t,a);dp(i,Ci.CLOSE_ON_EXECUTE,o,{isHorizontalMenu:!1,search:v.none()}).map(g=>{t.preventDefault(),ms.showMenuAt(r,{anchor:d},{menu:{markers:bg("normal")},data:g})})},cZ={onLtr:()=>[hr,sr,Br,Oc,Ac,sc,ri,Y1,K1,$2,q1,D2],onRtl:()=>[hr,Br,sr,Ac,Oc,sc,ri,Y1,q1,D2,K1,$2]},aZ=12,lZ={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},iZ=(e,t)=>{const n=e.selection;if(n.isCollapsed()||t.touches.length<1)return!1;{const o=t.touches[0],r=n.getRng();return If(e.getWin(),Sr.domRange(r)).exists(i=>i.left<=o.clientX&&i.right>=o.clientX&&i.top<=o.clientY&&i.bottom>=o.clientY)}},uZ=e=>{const t=e.selection.getRng(),n=()=>{Pv.setEditorTimeout(e,()=>{e.selection.setRng(t)},10),a()};e.once("touchend",n);const o=i=>{i.preventDefault(),i.stopImmediatePropagation()};e.on("mousedown",o,!0);const r=()=>a();e.once("longpresscancel",r);const a=()=>{e.off("touchend",n),e.off("longpresscancel",r),e.off("mousedown",o)}},dZ=(e,t,n)=>{const o=D_(e,t,n);return{bubble:jl(0,n==="point"?aZ:0,lZ),layouts:cZ,overrides:{maxWidthFunction:C3(),maxHeightFunction:qd()},...o}},mZ=(e,t,n,o,r,a,i)=>{const d=dZ(e,t,a);dp(n,Ci.CLOSE_ON_EXECUTE,o,{isHorizontalMenu:!0,search:v.none()}).map(g=>{t.preventDefault();const b=i?Gc.HighlightMenuAndItem:Gc.HighlightNone;ms.showMenuWithinBounds(r,{anchor:d},{menu:{markers:bg("normal"),highlightOnOpen:b},data:g,type:"horizontal"},()=>v.some(v_(e,o.shared,a==="node"?"node":"selection"))),e.dispatch(h_)})},gZ=(e,t,n,o,r,a)=>{const i=ba(),d=i.os.isiOS(),g=i.os.isMacOS(),b=i.os.isAndroid(),w=i.deviceType.isTouch(),x=()=>!(b||d||g&&w),k=()=>{const A=n();mZ(e,t,A,o,r,a,x())};if((g||d)&&a!=="node"){const A=()=>{uZ(e),k()};iZ(e,t)?A():(e.once("selectionchange",A),e.once("touchend",()=>e.off("selectionchange",A)))}else k()},$_=e=>ye(e)?e==="|":e.type==="separator",U3={type:"separator"},F_=e=>{const t=n=>({text:n.text,icon:n.icon,enabled:n.enabled,shortcut:n.shortcut});if(ye(e))return e;switch(e.type){case"separator":return U3;case"submenu":return{type:"nestedmenuitem",...t(e),getSubmenuItems:()=>{const o=e.getSubmenuItems();return ye(o)?o:Ae(o,F_)}};default:const n=e;return{type:"menuitem",...t(n),onAction:ze(n.onAction)}}},R_=(e,t)=>{if(t.length===0)return e;const o=Bn(e).filter(r=>!$_(r)).fold(()=>[],r=>[U3]);return e.concat(o).concat(t).concat([U3])},hZ=(e,t,n)=>{const o=En(t,(r,a)=>Xe(e,a.toLowerCase()).map(i=>{const d=i.update(n);if(ye(d)&&z(Vo(d)))return R_(r,d.split(" "));if(Pn(d)&&d.length>0){const g=Ae(d,F_);return R_(r,g)}else return r}).getOrThunk(()=>r.concat([a])),[]);return o.length>0&&$_(o[o.length-1])&&o.pop(),o},pZ=(e,t)=>t.ctrlKey&&!O_(e),fZ=e=>e.type==="longpress"||Cn(e,"touches"),B_=(e,t)=>!fZ(t)&&(t.button!==2||t.target===e.getBody()&&t.pointerType===""),I_=(e,t)=>B_(e,t)?e.selection.getStart(!0):t.target,bZ=(e,t)=>{const n=Xz(e),o=B_(e,t)?"selection":"point";if(z(n)){const r=I_(e,t);return H1(q.fromDom(r),n)?"node":o}else return o},vZ=(e,t,n)=>{const r=ba().deviceType.isTouch,a=Ur(ms.sketch({dom:{tag:"div"},lazySink:t,onEscape:()=>e.focus(),onShow:()=>n.setContextMenuState(!0),onHide:()=>n.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:He([nn("dismissContextMenu",[xe(Zi(),(g,b)=>{Hn.close(g),e.focus()})])])})),i=()=>ms.hide(a),d=g=>{if(O_(e)&&g.preventDefault(),pZ(e,g)||Jz(e))return;const b=bZ(e,g),w=()=>{const k=I_(e,g),A=e.ui.registry.getAll(),B=A_(e);return hZ(A.contextMenus,B,k)};(r()?gZ:rZ)(e,g,w,n,a,b)};e.on("init",()=>{const g="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(r()?"":" ResizeWindow");e.on(g,i),e.on("longpress contextmenu",d)})},W3=E.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),K2=e=>t=>t.translate(-e.left,-e.top),Y2=e=>t=>t.translate(e.left,e.top),ld=e=>(t,n)=>En(e,(o,r)=>r(o),Gn(t,n)),X2=(e,t,n)=>e.fold(ld([Y2(n),K2(t)]),ld([K2(t)]),ld([])),bp=(e,t,n)=>e.fold(ld([Y2(n)]),ld([]),ld([Y2(t)])),H_=(e,t,n)=>e.fold(ld([]),ld([K2(n)]),ld([Y2(t),K2(n)])),yZ=(e,t,n,o,r,a)=>{const i=bp(e,r,a),d=bp(t,r,a);return Math.abs(i.left-d.left)<=n&&Math.abs(i.top-d.top)<=o},wZ=(e,t,n,o,r,a)=>{const i=bp(e,r,a),d=bp(t,r,a),g=Math.abs(i.left-d.left),b=Math.abs(i.top-d.top);return Gn(g,b)},P_=(e,t,n)=>{const o=e.fold((r,a)=>({position:v.some("absolute"),left:v.some(r+"px"),top:v.some(a+"px")}),(r,a)=>({position:v.some("absolute"),left:v.some(r-n.left+"px"),top:v.some(a-n.top+"px")}),(r,a)=>({position:v.some("fixed"),left:v.some(r+"px"),top:v.some(a+"px")}));return{right:v.none(),bottom:v.none(),...o}},SZ=(e,t,n)=>e.fold((o,r)=>J2(o+t,r+n),(o,r)=>Cm(o+t,r+n),(o,r)=>$g(o+t,r+n)),j3=(e,t,n,o)=>{const r=(a,i)=>(d,g)=>{const b=a(t,n,o);return i(d.getOr(b.left),g.getOr(b.top))};return e.fold(r(H_,J2),r(bp,Cm),r(X2,$g))},J2=W3.offset,Cm=W3.absolute,$g=W3.fixed,L_=(e,t)=>{const n=$o(e,t);return Vt(n)?NaN:parseInt(n,10)},xZ=(e,t)=>{const n=e.element,o=L_(n,t.leftAttr),r=L_(n,t.topAttr);return isNaN(o)||isNaN(r)?v.none():v.some(Gn(o,r))},CZ=(e,t,n)=>{const o=e.element;Pt(o,t.leftAttr,n.left+"px"),Pt(o,t.topAttr,n.top+"px")},TZ=(e,t)=>{const n=e.element;P(n,t.leftAttr),P(n,t.topAttr)},kZ=(e,t,n,o)=>xZ(e,t).fold(()=>n,r=>$g(r.left+o.left,r.top+o.top)),EZ=(e,t,n,o,r,a)=>{const i=kZ(e,t,n,o),d=t.mustSnap?AZ(e,t,i,r,a):_Z(e,t,i,r,a),g=X2(i,r,a);return CZ(e,t,g),d.fold(()=>({coord:$g(g.left,g.top),extra:v.none()}),b=>({coord:b.output,extra:b.extra}))},OZ=(e,t)=>{TZ(e,t)},N_=(e,t,n,o)=>xn(e,r=>{const a=r.sensor;return yZ(t,a,r.range.left,r.range.top,n,o)?v.some({output:j3(r.output,t,n,o),extra:r.extra}):v.none()}),AZ=(e,t,n,o,r)=>{const a=t.getSnapPoints(e);return N_(a,n,o,r).orThunk(()=>En(a,(g,b)=>{const w=b.sensor,x=wZ(n,w,b.range.left,b.range.top,o,r);return g.deltas.fold(()=>({deltas:v.some(x),snap:v.some(b)}),k=>{const A=(x.left+x.top)/2,B=(k.left+k.top)/2;return A<=B?{deltas:v.some(x),snap:v.some(b)}:g})},{deltas:v.none(),snap:v.none()}).snap.map(g=>({output:j3(g.output,n,o,r),extra:g.extra})))},_Z=(e,t,n,o,r)=>{const a=t.getSnapPoints(e);return N_(a,n,o,r)},MZ=(e,t,n)=>({coord:j3(e.output,e.output,t,n),extra:e.extra});var DZ=Object.freeze({__proto__:null,snapTo:(e,t,n,o)=>{const r=t.getTarget(e.element);if(t.repositionTarget){const a=js(e.element),i=Jr(a),d=JO(r),g=MZ(o,i,d),b=P_(g.coord,i,d);Er(r,b)}}});const G3="data-initial-z-index",$Z=e=>{Fs(e.element).filter(qt).each(t=>{C(t,G3).fold(()=>Nn(t,"z-index"),n=>Je(t,"z-index",n)),P(t,G3)})},FZ=e=>{Fs(e.element).filter(qt).each(t=>{bo(t,"z-index").each(n=>{Pt(t,G3,n)}),Je(t,"z-index",Fo(e.element,"z-index"))})},V_=(e,t)=>{e.getSystem().addToGui(t),FZ(t)},RZ=e=>{$Z(e),e.getSystem().removeFromGui(e)},z_=(e,t,n)=>e.getSystem().build(Ti.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:n}));var BZ=nc("snaps",[Ce("getSnapPoints"),Vn("onSensor"),Ce("leftAttr"),Ce("topAttr"),oe("lazyViewport",tr),oe("mustSnap",!1)]);const q3=[oe("useFixed",Te),Ce("blockerClass"),oe("getTarget",We),oe("onDrag",se),oe("repositionTarget",!0),oe("onDrop",se),Is("getBounds",tr),BZ],IZ=e=>Ss(bo(e,"left"),bo(e,"top"),bo(e,"position"),(t,n,o)=>(o==="fixed"?$g:J2)(parseInt(t,10),parseInt(n,10))).getOrThunk(()=>{const t=Or(e);return Cm(t.left,t.top)}),HZ=(e,t,n,o,r)=>{const a=r.bounds,i=bp(t,n,o),d=ca(i.left,a.x,a.x+a.width-r.width),g=ca(i.top,a.y,a.y+a.height-r.height),b=Cm(d,g);return t.fold(()=>{const w=H_(b,n,o);return J2(w.left,w.top)},$(b),()=>{const w=X2(b,n,o);return $g(w.left,w.top)})},PZ=(e,t,n,o,r,a,i)=>{const d=t.fold(()=>{const g=SZ(n,a.left,a.top),b=X2(g,o,r);return $g(b.left,b.top)},g=>{const b=EZ(e,g,n,a,o,r);return b.extra.each(w=>{g.onSensor(e,w)}),b.coord});return HZ(e,d,o,r,i)},LZ=(e,t,n,o)=>{const r=t.getTarget(e.element);if(t.repositionTarget){const a=js(e.element),i=Jr(a),d=JO(r),g=IZ(r),b=PZ(e,t.snaps,g,i,d,o,n),w=P_(b,i,d);Er(r,w)}t.onDrag(e,r,o)},Z_=(e,t)=>({bounds:e.getBounds(),height:Ia(t.element),width:H(t.element)}),K3=(e,t,n,o,r)=>{const a=n.update(o,r),i=n.getStartData().getOrThunk(()=>Z_(t,e));a.each(d=>{LZ(e,t,i,d)})},U_=(e,t,n,o)=>{t.each(RZ),n.snaps.each(a=>{OZ(e,a)});const r=n.getTarget(e.element);o.reset(),n.onDrop(e,r)},Y3=e=>(t,n)=>{const o=r=>{n.setStartData(Z_(t,r))};return Io([xe(zi(),r=>{n.getStartData().each(()=>o(r))}),...e(t,n,o)])},NZ=e=>Io([xe(ls(),e.forceDrop),xe(Im(),e.drop),xe(Dr(),(t,n)=>{e.move(n.event)}),xe(Rd(),e.delayDrop)]);var VZ=Object.freeze({__proto__:null,getData:e=>v.from(Gn(e.x,e.y)),getDelta:(e,t)=>Gn(t.left-e.left,t.top-e.top)});const W_=(e,t,n)=>[xe(ls(),(o,r)=>{if(r.event.raw.button!==0)return;r.stop();const i=()=>U_(o,v.some(b),e,t),d=Uk(i,200),g={drop:i,delayDrop:d.schedule,forceDrop:i,move:x=>{d.cancel(),K3(o,e,t,VZ,x)}},b=z_(o,e.blockerClass,NZ(g));(()=>{n(o),V_(o,b)})()})],zZ=[...q3,zo("dragger",{handlers:Y3(W_)})],ZZ=e=>Io([xe(ja(),e.forceDrop),xe(Mn(),e.drop),xe(cs(),e.drop),xe($u(),(t,n)=>{e.move(n.event)})]),UZ=e=>{const t=e[0];return v.some(Gn(t.clientX,t.clientY))};var j_=Object.freeze({__proto__:null,getData:e=>{const n=e.raw.touches;return n.length===1?UZ(n):v.none()},getDelta:(e,t)=>Gn(t.left-e.left,t.top-e.top)});const G_=(e,t,n)=>{const o=On(),r=a=>{U_(a,o.get(),e,t),o.clear()};return[xe(ja(),(a,i)=>{i.stop();const d=()=>r(a),g={drop:d,delayDrop:se,forceDrop:d,move:x=>{K3(a,e,t,j_,x)}},b=z_(a,e.blockerClass,ZZ(g));o.set(b),(()=>{n(a),V_(a,b)})()}),xe($u(),(a,i)=>{i.stop(),K3(a,e,t,j_,i.event)}),xe(Mn(),(a,i)=>{i.stop(),r(a)}),xe(cs(),r)]},WZ=[...q3,zo("dragger",{handlers:Y3(G_)})],jZ=(e,t,n)=>[...W_(e,t,n),...G_(e,t,n)],GZ=[...q3,zo("dragger",{handlers:Y3(jZ)})];var qZ=Object.freeze({__proto__:null,mouse:zZ,touch:WZ,mouseOrTouch:GZ}),KZ=Object.freeze({__proto__:null,init:()=>{let e=v.none(),t=v.none();const n=()=>{e=v.none(),t=v.none()},o=(g,b)=>{const w=e.map(x=>g.getDelta(x,b));return e=v.some(b),w},r=(g,b)=>g.getData(b).bind(w=>o(g,w)),a=g=>{t=v.some(g)},i=()=>t,d=$({});return Zc({readState:d,reset:n,update:r,getStartData:i,setStartData:a})}});const Fg=bf({branchKey:"mode",branches:qZ,name:"dragging",active:{events:(e,t)=>e.dragger.handlers(e,t)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:v.from(e.extra)})},state:KZ,apis:DZ}),X3=40,Q2=X3/2,q_=(e,t,n,o,r,a)=>e.fold(()=>Fg.snap({sensor:Cm(n-Q2,o-Q2),range:Gn(r,a),output:Cm(v.some(n),v.some(o)),extra:{td:t}}),i=>{const d=n-Q2,g=o-Q2,b=X3,w=X3,x=i.element.dom.getBoundingClientRect();return Fg.snap({sensor:Cm(d,g),range:Gn(b,w),output:Cm(v.some(n-x.width/2),v.some(o-x.height/2)),extra:{td:t}})}),K_=(e,t,n)=>{const o=(r,a)=>r.exists(i=>Qn(i,a));return{getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(r,a)=>{const i=a.td;o(t.get(),i)||(t.set(i),n(i))},mustSnap:!0}},Y_=e=>go(Gr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:He([Fg.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),z1.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),YZ=(e,t)=>{const n=m([]),o=m([]),r=m(!1),a=On(),i=On(),d=Be=>{const Le=Pa(Be);return q_(A.getOpt(t),Be,Le.x,Le.y,Le.width,Le.height)},g=()=>Ae(n.get(),Be=>d(Be)),b=Be=>{const Le=Pa(Be);return q_(B.getOpt(t),Be,Le.right,Le.bottom,Le.width,Le.height)},w=()=>Ae(o.get(),Be=>b(Be)),x=K_(g,a,Be=>{i.get().each(Le=>{e.dispatch("TableSelectorChange",{start:Be,finish:Le})})}),k=K_(w,i,Be=>{a.get().each(Le=>{e.dispatch("TableSelectorChange",{start:Le,finish:Be})})}),A=Y_(x),B=Y_(k),Z=Ur(A.asSpec()),re=Ur(B.asSpec()),J=(Be,Le,Qt,at)=>{const Ct=Le.dom.getBoundingClientRect();Nn(Be.element,"display");const _t=Hr(q.fromDom(e.getBody())).dom.innerHeight,so=Qt(Ct),wt=at(Ct,_t);(so||wt)&&Je(Be.element,"display","none")},K=(Be,Le,Qt,at)=>{const Ct=Qt(Le);Fg.snapTo(Be,Ct),J(Be,Le,wt=>wt[at]<0,(wt,Fn)=>wt[at]>Fn)},ce=Be=>K(Z,Be,d,"top"),ke=()=>a.get().each(ce),be=Be=>K(re,Be,b,"bottom"),he=()=>i.get().each(be);ba().deviceType.isTouch()&&(e.on("TableSelectionChange",Be=>{r.get()||(Xu(t,Z),Xu(t,re),r.set(!0)),a.set(Be.start),i.set(Be.finish),Be.otherCells.each(Le=>{n.set(Le.upOrLeftCells),o.set(Le.downOrRightCells),ce(Be.start),be(Be.finish)})}),e.on("ResizeEditor ResizeWindow ScrollContent",()=>{ke(),he()}),e.on("TableSelectionClear",()=>{r.get()&&(Gl(Z),Gl(re),r.set(!1)),a.clear(),i.clear()}))};var XZ=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const JZ=e=>e.nodeName==="BR"||!!e.getAttribute("data-mce-bogus")||e.getAttribute("data-mce-type")==="bookmark",QZ=(e,t,n)=>{var o;const r=(o=t.delimiter)!==null&&o!==void 0?o:"",a=(b,w,x)=>Gr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":x,"aria-level":x+1}},components:[Os(b)],action:k=>{e.focus(),e.selection.select(w),e.nodeChanged()},buttonBehaviours:He([Ql.button(n.isDisabled),fr()])}),i=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Os(` ${r} `)]}),d=b=>En(b,(w,x,k)=>{const A=a(x.name,x.element,k);return k===0?w.concat([A]):w.concat([i(),A])},[]),g=b=>{const w=[];let x=b.length;for(;x-- >0;){const k=b[x];if(k.nodeType===1&&!JZ(k)){const A=z$(e,k);if(A.isDefaultPrevented()||w.push({name:A.name,element:k}),A.isPropagationStopped())break}}return w};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:He([St.config({mode:"flow",selector:"div[role=button]"}),Dt.config({disabled:n.isDisabled}),fr(),gs.config({}),Kt.config({}),nn("elementPathEvents",[Go((b,w)=>{e.shortcuts.add("alt+F11","focus statusbar elementpath",()=>St.focusIn(b)),e.on("NodeChange",x=>{const k=g(x.parents),A=k.length>0?d(k):[];Kt.set(b,A)})})])]),components:[]}};var Tm;(function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"})(Tm||(Tm={}));const eU=(e,t,n,o,r)=>{const a={height:j2(o+t.top,Mx(e),Dx(e))};return n===Tm.Both&&(a.width=j2(r+t.left,_x(e),zv(e))),a},X_=(e,t,n)=>{const o=q.fromDom(e.getContainer()),r=eU(e,t,n,Ro(o),M(o));en(r,(a,i)=>{jt(a)&&Je(o,i,I3(a))}),L$(e)},tU=e=>{const t=s5(e);return t===!1?Tm.None:t==="both"?Tm.Both:Tm.Vertical},ey=(e,t,n,o)=>{const a=Gn(n*20,o*20);return X_(e,a,t),v.some(!0)},nU=(e,t)=>{const n=tU(e);if(n===Tm.None)return v.none();const o=n===Tm.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return v.some(Xl("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize"),"aria-label":t.translate(o)},behaviours:[Fg.config({mode:"mouse",repositionTarget:!1,onDrag:(r,a,i)=>X_(e,i,n),blockerClass:"tox-blocker"}),St.config({mode:"special",onLeft:()=>ey(e,n,-1,0),onRight:()=>ey(e,n,1,0),onUp:()=>ey(e,n,0,-1),onDown:()=>ey(e,n,0,1)}),gs.config({}),Ht.config({})]},t.icons))},oU=(e,t)=>{const n=(o,r,a)=>Kt.set(o,[Os(t.translate(["{0} "+a,r[a]]))]);return Gr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:He([Ql.button(t.isDisabled),fr(),gs.config({}),Kt.config({}),Ye.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),nn("wordcount-events",[qa(o=>{const r=Ye.getValue(o),a=r.mode==="words"?"characters":"words";Ye.setValue(o,{mode:a,count:r.count}),n(o,r.count,a)}),Go(o=>{e.on("wordCountUpdate",r=>{const{mode:a}=Ye.getValue(o);Ye.setValue(o,{mode:a,count:r.wordCount}),n(o,r.wordCount,a)})})])]),eventOrder:{[zc()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},sU=(e,t)=>{const n=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v6",rel:"noopener",target:"_blank","aria-label":tl.translate(["Powered by {0}","Tiny"])},innerHtml:XZ.trim()},behaviours:He([Ht.config({})])}]}),o=()=>{const d=G5("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Os(tl.translate(["Press {0} for help",d]))]}},r=()=>{const d=[];return e.hasPlugin("wordcount")&&d.push(oU(e,t)),Fx(e)&&d.push(n()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:d}},a=()=>{const d=[],g=l5(e),b=o5(e),w=Fx(e)||e.hasPlugin("wordcount"),x=()=>{const k="tox-statusbar__text-container--flex-start",A="tox-statusbar__text-container--flex-end",B="tox-statusbar__text-container--space-around";if(g){const Z="tox-statusbar__text-container-3-cols";return!w&&!b?[Z,B]:w&&!b?[Z,A]:[Z,k]}return[w&&!b?A:k]};return b&&d.push(QZ(e,{},t)),g&&d.push(o()),w&&d.push(r()),d.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...x()]},components:d}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const d=a(),g=nU(e,t);return d.concat(g.toArray())})()}},J_=(e,t)=>t.get().getOrDie(`UI for ${e} has not been rendered`),rU=(e,t)=>{const n=e.inline,o=n?QV:jV,r=E1(e)?JP:xP,a=ez(),i=On(),d=On(),g=On(),k=ba().deviceType.isTouch()?["tox-platform-touch"]:[],A=Ix(e),B=ep(e),Z=go({dom:{tag:"div",classes:["tox-anchorbar"]}}),re=go({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),J=()=>a.mainUi.get().map(Tt=>Tt.outerContainer).bind(Uo.getHeader),K=()=>mn.fromOption(a.dialogUi.get().map(Tt=>Tt.sink),"UI has not been rendered"),ce=()=>mn.fromOption(a.popupUi.get().map(Tt=>Tt.sink),"(popup) UI has not been rendered"),ke=a.lazyGetInOuterOrDie("anchor bar",Z.getOpt),be=a.lazyGetInOuterOrDie("bottom anchor bar",re.getOpt),he=a.lazyGetInOuterOrDie("toolbar",Uo.getToolbar),Be=a.lazyGetInOuterOrDie("throbber",Uo.getThrobber),Le=dP({popup:ce,dialog:K},e,ke,be),Qt=()=>{const Tt={attributes:{[Qm]:A?ka.BottomToTop:ka.TopToBottom}},Wt=Uo.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Le.popup,onEscape:()=>{e.focus()}}),wo=Uo.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Le.popup.shared.getSink,providers:Le.popup.shared.providers,onEscape:()=>{e.focus()},onToolbarToggled:au=>{Z$(e,au)},type:B,lazyToolbar:he,lazyHeader:()=>J().getOrDie("Could not find header element"),...Tt}),qn=Uo.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Le.popup.shared.providers,onEscape:()=>{e.focus()},type:B}),qr=k1(e),qo=Gv(e),$c=Uv(e),ol=a5(e),ru=at(),cu=qr||qo||$c,id=()=>qr?[qn]:qo?[wo]:[],wp=ol?[ru,Wt]:[Wt];return Uo.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(cu?[]:["tox-editor-header--empty"]),...Tt},components:ie([$c?wp:[],id(),tp(e)?[]:[Z.asSpec()]]),sticky:E1(e),editor:e,sharedBackstage:Le.popup.shared})},at=()=>Uo.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Ct=()=>{const Tt=Uo.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Wt=Uo.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Tt,Wt]}},_t=()=>{const Tt=Hx(e),Wt=Qn(Cs(),Tt)&&Fo(Tt,"display")==="grid",wo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(k),attributes:{...tl.isRtl()?{dir:"rtl"}:{}}},behaviours:He([cc.config({useFixed:()=>r.isDocked(J)})])},qn={dom:{styles:{width:document.body.clientWidth+"px"}},events:Io([xe(Vl(),$c=>{Je($c.element,"width",document.body.clientWidth+"px")})])},qr=Ur(vo(wo,Wt?qn:{})),qo=S4(qr);return d.set(qo),{sink:qr,mothership:qo}},so=()=>{const Tt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(k),attributes:{...tl.isRtl()?{dir:"rtl"}:{}}},behaviours:He([cc.config({useFixed:()=>r.isDocked(J),getBounds:()=>t.getPopupSinkBounds()})])},Wt=Ur(Tt),wo=S4(Wt);return g.set(wo),{sink:Wt,mothership:wo}},wt=()=>{const Tt=Qt(),Wt=Ct(),wo=Uo.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Le.popup}),qn=Uo.parts.viewWrapper({backstage:Le.popup}),qr=n5(e)&&!n?v.some(sU(e,Le.popup.shared.providers)):v.none(),qo=ie([A?[]:[Tt],n?[]:[Wt],A?[Tt]:[]]),$c=Uo.parts.editorContainer({components:ie([qo,n?[]:[re.asSpec(),...qr.toArray()]])}),ol=Px(e),ru={role:"application",...tl.isRtl()?{dir:"rtl"}:{},...ol?{"aria-hidden":"true"}:{}},cu=Ur(Uo.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(n?["tox-tinymce-inline"]:[]).concat(A?["tox-tinymce--toolbar-bottom"]:[]).concat(k),styles:{visibility:"hidden",...ol?{opacity:"0",border:"0"}:{}},attributes:ru},components:[$c,...n?[]:[qn],wo],behaviours:He([fr(),Dt.config({disableClass:"tox-tinymce--disabled"}),St.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),id=S4(cu);return i.set(id),{mothership:id,outerContainer:cu}},Fn=Tt=>{const Wt=I3(qV(e)),wo=I3(KV(e));return e.inline||(Yr("div","width",wo)&&Je(Tt.element,"width",wo),Yr("div","height",Wt)?Je(Tt.element,"height",Wt):Je(Tt.element,"height","400px")),Wt},Ne=Tt=>{e.addShortcut("alt+F9","focus menubar",()=>{Uo.focusMenubar(Tt)}),e.addShortcut("alt+F10","focus toolbar",()=>{Uo.focusToolbar(Tt)}),e.addCommand("ToggleToolbarDrawer",(Wt,wo)=>{wo!=null&&wo.skipFocus?Uo.toggleToolbarDrawerWithoutFocusing(Tt):Uo.toggleToolbarDrawer(Tt)}),e.addQueryStateHandler("ToggleToolbarDrawer",()=>Uo.isToolbarDrawerToggled(Tt))},ct=Tt=>{const{mainUi:Wt,popupUi:wo,uiMotherships:qn}=Tt;an(UT(e),(ud,n0)=>{e.ui.registry.addGroupToolbarButton(n0,ud)});const{buttons:qr,menuItems:qo,contextToolbars:$c,sidebars:ol,views:ru}=e.ui.registry.getAll(),cu=Bx(e),id={menuItems:qo,menus:m5(e),menubar:GT(e),toolbar:cu.getOrThunk(()=>Zv(e)),allowToolbarGroups:B===wl.floating,buttons:qr,sidebar:ol,views:ru};Ne(Wt.outerContainer),mP(e,Wt.mothership,qn),r.setup(e,Le.popup.shared,J),qz(e,Le.popup),vZ(e,Le.popup.shared.getSink,Le.popup),gL(e),ML(e,Be,Le.popup.shared),kz(e,$c,wo.sink,{backstage:Le.popup}),YZ(e,wo.sink);const wp=e.getElement(),au=Fn(Wt.outerContainer),t0={targetNode:wp,height:au};return o.render(e,Tt,id,Le.popup,t0)},Rt=Tt=>(g.set(Tt.mothership),Tt),Tn=()=>{const Tt=wt(),Wt=_t(),wo=dm(e)?so():Rt(Wt);a.dialogUi.set(Wt),a.popupUi.set(wo),a.mainUi.set(Tt);const qn={popupUi:wo,dialogUi:Wt,mainUi:Tt,uiMotherships:a.getUiMotherships()};return ct(qn)};return{popups:{backstage:Le.popup,getMothership:()=>J_("popups",g)},dialogs:{backstage:Le.dialog,getMothership:()=>J_("dialogs",d)},renderUI:Tn}},cU=(e,t)=>{const n=C(e,"id").fold(()=>{const o=et("dialog-label");return Pt(t,"id",o),o},We);Pt(e,"aria-labelledby",n)},aU=$([Ce("lazySink"),oo("dragBlockClass"),Is("getBounds",tr),oe("useTabstopAt",gt),oe("firstTabstop",0),oe("eventOrder",{}),pr("modalBehaviours",[St]),Wc("onExecute"),nf("onEscape")]),J3={sketch:We},lU=$([jc({name:"draghandle",overrides:(e,t)=>({behaviours:He([Fg.config({mode:"mouse",getTarget:n=>bi(n,'[role="dialog"]').getOr(n),blockerClass:e.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])})}),Wr({schema:[Ce("dom")],name:"title"}),Wr({factory:J3,schema:[Ce("dom")],name:"close"}),Wr({factory:J3,schema:[Ce("dom")],name:"body"}),jc({factory:J3,schema:[Ce("dom")],name:"footer"}),Qa({factory:{sketch:(e,t)=>({...e,dom:t.dom,components:t.components})},schema:[oe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),oe("components",[])],name:"blocker"})]),iU=(e,t,n,o)=>{const r=On(),a=A=>{r.set(A);const B=e.lazySink(A).getOrDie(),Z=o.blocker(),re=B.getSystem().build({...Z,components:Z.components.concat([ra(A)]),behaviours:He([Ht.config({}),nn("dialog-blocker-events",[Lu($r(),()=>{Ei.isBlocked(A)?se():St.focusIn(A)})])])});Xu(B,re),St.focusIn(A)},i=A=>{r.clear(),Fs(A.element).each(B=>{A.getSystem().getByDom(B).each(Z=>{Gl(Z)})})},d=A=>Xi(A,e,"body"),g=A=>Ao(A,e,"footer"),b=(A,B)=>{Ei.block(A,B)},w=A=>{Ei.unblock(A)},x=et("modal-events"),k={...e.eventOrder,[Ta()]:[x].concat(e.eventOrder["alloy.system.attached"]||[])};return{uid:e.uid,dom:e.dom,components:t,apis:{show:a,hide:i,getBody:d,getFooter:g,setIdle:w,setBusy:b},eventOrder:k,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Ks(e.modalBehaviours,[Kt.config({}),St.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt,firstTabstop:e.firstTabstop}),Ei.config({getRoot:r.get}),nn(x,[Go(A=>{cU(A.element,Xi(A,e,"title").element)})])])}},vr=ac({name:"ModalDialog",configFields:aU(),partFields:lU(),factory:iU,apis:{show:(e,t)=>{e.show(t)},hide:(e,t)=>{e.hide(t)},getBody:(e,t)=>e.getBody(t),getFooter:(e,t)=>e.getFooter(t),setBusy:(e,t,n)=>{e.setBusy(t,n)},setIdle:(e,t)=>{e.setIdle(t)}}}),uU=xt([Ns,Gx].concat(op)),dU=Au,Q3=[Jx("button"),Sl,Sa("align","end",["start","end"]),t2,Jl,Fm("buttonType",["primary","secondary"])],Q_=[...Q3,sd],eC=[Za("type",["submit","cancel","custom"]),...Q_],mU=[Za("type",["menu"]),mm,Qv,Sl,Cc("items",uU),...Q3],gU=[...Q3,Za("type",["togglebutton"]),Ts("tooltip"),Sl,mm,mr("active",!1)],hU=or("type",{submit:eC,cancel:eC,custom:eC,menu:mU,togglebutton:gU}),pU=[Ns,sd,Za("level",["info","warn","error","success"]),F5,oe("url","")],fU=xt(pU),bU=e=>[Ns,e],vU=[Ns,sd,Jl,Jx("button"),Sl,MD,Fm("buttonType",["primary","secondary","toolbar"]),t2],yU=xt(vU),vp=[Ns,Gx],Oi=vp.concat([Kx]),wU=vp.concat([qx,Jl]),SU=xt(wU),xU=Au,CU=Oi.concat([R5("auto")]),TU=xt(CU),kU=Hi([A1,sd,F5]),EU=Oi.concat([wa("storageKey","default")]),OU=xt(EU),AU=nr,_U=xt(Oi),MU=nr,DU=vp.concat([wa("tag","textarea"),Ts("scriptId"),Ts("scriptUrl"),l0("settings",void 0)]),$U=vp.concat([wa("tag","textarea"),ta("init")]),FU=Ll(e=>as("customeditor.old",Vc($U),e).orThunk(()=>as("customeditor.new",Vc(DU),e))),RU=nr,BU=xt(Oi),IU=Vg(),HU=e=>[Ns,Ap("columns"),e],PU=[Ns,Ts("html"),Sa("presets","presentation",["presentation","document"])],LU=xt(PU),NU=Oi.concat([mr("border",!1),mr("sandboxed",!0),mr("streamContent",!1),mr("transparent",!0)]),VU=xt(NU),zU=nr,ZU=xt(vp.concat([dr("height")])),UU=xt([Ts("url"),mi("zoom"),mi("cachedWidth"),mi("cachedHeight")]),WU=Oi.concat([dr("inputMode"),dr("placeholder"),mr("maximized",!1),Jl]),jU=xt(WU),GU=nr,qU=e=>[Ns,qx,e,Sa("align","start",["start","center","end"])],KU=[sd,A1],YU=[sd,Cc("items",Zg("items",()=>e6))],e6=Pl([xt(KU),xt(YU)]),XU=Oi.concat([Cc("items",e6),Jl]),JU=xt(XU),QU=nr,eW=Oi.concat([Wg("items",[sd,A1]),gl("size",1),Jl]),tW=xt(eW),nW=nr,oW=Oi.concat([mr("constrain",!0),Jl]),sW=xt(oW),t6=xt([Ts("width"),Ts("height")]),rW=vp.concat([qx,gl("min",0),gl("max",0)]),cW=xt(rW),aW=Md,lW=[Ns,Cc("header",nr),Cc("cells",Hl(nr))],iW=xt(lW),uW=Oi.concat([dr("placeholder"),mr("maximized",!1),Jl]),dW=xt(uW),mW=nr,n6=[Za("type",["directory","leaf"]),$5,Ts("id"),Ua("menu",gA)],o6=xt(n6),gW=n6.concat([Cc("children",Zg("children",()=>ui("type",{directory:s6,leaf:o6})))]),s6=xt(gW),hW=ui("type",{directory:s6,leaf:o6}),pW=[Ns,Cc("items",hW),gi("onLeafAction"),gi("onToggleExpand"),na("defaultExpandedIds",[],nr),dr("defaultSelectedId")],fW=xt(pW),bW=Oi.concat([Sa("filetype","file",["image","media","file"]),Jl,dr("picker_text")]),vW=xt(bW),yW=xt([A1,Yx]),tC=e=>ur("items","items",Zr(),Hl(Ll(t=>as(`Checking item of ${e}`,nC,t).fold(n=>mn.error(di(n)),n=>mn.value(n))))),nC=$m(()=>ui("type",{alertbanner:fU,bar:xt(bU(tC("bar"))),button:yU,checkbox:SU,colorinput:OU,colorpicker:_U,dropzone:BU,grid:xt(HU(tC("grid"))),iframe:VU,input:jU,listbox:JU,selectbox:tW,sizeinput:sW,slider:cW,textarea:dW,urlinput:vW,customeditor:FU,htmlpanel:LU,imagepreview:ZU,collection:TU,label:xt(qU(tC("label"))),table:iW,tree:fW,panel:r6})),wW=[Ns,oe("classes",[]),Cc("items",nC)],r6=xt(wW),SW=[Jx("tab"),$5,Cc("items",nC)],xW=[Ns,Wg("tabs",SW)],CW=xt(xW),TW=Q_,kW=hU,EW=xt([Ts("title"),fc("body",ui("type",{panel:r6,tabpanel:CW})),wa("size","normal"),na("buttons",[],kW),oe("initialData",{}),Is("onAction",se),Is("onChange",se),Is("onSubmit",se),Is("onClose",se),Is("onCancel",se),Is("onTabChange",se)]),OW=e=>as("dialog",EW,e),AW=xt([Za("type",["cancel","custom"]),...TW]),_W=xt([Ts("title"),Ts("url"),mi("height"),mi("width"),Rm("buttons",AW),Is("onAction",se),Is("onCancel",se),Is("onClose",se),Is("onMessage",se)]),MW=e=>as("dialog",_W,e),oC=e=>$t(e)?[e].concat(Me(Do(e),oC)):Pn(e)?Me(e,oC):[],DW=e=>ye(e.type)&&ye(e.name),$W={checkbox:xU,colorinput:AU,colorpicker:MU,dropzone:IU,input:GU,iframe:zU,imagepreview:UU,selectbox:nW,sizeinput:t6,slider:aW,listbox:QU,size:t6,textarea:mW,urlinput:yW,customeditor:RU,collection:kU,togglemenuitem:dU},FW=e=>v.from($W[e.type]),RW=e=>Xt(oC(e),DW),BW=e=>{const t=RW(e),n=Me(t,o=>FW(o).fold(()=>[],r=>[fc(o.name,r)]));return xt(n)},c6=e=>{var t;const n=ya(OW(e)),o=BW(e),r=(t=e.initialData)!==null&&t!==void 0?t:{};return{internalDialog:n,dataValidator:o,initialData:r}},Rg={open:(e,t)=>{const n=c6(t);return e(n.internalDialog,n.initialData,n.dataValidator)},openUrl:(e,t)=>{const n=ya(MW(t));return e(n)},redial:e=>c6(e)};var IW=Object.freeze({__proto__:null,events:(e,t)=>{const n=(o,r)=>{e.updateState.each(a=>{const i=a(o,r);t.set(i)}),e.renderComponents.each(a=>{const i=a(r,t.get());(e.reuseDom?eT:QC)(o,i)})};return Io([xe(Bu(),(o,r)=>{const a=r;if(!a.universal){const i=e.channel;Sn(a.channels,i)&&n(o,a.data)}}),Go((o,r)=>{e.initialData.each(a=>{n(o,a)})})])}}),HW=Object.freeze({__proto__:null,getState:(e,t,n)=>n}),PW=[Ce("channel"),oo("renderComponents"),oo("updateState"),oo("initialData"),mr("reuseDom",!0)],LW=Object.freeze({__proto__:null,init:()=>{const e=m(v.none()),t=()=>e.set(v.none());return{readState:()=>e.get().getOr("none"),get:e.get,set:e.set,clear:t}}});const Ra=rr({fields:PW,name:"reflecting",active:IW,apis:HW,state:LW}),a6=e=>{const t=[],n={};return en(e,(o,r)=>{o.fold(()=>{t.push(r)},a=>{n[r]=a})}),t.length>0?mn.error(t):mn.value(n)},NW=(e,t,n)=>{const o=go(up.sketch(r=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:Ae(e.items,a=>kO(r,a,t,n))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[o.asSpec()]}],behaviours:He([St.config({mode:"acyclic",useTabstopAt:mt(U1)}),oi.memento(o),mB(o,{postprocess:r=>a6(r).fold(a=>(console.error(a),{}),We)}),nn("dialog-body-panel",[xe($r(),(r,a)=>{r.getSystem().broadcastOn([E2],{newFocus:v.some(a.event.target)})})])])}},VW=(e,t)=>({uid:e.uid,dom:e.dom,components:e.components,events:Hv(e.action),behaviours:Ks(e.tabButtonBehaviours,[Ht.config({}),St.config({mode:"execution",useSpace:!0,useEnter:!0}),Ye.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification}),zW=la({name:"TabButton",configFields:[oe("uid",void 0),Ce("value"),ur("dom","dom",wn(()=>({attributes:{role:"tab",id:et("aria"),"aria-selected":"false"}})),ec()),oo("action"),oe("domModification",{}),pr("tabButtonBehaviours",[Ht,St,Ye]),Ce("view")],factory:VW}),ZW=$([Ce("tabs"),Ce("dom"),oe("clickToDismiss",!1),pr("tabbarBehaviours",[no,St]),Uu(["tabClass","selectedClass"])]),UW=zh({factory:zW,name:"tabs",unit:"tab",overrides:e=>{const t=(o,r)=>{no.dehighlight(o,r),yt(o,g0(),{tabbar:o,button:r})},n=(o,r)=>{no.highlight(o,r),yt(o,m0(),{tabbar:o,button:r})};return{action:o=>{const r=o.getSystem().getByUid(e.uid).getOrDie(),a=no.isHighlighted(r,o);(a&&e.clickToDismiss?t:a?se:n)(r,o)},domModification:{classes:[e.markers.tabClass]}}}}),WW=$([UW]),jW=(e,t,n,o)=>({uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Ks(e.tabbarBehaviours,[no.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(r,a)=>{Pt(a.element,"aria-selected","true")},onDehighlight:(r,a)=>{Pt(a.element,"aria-selected","false")}}),St.config({mode:"flow",getInitial:r=>no.getHighlighted(r).map(a=>a.element),selector:"."+e.markers.tabClass,executeOnMove:!0})])}),l6=ac({name:"Tabbar",configFields:ZW(),partFields:WW(),factory:jW}),GW=(e,t)=>({uid:e.uid,dom:e.dom,behaviours:Ks(e.tabviewBehaviours,[Kt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),qW=la({name:"Tabview",configFields:[pr("tabviewBehaviours",[Kt])],factory:GW}),KW=$([oe("selectFirst",!0),Vn("onChangeTab"),Vn("onDismissTab"),oe("tabs",[]),pr("tabSectionBehaviours",[])]),YW=Wr({factory:l6,schema:[Ce("dom"),Nl("markers",[Ce("tabClass"),Ce("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),XW=Wr({factory:qW,name:"tabview"}),JW=$([YW,XW]),QW=(e,t,n,o)=>{const r=i=>{const d=Ye.getValue(i);Ao(i,e,"tabview").each(g=>{Q(e.tabs,w=>w.value===d).each(w=>{const x=w.view();C(i.element,"id").each(k=>{Pt(g.element,"aria-labelledby",k)}),Kt.set(g,x),e.onChangeTab(g,i,x)})})},a=(i,d)=>{Ao(i,e,"tabbar").each(g=>{d(g).each(Hu)})};return{uid:e.uid,dom:e.dom,components:t,behaviours:$h(e.tabSectionBehaviours),events:Io(ie([e.selectFirst?[Go((i,d)=>{a(i,no.getFirst)})]:[],[xe(m0(),(i,d)=>{const g=d.event.button;r(g)}),xe(g0(),(i,d)=>{const g=d.event.button;e.onDismissTab(i,g)})]])),apis:{getViewItems:i=>Ao(i,e,"tabview").map(d=>Kt.contents(d)).getOr([]),showTab:(i,d)=>{a(i,b=>{const w=no.getCandidates(b);return Q(w,k=>Ye.getValue(k)===d).filter(k=>!no.isHighlighted(b,k))})}}}},yp=ac({name:"TabSection",configFields:KW(),partFields:JW(),factory:QW,apis:{getViewItems:(e,t)=>e.getViewItems(t),showTab:(e,t,n)=>{e.showTab(t,n)}}}),ej=(e,t,n)=>Ae(e,(o,r)=>{Kt.set(n,e[r].view());const a=t.dom.getBoundingClientRect();return Kt.set(n,[]),a.height}),tj=e=>Bt(bt(e,(t,n)=>t>n?-1:t<n?1:0)),nj=(e,t,n)=>{const o=yr(e).dom,r=bi(e,".tox-dialog-wrap").getOr(e),a=Fo(r,"position")==="fixed";let i;a?i=Math.max(o.clientHeight,window.innerHeight):i=Math.max(o.offsetHeight,o.scrollHeight);const d=Ro(t),b=t.dom.offsetLeft>=n.dom.offsetLeft+M(n)?Math.max(Ro(n),d):d,w=parseInt(Fo(e,"margin-top"),10)||0,x=parseInt(Fo(e,"margin-bottom"),10)||0,A=Ro(e)+w+x-b;return i-A},oj=(e,t)=>{Bt(e).each(n=>yp.showTab(t,n.value))},i6=(e,t)=>{Je(e,"height",t+"px"),Je(e,"flex-basis",t+"px")},ty=(e,t,n)=>{bi(e,'[role="dialog"]').each(o=>{As(o,'[role="tablist"]').each(r=>{n.get().map(a=>(Je(t,"height","0"),Je(t,"flex-basis","0"),Math.min(a,nj(o,t,r)))).each(a=>{i6(t,a)})})})},sC=e=>As(e,'[role="tabpanel"]'),sj=e=>{const t=On();return{extraEvents:[Go(r=>{const a=r.element;sC(a).each(i=>{Je(i,"visibility","hidden"),r.getSystem().getByDom(i).toOptional().each(d=>{const g=ej(e,i,d);tj(g).fold(t.clear,t.set)}),ty(a,i,t),Nn(i,"visibility"),oj(e,r),requestAnimationFrame(()=>{ty(a,i,t)})})}),xe(Vl(),r=>{const a=r.element;sC(a).each(i=>{ty(a,i,t)})}),xe(Qk,(r,a)=>{const i=r.element;sC(i).each(d=>{const g=Wl(le(d));Je(d,"visibility","hidden");const b=bo(d,"height").map(k=>parseInt(k,10));Nn(d,"height"),Nn(d,"flex-basis");const w=d.dom.getBoundingClientRect().height;b.forall(k=>w>k)?(t.set(w),ty(i,d,t)):b.each(k=>{i6(d,k)}),Nn(d,"visibility"),g.each(aa)})})],selectFirst:!1}},u6="send-data-to-section",d6="send-data-to-view",rj=(e,t,n)=>{const o=m({}),r=b=>{const w=Ye.getValue(b),x=a6(w).getOr({}),k=o.get(),A=vo(k,x);o.set(A)},a=b=>{const w=o.get();Ye.setValue(b,w)},i=m(null),d=Ae(e.tabs,b=>({value:b.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Os(n.shared.providers.translate(b.title))],view:()=>[up.sketch(w=>({dom:{tag:"div",classes:["tox-form"]},components:Ae(b.items,x=>kO(w,x,t,n)),formBehaviours:He([St.config({mode:"acyclic",useTabstopAt:mt(U1)}),nn("TabView.form.events",[Go(a),zl(r)]),_c.config({channels:Lt([{key:u6,value:{onReceive:r}},{key:d6,value:{onReceive:a}}])})])}))]})),g=sj(d);return yp.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(b,w,x)=>{const k=Ye.getValue(w);yt(b,Jk,{name:k,oldName:i.get()}),i.set(k)},tabs:d,components:[yp.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[l6.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:He([gs.config({})])}),yp.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:g.selectFirst,tabSectionBehaviours:He([nn("tabpanel",g.extraEvents),St.config({mode:"acyclic"}),Dn.config({find:b=>Bt(yp.getViewItems(b))}),Ag(v.none(),b=>(b.getSystem().broadcastOn([u6],{}),o.get()),(b,w)=>{o.set(w),b.getSystem().broadcastOn([d6],{})})])})},m6=(e,t,n,o,r)=>{const a=g=>{const b=g.body;switch(b.type){case"tabpanel":return[rj(b,g.initialData,o)];default:return[NW(b,g.initialData,o)]}},i=(g,b)=>v.some({isTabPanel:()=>b.body.type==="tabpanel"}),d={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...n.map(g=>({id:g})).getOr({}),...r?d:{}}},components:[],behaviours:He([oi.childAt(0),Ra.config({channel:`${ZE}-${t}`,updateState:i,renderComponents:a,initialData:e})])}},cj=(e,t,n,o,r)=>m6(e,t,v.some(n),o,r),aj=(e,t,n)=>{const o=m6(e,t,v.none(),n,!1);return vr.parts.body(o)},lj=e=>{const t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[NE(v.none(),{dom:{tag:"iframe",attributes:{src:e.url}},behaviours:He([gs.config({}),Ht.config({})])})]}],behaviours:He([St.config({mode:"acyclic",useTabstopAt:mt(U1)})])};return vr.parts.body(t)},ij=Qh.deviceType.isTouch(),g6=(e,t)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}),h6=(e,t)=>vr.parts.close(Gr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:He([gs.config({})])})),p6=()=>vr.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),f6=(e,t)=>vr.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:nd(`<p>${$T(t.translate(e))}</p>`)}]}]}),b6=e=>vr.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),v6=(e,t)=>[Ti.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),Ti.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})],rC=e=>{const t="tox-dialog",n=t+"-wrap",o=n+"__backdrop",r=t+"__disable-scroll";return vr.sketch({lazySink:e.lazySink,onEscape:a=>(e.onEscape(a),v.some(!0)),useTabstopAt:a=>!U1(a),firstTabstop:e.firstTabstop,dom:{tag:"div",classes:[t].concat(e.extraClasses),styles:{position:"relative",...e.extraStyles}},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:nd(`<div class="${n}"></div>`),components:[{dom:{tag:"div",classes:ij?[o,o+"--opaque"]:[o]}}]}},dragBlockClass:n,modalBehaviours:He([Ht.config({}),nn("dialog-events",e.dialogEvents.concat([Lu($r(),(a,i)=>{Ei.isBlocked(a)?se():St.focusIn(a)}),xe(Yg(),(a,i)=>{a.getSystem().broadcastOn([E2],{newFocus:i.event.newFocus})})])),nn("scroll-lock",[Go(()=>{Es(Cs(),r)}),zl(()=>{ys(Cs(),r)})]),...e.extraBehaviours]),eventOrder:{[zc()]:["dialog-events"],[Ta()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Iu()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...e.eventOrder}})},y6=e=>Gr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},buttonBehaviours:He([gs.config({})]),components:[Xl("close",{tag:"span",classes:["tox-icon"]},e.icons)],action:t=>{to(t,bm)}}),w6=(e,t,n,o)=>{const r=a=>[Os(o.translate(a.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...n.map(a=>({id:a})).getOr({})}},components:[],behaviours:He([Ra.config({channel:`${zE}-${t}`,initialData:e,renderComponents:r})])}},S6=()=>({dom:nd('<div class="tox-dialog__draghandle"></div>')}),uj=(e,t,n,o)=>Ti.sketch({dom:nd('<div class="tox-dialog__header"></div>'),components:[w6(e,t,v.some(n),o),S6(),y6(o)],containerBehaviours:He([Fg.config({mode:"mouse",blockerClass:"blocker",getTarget:r=>fl(r,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),dj=(e,t,n)=>{const o=vr.parts.title(w6(e,t,v.none(),n)),r=vr.parts.draghandle(S6()),a=vr.parts.close(y6(n)),i=[o].concat(e.draggable?[r]:[]).concat([a]);return Ti.sketch({dom:nd('<div class="tox-dialog__header"></div>'),components:i})},x6=(e,t,n)=>dj({title:n.shared.providers.translate(e),draggable:n.dialog.isDraggableModal()},t,n.shared.providers),C6=(e,t,n,o)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${o.getOr(0)}px`,position:"absolute"}},behaviours:t,components:[{dom:nd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),T6=(e,t,n)=>({onClose:()=>n.closeWindow(),onBlock:o=>{const r=As(e().element,".tox-dialog__header").map(a=>Ro(a));vr.setBusy(e(),(a,i)=>C6(o.message,i,t,r))},onUnblock:()=>{vr.setIdle(e())}}),k6="tox-dialog--fullscreen",cC="tox-dialog--width-lg",aC="tox-dialog--width-md",ny=e=>{switch(e){case"large":return v.some(cC);case"medium":return v.some(aC);default:return v.none()}},E6=(e,t)=>{const n=q.fromDom(t.element.dom);Tc(n,k6)||(sa(n,[cC,aC]),ny(e).each(o=>Es(n,o)))},O6=(e,t)=>{const n=q.fromDom(e.element.dom),o=ah(n),r=Q(o,a=>a===cC||a===aC).or(ny(t));qp(n,[k6,...r.toArray()])},A6=(e,t,n)=>Ur(rC({...e,firstTabstop:1,lazySink:n.shared.getSink,extraBehaviours:[T2({}),...e.extraBehaviours],onEscape:o=>{to(o,bm)},dialogEvents:t,eventOrder:{[Bu()]:[Ra.name(),_c.name()],[Ta()]:["scroll-lock",Ra.name(),"messages","dialog-events","alloy.base.behaviour"],[Iu()]:["alloy.base.behaviour","dialog-events","messages",Ra.name(),"scroll-lock"]}})),lC=(e,t={})=>{const n=o=>{const r=Ae(o.items,a=>{const i=Xe(t,a.name).getOr(m(!1));return{...a,storage:i}});return{...o,items:r}};return Ae(e,o=>o.type==="menu"?n(o):o)},_6=e=>En(e,(t,n)=>n.type==="menu"?En(n.items,(r,a)=>(r[a.name]=a.storage,r),t):t,{}),M6=(e,t)=>[Hp($r(),kB),e(N1,(n,o,r,a)=>{Wl(le(a.element)).fold(se,Gd),t.onClose(),o.onClose()}),e(bm,(n,o,r,a)=>{o.onCancel(n),to(a,N1)}),xe(C4,(n,o)=>t.onUnblock()),xe(x4,(n,o)=>t.onBlock(o.event))],mj=(e,t)=>{const n=(r,a)=>xe(r,(i,d)=>{o(i,(g,b)=>{a(e(),g,d.event,i)})}),o=(r,a)=>{Ra.getState(r).get().each(i=>{a(i,r)})};return[...M6(n,t),n(eu,(r,a,i)=>{a.onAction(r,{name:i.name})})]},D6=(e,t,n)=>{const o=(a,i)=>xe(a,(d,g)=>{r(d,(b,w)=>{i(e(),b,g.event,d)})}),r=(a,i)=>{Ra.getState(a).get().each(d=>{i(d.internalDialog,a)})};return[...M6(o,t),o(V1,(a,i)=>i.onSubmit(a)),o($a,(a,i,d)=>{i.onChange(a,{name:d.name})}),o(eu,(a,i,d,g)=>{const b=()=>g.getSystem().isConnected()?St.focusIn(g):void 0,w=A=>F(A,"disabled")||C(A,"aria-disabled").exists(B=>B==="true"),x=le(g.element),k=Wl(x);i.onAction(a,{name:d.name,value:d.value}),Wl(x).fold(b,A=>{w(A)||k.exists(B=>bs(A,B)&&w(B))?b():n().toOptional().filter(B=>!bs(B.element,A)).each(b)})}),o(Jk,(a,i,d)=>{i.onTabChange(a,{newTabName:d.name,oldTabName:d.oldName})}),zl(a=>{const i=e();Ye.setValue(a,i.getData())})]},gj=(e,t)=>M2(e,e.type,t),hj=(e,t,n)=>Q(t,o=>o.name===n).bind(o=>o.memento.getOpt(e)),pj=(e,t)=>{const n=t.map(d=>d.footerButtons).getOr([]),o=Wo(n,d=>d.align==="start"),r=(d,g)=>Ti.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${d}`]},components:Ae(g,b=>b.memento.asSpec())}),a=r("start",o.pass),i=r("end",o.fail);return[a,i]},$6=(e,t,n)=>{const o=(r,a)=>{const i=Ae(a.buttons,g=>{const b=go(gj(g,n));return{name:g.name,align:g.align,memento:b}}),d=g=>hj(r,i,g);return v.some({lookupByName:d,footerButtons:i})};return{dom:nd('<div class="tox-dialog__footer"></div>'),components:[],behaviours:He([Ra.config({channel:`${UE}-${t}`,initialData:e,updateState:o,renderComponents:pj})])}},fj=(e,t,n)=>$6(e,t,n),F6=(e,t,n)=>vr.parts.footer($6(e,t,n)),R6=(e,t)=>{if(e.getRoot().getSystem().isConnected()){const o=Dn.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return up.getField(o,t).orThunk(()=>e.getFooter().bind(i=>Ra.getState(i).get()).bind(i=>i.lookupByName(t)))}else return v.none()},bj=(e,t)=>{const n=e.getRoot();return Ra.getState(n).get().map(o=>ya(as("data",o.dataValidator,t))).getOr(t)},B6=(e,t,n)=>{const o=B=>{const Z=e.getRoot();Z.getSystem().isConnected()&&B(Z)},A={getData:()=>{const B=e.getRoot(),Z=B.getSystem().isConnected()?e.getFormWrapper():B,re=Ye.getValue(Z),J=an(n,K=>K.get());return{...re,...J}},setData:B=>{o(Z=>{const re=A.getData(),J=vo(re,B),K=bj(e,J),ce=e.getFormWrapper();Ye.setValue(ce,K),en(n,(ke,be)=>{Cn(J,be)&&ke.set(J[be])})})},setEnabled:(B,Z)=>{R6(e,B).each(Z?Dt.enable:Dt.disable)},focus:B=>{R6(e,B).each(Ht.focus)},block:B=>{if(!ye(B))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o(Z=>{yt(Z,x4,{message:B})})},unblock:()=>{o(B=>{to(B,C4)})},showTab:B=>{o(Z=>{const re=e.getBody();Ra.getState(re).get().exists(K=>K.isTabPanel())&&Dn.getCurrent(re).each(K=>{yp.showTab(K,B)})})},redial:B=>{o(Z=>{const re=e.getId(),J=t(B),K=lC(J.internalDialog.buttons,n);Z.getSystem().broadcastOn([`${k2}-${re}`],J),Z.getSystem().broadcastOn([`${zE}-${re}`],J.internalDialog),Z.getSystem().broadcastOn([`${ZE}-${re}`],J.internalDialog),Z.getSystem().broadcastOn([`${UE}-${re}`],{...J.internalDialog,buttons:K}),A.setData(J.initialData)})},close:()=>{o(B=>{to(B,N1)})},toggleFullscreen:e.toggleFullscreen};return A},vj=(e,t,n)=>{const o=et("dialog"),r=e.internalDialog,a=x6(r.title,o,n),i=m(r.size),d=ny(i.get()).toArray(),g=(K,ce)=>(i.set(ce.internalDialog.size),E6(ce.internalDialog.size,K),v.some(ce)),b=aj({body:r.body,initialData:r.initialData},o,n),w=lC(r.buttons),x=_6(w),k=$s(w.length!==0,F6({buttons:w},o,n)),A=D6(()=>J,T6(()=>Z,n.shared.providers,t),n.shared.getSink),B={id:o,header:a,body:b,footer:k,extraClasses:d,extraBehaviours:[Ra.config({channel:`${k2}-${o}`,updateState:g,initialData:e})],extraStyles:{}},Z=A6(B,A,n),re=(()=>{const K=()=>{const ke=vr.getBody(Z);return Dn.getCurrent(ke).getOr(ke)},ce=()=>{O6(Z,i.get())};return{getId:$(o),getRoot:$(Z),getBody:()=>vr.getBody(Z),getFooter:()=>vr.getFooter(Z),getFormWrapper:K,toggleFullscreen:ce}})(),J=B6(re,t.redial,x);return{dialog:Z,instanceApi:J}},I6=(e,t,n,o=!1,r)=>{const a=et("dialog"),i=et("dialog-label"),d=et("dialog-content"),g=e.internalDialog,b=m(g.size),w=ny(b.get()).toArray(),x=(he,Be)=>(b.set(Be.internalDialog.size),E6(Be.internalDialog.size,he),r(),v.some(Be)),k=go(uj({title:g.title,draggable:!0},a,i,n.shared.providers)),A=go(cj({body:g.body,initialData:g.initialData},a,d,n,o)),B=lC(g.buttons),Z=_6(B),re=$s(B.length!==0,go(fj({buttons:B},a,n))),J=D6(()=>be,{onBlock:he=>{Ei.block(ce,(Be,Le)=>{const Qt=k.getOpt(ce).map(at=>Ro(at.element));return C6(he.message,Le,n.shared.providers,Qt)})},onUnblock:()=>{Ei.unblock(ce)},onClose:()=>t.closeWindow()},n.shared.getSink),ce=Ur({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...w],attributes:{role:"dialog","aria-labelledby":i}},eventOrder:{[Bu()]:[Ra.name(),_c.name()],[zc()]:["execute-on-form"],[Ta()]:["reflecting","execute-on-form"]},behaviours:He([St.config({mode:"cyclic",onEscape:he=>(to(he,N1),v.some(!0)),useTabstopAt:he=>!U1(he)&&(lo(he)!=="button"||$o(he,"disabled")!=="disabled"),firstTabstop:1}),Ra.config({channel:`${k2}-${a}`,updateState:x,initialData:e}),Ht.config({}),nn("execute-on-form",J.concat([Lu($r(),(he,Be)=>{St.focusIn(he)}),xe(Yg(),(he,Be)=>{he.getSystem().broadcastOn([E2],{newFocus:Be.event.newFocus})})])),Ei.config({getRoot:()=>v.some(ce)}),Kt.config({}),T2({})]),components:[k.asSpec(),A.asSpec(),...re.map(he=>he.asSpec()).toArray()]}),ke=()=>{O6(ce,b.get())},be=B6({getId:$(a),getRoot:$(ce),getFooter:()=>re.map(he=>he.get(ce)),getBody:()=>A.get(ce),getFormWrapper:()=>{const he=A.get(ce);return Dn.getCurrent(he).getOr(he)},toggleFullscreen:ke},t.redial,Z);return{dialog:ce,instanceApi:be}};var iC=tinymce.util.Tools.resolve("tinymce.util.URI");const yj=e=>{const t=i=>{e.getSystem().isConnected()&&i(e)};return{block:i=>{if(!ye(i))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t(d=>{yt(d,x4,{message:i})})},unblock:()=>{t(i=>{to(i,C4)})},close:()=>{t(i=>{to(i,N1)})},sendMessage:i=>{t(d=>{d.getSystem().broadcastOn([WE],i)})}}},wj=["insertContent","setContent","execCommand","close","block","unblock"],H6=e=>$t(e)&&wj.indexOf(e.mceAction)!==-1,Sj=e=>!H6(e)&&$t(e)&&Cn(e,"mceAction"),xj=(e,t,n)=>{switch(n.mceAction){case"insertContent":e.insertContent(n.content);break;case"setContent":e.setContent(n.content);break;case"execCommand":const o=pt(n.ui)?n.ui:!1;e.execCommand(n.cmd,o,n.value);break;case"close":t.close();break;case"block":t.block(n.message);break;case"unblock":t.unblock();break}},Cj=(e,t,n,o)=>{const r=et("dialog"),a=x6(e.title,r,o),i=lj(e),d=e.buttons.bind(ce=>ce.length===0?v.none():v.some(F6({buttons:ce},r,o))),g=mj(()=>K,T6(()=>J,o.shared.providers,t)),b={...e.height.fold(()=>({}),ce=>({height:ce+"px","max-height":ce+"px"})),...e.width.fold(()=>({}),ce=>({width:ce+"px","max-width":ce+"px"}))},w=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],x=new iC(e.url,{base_uri:new iC(window.location.href)}),k=`${x.protocol}://${x.host}${x.port?":"+x.port:""}`,A=vi(),B=(ce,ke)=>v.some(ke),Z=[Ra.config({channel:`${k2}-${r}`,updateState:B,initialData:e}),nn("messages",[Go(()=>{const ce=rc(q.fromDom(window),"message",ke=>{if(x.isSameOrigin(new iC(ke.raw.origin))){const be=ke.raw.data;H6(be)?xj(n,K,be):Sj(be)&&e.onMessage(K,be)}});A.set(ce)}),zl(A.clear)]),_c.config({channels:{[WE]:{onReceive:(ce,ke)=>{As(ce.element,"iframe").each(be=>{const he=be.dom.contentWindow;rn(he)&&he.postMessage(ke,k)})}}}})],J=A6({id:r,header:a,body:i,footer:d,extraClasses:w,extraBehaviours:Z,extraStyles:b},g,o),K=yj(J);return{dialog:J,instanceApi:K}},Tj=e=>{const t=e.shared;return{open:(o,r)=>{const a=()=>{vr.hide(b),r()},i=go(M2({name:"close-alert",text:"OK",primary:!0,buttonType:v.some("primary"),align:"end",enabled:!0,icon:v.none()},"cancel",e)),d=p6(),g=h6(a,t.providers),b=Ur(rC({lazySink:()=>t.getSink(),header:g6(d,g),body:f6(o,t.providers),footer:v.some(b6(v6([],[i.asSpec()]))),onEscape:a,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[xe(bm,a)],eventOrder:{}}));vr.show(b);const w=i.get(b);Ht.focus(w)}}},kj=e=>{const t=e.shared;return{open:(o,r)=>{const a=k=>{vr.hide(w),r(k)},i=go(M2({name:"yes",text:"Yes",primary:!0,buttonType:v.some("primary"),align:"end",enabled:!0,icon:v.none()},"submit",e)),d=M2({name:"no",text:"No",primary:!1,buttonType:v.some("secondary"),align:"end",enabled:!0,icon:v.none()},"cancel",e),g=p6(),b=h6(()=>a(!1),t.providers),w=Ur(rC({lazySink:()=>t.getSink(),header:g6(g,b),body:f6(o,t.providers),footer:v.some(b6(v6([],[d,i.asSpec()]))),onEscape:()=>a(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[xe(bm,()=>a(!1)),xe(V1,()=>a(!0))],eventOrder:{}}));vr.show(w);const x=i.get(w);Ht.focus(x)}}},P6=(e,t)=>ya(as("data",t,e)),L6=e=>H1(e,".tox-alert-dialog")||H1(e,".tox-confirm-dialog"),Ej=(e,t,n)=>t&&n?[]:[Ps.config({contextual:{lazyContext:()=>v.some(Rs(q.fromDom(e.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:o=>Cg(e,o.element).map(a=>({bounds:lp(a),optScrollEnv:v.some({currentScrollTop:a.element.dom.scrollTop,scrollElmTop:Or(a.element).top})})).getOrThunk(()=>({bounds:tr(),optScrollEnv:v.none()}))})],Oj=e=>{const t=e.editor,n=E1(t),o=Tj(e.backstages.dialog),r=kj(e.backstages.dialog),a=(B,Z,re)=>{if(!Vt(Z)){if(Z.inline==="toolbar")return b(B,e.backstages.popup.shared.anchors.inlineDialog(),re,Z);if(Z.inline==="bottom")return w(B,e.backstages.popup.shared.anchors.inlineBottomDialog(),re,Z);if(Z.inline==="cursor")return b(B,e.backstages.popup.shared.anchors.cursor(),re,Z)}return g(B,re)},i=(B,Z)=>d(B,Z),d=(B,Z)=>{const re=J=>{const K=Cj(J,{closeWindow:()=>{vr.hide(K.dialog),Z(K.instanceApi)}},t,e.backstages.dialog);return vr.show(K.dialog),K.instanceApi};return Rg.openUrl(re,B)},g=(B,Z)=>{const re=(J,K,ce)=>{const ke=K,he=vj({dataValidator:ce,initialData:ke,internalDialog:J},{redial:Rg.redial,closeWindow:()=>{vr.hide(he.dialog),Z(he.instanceApi)}},e.backstages.dialog);return vr.show(he.dialog),he.instanceApi.setData(ke),he.instanceApi};return Rg.open(re,B)},b=(B,Z,re,J)=>{const K=(ce,ke,be)=>{const he=P6(ke,be),Be=On(),Le=e.backstages.popup.shared.header.isPositionedAtTop(),Qt={dataValidator:be,initialData:he,internalDialog:ce},at=()=>Be.on(wt=>{ms.reposition(wt),(!n||!Le)&&Ps.refresh(wt)}),Ct=I6(Qt,{redial:Rg.redial,closeWindow:()=>{Be.on(ms.hide),t.off("ResizeEditor",at),Be.clear(),re(Ct.instanceApi)}},e.backstages.popup,J.ariaAttrs,at),_t=Ur(ms.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:J.persistent?{event:"doNotDismissYet"}:{},...Le?{}:{fireRepositionEventInstead:{}},inlineBehaviours:He([nn("window-manager-inline-events",[xe(Zi(),(wt,Fn)=>{to(Ct.dialog,bm)})]),...Ej(t,n,Le)]),isExtraPart:(wt,Fn)=>L6(Fn)}));Be.set(_t);const so=()=>{const wt=t.inline?Cs():q.fromDom(t.getContainer()),Fn=Rs(wt);return v.some(Fn)};return ms.showWithinBounds(_t,ra(Ct.dialog),{anchor:Z},so),(!n||!Le)&&(Ps.refresh(_t),t.on("ResizeEditor",at)),Ct.instanceApi.setData(he),St.focusIn(Ct.dialog),Ct.instanceApi};return Rg.open(K,B)},w=(B,Z,re,J)=>{const K=(ce,ke,be)=>{const he=P6(ke,be),Be=On(),Le=e.backstages.popup.shared.header.isPositionedAtTop(),Qt={dataValidator:be,initialData:he,internalDialog:ce},at=()=>Be.on(wt=>{ms.reposition(wt),Ps.refresh(wt)}),Ct=I6(Qt,{redial:Rg.redial,closeWindow:()=>{Be.on(ms.hide),t.off("ResizeEditor ScrollWindow ElementScroll",at),Be.clear(),re(Ct.instanceApi)}},e.backstages.popup,J.ariaAttrs,at),_t=Ur(ms.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:J.persistent?{event:"doNotDismissYet"}:{},...Le?{}:{fireRepositionEventInstead:{}},inlineBehaviours:He([nn("window-manager-inline-events",[xe(Zi(),(wt,Fn)=>{to(Ct.dialog,bm)})]),Ps.config({contextual:{lazyContext:()=>v.some(Rs(q.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:wt=>Cg(t,wt.element).map(Ne=>({bounds:lp(Ne),optScrollEnv:v.some({currentScrollTop:Ne.element.dom.scrollTop,scrollElmTop:Or(Ne.element).top})})).getOrThunk(()=>({bounds:tr(),optScrollEnv:v.none()}))})]),isExtraPart:(wt,Fn)=>L6(Fn)}));Be.set(_t);const so=()=>e.backstages.popup.shared.getSink().toOptional().bind(wt=>{const Fn=Cg(t,wt.element),Ne=15,ct=Fn.map(Tt=>lp(Tt)).getOr(tr()),Rt=Rs(q.fromDom(t.getContentAreaContainer())),Tn=Fi(Rt,ct);return v.some(es(Tn.x,Tn.y,Tn.width,Tn.height-Ne))});return ms.showWithinBounds(_t,ra(Ct.dialog),{anchor:Z},so),Ps.refresh(_t),t.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",at),Ct.instanceApi.setData(he),St.focusIn(Ct.dialog),Ct.instanceApi};return Rg.open(K,B)};return{open:a,openUrl:i,alert:(B,Z)=>{o.open(B,Z)},close:B=>{B.close()},confirm:(B,Z)=>{r.open(B,Z)}}},Aj=e=>{HT(e),oF(e),Yz(e)};var _j=()=>{Dl.add("silver",e=>{Aj(e);let t=()=>tr();const{dialogs:n,popups:o,renderUI:r}=rU(e,{getPopupSinkBounds:()=>t()}),a=()=>{const g=r();return Cg(e,o.getMothership().element).each(w=>{t=()=>lp(w)}),g};sR.register(e,o.backstage.shared);const i=Oj({editor:e,backstages:{popup:o.backstage,dialog:n.backstage}}),d=()=>G7(e,{backstage:o.backstage},o.getMothership());return{renderUI:a,getWindowManagerImpl:$(i),getNotificationManagerImpl:d}})};_j()})();const fq=ma({__proto__:null,default:lM},[lM]);(function(){var Po=tinymce.util.Tools.resolve("tinymce.ModelManager");const Lo=(s,c,l)=>{var u;return l(s,c.prototype)?!0:((u=s.constructor)===null||u===void 0?void 0:u.name)===c.name},So=s=>{const c=typeof s;return s===null?"null":c==="object"&&Array.isArray(s)?"array":c==="object"&&Lo(s,String,(l,u)=>u.isPrototypeOf(l))?"string":c},zn=s=>c=>So(c)===s,Rn=s=>c=>typeof c===s,io=s=>c=>s===c,sn=zn("string"),ye=zn("object"),$t=zn("array"),An=io(null),Pn=Rn("boolean"),Zn=io(void 0),pt=s=>s==null,Vt=s=>!pt(s),yn=Rn("function"),rn=Rn("number"),Re=()=>{},jt=(s,c)=>(...l)=>s(c.apply(null,l)),tt=(s,c)=>l=>s(c(l)),se=s=>()=>s,ze=s=>s,mo=(s,c)=>s===c;function Ke(s,...c){return(...l)=>{const u=c.concat(l);return s.apply(null,u)}}const $=s=>c=>!s(c),We=s=>()=>{throw new Error(s)},Ft=s=>s(),on=se(!1),mt=se(!0);class Y{constructor(c,l){this.tag=c,this.value=l}static some(c){return new Y(!0,c)}static none(){return Y.singletonNone}fold(c,l){return this.tag?l(this.value):c()}isSome(){return this.tag}isNone(){return!this.tag}map(c){return this.tag?Y.some(c(this.value)):Y.none()}bind(c){return this.tag?c(this.value):Y.none()}exists(c){return this.tag&&c(this.value)}forall(c){return!this.tag||c(this.value)}filter(c){return!this.tag||c(this.value)?this:Y.none()}getOr(c){return this.tag?this.value:c}or(c){return this.tag?this:c}getOrThunk(c){return this.tag?this.value:c()}orThunk(c){return this.tag?this:c()}getOrDie(c){if(this.tag)return this.value;throw new Error(c??"Called getOrDie on None")}static from(c){return Vt(c)?Y.some(c):Y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(c){this.tag&&c(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Y.singletonNone=new Y(!1);const Jn=Array.prototype.slice,Te=Array.prototype.indexOf,gt=Array.prototype.push,v=(s,c)=>Te.call(s,c),Gt=(s,c)=>v(s,c)>-1,Un=(s,c)=>{for(let l=0,u=s.length;l<u;l++){const p=s[l];if(c(p,l))return!0}return!1},To=(s,c)=>{const l=[];for(let u=0;u<s;u++)l.push(c(u));return l},st=(s,c)=>{const l=s.length,u=new Array(l);for(let p=0;p<l;p++){const y=s[p];u[p]=c(y,p)}return u},kt=(s,c)=>{for(let l=0,u=s.length;l<u;l++){const p=s[l];c(p,l)}},Sn=(s,c)=>{for(let l=s.length-1;l>=0;l--){const u=s[l];c(u,l)}},Kn=(s,c)=>{const l=[],u=[];for(let p=0,y=s.length;p<y;p++){const T=s[p];(c(T,p)?l:u).push(T)}return{pass:l,fail:u}},Yt=(s,c)=>{const l=[];for(let u=0,p=s.length;u<p;u++){const y=s[u];c(y,u)&&l.push(y)}return l},Mo=(s,c,l)=>(Sn(s,(u,p)=>{l=c(l,u,p)}),l),Ae=(s,c,l)=>(kt(s,(u,p)=>{l=c(l,u,p)}),l),Ve=(s,c,l)=>{for(let u=0,p=s.length;u<p;u++){const y=s[u];if(c(y,u))return Y.some(y);if(l(y,u))break}return Y.none()},Ln=(s,c)=>Ve(s,c,on),Wo=(s,c)=>{for(let l=0,u=s.length;l<u;l++){const p=s[l];if(c(p,l))return Y.some(l)}return Y.none()},Xt=s=>{const c=[];for(let l=0,u=s.length;l<u;++l){if(!$t(s[l]))throw new Error("Arr.flatten item "+l+" was not an array, input: "+s);gt.apply(c,s[l])}return c},gn=(s,c)=>Xt(st(s,c)),En=(s,c)=>{for(let l=0,u=s.length;l<u;++l){const p=s[l];if(c(p,l)!==!0)return!1}return!0},Vs=s=>{const c=Jn.call(s,0);return c.reverse(),c},Q=(s,c)=>{const l={};for(let u=0,p=s.length;u<p;u++){const y=s[u];l[String(y)]=c(y,u)}return l},ne=(s,c)=>{const l=Jn.call(s,0);return l.sort(c),l},ie=(s,c)=>c>=0&&c<s.length?Y.some(s[c]):Y.none(),Me=s=>ie(s,0),Pe=s=>ie(s,s.length-1),un=(s,c)=>{for(let l=0;l<s.length;l++){const u=c(s[l],l);if(u.isSome())return u}return Y.none()},Wn=Object.keys,Fe=Object.hasOwnProperty,Ee=(s,c)=>{const l=Wn(s);for(let u=0,p=l.length;u<p;u++){const y=l[u],T=s[y];c(T,y)}},bt=(s,c)=>Mt(s,(l,u)=>({k:u,v:c(l,u)})),Mt=(s,c)=>{const l={};return Ee(s,(u,p)=>{const y=c(u,p);l[y.k]=y.v}),l},Bt=s=>(c,l)=>{s[l]=c},Bn=(s,c,l,u)=>{Ee(s,(p,y)=>{(c(p,y)?l:u)(p,y)})},ko=(s,c)=>{const l={};return Bn(s,c,Bt(l),Re),l},xn=(s,c)=>{const l=[];return Ee(s,(u,p)=>{l.push(c(u,p))}),l},cn=s=>xn(s,ze),ro=(s,c)=>en(s,c)?Y.from(s[c]):Y.none(),en=(s,c)=>Fe.call(s,c),an=(s,c)=>en(s,c)&&s[c]!==void 0&&s[c]!==null,_n=s=>{for(const c in s)if(Fe.call(s,c))return!1;return!0},hn=typeof window<"u"?window:Function("return this;")(),po=(s,c)=>{let l=c??hn;for(let u=0;u<s.length&&l!==void 0&&l!==null;++u)l=l[s[u]];return l},zs=(s,c)=>{const l=s.split(".");return po(l,c)},ws=(s,c)=>zs(s,c),hs=(s,c)=>{const l=ws(s,c);if(l==null)throw new Error(s+" not available on this browser");return l},ns=Object.getPrototypeOf,Do=s=>hs("HTMLElement",s),Xe=s=>{const c=zs("ownerDocument.defaultView",s);return ye(s)&&(Do(c).prototype.isPrototypeOf(s)||/^HTML\w*Element$/.test(ns(s).constructor.name))},Cn=8,Ko=9,Ds=11,ps=1,is=3,co=s=>s.dom.nodeName.toLowerCase(),Zs=s=>s.dom.nodeType,Ss=s=>c=>Zs(c)===s,dc=s=>Zs(s)===Cn||co(s)==="#comment",$s=s=>os(s)&&Xe(s.dom),os=Ss(ps),xs=Ss(is),ar=Ss(Ko),Ir=Ss(Ds),No=s=>c=>os(c)&&co(c)===s,fo=(s,c,l)=>{if(sn(l)||Pn(l)||rn(l))s.setAttribute(c,l+"");else throw console.error("Invalid call to Attribute.set. Key ",c,":: Value ",l,":: Element ",s),new Error("Attribute value was not simple")},xo=(s,c,l)=>{fo(s.dom,c,l)},Us=(s,c)=>{const l=s.dom;Ee(c,(u,p)=>{fo(l,p,u)})},Kr=(s,c)=>{Ee(c,(l,u)=>{l.fold(()=>{N(s,u)},p=>{fo(s.dom,u,p)})})},Vo=(s,c)=>{const l=s.dom.getAttribute(c);return l===null?void 0:l},z=(s,c)=>Y.from(Vo(s,c)),N=(s,c)=>{s.dom.removeAttribute(c)},de=s=>Ae(s.dom.attributes,(c,l)=>(c[l.name]=l.value,c),{}),pe=(s,c)=>{const u=(c||document).createElement("div");if(u.innerHTML=s,!u.hasChildNodes()||u.childNodes.length>1){const p="HTML does not have a single root node";throw console.error(p,s),new Error(p)}return zt(u.childNodes[0])},rt=(s,c)=>{const u=(c||document).createElement(s);return zt(u)},ht=(s,c)=>{const u=(c||document).createTextNode(s);return zt(u)},zt=s=>{if(s==null)throw new Error("Node cannot be null or undefined");return{dom:s}},q={fromHtml:pe,fromTag:rt,fromText:ht,fromDom:zt,fromPoint:(s,c,l)=>Y.from(s.dom.elementFromPoint(c,l)).map(zt)},It=(s,c)=>{const l=s.dom;if(l.nodeType!==ps)return!1;{const u=l;if(u.matches!==void 0)return u.matches(c);if(u.msMatchesSelector!==void 0)return u.msMatchesSelector(c);if(u.webkitMatchesSelector!==void 0)return u.webkitMatchesSelector(c);if(u.mozMatchesSelector!==void 0)return u.mozMatchesSelector(c);throw new Error("Browser lacks native selectors")}},V=s=>s.nodeType!==ps&&s.nodeType!==Ko&&s.nodeType!==Ds||s.childElementCount===0,j=(s,c)=>{const l=c===void 0?document:c.dom;return V(l)?[]:st(l.querySelectorAll(s),q.fromDom)},we=(s,c)=>{const l=c===void 0?document:c.dom;return V(l)?Y.none():Y.from(l.querySelector(s)).map(q.fromDom)},Oe=(s,c)=>s.dom===c.dom,je=(s,c)=>{const l=s.dom,u=c.dom;return l===u?!1:l.contains(u)},it=It,nt=s=>q.fromDom(s.dom.ownerDocument),ot=s=>ar(s)?s:nt(s),Ot=s=>q.fromDom(ot(s).dom.documentElement),Jt=s=>q.fromDom(ot(s).dom.defaultView),vn=s=>Y.from(s.dom.parentNode).map(q.fromDom),lo=s=>Y.from(s.dom.parentElement).map(q.fromDom),Cr=(s,c)=>{const l=yn(c)?c:on;let u=s.dom;const p=[];for(;u.parentNode!==null&&u.parentNode!==void 0;){const y=u.parentNode,T=q.fromDom(y);if(p.push(T),l(T)===!0)break;u=y}return p},lr=s=>Y.from(s.dom.previousSibling).map(q.fromDom),Tr=s=>Y.from(s.dom.nextSibling).map(q.fromDom),qt=s=>st(s.dom.childNodes,q.fromDom),pn=(s,c)=>{const l=s.dom.childNodes;return Y.from(l[c]).map(q.fromDom)},In=s=>pn(s,0),Xs=(s,c)=>{vn(s).each(u=>{u.dom.insertBefore(c.dom,s.dom)})},us=(s,c)=>{Tr(s).fold(()=>{vn(s).each(p=>{uo(p,c)})},u=>{Xs(u,c)})},fs=(s,c)=>{In(s).fold(()=>{uo(s,c)},u=>{s.dom.insertBefore(c.dom,u.dom)})},uo=(s,c)=>{s.dom.appendChild(c.dom)},Ws=(s,c,l)=>{pn(s,l).fold(()=>{uo(s,c)},u=>{Xs(u,c)})},Kc=(s,c)=>{Xs(s,c),uo(c,s)},Qn=(s,c)=>{kt(c,(l,u)=>{const p=u===0?s:c[u-1];us(p,l)})},bs=(s,c)=>{kt(c,l=>{uo(s,l)})},js=s=>{s.dom.textContent="",kt(qt(s),c=>{Qo(c)})},Qo=s=>{const c=s.dom;c.parentNode!==null&&c.parentNode.removeChild(c)},yr=s=>{const c=qt(s);c.length>0&&Qn(s,c),Qo(s)},Hr=(s,c)=>q.fromDom(s.dom.cloneNode(c)),Fs=s=>Hr(s,!1),Pr=s=>Hr(s,!0),Lr=(s,c)=>{const l=q.fromTag(c),u=de(s);return Us(l,u),l},Ba=(s,c)=>{const l=Lr(s,c),u=qt(Pr(s));return bs(l,u),l},kr=(s,c)=>{const l=Lr(s,c);us(s,l);const u=qt(s);return bs(l,u),Qo(s),l},Yc=["tfoot","thead","tbody","colgroup"],Js=s=>Gt(Yc,s),mc=(s,c)=>({rows:s,columns:c}),Sc=(s,c)=>({row:s,column:c}),Xc=(s,c,l)=>({element:s,rowspan:c,colspan:l}),rl=(s,c,l,u)=>({element:s,rowspan:c,colspan:l,isNew:u}),D=(s,c,l,u,p,y)=>({element:s,rowspan:c,colspan:l,row:u,column:p,isLocked:y}),U=(s,c,l)=>({element:s,cells:c,section:l}),ee=(s,c,l,u)=>({element:s,cells:c,section:l,isNew:u}),le=(s,c,l)=>({element:s,isNew:c,isLocked:l}),De=(s,c,l,u)=>({element:s,cells:c,section:l,isNew:u}),vt=(s,c,l,u)=>({startRow:s,startCol:c,finishRow:l,finishCol:u}),eo=(s,c,l)=>({element:s,colspan:c,column:l}),jo=(s,c)=>({element:s,columns:c}),Yn=s=>Ir(s)&&Vt(s.dom.host),Eo=yn(Element.prototype.attachShadow)&&yn(Node.prototype.getRootNode),Xn=se(Eo),Cs=Eo?s=>q.fromDom(s.dom.getRootNode()):ot,Nr=s=>{const c=Cs(s);return Yn(c)?Y.some(c):Y.none()},Bc=s=>q.fromDom(s.dom.host),Pt=s=>{if(Xn()&&Vt(s.target)){const c=q.fromDom(s.target);if(os(c)&&ga(c)&&s.composed&&s.composedPath){const l=s.composedPath();if(l)return Me(l)}}return Y.from(s.target)},ga=s=>Vt(s.dom.shadowRoot),$o=s=>{const c=xs(s)?s.dom.parentNode:s.dom;if(c==null||c.ownerDocument===null)return!1;const l=c.ownerDocument;return Nr(q.fromDom(c)).fold(()=>l.body.contains(c),tt($o,Bc))},C=()=>F(q.fromDom(document)),F=s=>{const c=s.dom.body;if(c==null)throw new Error("Body is not available yet");return q.fromDom(c)},P=(s,c,l)=>Yt(Cr(s,l),c),ue=(s,c)=>Yt(qt(s),c),Ze=(s,c)=>{let l=[];return kt(qt(s),u=>{c(u)&&(l=l.concat([u])),l=l.concat(Ze(u,c))}),l},tn=(s,c,l)=>P(s,u=>It(u,c),l),Je=(s,c)=>ue(s,l=>It(l,c)),Co=(s,c)=>j(c,s);var Er=(s,c,l,u,p)=>s(l,u)?Y.some(l):yn(p)&&p(l)?Y.none():c(l,u,p);const Fo=(s,c,l)=>{let u=s.dom;const p=yn(l)?l:on;for(;u.parentNode;){u=u.parentNode;const y=q.fromDom(u);if(c(y))return Y.some(y);if(p(y))break}return Y.none()},ir=(s,c,l)=>Er((p,y)=>y(p),Fo,s,c,l),bo=(s,c)=>{const l=p=>c(q.fromDom(p));return Ln(s.dom.childNodes,l).map(q.fromDom)},ha=(s,c)=>{const l=u=>{for(let p=0;p<u.childNodes.length;p++){const y=q.fromDom(u.childNodes[p]);if(c(y))return Y.some(y);const T=l(u.childNodes[p]);if(T.isSome())return T}return Y.none()};return l(s.dom)},Yr=(s,c,l)=>Fo(s,u=>It(u,c),l),Nn=(s,c)=>bo(s,l=>It(l,c)),Qs=(s,c)=>we(c,s),Oo=(s,c,l)=>Er((p,y)=>It(p,y),Yr,s,c,l),Ic=(s,c,l=mo)=>s.exists(u=>l(u,c)),Ro=s=>{const c=[],l=u=>{c.push(u)};for(let u=0;u<s.length;u++)s[u].each(l);return c},Ia=(s,c)=>s!=null?c(s):Y.none(),ci=(s,c)=>s?Y.some(c):Y.none(),Ai=(s,c,l)=>c===""||s.length>=c.length&&s.substr(l,l+c.length)===c,Gn=(s,c,l=0,u)=>{const p=s.indexOf(c,l);return p!==-1?Zn(u)?!0:p+c.length<=u:!1},gc=(s,c)=>Ai(s,c,0),Hc=(s,c)=>Ai(s,c,s.length-c.length),xc=(s=>c=>c.replace(s,""))(/^\s+|\s+$/g),Tl=s=>s.length>0,kl=s=>{const c=parseFloat(s);return isNaN(c)?Y.none():Y.some(c)},M=s=>s.style!==void 0&&yn(s.style.getPropertyValue),H=(s,c,l)=>{if(!sn(l))throw console.error("Invalid call to CSS.set. Property ",c,":: Value ",l,":: Element ",s),new Error("CSS value must be a string: "+l);M(s)&&s.style.setProperty(c,l)},ae=(s,c)=>{M(s)&&s.style.removeProperty(c)},ge=(s,c,l)=>{const u=s.dom;H(u,c,l)},ut=(s,c)=>{const l=s.dom;Ee(c,(u,p)=>{H(l,p,u)})},dn=(s,c)=>{const l=s.dom,p=window.getComputedStyle(l).getPropertyValue(c);return p===""&&!$o(s)?Yo(l,c):p},Yo=(s,c)=>M(s)?s.style.getPropertyValue(c):"",er=(s,c)=>{const l=s.dom,u=Yo(l,c);return Y.from(u).filter(p=>p.length>0)},Xo=(s,c)=>{const l=s.dom;ae(l,c),Ic(z(s,"style").map(xc),"")&&N(s,"style")},wr=(s,c)=>{const l=s.dom,u=c.dom;M(l)&&M(u)&&(u.style.cssText=l.style.cssText)},vs=(s,c,l=0)=>z(s,c).map(u=>parseInt(u,10)).getOr(l),Gs=(s,c)=>vs(s,c,1),Pc=s=>No("col")(s)?vs(s,"span",1)>1:Gs(s,"colspan")>1,pa=s=>Gs(s,"rowspan")>1,Ls=(s,c)=>parseInt(dn(s,c),10),Lc=se(10),ss=se(10),Vr=(s,c)=>Jc(s,c,mt),Jc=(s,c,l)=>gn(qt(s),u=>It(u,c)?l(u)?[u]:[]:Jc(u,c,l)),_i=(s,c,l=on)=>{if(l(c))return Y.none();if(Gt(s,co(c)))return Y.some(c);const u=p=>It(p,"table")||l(p);return Yr(c,s.join(","),u)},Mi=(s,c)=>_i(["td","th"],s,c),Nc=s=>Vr(s,"th,td"),uu=s=>It(s,"colgroup")?Je(s,"col"):gn(Di(s),c=>Je(c,"col")),Xr=(s,c)=>Oo(s,"table",c),fa=s=>Vr(s,"tr"),Di=s=>Xr(s).fold(se([]),c=>Je(c,"colgroup")),du=(s,c)=>st(s,l=>{if(co(l)==="colgroup"){const u=st(uu(l),p=>{const y=vs(p,"span",1);return Xc(p,1,y)});return U(l,u,"colgroup")}else{const u=st(Nc(l),p=>{const y=vs(p,"rowspan",1),T=vs(p,"colspan",1);return Xc(p,y,T)});return U(l,u,c(l))}}),$i=s=>vn(s).map(c=>{const l=co(c);return Js(l)?l:"tbody"}).getOr("tbody"),El=s=>{const c=fa(s),u=[...Di(s),...c];return du(u,$i)},gd=(s,c)=>du(s,()=>c),Ol=s=>{let c=!1,l;return(...u)=>(c||(c=!0,l=s.apply(null,u)),l)},hd=(s,c,l,u)=>{const p=s.isiOS()&&/ipad/i.test(l)===!0,y=s.isiOS()&&!p,T=s.isiOS()||s.isAndroid(),_=T||u("(pointer:coarse)"),I=p||!y&&T&&u("(min-device-width:768px)"),W=y||T&&!I,te=c.isSafari()&&s.isiOS()&&/safari/i.test(l)===!1,_e=!W&&!I&&!te;return{isiPad:se(p),isiPhone:se(y),isTablet:se(I),isPhone:se(W),isTouch:se(_),isAndroid:s.isAndroid,isiOS:s.isiOS,isWebView:se(te),isDesktop:se(_e)}},pd=(s,c)=>{for(let l=0;l<s.length;l++){const u=s[l];if(u.test(c))return u}},fd=(s,c)=>{const l=pd(s,c);if(!l)return{major:0,minor:0};const u=p=>Number(c.replace(l,"$"+p));return mu(u(1),u(2))},bd=(s,c)=>{const l=String(c).toLowerCase();return s.length===0?vd():fd(s,l)},vd=()=>mu(0,0),mu=(s,c)=>({major:s,minor:c}),cl={nu:mu,detect:bd,unknown:vd},gu=(s,c)=>un(c.brands,l=>{const u=l.brand.toLowerCase();return Ln(s,p=>{var y;return u===((y=p.brand)===null||y===void 0?void 0:y.toLowerCase())}).map(p=>({current:p.name,version:cl.nu(parseInt(l.version,10),0)}))}),ai=(s,c)=>{const l=String(c).toLowerCase();return Ln(s,u=>u.search(l))},hu=(s,c)=>ai(s,c).map(l=>{const u=cl.detect(l.versionRegexes,c);return{current:l.name,version:u}}),km=(s,c)=>ai(s,c).map(l=>{const u=cl.detect(l.versionRegexes,c);return{current:l.name,version:u}}),al=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Qc=s=>c=>Gn(c,s),ba=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:s=>Gn(s,"edge/")&&Gn(s,"chrome")&&Gn(s,"safari")&&Gn(s,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,al],search:s=>Gn(s,"chrome")&&!Gn(s,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:s=>Gn(s,"msie")||Gn(s,"trident")},{name:"Opera",versionRegexes:[al,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Qc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Qc("firefox")},{name:"Safari",versionRegexes:[al,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:s=>(Gn(s,"safari")||Gn(s,"mobile/"))&&Gn(s,"applewebkit")}],li=[{name:"Windows",search:Qc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:s=>Gn(s,"iphone")||Gn(s,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Qc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Qc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Qc("linux"),versionRegexes:[]},{name:"Solaris",search:Qc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Qc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Qc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ha={browsers:se(ba),oses:se(li)},ll="Edge",il="Chromium",ul="IE",Em="Opera",Om="Firefox",Al="Safari",_l=()=>yd({current:void 0,version:cl.unknown()}),yd=s=>{const c=s.current,l=s.version,u=p=>()=>c===p;return{current:c,version:l,isEdge:u(ll),isChromium:u(il),isIE:u(ul),isOpera:u(Em),isFirefox:u(Om),isSafari:u(Al)}},Ar={unknown:_l,nu:yd},pu="Windows",wd="iOS",fu="Android",va="Linux",Jr="macOS",Sd="Solaris",Am="FreeBSD",xd="ChromeOS",bu=()=>Ml({current:void 0,version:cl.unknown()}),Ml=s=>{const c=s.current,l=s.version,u=p=>()=>c===p;return{current:c,version:l,isWindows:u(pu),isiOS:u(wd),isAndroid:u(fu),isMacOS:u(Jr),isLinux:u(va),isSolaris:u(Sd),isFreeBSD:u(Am),isChromeOS:u(xd)}},vu={unknown:bu,nu:Ml},Ig={detect:(s,c,l)=>{const u=Ha.browsers(),p=Ha.oses(),y=c.bind(I=>gu(u,I)).orThunk(()=>hu(u,s)).fold(Ar.unknown,Ar.nu),T=km(p,s).fold(vu.unknown,vu.nu),_=hd(T,y,s,l);return{browser:y,os:T,deviceType:_}}},yu=s=>window.matchMedia(s).matches;let _m=Ol(()=>Ig.detect(navigator.userAgent,Y.from(navigator.userAgentData),yu));const dl=()=>_m(),wu=(s,c)=>{const l=(_,I)=>{if(!rn(I)&&!I.match(/^[0-9]+$/))throw new Error(s+".set accepts only positive integer values. Value was "+I);const W=_.dom;M(W)&&(W.style[s]=I+"px")},u=_=>{const I=c(_);if(I<=0||I===null){const W=dn(_,s);return parseFloat(W)||0}return I},p=u,y=(_,I)=>Ae(I,(W,te)=>{const _e=dn(_,te),qe=_e===void 0?0:parseInt(_e,10);return isNaN(qe)?W:W+qe},0);return{set:l,get:u,getOuter:p,aggregate:y,max:(_,I,W)=>{const te=y(_,W);return I>te?I-te:0}}},Cd=(s,c)=>kl(s).getOr(c),es=(s,c,l)=>Cd(dn(s,c),l),Rs=(s,c,l,u)=>{const p=es(s,`padding-${l}`,0),y=es(s,`padding-${u}`,0),T=es(s,`border-${l}-width`,0),_=es(s,`border-${u}-width`,0);return c-p-y-T-_},Pa=(s,c)=>{const l=s.dom,u=l.getBoundingClientRect().width||l.offsetWidth;return Rs(s,u,"left","right")},Fi=s=>es(s,"height",s.dom.offsetHeight),Td=s=>es(s,"width",s.dom.offsetWidth),tr=s=>Pa(s),Dl=wu("width",s=>s.dom.offsetWidth),ea=s=>Dl.get(s),$l=s=>Dl.getOuter(s),kd=tr,mn=Td,zr=(s,c,l)=>{const u=s.cells,p=u.slice(0,c),y=u.slice(c),T=p.concat(l).concat(y);return Su(s,T)},Ri=(s,c,l)=>zr(s,c,[l]),Fl=(s,c,l)=>{const u=s.cells;u[c]=l},Su=(s,c)=>De(s.element,c,s.section,s.isNew),xu=(s,c)=>{const l=s.cells,u=st(l,c);return De(s.element,u,s.section,s.isNew)},_r=(s,c)=>s.cells[c],Qr=(s,c)=>_r(s,c).element,hc=s=>s.cells.length,Bs=s=>{const c=Kn(s,l=>l.section==="colgroup");return{rows:c.fail,cols:c.pass}},Cu=(s,c,l)=>{const u=st(s.cells,l);return De(c(s.element),u,s.section,!0)},Rl="data-snooker-locked-cols",ds=s=>z(s,Rl).bind(c=>Y.from(c.match(/\d+/g))).map(c=>Q(c,mt)),La=s=>{const c=Ae(Bs(s).rows,(u,p)=>(kt(p.cells,(y,T)=>{y.isLocked&&(u[T]=!0)}),u),{}),l=xn(c,(u,p)=>parseInt(p,10));return ne(l)},ii=(s,c)=>s+","+c,Tu=(s,c,l)=>Y.from(s.access[ii(c,l)]),Mm=(s,c,l)=>{const u=Ed(s,p=>l(c,p.element));return u.length>0?Y.some(u[0]):Y.none()},Ed=(s,c)=>{const l=gn(s.all,u=>u.cells);return Yt(l,c)},Bi=s=>{const c={};let l=0;return kt(s.cells,u=>{const p=u.colspan;To(p,y=>{const T=l+y;c[T]=eo(u.element,p,T)}),l+=p}),c},vo=s=>{const c={},l=[],p=Me(s).map(Ue=>Ue.element).bind(Xr).bind(ds).getOr({});let y=0,T=0,_=0;const{pass:I,fail:W}=Kn(s,Ue=>Ue.section==="colgroup");kt(W,Ue=>{const Se=[];kt(Ue.cells,Ge=>{let ve=0;for(;c[ii(_,ve)]!==void 0;)ve++;const lt=an(p,ve.toString()),Ut=D(Ge.element,Ge.rowspan,Ge.colspan,_,ve,lt);for(let ln=0;ln<Ge.colspan;ln++)for(let Jo=0;Jo<Ge.rowspan;Jo++){const cr=_+Jo,_s=ve+ln,Mc=ii(cr,_s);c[Mc]=Ut,T=Math.max(T,_s+1)}Se.push(Ut)}),y++,l.push(U(Ue.element,Se,Ue.section)),_++});const{columns:te,colgroups:_e}=Pe(I).map(Ue=>{const Se=Bi(Ue);return{colgroups:[jo(Ue.element,cn(Se))],columns:Se}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:mc(y,T),access:c,all:l,columns:te,colgroups:_e}},wn={fromTable:s=>{const c=El(s);return vo(c)},generate:vo,getAt:Tu,findItem:Mm,filterItems:Ed,justCells:s=>gn(s.all,c=>c.cells),justColumns:s=>cn(s.columns),hasColumns:s=>Wn(s.columns).length>0,getColumnAt:(s,c)=>Y.from(s.columns[c])},Ii=(s,c=mt)=>{const l=s.grid,u=To(l.columns,ze),p=To(l.rows,ze);return st(u,y=>Od(()=>gn(p,W=>wn.getAt(s,W,y).filter(te=>te.column===y).toArray()),W=>W.colspan===1&&c(W.element),()=>wn.getAt(s,0,y)))},Od=(s,c,l)=>{const u=s();return Ln(u,c).orThunk(()=>Y.from(u[0]).orThunk(l)).map(T=>T.element)},ku=s=>{const c=s.grid,l=To(c.rows,ze),u=To(c.columns,ze);return st(l,p=>Od(()=>gn(u,I=>wn.getAt(s,p,I).filter(W=>W.row===p).fold(se([]),W=>[W])),I=>I.rowspan===1,()=>wn.getAt(s,p,0)))},Ad=(s,c)=>{if(c<0||c>=s.length-1)return Y.none();const l=s[c].fold(()=>{const p=Vs(s.slice(0,c));return un(p,(y,T)=>y.map(_=>({value:_,delta:T+1})))},p=>Y.some({value:p,delta:0})),u=s[c+1].fold(()=>{const p=s.slice(c+1);return un(p,(y,T)=>y.map(_=>({value:_,delta:T+1})))},p=>Y.some({value:p,delta:1}));return l.bind(p=>u.map(y=>{const T=y.delta+p.delta;return Math.abs(y.value-p.value)/T}))},Eu=(s,c)=>l=>Dm(l)==="rtl"?c:s,Dm=s=>dn(s,"direction")==="rtl"?"rtl":"ltr",Il=wu("height",s=>{const c=s.dom;return $o(s)?c.getBoundingClientRect().height:c.offsetHeight}),Ou=s=>Il.get(s),h=s=>Il.getOuter(s),S=Fi,O=(s,c)=>({left:s,top:c,translate:(u,p)=>O(s+u,c+p)}),L=O,G=s=>{const c=s.getBoundingClientRect();return L(c.left,c.top)},$e=(s,c)=>s!==void 0?s:c!==void 0?c:0,dt=s=>{const c=s.dom.ownerDocument,l=c.body,u=c.defaultView,p=c.documentElement;if(l===s.dom)return L(l.offsetLeft,l.offsetTop);const y=$e(u==null?void 0:u.pageYOffset,p.scrollTop),T=$e(u==null?void 0:u.pageXOffset,p.scrollLeft),_=$e(p.clientTop,l.clientTop),I=$e(p.clientLeft,l.clientLeft);return Zt(s).translate(T-I,y-_)},Zt=s=>{const c=s.dom,u=c.ownerDocument.body;return u===c?L(u.offsetLeft,u.offsetTop):$o(s)?G(c):L(0,0)},Nt=(s,c)=>({row:s,y:c}),Et=(s,c)=>({col:s,x:c}),ts=s=>dt(s).left+$l(s),qs=s=>dt(s).left,pc=(s,c)=>Et(s,qs(c)),za=(s,c)=>Et(s,ts(c)),$m=s=>dt(s).top,a0=(s,c)=>Nt(s,$m(c)),Vc=(s,c)=>Nt(s,$m(c)+h(c)),xt=(s,c,l)=>{if(l.length===0)return[];const u=st(l.slice(1),(y,T)=>y.map(_=>s(T,_))),p=l[l.length-1].map(y=>c(l.length-1,y));return u.concat([p])},Hl=s=>-s,Pl={delta:ze,positions:s=>xt(a0,Vc,s),edge:$m},Hi=Eu({delta:ze,edge:qs,positions:s=>xt(pc,za,s)},{delta:Hl,edge:ts,positions:s=>xt(za,pc,s)}),ec={delta:(s,c)=>Hi(c).delta(s,c),positions:(s,c)=>Hi(c).positions(s,c),edge:s=>Hi(s).edge(s)},_d={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Md=(()=>{const s="[0-9]+",l="[eE]"+("[+-]?"+s),u="\\.",p=_=>`(?:${_})?`,T=`[+-]?(?:${["Infinity",s+u+p(s)+p(l),u+s+p(l),s+p(l)].join("|")})`;return new RegExp(`^(${T})(.*)$`)})(),nr=(s,c)=>Un(c,l=>Un(_d[l],u=>s===u)),Au=(s,c)=>Y.from(Md.exec(s)).bind(u=>{const p=Number(u[1]),y=u[2];return nr(y,c)?Y.some({value:p,unit:y}):Y.none()}),Dd=/(\d+(\.\d+)?)%/,Pg=/(\d+(\.\d+)?)px|em/,Lg=No("col"),Ng=(s,c,l)=>{const u=lo(s).getOrThunk(()=>F(nt(s)));return c(s)/l(u)*100},ui=(s,c)=>{ge(s,"width",c+"px")},Vg=(s,c)=>{ge(s,"width",c+"%")},Ll=(s,c)=>{ge(s,"height",c+"px")},zg=s=>S(s)+"px",Op=(s,c,l,u)=>{const p=Xr(s).map(y=>{const T=l(y);return Math.floor(c/100*T)}).getOr(c);return u(s,p),p},as=(s,c,l,u)=>{const p=parseFloat(s);return Hc(s,"%")&&co(c)!=="table"?Op(c,p,l,u):p},ya=s=>{const c=zg(s);return c?as(c,s,Ou,Ll):Ou(s)},tc=(s,c,l)=>{const u=l(s),p=Gs(s,c);return u/p},di=(s,c)=>er(s,c).orThunk(()=>z(s,c).map(l=>l+"px")),or=s=>di(s,"width"),Zg=s=>di(s,"height"),ur=s=>Ng(s,ea,kd),Mr=s=>Lg(s)?ea(s):mn(s),$d=s=>tc(s,"rowspan",ya),Ce=s=>or(s).bind(l=>Au(l,["fixed","relative","empty"])),fc=(s,c,l)=>{ge(s,"width",c+l)},Ap=s=>ea(s)+"px",Ts=s=>Ng(s,ea,kd)+"%",Za=s=>or(s).exists(c=>Dd.test(c)),_p=s=>or(s).exists(c=>Pg.test(c)),ta=s=>or(s).isNone(),Ug=se(Dd),Nl=No("col"),Wg=s=>or(s).getOrThunk(()=>Mr(s)+"px"),Cc=s=>Zg(s).getOrThunk(()=>$d(s)+"px"),oo=s=>st(wn.justColumns(s),c=>Y.from(c.element)),Ua=s=>{const c=dl().browser,l=c.isChromium()||c.isFirefox();return Nl(s)?l:!0},mi=(s,c,l,u,p,y)=>s.filter(u).fold(()=>y(Ad(l,c)),T=>p(T)),dr=(s,c,l,u)=>{const p=Ii(s),y=wn.hasColumns(s)?oo(s):p,T=[Y.some(ec.edge(c))].concat(st(ec.positions(p,c),I=>I.map(W=>W.x))),_=$(Pc);return st(y,(I,W)=>mi(I,W,T,_,te=>{if(Ua(te))return l(te);{const _e=Ia(p[W],ze);return mi(_e,W,T,_,qe=>u(Y.some(ea(qe))),u)}},u))},Fm=s=>s.map(c=>c+"px").getOr(""),gi=(s,c)=>dr(s,c,Wg,Fm),Rm=(s,c,l)=>dr(s,c,ur,u=>u.fold(()=>l.minCellWidth(),p=>p/l.pixelWidth()*100)),nc=(s,c,l)=>dr(s,c,Mr,u=>u.getOrThunk(l.minCellWidth)),jg=(s,c,l,u,p)=>{const y=ku(s),T=[Y.some(l.edge(c))].concat(st(l.positions(y,c),_=>_.map(I=>I.y)));return st(y,(_,I)=>mi(_,I,T,$(pa),u,p))},oe=(s,c,l)=>jg(s,c,l,$d,u=>u.getOrThunk(ss)),oc=(s,c,l)=>jg(s,c,l,Cc,Fm),gl=(s,c)=>()=>$o(s)?c(s):parseFloat(er(s,"width").getOr("0")),wa=s=>{const c=gl(s,ea),l=se(0);return{width:c,pixelWidth:c,getWidths:(p,y)=>nc(p,s,y),getCellDelta:l,singleColumnWidth:se([0]),minCellWidth:l,setElementWidth:Re,adjustTableWidth:Re,isRelative:!0,label:"none"}},Sa=s=>{const c=gl(s,I=>parseFloat(Ts(I))),l=gl(s,ea);return{width:c,pixelWidth:l,getWidths:(I,W)=>Rm(I,s,W),getCellDelta:I=>I/l()*100,singleColumnWidth:(I,W)=>[100-I],minCellWidth:()=>Lc()/l()*100,setElementWidth:Vg,adjustTableWidth:I=>{const W=c(),te=I/100*W,_e=W+te;Vg(s,_e)},isRelative:!0,label:"percent"}},mr=s=>{const c=gl(s,ea);return{width:c,pixelWidth:c,getWidths:(T,_)=>nc(T,s,_),getCellDelta:ze,singleColumnWidth:(T,_)=>[Math.max(Lc(),T+_)-T],minCellWidth:Lc,setElementWidth:ui,adjustTableWidth:T=>{const _=c()+T;ui(s,_)},isRelative:!1,label:"pixel"}},Is=(s,c)=>Ug().exec(c)!==null?Sa(s):mr(s),na={getTableSize:s=>or(s).fold(()=>wa(s),l=>Is(s,l)),pixelSize:mr,percentageSize:Sa,noneSize:wa},Bm=(s,c,l,u,p,y)=>({minRow:s,minCol:c,maxRow:l,maxCol:u,allCells:p,selectedCells:y}),m=(s,c)=>{const l=s.grid.columns;let p=s.grid.rows,y=l,T=0,_=0;const I=[],W=[];return Ee(s.access,te=>{if(I.push(te),c(te)){W.push(te);const _e=te.row,qe=_e+te.rowspan-1,Ue=te.column,Se=Ue+te.colspan-1;_e<p?p=_e:qe>T&&(T=qe),Ue<y?y=Ue:Se>_&&(_=Se)}}),Bm(p,y,T,_,I,W)},f=(s,c,l)=>{const u=s[l].element,p=q.fromTag("td");uo(p,q.fromTag("br")),(c?uo:fs)(u,p)},E=(s,c,l,u)=>{const p=Yt(s,_=>_.section!=="colgroup"),y=c.grid.columns,T=c.grid.rows;for(let _=0;_<T;_++){let I=!1;for(let W=0;W<y;W++)_<l.minRow||_>l.maxRow||W<l.minCol||W>l.maxCol||(wn.getAt(c,_,W).filter(u).isNone()?f(p,I,_):I=!0)}},R=(s,c,l,u)=>{Ee(l.columns,T=>{(T.column<c.minCol||T.column>c.maxCol)&&Qo(T.element)});const p=Yt(Vr(s,"tr"),T=>T.dom.childElementCount===0);kt(p,Qo),(c.minCol===c.maxCol||c.minRow===c.maxRow)&&kt(Vr(s,"th,td"),T=>{N(T,"rowspan"),N(T,"colspan")}),N(s,Rl),N(s,"data-snooker-col-series"),na.getTableSize(s).adjustTableWidth(u)},X=(s,c,l,u)=>{if(u.minCol===0&&c.grid.columns===u.maxCol+1)return 0;const p=nc(c,s,l),y=Ae(p,(W,te)=>W+te,0),I=Ae(p.slice(u.minCol,u.maxCol+1),(W,te)=>W+te,0)/y*l.pixelWidth()-l.pixelWidth();return l.getCellDelta(I)},fe=(s,c)=>{const l=qe=>It(qe.element,c),u=Pr(s),p=El(u),y=na.getTableSize(s),T=wn.generate(p),_=m(T,l),I="th:not("+c+"),td:not("+c+")",W=Jc(u,"th,td",qe=>It(qe,I));kt(W,Qo),E(p,T,_,l);const te=wn.fromTable(s),_e=X(s,te,y,_);return R(u,_,T,_e),u},Ie="",At=((s,c)=>{const l=y=>{if(!s(y))throw new Error("Can only get "+c+" value of a "+c+" node");return u(y).getOr("")},u=y=>s(y)?Y.from(y.dom.nodeValue):Y.none();return{get:l,getOption:u,set:(y,T)=>{if(!s(y))throw new Error("Can only set raw "+c+" value of a "+c+" node");y.dom.nodeValue=T}}})(xs,"text"),Lt=s=>At.get(s),rs=s=>At.getOption(s),Bo=(s,c)=>At.set(s,c),yo=s=>co(s)==="img"?1:rs(s).fold(()=>qt(s).length,c=>c.length),bc=s=>rs(s).filter(c=>c.trim().length!==0||c.indexOf(Ie)>-1).isSome(),xa=s=>$s(s)&&Vo(s,"contenteditable")==="false",Ca=["img","br"],hl=s=>bc(s)||Gt(Ca,co(s))||xa(s),Fd=s=>ha(s,hl),Wa=s=>_u(s,hl),_u=(s,c)=>{const l=u=>{const p=qt(u);for(let y=p.length-1;y>=0;y--){const T=p[y];if(c(T))return Y.some(T);const _=l(T);if(_.isSome())return _}return Y.none()};return l(s)},Mu={scope:["row","col"]},Du=s=>()=>{const c=q.fromTag("td",s.dom);return uo(c,q.fromTag("br",s.dom)),c},Pi=s=>()=>q.fromTag("col",s.dom),Hs=s=>()=>q.fromTag("colgroup",s.dom),ja=s=>()=>q.fromTag("tr",s.dom),$u=(s,c,l)=>{const u=Ba(s,c);return Ee(l,(p,y)=>{p===null?N(u,y):xo(u,y,p)}),u},Mn=s=>s,cs=(s,c,l)=>Fd(s).map(p=>{const y=l.join(","),T=tn(p,y,_=>Oe(_,s));return Mo(T,(_,I)=>{const W=Fs(I);return uo(_,W),W},c)}).getOr(c),ls=(s,c)=>{Ee(Mu,(l,u)=>z(s,u).filter(p=>Gt(l,p)).each(p=>xo(c,u,p)))},Dr=(s,c,l)=>{const u=(T,_)=>{wr(T.element,_),Xo(_,"height"),T.colspan!==1&&Xo(_,"width")},p=T=>{const _=q.fromTag(co(T.element),c.dom),I=l.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),W=I.length>0?cs(T.element,_,I):_;return uo(W,q.fromTag("br")),u(T,_),ls(T.element,_),s(T.element,_),_};return{col:T=>{const _=q.fromTag(co(T.element),c.dom);return u(T,_),s(T.element,_),_},colgroup:Hs(c),row:ja(c),cell:p,replace:$u,colGap:Pi(c),gap:Du(c)}},Rd=s=>({col:Pi(s),colgroup:Hs(s),row:ja(s),cell:Du(s),replace:Mn,colGap:Pi(s),gap:Du(s)}),Im=(s,c)=>{const u=document.createElement("div");return u.innerHTML=s,qt(q.fromDom(u))},oa=s=>st(s,q.fromDom),$r=s=>c=>c.options.get(s),Mp="100%",Ga=s=>{var c;const l=s.dom,u=(c=l.getParent(s.selection.getStart(),l.isBlock))!==null&&c!==void 0?c:s.getBody();return kd(q.fromDom(u))+"px"},ay=(s,c)=>Ru(s)||!zc(s)?c:Ni(s)?{...c,width:Ga(s)}:{...c,width:Mp},Fu=(s,c)=>Ru(s)||zc(s)?c:Ni(s)?{...c,width:Ga(s)}:{...c,width:Mp},Bd=s=>{const c=s.options.register;c("table_clone_elements",{processor:"string[]"}),c("table_use_colgroups",{processor:"boolean",default:!0}),c("table_header_type",{processor:l=>{const u=Gt(["section","cells","sectionCells","auto"],l);return u?{value:l,valid:u}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),c("table_sizing_mode",{processor:"string",default:"auto"}),c("table_default_attributes",{processor:"object",default:{border:"1"}}),c("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),c("table_column_resizing",{processor:l=>{const u=Gt(["preservetable","resizetable"],l);return u?{value:l,valid:u}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),c("table_resize_bars",{processor:"boolean",default:!0}),c("table_style_by_css",{processor:"boolean",default:!0}),c("table_merge_content_on_paste",{processor:"boolean",default:!0})},Li=s=>Y.from(s.options.get("table_clone_elements")),ly=s=>{const c=s.options.get("object_resizing");return Gt(c.split(","),"table")},Id=$r("table_header_type"),Dp=$r("table_column_resizing"),i0=s=>Dp(s)==="preservetable",ks=s=>Dp(s)==="resizetable",$p=$r("table_sizing_mode"),pl=s=>$p(s)==="relative",Ni=s=>$p(s)==="fixed",Ru=s=>$p(s)==="responsive",Bu=$r("table_resize_bars"),zc=$r("table_style_by_css"),Hm=$r("table_merge_content_on_paste"),Pm=s=>{const c=s.options,l=c.get("table_default_attributes");return c.isSet("table_default_attributes")?l:Fu(s,l)},iy=s=>{const c=s.options,l=c.get("table_default_styles");return c.isSet("table_default_styles")?l:ay(s,l)},Gg=$r("table_use_colgroups"),qg=s=>Oo(s,"[contenteditable]"),Vi=(s,c=!1)=>$o(s)?s.dom.isContentEditable:qg(s).fold(se(c),l=>u0(l)==="true"),u0=s=>s.dom.contentEditable,Kg=s=>q.fromDom(s.getBody()),zi=s=>c=>Oe(c,Kg(s)),Vl=s=>{N(s,"data-mce-style");const c=l=>N(l,"data-mce-style");kt(Nc(s),c),kt(uu(s),c),kt(fa(s),c)},Ta=s=>q.fromDom(s.selection.getStart()),Iu=s=>s.getBoundingClientRect().width,Zi=s=>s.getBoundingClientRect().height,d0=(s,c)=>{const l=s.dom.getStyle(c,"width")||s.dom.getAttrib(c,"width");return Y.from(l).filter(Tl)},Yg=s=>/^(\d+(\.\d+)?)%$/.test(s),Fp=s=>/^(\d+(\.\d+)?)px$/.test(s),Xg=s=>ir(s,No("table")).exists(Vi),m0=(s,c)=>{const l=c.column,u=c.column+c.colspan-1,p=c.row,y=c.row+c.rowspan-1;return l<=s.finishCol&&u>=s.startCol&&p<=s.finishRow&&y>=s.startRow},g0=(s,c)=>c.column>=s.startCol&&c.column+c.colspan-1<=s.finishCol&&c.row>=s.startRow&&c.row+c.rowspan-1<=s.finishRow,Rp=(s,c)=>{let l=!0;const u=Ke(g0,c);for(let p=c.startRow;p<=c.finishRow;p++)for(let y=c.startCol;y<=c.finishCol;y++)l=l&&wn.getAt(s,p,y).exists(u);return l?Y.some(c):Y.none()},Bp=(s,c)=>vt(Math.min(s.row,c.row),Math.min(s.column,c.column),Math.max(s.row+s.rowspan-1,c.row+c.rowspan-1),Math.max(s.column+s.colspan-1,c.column+c.colspan-1)),to=(s,c,l)=>{const u=wn.findItem(s,c,Oe),p=wn.findItem(s,l,Oe);return u.bind(y=>p.map(T=>Bp(y,T)))},yt=(s,c,l)=>to(s,c,l).bind(u=>Rp(s,u)),Hu=(s,c,l,u)=>wn.findItem(s,c,Oe).bind(p=>{const y=l>0?p.row+p.rowspan-1:p.row,T=u>0?p.column+p.colspan-1:p.column;return wn.getAt(s,y+l,T+u).map(I=>I.element)}),Jg=(s,c,l)=>to(s,c,l).map(u=>{const p=wn.filterItems(s,Ke(m0,u));return st(p,y=>y.element)}),Qg=(s,c)=>{const l=(u,p)=>je(p,u);return wn.findItem(s,c,l).map(u=>u.element)},uy=(s,c,l)=>Xr(s).bind(u=>{const p=eh(u);return Hu(p,s,c,l)}),h0=(s,c,l)=>{const u=eh(s);return Jg(u,c,l)},Io=(s,c,l,u,p)=>{const y=eh(s),T=Oe(s,l)?Y.some(c):Qg(y,c),_=Oe(s,p)?Y.some(u):Qg(y,u);return T.bind(I=>_.bind(W=>Jg(y,I,W)))},p0=(s,c,l)=>{const u=eh(s);return yt(u,c,l)},eh=wn.fromTable;var f0=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],xe=()=>{const s=W=>q.fromDom(W.dom.cloneNode(!1)),c=W=>ot(W).dom,l=W=>os(W)?co(W)==="body"?!0:Gt(f0,co(W)):!1,u=W=>os(W)?Gt(["br","img","hr","input"],co(W)):!1,p=W=>os(W)&&Vo(W,"contenteditable")==="false",y=(W,te)=>W.dom.compareDocumentPosition(te.dom),T=(W,te)=>{const _e=de(W);Us(te,_e)},_=W=>{const te=co(W);return Gt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],te)},I=W=>os(W)?z(W,"lang"):Y.none();return{up:se({selector:Yr,closest:Oo,predicate:Fo,all:Cr}),down:se({selector:Co,predicate:Ze}),styles:se({get:dn,getRaw:er,set:ge,remove:Xo}),attrs:se({get:Vo,set:xo,remove:N,copyTo:T}),insert:se({before:Xs,after:us,afterAll:Qn,append:uo,appendAll:bs,prepend:fs,wrap:Kc}),remove:se({unwrap:yr,remove:Qo}),create:se({nu:q.fromTag,clone:s,text:q.fromText}),query:se({comparePosition:y,prevSibling:lr,nextSibling:Tr}),property:se({children:qt,name:co,parent:vn,document:c,isText:xs,isComment:dc,isElement:os,isSpecial:_,getLanguage:I,getText:Lt,setText:Bo,isBoundary:l,isEmptyTag:u,isNonEditable:p}),eq:Oe,is:it}};const Ip=(s,c,l,u)=>{const p=l[0],y=l.slice(1);return u(s,c,p,y)},dy=(s,c,l)=>l.length>0?Ip(s,c,l,th):Y.none(),th=(s,c,l,u)=>{const p=c(s,l);return Mo(u,(y,T)=>{const _=c(s,T);return my(s,y,_)},p)},my=(s,c,l)=>c.bind(u=>l.filter(Ke(s.eq,u))),Hd=(s,c)=>Ke(s.eq,c),Hp=(s,c,l,u=on)=>{const p=[c].concat(s.up().all(c)),y=[l].concat(s.up().all(l)),T=te=>Wo(te,u).fold(()=>te,qe=>te.slice(0,qe+1)),_=T(p),I=T(y),W=Ln(_,te=>Un(I,Hd(s,te)));return{firstpath:_,secondpath:I,shared:W}},Pu=dy,gy=Hp,Lu=xe(),Go=(s,c)=>Pu(Lu,(l,u)=>s(u),c),zl=(s,c,l)=>gy(Lu,s,c,l),Pp=s=>Yr(s,"table"),qa=(s,c,l)=>{const u=p=>y=>l!==void 0&&l(y)||Oe(y,p);return Oe(s,c)?Y.some({boxes:Y.some([s]),start:s,finish:c}):Pp(s).bind(p=>Pp(c).bind(y=>{if(Oe(p,y))return Y.some({boxes:h0(p,s,c),start:s,finish:c});if(je(p,y)){const T=tn(c,"td,th",u(p)),_=T.length>0?T[T.length-1]:c;return Y.some({boxes:Io(p,s,p,c,y),start:s,finish:_})}else if(je(y,p)){const T=tn(s,"td,th",u(y)),_=T.length>0?T[T.length-1]:s;return Y.some({boxes:Io(y,s,p,c,y),start:s,finish:_})}else return zl(s,c).shared.bind(T=>Oo(T,"table",l).bind(_=>{const I=tn(c,"td,th",u(_)),W=I.length>0?I[I.length-1]:c,te=tn(s,"td,th",u(_)),_e=te.length>0?te[te.length-1]:s;return Y.some({boxes:Io(_,s,p,c,y),start:_e,finish:W})}))}))},Lp=(s,c)=>{const l=Co(s,c);return l.length>0?Y.some(l):Y.none()},Np=(s,c)=>Ln(s,l=>It(l,c)),Nu=(s,c,l)=>Qs(s,c).bind(u=>Qs(s,l).bind(p=>Go(Pp,[u,p]).map(y=>({first:u,last:p,table:y})))),hy=(s,c)=>Yr(s,"table").bind(l=>Qs(l,c).bind(u=>qa(u,s).bind(p=>p.boxes.map(y=>({boxes:y,start:p.start,finish:p.finish}))))),b0=(s,c,l,u,p)=>Np(s,p).bind(y=>uy(y,c,l).bind(T=>hy(T,u))),v0=(s,c)=>Lp(s,c),py=(s,c,l)=>Nu(s,c,l).bind(u=>{const p=I=>Oe(s,I),y="thead,tfoot,tbody,table",T=Yr(u.first,y,p),_=Yr(u.last,y,p);return T.bind(I=>_.bind(W=>Oe(I,W)?p0(u.table,u.first,u.last):Y.none()))}),y0=ze,Ui=s=>{const c=(u,p)=>z(u,p).exists(y=>parseInt(y,10)>1),l=u=>c(u,"rowspan")||c(u,"colspan");return s.length>0&&En(s,l)?Y.some(s):Y.none()},fy=(s,c,l)=>c.length<=1?Y.none():py(s,l.firstSelectedSelector,l.lastSelectedSelector).map(u=>({bounds:u,cells:c})),nh="data-mce-selected",by="td["+nh+"],th["+nh+"]",w0="["+nh+"]",et="data-mce-first-selected",vy="td["+et+"],th["+et+"]",Vp="data-mce-last-selected",yy="td["+Vp+"],th["+Vp+"]",S0=w0,Vu={selected:nh,selectedSelector:by,firstSelected:et,firstSelectedSelector:vy,lastSelected:Vp,lastSelectedSelector:yy},Pd=(s,c,l)=>({element:l,mergable:fy(c,s,Vu),unmergable:Ui(s),selection:y0(s)}),Lm=(s,c,l)=>({element:s,clipboard:c,generators:l}),Ld=(s,c,l,u)=>({selection:y0(s),clipboard:l,generators:u}),wy=s=>Xr(s).bind(c=>v0(c,Vu.firstSelectedSelector)).fold(se(s),c=>c[0]),Nm=s=>(c,l)=>{const u=co(c),p=u==="col"||u==="colgroup"?wy(c):c;return Oo(p,s,l)},Sy=Nm("th,td,caption"),zp=Nm("th,td"),Ka=s=>oa(s.model.table.getSelectedCells()),Zp=s=>Yt(Ka(s),c=>It(c,Vu.selectedSelector)),xy=s=>Xr(s[0]).map(c=>{const l=fe(c,S0);return Vl(l),[l]}),oh=(s,c)=>st(c,l=>s.selection.serializer.serialize(l.dom,{})).join(""),x0=s=>st(s,c=>c.dom.innerText).join(""),Cy=(s,c)=>{s.on("BeforeGetContent",l=>{const u=p=>{l.preventDefault(),xy(p).each(y=>{l.content=l.format==="text"?x0(y):oh(s,y)})};if(l.selection===!0){const p=Zp(s);p.length>=1&&u(p)}}),s.on("BeforeSetContent",l=>{if(l.selection===!0&&l.paste===!0){const u=Ka(s);Me(u).each(p=>{Xr(p).each(y=>{const T=Yt(Im(l.content),I=>co(I)!=="meta"),_=No("table");if(Hm(s)&&T.length===1&&_(T[0])){l.preventDefault();const I=q.fromDom(s.getDoc()),W=Rd(I),te=Lm(p,T[0],W);c.pasteCells(y,te).each(()=>{s.focus()})}})})}})},Nd=(s,c)=>({element:s,offset:c}),Vm=(s,c,l)=>s.property().isText(c)&&s.property().getText(c).trim().length===0||s.property().isComment(c)?l(c).bind(u=>Vm(s,u,l).orThunk(()=>Y.some(u))):Y.none(),Ya=(s,c)=>s.property().isText(c)?s.property().getText(c).length:s.property().children(c).length,Zc=(s,c)=>{const l=Vm(s,c,s.query().prevSibling).getOr(c);if(s.property().isText(l))return Nd(l,Ya(s,l));const u=s.property().children(l);return u.length>0?Zc(s,u[u.length-1]):Nd(l,Ya(s,l))},Ty=Zc,ky=xe(),Ey=s=>Ty(ky,s),C0=(s,c)=>{Pc(s)||Ce(s).each(u=>{const p=u.value/2;fc(s,p,u.unit),fc(c,p,u.unit)})},Uc=s=>st(s,se(0)),T0=(s,c,l,u,p)=>p(s.slice(0,c)).concat(u).concat(p(s.slice(l))),k0=s=>(c,l,u,p)=>{if(s(u)){const y=Math.max(p,c[l]-Math.abs(u)),T=Math.abs(y-c[l]);return u>=0?T:-T}else return u},sh=k0(s=>s<0),Oy=k0(mt),E0=()=>{const s=(_,I,W,te,_e)=>{const qe=sh(_,I,te,_e);return T0(_,I,W+1,[qe,0],Uc)},c=(_,I,W,te)=>{const _e=(100+W)/100,qe=Math.max(te,(_[I]+W)/_e);return st(_,(Ue,Se)=>(Se===I?qe:Ue/_e)-Ue)},l=(_,I,W,te,_e,qe)=>qe?c(_,I,te,_e):s(_,I,W,te,_e);return{resizeTable:(_,I)=>_(I),clampTableDelta:sh,calcLeftEdgeDeltas:l,calcMiddleDeltas:(_,I,W,te,_e,qe,Ue)=>l(_,W,te,_e,qe,Ue),calcRightEdgeDeltas:(_,I,W,te,_e,qe)=>{if(qe)return c(_,W,te,_e);{const Ue=sh(_,W,te,_e);return Uc(_.slice(0,W)).concat([Ue])}},calcRedestributedWidths:(_,I,W,te)=>{if(te){const qe=(I+W)/I,Ue=st(_,Se=>Se/qe);return{delta:qe*100-100,newSizes:Ue}}else return{delta:W,newSizes:_}}}},Up=()=>{const s=(T,_,I,W,te)=>{const _e=W>=0?I:_,qe=Oy(T,_e,W,te);return T0(T,_,I+1,[qe,-qe],Uc)};return{resizeTable:(T,_,I)=>{I&&T(_)},clampTableDelta:(T,_,I,W,te)=>{if(te){if(I>=0)return I;{const _e=Ae(T,(qe,Ue)=>qe+Ue-W,0);return Math.max(-_e,I)}}else return sh(T,_,I,W)},calcLeftEdgeDeltas:s,calcMiddleDeltas:(T,_,I,W,te,_e)=>s(T,I,W,te,_e),calcRightEdgeDeltas:(T,_,I,W,te,_e)=>{if(_e)return Uc(T);{const qe=W/T.length;return st(T,se(qe))}},calcRedestributedWidths:(T,_,I,W)=>({delta:0,newSizes:T})}},zm=s=>wn.fromTable(s).grid,rh=No("th"),ch=s=>En(s,c=>rh(c.element)),Ay=(s,c)=>s&&c?"sectionCells":s?"section":"cells",O0=s=>{const c=s.section==="thead",l=Ic(Wp(s.cells),"th");return s.section==="tfoot"?{type:"footer"}:c||l?{type:"header",subType:Ay(c,l)}:{type:"body"}},Wp=s=>{const c=Yt(s,l=>rh(l.element));return c.length===0?Y.some("td"):c.length===s.length?Y.some("th"):Y.none()},_y=s=>{const c=st(s,p=>O0(p).type),l=Gt(c,"header"),u=Gt(c,"footer");if(!l&&!u)return Y.some("body");{const p=Gt(c,"body");return l&&!p&&!u?Y.some("header"):!l&&!p&&u?Y.some("footer"):Y.none()}},My=s=>un(s.all,c=>{const l=O0(c);return l.type==="header"?Y.from(l.subType):Y.none()}),jp=(s,c,l)=>le(l(s.element,c),!0,s.isLocked),hi=(s,c)=>s.section!==c?De(s.element,s.cells,c,s.isNew):s,A0=()=>({transformRow:hi,transformCell:(s,c,l)=>{const u=l(s.element,c),p=co(u)!=="td"?kr(u,"td"):u;return le(p,s.isNew,s.isLocked)}}),_0=()=>({transformRow:hi,transformCell:jp}),M0=()=>({transformRow:(s,c)=>hi(s,c==="thead"?"tbody":c),transformCell:jp}),zu={getTableSectionType:(s,c)=>{const l=wn.fromTable(s);switch(My(l).getOr(c)){case"section":return A0();case"sectionCells":return _0();case"cells":return M0()}},section:A0,sectionCells:_0,cells:M0,fallback:()=>({transformRow:ze,transformCell:jp})},Zm=(s,c,l,u)=>{l===u?N(s,c):xo(s,c,l)},D0=(s,c,l)=>{Pe(Je(s,c)).fold(()=>fs(s,l),u=>us(u,l))},Vd=(s,c)=>{const l=Nn(s,c).getOrThunk(()=>{const u=q.fromTag(c,nt(s).dom);return c==="thead"?D0(s,"caption,colgroup",u):c==="colgroup"?D0(s,"caption",u):uo(s,u),u});return js(l),l},Gp=(s,c)=>{const l=[],u=[],p=Ue=>st(Ue,Se=>{Se.isNew&&l.push(Se.element);const Ge=Se.element;return js(Ge),kt(Se.cells,ve=>{ve.isNew&&u.push(ve.element),Zm(ve.element,"colspan",ve.colspan,1),Zm(ve.element,"rowspan",ve.rowspan,1),uo(Ge,ve.element)}),Ge}),y=Ue=>gn(Ue,Se=>st(Se.cells,Ge=>(Zm(Ge.element,"span",Ge.colspan,1),Ge.element))),T=(Ue,Se)=>{const Ge=Vd(s,Se),lt=(Se==="colgroup"?y:p)(Ue);bs(Ge,lt)},_=Ue=>{Nn(s,Ue).each(Qo)},I=(Ue,Se)=>{Ue.length>0?T(Ue,Se):_(Se)},W=[],te=[],_e=[],qe=[];return kt(c,Ue=>{switch(Ue.section){case"thead":W.push(Ue);break;case"tbody":te.push(Ue);break;case"tfoot":_e.push(Ue);break;case"colgroup":qe.push(Ue);break}}),I(qe,"colgroup"),I(W,"thead"),I(te,"tbody"),I(_e,"tfoot"),{newRows:l,newCells:u}},$0=s=>st(s,c=>{const l=Fs(c.element);return kt(c.cells,u=>{const p=Pr(u.element);Zm(p,"colspan",u.colspan,1),Zm(p,"rowspan",u.rowspan,1),uo(l,p)}),l}),F0=(s,c)=>st(s,l=>_r(l,c)),Dy=(s,c)=>s[c],Es=(s,c)=>{if(s.length===0)return 0;const l=s[0];return Wo(s,p=>!c(l.element,p.element)).getOr(s.length)},R0=(s,c,l,u)=>{const p=Dy(s,c),y=p.section==="colgroup",T=Es(p.cells.slice(l),u),_=y?1:Es(F0(s.slice(c),l),u);return{colspan:T,rowspan:_}},ys=(s,c)=>{const l=st(s,p=>st(p.cells,on)),u=(p,y,T,_)=>{for(let I=p;I<p+T;I++)for(let W=y;W<y+_;W++)l[I][W]=!0};return st(s,(p,y)=>{const T=gn(p.cells,(_,I)=>{if(l[y][I]===!1){const W=R0(s,y,I,c);return u(y,I,W.rowspan,W.colspan),[rl(_.element,W.rowspan,W.colspan,_.isNew)]}else return[]});return ee(p.element,T,p.section,p.isNew)})},Um=(s,c,l)=>{const u=[];kt(s.colgroups,p=>{const y=[];for(let T=0;T<s.grid.columns;T++){const _=wn.getColumnAt(s,T).map(I=>le(I.element,l,!1)).getOrThunk(()=>le(c.colGap(),!0,!1));y.push(_)}u.push(De(p.element,y,"colgroup",l))});for(let p=0;p<s.grid.rows;p++){const y=[];for(let I=0;I<s.grid.columns;I++){const W=wn.getAt(s,p,I).map(te=>le(te.element,l,te.isLocked)).getOrThunk(()=>le(c.gap(),!0,!1));y.push(W)}const T=s.all[p],_=De(T.element,y,T.section,l);u.push(_)}return u},Tc=(s,c)=>Um(s,c,!1),Zl=s=>ys(s,Oe),sa=(s,c)=>un(s.all,l=>Ln(l.cells,u=>Oe(c,u.element))),qp=(s,c,l)=>{const u=st(c.selection,y=>Mi(y).bind(T=>sa(s,T)).filter(l)),p=Ro(u);return ci(p.length>0,p)},Fr=(s,c,l,u,p)=>(y,T,_,I)=>{const W=wn.fromTable(y),te=Y.from(I==null?void 0:I.section).getOrThunk(zu.fallback);return c(W,T).map(qe=>{const Ue=Tc(W,_),Se=s(Ue,qe,Oe,p(_),te),Ge=La(Se.grid),ve=Zl(Se.grid);return{info:qe,grid:ve,cursor:Se.cursor,lockedColumns:Ge}}).bind(qe=>{const Ue=Gp(y,qe.grid),Se=Y.from(I==null?void 0:I.sizing).getOrThunk(()=>na.getTableSize(y)),Ge=Y.from(I==null?void 0:I.resize).getOrThunk(Up);return l(y,qe.grid,qe.info,{sizing:Se,resize:Ge,section:te}),u(y),N(y,Rl),qe.lockedColumns.length>0&&xo(y,Rl,qe.lockedColumns.join(",")),Y.some({cursor:qe.cursor,newRows:Ue.newRows,newCells:Ue.newCells})})},$y=(s,c)=>Mi(c.element).bind(l=>sa(s,l).map(u=>({...u,generators:c.generators,clipboard:c.clipboard}))),ah=(s,c)=>qp(s,c,mt).map(l=>({cells:l,generators:c.generators,clipboard:c.clipboard})),pi=(s,c)=>c.mergable,Zu=(s,c)=>c.unmergable,fi=(s,c)=>qp(s,c,mt),Ul=(s,c)=>qp(s,c,l=>!l.isLocked),B0=(s,c)=>sa(s,c).exists(l=>!l.isLocked),Kp=(s,c)=>En(c,l=>B0(s,l)),Fy=(s,c)=>pi(s,c).filter(l=>Kp(s,l.cells)),Ry=(s,c)=>Zu(s,c).filter(l=>Kp(s,l)),I0=(s,c,l,u)=>{const p=Bs(s).rows;if(p.length===0)return s;for(let y=c.startRow;y<=c.finishRow;y++)for(let T=c.startCol;T<=c.finishCol;T++){const _=p[y],I=_r(_,T).isLocked;Fl(_,T,le(u(),!1,I))}return s},H0=(s,c,l,u)=>{const p=Bs(s).rows;let y=!0;for(let T=0;T<p.length;T++)for(let _=0;_<hc(p[0]);_++){const I=p[T],W=_r(I,_),te=W.element,_e=l(te,c);_e&&!y?Fl(I,_,le(u(),!0,W.isLocked)):_e&&(y=!1)}return s},By=(s,c)=>Ae(s,(l,u)=>Un(l,p=>c(p.element,u.element))?l:l.concat([u]),[]),Iy=(s,c,l,u)=>(c>0&&c<s[0].cells.length&&kt(s,p=>{const y=p.cells[c-1];let T=0;const _=u();for(;p.cells.length>c+T&&l(y.element,p.cells[c+T].element);)Fl(p,c+T,le(_,!0,p.cells[c+T].isLocked)),T++}),s),Hy=(s,c,l,u)=>{const p=Bs(s).rows;if(c>0&&c<p.length){const y=p[c-1].cells,T=By(y,l);kt(T,_=>{let I=Y.none();for(let W=c;W<p.length;W++)for(let te=0;te<hc(p[0]);te++){const _e=p[W],qe=_r(_e,te);l(qe.element,_.element)&&(I.isNone()&&(I=Y.some(u())),I.each(Se=>{Fl(_e,te,le(Se,!0,qe.isLocked))}))}})}return s},P0=s=>{const c=y=>y(s),l=se(s),u=()=>p,p={tag:!0,inner:s,fold:(y,T)=>T(s),isValue:mt,isError:on,map:y=>lh.value(y(s)),mapError:u,bind:c,exists:c,forall:c,getOr:l,or:u,getOrThunk:l,orThunk:u,getOrDie:l,each:y=>{y(s)},toOptional:()=>Y.some(s)};return p},L0=s=>{const c=()=>l,l={tag:!1,inner:s,fold:(u,p)=>u(s),isValue:on,isError:mt,map:c,mapError:u=>lh.error(u(s)),bind:c,exists:on,forall:mt,getOr:ze,or:ze,getOrThunk:Ft,orThunk:Ft,getOrDie:We(String(s)),each:Re,toOptional:Y.none};return l},lh={value:P0,error:L0,fromOption:(s,c)=>s.fold(()=>L0(c),P0)},Py=(s,c,l)=>{if(s.row>=c.length||s.column>hc(c[0]))return lh.error("invalid start address out of table bounds, row: "+s.row+", column: "+s.column);const u=c.slice(s.row),p=u[0].cells.slice(s.column),y=hc(l[0]),T=l.length;return lh.value({rowDelta:u.length-T,colDelta:p.length-y})},N0=(s,c)=>{const l=hc(s[0]),u=hc(c[0]);return{rowDelta:0,colDelta:l-u}},V0=(s,c)=>{const l=s.length,u=c.length;return{rowDelta:l-u,colDelta:0}},Yp=(s,c,l,u)=>{const p=c.section==="colgroup"?l.col:l.cell;return To(s,y=>le(p(),!0,u(y)))},Ly=(s,c,l,u)=>{const p=s[s.length-1];return s.concat(To(c,()=>{const y=p.section==="colgroup"?l.colgroup:l.row,T=Cu(p,y,ze),_=Yp(T.cells.length,T,l,I=>en(u,I.toString()));return Su(T,_)}))},Os=(s,c,l,u)=>st(s,p=>{const y=Yp(c,p,l,on);return zr(p,u,y)}),z0=(s,c,l)=>st(s,u=>Ae(l,(p,y)=>{const T=Yp(1,u,c,mt)[0];return Ri(p,y,T)},u)),Wm=(s,c,l)=>{const u=c.colDelta<0?Os:ze,p=c.rowDelta<0?Ly:ze,y=La(s),T=hc(s[0]),_=Un(y,te=>te===T-1),I=u(s,Math.abs(c.colDelta),l,_?T-1:T),W=La(I);return p(I,Math.abs(c.rowDelta),l,Q(W,mt))},Ny=(s,c,l,u)=>{const p=_r(s[c],l),y=Ke(u,p.element),T=s[c];return s.length>1&&hc(T)>1&&(l>0&&y(Qr(T,l-1))||l<T.cells.length-1&&y(Qr(T,l+1))||c>0&&y(Qr(s[c-1],l))||c<s.length-1&&y(Qr(s[c+1],l)))},Xp=(s,c,l,u,p,y)=>{const T=s.row,_=s.column,I=l.length,W=hc(l[0]),te=T+I,_e=_+W+y.length,qe=Q(y,mt);for(let Ue=T;Ue<te;Ue++){let Se=0;for(let Ge=_;Ge<_e;Ge++){if(qe[Ge]){Se++;continue}Ny(c,Ue,Ge,p)&&H0(c,Qr(c[Ue],Ge),p,u.cell);const ve=Ge-_-Se,lt=_r(l[Ue-T],ve),Ut=lt.element,ln=u.replace(Ut);Fl(c[Ue],Ge,le(ln,!0,lt.isLocked))}}return c},Ur=(s,c,l)=>{const u=hc(c[0]),p=Bs(c).cols.length+s.row,y=To(u-s.column,_=>_+s.column),T=Ln(y,_=>En(l,I=>I!==_)).getOr(u-1);return{row:p,column:T}},ra=(s,c,l)=>Yt(l,u=>u>=s.column&&u<=hc(c[0])+s.column),Z0=(s,c,l,u,p)=>{const y=La(c),T=Ur(s,c,y),_=Bs(l).rows,I=ra(T,_,y);return Py(T,c,_).map(te=>{const _e={...te,colDelta:te.colDelta-I.length},qe=Wm(c,_e,u),Ue=La(qe),Se=ra(T,_,Ue);return Xp(T,qe,_,u,p,Se)})},Jp=(s,c,l,u,p)=>{Iy(c,s,p,u.cell);const y=V0(l,c),T=Wm(l,y,u),_=V0(c,T),I=Wm(c,_,u);return st(I,(W,te)=>zr(W,s,T[te].cells))},Qp=(s,c,l,u,p)=>{Hy(c,s,p,u.cell);const y=La(c),T=N0(c,l),_={...T,colDelta:T.colDelta-y.length},I=Wm(c,_,u),{cols:W,rows:te}=Bs(I),_e=La(I),qe=N0(l,c),Ue={...qe,colDelta:qe.colDelta+_e.length},Se=z0(l,u,_e),Ge=Wm(Se,Ue,u);return[...W,...te.slice(0,s),...Ge,...te.slice(s,te.length)]},Vy=(s,c,l,u)=>Cu(s,p=>u(p,l),c),U0=(s,c,l,u,p)=>{const{rows:y,cols:T}=Bs(s),_=y.slice(0,c),I=y.slice(c),W=Vy(y[l],(te,_e)=>c>0&&c<y.length&&u(Qr(y[c-1],_e),Qr(y[c],_e))?_r(y[c],_e):le(p(te.element,u),!0,te.isLocked),u,p);return[...T,..._,W,...I]},W0=(s,c,l,u,p,y,T)=>{if(l==="colgroup"||!u){const _=_r(s,p);return le(T(_.element,y),!0,!1)}else return _r(s,c)},bi=(s,c,l,u,p)=>st(s,y=>{const T=c>0&&c<hc(y)&&u(Qr(y,c-1),Qr(y,c)),_=W0(y,c,y.section,T,l,u,p);return Ri(y,c,_)}),ef=(s,c)=>gn(s,l=>{const u=l.cells,p=Mo(c,(y,T)=>T>=0&&T<y.length?y.slice(0,T).concat(y.slice(T+1)):y,u);return p.length>0?[De(l.element,p,l.section,l.isNew)]:[]}),As=(s,c,l)=>{const{rows:u,cols:p}=Bs(s);return[...p,...u.slice(0,c),...u.slice(l+1)]},fl=(s,c,l,u)=>Qr(s[c],l)!==void 0&&c>0&&u(Qr(s[c-1],l),Qr(s[c],l)),jm=(s,c,l)=>c>0&&l(Qr(s,c-1),Qr(s,c)),j0=(s,c,l,u)=>fl(s,c,l,u)||jm(s[c],l,u),G0=(s,c)=>En(c,ze)&&ch(s.cells)?mt:(u,p,y)=>!(co(u.element)==="th"&&c[y]),zy=(s,c)=>En(c,ze)&&ch(s)?mt:(u,p,y)=>!(co(u.element)==="th"&&c[p]),Wi=(s,c,l,u)=>{const p=T=>T==="row"?pa(c):Pc(c),y=T=>p(T)?`${T}group`:T;return s?rh(c)?y(l):null:u&&rh(c)?y(l==="row"?"col":"row"):null},q0=(s,c)=>(l,u,p)=>Y.some(Wi(s,l.element,"col",c[p])),zd=(s,c)=>(l,u)=>Y.some(Wi(s,l.element,"row",c[u])),ih=(s,c,l)=>le(l(s.element,c),!0,s.isLocked),tf=(s,c,l,u,p,y,T)=>{const _=I=>Un(c,W=>l(I.element,W.element));return st(s,(I,W)=>xu(I,(te,_e)=>{if(_(te)){const qe=T(te,W,_e)?p(te,l,u):te;return y(qe,W,_e).each(Ue=>{Kr(qe.element,{scope:Y.from(Ue)})}),qe}else return te}))},K0=(s,c,l)=>gn(s,(u,p)=>j0(s,p,c,l)?[]:[_r(u,c)]),Zy=(s,c,l)=>{const u=s[c];return gn(u.cells,(p,y)=>j0(s,c,y,l)?[]:[p])},Y0=(s,c,l,u,p)=>{const y=Bs(s).rows,T=gn(c,te=>K0(y,te,u)),_=st(y,te=>ch(te.cells)),I=zy(T,_),W=zd(l,_);return tf(s,T,u,p,ih,W,I)},Uy=(s,c,l,u,p,y,T)=>{const{cols:_,rows:I}=Bs(s),W=I[c[0]],te=gn(c,ve=>Zy(I,ve,p)),_e=st(W.cells,(ve,lt)=>ch(K0(I,lt,p))),qe=[...I];kt(c,ve=>{qe[ve]=T.transformRow(I[ve],l)});const Ue=[..._,...qe],Se=G0(W,_e),Ge=q0(u,_e);return tf(Ue,te,p,y,T.transformCell,Ge,Se)},uh=(s,c,l,u)=>{const p=Bs(s).rows,y=st(c,T=>_r(p[T.row],T.column));return tf(s,y,l,u,ih,Y.none,mt)},ji={generate:s=>{if(!$t(s))throw new Error("cases must be an array");if(s.length===0)throw new Error("there must be at least one case");const c=[],l={};return kt(s,(u,p)=>{const y=Wn(u);if(y.length!==1)throw new Error("one and only one name per case");const T=y[0],_=u[T];if(l[T]!==void 0)throw new Error("duplicate key detected:"+T);if(T==="cata")throw new Error("cannot have a case named cata (sorry)");if(!$t(_))throw new Error("case arguments must be an array");c.push(T),l[T]=(...I)=>{const W=I.length;if(W!==_.length)throw new Error("Wrong number of arguments to case "+T+". Expected "+_.length+" ("+_+"), got "+W);return{fold:(..._e)=>{if(_e.length!==s.length)throw new Error("Wrong number of arguments to fold. Expected "+s.length+", got "+_e.length);return _e[p].apply(null,I)},match:_e=>{const qe=Wn(_e);if(c.length!==qe.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+`
Actual: `+qe.join(","));if(!En(c,Se=>Gt(qe,Se)))throw new Error("Not all branches were specified when using match. Specified: "+qe.join(", ")+`
Required: `+c.join(", "));return _e[T].apply(null,I)},log:_e=>{console.log(_e,{constructors:c,constructor:T,params:I})}}}}),l}},Zd={...ji.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Wy=(s,c)=>s.length===0?Zd.none():s.length===1?Zd.only(0):c===0?Zd.left(0,1):c===s.length-1?Zd.right(c-1,c):c>0&&c<s.length-1?Zd.middle(c-1,c,c+1):Zd.none(),jy=(s,c,l,u,p)=>{const y=s.slice(0),T=Wy(s,c),_=se(st(y,se(0))),I=qe=>u.singleColumnWidth(y[qe],l),W=(qe,Ue)=>p.calcLeftEdgeDeltas(y,qe,Ue,l,u.minCellWidth(),u.isRelative),te=(qe,Ue,Se)=>p.calcMiddleDeltas(y,qe,Ue,Se,l,u.minCellWidth(),u.isRelative),_e=(qe,Ue)=>p.calcRightEdgeDeltas(y,qe,Ue,l,u.minCellWidth(),u.isRelative);return T.fold(_,I,W,te,_e)},Gm=(s,c,l)=>{let u=0;for(let p=s;p<c;p++)u+=l[p]!==void 0?l[p]:0;return u},Uu=(s,c)=>{const l=wn.justCells(s);return st(l,u=>{const p=Gm(u.column,u.column+u.colspan,c);return{element:u.element,width:p,colspan:u.colspan}})},dh=(s,c)=>{const l=wn.justColumns(s);return st(l,(u,p)=>({element:u.element,width:c[p],colspan:u.colspan}))},Vn=(s,c)=>{const l=wn.justCells(s);return st(l,u=>{const p=Gm(u.row,u.row+u.rowspan,c);return{element:u.element,height:p,rowspan:u.rowspan}})},Wc=(s,c)=>st(s.all,(l,u)=>({element:l.element,height:c[u]})),Wu=s=>Mo(s,(c,l)=>c+l,0),nf=(s,c)=>wn.hasColumns(s)?dh(s,c):Uu(s,c),zo=(s,c,l)=>{const u=nf(s,c);kt(u,p=>{l.setElementWidth(p.element,p.width)})},of=(s,c,l,u,p)=>{const y=wn.fromTable(s),T=p.getCellDelta(c),_=p.getWidths(y,p),I=l===y.grid.columns-1,W=u.clampTableDelta(_,l,T,p.minCellWidth(),I),te=jy(_,l,W,p,u),_e=st(te,(qe,Ue)=>qe+_[Ue]);zo(y,_e,p),u.resizeTable(p.adjustTableWidth,W,I)},J0=(s,c,l,u)=>{const p=wn.fromTable(s),y=oe(p,s,u),T=st(y,(te,_e)=>l===_e?Math.max(c+te,ss()):te),_=Vn(p,T),I=Wc(p,T);kt(I,te=>{Ll(te.element,te.height)}),kt(_,te=>{Ll(te.element,te.height)});const W=Wu(T);Ll(s,W)},Rr=(s,c,l,u,p)=>{const y=wn.generate(c),T=u.getWidths(y,u),_=u.pixelWidth(),{newSizes:I,delta:W}=p.calcRedestributedWidths(T,_,l.pixelDelta,u.isRelative);zo(y,I,u),u.adjustTableWidth(W)},Gi=(s,c,l,u)=>{const p=wn.generate(c),y=u.getWidths(p,u);zo(p,y,u)},Ud=s=>Ae(s,(l,u)=>Un(l,y=>y.column===u.column)?l:l.concat([u]),[]).sort((l,u)=>l.column-u.column),Q0=No("col"),eb=No("colgroup"),qm=s=>co(s)==="tr"||eb(s),sf=s=>{const c=vs(s,"colspan",1),l=vs(s,"rowspan",1);return{element:s,colspan:c,rowspan:l}},rf=(s,c=sf)=>{const l=_=>Q0(_.element)?s.col(_):s.cell(_),u=_=>eb(_.element)?s.colgroup(_):s.row(_),p=_=>{if(qm(_))return u({element:_});{const I=_,W=l(c(I));return y=Y.some({item:I,replacement:W}),W}};let y=Y.none();return{getOrInit:(_,I)=>y.fold(()=>p(_),W=>I(_,W.item)?W.replacement:p(_))}},cf=s=>c=>{const l=[],u=(T,_)=>Ln(l,I=>_(I.item,T)),p=T=>{const _=s==="td"?{scope:null}:{},I=c.replace(T,s,_);return l.push({item:T,sub:I}),I};return{replaceOrInit:(T,_)=>{if(qm(T)||Q0(T))return T;{const I=T;return u(I,_).fold(()=>p(I),W=>_(T,W.item)?W.sub:p(I))}}}},af=s=>z(s,"scope").map(c=>c.substr(0,3)),kc={modification:rf,transform:cf,merging:s=>({unmerge:u=>{const p=af(u);return p.each(y=>xo(u,"scope",y)),()=>{const y=s.cell({element:u,colspan:1,rowspan:1});return Xo(y,"width"),Xo(u,"width"),p.each(T=>xo(y,"scope",T)),y}},merge:u=>{const p=()=>{const y=Ro(st(u,af));if(y.length===0)return Y.none();{const T=y[0],_=["row","col"];return Un(y,W=>W!==T&&Gt(_,W))?Y.none():Y.from(T)}};return Xo(u[0],"width"),p().fold(()=>N(u[0],"scope"),y=>xo(u[0],"scope",y+"group")),se(u[0])}})},tb=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Wd=(s,c)=>{const l=s.property().name(c);return Gt(["ol","ul"],l)},ca=(s,c)=>{const l=s.property().name(c);return Gt(tb,l)},qy=(s,c)=>Gt(["br","img","hr","input"],s.property().name(c)),gr=xe(),lf=s=>ca(gr,s),qi=s=>Wd(gr,s),nb=s=>qy(gr,s),ob=s=>{const c=No("br"),l=I=>En(I,W=>c(W)||xs(W)&&Lt(W).trim().length===0),u=I=>co(I)==="li"||Fo(I,qi).isSome(),p=I=>Tr(I).map(W=>lf(W)?!0:nb(W)?co(W)!=="img":!1).getOr(!1),y=I=>Wa(I).bind(W=>{const te=p(W);return vn(W).map(_e=>te===!0||u(_e)||c(W)||lf(_e)&&!Oe(I,_e)?[]:[q.fromTag("br")])}).getOr([]),_=(()=>{const I=gn(s,W=>{const te=qt(W);return l(te)?[]:te.concat(y(W))});return I.length===0?[q.fromTag("br")]:I})();js(s[0]),bs(s[0],_)},uf=s=>Vi(s,!0),mh=s=>{Nc(s).length===0&&Qo(s)},jd=(s,c)=>({grid:s,cursor:c}),sb=s=>un(s,c=>un(c.cells,l=>{const u=l.element;return ci(uf(u),u)})),Ky=(s,c,l)=>{var u,p;const y=Bs(s).rows;return Y.from((p=(u=y[c])===null||u===void 0?void 0:u.cells[l])===null||p===void 0?void 0:p.element).filter(uf).orThunk(()=>sb(y))},Ec=(s,c,l)=>{const u=Ky(s,c,l);return jd(s,u)},sr=s=>Ae(s,(l,u)=>Un(l,y=>y.row===u.row)?l:l.concat([u]),[]).sort((l,u)=>l.row-u.row),Br=(s,c,l,u)=>{const p=c[0].row,y=sr(c),T=Mo(y,(_,I)=>({grid:U0(_.grid,p,I.row+_.delta,l,u.getOrInit),delta:_.delta+1}),{grid:s,delta:0}).grid;return Ec(T,p,c[0].column)},Oc=(s,c,l,u)=>{const p=sr(c),y=p[p.length-1],T=y.row+y.rowspan,_=Mo(p,(I,W)=>U0(I,T,W.row,l,u.getOrInit),s);return Ec(_,T,c[0].column)},Ac=(s,c,l,u)=>{const p=c.details,y=Ud(p),T=y[0].column,_=Mo(y,(I,W)=>({grid:bi(I.grid,T,W.column+I.delta,l,u.getOrInit),delta:I.delta+1}),{grid:s,delta:0}).grid;return Ec(_,p[0].row,T)},sc=(s,c,l,u)=>{const p=c.details,y=p[p.length-1],T=y.column+y.colspan,_=Ud(p),I=Mo(_,(W,te)=>bi(W,T,te.column,l,u.getOrInit),s);return Ec(I,p[0].row,T)},hr=(s,c,l,u)=>{const p=Ud(c),y=st(p,_=>_.column),T=Y0(s,y,!0,l,u.replaceOrInit);return Ec(T,c[0].row,c[0].column)},df=(s,c,l,u)=>{const p=uh(s,c,l,u.replaceOrInit);return Ec(p,c[0].row,c[0].column)},mf=(s,c,l,u)=>{const p=Ud(c),y=st(p,_=>_.column),T=Y0(s,y,!1,l,u.replaceOrInit);return Ec(T,c[0].row,c[0].column)},rb=(s,c,l,u)=>{const p=uh(s,c,l,u.replaceOrInit);return Ec(p,c[0].row,c[0].column)},gh=(s,c)=>(l,u,p,y,T)=>{const _=sr(u),I=st(_,te=>te.row),W=Uy(l,I,s,c,p,y.replaceOrInit,T);return Ec(W,u[0].row,u[0].column)},cb=gh("thead",!0),ab=gh("tbody",!1),gf=gh("tfoot",!1),hf=(s,c,l,u)=>{const p=Ud(c.details),y=ef(s,st(p,_=>_.column)),T=y.length>0?y[0].cells.length-1:0;return Ec(y,p[0].row,Math.min(p[0].column,T))},Yy=(s,c,l,u)=>{const p=sr(c),y=As(s,p[0].row,p[p.length-1].row),T=y.length>0?y.length-1:0;return Ec(y,Math.min(c[0].row,T),c[0].column)},wC=(s,c,l,u)=>{const p=c.cells;ob(p);const y=I0(s,c.bounds,l,u.merge(p));return jd(y,Y.from(p[0]))},Xy=(s,c,l,u)=>{const y=Mo(c,(T,_)=>H0(T,_,l,u.unmerge(_)),s);return jd(y,Y.from(c[0]))},Jy=(s,c,l,u)=>{const y=((I,W)=>{const te=wn.fromTable(I);return Um(te,W,!0)})(c.clipboard,c.generators),T=Sc(c.row,c.column);return Z0(T,s,y,c.generators,l).fold(()=>jd(s,Y.some(c.element)),I=>Ec(I,c.row,c.column))},hh=(s,c,l)=>{const u=gd(s,l.section),p=wn.generate(u);return Um(p,c,!0)},pf=(s,c,l,u)=>{const p=Bs(s).rows,y=c.cells[0].column,T=p[c.cells[0].row],_=hh(c.clipboard,c.generators,T),I=Jp(y,s,_,c.generators,l);return Ec(I,c.cells[0].row,c.cells[0].column)},Qy=(s,c,l,u)=>{const p=Bs(s).rows,y=c.cells[c.cells.length-1].column+c.cells[c.cells.length-1].colspan,T=p[c.cells[0].row],_=hh(c.clipboard,c.generators,T),I=Jp(y,s,_,c.generators,l);return Ec(I,c.cells[0].row,c.cells[0].column)},ew=(s,c,l,u)=>{const p=Bs(s).rows,y=c.cells[0].row,T=p[y],_=hh(c.clipboard,c.generators,T),I=Qp(y,s,_,c.generators,l);return Ec(I,c.cells[0].row,c.cells[0].column)},tw=(s,c,l,u)=>{const p=Bs(s).rows,y=c.cells[c.cells.length-1].row+c.cells[c.cells.length-1].rowspan,T=p[c.cells[0].row],_=hh(c.clipboard,c.generators,T),I=Qp(y,s,_,c.generators,l);return Ec(I,c.cells[0].row,c.cells[0].column)},nw=(s,c)=>{const l=wn.fromTable(s);return fi(l,c).bind(p=>{const y=p[p.length-1],T=p[0].column,_=y.column+y.colspan,I=Xt(st(l.all,W=>Yt(W.cells,te=>te.column>=T&&te.column<_)));return Wp(I)}).getOr("")},lb=(s,c)=>{const l=wn.fromTable(s);return fi(l,c).bind(Wp).getOr("")},He=(s,c)=>{const l=wn.fromTable(s);return fi(l,c).bind(p=>{const y=p[p.length-1],T=p[0].row,_=y.row+y.rowspan,I=l.all.slice(T,_);return _y(I)}).getOr("")},ff=(s,c,l,u)=>Gi(s,c,l,u.sizing),rr=(s,c,l,u)=>Rr(s,c,l,u.sizing,u.resize),ib=(s,c)=>Un(c,l=>l.column===0&&l.isLocked),bf=(s,c)=>Un(c,l=>l.column+l.colspan>=s.grid.columns&&l.isLocked),ub=(s,c)=>{const l=Ii(s),u=Ud(c);return Ae(u,(p,y)=>{const _=l[y.column].map($l).getOr(0);return p+_},0)},_c=s=>(c,l)=>fi(c,l).filter(u=>!(s?ib:bf)(c,u)).map(u=>({details:u,pixelDelta:ub(c,u)})),SC=(s,c)=>Ul(s,c).map(l=>({details:l,pixelDelta:-ub(s,l)})),db=s=>(c,l)=>ah(c,l).filter(u=>!(s?ib:bf)(c,u.cells)),aa=kc.transform("th"),Gd=kc.transform("td"),Km=Fr(Br,fi,Re,Re,kc.modification),Wl=Fr(Oc,fi,Re,Re,kc.modification),bl=Fr(Ac,_c(!0),rr,Re,kc.modification),vf=Fr(sc,_c(!1),rr,Re,kc.modification),Xa=Fr(hf,SC,rr,mh,kc.modification),ow=Fr(Yy,fi,Re,mh,kc.modification),mb=Fr(hr,Ul,Re,Re,aa),yf=Fr(mf,Ul,Re,Re,Gd),gb=Fr(cb,Ul,Re,Re,aa),hb=Fr(ab,Ul,Re,Re,Gd),wf=Fr(gf,Ul,Re,Re,Gd),sw=Fr(df,Ul,Re,Re,aa),pb=Fr(rb,Ul,Re,Re,Gd),rw=Fr(wC,Fy,ff,Re,kc.merging),cw=Fr(Xy,Ry,ff,Re,kc.merging),aw=Fr(Jy,$y,ff,Re,kc.modification),lw=Fr(pf,db(!0),Re,Re,kc.modification),iw=Fr(Qy,db(!1),Re,Re,kc.modification),Sf=Fr(ew,ah,Re,Re,kc.modification),uw=Fr(tw,ah,Re,Re,kc.modification),fb=nw,dw=lb,ph=He,bb=(s,c)=>s.dispatch("NewRow",{node:c}),vb=(s,c)=>s.dispatch("NewCell",{node:c}),ju=(s,c,l)=>{s.dispatch("TableModified",{...l,table:c})},mw=(s,c,l,u,p)=>{s.dispatch("TableSelectionChange",{cells:c,start:l,finish:u,otherCells:p})},gw=s=>{s.dispatch("TableSelectionClear")},xf=(s,c,l,u,p)=>{s.dispatch("ObjectResizeStart",{target:c,width:l,height:u,origin:p})},hw=(s,c,l,u,p)=>{s.dispatch("ObjectResized",{target:c,width:l,height:u,origin:p})},vi={structure:!1,style:!0},On={structure:!0,style:!1},yb={structure:!0,style:!0},rc=(s,c)=>pl(s)?na.percentageSize(c):Ni(s)?na.pixelSize(c):na.getTableSize(c),Cf=(s,c,l)=>{const u=yc=>co(Kg(yc))==="table",p=yc=>!u(s)||zm(yc).rows>1,y=yc=>!u(s)||zm(yc).columns>1,T=Li(s),_=ks(s)?Re:C0,I=yc=>{switch(Id(s)){case"section":return zu.section();case"sectionCells":return zu.sectionCells();case"cells":return zu.cells();default:return zu.getTableSectionType(yc,"section")}},W=(yc,p1)=>p1.cursor.fold(()=>{const gg=Nc(yc);return Me(gg).filter($o).map(Kl=>{l.clearSelectedCells(yc.dom);const jr=s.dom.createRng();return jr.selectNode(Kl.dom),s.selection.setRng(jr),xo(Kl,"data-mce-selected","1"),jr})},gg=>{const Kl=Ey(gg),jr=s.dom.createRng();return jr.setStart(Kl.element.dom,Kl.offset),jr.setEnd(Kl.element.dom,Kl.offset),s.selection.setRng(jr),l.clearSelectedCells(yc.dom),Y.some(jr)}),te=(yc,p1,gg,Kl)=>(jr,ix,ux=!1)=>{Vl(jr);const dx=q.fromDom(s.getDoc()),Xh=Dr(gg,dx,T),Dv={sizing:rc(s,jr),resize:ks(s)?E0():Up(),section:I(jr)};return p1(jr)?yc(jr,ix,Xh,Dv).bind(f1=>{c.refresh(jr.dom),kt(f1.newRows,um=>{bb(s,um.dom)}),kt(f1.newCells,um=>{vb(s,um.dom)});const $v=W(jr,f1);return $o(jr)&&(Vl(jr),ux||ju(s,jr.dom,Kl)),$v.map(um=>({rng:um,effect:Kl}))}):Y.none()},_e=te(ow,p,Re,On),qe=te(Xa,y,Re,On),Ue=te(Km,mt,Re,On),Se=te(Wl,mt,Re,On),Ge=te(bl,mt,_,On),ve=te(vf,mt,_,On),lt=te(rw,mt,Re,On),Ut=te(cw,mt,Re,On),ln=te(lw,mt,Re,On),Jo=te(iw,mt,Re,On),cr=te(Sf,mt,Re,On),_s=te(uw,mt,Re,On),Mc=te(aw,mt,Re,yb),ed=te(sw,mt,Re,On),im=te(pb,mt,Re,On),Mv=te(mb,mt,Re,On),Yh=te(yf,mt,Re,On),_o=te(gb,mt,Re,On),lc=te(hb,mt,Re,On),ic=te(wf,mt,Re,On);return{deleteRow:_e,deleteColumn:qe,insertRowsBefore:Ue,insertRowsAfter:Se,insertColumnsBefore:Ge,insertColumnsAfter:ve,mergeCells:lt,unmergeCells:Ut,pasteColsBefore:ln,pasteColsAfter:Jo,pasteRowsBefore:cr,pasteRowsAfter:_s,pasteCells:Mc,makeCellsHeader:ed,unmakeCellsHeader:im,makeColumnsHeader:Mv,unmakeColumnsHeader:Yh,makeRowsHeader:_o,makeRowsBody:lc,makeRowsFooter:ic,getTableRowType:ph,getTableCellType:dw,getTableColType:fb}},Tf=(s,c,l)=>{const u=vs(s,c,1);l===1||u<=1?N(s,c):xo(s,c,Math.min(l,u))},kf=(s,c)=>l=>{const u=l.column+l.colspan-1,p=l.column;return u>=s&&p<c},fh=(s,c,l)=>{if(wn.hasColumns(s)){const u=Yt(wn.justColumns(s),kf(c,l)),p=st(u,T=>{const _=Pr(T.element);return Tf(_,"span",l-c),_}),y=q.fromTag("colgroup");return bs(y,p),[y]}else return[]},pw=(s,c,l)=>st(s.all,u=>{const p=Yt(u.cells,kf(c,l)),y=st(p,_=>{const I=Pr(_.element);return Tf(I,"colspan",l-c),I}),T=q.fromTag("tr");return bs(T,y),T}),fw=(s,c)=>{const l=wn.fromTable(s);return Ul(l,c).map(p=>{const y=p[p.length-1],T=p[0].column,_=y.column+y.colspan,I=fh(l,T,_),W=pw(l,T,_);return[...I,...W]})},bw=(s,c,l)=>{const u=wn.fromTable(s);return fi(u,c).bind(y=>{const T=Um(u,l,!1),I=Bs(T).rows.slice(y[0].row,y[y.length-1].row+y[y.length-1].rowspan),W=gn(I,_e=>{const qe=Yt(_e.cells,Ue=>!Ue.isLocked);return qe.length>0?[{..._e,cells:qe}]:[]}),te=Zl(W);return ci(te.length>0,te)}).map(y=>$0(y))},Ym=ji.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),wb=(s,c,l)=>{const u=l.substring(0,l.length-s.length),p=parseFloat(u);return u===p.toString()?c(p):Ym.invalid(l)},Gu={...Ym,from:s=>Hc(s,"%")?wb("%",Ym.percent,s):Hc(s,"px")?wb("px",Ym.pixels,s):Ym.invalid(s)},vw=(s,c)=>st(s,l=>Gu.from(l).fold(()=>l,p=>p/c*100+"%",p=>p+"%")),yw=(s,c,l)=>{const u=l/c;return st(s,p=>Gu.from(p).fold(()=>p,T=>T*u+"px",T=>T/100*l+"px"))},ww=(s,c)=>{const l=s.fold(()=>se(""),u=>{const p=u/c;return se(p+"px")},()=>{const u=100/c;return se(u+"%")});return To(c,l)},Sw=(s,c,l)=>s.fold(()=>c,u=>yw(c,l,u),u=>vw(c,l)),Sb=(s,c,l)=>{const u=Gu.from(l),p=En(s,y=>y==="0px")?ww(u,s.length):Sw(u,s,c);return Cb(p)},Ef=(s,c)=>s.length===0?c:Mo(s,(l,u)=>Gu.from(u).fold(se(0),ze,ze)+l,0),xw=(s,c)=>{const l=Math.floor(s);return{value:l+c,remainder:s-l}},xb=(s,c)=>Gu.from(s).fold(se(s),l=>l+c+"px",l=>l+c+"%"),Cb=s=>{if(s.length===0)return s;const c=Mo(s,(u,p)=>{const y=Gu.from(p).fold(()=>({value:p,remainder:0}),T=>xw(T,"px"),T=>({value:T+"%",remainder:0}));return{output:[y.value].concat(u.output),remainder:u.remainder+y.remainder}},{output:[],remainder:0}),l=c.output;return l.slice(0,l.length-1).concat([xb(l[l.length-1],Math.round(c.remainder))])},qd=Gu.from,Tb=(s,c,l)=>{kt(c,u=>{const p=s.slice(u.column,u.colspan+u.column),y=Ef(p,Lc());ge(u.element,"width",y+l)})},Cw=(s,c,l)=>{kt(c,(u,p)=>{const y=Ef([s[p]],Lc());ge(u.element,"width",y+l)})},Tw=(s,c,l,u)=>{kt(l,p=>{const y=s.slice(p.row,p.rowspan+p.row),T=Ef(y,ss());ge(p.element,"height",T+u)}),kt(c,(p,y)=>{ge(p.element,"height",s[y])})},kb=s=>qd(s).fold(se("px"),se("px"),se("%")),jl=(s,c,l)=>{const u=wn.fromTable(s),p=u.all,y=wn.justCells(u),T=wn.justColumns(u);c.each(_=>{const I=kb(_),W=ea(s),te=gi(u,s),_e=Sb(te,W,_);wn.hasColumns(u)?Cw(_e,T,I):Tb(_e,y,I),ge(s,"width",_)}),l.each(_=>{const I=kb(_),W=Ou(s),te=oc(u,s,Pl),_e=Sb(te,W,_);Tw(_e,p,y,I),ge(s,"height",_)})},Xm=Za,Jm=_p,bh=ta,vh=s=>{N(s,"width")},ka=s=>{const c=Ts(s);jl(s,Y.some(c),Y.none()),vh(s)},Qm=s=>{const c=Ap(s);jl(s,Y.some(c),Y.none()),vh(s)},Eb=s=>{Xo(s,"width");const c=uu(s),l=c.length>0?c:Nc(s);kt(l,u=>{Xo(u,"width"),vh(u)}),vh(s)},Ki={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},yh=()=>q.fromTag("th"),kw=()=>q.fromTag("td"),Ew=()=>q.fromTag("col"),Ow=(s,c,l,u)=>{const p=q.fromTag("tr");for(let y=0;y<s;y++){const T=u<c||y<l?yh():kw();y<l&&xo(T,"scope","row"),u<c&&xo(T,"scope","col"),uo(T,q.fromTag("br")),uo(p,T)}return p},Aw=s=>{const c=q.fromTag("colgroup");return To(s,()=>uo(c,Ew())),c},Of=(s,c,l,u)=>To(s,p=>Ow(c,l,u,p)),_w=(s,c,l,u,p,y=Ki)=>{const T=q.fromTag("table"),_=p!=="cells";ut(T,y.styles),Us(T,y.attributes),y.colGroups&&uo(T,Aw(c));const I=Math.min(s,l);if(_&&l>0){const Ue=q.fromTag("thead");uo(T,Ue);const Ge=Of(l,c,p==="sectionCells"?I:0,u);bs(Ue,Ge)}const W=q.fromTag("tbody");uo(T,W);const te=_?s-I:s,qe=Of(te,c,_?0:l,u);return bs(W,qe),T},Mw=s=>s.dom.innerHTML,Ob=s=>{const c=q.fromTag("div"),l=q.fromDom(s.dom.cloneNode(!0));return uo(c,l),Mw(c)},Dw=(s,c)=>{s.selection.select(c.dom,!0),s.selection.collapse(!0)},Ab=(s,c)=>{Qs(c,"td,th").each(Ke(Dw,s))},$w=(s,c)=>{kt(Co(c,"tr"),l=>{bb(s,l.dom),kt(Co(l,"th,td"),u=>{vb(s,u.dom)})})},Fw=s=>sn(s)&&s.indexOf("%")!==-1,Rw=(s,c,l,u,p)=>{const y=iy(s),T={styles:y,attributes:Pm(s),colGroups:Gg(s)};return s.undoManager.ignore(()=>{const _=_w(l,c,p,u,Id(s),T);xo(_,"data-mce-id","__mce");const I=Ob(_);s.insertContent(I),s.addVisual()}),Qs(Kg(s),'table[data-mce-id="__mce"]').map(_=>(Ni(s)?Qm(_):Ru(s)?Eb(_):(pl(s)||Fw(y.width))&&ka(_),Vl(_),N(_,"data-mce-id"),$w(s,_),Ab(s,_),_.dom)).getOrNull()},_b=(s,c,l,u={})=>{const p=y=>rn(y)&&y>0;if(p(c)&&p(l)){const y=u.headerRows||0,T=u.headerColumns||0;return Rw(s,l,c,T,y)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Kd=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Af="x-tinymce/dom-table-",_f=Af+"rows",Mf=Af+"columns",Mb=s=>{const c=Kd.FakeClipboardItem(s);Kd.write([c])},Df=s=>{var c;const l=(c=Kd.read())!==null&&c!==void 0?c:[];return un(l,u=>Y.from(u.getType(s)))},Bw=s=>{Df(s).isSome()&&Kd.clear()},wh=s=>{s.fold(Iw,c=>Mb({[_f]:c}))},Sh=()=>Df(_f),Iw=()=>Bw(_f),Db=s=>{s.fold(Hw,c=>Mb({[Mf]:c}))},$b=()=>Df(Mf),Hw=()=>Bw(Mf),$f=s=>Sy(Ta(s),zi(s)).filter(Xg),Pw=s=>zp(Ta(s),zi(s)).filter(Xg),xh=(s,c)=>{const l=zi(s),u=()=>$f(s).each(ve=>{Xr(ve,l).filter($(l)).each(lt=>{const Ut=q.fromText("");if(us(lt,Ut),Qo(lt),s.dom.isEmpty(s.getBody()))s.setContent(""),s.selection.setCursorLocation();else{const ln=s.dom.createRng();ln.setStart(Ut.dom,0),ln.setEnd(Ut.dom,0),s.selection.setRng(ln),s.nodeChanged()}})}),p=ve=>$f(s).each(lt=>{Ru(s)||Ni(s)||pl(s)||Xr(lt,l).each(ln=>{ve==="relative"&&!Xm(ln)?ka(ln):ve==="fixed"&&!Jm(ln)?Qm(ln):ve==="responsive"&&!bh(ln)&&Eb(ln),Vl(ln),ju(s,ln.dom,On)})}),y=ve=>Xr(ve,l),T=ve=>Pw(s).bind(lt=>y(lt).map(Ut=>ve(Ut,lt))),_=(ve,lt)=>{T(Ut=>{s.formatter.toggle("tableclass",{value:lt},Ut.dom),ju(s,Ut.dom,vi)})},I=(ve,lt)=>{T(Ut=>{const ln=Ka(s),cr=En(ln,_s=>s.formatter.match("tablecellclass",{value:lt},_s.dom))?s.formatter.remove:s.formatter.apply;kt(ln,_s=>cr("tablecellclass",{value:lt},_s.dom)),ju(s,Ut.dom,vi)})},W=()=>{$f(s).each(ve=>{Xr(ve,l).each(lt=>{Nn(lt,"caption").fold(()=>{const Ut=q.fromTag("caption");uo(Ut,q.fromText("Caption")),Ws(lt,Ut,0),s.selection.setCursorLocation(Ut.dom,0)},Ut=>{No("caption")(ve)&&we("td",lt).each(ln=>s.selection.setCursorLocation(ln.dom,0)),Qo(Ut)}),ju(s,lt.dom,On)})})},te=ve=>{s.focus()},_e=(ve,lt=!1)=>T((Ut,ln)=>{const Jo=Pd(Ka(s),Ut,ln);ve(Ut,Jo,lt).each(te)}),qe=()=>T((ve,lt)=>{const Ut=Pd(Ka(s),ve,lt),ln=Dr(Re,q.fromDom(s.getDoc()),Y.none());return bw(ve,Ut,ln)}),Ue=()=>T((ve,lt)=>{const Ut=Pd(Ka(s),ve,lt);return fw(ve,Ut)}),Se=(ve,lt)=>lt().each(Ut=>{const ln=st(Ut,Jo=>Pr(Jo));T((Jo,cr)=>{const _s=Rd(q.fromDom(s.getDoc())),Mc=Ld(Ka(s),cr,ln,_s);ve(Jo,Mc).each(te)})}),Ge=ve=>(lt,Ut)=>ro(Ut,"type").each(ln=>{_e(ve(ln),Ut.no_events)});Ee({mceTableSplitCells:()=>_e(c.unmergeCells),mceTableMergeCells:()=>_e(c.mergeCells),mceTableInsertRowBefore:()=>_e(c.insertRowsBefore),mceTableInsertRowAfter:()=>_e(c.insertRowsAfter),mceTableInsertColBefore:()=>_e(c.insertColumnsBefore),mceTableInsertColAfter:()=>_e(c.insertColumnsAfter),mceTableDeleteCol:()=>_e(c.deleteColumn),mceTableDeleteRow:()=>_e(c.deleteRow),mceTableCutCol:()=>Ue().each(ve=>{Db(ve),_e(c.deleteColumn)}),mceTableCutRow:()=>qe().each(ve=>{wh(ve),_e(c.deleteRow)}),mceTableCopyCol:()=>Ue().each(ve=>Db(ve)),mceTableCopyRow:()=>qe().each(ve=>wh(ve)),mceTablePasteColBefore:()=>Se(c.pasteColsBefore,$b),mceTablePasteColAfter:()=>Se(c.pasteColsAfter,$b),mceTablePasteRowBefore:()=>Se(c.pasteRowsBefore,Sh),mceTablePasteRowAfter:()=>Se(c.pasteRowsAfter,Sh),mceTableDelete:u,mceTableCellToggleClass:I,mceTableToggleClass:_,mceTableToggleCaption:W,mceTableSizingMode:(ve,lt)=>p(lt),mceTableCellType:Ge(ve=>ve==="th"?c.makeCellsHeader:c.unmakeCellsHeader),mceTableColType:Ge(ve=>ve==="th"?c.makeColumnsHeader:c.unmakeColumnsHeader),mceTableRowType:Ge(ve=>{switch(ve){case"header":return c.makeRowsHeader;case"footer":return c.makeRowsFooter;default:return c.makeRowsBody}})},(ve,lt)=>s.addCommand(lt,ve)),s.addCommand("mceInsertTable",(ve,lt)=>{_b(s,lt.rows,lt.columns,lt.options)}),s.addCommand("mceTableApplyCellStyle",(ve,lt)=>{const Ut=cr=>"tablecell"+cr.toLowerCase().replace("-","");if(!ye(lt))return;const ln=Yt(Ka(s),Xg);if(ln.length===0)return;const Jo=ko(lt,(cr,_s)=>s.formatter.has(Ut(_s))&&sn(cr));_n(Jo)||(Ee(Jo,(cr,_s)=>{const Mc=Ut(_s);kt(ln,ed=>{cr===""?s.formatter.remove(Mc,{value:null},ed.dom,!0):s.formatter.apply(Mc,{value:cr},ed.dom)})}),y(ln[0]).each(cr=>ju(s,cr.dom,vi)))})},Lw=(s,c)=>{const l=zi(s),u=p=>zp(Ta(s)).bind(y=>Xr(y,l).map(T=>{const _=Pd(Ka(s),T,y);return p(T,_)})).getOr("");Ee({mceTableRowType:()=>u(c.getTableRowType),mceTableCellType:()=>u(c.getTableCellType),mceTableColType:()=>u(c.getTableColType)},(p,y)=>s.addQueryValueHandler(y,p))},Ff=ji.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Nw=(s,c,l,u)=>s.fold(c,l,u),Vw=s=>s.fold(ze,ze,ze),zw=Ff.before,Zw=Ff.on,Uw=Ff.after,Sr={before:zw,on:Zw,after:Uw,cata:Nw,getStart:Vw},Yd={create:(s,c)=>({selection:s,kill:c})},Fb=(s,c)=>{const l=s.document.createRange();return l.selectNode(c.dom),l},Rb=(s,c)=>{const l=s.document.createRange();return Bb(l,c),l},Bb=(s,c)=>s.selectNodeContents(c.dom),Ww=(s,c)=>{c.fold(l=>{s.setStartBefore(l.dom)},(l,u)=>{s.setStart(l.dom,u)},l=>{s.setStartAfter(l.dom)})},jw=(s,c)=>{c.fold(l=>{s.setEndBefore(l.dom)},(l,u)=>{s.setEnd(l.dom,u)},l=>{s.setEndAfter(l.dom)})},Xd=(s,c,l)=>{const u=s.document.createRange();return Ww(u,c),jw(u,l),u},Ch=(s,c,l,u,p)=>{const y=s.document.createRange();return y.setStart(c.dom,l),y.setEnd(u.dom,p),y},Gw=s=>({left:s.left,top:s.top,right:s.right,bottom:s.bottom,width:s.width,height:s.height}),qw=s=>{const c=s.getClientRects(),l=c.length>0?c[0]:s.getBoundingClientRect();return l.width>0||l.height>0?Y.some(l).map(Gw):Y.none()},eg=ji.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Rf=(s,c,l)=>c(q.fromDom(l.startContainer),l.startOffset,q.fromDom(l.endContainer),l.endOffset),Ib=(s,c)=>c.match({domRange:l=>({ltr:se(l),rtl:Y.none}),relative:(l,u)=>({ltr:Ol(()=>Xd(s,l,u)),rtl:Ol(()=>Y.some(Xd(s,u,l)))}),exact:(l,u,p,y)=>({ltr:Ol(()=>Ch(s,l,u,p,y)),rtl:Ol(()=>Y.some(Ch(s,p,y,l,u)))})}),vc=(s,c)=>{const l=c.ltr();return l.collapsed?c.rtl().filter(p=>p.collapsed===!1).map(p=>eg.rtl(q.fromDom(p.endContainer),p.endOffset,q.fromDom(p.startContainer),p.startOffset)).getOrThunk(()=>Rf(s,eg.ltr,l)):Rf(s,eg.ltr,l)},Hb=(s,c)=>{const l=Ib(s,c);return vc(s,l)},Bf=(s,c)=>Hb(s,c).match({ltr:(u,p,y,T)=>{const _=s.document.createRange();return _.setStart(u.dom,p),_.setEnd(y.dom,T),_},rtl:(u,p,y,T)=>{const _=s.document.createRange();return _.setStart(y.dom,T),_.setEnd(u.dom,p),_}});eg.ltr,eg.rtl;const Jd={create:(s,c,l,u)=>({start:s,soffset:c,finish:l,foffset:u})},Pb={create:(s,c,l,u)=>({start:Sr.on(s,c),finish:Sr.on(l,u)})},If=(s,c)=>{const l=Bf(s,c);return Jd.create(q.fromDom(l.startContainer),l.startOffset,q.fromDom(l.endContainer),l.endOffset)},Th=Pb.create,EC=(s,c,l,u,p,y,T)=>Oe(l,p)&&u===y?Y.none():Oo(l,"td,th",c).bind(_=>Oo(p,"td,th",c).bind(I=>Lb(s,c,_,I,T))),Lb=(s,c,l,u,p)=>Oe(l,u)?Y.none():qa(l,u,c).bind(y=>{const T=y.boxes.getOr([]);return T.length>1?(p(s,T,y.start,y.finish),Y.some(Yd.create(Y.some(Th(l,0,l,yo(l))),!0))):Y.none()}),Kw=(s,c,l,u,p)=>{const y=T=>(p.clearBeforeUpdate(l),p.selectRange(l,T.boxes,T.start,T.finish),T.boxes);return b0(u,s,c,p.firstSelectedSelector,p.lastSelectedSelector).map(y)},Qd=(s,c)=>({item:s,mode:c}),Nb=(s,c,l,u=qu)=>s.property().parent(c).map(p=>Qd(p,u)),qu=(s,c,l,u=Ku)=>l.sibling(s,c).map(p=>Qd(p,u)),Ku=(s,c,l,u=Ku)=>{const p=s.property().children(c);return l.first(p).map(T=>Qd(T,u))},Vb=[{current:Nb,next:qu,fallback:Y.none()},{current:qu,next:Ku,fallback:Y.some(Nb)},{current:Ku,next:Ku,fallback:Y.some(qu)}],zb=(s,c,l,u,p=Vb)=>Ln(p,T=>T.current===l).bind(T=>T.current(s,c,u,T.next).orThunk(()=>T.fallback.bind(_=>zb(s,c,_,u)))),Pf={left:()=>({sibling:(l,u)=>l.query().prevSibling(u),first:l=>l.length>0?Y.some(l[l.length-1]):Y.none()}),right:()=>({sibling:(l,u)=>l.query().nextSibling(u),first:l=>l.length>0?Y.some(l[0]):Y.none()})},kh=(s,c,l,u,p,y)=>zb(s,c,u,p).bind(_=>y(_.item)?Y.none():l(_.item)?Y.some(_.item):kh(s,_.item,l,_.mode,p,y)),Zb=(s,c,l,u)=>kh(s,c,l,qu,Pf.left(),u),Ub=(s,c,l,u)=>kh(s,c,l,qu,Pf.right(),u),Lf=s=>c=>s.property().children(c).length===0,Wb=(s,c,l)=>Nf(s,c,Lf(s),l),jb=(s,c,l)=>Vf(s,c,Lf(s),l),Nf=Zb,Vf=Ub,tg=xe(),Gb=(s,c)=>Wb(tg,s,c),qb=(s,c)=>jb(tg,s,c),Yw=(s,c,l)=>Nf(tg,s,c,l),Xw=(s,c,l)=>Vf(tg,s,c,l),Jw=(s,c,l)=>Fo(s,c,l).isSome(),Eh=ji.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Qw=(s,c,l)=>{const u=s.getRect(c),p=s.getRect(l);return p.right>u.left&&p.left<u.right},eS=s=>Oo(s,"tr"),Yu={...Eh,verify:(s,c,l,u,p,y,T)=>Oo(u,"td,th",T).bind(_=>Oo(c,"td,th",T).map(I=>Oe(_,I)?Oe(u,_)&&yo(_)===p?y(I):Eh.none("in same cell"):Go(eS,[_,I]).fold(()=>Qw(s,I,_)?Eh.success():y(I),W=>y(I)))).getOr(Eh.none("default")),cata:(s,c,l,u,p)=>s.fold(c,l,u,p)},MC=(s,c,l,u)=>({parent:s,children:c,element:l,index:u}),DC=s=>vn(s).bind(c=>{const l=qt(c);return tS(l,s).map(u=>MC(c,l,s,u))}),tS=(s,c)=>Wo(s,Ke(Oe,c)),Kb=No("br"),zf=(s,c,l)=>c(s,l).bind(u=>xs(u)&&Lt(u).trim().length===0?zf(u,c,l):Y.some(u)),cc=(s,c,l)=>l.traverse(c).orThunk(()=>zf(c,l.gather,s)).map(l.relative),Zf=(s,c)=>pn(s,c).filter(Kb).orThunk(()=>pn(s,c-1).filter(Kb)),ng=(s,c,l,u)=>Zf(c,l).bind(p=>u.traverse(p).fold(()=>zf(p,u.gather,s).map(u.relative),y=>DC(y).map(T=>Sr.on(T.parent,T.index)))),og=(s,c,l,u)=>(Kb(c)?cc(s,c,u):ng(s,c,l,u)).map(y=>({start:y,finish:y})),Yb=s=>Yu.cata(s,c=>Y.none(),()=>Y.none(),c=>Y.some(Nd(c,0)),c=>Y.some(Nd(c,yo(c)))),em=(s,c)=>({left:s.left,top:s.top+c,right:s.right,bottom:s.bottom+c}),sg=(s,c)=>({left:s.left,top:s.top-c,right:s.right,bottom:s.bottom-c}),Xb=(s,c,l)=>({left:s.left+c,top:s.top+l,right:s.right+c,bottom:s.bottom+l}),nS=s=>s.top,oS=s=>s.bottom,Xu=(s,c,l)=>l>=0&&l<yo(c)?s.getRangedRect(c,l,c,l+1):l>0?s.getRangedRect(c,l-1,c,l):Y.none(),rg=s=>({left:s.left,top:s.top,right:s.right,bottom:s.bottom}),Uf=(s,c)=>Y.some(s.getRect(c)),Gl=(s,c,l)=>os(c)?Uf(s,c).map(rg):xs(c)?Xu(s,c,l).map(rg):Y.none(),Wf=(s,c)=>os(c)?Uf(s,c).map(rg):xs(c)?s.getRangedRect(c,0,c,yo(c)).map(rg):Y.none(),yi=5,Oh=100,vl=ji.generate([{none:[]},{retry:["caret"]}]),sS=(s,c)=>s.left<c.left||Math.abs(c.right-s.left)<1||s.left>c.right,jf=(s,c,l)=>ir(c,lf).fold(on,u=>Wf(s,u).exists(p=>sS(l,p))),Jb=(s,c,l,u,p)=>{const y=em(p,yi);return Math.abs(l.bottom-u.bottom)<1||l.top>p.bottom?vl.retry(y):l.top===p.bottom?vl.retry(em(p,1)):jf(s,c,p)?vl.retry(Xb(y,yi,0)):vl.none()},rS={point:nS,adjuster:(s,c,l,u,p)=>{const y=sg(p,yi);return Math.abs(l.top-u.top)<1||l.bottom<p.top?vl.retry(y):l.bottom===p.top?vl.retry(sg(p,1)):jf(s,c,p)?vl.retry(Xb(y,yi,0)):vl.none()},move:sg,gather:Gb},Qb={point:oS,adjuster:Jb,move:em,gather:qb},ev=(s,c,l)=>s.elementFromPoint(c,l).filter(u=>co(u)==="table").isSome(),cS=(s,c,l,u,p)=>Gf(s,c,l,c.move(u,yi),p),Gf=(s,c,l,u,p)=>p===0?Y.some(u):ev(s,u.left,c.point(u))?cS(s,c,l,u,p-1):s.situsFromPoint(u.left,c.point(u)).bind(y=>y.start.fold(Y.none,T=>Wf(s,T).bind(_=>c.adjuster(s,T,_,l,u).fold(Y.none,I=>Gf(s,c,l,I,p-1))).orThunk(()=>Y.some(u)),Y.none)),aS=(s,c,l)=>s.point(c)>l.getInnerHeight()?Y.some(s.point(c)-l.getInnerHeight()):s.point(c)<0?Y.some(-s.point(c)):Y.none(),tv=(s,c,l)=>{const u=s.move(l,yi),p=Gf(c,s,l,u,Oh).getOr(u);return aS(s,p,c).fold(()=>c.situsFromPoint(p.left,s.point(p)),y=>(c.scrollBy(0,y),c.situsFromPoint(p.left,s.point(p)-y)))},Ah={tryUp:Ke(tv,rS),tryDown:Ke(tv,Qb),getJumpSize:se(yi)},lS=20,nv=(s,c,l)=>s.getSelection().bind(u=>og(c,u.finish,u.foffset,l).fold(()=>Y.some(Nd(u.finish,u.foffset)),p=>{const y=s.fromSitus(p),T=Yu.verify(s,u.finish,u.foffset,y.finish,y.foffset,l.failure,c);return Yb(T)})),qf=(s,c,l,u,p,y)=>y===0?Y.none():uS(s,c,l,u,p).bind(T=>{const _=s.fromSitus(T),I=Yu.verify(s,l,u,_.finish,_.foffset,p.failure,c);return Yu.cata(I,()=>Y.none(),()=>Y.some(T),W=>Oe(l,W)&&u===0?iS(s,l,u,sg,p):qf(s,c,W,0,p,y-1),W=>Oe(l,W)&&u===yo(W)?iS(s,l,u,em,p):qf(s,c,W,yo(W),p,y-1))}),iS=(s,c,l,u,p)=>Gl(s,c,l).bind(y=>ov(s,p,u(y,Ah.getJumpSize()))),ov=(s,c,l)=>{const u=dl().browser;return u.isChromium()||u.isSafari()||u.isFirefox()?c.retry(s,l):Y.none()},uS=(s,c,l,u,p)=>Gl(s,l,u).bind(y=>ov(s,p,y)),FC=(s,c,l)=>nv(s,c,l).bind(u=>qf(s,c,u.element,u.offset,l,lS).map(s.fromSitus)),dS=(s,c)=>Jw(s,l=>vn(l).exists(u=>Oe(u,c))),Hn=(s,c,l,u,p)=>Oo(u,"td,th",c).bind(y=>Oo(y,"table",c).bind(T=>dS(p,T)?FC(s,c,l).bind(_=>Oo(_.finish,"td,th",c).map(I=>({start:y,finish:I,range:_}))):Y.none())),wi=(s,c,l,u,p,y)=>y(u,c).orThunk(()=>Hn(s,c,l,u,p).map(T=>{const _=T.range;return Yd.create(Y.some(Th(_.start,_.soffset,_.finish,_.foffset)),!0)})),tm=(s,c)=>Oo(s,"tr",c).bind(l=>Oo(l,"table",c).bind(u=>{const p=Co(u,"tr");return Oe(l,p[0])?Yw(u,y=>Wa(y).isSome(),c).map(y=>{const T=yo(y);return Yd.create(Y.some(Th(y,T,y,T)),!0)}):Y.none()})),Kf=(s,c)=>Oo(s,"tr",c).bind(l=>Oo(l,"table",c).bind(u=>{const p=Co(u,"tr");return Oe(l,p[p.length-1])?Xw(u,y=>Fd(y).isSome(),c).map(y=>Yd.create(Y.some(Th(y,0,y,0)),!0)):Y.none()})),sv=(s,c,l,u,p,y,T)=>Hn(s,l,u,p,y).bind(_=>Lb(c,l,_.start,_.finish,T)),cg=s=>{let c=s;return{get:()=>c,set:p=>{c=p}}},mS=s=>{const c=cg(Y.none()),l=()=>c.get().each(s);return{clear:()=>{l(),c.set(Y.none())},isSet:()=>c.get().isSome(),get:()=>c.get(),set:_=>{l(),c.set(Y.some(_))}}},nm=()=>{const s=mS(Re);return{...s,on:l=>s.get().each(l)}},_h=(s,c)=>Oo(s,"td,th",c),rv=s=>lo(s).exists(Vi),RC=(s,c,l,u)=>{const p=nm(),y=p.clear,T=te=>{p.on(_e=>{u.clearBeforeUpdate(c),_h(te.target,l).each(qe=>{qa(_e,qe,l).each(Ue=>{const Se=Ue.boxes.getOr([]);if(Se.length===1){const Ge=Se[0],ve=u0(Ge)==="false",lt=Ic(qg(te.target),Ge,Oe);ve&&lt&&(u.selectRange(c,Se,Ge,Ge),s.selectContents(Ge))}else Se.length>1&&(u.selectRange(c,Se,Ue.start,Ue.finish),s.selectContents(qe))})})})};return{clearstate:y,mousedown:te=>{u.clear(c),_h(te.target,l).filter(rv).each(p.set)},mouseover:te=>{T(te)},mouseup:te=>{T(te),y()}}},gS={traverse:Tr,gather:qb,relative:Sr.before,retry:Ah.tryDown,failure:Yu.failedDown},hS={traverse:lr,gather:Gb,relative:Sr.before,retry:Ah.tryUp,failure:Yu.failedUp},om=s=>c=>c===s,cv=om(38),Mh=om(40),Ju=s=>s>=37&&s<=40,pS={isBackward:om(37),isForward:om(39)},av={isBackward:om(39),isForward:om(37)},BC=s=>{const c=s!==void 0?s.dom:document,l=c.body.scrollLeft||c.documentElement.scrollLeft,u=c.body.scrollTop||c.documentElement.scrollTop;return L(l,u)},fS=(s,c,l)=>{const p=(l!==void 0?l.dom:document).defaultView;p&&p.scrollBy(s,c)},ag=ji.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),bS=s=>ag.exact(s.start,s.soffset,s.finish,s.foffset),vS=s=>s.match({domRange:c=>q.fromDom(c.startContainer),relative:(c,l)=>Sr.getStart(c),exact:(c,l,u,p)=>c}),yS=ag.domRange,wS=ag.relative,SS=ag.exact,xS=s=>{const c=vS(s);return Jt(c)},CS=Jd.create,sm={domRange:yS,relative:wS,exact:SS,exactFromRange:bS,getWin:xS,range:CS},TS=(s,c,l)=>{var u,p;return Y.from((p=(u=s.dom).caretPositionFromPoint)===null||p===void 0?void 0:p.call(u,c,l)).bind(y=>{if(y.offsetNode===null)return Y.none();const T=s.dom.createRange();return T.setStart(y.offsetNode,y.offset),T.collapse(),Y.some(T)})},kS=(s,c,l)=>{var u,p;return Y.from((p=(u=s.dom).caretRangeFromPoint)===null||p===void 0?void 0:p.call(u,c,l))},ES=document.caretPositionFromPoint?TS:document.caretRangeFromPoint?kS:Y.none,OS=(s,c,l)=>{const u=q.fromDom(s.document);return ES(u,c,l).map(p=>Jd.create(q.fromDom(p.startContainer),p.startOffset,q.fromDom(p.endContainer),p.endOffset))},Dh=(s,c)=>{const l=co(s);return l==="input"?Sr.after(s):Gt(["br","img"],l)?c===0?Sr.before(s):Sr.after(s):Sr.on(s,c)},AS=(s,c)=>{const l=s.fold(Sr.before,Dh,Sr.after),u=c.fold(Sr.before,Dh,Sr.after);return sm.relative(l,u)},Ye=(s,c,l,u)=>{const p=Dh(s,c),y=Dh(l,u);return sm.relative(p,y)},pr=(s,c,l,u)=>{const y=nt(s).dom.createRange();return y.setStart(s.dom,c),y.setEnd(l.dom,u),y},$h=(s,c,l,u)=>{const p=pr(s,c,l,u),y=Oe(s,l)&&c===u;return p.collapsed&&!y},Ks=s=>Y.from(s.getSelection()),Ea=(s,c)=>{Ks(s).each(l=>{l.removeAllRanges(),l.addRange(c)})},Fh=(s,c,l,u,p)=>{const y=Ch(s,c,l,u,p);Ea(s,y)},Rh=(s,c,l,u,p,y)=>{c.collapse(l.dom,u),c.extend(p.dom,y)},Bh=(s,c)=>Hb(s,c).match({ltr:(l,u,p,y)=>{Fh(s,l,u,p,y)},rtl:(l,u,p,y)=>{Ks(s).each(T=>{if(T.setBaseAndExtent)T.setBaseAndExtent(l.dom,u,p.dom,y);else if(T.extend)try{Rh(s,T,l,u,p,y)}catch{Fh(s,p,y,l,u)}else Fh(s,p,y,l,u)})}}),lv=(s,c,l,u,p)=>{const y=Ye(c,l,u,p);Bh(s,y)},iv=(s,c,l)=>{const u=AS(c,l);Bh(s,u)},Yf=s=>{if(s.rangeCount>0){const c=s.getRangeAt(0),l=s.getRangeAt(s.rangeCount-1);return Y.some(Jd.create(q.fromDom(c.startContainer),c.startOffset,q.fromDom(l.endContainer),l.endOffset))}else return Y.none()},_S=s=>{if(s.anchorNode===null||s.focusNode===null)return Yf(s);{const c=q.fromDom(s.anchorNode),l=q.fromDom(s.focusNode);return $h(c,s.anchorOffset,l,s.focusOffset)?Y.some(Jd.create(c,s.anchorOffset,l,s.focusOffset)):Yf(s)}},uv=(s,c,l=!0)=>{const p=(l?Rb:Fb)(s,c);Ea(s,p)},MS=s=>Ks(s).filter(c=>c.rangeCount>0).bind(_S),Xf=s=>MS(s).map(c=>sm.exact(c.start,c.soffset,c.finish,c.foffset)),DS=(s,c)=>{const l=Bf(s,c);return qw(l)},dv=(s,c,l)=>OS(s,c,l),Ih=s=>{Ks(s).each(c=>c.removeAllRanges())},rm=s=>({elementFromPoint:(ve,lt)=>q.fromPoint(q.fromDom(s.document),ve,lt),getRect:ve=>ve.dom.getBoundingClientRect(),getRangedRect:(ve,lt,Ut,ln)=>{const Jo=sm.exact(ve,lt,Ut,ln);return DS(s,Jo)},getSelection:()=>Xf(s).map(ve=>If(s,ve)),fromSitus:ve=>{const lt=sm.relative(ve.start,ve.finish);return If(s,lt)},situsFromPoint:(ve,lt)=>dv(s,ve,lt).map(Ut=>Pb.create(Ut.start,Ut.soffset,Ut.finish,Ut.foffset)),clearSelection:()=>{Ih(s)},collapseSelection:(ve=!1)=>{Xf(s).each(lt=>lt.fold(Ut=>Ut.collapse(ve),(Ut,ln)=>{const Jo=ve?Ut:ln;iv(s,Jo,Jo)},(Ut,ln,Jo,cr)=>{const _s=ve?Ut:Jo,Mc=ve?ln:cr;lv(s,_s,Mc,_s,Mc)}))},setSelection:ve=>{lv(s,ve.start,ve.soffset,ve.finish,ve.foffset)},setRelativeSelection:(ve,lt)=>{iv(s,ve,lt)},selectNode:ve=>{uv(s,ve,!1)},selectContents:ve=>{uv(s,ve)},getInnerHeight:()=>s.innerHeight,getScrollY:()=>BC(q.fromDom(s.document)).top,scrollBy:(ve,lt)=>{fS(ve,lt,q.fromDom(s.document))}}),Yi=(s,c)=>({rows:s,cols:c}),Hh=(s,c,l,u)=>{const p=rm(s),y=RC(p,c,l,u);return{clearstate:y.clearstate,mousedown:y.mousedown,mouseover:y.mouseover,mouseup:y.mouseup}},Ph=s=>ir(s,$s).exists(Vi),Jf=(s,c)=>Ph(s)||Ph(c),Lh=(s,c,l,u)=>{const p=rm(s),y=()=>(u.clear(c),Y.none());return{keydown:(I,W,te,_e,qe,Ue)=>{const Se=I.raw,Ge=Se.which,ve=Se.shiftKey===!0;return Lp(c,u.selectedSelector).fold(()=>(Ju(Ge)&&!ve&&u.clearBeforeUpdate(c),Ju(Ge)&&ve&&!Jf(W,_e)?Y.none:Mh(Ge)&&ve?Ke(sv,p,c,l,gS,_e,W,u.selectRange):cv(Ge)&&ve?Ke(sv,p,c,l,hS,_e,W,u.selectRange):Mh(Ge)?Ke(wi,p,l,gS,_e,W,Kf):cv(Ge)?Ke(wi,p,l,hS,_e,W,tm):Y.none),Ut=>{const ln=Jo=>()=>un(Jo,_s=>Kw(_s.rows,_s.cols,c,Ut,u)).fold(()=>Nu(c,u.firstSelectedSelector,u.lastSelectedSelector).map(_s=>{const Mc=Mh(Ge)||Ue.isForward(Ge)?Sr.after:Sr.before;return p.setRelativeSelection(Sr.on(_s.first,0),Mc(_s.table)),u.clear(c),Yd.create(Y.none(),!0)}),_s=>Y.some(Yd.create(Y.none(),!0)));return Ju(Ge)&&ve&&!Jf(W,_e)?Y.none:Mh(Ge)&&ve?ln([Yi(1,0)]):cv(Ge)&&ve?ln([Yi(-1,0)]):Ue.isBackward(Ge)&&ve?ln([Yi(0,-1),Yi(-1,0)]):Ue.isForward(Ge)&&ve?ln([Yi(0,1),Yi(1,0)]):Ju(Ge)&&!ve?y:Y.none})()},keyup:(I,W,te,_e,qe)=>Lp(c,u.selectedSelector).fold(()=>{const Ue=I.raw,Se=Ue.which;return Ue.shiftKey===!0&&Ju(Se)&&Jf(W,_e)?EC(c,l,W,te,_e,qe,u.selectRange):Y.none()},Y.none)}},Nh=(s,c,l,u)=>{const p=rm(s);return(y,T)=>{u.clearBeforeUpdate(c),qa(y,T,l).each(_=>{const I=_.boxes.getOr([]);u.selectRange(c,I,_.start,_.finish),p.selectContents(T),p.collapseSelection()})}},Qf=(s,c)=>{const l=Vo(s,c);return l===void 0||l===""?[]:l.split(" ")},$S=(s,c,l)=>{const p=Qf(s,c).concat([l]);return xo(s,c,p.join(" ")),!0},FS=(s,c,l)=>{const u=Yt(Qf(s,c),p=>p!==l);return u.length>0?xo(s,c,u.join(" ")):N(s,c),!1},Vh=s=>s.dom.classList!==void 0,mv=s=>Qf(s,"class"),gv=(s,c)=>$S(s,"class",c),RS=(s,c)=>FS(s,"class",c),Ja=(s,c)=>{Vh(s)?s.dom.classList.add(c):gv(s,c)},Wr=s=>{(Vh(s)?s.dom.classList:mv(s)).length===0&&N(s,"class")},Qa=(s,c)=>{Vh(s)?s.dom.classList.remove(c):RS(s,c),Wr(s)},jc=(s,c)=>Vh(s)&&s.dom.classList.contains(c),zh=(s,c)=>{kt(c,l=>{Qa(s,l)})},e1=s=>c=>{Ja(c,s)},BS=s=>c=>{zh(c,s)},t1={byClass:s=>{const c=e1(s.selected),l=BS([s.selected,s.lastSelected,s.firstSelected]),u=y=>{const T=Co(y,s.selectedSelector);kt(T,l)};return{clearBeforeUpdate:u,clear:u,selectRange:(y,T,_,I)=>{u(y),kt(T,c),Ja(_,s.firstSelected),Ja(I,s.lastSelected)},selectedSelector:s.selectedSelector,firstSelectedSelector:s.firstSelectedSelector,lastSelectedSelector:s.lastSelectedSelector}},byAttr:(s,c,l)=>{const u=I=>{N(I,s.selected),N(I,s.firstSelected),N(I,s.lastSelected)},p=I=>{xo(I,s.selected,"1")},y=I=>{T(I),l()},T=I=>{const W=Co(I,`${s.selectedSelector},${s.firstSelectedSelector},${s.lastSelectedSelector}`);kt(W,u)};return{clearBeforeUpdate:T,clear:y,selectRange:(I,W,te,_e)=>{y(I),kt(W,p),xo(te,s.firstSelected,"1"),xo(_e,s.lastSelected,"1"),c(W,te,_e)},selectedSelector:s.selectedSelector,firstSelectedSelector:s.firstSelectedSelector,lastSelectedSelector:s.lastSelectedSelector}}},IS=(s,c,l,u)=>{switch(s.tag){case"none":return c();case"single":return u(s.element);case"multiple":return l(s.elements)}},n1=()=>({tag:"none"}),pv=s=>({tag:"multiple",elements:s}),fv=s=>({tag:"single",element:s}),o1=(s,c,l)=>({get:()=>v0(s(),l).fold(()=>c().fold(n1,fv),pv)}),s1=(s,c)=>{const l=s.slice(0,c[c.length-1].row+1),u=Zl(l);return gn(u,p=>{const y=p.cells.slice(0,c[c.length-1].column+1);return st(y,T=>T.element)})},Ao=(s,c)=>{const l=s.slice(c[0].row+c[0].rowspan-1,s.length),u=Zl(l);return gn(u,p=>{const y=p.cells.slice(c[0].column+c[0].colspan-1,p.cells.length);return st(y,T=>T.element)})},Xi=(s,c,l)=>{const u=wn.fromTable(s);return fi(u,c).map(y=>{const T=Um(u,l,!1),{rows:_}=Bs(T),I=s1(_,y),W=Ao(_,y);return{upOrLeftCells:I,downOrRightCells:W}})},bv=(s,c,l,u,p,y,T)=>({target:s,x:c,y:l,stop:u,prevent:p,kill:y,raw:T}),r1=s=>{const c=q.fromDom(Pt(s).getOr(s.target)),l=()=>s.stopPropagation(),u=()=>s.preventDefault(),p=jt(u,l);return bv(c,s.clientX,s.clientY,l,u,p,s)},vv=(s,c)=>l=>{s(l)&&c(r1(l))},c1=(s,c,l,u,p)=>{const y=vv(l,u);return s.dom.addEventListener(c,y,p),{unbind:Ke(a1,s,c,y,p)}},yv=(s,c,l,u)=>c1(s,c,l,u,!1),a1=(s,c,l,u)=>{s.dom.removeEventListener(c,l,u)},HS=mt,cm=(s,c,l)=>yv(s,c,HS,l),am=r1,l1=s=>!jc(q.fromDom(s.target),"ephox-snooker-resizer-bar"),i1=(s,c)=>{const l=o1(()=>q.fromDom(s.getBody()),()=>zp(Ta(s),zi(s)),Vu.selectedSelector),u=(I,W,te)=>{Xr(W).each(qe=>{const Ue=Li(s),Se=Dr(Re,q.fromDom(s.getDoc()),Ue),Ge=Ka(s),ve=Xi(qe,{selection:Ge},Se);mw(s,I,W,te,ve)})},p=()=>gw(s),y=t1.byAttr(Vu,u,p);return s.on("init",I=>{const W=s.getWin(),te=Kg(s),_e=zi(s),qe=()=>{const _o=s.selection,lc=q.fromDom(_o.getStart()),ic=q.fromDom(_o.getEnd());Go(Xr,[lc,ic]).fold(()=>y.clear(te),Re)},Ue=Hh(W,te,_e,y),Se=Lh(W,te,_e,y),Ge=Nh(W,te,_e,y),ve=_o=>_o.raw.shiftKey===!0;s.on("TableSelectorChange",_o=>Ge(_o.start,_o.finish));const lt=(_o,lc)=>{ve(_o)&&(lc.kill&&_o.kill(),lc.selection.each(ic=>{const Aa=sm.relative(ic.start,ic.finish),ua=Bf(W,Aa);s.selection.setRng(ua)}))},Ut=_o=>{const lc=am(_o);if(lc.raw.shiftKey&&Ju(lc.raw.which)){const ic=s.selection.getRng(),Aa=q.fromDom(ic.startContainer),ua=q.fromDom(ic.endContainer);Se.keyup(lc,Aa,ic.startOffset,ua,ic.endOffset).each(td=>{lt(lc,td)})}},ln=_o=>{const lc=am(_o);c.hide();const ic=s.selection.getRng(),Aa=q.fromDom(ic.startContainer),ua=q.fromDom(ic.endContainer),td=Eu(pS,av)(q.fromDom(s.selection.getStart()));Se.keydown(lc,Aa,ic.startOffset,ua,ic.endOffset,td).each(yc=>{lt(lc,yc)}),c.show()},Jo=_o=>_o.button===0,cr=_o=>_o.buttons===void 0?!0:(_o.buttons&1)!==0,_s=_o=>{Ue.clearstate()},Mc=_o=>{Jo(_o)&&l1(_o)&&Ue.mousedown(am(_o))},ed=_o=>{cr(_o)&&l1(_o)&&Ue.mouseover(am(_o))},im=_o=>{Jo(_o)&&l1(_o)&&Ue.mouseup(am(_o))},Yh=(()=>{const _o=cg(q.fromDom(te)),lc=cg(0);return{touchEnd:Aa=>{const ua=q.fromDom(Aa.target);if(No("td")(ua)||No("th")(ua)){const td=_o.get(),yc=lc.get();Oe(td,ua)&&Aa.timeStamp-yc<300&&(Aa.preventDefault(),Ge(ua,ua))}_o.set(ua),lc.set(Aa.timeStamp)}}})();s.on("dragstart",_s),s.on("mousedown",Mc),s.on("mouseover",ed),s.on("mouseup",im),s.on("touchend",Yh.touchEnd),s.on("keyup",Ut),s.on("keydown",ln),s.on("NodeChange",qe)}),s.on("PreInit",()=>{s.serializer.addTempAttr(Vu.firstSelected),s.serializer.addTempAttr(Vu.lastSelected)}),{getSelectedCells:()=>IS(l.get(),se([]),I=>st(I,W=>W.dom),I=>[I.dom]),clearSelectedCells:I=>y.clear(q.fromDom(I))}},el=s=>{let c=[];return{bind:y=>{if(y===void 0)throw new Error("Event bind error: undefined handler");c.push(y)},unbind:y=>{c=Yt(c,T=>T!==y)},trigger:(...y)=>{const T={};kt(s,(_,I)=>{T[_]=y[I]}),kt(c,_=>{_(T)})}}},Ji=s=>{const c=bt(s,u=>({bind:u.bind,unbind:u.unbind})),l=bt(s,u=>u.trigger);return{registry:c,trigger:l}},PS=(s,c)=>{let l=null;const u=()=>{An(l)||(clearTimeout(l),l=null)};return{cancel:u,throttle:(...y)=>{u(),l=setTimeout(()=>{l=null,s.apply(null,y)},c)}}},lg=s=>s.slice(0).sort(),LS=(s,c)=>{throw new Error("All required keys ("+lg(s).join(", ")+") were not specified. Specified keys were: "+lg(c).join(", ")+".")},la=s=>{throw new Error("Unsupported keys for object: "+lg(s).join(", "))},ac=(s,c)=>{if(!$t(c))throw new Error("The "+s+" fields must be an array. Was: "+c+".");kt(c,l=>{if(!sn(l))throw new Error("The value "+l+" in the "+s+" fields was not a string.")})},lm=(s,c)=>{throw new Error("All values need to be of type: "+c+". Keys ("+lg(s).join(", ")+") were not.")},HC=s=>{const c=lg(s);Ln(c,(u,p)=>p<c.length-1&&u===c[p+1]).each(u=>{throw new Error("The field: "+u+" occurs more than once in the combined fields: ["+c.join(", ")+"].")})},NS=(s,c)=>VS(s,c,{validate:yn,label:"function"}),VS=(s,c,l)=>{if(c.length===0)throw new Error("You must specify at least one required field.");return ac("required",c),HC(c),u=>{const p=Wn(u);En(c,_=>Gt(p,_))||LS(c,p),s(c,p);const T=Yt(c,_=>!l.validate(u[_],_));return T.length>0&&lm(T,l.label),u}},Dn=(s,c)=>{const l=Yt(c,u=>!Gt(s,u));l.length>0&&la(l)},u1=s=>NS(Dn,s),wv=u1(["compare","extract","mutate","sink"]),d1=u1(["element","start","stop","destroy"]),zS=u1(["forceDrop","drop","move","delayDrop"]),ZS=()=>{let s=Y.none();const c=()=>{s=Y.none()},l=(y,T)=>{const _=s.map(I=>y.compare(I,T));return s=Y.some(T),_},u=(y,T)=>{T.extract(y).each(I=>{l(T,I).each(te=>{p.trigger.move(te)})})},p=Ji({move:el(["info"])});return{onEvent:u,reset:c,events:p.registry}},US=()=>{const s=Ji({move:el(["info"])});return{onEvent:Re,reset:Re,events:s.registry}},WS=()=>{const s=US(),c=ZS();let l=s;return{on:()=>{l.reset(),l=c},off:()=>{l.reset(),l=s},isOn:()=>l===c,onEvent:(_,I)=>{l.onEvent(_,I)},events:c.events}},jS=(s,c,l)=>{let u=!1;const p=Ji({start:el([]),stop:el([])}),y=WS(),T=()=>{Se.stop(),y.isOn()&&(y.off(),p.trigger.stop())},_=PS(T,200),I=ve=>{Se.start(ve),y.on(),p.trigger.start()},W=ve=>{_.cancel(),y.onEvent(ve,c)};y.events.move.bind(ve=>{c.mutate(s,ve.info)});const te=()=>{u=!0},_e=()=>{u=!1},qe=()=>u,Ue=ve=>(...lt)=>{u&&ve.apply(null,lt)},Se=c.sink(zS({forceDrop:T,drop:Ue(T),move:Ue(W),delayDrop:Ue(_.throttle)}),l),Ge=()=>{Se.destroy()};return{element:Se.element,go:I,on:te,off:_e,isActive:qe,destroy:Ge,events:p.registry}},Sv=s=>{const c=s.replace(/\./g,"-");return{resolve:u=>c+"-"+u}},Zh=Sv("ephox-dragster").resolve,Cv=s=>{const c={layerClass:Zh("blocker"),...s},l=q.fromTag("div");return xo(l,"role","presentation"),ut(l,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Ja(l,Zh("blocker")),Ja(l,c.layerClass),{element:se(l),destroy:()=>{Qo(l)}}};var GS=wv({compare:(s,c)=>L(c.left-s.left,c.top-s.top),extract:s=>Y.some(L(s.x,s.y)),sink:(s,c)=>{const l=Cv(c),u=cm(l.element(),"mousedown",s.forceDrop),p=cm(l.element(),"mouseup",s.drop),y=cm(l.element(),"mousemove",s.move),T=cm(l.element(),"mouseout",s.delayDrop),_=()=>{l.destroy(),p.unbind(),y.unbind(),T.unbind(),u.unbind()},I=te=>{uo(te,l.element())},W=()=>{Qo(l.element())};return d1({element:l.element,start:I,stop:W,destroy:_})},mutate:(s,c)=>{s.mutate(c.left,c.top)}});const qS=(s,c={})=>{var l;const u=(l=c.mode)!==null&&l!==void 0?l:GS;return jS(s,u,c)},ig=Sv("ephox-snooker").resolve,KS=()=>{const s=Ji({drag:el(["xDelta","yDelta"])});return{mutate:(l,u)=>{s.trigger.drag(l,u)},events:s.registry}},YS=()=>{const s=Ji({drag:el(["xDelta","yDelta","target"])});let c=Y.none();const l=KS();return l.events.drag.bind(y=>{c.each(T=>{s.trigger.drag(y.xDelta,y.yDelta,T)})}),{assign:y=>{c=Y.some(y)},get:()=>c,mutate:l.mutate,events:s.registry}},ug=(s,c,l,u,p)=>{const y=q.fromTag("div");return ut(y,{position:"absolute",left:c-u/2+"px",top:l+"px",height:p+"px",width:u+"px"}),Us(y,{"data-column":s,role:"presentation"}),y},XS=(s,c,l,u,p)=>{const y=q.fromTag("div");return ut(y,{position:"absolute",left:c+"px",top:l-p/2+"px",height:p+"px",width:u+"px"}),Us(y,{"data-row":s,role:"presentation"}),y},m1=ig("resizer-bar"),Tv=ig("resizer-rows"),kv=ig("resizer-cols"),Uh=7,JS=(s,c)=>gn(s.all,(l,u)=>c(l.element)?[u]:[]),QS=(s,c)=>{const l=[];return To(s.grid.columns,u=>{wn.getColumnAt(s,u).map(y=>y.element).forall(c)&&l.push(u)}),Yt(l,u=>{const p=wn.filterItems(s,y=>y.column===u);return En(p,y=>c(y.element))})},Wh=s=>{const c=Co(s.parent(),"."+m1);kt(c,Qo)},g1=(s,c,l)=>{const u=s.origin();kt(c,p=>{p.each(y=>{const T=l(u,y);Ja(T,m1),uo(s.parent(),T)})})},Ev=(s,c,l,u)=>{g1(s,c,(p,y)=>{const T=ug(y.col,y.x-p.left,l.top-p.top,Uh,u);return Ja(T,kv),T})},ex=(s,c,l,u)=>{g1(s,c,(p,y)=>{const T=XS(y.row,l.left-p.left,y.y-p.top,u,Uh);return Ja(T,Tv),T})},tx=(s,c,l,u,p)=>{const y=dt(l),T=c.isResizable,_=u.length>0?Pl.positions(u,l):[],I=_.length>0?JS(s,T):[],W=Yt(_,(Ue,Se)=>Un(I,Ge=>Se===Ge));ex(c,W,y,$l(l));const te=p.length>0?ec.positions(p,l):[],_e=te.length>0?QS(s,T):[],qe=Yt(te,(Ue,Se)=>Un(_e,Ge=>Se===Ge));Ev(c,qe,y,h(l))},jh=(s,c)=>{if(Wh(s),s.isResizable(c)){const l=wn.fromTable(c),u=ku(l),p=Ii(l);tx(l,s,c,u,p)}},Ov=(s,c)=>{const l=Co(s.parent(),"."+m1);kt(l,c)},nx=s=>{Ov(s,c=>{ge(c,"display","none")})},no=s=>{Ov(s,c=>{ge(c,"display","block")})},ox=s=>jc(s,Tv),Si=s=>jc(s,kv),ql=ig("resizer-bar-dragging"),Gh=s=>{const c=YS(),l=qS(c,{});let u=Y.none();const p=(Se,Ge)=>Y.from(Vo(Se,Ge));c.events.drag.bind(Se=>{p(Se.target,"data-row").each(Ge=>{const ve=Ls(Se.target,"top");ge(Se.target,"top",ve+Se.yDelta+"px")}),p(Se.target,"data-column").each(Ge=>{const ve=Ls(Se.target,"left");ge(Se.target,"left",ve+Se.xDelta+"px")})});const y=(Se,Ge)=>{const ve=Ls(Se,Ge),lt=vs(Se,"data-initial-"+Ge,0);return ve-lt};l.events.stop.bind(()=>{c.get().each(Se=>{u.each(Ge=>{p(Se,"data-row").each(ve=>{const lt=y(Se,"top");N(Se,"data-initial-top"),Ue.trigger.adjustHeight(Ge,lt,parseInt(ve,10))}),p(Se,"data-column").each(ve=>{const lt=y(Se,"left");N(Se,"data-initial-left"),Ue.trigger.adjustWidth(Ge,lt,parseInt(ve,10))}),jh(s,Ge)})})});const T=(Se,Ge)=>{Ue.trigger.startAdjust(),c.assign(Se),xo(Se,"data-initial-"+Ge,Ls(Se,Ge)),Ja(Se,ql),ge(Se,"opacity","0.2"),l.go(s.parent())},_=cm(s.parent(),"mousedown",Se=>{ox(Se.target)&&T(Se.target,"top"),Si(Se.target)&&T(Se.target,"left")}),I=Se=>Oe(Se,s.view()),W=Se=>Oo(Se,"table",I).filter(Vi),te=cm(s.view(),"mouseover",Se=>{W(Se.target).fold(()=>{$o(Se.target)&&Wh(s)},Ge=>{l.isActive()&&(u=Y.some(Ge),jh(s,Ge))})}),_e=()=>{_.unbind(),te.unbind(),l.destroy(),Wh(s)},qe=Se=>{jh(s,Se)},Ue=Ji({adjustHeight:el(["table","delta","row"]),adjustWidth:el(["table","delta","column"]),startAdjust:el([])});return{destroy:_e,refresh:qe,on:l.on,off:l.off,hideBars:Ke(nx,s),showBars:Ke(no,s),events:Ue.registry}},qh={create:(s,c,l)=>{const u=Pl,p=ec,y=Gh(s),T=Ji({beforeResize:el(["table","type"]),afterResize:el(["table","type"]),startDrag:el([])});return y.events.adjustHeight.bind(_=>{const I=_.table;T.trigger.beforeResize(I,"row");const W=u.delta(_.delta,I);J0(I,W,_.row,u),T.trigger.afterResize(I,"row")}),y.events.startAdjust.bind(_=>{T.trigger.startDrag()}),y.events.adjustWidth.bind(_=>{const I=_.table;T.trigger.beforeResize(I,"col");const W=p.delta(_.delta,I),te=l(I);of(I,W,_.column,c,te),T.trigger.afterResize(I,"col")}),{on:y.on,off:y.off,refreshBars:y.refresh,hideBars:y.hideBars,showBars:y.showBars,destroy:y.destroy,events:T.registry}}},Av={only:(s,c)=>{const l=ar(s)?Ot(s):s;return{parent:se(l),view:se(s),origin:se(L(0,0)),isResizable:c}},detached:(s,c,l)=>{const u=()=>dt(c);return{parent:se(c),view:se(s),origin:u,isResizable:l}},body:(s,c,l)=>({parent:se(c),view:se(s),origin:se(L(0,0)),isResizable:l})},sx=()=>{const s=q.fromTag("div");return ut(s,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),uo(C(),s),s},rx=(s,c)=>s.inline?Av.body(q.fromDom(s.getBody()),sx(),c):Av.only(q.fromDom(s.getDoc()),c),cx=(s,c)=>{s.inline&&Qo(c.parent())},$n=s=>Vt(s)&&s.nodeName==="TABLE",Oa="bar-",Qu=s=>Vo(s,"data-mce-resize")!=="false",ax=s=>{const c=wn.fromTable(s);wn.hasColumns(c)||kt(Nc(s),l=>{const u=dn(l,"width");ge(l,"width",u),N(l,"width")})},mg=s=>{const c=nm(),l=nm(),u=nm();let p,y;const T=Se=>rc(s,Se),_=()=>i0(s)?Up():E0(),I=Se=>zm(Se).columns,W=(Se,Ge,ve)=>{const lt=Hc(Ge,"e");if(y===""&&ka(Se),ve!==p&&y!==""){ge(Se,"width",y);const Ut=_(),ln=T(Se),Jo=i0(s)||lt?I(Se)-1:0;of(Se,ve-p,Jo,Ut,ln)}else if(Yg(y)){const Ut=parseFloat(y.replace("%","")),ln=ve*Ut/p;ge(Se,"width",ln+"%")}Fp(y)&&ax(Se)},te=()=>{l.on(Se=>{Se.destroy()}),u.on(Se=>{cx(s,Se)})};return s.on("init",()=>{const Se=rx(s,Qu);if(u.set(Se),ly(s)&&Bu(s)){const Ge=_(),ve=qh.create(Se,Ge,T);ve.on(),ve.events.startDrag.bind(lt=>{c.set(s.selection.getRng())}),ve.events.beforeResize.bind(lt=>{const Ut=lt.table.dom;xf(s,Ut,Iu(Ut),Zi(Ut),Oa+lt.type)}),ve.events.afterResize.bind(lt=>{const Ut=lt.table,ln=Ut.dom;Vl(Ut),c.on(Jo=>{s.selection.setRng(Jo),s.focus()}),hw(s,ln,Iu(ln),Zi(ln),Oa+lt.type),s.undoManager.add()}),l.set(ve)}}),s.on("ObjectResizeStart",Se=>{const Ge=Se.target;if($n(Ge)){const ve=q.fromDom(Ge);kt(s.dom.select(".mce-clonedresizable"),lt=>{s.dom.addClass(lt,"mce-"+Dp(s)+"-columns")}),!Jm(ve)&&Ni(s)?Qm(ve):!Xm(ve)&&pl(s)&&ka(ve),bh(ve)&&gc(Se.origin,Oa)&&ka(ve),p=Se.width,y=Ru(s)?"":d0(s,Ge).getOr("")}}),s.on("ObjectResized",Se=>{const Ge=Se.target;if($n(Ge)){const ve=q.fromDom(Ge),lt=Se.origin;gc(lt,"corner-")&&W(ve,lt,Se.width),Vl(ve),ju(s,ve.dom,vi)}}),s.on("SwitchMode",()=>{l.on(Se=>{s.mode.isReadOnly()?Se.hideBars():Se.showBars()})}),s.on("dragstart dragend",Se=>{l.on(Ge=>{Se.type==="dragstart"?(Ge.hideBars(),Ge.off()):(Ge.on(),Ge.showBars())})}),s.on("remove",()=>{te()}),{refresh:Se=>{l.on(Ge=>Ge.refreshBars(q.fromDom(Se)))},hide:()=>{l.on(Se=>Se.hideBars())},show:()=>{l.on(Se=>Se.showBars())}}},jn=s=>{Bd(s);const c=mg(s),l=i1(s,c),u=Cf(s,c,l);return xh(s,u),Lw(s,u),Cy(s,u),{getSelectedCells:l.getSelectedCells,clearSelectedCells:l.clearSelectedCells}},lx=s=>({table:jn(s)});var _v=()=>{Po.add("dom",lx)};_v()})();const bq=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var iM={};(function(){var Po=tinymce.util.Tools.resolve("tinymce.PluginManager");const Lo=(D,U,ee)=>{var le;return ee(D,U.prototype)?!0:((le=D.constructor)===null||le===void 0?void 0:le.name)===U.name},So=D=>{const U=typeof D;return D===null?"null":U==="object"&&Array.isArray(D)?"array":U==="object"&&Lo(D,String,(ee,le)=>le.isPrototypeOf(ee))?"string":U},zn=D=>U=>So(U)===D,Rn=D=>U=>typeof U===D,io=D=>U=>D===U,sn=zn("string"),ye=zn("object"),$t=zn("array"),An=io(null),Pn=Rn("boolean"),Zn=D=>D==null,pt=D=>!Zn(D),Vt=Rn("function"),yn=(D,U)=>{if($t(D)){for(let ee=0,le=D.length;ee<le;++ee)if(!U(D[ee]))return!1;return!0}return!1},rn=()=>{},Re=D=>()=>D,jt=(D,U)=>D===U;class tt{constructor(U,ee){this.tag=U,this.value=ee}static some(U){return new tt(!0,U)}static none(){return tt.singletonNone}fold(U,ee){return this.tag?ee(this.value):U()}isSome(){return this.tag}isNone(){return!this.tag}map(U){return this.tag?tt.some(U(this.value)):tt.none()}bind(U){return this.tag?U(this.value):tt.none()}exists(U){return this.tag&&U(this.value)}forall(U){return!this.tag||U(this.value)}filter(U){return!this.tag||U(this.value)?this:tt.none()}getOr(U){return this.tag?this.value:U}or(U){return this.tag?this:U}getOrThunk(U){return this.tag?this.value:U()}orThunk(U){return this.tag?this:U()}getOrDie(U){if(this.tag)return this.value;throw new Error(U??"Called getOrDie on None")}static from(U){return pt(U)?tt.some(U):tt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(U){this.tag&&U(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}tt.singletonNone=new tt(!1);const se=Array.prototype.indexOf,ze=Array.prototype.push,mo=(D,U)=>se.call(D,U),Ke=(D,U)=>mo(D,U)>-1,$=(D,U)=>{const ee=D.length,le=new Array(ee);for(let De=0;De<ee;De++){const vt=D[De];le[De]=U(vt,De)}return le},We=(D,U)=>{for(let ee=0,le=D.length;ee<le;ee++){const De=D[ee];U(De,ee)}},Ft=(D,U,ee)=>(We(D,(le,De)=>{ee=U(ee,le,De)}),ee),on=D=>{const U=[];for(let ee=0,le=D.length;ee<le;++ee){if(!$t(D[ee]))throw new Error("Arr.flatten item "+ee+" was not an array, input: "+D);ze.apply(U,D[ee])}return U},mt=(D,U)=>on($(D,U)),Y=(D,U)=>{for(let ee=0;ee<D.length;ee++){const le=U(D[ee],ee);if(le.isSome())return le}return tt.none()},Jn=(D,U,ee=jt)=>D.exists(le=>ee(le,U)),Te=D=>{const U=[],ee=le=>{U.push(le)};for(let le=0;le<D.length;le++)D[le].each(ee);return U},gt=(D,U)=>D?tt.some(U):tt.none(),v=D=>U=>U.options.get(D),Gt=D=>{const U=D.options.register;U("link_assume_external_targets",{processor:ee=>{const le=sn(ee)||Pn(ee);return le?ee===!0?{value:1,valid:le}:ee==="http"||ee==="https"?{value:ee,valid:le}:{value:0,valid:le}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),U("link_context_toolbar",{processor:"boolean",default:!1}),U("link_list",{processor:ee=>sn(ee)||Vt(ee)||yn(ee,ye)}),U("link_default_target",{processor:"string"}),U("link_default_protocol",{processor:"string",default:"https"}),U("link_target_list",{processor:ee=>Pn(ee)||yn(ee,ye),default:!0}),U("link_rel_list",{processor:"object[]",default:[]}),U("link_class_list",{processor:"object[]",default:[]}),U("link_title",{processor:"boolean",default:!0}),U("allow_unsafe_link_target",{processor:"boolean",default:!1}),U("link_quicklink",{processor:"boolean",default:!1})},Un=v("link_assume_external_targets"),To=v("link_context_toolbar"),st=v("link_list"),kt=v("link_default_target"),Sn=v("link_default_protocol"),Kn=v("link_target_list"),Yt=v("link_rel_list"),Mo=v("link_class_list"),Ae=v("link_title"),Ve=v("allow_unsafe_link_target"),Ln=v("link_quicklink");var Wo=tinymce.util.Tools.resolve("tinymce.util.Tools");const Xt=D=>sn(D.value)?D.value:"",gn=D=>sn(D.text)?D.text:sn(D.title)?D.title:"",En=(D,U)=>{const ee=[];return Wo.each(D,le=>{const De=gn(le);if(le.menu!==void 0){const vt=En(le.menu,U);ee.push({text:De,items:vt})}else{const vt=U(le);ee.push({text:De,value:vt})}}),ee},Vs=(D=Xt)=>U=>tt.from(U).map(ee=>En(ee,D)),ie={sanitize:D=>Vs(Xt)(D),sanitizeWith:Vs,createUi:(D,U)=>ee=>({name:D,type:"listbox",label:U,items:ee}),getValue:Xt},Me=Object.keys,Pe=Object.hasOwnProperty,un=(D,U)=>{const ee=Me(D);for(let le=0,De=ee.length;le<De;le++){const vt=ee[le],eo=D[vt];U(eo,vt)}},Wn=D=>(U,ee)=>{D[ee]=U},Fe=(D,U,ee,le)=>{un(D,(De,vt)=>{(U(De,vt)?ee:le)(De,vt)})},Ee=(D,U)=>{const ee={};return Fe(D,U,Wn(ee),rn),ee},bt=(D,U)=>Pe.call(D,U),Mt=(D,U)=>bt(D,U)&&D[U]!==void 0&&D[U]!==null;var Bt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Bn=tinymce.util.Tools.resolve("tinymce.util.URI");const ko=D=>pt(D)&&D.nodeName.toLowerCase()==="a",xn=D=>ko(D)&&!!en(D),cn=(D,U)=>{if(D.collapsed)return[];{const ee=D.cloneContents(),le=ee.firstChild,De=new Bt(le,ee),vt=[];let eo=le;do U(eo)&&vt.push(eo);while(eo=De.next());return vt}},ro=D=>/^\w+:/i.test(D),en=D=>{var U,ee;return(ee=(U=D.getAttribute("data-mce-href"))!==null&&U!==void 0?U:D.getAttribute("href"))!==null&&ee!==void 0?ee:""},an=(D,U)=>{const ee=["noopener"],le=D?D.split(/\s+/):[],De=Yn=>Wo.trim(Yn.sort().join(" ")),vt=Yn=>(Yn=eo(Yn),Yn.length>0?Yn.concat(ee):ee),eo=Yn=>Yn.filter(Eo=>Wo.inArray(ee,Eo)===-1),jo=U?vt(le):eo(le);return jo.length>0?De(jo):""},_n=D=>D.replace(/\uFEFF/g,""),hn=(D,U)=>(U=U||ws(D.selection.getRng())[0]||D.selection.getNode(),Cn(U)?tt.from(D.dom.select("a[href]",U)[0]):tt.from(D.dom.getParent(U,"a[href]"))),po=(D,U)=>hn(D,U).isSome(),zs=(D,U)=>{const ee=U.fold(()=>D.getContent({format:"text"}),le=>le.innerText||le.textContent||"");return _n(ee)},ws=D=>cn(D,xn),hs=D=>Wo.grep(D,xn),ns=D=>hs(D).length>0,Do=D=>ws(D).length>0,Xe=D=>{const U=D.schema.getTextInlineElements(),ee=vt=>vt.nodeType===1&&!ko(vt)&&!bt(U,vt.nodeName.toLowerCase());if(hn(D).exists(vt=>vt.hasAttribute("data-mce-block")))return!1;const De=D.selection.getRng();return De.collapsed?!0:cn(De,ee).length===0},Cn=D=>pt(D)&&D.nodeName==="FIGURE"&&/\bimage\b/i.test(D.className),Ko=D=>Ft(["title","rel","class","target"],(ee,le)=>(D[le].each(De=>{ee[le]=De.length>0?De:null}),ee),{href:D.href}),Ds=(D,U)=>(U==="http"||U==="https")&&!ro(D)?U+"://"+D:D,ps=(D,U)=>{const ee={...U};if(Yt(D).length===0&&!Ve(D)){const le=an(ee.rel,ee.target==="_blank");ee.rel=le||null}return tt.from(ee.target).isNone()&&Kn(D)===!1&&(ee.target=kt(D)),ee.href=Ds(ee.href,Un(D)),ee},is=(D,U,ee,le)=>{ee.each(De=>{bt(U,"innerText")?U.innerText=De:U.textContent=De}),D.dom.setAttribs(U,le),D.selection.select(U)},co=(D,U,ee,le)=>{const De=D.dom;Cn(U)?No(De,U,le):ee.fold(()=>{D.execCommand("mceInsertLink",!1,le)},vt=>{D.insertContent(De.createHTML("a",le,De.encode(vt)))})},Zs=(D,U,ee)=>{const le=D.selection.getNode(),De=hn(D,le),vt=ps(D,Ko(ee));D.undoManager.transact(()=>{ee.href===U.href&&U.attach(),De.fold(()=>{co(D,le,ee.text,vt)},eo=>{D.focus(),is(D,eo,ee.text,vt)})})},Ss=D=>{const U=D.dom,ee=D.selection,le=ee.getBookmark(),De=ee.getRng().cloneRange(),vt=U.getParent(De.startContainer,"a[href]",D.getBody()),eo=U.getParent(De.endContainer,"a[href]",D.getBody());vt&&De.setStartBefore(vt),eo&&De.setEndAfter(eo),ee.setRng(De),D.execCommand("unlink"),ee.moveToBookmark(le)},dc=D=>{D.undoManager.transact(()=>{const U=D.selection.getNode();Cn(U)?Ir(D,U):Ss(D),D.focus()})},$s=D=>{const{class:U,href:ee,rel:le,target:De,text:vt,title:eo}=D;return Ee({class:U.getOrNull(),href:ee,rel:le.getOrNull(),target:De.getOrNull(),text:vt.getOrNull(),title:eo.getOrNull()},(jo,Yn)=>An(jo)===!1)},os=(D,U)=>{const ee=D.options.get,le={allow_html_data_urls:ee("allow_html_data_urls"),allow_script_urls:ee("allow_script_urls"),allow_svg_data_urls:ee("allow_svg_data_urls")},De=U.href;return{...U,href:Bn.isDomSafe(De,"a",le)?De:""}},xs=(D,U,ee)=>{const le=os(D,ee);D.hasPlugin("rtc",!0)?D.execCommand("createlink",!1,$s(le)):Zs(D,U,le)},ar=D=>{D.hasPlugin("rtc",!0)?D.execCommand("unlink"):dc(D)},Ir=(D,U)=>{var ee;const le=D.dom.select("img",U)[0];if(le){const De=D.dom.getParents(le,"a[href]",U)[0];De&&((ee=De.parentNode)===null||ee===void 0||ee.insertBefore(le,De),D.dom.remove(De))}},No=(D,U,ee)=>{var le;const De=D.select("img",U)[0];if(De){const vt=D.create("a",ee);(le=De.parentNode)===null||le===void 0||le.insertBefore(vt,De),vt.appendChild(De)}},fo=D=>Mt(D,"items"),xo=(D,U)=>Y(U,ee=>fo(ee)?xo(D,ee.items):gt(ee.value===D,ee)),Us=(D,U,ee,le)=>{const De=le[U],vt=D.length>0;return De!==void 0?xo(De,ee).map(eo=>({url:{value:eo.value,meta:{text:vt?D:eo.text,attach:rn}},text:vt?D:eo.text})):tt.none()},Kr=(D,U)=>U==="link"?D.link:U==="anchor"?D.anchor:tt.none(),z={init:(D,U)=>{const ee={text:D.text,title:D.title},le=Yn=>{var Eo;return gt(ee.title.length<=0,tt.from((Eo=Yn.meta)===null||Eo===void 0?void 0:Eo.title).getOr(""))},De=Yn=>{var Eo;return gt(ee.text.length<=0,tt.from((Eo=Yn.meta)===null||Eo===void 0?void 0:Eo.text).getOr(Yn.value))},vt=Yn=>{const Eo=De(Yn.url),Xn=le(Yn.url);return Eo.isSome()||Xn.isSome()?tt.some({...Eo.map(Cs=>({text:Cs})).getOr({}),...Xn.map(Cs=>({title:Cs})).getOr({})}):tt.none()},eo=(Yn,Eo)=>{const Xn=Kr(U,Eo).getOr([]);return Us(ee.text,Eo,Xn,Yn)};return{onChange:(Yn,Eo)=>{const Xn=Eo.name;return Xn==="url"?vt(Yn()):Ke(["anchor","link"],Xn)?eo(Yn(),Xn):((Xn==="text"||Xn==="title")&&(ee[Xn]=Yn()[Xn]),tt.none())}}},getDelta:Us};var N=tinymce.util.Tools.resolve("tinymce.util.Delay");const de=(D,U,ee)=>{const le=D.selection.getRng();N.setEditorTimeout(D,()=>{D.windowManager.confirm(U,De=>{D.selection.setRng(le),ee(De)})})},pe=D=>{const U=D.href;return U.indexOf("@")>0&&U.indexOf("/")===-1&&U.indexOf("mailto:")===-1?tt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:le=>({...le,href:"mailto:"+U})}):tt.none()},rt=(D,U)=>ee=>{const le=ee.href;return D===1&&!ro(le)||D===0&&/^\s*www(\.|\d\.)/i.test(le)?tt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${U}:// prefix?`,preprocess:vt=>({...vt,href:U+"://"+le})}):tt.none()},zt={preprocess:(D,U)=>Y([pe,rt(Un(D),Sn(D))],ee=>ee(U)).fold(()=>Promise.resolve(U),ee=>new Promise(le=>{de(D,ee.message,De=>{le(De?ee.preprocess(U):U)})}))},q={getAnchors:D=>{const U=D.dom.select("a:not([href])"),ee=mt(U,le=>{const De=le.name||le.id;return De?[{text:De,value:"#"+De}]:[]});return ee.length>0?tt.some([{text:"None",value:""}].concat(ee)):tt.none()}},V={getClasses:D=>{const U=Mo(D);return U.length>0?ie.sanitize(U):tt.none()}},j=D=>{try{return tt.some(JSON.parse(D))}catch{return tt.none()}},Oe={getLinks:D=>{const U=le=>D.convertURL(le.value||le.url||"","href"),ee=st(D);return new Promise(le=>{sn(ee)?fetch(ee).then(De=>De.ok?De.text().then(j):Promise.reject()).then(le,()=>le(tt.none())):Vt(ee)?ee(De=>le(tt.some(De))):le(tt.from(ee))}).then(le=>le.bind(ie.sanitizeWith(U)).map(De=>De.length>0?[{text:"None",value:""}].concat(De):De))}},it={getRels:(D,U)=>{const ee=Yt(D);if(ee.length>0){const le=Jn(U,"_blank"),De=Ve(D)===!1,vt=jo=>an(ie.getValue(jo),le);return(De?ie.sanitizeWith(vt):ie.sanitize)(ee)}return tt.none()}},nt=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ot={getTargets:D=>{const U=Kn(D);return $t(U)?ie.sanitize(U).orThunk(()=>tt.some(nt)):U===!1?tt.none():tt.some(nt)}},Jt=(D,U,ee)=>{const le=D.getAttrib(U,ee);return le!==null&&le.length>0?tt.some(le):tt.none()},vn=(D,U)=>{const ee=D.dom,De=Xe(D)?tt.some(zs(D.selection,U)):tt.none(),vt=U.bind(Xn=>tt.from(ee.getAttrib(Xn,"href"))),eo=U.bind(Xn=>tt.from(ee.getAttrib(Xn,"target"))),jo=U.bind(Xn=>Jt(ee,Xn,"rel")),Yn=U.bind(Xn=>Jt(ee,Xn,"class")),Eo=U.bind(Xn=>Jt(ee,Xn,"title"));return{url:vt,text:De,title:Eo,target:eo,rel:jo,linkClass:Yn}},Cr={collect:(D,U)=>Oe.getLinks(D).then(ee=>{const le=vn(D,U);return{anchor:le,catalogs:{targets:Ot.getTargets(D),rels:it.getRels(D,le.target),classes:V.getClasses(D),anchor:q.getAnchors(D),link:ee},optNode:U,flags:{titleEnabled:Ae(D)}}})},lr=(D,U)=>ee=>{const le=ee.getData();if(!le.url.value){ar(D),ee.close();return}const De=jo=>tt.from(le[jo]).filter(Yn=>!Jn(U.anchor[jo],Yn)),vt={href:le.url.value,text:De("text"),target:De("target"),rel:De("rel"),class:De("linkClass"),title:De("title")},eo={href:le.url.value,attach:le.url.meta!==void 0&&le.url.meta.attach?le.url.meta.attach:rn};zt.preprocess(D,vt).then(jo=>{xs(D,eo,jo)}),ee.close()},Tr=D=>{const U=hn(D);return Cr.collect(D,U)},qt=(D,U)=>{const ee=D.anchor,le=ee.url.getOr("");return{url:{value:le,meta:{original:{value:le}}},text:ee.text.getOr(""),title:ee.title.getOr(""),anchor:le,link:le,rel:ee.rel.getOr(""),target:ee.target.or(U).getOr(""),linkClass:ee.linkClass.getOr("")}},pn=(D,U,ee)=>{const le=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],De=D.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),vt=D.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],eo=tt.from(kt(ee)),jo=qt(D,eo),Yn=D.catalogs,Eo=z.init(jo,Yn);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:on([le,De,vt,Te([Yn.anchor.map(ie.createUi("anchor","Anchors")),Yn.rels.map(ie.createUi("rel","Rel")),Yn.targets.map(ie.createUi("target","Open link in...")),Yn.link.map(ie.createUi("link","Link list")),Yn.classes.map(ie.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:jo,onChange:(Cs,{name:Nr})=>{Eo.onChange(Cs.getData,{name:Nr}).each(Bc=>{Cs.setData(Bc)})},onSubmit:U}},In=D=>{Tr(D).then(ee=>{const le=lr(D,ee);return pn(ee,le,D)}).then(ee=>{D.windowManager.open(ee)})},Xs=D=>{D.addCommand("mceLink",(U,ee)=>{(ee==null?void 0:ee.dialog)===!0||!Ln(D)?In(D):D.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var us=tinymce.util.Tools.resolve("tinymce.util.VK");const fs=(D,U)=>{document.body.appendChild(D),D.dispatchEvent(U),document.body.removeChild(D)},uo=D=>{const U=document.createElement("a");U.target="_blank",U.href=D,U.rel="noreferrer noopener";const ee=document.createEvent("MouseEvents");ee.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),fs(U,ee)},Ws=(D,U)=>D.dom.getParent(U,"a[href]"),Kc=D=>Ws(D,D.selection.getStart()),Qn=D=>D.altKey===!0&&D.shiftKey===!1&&D.ctrlKey===!1&&D.metaKey===!1,bs=(D,U)=>{if(U){const ee=en(U);if(/^#/.test(ee)){const le=D.dom.select(ee);le.length&&D.selection.scrollIntoView(le[0],!0)}else uo(U.href)}},js=D=>()=>{D.execCommand("mceLink",!1,{dialog:!0})},Qo=D=>()=>{bs(D,Kc(D))},yr=D=>{D.on("click",U=>{const ee=Ws(D,U.target);ee&&us.metaKeyPressed(U)&&(U.preventDefault(),bs(D,ee))}),D.on("keydown",U=>{if(!U.isDefaultPrevented()&&U.keyCode===13&&Qn(U)){const ee=Kc(D);ee&&(U.preventDefault(),bs(D,ee))}})},Hr=(D,U)=>(D.on("NodeChange",U),()=>D.off("NodeChange",U)),Fs=D=>U=>{const ee=()=>{U.setActive(!D.mode.isReadOnly()&&po(D,D.selection.getNode())),U.setEnabled(D.selection.isEditable())};return ee(),Hr(D,ee)},Pr=D=>U=>{const ee=()=>{U.setEnabled(D.selection.isEditable())};return ee(),Hr(D,ee)},Lr=D=>(D.selection.isCollapsed()?hs(D.dom.getParents(D.selection.getStart())):ws(D.selection.getRng())).length===1,Ba=D=>U=>{const ee=()=>U.setEnabled(Lr(D));return ee(),Hr(D,ee)},kr=D=>U=>{const ee=vt=>ns(vt)||Do(D.selection.getRng()),le=D.dom.getParents(D.selection.getStart()),De=vt=>{U.setEnabled(ee(vt)&&D.selection.isEditable())};return De(le),Hr(D,vt=>De(vt.parents))},Yc=D=>{D.addShortcut("Meta+K","",()=>{D.execCommand("mceLink")})},Js=D=>{D.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:js(D),onSetup:Fs(D)}),D.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Qo(D),onSetup:Ba(D)}),D.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>ar(D),onSetup:kr(D)})},mc=D=>{D.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Qo(D),onSetup:Ba(D)}),D.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Pr(D),onAction:js(D)}),D.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>ar(D),onSetup:kr(D)})},Sc=D=>{const U="link unlink openlink",ee="link";D.ui.registry.addContextMenu("link",{update:le=>D.dom.isEditable(le)?ns(D.dom.getParents(le,"a"))?U:ee:""})},Xc=D=>{const U=De=>{De.selection.collapse(!1)},ee=De=>{const vt=D.selection.getNode();return De.setEnabled(po(D,vt)),rn},le=De=>{const vt=hn(D),eo=Xe(D);if(vt.isNone()&&eo){const jo=zs(D.selection,vt);return gt(jo.length===0,De)}else return tt.none()};D.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Fs(D)},label:"Link",predicate:De=>To(D)&&po(D,De),initValue:()=>hn(D).fold(Re(""),en),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:De=>{const vt=D.selection.getNode();return De.setActive(po(D,vt)),Fs(D)(De)},onAction:De=>{const vt=De.getValue(),eo=le(vt);xs(D,{href:vt,attach:rn},{href:vt,text:eo,title:tt.none(),rel:tt.none(),target:tt.none(),class:tt.none()}),U(D),De.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:ee,onAction:De=>{ar(D),De.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:ee,onAction:De=>{Qo(D)(),De.hide()}}]})};var rl=()=>{Po.add("link",D=>{Gt(D),Js(D),mc(D),Sc(D),Xc(D),yr(D),Xs(D),Yc(D)})};rl()})();const vq=ma({__proto__:null,default:iM},[iM]);var uM={};(function(){var Po=tinymce.util.Tools.resolve("tinymce.PluginManager");const Lo=(h,S,O)=>{var L;return O(h,S.prototype)?!0:((L=h.constructor)===null||L===void 0?void 0:L.name)===S.name},So=h=>{const S=typeof h;return h===null?"null":S==="object"&&Array.isArray(h)?"array":S==="object"&&Lo(h,String,(O,L)=>L.isPrototypeOf(O))?"string":S},zn=h=>S=>So(S)===h,Rn=h=>S=>typeof S===h,io=zn("string"),sn=zn("object"),ye=zn("array"),$t=Rn("boolean"),An=h=>h==null,Pn=h=>!An(h),Zn=Rn("function"),pt=Rn("number"),Vt=()=>{},yn=(h,S)=>O=>h(S(O)),rn=h=>()=>h,Re=(h,S)=>h===S;function jt(h,...S){return(...O)=>{const L=S.concat(O);return h.apply(null,L)}}const tt=h=>S=>!h(S),se=rn(!1);class ze{constructor(S,O){this.tag=S,this.value=O}static some(S){return new ze(!0,S)}static none(){return ze.singletonNone}fold(S,O){return this.tag?O(this.value):S()}isSome(){return this.tag}isNone(){return!this.tag}map(S){return this.tag?ze.some(S(this.value)):ze.none()}bind(S){return this.tag?S(this.value):ze.none()}exists(S){return this.tag&&S(this.value)}forall(S){return!this.tag||S(this.value)}filter(S){return!this.tag||S(this.value)?this:ze.none()}getOr(S){return this.tag?this.value:S}or(S){return this.tag?this:S}getOrThunk(S){return this.tag?this.value:S()}orThunk(S){return this.tag?this:S()}getOrDie(S){if(this.tag)return this.value;throw new Error(S??"Called getOrDie on None")}static from(S){return Pn(S)?ze.some(S):ze.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(S){this.tag&&S(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ze.singletonNone=new ze(!1);const mo=Array.prototype.slice,Ke=Array.prototype.indexOf,$=Array.prototype.push,We=(h,S)=>Ke.call(h,S),Ft=(h,S)=>We(h,S)>-1,on=(h,S)=>{for(let O=0,L=h.length;O<L;O++){const G=h[O];if(S(G,O))return!0}return!1},mt=(h,S)=>{const O=h.length,L=new Array(O);for(let G=0;G<O;G++){const $e=h[G];L[G]=S($e,G)}return L},Y=(h,S)=>{for(let O=0,L=h.length;O<L;O++){const G=h[O];S(G,O)}},Jn=(h,S)=>{const O=[];for(let L=0,G=h.length;L<G;L++){const $e=h[L];S($e,L)&&O.push($e)}return O},Te=(h,S)=>{if(h.length===0)return[];{let O=S(h[0]);const L=[];let G=[];for(let $e=0,dt=h.length;$e<dt;$e++){const Zt=h[$e],Nt=S(Zt);Nt!==O&&(L.push(G),G=[]),O=Nt,G.push(Zt)}return G.length!==0&&L.push(G),L}},gt=(h,S,O)=>(Y(h,(L,G)=>{O=S(O,L,G)}),O),v=(h,S,O)=>{for(let L=0,G=h.length;L<G;L++){const $e=h[L];if(S($e,L))return ze.some($e);if(O($e,L))break}return ze.none()},Gt=(h,S)=>v(h,S,se),Un=h=>{const S=[];for(let O=0,L=h.length;O<L;++O){if(!ye(h[O]))throw new Error("Arr.flatten item "+O+" was not an array, input: "+h);$.apply(S,h[O])}return S},To=(h,S)=>Un(mt(h,S)),st=h=>{const S=mo.call(h,0);return S.reverse(),S},kt=(h,S)=>S>=0&&S<h.length?ze.some(h[S]):ze.none(),Sn=h=>kt(h,0),Kn=h=>kt(h,h.length-1),Yt=(h,S)=>{const O=[],L=Zn(S)?G=>on(O,$e=>S($e,G)):G=>Ft(O,G);for(let G=0,$e=h.length;G<$e;G++){const dt=h[G];L(dt)||O.push(dt)}return O},Mo=(h,S,O=Re)=>h.exists(L=>O(L,S)),Ae=(h,S,O=Re)=>Ve(h,S,O).getOr(h.isNone()&&S.isNone()),Ve=(h,S,O)=>h.isSome()&&S.isSome()?ze.some(O(h.getOrDie(),S.getOrDie())):ze.none(),Ln=8,Wo=9,Xt=11,gn=1,En=3,Vs=(h,S)=>{const L=(S||document).createElement("div");if(L.innerHTML=h,!L.hasChildNodes()||L.childNodes.length>1){const G="HTML does not have a single root node";throw console.error(G,h),new Error(G)}return ie(L.childNodes[0])},Q=(h,S)=>{const L=(S||document).createElement(h);return ie(L)},ne=(h,S)=>{const L=(S||document).createTextNode(h);return ie(L)},ie=h=>{if(h==null)throw new Error("Node cannot be null or undefined");return{dom:h}},Pe={fromHtml:Vs,fromTag:Q,fromText:ne,fromDom:ie,fromPoint:(h,S,O)=>ze.from(h.dom.elementFromPoint(S,O)).map(ie)},un=(h,S)=>{const O=h.dom;if(O.nodeType!==gn)return!1;{const L=O;if(L.matches!==void 0)return L.matches(S);if(L.msMatchesSelector!==void 0)return L.msMatchesSelector(S);if(L.webkitMatchesSelector!==void 0)return L.webkitMatchesSelector(S);if(L.mozMatchesSelector!==void 0)return L.mozMatchesSelector(S);throw new Error("Browser lacks native selectors")}},Wn=(h,S)=>h.dom===S.dom,Fe=(h,S)=>{const O=h.dom,L=S.dom;return O===L?!1:O.contains(L)},Ee=un,bt=typeof window<"u"?window:Function("return this;")(),Mt=(h,S)=>{let O=S??bt;for(let L=0;L<h.length&&O!==void 0&&O!==null;++L)O=O[h[L]];return O},Bt=(h,S)=>{const O=h.split(".");return Mt(O,S)},Bn=(h,S)=>Bt(h,S),ko=(h,S)=>{const O=Bn(h,S);if(O==null)throw new Error(h+" not available on this browser");return O},xn=Object.getPrototypeOf,cn=h=>ko("HTMLElement",h),ro=h=>{const S=Bt("ownerDocument.defaultView",h);return sn(h)&&(cn(S).prototype.isPrototypeOf(h)||/^HTML\w*Element$/.test(xn(h).constructor.name))},en=h=>h.dom.nodeName.toLowerCase(),an=h=>h.dom.nodeType,_n=h=>S=>an(S)===h,hn=h=>an(h)===Ln||en(h)==="#comment",po=h=>zs(h)&&ro(h.dom),zs=_n(gn),ws=_n(En),hs=_n(Wo),ns=_n(Xt),Do=h=>S=>zs(S)&&en(S)===h,Xe=h=>Pe.fromDom(h.dom.ownerDocument),Cn=h=>hs(h)?h:Xe(h),Ko=h=>ze.from(h.dom.parentNode).map(Pe.fromDom),Ds=h=>ze.from(h.dom.parentElement).map(Pe.fromDom),ps=h=>ze.from(h.dom.nextSibling).map(Pe.fromDom),is=h=>mt(h.dom.childNodes,Pe.fromDom),co=(h,S)=>{const O=h.dom.childNodes;return ze.from(O[S]).map(Pe.fromDom)},Zs=h=>co(h,0),Ss=h=>co(h,h.dom.childNodes.length-1),dc=h=>ns(h)&&Pn(h.dom.host),os=Zn(Element.prototype.attachShadow)&&Zn(Node.prototype.getRootNode)?h=>Pe.fromDom(h.dom.getRootNode()):Cn,xs=h=>{const S=os(h);return dc(S)?ze.some(S):ze.none()},ar=h=>Pe.fromDom(h.dom.host),Ir=h=>{const S=ws(h)?h.dom.parentNode:h.dom;if(S==null||S.ownerDocument===null)return!1;const O=S.ownerDocument;return xs(Pe.fromDom(S)).fold(()=>O.body.contains(S),yn(Ir,ar))};var No=(h,S,O,L,G)=>h(O,L)?ze.some(O):Zn(G)&&G(O)?ze.none():S(O,L,G);const fo=(h,S,O)=>{let L=h.dom;const G=Zn(O)?O:se;for(;L.parentNode;){L=L.parentNode;const $e=Pe.fromDom(L);if(S($e))return ze.some($e);if(G($e))break}return ze.none()},xo=(h,S,O)=>No((G,$e)=>$e(G),fo,h,S,O),Us=(h,S,O)=>fo(h,L=>un(L,S),O),Kr=(h,S,O)=>No((G,$e)=>un(G,$e),Us,h,S,O),Vo=h=>Kr(h,"[contenteditable]"),z=(h,S=!1)=>Ir(h)?h.dom.isContentEditable:Vo(h).fold(rn(S),O=>N(O)==="true"),N=h=>h.dom.contentEditable,de=(h,S)=>{Ko(h).each(L=>{L.dom.insertBefore(S.dom,h.dom)})},pe=(h,S)=>{ps(h).fold(()=>{Ko(h).each(G=>{ht(G,S)})},L=>{de(L,S)})},rt=(h,S)=>{Zs(h).fold(()=>{ht(h,S)},L=>{h.dom.insertBefore(S.dom,L.dom)})},ht=(h,S)=>{h.dom.appendChild(S.dom)},zt=(h,S)=>{Y(S,O=>{de(h,O)})},ao=(h,S)=>{Y(S,O=>{ht(h,O)})},q=h=>{h.dom.textContent="",Y(is(h),S=>{It(S)})},It=h=>{const S=h.dom;S.parentNode!==null&&S.parentNode.removeChild(S)};var V=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),j=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),we=tinymce.util.Tools.resolve("tinymce.util.VK");const Oe=h=>mt(h,Pe.fromDom),je=Object.keys,it=(h,S)=>{const O=je(h);for(let L=0,G=O.length;L<G;L++){const $e=O[L],dt=h[$e];S(dt,$e)}},nt=h=>(S,O)=>{h[O]=S},ot=(h,S,O,L)=>{it(h,(G,$e)=>{(S(G,$e)?O:L)(G,$e)})},Ot=(h,S)=>{const O={};return ot(h,S,nt(O),Vt),O},Jt=(h,S,O)=>{if(io(O)||$t(O)||pt(O))h.setAttribute(S,O+"");else throw console.error("Invalid call to Attribute.set. Key ",S,":: Value ",O,":: Element ",h),new Error("Attribute value was not simple")},vn=(h,S)=>{const O=h.dom;it(S,(L,G)=>{Jt(O,G,L)})},lo=h=>gt(h.dom.attributes,(S,O)=>(S[O.name]=O.value,S),{}),Cr=(h,S)=>Pe.fromDom(h.dom.cloneNode(S)),lr=h=>Cr(h,!0),Tr=(h,S)=>{const O=Pe.fromTag(S),L=lo(h);return vn(O,L),O},qt=(h,S)=>{const O=Tr(h,S);pe(h,O);const L=is(h);return ao(O,L),It(h),O};var pn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),In=tinymce.util.Tools.resolve("tinymce.util.Tools");const Xs=h=>S=>Pn(S)&&S.nodeName.toLowerCase()===h,us=h=>S=>Pn(S)&&h.test(S.nodeName),fs=h=>Pn(h)&&h.nodeType===3,uo=h=>Pn(h)&&h.nodeType===1,Ws=us(/^(OL|UL|DL)$/),Kc=us(/^(OL|UL)$/),Qn=Xs("ol"),bs=us(/^(LI|DT|DD)$/),js=us(/^(DT|DD)$/),Qo=us(/^(TH|TD)$/),yr=Xs("br"),Hr=h=>{var S;return((S=h.parentNode)===null||S===void 0?void 0:S.firstChild)===h},Fs=(h,S)=>Pn(S)&&S.nodeName in h.schema.getTextBlockElements(),Pr=(h,S)=>Pn(h)&&h.nodeName in S,Lr=(h,S)=>Pn(S)&&S.nodeName in h.schema.getVoidElements(),Ba=(h,S)=>yr(S)?h.isBlock(S.nextSibling)&&!yr(S.previousSibling):!1,kr=(h,S,O)=>{const L=h.isEmpty(S);return O&&h.select("span[data-mce-type=bookmark]",S).length>0?!1:L},Yc=(h,S)=>h.isChildOf(S,h.getRoot()),Js=h=>S=>S.options.get(h),mc=h=>{const S=h.options.register;S("lists_indent_on_tab",{processor:"boolean",default:!0})},Sc=Js("lists_indent_on_tab"),Xc=Js("forced_root_block"),rl=Js("forced_root_block_attrs"),D=(h,S)=>{const O=h.dom,L=h.schema.getBlockElements(),G=O.createFragment(),$e=Xc(h),dt=rl(h);let Zt,Nt,Et=!1;for(Nt=O.create($e,dt),Pr(S.firstChild,L)||G.appendChild(Nt);Zt=S.firstChild;){const ts=Zt.nodeName;!Et&&(ts!=="SPAN"||Zt.getAttribute("data-mce-type")!=="bookmark")&&(Et=!0),Pr(Zt,L)?(G.appendChild(Zt),Nt=null):(Nt||(Nt=O.create($e,dt),G.appendChild(Nt)),Nt.appendChild(Zt))}return!Et&&Nt&&Nt.appendChild(O.create("br",{"data-mce-bogus":"1"})),G},U=pn.DOM,ee=(h,S,O)=>{const L=Et=>{const ts=Et.parentNode;ts&&In.each(G,qs=>{ts.insertBefore(qs,O.parentNode)}),U.remove(Et)},G=U.select('span[data-mce-type="bookmark"]',S),$e=D(h,O),dt=U.createRng();dt.setStartAfter(O),dt.setEndAfter(S);const Zt=dt.extractContents();for(let Et=Zt.firstChild;Et;Et=Et.firstChild)if(Et.nodeName==="LI"&&h.dom.isEmpty(Et)){U.remove(Et);break}h.dom.isEmpty(Zt)||U.insertAfter(Zt,S),U.insertAfter($e,S);const Nt=O.parentElement;Nt&&kr(h.dom,Nt)&&L(Nt),U.remove(O),kr(h.dom,S)&&U.remove(S)},le=Do("dd"),De=Do("dt"),vt=(h,S)=>{le(S)?qt(S,"dt"):De(S)&&Ds(S).each(O=>ee(h,O.dom,S.dom))},eo=h=>{De(h)&&qt(h,"dd")},jo=(h,S,O)=>{S==="Indent"?Y(O,eo):Y(O,L=>vt(h,L))},Yn=(h,S)=>{if(fs(h))return{container:h,offset:S};const O=V.getNode(h,S);return fs(O)?{container:O,offset:S>=h.childNodes.length?O.data.length:0}:O.previousSibling&&fs(O.previousSibling)?{container:O.previousSibling,offset:O.previousSibling.data.length}:O.nextSibling&&fs(O.nextSibling)?{container:O.nextSibling,offset:0}:{container:h,offset:S}},Eo=h=>{const S=h.cloneRange(),O=Yn(h.startContainer,h.startOffset);S.setStart(O.container,O.offset);const L=Yn(h.endContainer,h.endOffset);return S.setEnd(L.container,L.offset),S},Xn=["OL","UL","DL"],Cs=Xn.join(","),Nr=(h,S)=>{const O=S||h.selection.getStart(!0);return h.dom.getParent(O,Cs,Ze(h,O))},Bc=(h,S)=>Pn(h)&&S.length===1&&S[0]===h,Pt=h=>Jn(h.querySelectorAll(Cs),Ws),ga=h=>{const S=Nr(h),O=h.selection.getSelectedBlocks();return Bc(S,O)?Pt(S):Jn(O,L=>Ws(L)&&S!==L)},$o=(h,S)=>{const O=In.map(S,L=>{const G=h.dom.getParent(L,"li,dd,dt",Ze(h,L));return G||L});return Yt(O)},C=h=>{const S=h.selection.getSelectedBlocks();return Jn($o(h,S),bs)},F=h=>Jn(C(h),js),P=(h,S)=>{const O=h.dom.getParents(S,"TD,TH");return O.length>0?O[0]:h.getBody()},ue=(h,S)=>!Ws(S)&&!bs(S)&&on(Xn,O=>h.isValidChild(S.nodeName,O)),Ze=(h,S)=>{const O=h.dom.getParents(S,h.dom.isBlock);return Gt(O,G=>ue(h.schema,G)).getOr(h.getBody())},tn=h=>Ko(h).exists(S=>bs(S.dom)&&Zs(S).exists(O=>!Ws(O.dom))&&Ss(S).exists(O=>!Ws(O.dom))),Je=(h,S)=>{const O=h.dom.getParents(S,"ol,ul",Ze(h,S));return Kn(O)},Co=h=>{const S=Je(h,h.selection.getStart()),O=Jn(h.selection.getSelectedBlocks(),Kc);return S.toArray().concat(O)},Er=h=>{const S=h.selection.getStart();return h.dom.getParents(S,"ol,ul",Ze(h,S))},Fo=h=>{const S=Co(h),O=Er(h);return Gt(O,L=>tn(Pe.fromDom(L))).fold(()=>ir(h,S),L=>[L])},ir=(h,S)=>{const O=mt(S,L=>Je(h,L).getOr(L));return Yt(O)},bo=h=>/\btox\-/.test(h.className),ha=(h,S)=>v(h,Ws,Qo).exists(O=>O.nodeName===S&&!bo(O)),Yr=(h,S)=>S!==null&&!h.dom.isEditable(S),Nn=h=>{const S=Nr(h);return Yr(h,S)},Qs=(h,S)=>{const O=h.dom.getParent(S,"ol,ul,dl");return Yr(h,O)},Oo=(h,S)=>{const O=h.selection.getNode();return S({parents:h.dom.getParents(O),element:O}),h.on("NodeChange",S),()=>h.off("NodeChange",S)},Ic=(h,S)=>{const L=document.createDocumentFragment();return Y(h,G=>{L.appendChild(G.dom)}),Pe.fromDom(L)},Ro=(h,S,O)=>h.dispatch("ListMutation",{action:S,element:O}),ci=(h=>S=>S.replace(h,""))(/^\s+|\s+$/g),Ai=h=>h.length>0,Gn=h=>!Ai(h),gc=h=>h.style!==void 0&&Zn(h.style.getPropertyValue),Hc=(h,S,O)=>{if(!io(O))throw console.error("Invalid call to CSS.set. Property ",S,":: Value ",O,":: Element ",h),new Error("CSS value must be a string: "+O);gc(h)&&h.style.setProperty(S,O)},Or=(h,S,O)=>{const L=h.dom;Hc(L,S,O)},xc=h=>Ee(h,"OL,UL"),Tl=h=>Ee(h,"LI"),kl=h=>Zs(h).exists(xc),M=h=>Ss(h).exists(xc),H=h=>"listAttributes"in h,ae=h=>"isComment"in h,ge=h=>"isFragment"in h,ut=h=>h.depth>0,dn=h=>h.isSelected,Yo=h=>{const S=is(h),O=M(h)?S.slice(0,-1):S;return mt(O,lr)},er=(h,S,O)=>Ko(h).filter(zs).map(L=>({depth:S,dirty:!1,isSelected:O,content:Yo(h),itemAttributes:lo(h),listAttributes:lo(L),listType:en(L),isInPreviousLi:!1})),Xo=(h,S)=>{ht(h.item,S.list)},wr=h=>{for(let S=1;S<h.length;S++)Xo(h[S-1],h[S])},vs=(h,S)=>{Ve(Kn(h),Sn(S),Xo)},Gs=(h,S)=>{const O={list:Pe.fromTag(S,h),item:Pe.fromTag("li",h)};return ht(O.list,O.item),O},Pc=(h,S,O)=>{const L=[];for(let G=0;G<O;G++)L.push(Gs(h,H(S)?S.listType:S.parentListType));return L},pa=(h,S)=>{for(let O=0;O<h.length-1;O++)Or(h[O].item,"list-style-type","none");Kn(h).each(O=>{H(S)&&(vn(O.list,S.listAttributes),vn(O.item,S.itemAttributes)),ao(O.item,S.content)})},Ls=(h,S)=>{en(h.list)!==S.listType&&(h.list=qt(h.list,S.listType)),vn(h.list,S.listAttributes)},Lc=(h,S,O)=>{const L=Pe.fromTag("li",h);return vn(L,S),ao(L,O),L},ss=(h,S)=>{ht(h.list,S),h.item=S},Vr=(h,S,O)=>{const L=S.slice(0,O.depth);return Kn(L).each(G=>{if(H(O)){const $e=Lc(h,O.itemAttributes,O.content);ss(G,$e),Ls(G,O)}else if(ge(O))ao(G.item,O.content);else{const $e=Pe.fromHtml(`<!--${O.content}-->`);ht(G.list,$e)}}),L},Jc=(h,S,O)=>{const L=Pc(h,O,O.depth-S.length);return wr(L),pa(L,O),vs(S,L),S.concat(L)},_i=(h,S)=>{let O=ze.none();const L=gt(S,(G,$e,dt)=>ae($e)?dt===0?(O=ze.some($e),G):Vr(h,G,$e):$e.depth>G.length?Jc(h,G,$e):Vr(h,G,$e),[]);return O.each(G=>{const $e=Pe.fromHtml(`<!--${G.content}-->`);Sn(L).each(dt=>{rt(dt.list,$e)})}),Sn(L).map(G=>G.list)},Mi=(h,S)=>{switch(h){case"Indent":S.depth++;break;case"Outdent":S.depth--;break;case"Flatten":S.depth=0}S.dirty=!0},Nc=(h,S)=>{H(h)&&H(S)&&(h.listType=S.listType,h.listAttributes={...S.listAttributes})},uu=h=>{h.listAttributes=Ot(h.listAttributes,(S,O)=>O!=="start")},Xr=(h,S)=>{const O=h[S].depth,L=$e=>$e.depth===O&&!$e.dirty,G=$e=>$e.depth<O;return v(st(h.slice(0,S)),L,G).orThunk(()=>v(h.slice(S+1),L,G))},fa=h=>(Y(h,(S,O)=>{Xr(h,O).fold(()=>{S.dirty&&H(S)&&uu(S)},L=>Nc(S,L))}),h),Di=h=>{let S=h;return{get:()=>S,set:G=>{S=G}}},du=(h,S,O,L)=>{var G;if(hn(L))return[{depth:h+1,content:(G=L.dom.nodeValue)!==null&&G!==void 0?G:"",dirty:!1,isSelected:!1,isComment:!0}];S.each(Zt=>{Wn(Zt.start,L)&&O.set(!0)});const $e=er(L,h,O.get());S.each(Zt=>{Wn(Zt.end,L)&&O.set(!1)});const dt=Ss(L).filter(xc).map(Zt=>El(h,S,O,Zt)).getOr([]);return $e.toArray().concat(dt)},$i=(h,S,O,L)=>Zs(L).filter(xc).fold(()=>du(h,S,O,L),G=>{const $e=gt(is(L),(dt,Zt,Nt)=>{if(Nt===0)return dt;if(Tl(Zt))return dt.concat(du(h,S,O,Zt));{const Et={isFragment:!0,depth:h,content:[Zt],isSelected:!1,dirty:!1,parentListType:en(G)};return dt.concat(Et)}},[]);return El(h,S,O,G).concat($e)}),El=(h,S,O,L)=>To(is(L),G=>{const $e=xc(G)?El:$i,dt=h+1;return $e(dt,S,O,G)}),gd=(h,S)=>{const O=Di(!1),L=0;return mt(h,G=>({sourceList:G,entries:El(L,S,O,G)}))},Ol=(h,S)=>{const O=fa(S);return mt(O,L=>{const G=ae(L)?Ic([Pe.fromHtml(`<!--${L.content}-->`)]):Ic(L.content);return Pe.fromDom(D(h,G.dom))})},hd=(h,S)=>{const O=fa(S);return _i(h.contentDocument,O).toArray()},pd=(h,S)=>To(Te(S,ut),O=>Sn(O).exists(ut)?hd(h,O):Ol(h,O)),fd=(h,S)=>{Y(Jn(h,dn),O=>Mi(S,O))},bd=h=>{const S=mt(C(h),Pe.fromDom);return Ve(Gt(S,tt(kl)),Gt(st(S),tt(kl)),(O,L)=>({start:O,end:L}))},vd=(h,S,O)=>{const L=gd(S,bd(h));Y(L,G=>{fd(G.entries,O);const $e=pd(h,G.entries);Y($e,dt=>{Ro(h,O==="Indent"?"IndentList":"OutdentList",dt.dom)}),zt(G.sourceList,$e),It(G.sourceList)})},mu=(h,S)=>{const O=Oe(Fo(h)),L=Oe(F(h));let G=!1;if(O.length||L.length){const $e=h.selection.getBookmark();vd(h,O,S),jo(h,S,L),h.selection.moveToBookmark($e),h.selection.setRng(Eo(h.selection.getRng())),h.nodeChanged(),G=!0}return G},cl=(h,S)=>!Nn(h)&&mu(h,S),gu=h=>cl(h,"Indent"),ai=h=>cl(h,"Outdent"),hu=h=>cl(h,"Flatten"),km="\uFEFF",al=h=>h===km,Qc=(h,S,O)=>fo(h,S,O).isSome(),ba=(h,S)=>Qc(h,jt(Wn,S));var li=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Ha=pn.DOM,ll=h=>{const S={},O=L=>{let G=h[L?"startContainer":"endContainer"],$e=h[L?"startOffset":"endOffset"];if(uo(G)){const dt=Ha.create("span",{"data-mce-type":"bookmark"});G.hasChildNodes()?($e=Math.min($e,G.childNodes.length-1),L?G.insertBefore(dt,G.childNodes[$e]):Ha.insertAfter(dt,G.childNodes[$e])):G.appendChild(dt),G=dt,$e=0}S[L?"startContainer":"endContainer"]=G,S[L?"startOffset":"endOffset"]=$e};return O(!0),h.collapsed||O(),S},il=h=>{const S=L=>{const G=Zt=>{var Nt;let Et=(Nt=Zt.parentNode)===null||Nt===void 0?void 0:Nt.firstChild,ts=0;for(;Et;){if(Et===Zt)return ts;(!uo(Et)||Et.getAttribute("data-mce-type")!=="bookmark")&&ts++,Et=Et.nextSibling}return-1};let $e=h[L?"startContainer":"endContainer"],dt=h[L?"startOffset":"endOffset"];if($e){if(uo($e)&&$e.parentNode){const Zt=$e;dt=G($e),$e=$e.parentNode,Ha.remove(Zt),!$e.hasChildNodes()&&Ha.isBlock($e)&&$e.appendChild(Ha.create("br"))}h[L?"startContainer":"endContainer"]=$e,h[L?"startOffset":"endOffset"]=dt}};S(!0),S();const O=Ha.createRng();return O.setStart(h.startContainer,h.startOffset),h.endContainer&&O.setEnd(h.endContainer,h.endOffset),Eo(O)},ul=h=>{switch(h){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Em=(h,S,O)=>{const L=O["list-style-type"]?O["list-style-type"]:null;h.setStyle(S,"list-style-type",L)},Om=(h,S)=>{In.each(S,(O,L)=>{h.setAttribute(L,O)})},Al=(h,S,O)=>{Om(S,O["list-attributes"]),In.each(h.select("li",S),L=>{Om(L,O["list-item-attributes"])})},_l=(h,S,O)=>{Em(h,S,O),Al(h,S,O)},yd=(h,S,O)=>{In.each(O,L=>h.setStyle(S,L,""))},Ar=(h,S)=>Pn(S)&&!Pr(S,h.schema.getBlockElements()),pu=(h,S,O,L)=>{let G=S[O?"startContainer":"endContainer"];const $e=S[O?"startOffset":"endOffset"];uo(G)&&(G=G.childNodes[Math.min($e,G.childNodes.length-1)]||G),!O&&yr(G.nextSibling)&&(G=G.nextSibling);const dt=Nt=>{for(;!h.dom.isBlock(Nt)&&Nt.parentNode&&L!==Nt;)Nt=Nt.parentNode;return Nt},Zt=(Nt,Et)=>{var ts;const qs=new j(Nt,dt(Nt)),pc=Et?"next":"prev";let za;for(;za=qs[pc]();)if(!(Lr(h,za)||al(za.textContent)||((ts=za.textContent)===null||ts===void 0?void 0:ts.length)===0))return ze.some(za);return ze.none()};if(O&&fs(G))if(al(G.textContent))G=Zt(G,!1).getOr(G);else for(G.parentNode!==null&&Ar(h,G.parentNode)&&(G=G.parentNode);G.previousSibling!==null&&(Ar(h,G.previousSibling)||fs(G.previousSibling));)G=G.previousSibling;if(!O&&fs(G))if(al(G.textContent))G=Zt(G,!0).getOr(G);else for(G.parentNode!==null&&Ar(h,G.parentNode)&&(G=G.parentNode);G.nextSibling!==null&&(Ar(h,G.nextSibling)||fs(G.nextSibling));)G=G.nextSibling;for(;G.parentNode!==L;){const Nt=G.parentNode;if(Fs(h,G)||/^(TD|TH)$/.test(Nt.nodeName))return G;G=Nt}return G},wd=(h,S,O)=>{const L=[],G=h.dom,$e=pu(h,S,!0,O),dt=pu(h,S,!1,O);let Zt;const Nt=[];for(let Et=$e;Et&&(Nt.push(Et),Et!==dt);Et=Et.nextSibling);return In.each(Nt,Et=>{var ts;if(Fs(h,Et)){L.push(Et),Zt=null;return}if(G.isBlock(Et)||yr(Et)){yr(Et)&&G.remove(Et),Zt=null;return}const qs=Et.nextSibling;if(li.isBookmarkNode(Et)&&(Ws(qs)||Fs(h,qs)||!qs&&Et.parentNode===O)){Zt=null;return}Zt||(Zt=G.create("p"),(ts=Et.parentNode)===null||ts===void 0||ts.insertBefore(Zt,Et),L.push(Zt)),Zt.appendChild(Et)}),L},fu=(h,S,O)=>{const L=h.getStyle(S,"list-style-type");let G=O?O["list-style-type"]:"";return G=G===null?"":G,L===G},va=(h,S)=>{const O=h.selection.getStart(!0),L=pu(h,S,!0,h.getBody());return ba(Pe.fromDom(L),Pe.fromDom(S.commonAncestorContainer))?S.commonAncestorContainer:O},Jr=(h,S,O)=>{const L=h.selection.getRng();let G="LI";const $e=Ze(h,va(h,L)),dt=h.dom;if(dt.getContentEditable(h.selection.getNode())==="false")return;S=S.toUpperCase(),S==="DL"&&(G="DT");const Zt=ll(L),Nt=Jn(wd(h,L,$e),h.dom.isEditable);In.each(Nt,Et=>{let ts;const qs=Et.previousSibling,pc=Et.parentNode;bs(pc)||(qs&&Ws(qs)&&qs.nodeName===S&&fu(dt,qs,O)?(ts=qs,Et=dt.rename(Et,G),qs.appendChild(Et)):(ts=dt.create(S),pc.insertBefore(ts,Et),ts.appendChild(Et),Et=dt.rename(Et,G)),yd(dt,Et,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),_l(dt,ts,O),Ml(h.dom,ts))}),h.selection.setRng(il(Zt))},Sd=(h,S)=>Ws(h)&&h.nodeName===(S==null?void 0:S.nodeName),Am=(h,S,O)=>{const L=h.getStyle(S,"list-style-type",!0),G=h.getStyle(O,"list-style-type",!0);return L===G},xd=(h,S)=>h.className===S.className,bu=(h,S,O)=>Sd(S,O)&&Am(h,S,O)&&xd(S,O),Ml=(h,S)=>{let O,L=S.nextSibling;if(bu(h,S,L)){const G=L;for(;O=G.firstChild;)S.appendChild(O);h.remove(G)}if(L=S.previousSibling,bu(h,S,L)){const G=L;for(;O=G.lastChild;)S.insertBefore(O,S.firstChild);h.remove(G)}},vu=(h,S,O,L)=>{if(S.nodeName!==O){const G=h.dom.rename(S,O);_l(h.dom,G,L),Ro(h,ul(O),G)}else _l(h.dom,S,L),Ro(h,ul(O),S)},Bg=(h,S,O,L)=>{if(S.classList.forEach((G,$e,dt)=>{G.startsWith("tox-")&&(dt.remove(G),dt.length===0&&S.removeAttribute("class"))}),S.nodeName!==O){const G=h.dom.rename(S,O);_l(h.dom,G,L),Ro(h,ul(O),G)}else _l(h.dom,S,L),Ro(h,ul(O),S)},Ig=(h,S,O,L,G)=>{const $e=Ws(S);if($e&&S.nodeName===L&&!yu(G)&&!bo(S))hu(h);else{Jr(h,L,G);const dt=ll(h.selection.getRng()),Zt=$e?[S,...O]:O,Nt=$e&&bo(S)?Bg:vu;In.each(Zt,Et=>{Nt(h,Et,L,G)}),h.selection.setRng(il(dt))}},yu=h=>"list-style-type"in h,_m=(h,S,O,L)=>{if(S!==h.getBody())if(S)if(S.nodeName===O&&!yu(L)&&!bo(S))hu(h);else{const G=ll(h.selection.getRng());bo(S)&&S.classList.forEach((dt,Zt,Nt)=>{dt.startsWith("tox-")&&(Nt.remove(dt),Nt.length===0&&S.removeAttribute("class"))}),_l(h.dom,S,L);const $e=h.dom.rename(S,O);Ml(h.dom,$e),h.selection.setRng(il(G)),Jr(h,O,L),Ro(h,ul(O),$e)}else Jr(h,O,L),Ro(h,ul(O),S)},dl=(h,S,O)=>{const L=Nr(h);if(Qs(h,L))return;const G=ga(h),$e=sn(O)?O:{};G.length>0?Ig(h,L,G,S,$e):_m(h,L,S,$e)},wu=pn.DOM,Cd=(h,S)=>{const O=S.parentElement;if(O&&O.nodeName==="LI"&&O.firstChild===S){const L=O.previousSibling;L&&L.nodeName==="LI"?(L.appendChild(S),kr(h,O)&&wu.remove(O)):wu.setStyle(O,"listStyleType","none")}if(Ws(O)){const L=O.previousSibling;L&&L.nodeName==="LI"&&L.appendChild(S)}},es=(h,S)=>{const O=In.grep(h.select("ol,ul",S));In.each(O,L=>{Cd(h,L)})},Rs=(h,S,O,L)=>{let G=S.startContainer;const $e=S.startOffset;if(fs(G)&&(O?$e<G.data.length:$e>0))return G;const dt=h.schema.getNonEmptyElements();uo(G)&&(G=V.getNode(G,$e));const Zt=new j(G,L);O&&Ba(h.dom,G)&&Zt.next();const Nt=O?Zt.next.bind(Zt):Zt.prev2.bind(Zt);for(;G=Nt();)if(G.nodeName==="LI"&&!G.hasChildNodes()||dt[G.nodeName]||fs(G)&&G.data.length>0)return G;return null},Pa=(h,S)=>{const O=S.childNodes;return O.length===1&&!Ws(O[0])&&h.isBlock(O[0])},Fi=h=>ze.from(h).map(Pe.fromDom).filter(po).exists(S=>z(S)&&!Ft(["details"],en(S))),Td=(h,S)=>{Pa(h,S)&&Fi(S.firstChild)&&h.remove(S.firstChild,!0)},tr=(h,S,O)=>{let L;const G=Pa(h,O)?O.firstChild:O;if(Td(h,S),!kr(h,S,!0))for(;L=S.firstChild;)G.appendChild(L)},Dl=(h,S,O)=>{let L;const G=S.parentNode;if(!Yc(h,S)||!Yc(h,O))return;Ws(O.lastChild)&&(L=O.lastChild),G===O.lastChild&&yr(G.previousSibling)&&h.remove(G.previousSibling);const $e=O.lastChild;$e&&yr($e)&&S.hasChildNodes()&&h.remove($e),kr(h,O,!0)&&q(Pe.fromDom(O)),tr(h,S,O),L&&O.appendChild(L);const Zt=Fe(Pe.fromDom(O),Pe.fromDom(S))?h.getParents(S,Ws,O):[];h.remove(S),Y(Zt,Nt=>{kr(h,Nt)&&Nt!==h.getRoot()&&h.remove(Nt)})},ea=(h,S,O)=>{q(Pe.fromDom(O)),Dl(h.dom,S,O),h.selection.setCursorLocation(O,0)},$l=(h,S,O,L)=>{const G=h.dom;if(G.isEmpty(L))ea(h,O,L);else{const $e=ll(S);Dl(G,O,L),h.selection.setRng(il($e))}},kd=(h,S,O,L)=>{const G=ll(S);Dl(h.dom,O,L);const $e=il(G);h.selection.setRng($e)},mn=(h,S)=>{const O=h.dom,L=h.selection,G=L.getStart(),$e=P(h,G),dt=O.getParent(L.getStart(),"LI",$e);if(dt){const Zt=dt.parentElement;if(Zt===h.getBody()&&kr(O,Zt))return!0;const Nt=Eo(L.getRng()),Et=O.getParent(Rs(h,Nt,S,$e),"LI",$e),ts=Et&&(S?O.isChildOf(dt,Et):O.isChildOf(Et,dt));if(Et&&Et!==dt&&!ts)return h.undoManager.transact(()=>{S?$l(h,Nt,Et,dt):Hr(dt)?ai(h):kd(h,Nt,dt,Et)}),!0;if(ts&&!S&&Et!==dt)return h.undoManager.transact(()=>{if(Nt.commonAncestorContainer.parentElement){const qs=ll(Nt),pc=Nt.commonAncestorContainer.parentElement;tr(O,Nt.commonAncestorContainer.parentElement,Et),pc.remove();const za=il(qs);h.selection.setRng(za)}}),!0;if(!Et&&!S&&Nt.startOffset===0&&Nt.endOffset===0)return h.undoManager.transact(()=>{hu(h)}),!0}return!1},zr=(h,S,O)=>{const L=h.getParent(S.parentNode,h.isBlock,O);h.remove(S),L&&h.isEmpty(L)&&h.remove(L)},Ri=(h,S)=>{const O=h.dom,L=h.selection.getStart(),G=P(h,L),$e=O.getParent(L,O.isBlock,G);if($e&&O.isEmpty($e)){const dt=Eo(h.selection.getRng()),Zt=O.getParent(Rs(h,dt,S,G),"LI",G);if(Zt){const Nt=pc=>Ft(["td","th","caption"],en(pc)),Et=pc=>pc.dom===G,ts=xo(Pe.fromDom(Zt),Nt,Et),qs=xo(Pe.fromDom(dt.startContainer),Nt,Et);return Ae(ts,qs,Wn)?(h.undoManager.transact(()=>{const pc=Zt.parentNode;zr(O,$e,G),Ml(O,pc),h.selection.select(Zt,!0),h.selection.collapse(S)}),!0):!1}}return!1},Fl=(h,S)=>mn(h,S)||Ri(h,S),Su=h=>{const S=h.selection.getStart(),O=P(h,S);return h.dom.getParent(S,"LI,DT,DD",O)||C(h).length>0},xu=h=>Su(h)?(h.undoManager.transact(()=>{h.execCommand("Delete"),es(h.dom,h.getBody())}),!0):!1,_r=(h,S)=>{const O=h.selection;return!Qs(h,O.getNode())&&(O.isCollapsed()?Fl(h,S):xu(h))},Qr=h=>{h.on("ExecCommand",S=>{const O=S.command.toLowerCase();(O==="delete"||O==="forwarddelete")&&Su(h)&&es(h.dom,h.getBody())}),h.on("keydown",S=>{S.keyCode===we.BACKSPACE?_r(h,!1)&&S.preventDefault():S.keyCode===we.DELETE&&_r(h,!0)&&S.preventDefault()})},hc=h=>({backspaceDelete:S=>{_r(h,S)}}),Bs=(h,S)=>{const O=Nr(h);O===null||Qs(h,O)||h.undoManager.transact(()=>{sn(S.styles)&&h.dom.setStyles(O,S.styles),sn(S.attrs)&&it(S.attrs,(L,G)=>h.dom.setAttrib(O,G,L))})},Cu=h=>{const S=st(ci(h).split("")),O=mt(S,(L,G)=>{const $e=L.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,G)*$e});return gt(O,(L,G)=>L+G,0)},Rl=h=>{if(h--,h<0)return"";{const S=h%26,O=Math.floor(h/26),L=Rl(O),G=String.fromCharCode(65+S);return L+G}},ds=h=>/^[A-Z]+$/.test(h),La=h=>/^[a-z]+$/.test(h),ii=h=>/^[0-9]+$/.test(h),Tu=h=>ii(h)?2:ds(h)?0:La(h)?1:Gn(h)?3:4,Mm=h=>{switch(Tu(h)){case 2:return ze.some({listStyleType:ze.none(),start:h});case 0:return ze.some({listStyleType:ze.some("upper-alpha"),start:Cu(h).toString()});case 1:return ze.some({listStyleType:ze.some("lower-alpha"),start:Cu(h).toString()});case 3:return ze.some({listStyleType:ze.none(),start:""});case 4:return ze.none()}},Ed=h=>{const S=parseInt(h.start,10);return Mo(h.listStyleType,"upper-alpha")?Rl(S):Mo(h.listStyleType,"lower-alpha")?Rl(S).toLowerCase():h.start},Bi=h=>{const S=Nr(h);!Qn(S)||Qs(h,S)||h.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Ed({start:h.dom.getAttrib(S,"start","1"),listStyleType:ze.from(h.dom.getStyle(S,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:O=>{const L=O.getData();Mm(L.start).each(G=>{h.execCommand("mceListUpdate",!1,{attrs:{start:G.start==="1"?"":G.start},styles:{"list-style-type":G.listStyleType.getOr("")}})}),O.close()}})},vo=(h,S)=>()=>{const O=Nr(h);return Pn(O)&&O.nodeName===S},Na=h=>{h.addCommand("mceListProps",()=>{Bi(h)})},Zr=h=>{h.on("BeforeExecCommand",S=>{const O=S.command.toLowerCase();O==="indent"?gu(h):O==="outdent"&&ai(h)}),h.addCommand("InsertUnorderedList",(S,O)=>{dl(h,"UL",O)}),h.addCommand("InsertOrderedList",(S,O)=>{dl(h,"OL",O)}),h.addCommand("InsertDefinitionList",(S,O)=>{dl(h,"DL",O)}),h.addCommand("RemoveList",()=>{hu(h)}),Na(h),h.addCommand("mceListUpdate",(S,O)=>{sn(O)&&Bs(h,O)}),h.addQueryStateHandler("InsertUnorderedList",vo(h,"UL")),h.addQueryStateHandler("InsertOrderedList",vo(h,"OL")),h.addQueryStateHandler("InsertDefinitionList",vo(h,"DL"))};var ml=tinymce.util.Tools.resolve("tinymce.html.Node");const Va=h=>h.type===3,Bl=h=>h.length===0,wn=h=>{const S=(G,$e)=>{const dt=ml.create("li");Y(G,Zt=>dt.append(Zt)),$e?h.insert(dt,$e,!0):h.append(dt)},O=(G,$e)=>Va($e)?[...G,$e]:!Bl(G)&&!Va($e)?(S(G,$e),[]):G,L=gt(h.children(),O,[]);Bl(L)||S(L)},Ii=h=>{h.on("PreInit",()=>{const{parser:S}=h;S.addNodeFilter("ul,ol",O=>Y(O,wn))})},Od=h=>{h.on("keydown",S=>{S.keyCode!==we.TAB||we.metaKeyPressed(S)||h.undoManager.transact(()=>{(S.shiftKey?ai(h):gu(h))&&S.preventDefault()})})},ku=h=>{Sc(h)&&Od(h),Qr(h)},Ad=(h,S)=>O=>{const L=G=>{O.setActive(ha(G.parents,S)),O.setEnabled(!Qs(h,G.element)&&h.selection.isEditable())};return O.setEnabled(h.selection.isEditable()),Oo(h,L)},Eu=h=>{const S=O=>()=>h.execCommand(O);h.hasPlugin("advlist")||(h.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:S("InsertOrderedList"),onSetup:Ad(h,"OL")}),h.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:S("InsertUnorderedList"),onSetup:Ad(h,"UL")}))},Dm=(h,S)=>O=>Oo(h,G=>O.setEnabled(ha(G.parents,S)&&!Qs(h,G.element))),Il=h=>{const S={text:"List properties...",icon:"ordered-list",onAction:()=>h.execCommand("mceListProps"),onSetup:Dm(h,"OL")};h.ui.registry.addMenuItem("listprops",S),h.ui.registry.addContextMenu("lists",{update:O=>{const L=Nr(h,O);return Qn(L)?["listprops"]:[]}})};var Ou=()=>{Po.add("lists",h=>(mc(h),Ii(h),h.hasPlugin("rtc",!0)?Na(h):(ku(h),Zr(h)),Eu(h),Il(h),hc(h)))};Ou()})();const yq=ma({__proto__:null,default:uM},[uM]);var dM={};(function(){var Po=tinymce.util.Tools.resolve("tinymce.PluginManager");const Lo=(m,f,E)=>{var R;return E(m,f.prototype)?!0:((R=m.constructor)===null||R===void 0?void 0:R.name)===f.name},So=m=>{const f=typeof m;return m===null?"null":f==="object"&&Array.isArray(m)?"array":f==="object"&&Lo(m,String,(E,R)=>R.isPrototypeOf(E))?"string":f},zn=m=>f=>So(f)===m,Rn=m=>f=>typeof f===m,io=m=>f=>m===f,sn=zn("string"),ye=zn("array"),$t=Rn("boolean"),An=io(void 0),Pn=m=>m==null,Zn=m=>!Pn(m),pt=Rn("function"),Vt=Rn("number"),yn=()=>{},rn=(m,f)=>E=>m(f(E)),Re=m=>()=>m,jt=m=>m,tt=(m,f)=>m===f;function se(m,...f){return(...E)=>{const R=f.concat(E);return m.apply(null,R)}}const ze=m=>{m()},mo=Re(!1),Ke=Re(!0);class ${constructor(f,E){this.tag=f,this.value=E}static some(f){return new $(!0,f)}static none(){return $.singletonNone}fold(f,E){return this.tag?E(this.value):f()}isSome(){return this.tag}isNone(){return!this.tag}map(f){return this.tag?$.some(f(this.value)):$.none()}bind(f){return this.tag?f(this.value):$.none()}exists(f){return this.tag&&f(this.value)}forall(f){return!this.tag||f(this.value)}filter(f){return!this.tag||f(this.value)?this:$.none()}getOr(f){return this.tag?this.value:f}or(f){return this.tag?this:f}getOrThunk(f){return this.tag?this.value:f()}orThunk(f){return this.tag?this:f()}getOrDie(f){if(this.tag)return this.value;throw new Error(f??"Called getOrDie on None")}static from(f){return Zn(f)?$.some(f):$.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(f){this.tag&&f(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}$.singletonNone=new $(!1);const We=Object.keys,Ft=Object.hasOwnProperty,on=(m,f)=>{const E=We(m);for(let R=0,X=E.length;R<X;R++){const fe=E[R],Ie=m[fe];f(Ie,fe)}},mt=m=>(f,E)=>{m[E]=f},Y=(m,f,E,R)=>{on(m,(X,fe)=>{(f(X,fe)?E:R)(X,fe)})},Jn=(m,f)=>{const E={};return Y(m,f,mt(E),yn),E},Te=(m,f)=>{const E=[];return on(m,(R,X)=>{E.push(f(R,X))}),E},gt=m=>Te(m,jt),v=m=>We(m).length,Gt=(m,f)=>Un(m,f)?$.from(m[f]):$.none(),Un=(m,f)=>Ft.call(m,f),To=(m,f)=>Un(m,f)&&m[f]!==void 0&&m[f]!==null,st=m=>{for(const f in m)if(Ft.call(m,f))return!1;return!0},kt=Array.prototype.indexOf,Sn=Array.prototype.push,Kn=(m,f)=>kt.call(m,f),Yt=(m,f)=>Kn(m,f)>-1,Mo=(m,f)=>{for(let E=0,R=m.length;E<R;E++){const X=m[E];if(f(X,E))return!0}return!1},Ae=(m,f)=>{const E=[];for(let R=0;R<m;R++)E.push(f(R));return E},Ve=(m,f)=>{const E=m.length,R=new Array(E);for(let X=0;X<E;X++){const fe=m[X];R[X]=f(fe,X)}return R},Ln=(m,f)=>{for(let E=0,R=m.length;E<R;E++){const X=m[E];f(X,E)}},Wo=(m,f)=>{for(let E=m.length-1;E>=0;E--){const R=m[E];f(R,E)}},Xt=(m,f)=>{const E=[],R=[];for(let X=0,fe=m.length;X<fe;X++){const Ie=m[X];(f(Ie,X)?E:R).push(Ie)}return{pass:E,fail:R}},gn=(m,f)=>{const E=[];for(let R=0,X=m.length;R<X;R++){const fe=m[R];f(fe,R)&&E.push(fe)}return E},En=(m,f,E)=>(Wo(m,(R,X)=>{E=f(E,R,X)}),E),Vs=(m,f,E)=>(Ln(m,(R,X)=>{E=f(E,R,X)}),E),Q=(m,f,E)=>{for(let R=0,X=m.length;R<X;R++){const fe=m[R];if(f(fe,R))return $.some(fe);if(E(fe,R))break}return $.none()},ne=(m,f)=>Q(m,f,mo),ie=m=>{const f=[];for(let E=0,R=m.length;E<R;++E){if(!ye(m[E]))throw new Error("Arr.flatten item "+E+" was not an array, input: "+m);Sn.apply(f,m[E])}return f},Me=(m,f)=>ie(Ve(m,f)),Pe=(m,f)=>{for(let E=0,R=m.length;E<R;++E){const X=m[E];if(f(X,E)!==!0)return!1}return!0},un=(m,f)=>{const E={};for(let R=0,X=m.length;R<X;R++){const fe=m[R];E[String(fe)]=f(fe,R)}return E},Wn=(m,f)=>f>=0&&f<m.length?$.some(m[f]):$.none(),Fe=m=>Wn(m,0),Ee=m=>Wn(m,m.length-1),bt=(m,f)=>{for(let E=0;E<m.length;E++){const R=f(m[E],E);if(R.isSome())return R}return $.none()},Mt=8,Bt=9,Bn=11,ko=1,xn=3,cn=(m,f)=>{const R=(f||document).createElement("div");if(R.innerHTML=m,!R.hasChildNodes()||R.childNodes.length>1){const X="HTML does not have a single root node";throw console.error(X,m),new Error(X)}return an(R.childNodes[0])},ro=(m,f)=>{const R=(f||document).createElement(m);return an(R)},en=(m,f)=>{const R=(f||document).createTextNode(m);return an(R)},an=m=>{if(m==null)throw new Error("Node cannot be null or undefined");return{dom:m}},hn={fromHtml:cn,fromTag:ro,fromText:en,fromDom:an,fromPoint:(m,f,E)=>$.from(m.dom.elementFromPoint(f,E)).map(an)},po=(m,f)=>{const E=m.dom;if(E.nodeType!==ko)return!1;{const R=E;if(R.matches!==void 0)return R.matches(f);if(R.msMatchesSelector!==void 0)return R.msMatchesSelector(f);if(R.webkitMatchesSelector!==void 0)return R.webkitMatchesSelector(f);if(R.mozMatchesSelector!==void 0)return R.mozMatchesSelector(f);throw new Error("Browser lacks native selectors")}},zs=m=>m.nodeType!==ko&&m.nodeType!==Bt&&m.nodeType!==Bn||m.childElementCount===0,ws=(m,f)=>{const E=f===void 0?document:f.dom;return zs(E)?[]:Ve(E.querySelectorAll(m),hn.fromDom)},hs=(m,f)=>{const E=f===void 0?document:f.dom;return zs(E)?$.none():$.from(E.querySelector(m)).map(hn.fromDom)},ns=(m,f)=>m.dom===f.dom,Do=po;typeof window<"u"||Function("return this;")();const Xe=m=>m.dom.nodeName.toLowerCase(),Cn=m=>m.dom.nodeType,Ko=m=>f=>Cn(f)===m,Ds=m=>Cn(m)===Mt||Xe(m)==="#comment",ps=Ko(ko),is=Ko(xn),co=Ko(Bt),Zs=Ko(Bn),Ss=m=>f=>ps(f)&&Xe(f)===m,dc=m=>hn.fromDom(m.dom.ownerDocument),$s=m=>co(m)?m:dc(m),os=m=>$.from(m.dom.parentNode).map(hn.fromDom),xs=(m,f)=>{const E=pt(f)?f:mo;let R=m.dom;const X=[];for(;R.parentNode!==null&&R.parentNode!==void 0;){const fe=R.parentNode,Ie=hn.fromDom(fe);if(X.push(Ie),E(Ie)===!0)break;R=fe}return X},ar=m=>$.from(m.dom.previousSibling).map(hn.fromDom),Ir=m=>$.from(m.dom.nextSibling).map(hn.fromDom),No=m=>Ve(m.dom.childNodes,hn.fromDom),fo=(m,f)=>{const E=m.dom.childNodes;return $.from(E[f]).map(hn.fromDom)},xo=m=>fo(m,0),Us=m=>Zs(m)&&Zn(m.dom.host),Vo=pt(Element.prototype.attachShadow)&&pt(Node.prototype.getRootNode)?m=>hn.fromDom(m.dom.getRootNode()):$s,z=m=>{const f=Vo(m);return Us(f)?$.some(f):$.none()},N=m=>hn.fromDom(m.dom.host),de=m=>{const f=is(m)?m.dom.parentNode:m.dom;if(f==null||f.ownerDocument===null)return!1;const E=f.ownerDocument;return z(hn.fromDom(f)).fold(()=>E.body.contains(f),rn(de,N))};var pe=(m,f,E,R,X)=>m(E,R)?$.some(E):pt(X)&&X(E)?$.none():f(E,R,X);const rt=(m,f,E)=>{let R=m.dom;const X=pt(E)?E:mo;for(;R.parentNode;){R=R.parentNode;const fe=hn.fromDom(R);if(f(fe))return $.some(fe);if(X(fe))break}return $.none()},ht=(m,f,E)=>pe((X,fe)=>fe(X),rt,m,f,E),zt=(m,f)=>{const E=X=>f(hn.fromDom(X));return ne(m.dom.childNodes,E).map(hn.fromDom)},ao=(m,f,E)=>rt(m,R=>po(R,f),E),q=(m,f)=>zt(m,E=>po(E,f)),It=(m,f)=>hs(f,m),V=(m,f,E)=>pe((X,fe)=>po(X,fe),ao,m,f,E),j=m=>V(m,"[contenteditable]"),we=(m,f=!1)=>de(m)?m.dom.isContentEditable:j(m).fold(Re(f),E=>Oe(E)==="true"),Oe=m=>m.dom.contentEditable,je=m=>m.nodeName.toLowerCase(),it=m=>hn.fromDom(m.getBody()),nt=m=>f=>ns(f,it(m)),ot=m=>m?m.replace(/px$/,""):"",Ot=m=>/^\d+(\.\d+)?$/.test(m)?m+"px":m,Jt=m=>hn.fromDom(m.selection.getStart()),vn=m=>hn.fromDom(m.selection.getEnd()),lo=m=>ht(m,Ss("table")).forall(we),Cr=(m,f)=>gn(No(m),f),lr=(m,f)=>{let E=[];return Ln(No(m),R=>{f(R)&&(E=E.concat([R])),E=E.concat(lr(R,f))}),E},Tr=(m,f)=>Cr(m,E=>po(E,f)),qt=(m,f)=>ws(f,m),pn=(m,f,E)=>{if(sn(E)||$t(E)||Vt(E))m.setAttribute(f,E+"");else throw console.error("Invalid call to Attribute.set. Key ",f,":: Value ",E,":: Element ",m),new Error("Attribute value was not simple")},In=(m,f,E)=>{pn(m.dom,f,E)},Xs=(m,f)=>{const E=m.dom;on(f,(R,X)=>{pn(E,X,R)})},us=(m,f)=>{const E=m.dom.getAttribute(f);return E===null?void 0:E},fs=(m,f)=>$.from(us(m,f)),uo=(m,f)=>{m.dom.removeAttribute(f)},Ws=m=>Vs(m.dom.attributes,(f,E)=>(f[E.name]=E.value,f),{}),Kc=(m,f,E=tt)=>m.exists(R=>E(R,f)),Qn=m=>{const f=[],E=R=>{f.push(R)};for(let R=0;R<m.length;R++)m[R].each(E);return f},bs=(m,f,E)=>m.isSome()&&f.isSome()?$.some(E(m.getOrDie(),f.getOrDie())):$.none(),js=m=>m.bind(jt),Qo=(m,f)=>m?$.some(f):$.none(),yr=(m,f)=>m.substring(f),Hr=(m,f,E)=>f===""||m.length>=f.length&&m.substr(E,E+f.length)===f,Fs=(m,f)=>Pr(m,f)?yr(m,f.length):m,Pr=(m,f)=>Hr(m,f,0),Ba=(m=>f=>f.replace(m,""))(/^\s+|\s+$/g),kr=m=>m.length>0,Yc=m=>!kr(m),Js=(m,f=10)=>{const E=parseInt(m,f);return isNaN(E)?$.none():$.some(E)},mc=m=>{const f=parseFloat(m);return isNaN(f)?$.none():$.some(f)},Sc=m=>m.style!==void 0&&pt(m.style.getPropertyValue),Xc=(m,f,E)=>{if(!sn(E))throw console.error("Invalid call to CSS.set. Property ",f,":: Value ",E,":: Element ",m),new Error("CSS value must be a string: "+E);Sc(m)&&m.style.setProperty(f,E)},rl=(m,f)=>{Sc(m)&&m.style.removeProperty(f)},D=(m,f,E)=>{const R=m.dom;Xc(R,f,E)},U=(m,f)=>{const E=m.dom,X=window.getComputedStyle(E).getPropertyValue(f);return X===""&&!de(m)?ee(E,f):X},ee=(m,f)=>Sc(m)?m.style.getPropertyValue(f):"",le=(m,f)=>{const E=m.dom,R=ee(E,f);return $.from(R).filter(X=>X.length>0)},De=(m,f)=>{const E=m.dom;rl(E,f),Kc(fs(m,"style").map(Ba),"")&&uo(m,"style")},vt=(m,f,E=0)=>fs(m,f).map(R=>parseInt(R,10)).getOr(E),eo=(m,f)=>jo(m,f,Ke),jo=(m,f,E)=>Me(No(m),R=>po(R,f)?E(R)?[R]:[]:jo(R,f,E)),Yn=["tfoot","thead","tbody","colgroup"],Eo=m=>Yt(Yn,m),Xn=(m,f)=>({rows:m,columns:f}),Cs=(m,f,E)=>({element:m,rowspan:f,colspan:E}),Nr=(m,f,E,R,X,fe)=>({element:m,rowspan:f,colspan:E,row:R,column:X,isLocked:fe}),Bc=(m,f,E)=>({element:m,cells:f,section:E}),Pt=(m,f,E,R)=>({startRow:m,startCol:f,finishRow:E,finishCol:R}),ga=(m,f,E)=>({element:m,colspan:f,column:E}),$o=(m,f)=>({element:m,columns:f}),C=(m,f,E=mo)=>{if(E(f))return $.none();if(Yt(m,Xe(f)))return $.some(f);const R=X=>po(X,"table")||E(X);return ao(f,m.join(","),R)},F=(m,f)=>C(["td","th"],m,f),P=m=>eo(m,"th,td"),ue=m=>po(m,"colgroup")?Tr(m,"col"):Me(Je(m),f=>Tr(f,"col")),Ze=(m,f)=>V(m,"table",f),tn=m=>eo(m,"tr"),Je=m=>Ze(m).fold(Re([]),f=>Tr(f,"colgroup")),Co=(m,f)=>Ve(m,E=>{if(Xe(E)==="colgroup"){const R=Ve(ue(E),X=>{const fe=vt(X,"span",1);return Cs(X,1,fe)});return Bc(E,R,"colgroup")}else{const R=Ve(P(E),X=>{const fe=vt(X,"rowspan",1),Ie=vt(X,"colspan",1);return Cs(X,fe,Ie)});return Bc(E,R,f(E))}}),Er=m=>os(m).map(f=>{const E=Xe(f);return Eo(E)?E:"tbody"}).getOr("tbody"),Fo=m=>{const f=tn(m),R=[...Je(m),...f];return Co(R,Er)},ir="data-snooker-locked-cols",bo=m=>fs(m,ir).bind(f=>$.from(f.match(/\d+/g))).map(f=>un(f,Ke)),ha=(m,f)=>m+","+f,Yr=(m,f,E)=>$.from(m.access[ha(f,E)]),Nn=(m,f,E)=>{const R=Qs(m,X=>E(f,X.element));return R.length>0?$.some(R[0]):$.none()},Qs=(m,f)=>{const E=Me(m.all,R=>R.cells);return gn(E,f)},Oo=m=>{const f={};let E=0;return Ln(m.cells,R=>{const X=R.colspan;Ae(X,fe=>{const Ie=E+fe;f[Ie]=ga(R.element,X,Ie)}),E+=X}),f},Ic=m=>{const f={},E=[],X=Fe(m).map(bc=>bc.element).bind(Ze).bind(bo).getOr({});let fe=0,Ie=0,Qe=0;const{pass:At,fail:Lt}=Xt(m,bc=>bc.section==="colgroup");Ln(Lt,bc=>{const xa=[];Ln(bc.cells,Ca=>{let hl=0;for(;f[ha(Qe,hl)]!==void 0;)hl++;const Fd=To(X,hl.toString()),Wa=Nr(Ca.element,Ca.rowspan,Ca.colspan,Qe,hl,Fd);for(let _u=0;_u<Ca.colspan;_u++)for(let Mu=0;Mu<Ca.rowspan;Mu++){const Du=Qe+Mu,Pi=hl+_u,Hs=ha(Du,Pi);f[Hs]=Wa,Ie=Math.max(Ie,Pi+1)}xa.push(Wa)}),fe++,E.push(Bc(bc.element,xa,bc.section)),Qe++});const{columns:rs,colgroups:Bo}=Ee(At).map(bc=>{const xa=Oo(bc);return{colgroups:[$o(bc.element,gt(xa))],columns:xa}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Xn(fe,Ie),access:f,all:E,columns:rs,colgroups:Bo}},gc={fromTable:m=>{const f=Fo(m);return Ic(f)},generate:Ic,getAt:Yr,findItem:Nn,filterItems:Qs,justCells:m=>Me(m.all,f=>f.cells),justColumns:m=>gt(m.columns),hasColumns:m=>We(m.columns).length>0,getColumnAt:(m,f)=>$.from(m.columns[f])};var Hc=tinymce.util.Tools.resolve("tinymce.util.Tools");const Or=(m,f,E)=>{const R=m.select("td,th",f);let X;for(let fe=0;fe<R.length;fe++){const Ie=m.getStyle(R[fe],E);if(An(X)&&(X=Ie),X!==Ie)return""}return X},xc=(m,f,E)=>{Hc.each("left center right".split(" "),R=>{R!==E&&m.formatter.remove("align"+R,{},f)}),E&&m.formatter.apply("align"+E,{},f)},Tl=(m,f,E)=>{Hc.each("top middle bottom".split(" "),R=>{R!==E&&m.formatter.remove("valign"+R,{},f)}),E&&m.formatter.apply("valign"+E,{},f)},kl=(m,f,E)=>{m.dispatch("TableModified",{...E,table:f})},M=(m,f)=>mc(m).getOr(f),H=(m,f,E)=>M(U(m,f),E),ae=(m,f,E,R)=>{const X=H(m,`padding-${E}`,0),fe=H(m,`padding-${R}`,0),Ie=H(m,`border-${E}-width`,0),Qe=H(m,`border-${R}-width`,0);return f-X-fe-Ie-Qe},ge=(m,f)=>{const E=m.dom,R=E.getBoundingClientRect().width||E.offsetWidth;return ae(m,R,"left","right")},dn=m=>ge(m);var Yo=tinymce.util.Tools.resolve("tinymce.Env");const er="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Xo=Ae(5,m=>{const f=`${m+1}px`;return{title:f,value:f}}),wr=Ve(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],m=>({title:m,value:m.toLowerCase()})),vs="100%",Gs=m=>{var f;const E=m.dom,R=(f=E.getParent(m.selection.getStart(),E.isBlock))!==null&&f!==void 0?f:m.getBody();return dn(hn.fromDom(R))+"px"},Pc=(m,f)=>pd(m)||!fa(m)?f:hd(m)?{...f,width:Gs(m)}:{...f,width:vs},pa=(m,f)=>pd(m)||fa(m)?f:hd(m)?{...f,width:Gs(m)}:{...f,width:vs},Ls=m=>f=>f.options.get(m),Lc=m=>{const f=m.options.register;f("table_border_widths",{processor:"object[]",default:Xo}),f("table_border_styles",{processor:"object[]",default:wr}),f("table_cell_advtab",{processor:"boolean",default:!0}),f("table_row_advtab",{processor:"boolean",default:!0}),f("table_advtab",{processor:"boolean",default:!0}),f("table_appearance_options",{processor:"boolean",default:!0}),f("table_grid",{processor:"boolean",default:!Yo.deviceType.isTouch()}),f("table_cell_class_list",{processor:"object[]",default:[]}),f("table_row_class_list",{processor:"object[]",default:[]}),f("table_class_list",{processor:"object[]",default:[]}),f("table_toolbar",{processor:"string",default:er}),f("table_background_color_map",{processor:"object[]",default:[]}),f("table_border_color_map",{processor:"object[]",default:[]})},ss=Ls("table_sizing_mode"),Vr=Ls("table_border_widths"),Jc=Ls("table_border_styles"),_i=Ls("table_cell_advtab"),Mi=Ls("table_row_advtab"),Nc=Ls("table_advtab"),uu=Ls("table_appearance_options"),Xr=Ls("table_grid"),fa=Ls("table_style_by_css"),Di=Ls("table_cell_class_list"),du=Ls("table_row_class_list"),$i=Ls("table_class_list"),El=Ls("table_toolbar"),gd=Ls("table_background_color_map"),Ol=Ls("table_border_color_map"),hd=m=>ss(m)==="fixed",pd=m=>ss(m)==="responsive",fd=m=>{const f=m.options,E=f.get("table_default_styles");return f.isSet("table_default_styles")?E:Pc(m,E)},bd=m=>{const f=m.options,E=f.get("table_default_attributes");return f.isSet("table_default_attributes")?E:pa(m,E)},vd=(m,f)=>f.column>=m.startCol&&f.column+f.colspan-1<=m.finishCol&&f.row>=m.startRow&&f.row+f.rowspan-1<=m.finishRow,mu=(m,f)=>{let E=!0;const R=se(vd,f);for(let X=f.startRow;X<=f.finishRow;X++)for(let fe=f.startCol;fe<=f.finishCol;fe++)E=E&&gc.getAt(m,X,fe).exists(R);return E?$.some(f):$.none()},cl=(m,f)=>Pt(Math.min(m.row,f.row),Math.min(m.column,f.column),Math.max(m.row+m.rowspan-1,f.row+f.rowspan-1),Math.max(m.column+m.colspan-1,f.column+f.colspan-1)),gu=(m,f,E)=>{const R=gc.findItem(m,f,ns),X=gc.findItem(m,E,ns);return R.bind(fe=>X.map(Ie=>cl(fe,Ie)))},ai=(m,f,E)=>gu(m,f,E).bind(R=>mu(m,R)),hu=(m,f,E)=>{const R=km(m);return ai(R,f,E)},km=gc.fromTable,al=(m,f)=>{os(m).each(R=>{R.dom.insertBefore(f.dom,m.dom)})},Qc=(m,f)=>{Ir(m).fold(()=>{os(m).each(X=>{li(X,f)})},R=>{al(R,f)})},ba=(m,f)=>{xo(m).fold(()=>{li(m,f)},R=>{m.dom.insertBefore(f.dom,R.dom)})},li=(m,f)=>{m.dom.appendChild(f.dom)},Ha=(m,f)=>{al(m,f),li(f,m)},ll=(m,f)=>{Ln(f,(E,R)=>{const X=R===0?m:f[R-1];Qc(X,E)})},il=(m,f)=>{Ln(f,E=>{li(m,E)})},ul=m=>{const f=m.dom;f.parentNode!==null&&f.parentNode.removeChild(f)},Em=m=>{const f=No(m);f.length>0&&ll(m,f),ul(m)},Al=((m,f)=>{const E=fe=>{if(!m(fe))throw new Error("Can only get "+f+" value of a "+f+" node");return R(fe).getOr("")},R=fe=>m(fe)?$.from(fe.dom.nodeValue):$.none();return{get:E,getOption:R,set:(fe,Ie)=>{if(!m(fe))throw new Error("Can only set raw "+f+" value of a "+f+" node");fe.dom.nodeValue=Ie}}})(is,"text"),_l=m=>Al.get(m),yd=(m,f)=>Al.set(m,f);var Ar=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],pu=()=>{const m=Lt=>hn.fromDom(Lt.dom.cloneNode(!1)),f=Lt=>$s(Lt).dom,E=Lt=>ps(Lt)?Xe(Lt)==="body"?!0:Yt(Ar,Xe(Lt)):!1,R=Lt=>ps(Lt)?Yt(["br","img","hr","input"],Xe(Lt)):!1,X=Lt=>ps(Lt)&&us(Lt,"contenteditable")==="false",fe=(Lt,rs)=>Lt.dom.compareDocumentPosition(rs.dom),Ie=(Lt,rs)=>{const Bo=Ws(Lt);Xs(rs,Bo)},Qe=Lt=>{const rs=Xe(Lt);return Yt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],rs)},At=Lt=>ps(Lt)?fs(Lt,"lang"):$.none();return{up:Re({selector:ao,closest:V,predicate:rt,all:xs}),down:Re({selector:qt,predicate:lr}),styles:Re({get:U,getRaw:le,set:D,remove:De}),attrs:Re({get:us,set:In,remove:uo,copyTo:Ie}),insert:Re({before:al,after:Qc,afterAll:ll,append:li,appendAll:il,prepend:ba,wrap:Ha}),remove:Re({unwrap:Em,remove:ul}),create:Re({nu:hn.fromTag,clone:m,text:hn.fromText}),query:Re({comparePosition:fe,prevSibling:ar,nextSibling:Ir}),property:Re({children:No,name:Xe,parent:os,document:f,isText:is,isComment:Ds,isElement:ps,isSpecial:Qe,getLanguage:At,getText:_l,setText:yd,isBoundary:E,isEmptyTag:R,isNonEditable:X}),eq:ns,is:Do}};const wd=(m,f,E,R)=>{const X=E[0],fe=E.slice(1);return R(m,f,X,fe)},fu=(m,f,E)=>E.length>0?wd(m,f,E,va):$.none(),va=(m,f,E,R)=>{const X=f(m,E);return En(R,(fe,Ie)=>{const Qe=f(m,Ie);return Jr(m,fe,Qe)},X)},Jr=(m,f,E)=>f.bind(R=>E.filter(se(m.eq,R))),Sd=fu,Am=pu(),xd=(m,f)=>Sd(Am,(E,R)=>m(R),f),bu=m=>ao(m,"table"),Ml=(m,f)=>{const E=qt(m,f);return E.length>0?$.some(E):$.none()},vu=(m,f,E)=>It(m,f).bind(R=>It(m,E).bind(X=>xd(bu,[R,X]).map(fe=>({first:R,last:X,table:fe})))),Bg=(m,f)=>Ml(m,f),Ig=(m,f,E)=>vu(m,f,E).bind(R=>{const X=At=>ns(m,At),fe="thead,tfoot,tbody,table",Ie=ao(R.first,fe,X),Qe=ao(R.last,fe,X);return Ie.bind(At=>Qe.bind(Lt=>ns(At,Lt)?hu(R.table,R.first,R.last):$.none()))}),yu=m=>Ve(m,hn.fromDom),_m="data-mce-selected",dl="data-mce-first-selected",wu="td["+dl+"],th["+dl+"]",Cd="data-mce-last-selected",es="td["+Cd+"],th["+Cd+"]",Rs={selected:_m,firstSelectedSelector:wu,lastSelectedSelector:es},Pa=m=>Ze(m).bind(f=>Bg(f,Rs.firstSelectedSelector)).fold(Re(m),f=>f[0]),Fi=m=>(f,E)=>{const R=Xe(f),X=R==="col"||R==="colgroup"?Pa(f):f;return V(X,m,E)},Td=Fi("th,td,caption"),tr=Fi("th,td"),Dl=m=>yu(m.model.table.getSelectedCells()),ea=(m,f)=>{const E=tr(m),R=E.bind(X=>Ze(X)).map(X=>tn(X));return bs(E,R,(X,fe)=>gn(fe,Ie=>Mo(yu(Ie.dom.cells),Qe=>us(Qe,f)==="1"||ns(Qe,X)))).getOr([])},$l=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],kd=m=>({value:Fl(m)}),mn=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,zr=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Ri=m=>mn.test(m)||zr.test(m),Fl=m=>Fs(m,"#").toUpperCase(),Su=m=>Ri(m)?$.some({value:Fl(m)}):$.none(),xu=m=>{const f=m.toString(16);return(f.length===1?"0"+f:f).toUpperCase()},_r=m=>{const f=xu(m.red)+xu(m.green)+xu(m.blue);return kd(f)},Qr=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,hc=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Bs=(m,f,E,R)=>({red:m,green:f,blue:E,alpha:R}),Cu=(m,f,E,R)=>{const X=parseInt(m,10),fe=parseInt(f,10),Ie=parseInt(E,10),Qe=parseFloat(R);return Bs(X,fe,Ie,Qe)},Rl=m=>{if(m==="transparent")return $.some(Bs(0,0,0,0));const f=Qr.exec(m);if(f!==null)return $.some(Cu(f[1],f[2],f[3],"1"));const E=hc.exec(m);return E!==null?$.some(Cu(E[1],E[2],E[3],E[4])):$.none()},ds=m=>Su(m).orThunk(()=>Rl(m).map(_r)).getOrThunk(()=>{const f=document.createElement("canvas");f.height=1,f.width=1;const E=f.getContext("2d");E.clearRect(0,0,f.width,f.height),E.fillStyle="#FFFFFF",E.fillStyle=m,E.fillRect(0,0,1,1);const R=E.getImageData(0,0,1,1).data,X=R[0],fe=R[1],Ie=R[2],Qe=R[3];return _r(Bs(X,fe,Ie,Qe))}),La=m=>Rl(m).map(_r).map(f=>"#"+f.value).getOr(m),ii=m=>{let f=m;return{get:()=>f,set:X=>{f=X}}},Tu=m=>{const f=ii($.none()),E=()=>f.get().each(m);return{clear:()=>{E(),f.set($.none())},isSet:()=>f.get().isSome(),get:()=>f.get(),set:Qe=>{E(),f.set($.some(Qe))}}},Mm=()=>Tu(m=>m.unbind()),Ed=(m,f,E)=>R=>{const X=Mm(),fe=Yc(E),Ie=()=>{const Qe=Dl(m),At=Lt=>m.formatter.match(f,{value:E},Lt.dom,fe);fe?(R.setActive(!Mo(Qe,At)),X.set(m.formatter.formatChanged(f,Lt=>R.setActive(!Lt),!0))):(R.setActive(Pe(Qe,At)),X.set(m.formatter.formatChanged(f,R.setActive,!1,{value:E})))};return m.initialized?Ie():m.on("init",Ie),X.clear},Bi=m=>To(m,"menu"),vo=m=>Ve(m,f=>{const E=f.text||f.title||"";return Bi(f)?{text:E,items:vo(f.menu)}:{text:E,value:f.value}}),Na=(m,f,E,R)=>Ve(f,X=>{const fe=X.text||X.title;return Bi(X)?{type:"nestedmenuitem",text:fe,getSubmenuItems:()=>Na(m,X.menu,E,R)}:{text:fe,type:"togglemenuitem",onAction:()=>R(X.value),onSetup:Ed(m,E,X.value)}}),Zr=(m,f)=>E=>{m.execCommand("mceTableApplyCellStyle",!1,{[f]:E})},ml=m=>Me(m,f=>Bi(f)?[{...f,menu:ml(f.menu)}]:kr(f.value)?[f]:[]),Va=(m,f,E,R)=>X=>X(Na(m,f,E,R)),Bl=(m,f,E)=>{const R=Ve(f,X=>({text:X.title,value:"#"+ds(X.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:R.length>0?R:void 0,allowCustomColors:!1},onAction:X=>{const fe=X.value==="remove"?"":X.value;m.execCommand("mceTableApplyCellStyle",!1,{[E]:fe})}}]},wn=m=>()=>{const E=m.queryCommandValue("mceTableRowType")==="header"?"body":"header";m.execCommand("mceTableRowType",!1,{type:E})},Ii=m=>()=>{const E=m.queryCommandValue("mceTableColType")==="th"?"td":"th";m.execCommand("mceTableColType",!1,{type:E})},Od=m=>{const f=vo(Di(m));return f.length>0?$.some({name:"class",type:"listbox",label:"Class",items:f}):$.none()},ku=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:$l}],Ad=m=>ku.concat(Od(m).toArray()),Eu=(m,f)=>{const R=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(vo(Jc(m)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:f==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(R):R}},Il={normal:(m,f)=>{const E=m.dom;return{setAttrib:(Ie,Qe)=>{E.setAttrib(f,Ie,Qe)},setStyle:(Ie,Qe)=>{E.setStyle(f,Ie,Qe)},setFormat:(Ie,Qe)=>{Qe===""?m.formatter.remove(Ie,{value:null},f,!0):m.formatter.apply(Ie,{value:Qe},f)}}}},Ou=Ss("th"),h=(m,f)=>m&&f?"sectionCells":m?"section":"cells",S=m=>{const f=m.section==="thead",E=Kc(O(m.cells),"th");return m.section==="tfoot"?{type:"footer"}:f||E?{type:"header",subType:h(f,E)}:{type:"body"}},O=m=>{const f=gn(m,E=>Ou(E.element));return f.length===0?$.some("td"):f.length===m.length?$.some("th"):$.none()},L=m=>{const f=Ve(m,X=>S(X).type),E=Yt(f,"header"),R=Yt(f,"footer");if(!E&&!R)return $.some("body");{const X=Yt(f,"body");return E&&!X&&!R?$.some("header"):!E&&!X&&R?$.some("footer"):$.none()}},G=m=>{let f=!1,E;return(...R)=>(f||(f=!0,E=m.apply(null,R)),E)},$e=(m,f)=>bt(m.all,E=>ne(E.cells,R=>ns(f,R.element))),dt=(m,f,E)=>{const R=Ve(f.selection,fe=>F(fe).bind(Ie=>$e(m,Ie)).filter(E)),X=Qn(R);return Qo(X.length>0,X)},Zt=(m,f)=>f.mergable,Nt=(m,f)=>f.unmergable,Et=(m,f)=>dt(m,f,Ke),ts=(m,f)=>$e(m,f).exists(E=>!E.isLocked),qs=(m,f)=>Pe(f,E=>ts(m,E)),pc=(m,f)=>Zt(m,f).filter(E=>qs(m,E.cells)),za=(m,f)=>Nt(m,f).filter(E=>qs(m,E));({...{generate:m=>{if(!ye(m))throw new Error("cases must be an array");if(m.length===0)throw new Error("there must be at least one case");const f=[],E={};return Ln(m,(R,X)=>{const fe=We(R);if(fe.length!==1)throw new Error("one and only one name per case");const Ie=fe[0],Qe=R[Ie];if(E[Ie]!==void 0)throw new Error("duplicate key detected:"+Ie);if(Ie==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ye(Qe))throw new Error("case arguments must be an array");f.push(Ie),E[Ie]=(...At)=>{const Lt=At.length;if(Lt!==Qe.length)throw new Error("Wrong number of arguments to case "+Ie+". Expected "+Qe.length+" ("+Qe+"), got "+Lt);return{fold:(...Bo)=>{if(Bo.length!==m.length)throw new Error("Wrong number of arguments to fold. Expected "+m.length+", got "+Bo.length);return Bo[X].apply(null,At)},match:Bo=>{const yo=We(Bo);if(f.length!==yo.length)throw new Error("Wrong number of arguments to match. Expected: "+f.join(",")+`
Actual: `+yo.join(","));if(!Pe(f,xa=>Yt(yo,xa)))throw new Error("Not all branches were specified when using match. Specified: "+yo.join(", ")+`
Required: `+f.join(", "));return Bo[Ie].apply(null,At)},log:Bo=>{console.log(Bo,{constructors:f,constructor:Ie,params:At})}}}}),E}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const Hl=(m,f)=>{const E=gc.fromTable(m);return Et(E,f).bind(X=>{const fe=X[X.length-1],Ie=X[0].row,Qe=fe.row+fe.rowspan,At=E.all.slice(Ie,Qe);return L(At)}).getOr("")},Pl=m=>Pr(m,"rgb")?La(m):m,Hg=m=>{const f=hn.fromDom(m);return{borderwidth:le(f,"border-width").getOr(""),borderstyle:le(f,"border-style").getOr(""),bordercolor:le(f,"border-color").map(Pl).getOr(""),backgroundcolor:le(f,"background-color").map(Pl).getOr("")}},Ep=m=>{const f=m[0],E=m.slice(1);return Ln(E,R=>{Ln(We(f),X=>{on(R,(fe,Ie)=>{const Qe=f[X];Qe!==""&&X===Ie&&Qe!==fe&&(f[X]="")})})}),f},Hi=(m,f,E,R)=>ne(m,X=>!An(E.formatter.matchNode(R,f+X))).getOr(""),ec=se(Hi,["left","center","right"],"align"),_d=se(Hi,["top","middle","bottom"],"valign"),Md=(m,f)=>{const E=fd(m),R=bd(m),X=()=>({borderstyle:Gt(E,"border-style").getOr(""),bordercolor:Pl(Gt(E,"border-color").getOr("")),backgroundcolor:Pl(Gt(E,"background-color").getOr(""))}),fe={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},Ie=()=>{const rs=E["border-width"];return fa(m)&&rs?{border:rs}:Gt(R,"border").fold(()=>({}),Bo=>({border:Bo}))},Qe=f?X():{},At=()=>{const rs=Gt(E,"border-spacing").or(Gt(R,"cellspacing")).fold(()=>({}),yo=>({cellspacing:yo})),Bo=Gt(E,"border-padding").or(Gt(R,"cellpadding")).fold(()=>({}),yo=>({cellpadding:yo}));return{...rs,...Bo}};return{...fe,...E,...R,...Qe,...Ie(),...At()}},nr=m=>Ze(hn.fromDom(m)).map(f=>{const E={selection:yu(m.cells)};return Hl(f,E)}).getOr(""),Au=(m,f,E)=>{const R=(Qe,At)=>{const Lt=le(hn.fromDom(At),"border-width");return fa(m)&&Lt.isSome()?Lt.getOr(""):Qe.getAttrib(At,"border")||Or(m.dom,At,"border-width")||Or(m.dom,At,"border")||""},X=m.dom,fe=fa(m)?X.getStyle(f,"border-spacing")||X.getAttrib(f,"cellspacing"):X.getAttrib(f,"cellspacing")||X.getStyle(f,"border-spacing"),Ie=fa(m)?Or(X,f,"padding")||X.getAttrib(f,"cellpadding"):X.getAttrib(f,"cellpadding")||Or(X,f,"padding");return{width:X.getStyle(f,"width")||X.getAttrib(f,"width"),height:X.getStyle(f,"height")||X.getAttrib(f,"height"),cellspacing:fe??"",cellpadding:Ie??"",border:R(X,f),caption:!!X.select("caption",f)[0],class:X.getAttrib(f,"class",""),align:ec(m,f),...E?Hg(f):{}}},Dd=(m,f,E)=>{const R=m.dom;return{height:R.getStyle(f,"height")||R.getAttrib(f,"height"),class:R.getAttrib(f,"class",""),type:nr(f),align:ec(m,f),...E?Hg(f):{}}},Pg=(m,f,E,R)=>{const X=m.dom,fe=R.getOr(f),Ie=(Qe,At)=>X.getStyle(Qe,At)||X.getAttrib(Qe,At);return{width:Ie(fe,"width"),height:Ie(f,"height"),scope:X.getAttrib(f,"scope"),celltype:je(f),class:X.getAttrib(f,"class",""),halign:ec(m,f),valign:_d(m,f),...E?Hg(f):{}}},Lg=(m,f)=>{const E=gc.fromTable(m),R=gc.justCells(E),X=gn(R,fe=>Mo(f,Ie=>ns(fe.element,Ie)));return Ve(X,fe=>({element:fe.element.dom,column:gc.getColumnAt(E,fe.column).map(Ie=>Ie.element.dom)}))},Ng=(m,f,E,R)=>{R("scope")&&m.setAttrib("scope",E.scope),R("class")&&m.setAttrib("class",E.class),R("height")&&m.setStyle("height",Ot(E.height)),R("width")&&f.setStyle("width",Ot(E.width))},ui=(m,f,E)=>{E("backgroundcolor")&&m.setFormat("tablecellbackgroundcolor",f.backgroundcolor),E("bordercolor")&&m.setFormat("tablecellbordercolor",f.bordercolor),E("borderstyle")&&m.setFormat("tablecellborderstyle",f.borderstyle),E("borderwidth")&&m.setFormat("tablecellborderwidth",Ot(f.borderwidth))},Vg=(m,f,E,R)=>{const X=f.length===1;Ln(f,fe=>{const Ie=fe.element,Qe=X?Ke:R,At=Il.normal(m,Ie),Lt=fe.column.map(rs=>Il.normal(m,rs)).getOr(At);Ng(At,Lt,E,Qe),_i(m)&&ui(At,E,Qe),R("halign")&&xc(m,Ie,E.halign),R("valign")&&Tl(m,Ie,E.valign)})},Ll=(m,f)=>{m.execCommand("mceTableCellType",!1,{type:f.celltype,no_events:!0})},zg=(m,f,E,R)=>{const X=Jn(R,(fe,Ie)=>E[Ie]!==fe);v(X)>0&&f.length>=1&&Ze(f[0]).each(fe=>{const Ie=Lg(fe,f),Qe=v(Jn(X,(Lt,rs)=>rs!=="scope"&&rs!=="celltype"))>0,At=Un(X,"celltype");(Qe||Un(X,"scope"))&&Vg(m,Ie,R,se(Un,X)),At&&Ll(m,R),kl(m,fe.dom,{structure:At,style:Qe})})},Op=(m,f,E,R)=>{const X=R.getData();R.close(),m.undoManager.transact(()=>{zg(m,f,E,X),m.focus()})},as=(m,f)=>{const E=Ze(f[0]).map(R=>Ve(Lg(R,f),X=>Pg(m,X.element,_i(m),X.column)));return Ep(E.getOrDie())},ya=m=>{const f=Dl(m);if(f.length===0)return;const E=as(m,f),R={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ad(m)},Eu(m,"cell")]},X={type:"panel",items:[{type:"grid",columns:2,items:Ad(m)}]};m.windowManager.open({title:"Cell Properties",size:"normal",body:_i(m)?R:X,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:E,onSubmit:se(Op,m,f,E)})},tc=m=>{const f=vo(du(m));return f.length>0?$.some({name:"class",type:"listbox",label:"Class",items:f}):$.none()},di=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],or=m=>di.concat(tc(m).toArray()),Zg=(m,f,E)=>{E("class")&&m.setAttrib("class",f.class),E("height")&&m.setStyle("height",Ot(f.height))},ur=(m,f,E)=>{E("backgroundcolor")&&m.setStyle("background-color",f.backgroundcolor),E("bordercolor")&&m.setStyle("border-color",f.bordercolor),E("borderstyle")&&m.setStyle("border-style",f.borderstyle)},Mr=(m,f,E,R)=>{const fe=f.length===1?Ke:R;Ln(f,Ie=>{const Qe=Il.normal(m,Ie);Zg(Qe,E,fe),Mi(m)&&ur(Qe,E,fe),R("align")&&xc(m,Ie,E.align)})},$d=(m,f)=>{m.execCommand("mceTableRowType",!1,{type:f.type,no_events:!0})},Ce=(m,f,E,R)=>{const X=Jn(R,(fe,Ie)=>E[Ie]!==fe);if(v(X)>0){const fe=Un(X,"type"),Ie=fe?v(X)>1:!0;Ie&&Mr(m,f,R,se(Un,X)),fe&&$d(m,R),Ze(hn.fromDom(f[0])).each(Qe=>kl(m,Qe.dom,{structure:fe,style:Ie}))}},fc=(m,f,E,R)=>{const X=R.getData();R.close(),m.undoManager.transact(()=>{Ce(m,f,E,X),m.focus()})},Ap=m=>{const f=ea(Jt(m),Rs.selected);if(f.length===0)return;const E=Ve(f,Ie=>Dd(m,Ie.dom,Mi(m))),R=Ep(E),X={type:"tabpanel",tabs:[{title:"General",name:"general",items:or(m)},Eu(m,"row")]},fe={type:"panel",items:[{type:"grid",columns:2,items:or(m)}]};m.windowManager.open({title:"Row Properties",size:"normal",body:Mi(m)?X:fe,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:R,onSubmit:se(fc,m,Ve(f,Ie=>Ie.dom),R)})},Ts=(m,f,E)=>{const R=E?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],X=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],fe=uu(m)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Ie=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Qe=f.length>0?[{type:"listbox",name:"class",label:"Class",items:f}]:[];return R.concat(X).concat(fe).concat(Ie).concat(Qe)},Za=(m,f,E,R)=>{if(f.tagName==="TD"||f.tagName==="TH")sn(E)&&Zn(R)?m.setStyle(f,E,R):m.setStyles(f,E);else if(f.children)for(let X=0;X<f.children.length;X++)Za(m,f.children[X],E,R)},_p=(m,f,E,R)=>{const X=m.dom,fe={},Ie={},Qe=fa(m),At=Nc(m);if(An(E.class)||(fe.class=E.class),Ie.height=Ot(E.height),Qe?Ie.width=Ot(E.width):X.getAttrib(f,"width")&&(fe.width=ot(E.width)),Qe?(Ie["border-width"]=Ot(E.border),Ie["border-spacing"]=Ot(E.cellspacing)):(fe.border=E.border,fe.cellpadding=E.cellpadding,fe.cellspacing=E.cellspacing),Qe&&f.children){const Lt={};if(R.border&&(Lt["border-width"]=Ot(E.border)),R.cellpadding&&(Lt.padding=Ot(E.cellpadding)),At&&R.bordercolor&&(Lt["border-color"]=E.bordercolor),!st(Lt))for(let rs=0;rs<f.children.length;rs++)Za(X,f.children[rs],Lt)}if(At){const Lt=E;Ie["background-color"]=Lt.backgroundcolor,Ie["border-color"]=Lt.bordercolor,Ie["border-style"]=Lt.borderstyle}X.setStyles(f,{...fd(m),...Ie}),X.setAttribs(f,{...bd(m),...fe})},ta=(m,f,E,R)=>{const X=m.dom,fe=R.getData(),Ie=Jn(fe,(Qe,At)=>E[At]!==Qe);R.close(),fe.class===""&&delete fe.class,m.undoManager.transact(()=>{if(!f){const Qe=Js(fe.cols).getOr(1),At=Js(fe.rows).getOr(1);m.execCommand("mceInsertTable",!1,{rows:At,columns:Qe}),f=tr(Jt(m),nt(m)).bind(Lt=>Ze(Lt,nt(m))).map(Lt=>Lt.dom).getOrDie()}if(v(Ie)>0){const Qe={border:Un(Ie,"border"),bordercolor:Un(Ie,"bordercolor"),cellpadding:Un(Ie,"cellpadding")};_p(m,f,fe,Qe);const At=X.select("caption",f)[0];(At&&!fe.caption||!At&&fe.caption)&&m.execCommand("mceTableToggleCaption"),xc(m,f,fe.align)}if(m.focus(),m.addVisual(),v(Ie)>0){const Qe=Un(Ie,"caption"),At=Qe?v(Ie)>1:!0;kl(m,f,{structure:Qe,style:At})}})},Ug=(m,f)=>{const E=m.dom;let R,X=Md(m,Nc(m));f?(X.cols="1",X.rows="1",Nc(m)&&(X.borderstyle="",X.bordercolor="",X.backgroundcolor="")):(R=E.getParent(m.selection.getStart(),"table",m.getBody()),R?X=Au(m,R,Nc(m)):Nc(m)&&(X.borderstyle="",X.bordercolor="",X.backgroundcolor=""));const fe=vo($i(m));fe.length>0&&X.class&&(X.class=X.class.replace(/\s*mce\-item\-table\s*/g,""));const Ie={type:"grid",columns:2,items:Ts(m,fe,f)},Qe=()=>({type:"panel",items:[Ie]}),At=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[Ie]},Eu(m,"table")]}),Lt=Nc(m)?At():Qe();m.windowManager.open({title:"Table Properties",size:"normal",body:Lt,onSubmit:se(ta,m,R,X),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:X})},Nl=m=>{const f=E=>{lo(Jt(m))&&E()};on({mceTableProps:se(Ug,m,!1),mceTableRowProps:se(Ap,m),mceTableCellProps:se(ya,m),mceInsertTableDialog:se(Ug,m,!0)},(E,R)=>m.addCommand(R,()=>f(E)))},Wg=(m,f)=>q(m,f).isSome(),Cc=jt,oo=m=>{const f=(R,X)=>fs(R,X).exists(fe=>parseInt(fe,10)>1),E=R=>f(R,"rowspan")||f(R,"colspan");return m.length>0&&Pe(m,E)?$.some(m):$.none()},Ua=(m,f,E)=>f.length<=1?$.none():Ig(m,E.firstSelectedSelector,E.lastSelectedSelector).map(R=>({bounds:R,cells:f})),mi=m=>({element:m,mergable:$.none(),unmergable:$.none(),selection:[m]}),dr=(m,f,E)=>({element:E,mergable:Ua(f,m,Rs),unmergable:oo(m),selection:Cc(m)}),Fm=m=>{const f=ii($.none()),E=ii([]);let R=$.none();const X=Ss("caption"),fe=Mn=>R.forall(cs=>!cs[Mn]),Ie=()=>Td(Jt(m),nt(m)),Qe=()=>Td(vn(m),nt(m)),At=()=>Ie().bind(Mn=>js(bs(Ze(Mn),Qe().bind(Ze),(cs,ls)=>ns(cs,ls)?X(Mn)?$.some(mi(Mn)):$.some(dr(Dl(m),cs,Mn)):$.none()))),Lt=Mn=>Ze(Mn.element).map(ls=>{const Dr=gc.fromTable(ls),Rd=Et(Dr,Mn).getOr([]),Im=Vs(Rd,(oa,$r)=>($r.isLocked&&(oa.onAny=!0,$r.column===0?oa.onFirst=!0:$r.column+$r.colspan>=Dr.grid.columns&&(oa.onLast=!0)),oa),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:pc(Dr,Mn).isSome(),unmergeable:za(Dr,Mn).isSome(),locked:Im}}),rs=()=>{f.set(G(At)()),R=f.get().bind(Lt),Ln(E.get(),ze)},Bo=Mn=>(Mn(),E.set(E.get().concat([Mn])),()=>{E.set(gn(E.get(),cs=>cs!==Mn))}),yo=(Mn,cs)=>Bo(()=>f.get().fold(()=>{Mn.setEnabled(!1)},ls=>{Mn.setEnabled(!cs(ls)&&m.selection.isEditable())})),bc=(Mn,cs,ls)=>Bo(()=>f.get().fold(()=>{Mn.setEnabled(!1),Mn.setActive(!1)},Dr=>{Mn.setEnabled(!cs(Dr)&&m.selection.isEditable()),Mn.setActive(ls(Dr))})),xa=Mn=>R.exists(cs=>cs.locked[Mn]),Ca=Mn=>yo(Mn,cs=>!1),hl=Mn=>yo(Mn,cs=>X(cs.element)),Fd=Mn=>cs=>yo(cs,ls=>X(ls.element)||xa(Mn)),Wa=Mn=>cs=>yo(cs,ls=>X(ls.element)||Mn().isNone()),_u=(Mn,cs)=>ls=>yo(ls,Dr=>X(Dr.element)||Mn().isNone()||xa(cs)),Mu=Mn=>yo(Mn,cs=>fe("mergeable")),Du=Mn=>yo(Mn,cs=>fe("unmergeable")),Pi=Mn=>bc(Mn,mo,cs=>Ze(cs.element,nt(m)).exists(Dr=>Wg(Dr,"caption"))),Hs=(Mn,cs)=>ls=>bc(ls,Dr=>X(Dr.element),()=>m.queryCommandValue(Mn)===cs),ja=Hs("mceTableRowType","header"),$u=Hs("mceTableColType","th");return m.on("NodeChange ExecCommand TableSelectorChange",rs),{onSetupTable:Ca,onSetupCellOrRow:hl,onSetupColumn:Fd,onSetupPasteable:Wa,onSetupPasteableColumn:_u,onSetupMergeable:Mu,onSetupUnmergeable:Du,resetTargets:rs,onSetupTableWithCaption:Pi,onSetupTableRowHeaders:ja,onSetupTableColumnHeaders:$u,targets:f.get}};var gi=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Rm="x-tinymce/dom-table-",nc=Rm+"rows",jg=Rm+"columns",oe=m=>{var f;const E=(f=gi.read())!==null&&f!==void 0?f:[];return bt(E,R=>$.from(R.getType(m)))},oc=()=>oe(nc),gl=()=>oe(jg),wa=m=>f=>{const E=()=>{f.setEnabled(m.selection.isEditable())};return m.on("NodeChange",E),E(),()=>{m.off("NodeChange",E)}},Sa=(m,f)=>{m.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:wa(m),fetch:Qe=>Qe("inserttable | cell row column | advtablesort | tableprops deletetable")});const E=Qe=>()=>m.execCommand(Qe),R=(Qe,At)=>{m.queryCommandSupported(At.command)&&m.ui.registry.addButton(Qe,{...At,onAction:pt(At.onAction)?At.onAction:E(At.command)})},X=(Qe,At)=>{m.queryCommandSupported(At.command)&&m.ui.registry.addToggleButton(Qe,{...At,onAction:pt(At.onAction)?At.onAction:E(At.command)})};R("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:f.onSetupTable}),R("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:f.onSetupTable}),R("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:f.onSetupCellOrRow}),R("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:f.onSetupMergeable}),R("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:f.onSetupUnmergeable}),R("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:f.onSetupCellOrRow}),R("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:f.onSetupCellOrRow}),R("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:f.onSetupCellOrRow}),R("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:f.onSetupCellOrRow}),R("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:f.onSetupColumn("onFirst")}),R("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:f.onSetupColumn("onLast")}),R("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:f.onSetupColumn("onAny")}),R("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:f.onSetupCellOrRow}),R("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:f.onSetupCellOrRow}),R("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:f.onSetupPasteable(oc)}),R("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:f.onSetupPasteable(oc)}),R("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:f.onSetupColumn("onAny")}),R("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:f.onSetupColumn("onAny")}),R("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:f.onSetupPasteableColumn(gl,"onFirst")}),R("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:f.onSetupPasteableColumn(gl,"onLast")}),R("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:wa(m)});const fe=ml($i(m));fe.length!==0&&m.queryCommandSupported("mceTableToggleClass")&&m.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Va(m,fe,"tableclass",Qe=>m.execCommand("mceTableToggleClass",!1,Qe)),onSetup:f.onSetupTable});const Ie=ml(Di(m));Ie.length!==0&&m.queryCommandSupported("mceTableCellToggleClass")&&m.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Va(m,Ie,"tablecellclass",Qe=>m.execCommand("mceTableCellToggleClass",!1,Qe)),onSetup:f.onSetupCellOrRow}),m.queryCommandSupported("mceTableApplyCellStyle")&&(m.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Va(m,$l,"tablecellverticalalign",Zr(m,"vertical-align")),onSetup:f.onSetupCellOrRow}),m.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Va(m,Vr(m),"tablecellborderwidth",Zr(m,"border-width")),onSetup:f.onSetupCellOrRow}),m.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Va(m,Jc(m),"tablecellborderstyle",Zr(m,"border-style")),onSetup:f.onSetupCellOrRow}),m.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Qe=>Qe(Bl(m,gd(m),"background-color")),onSetup:f.onSetupCellOrRow}),m.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Qe=>Qe(Bl(m,Ol(m),"border-color")),onSetup:f.onSetupCellOrRow})),X("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:f.onSetupTableWithCaption}),X("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:wn(m),onSetup:f.onSetupTableRowHeaders}),X("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Ii(m),onSetup:f.onSetupTableColumnHeaders})},mr=m=>{const f=R=>m.dom.is(R,"table")&&m.getBody().contains(R)&&m.dom.isEditable(R.parentNode),E=El(m);E.length>0&&m.ui.registry.addContextToolbar("table",{predicate:f,items:E,scope:"node",position:"node"})},Is=m=>f=>{const E=()=>{f.setEnabled(m.selection.isEditable())};return m.on("NodeChange",E),E(),()=>{m.off("NodeChange",E)}},l0=(m,f)=>{const E=Bo=>()=>m.execCommand(Bo),R=(Bo,yo)=>m.queryCommandSupported(yo.command)?(m.ui.registry.addMenuItem(Bo,{...yo,onAction:pt(yo.onAction)?yo.onAction:E(yo.command)}),!0):!1,X=(Bo,yo)=>{m.queryCommandSupported(yo.command)&&m.ui.registry.addToggleMenuItem(Bo,{...yo,onAction:pt(yo.onAction)?yo.onAction:E(yo.command)})},fe=Bo=>{m.execCommand("mceInsertTable",!1,{rows:Bo.numRows,columns:Bo.numColumns})},Ie=[R("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:f.onSetupCellOrRow}),R("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:f.onSetupCellOrRow}),R("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:f.onSetupCellOrRow}),R("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:f.onSetupCellOrRow}),R("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:f.onSetupCellOrRow}),R("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:f.onSetupCellOrRow}),R("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:f.onSetupPasteable(oc)}),R("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:f.onSetupPasteable(oc)})],Qe=[R("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:f.onSetupColumn("onFirst")}),R("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:f.onSetupColumn("onLast")}),R("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:f.onSetupColumn("onAny")}),R("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:f.onSetupColumn("onAny")}),R("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:f.onSetupColumn("onAny")}),R("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:f.onSetupPasteableColumn(gl,"onFirst")}),R("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:f.onSetupPasteableColumn(gl,"onLast")})],At=[R("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:f.onSetupCellOrRow}),R("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:f.onSetupMergeable}),R("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:f.onSetupUnmergeable})];Xr(m)?m.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:fe}],onSetup:Is(m)}):m.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:E("mceInsertTableDialog"),onSetup:Is(m)}),m.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:E("mceInsertTableDialog"),onSetup:Is(m)}),R("tableprops",{text:"Table properties",onSetup:f.onSetupTable,command:"mceTableProps"}),R("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:f.onSetupTable,command:"mceTableDelete"}),Yt(Ie,!0)&&m.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Re("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),Yt(Qe,!0)&&m.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Re("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),Yt(At,!0)&&m.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Re("tablecellprops tablemergecells tablesplitcells")}),m.ui.registry.addContextMenu("table",{update:()=>(f.resetTargets(),f.targets().fold(Re(""),Bo=>Xe(Bo.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Lt=ml($i(m));Lt.length!==0&&m.queryCommandSupported("mceTableToggleClass")&&m.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Na(m,Lt,"tableclass",Bo=>m.execCommand("mceTableToggleClass",!1,Bo)),onSetup:f.onSetupTable});const rs=ml(Di(m));rs.length!==0&&m.queryCommandSupported("mceTableCellToggleClass")&&m.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Na(m,rs,"tablecellclass",Bo=>m.execCommand("mceTableCellToggleClass",!1,Bo)),onSetup:f.onSetupCellOrRow}),m.queryCommandSupported("mceTableApplyCellStyle")&&(m.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Na(m,$l,"tablecellverticalalign",Zr(m,"vertical-align")),onSetup:f.onSetupCellOrRow}),m.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Na(m,Vr(m),"tablecellborderwidth",Zr(m,"border-width")),onSetup:f.onSetupCellOrRow}),m.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Na(m,Jc(m),"tablecellborderstyle",Zr(m,"border-style")),onSetup:f.onSetupCellOrRow}),m.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Bl(m,gd(m),"background-color"),onSetup:f.onSetupCellOrRow}),m.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Bl(m,Ol(m),"border-color"),onSetup:f.onSetupCellOrRow})),X("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:f.onSetupTableWithCaption}),X("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:wn(m),onSetup:f.onSetupTableRowHeaders}),X("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Ii(m),onSetup:f.onSetupTableRowHeaders})},na=m=>{const f=Fm(m);Lc(m),Nl(m),l0(m,f),Sa(m,f),mr(m)};var Bm=()=>{Po.add("table",na)};Bm()})();const wq=ma({__proto__:null,default:dM},[dM]);var mM={};(function(){var Po=tinymce.util.Tools.resolve("tinymce.PluginManager");const Lo=Object.getPrototypeOf,So=(C,F,P)=>{var ue;return P(C,F.prototype)?!0:((ue=C.constructor)===null||ue===void 0?void 0:ue.name)===F.name},zn=C=>{const F=typeof C;return C===null?"null":F==="object"&&Array.isArray(C)?"array":F==="object"&&So(C,String,(P,ue)=>ue.isPrototypeOf(P))?"string":F},Rn=C=>F=>zn(F)===C,io=C=>F=>typeof F===C,sn=C=>F=>C===F,ye=(C,F)=>An(C)&&So(C,F,(P,ue)=>Lo(P)===ue),$t=Rn("string"),An=Rn("object"),Pn=C=>ye(C,Object),Zn=Rn("array"),pt=sn(null),Vt=io("boolean"),yn=C=>C==null,rn=C=>!yn(C),Re=io("function"),jt=io("number"),tt=(C,F)=>{if(Zn(C)){for(let P=0,ue=C.length;P<ue;++P)if(!F(C[P]))return!1;return!0}return!1},se=()=>{};class ze{constructor(F,P){this.tag=F,this.value=P}static some(F){return new ze(!0,F)}static none(){return ze.singletonNone}fold(F,P){return this.tag?P(this.value):F()}isSome(){return this.tag}isNone(){return!this.tag}map(F){return this.tag?ze.some(F(this.value)):ze.none()}bind(F){return this.tag?F(this.value):ze.none()}exists(F){return this.tag&&F(this.value)}forall(F){return!this.tag||F(this.value)}filter(F){return!this.tag||F(this.value)?this:ze.none()}getOr(F){return this.tag?this.value:F}or(F){return this.tag?this:F}getOrThunk(F){return this.tag?this.value:F()}orThunk(F){return this.tag?this:F()}getOrDie(F){if(this.tag)return this.value;throw new Error(F??"Called getOrDie on None")}static from(F){return rn(F)?ze.some(F):ze.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(F){this.tag&&F(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ze.singletonNone=new ze(!1);const mo=Object.keys,Ke=Object.hasOwnProperty,$=(C,F)=>{const P=mo(C);for(let ue=0,Ze=P.length;ue<Ze;ue++){const tn=P[ue],Je=C[tn];F(Je,tn)}},We=C=>(F,P)=>{C[P]=F},Ft=(C,F,P,ue)=>{$(C,(Ze,tn)=>{(F(Ze,tn)?P:ue)(Ze,tn)})},on=(C,F)=>{const P={};return Ft(C,F,We(P),se),P},mt=(C,F)=>Ke.call(C,F),Y=(C,F)=>mt(C,F)&&C[F]!==void 0&&C[F]!==null,Jn=Array.prototype.push,Te=C=>{const F=[];for(let P=0,ue=C.length;P<ue;++P){if(!Zn(C[P]))throw new Error("Arr.flatten item "+P+" was not an array, input: "+C);Jn.apply(F,C[P])}return F},gt=(C,F)=>F>=0&&F<C.length?ze.some(C[F]):ze.none(),v=C=>gt(C,0),Gt=(C,F)=>{for(let P=0;P<C.length;P++){const ue=F(C[P],P);if(ue.isSome())return ue}return ze.none()};typeof window<"u"||Function("return this;")();const Un=(C,F,P)=>{if($t(P)||Vt(P)||jt(P))C.setAttribute(F,P+"");else throw console.error("Invalid call to Attribute.set. Key ",F,":: Value ",P,":: Element ",C),new Error("Attribute value was not simple")},To=(C,F,P)=>{Un(C.dom,F,P)},st=(C,F)=>{C.dom.removeAttribute(F)},kt=(C,F)=>{const ue=(F||document).createElement("div");if(ue.innerHTML=C,!ue.hasChildNodes()||ue.childNodes.length>1){const Ze="HTML does not have a single root node";throw console.error(Ze,C),new Error(Ze)}return Yt(ue.childNodes[0])},Sn=(C,F)=>{const ue=(F||document).createElement(C);return Yt(ue)},Kn=(C,F)=>{const ue=(F||document).createTextNode(C);return Yt(ue)},Yt=C=>{if(C==null)throw new Error("Node cannot be null or undefined");return{dom:C}},Ae={fromHtml:kt,fromTag:Sn,fromText:Kn,fromDom:Yt,fromPoint:(C,F,P)=>ze.from(C.dom.elementFromPoint(F,P)).map(Yt)};var Ve=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ln=tinymce.util.Tools.resolve("tinymce.util.URI");const Wo=C=>C.length>0,Xt=C=>F=>F.options.get(C),gn=C=>{const F=C.options.register;F("image_dimensions",{processor:"boolean",default:!0}),F("image_advtab",{processor:"boolean",default:!1}),F("image_uploadtab",{processor:"boolean",default:!0}),F("image_prepend_url",{processor:"string",default:""}),F("image_class_list",{processor:"object[]"}),F("image_description",{processor:"boolean",default:!0}),F("image_title",{processor:"boolean",default:!1}),F("image_caption",{processor:"boolean",default:!1}),F("image_list",{processor:P=>{const ue=P===!1||$t(P)||tt(P,An)||Re(P);return ue?{value:P,valid:ue}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},En=Xt("image_dimensions"),Vs=Xt("image_advtab"),Q=Xt("image_uploadtab"),ne=Xt("image_prepend_url"),ie=Xt("image_class_list"),Me=Xt("image_description"),Pe=Xt("image_title"),un=Xt("image_caption"),Wn=Xt("image_list"),Fe=Xt("a11y_advanced_options"),Ee=Xt("automatic_uploads"),bt=C=>Wo(C.options.get("images_upload_url")),Mt=C=>rn(C.options.get("images_upload_handler")),Bt=(C,F)=>Math.max(parseInt(C,10),parseInt(F,10)),Bn=C=>new Promise(F=>{const P=document.createElement("img"),ue=tn=>{P.onload=P.onerror=null,P.parentNode&&P.parentNode.removeChild(P),F(tn)};P.onload=()=>{const tn=Bt(P.width,P.clientWidth),Je=Bt(P.height,P.clientHeight),Co={width:tn,height:Je};ue(Promise.resolve(Co))},P.onerror=()=>{ue(Promise.reject(`Failed to get image dimensions for: ${C}`))};const Ze=P.style;Ze.visibility="hidden",Ze.position="fixed",Ze.bottom=Ze.left="0px",Ze.width=Ze.height="auto",document.body.appendChild(P),P.src=C}),ko=C=>(C&&(C=C.replace(/px$/,"")),C),xn=C=>(C.length>0&&/^[0-9]+$/.test(C)&&(C+="px"),C),cn=C=>{if(C.margin){const F=String(C.margin).split(" ");switch(F.length){case 1:C["margin-top"]=C["margin-top"]||F[0],C["margin-right"]=C["margin-right"]||F[0],C["margin-bottom"]=C["margin-bottom"]||F[0],C["margin-left"]=C["margin-left"]||F[0];break;case 2:C["margin-top"]=C["margin-top"]||F[0],C["margin-right"]=C["margin-right"]||F[1],C["margin-bottom"]=C["margin-bottom"]||F[0],C["margin-left"]=C["margin-left"]||F[1];break;case 3:C["margin-top"]=C["margin-top"]||F[0],C["margin-right"]=C["margin-right"]||F[1],C["margin-bottom"]=C["margin-bottom"]||F[2],C["margin-left"]=C["margin-left"]||F[1];break;case 4:C["margin-top"]=C["margin-top"]||F[0],C["margin-right"]=C["margin-right"]||F[1],C["margin-bottom"]=C["margin-bottom"]||F[2],C["margin-left"]=C["margin-left"]||F[3]}delete C.margin}return C},ro=(C,F)=>{const P=Wn(C);$t(P)?fetch(P).then(ue=>{ue.ok&&ue.json().then(F)}):Re(P)?P(F):F(P)},en=(C,F,P)=>{const ue=()=>{P.onload=P.onerror=null,C.selection&&(C.selection.select(P),C.nodeChanged())};P.onload=()=>{!F.width&&!F.height&&En(C)&&C.dom.setAttribs(P,{width:String(P.clientWidth),height:String(P.clientHeight)}),ue()},P.onerror=ue},an=C=>new Promise((F,P)=>{const ue=new FileReader;ue.onload=()=>{F(ue.result)},ue.onerror=()=>{var Ze;P((Ze=ue.error)===null||Ze===void 0?void 0:Ze.message)},ue.readAsDataURL(C)}),_n=C=>C.nodeName==="IMG"&&(C.hasAttribute("data-mce-object")||C.hasAttribute("data-mce-placeholder")),hn=(C,F)=>{const P=C.options.get;return Ln.isDomSafe(F,"img",{allow_html_data_urls:P("allow_html_data_urls"),allow_script_urls:P("allow_script_urls"),allow_svg_data_urls:P("allow_svg_data_urls")})},po=Ve.DOM,zs=C=>C.style.marginLeft&&C.style.marginRight&&C.style.marginLeft===C.style.marginRight?ko(C.style.marginLeft):"",ws=C=>C.style.marginTop&&C.style.marginBottom&&C.style.marginTop===C.style.marginBottom?ko(C.style.marginTop):"",hs=C=>C.style.borderWidth?ko(C.style.borderWidth):"",ns=(C,F)=>{var P;return C.hasAttribute(F)&&(P=C.getAttribute(F))!==null&&P!==void 0?P:""},Do=C=>C.parentNode!==null&&C.parentNode.nodeName==="FIGURE",Xe=(C,F,P)=>{P===""||P===null?C.removeAttribute(F):C.setAttribute(F,P)},Cn=C=>{const F=po.create("figure",{class:"image"});po.insertAfter(F,C),F.appendChild(C),F.appendChild(po.create("figcaption",{contentEditable:"true"},"Caption")),F.contentEditable="false"},Ko=C=>{const F=C.parentNode;rn(F)&&(po.insertAfter(C,F),po.remove(F))},Ds=C=>{Do(C)?Ko(C):Cn(C)},ps=(C,F)=>{const P=C.getAttribute("style"),ue=F(P!==null?P:"");ue.length>0?(C.setAttribute("style",ue),C.setAttribute("data-mce-style",ue)):C.removeAttribute("style")},is=(C,F)=>(P,ue,Ze)=>{const tn=P.style;tn[ue]?(tn[ue]=xn(Ze),ps(P,F)):Xe(P,ue,Ze)},co=(C,F)=>C.style[F]?ko(C.style[F]):ns(C,F),Zs=(C,F)=>{const P=xn(F);C.style.marginLeft=P,C.style.marginRight=P},Ss=(C,F)=>{const P=xn(F);C.style.marginTop=P,C.style.marginBottom=P},dc=(C,F)=>{const P=xn(F);C.style.borderWidth=P},$s=(C,F)=>{C.style.borderStyle=F},os=C=>{var F;return(F=C.style.borderStyle)!==null&&F!==void 0?F:""},xs=C=>rn(C)&&C.nodeName==="FIGURE",ar=C=>C.nodeName==="IMG",Ir=C=>po.getAttrib(C,"alt").length===0&&po.getAttrib(C,"role")==="presentation",No=C=>Ir(C)?"":ns(C,"alt"),fo=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),xo=(C,F)=>{var P;const ue=document.createElement("img");return Xe(ue,"style",F.style),(zs(ue)||F.hspace!=="")&&Zs(ue,F.hspace),(ws(ue)||F.vspace!=="")&&Ss(ue,F.vspace),(hs(ue)||F.border!=="")&&dc(ue,F.border),(os(ue)||F.borderStyle!=="")&&$s(ue,F.borderStyle),C((P=ue.getAttribute("style"))!==null&&P!==void 0?P:"")},Us=(C,F)=>{const P=document.createElement("img");if(pe(C,{...F,caption:!1},P),z(P,F.alt,F.isDecorative),F.caption){const ue=po.create("figure",{class:"image"});return ue.appendChild(P),ue.appendChild(po.create("figcaption",{contentEditable:"true"},"Caption")),ue.contentEditable="false",ue}else return P},Kr=(C,F)=>({src:ns(F,"src"),alt:No(F),title:ns(F,"title"),width:co(F,"width"),height:co(F,"height"),class:ns(F,"class"),style:C(ns(F,"style")),caption:Do(F),hspace:zs(F),vspace:ws(F),border:hs(F),borderStyle:os(F),isDecorative:Ir(F)}),Vo=(C,F,P,ue,Ze)=>{P[ue]!==F[ue]&&Ze(C,ue,String(P[ue]))},z=(C,F,P)=>{if(P){po.setAttrib(C,"role","presentation");const ue=Ae.fromDom(C);To(ue,"alt","")}else{if(pt(F)){const ue=Ae.fromDom(C);st(ue,"alt")}else{const ue=Ae.fromDom(C);To(ue,"alt",F)}po.getAttrib(C,"role")==="presentation"&&po.setAttrib(C,"role","")}},N=(C,F,P)=>{(P.alt!==F.alt||P.isDecorative!==F.isDecorative)&&z(C,P.alt,P.isDecorative)},de=(C,F)=>(P,ue,Ze)=>{C(P,Ze),ps(P,F)},pe=(C,F,P)=>{const ue=Kr(C,P);Vo(P,ue,F,"caption",(Ze,tn,Je)=>Ds(Ze)),Vo(P,ue,F,"src",Xe),Vo(P,ue,F,"title",Xe),Vo(P,ue,F,"width",is("width",C)),Vo(P,ue,F,"height",is("height",C)),Vo(P,ue,F,"class",Xe),Vo(P,ue,F,"style",de((Ze,tn)=>Xe(Ze,"style",tn),C)),Vo(P,ue,F,"hspace",de(Zs,C)),Vo(P,ue,F,"vspace",de(Ss,C)),Vo(P,ue,F,"border",de(dc,C)),Vo(P,ue,F,"borderStyle",de($s,C)),N(P,ue,F)},rt=(C,F)=>{const P=C.dom.styles.parse(F),ue=cn(P),Ze=C.dom.styles.parse(C.dom.styles.serialize(ue));return C.dom.styles.serialize(Ze)},ht=C=>{const F=C.selection.getNode(),P=C.dom.getParent(F,"figure.image");return P?C.dom.select("img",P)[0]:F&&(F.nodeName!=="IMG"||_n(F))?null:F},zt=(C,F)=>{var P;const ue=C.dom,Ze=on(C.schema.getTextBlockElements(),(Je,Co)=>!C.schema.isValidChild(Co,"figure")),tn=ue.getParent(F.parentNode,Je=>Y(Ze,Je.nodeName),C.getBody());return tn&&(P=ue.split(tn,F))!==null&&P!==void 0?P:F},ao=C=>{const F=ht(C);return F?Kr(P=>rt(C,P),F):fo()},q=(C,F)=>{const P=Us(Ze=>rt(C,Ze),F);C.dom.setAttrib(P,"data-mce-id","__mcenew"),C.focus(),C.selection.setContent(P.outerHTML);const ue=C.dom.select('*[data-mce-id="__mcenew"]')[0];if(C.dom.setAttrib(ue,"data-mce-id",null),xs(ue)){const Ze=zt(C,ue);C.selection.select(Ze)}else C.selection.select(ue)},It=(C,F)=>{C.dom.setAttrib(F,"src",F.getAttribute("src"))},V=(C,F)=>{if(F){const P=C.dom.is(F.parentNode,"figure.image")?F.parentNode:F;C.dom.remove(P),C.focus(),C.nodeChanged(),C.dom.isEmpty(C.getBody())&&(C.setContent(""),C.selection.setCursorLocation())}},j=(C,F)=>{const P=ht(C);if(P)if(pe(ue=>rt(C,ue),F,P),It(C,P),xs(P.parentNode)){const ue=P.parentNode;zt(C,ue),C.selection.select(P.parentNode)}else C.selection.select(P),en(C,F,P)},we=(C,F)=>{const P=F.src;return{...F,src:hn(C,P)?P:""}},Oe=(C,F)=>{const P=ht(C);if(P){const Ze={...Kr(Je=>rt(C,Je),P),...F},tn=we(C,Ze);Ze.src?j(C,tn):V(C,P)}else F.src&&q(C,{...fo(),...F})},nt=(C=>(...F)=>{if(F.length===0)throw new Error("Can't merge zero objects");const P={};for(let ue=0;ue<F.length;ue++){const Ze=F[ue];for(const tn in Ze)mt(Ze,tn)&&(P[tn]=C(P[tn],Ze[tn]))}return P})((C,F)=>Pn(C)&&Pn(F)?nt(C,F):F);var ot=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Ot=tinymce.util.Tools.resolve("tinymce.util.Tools");const Jt=C=>$t(C.value)?C.value:"",vn=C=>$t(C.text)?C.text:$t(C.title)?C.title:"",lo=(C,F)=>{const P=[];return Ot.each(C,ue=>{const Ze=vn(ue);if(ue.menu!==void 0){const tn=lo(ue.menu,F);P.push({text:Ze,items:tn})}else{const tn=F(ue);P.push({text:Ze,value:tn})}}),P},Cr=(C=Jt)=>F=>F?ze.from(F).map(P=>lo(P,C)):ze.none(),lr=C=>Cr(Jt)(C),Tr=C=>mt(C,"items"),qt=(C,F)=>Gt(C,P=>Tr(P)?qt(P.items,F):P.value===F?ze.some(P):ze.none()),In={sanitizer:Cr,sanitize:lr,findEntry:(C,F)=>C.bind(P=>qt(P,F))},us={makeTab:C=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},fs=C=>{const F=In.sanitizer(Oo=>C.convertURL(Oo.value||Oo.url||"","src")),P=new Promise(Oo=>{ro(C,Ic=>{Oo(F(Ic).map(Ro=>Te([[{text:"None",value:""}],Ro])))})}),ue=In.sanitize(ie(C)),Ze=Vs(C),tn=Q(C),Je=bt(C),Co=Mt(C),Er=ao(C),Fo=Me(C),ir=Pe(C),bo=En(C),ha=un(C),Yr=Fe(C),Nn=Ee(C),Qs=ze.some(ne(C)).filter(Oo=>$t(Oo)&&Oo.length>0);return P.then(Oo=>({image:Er,imageList:Oo,classList:ue,hasAdvTab:Ze,hasUploadTab:tn,hasUploadUrl:Je,hasUploadHandler:Co,hasDescription:Fo,hasImageTitle:ir,hasDimensions:bo,hasImageCaption:ha,prependURL:Qs,hasAccessibilityOptions:Yr,automaticUploads:Nn}))},uo=C=>{const F={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},P=C.imageList.map(ir=>({name:"images",type:"listbox",label:"Image list",items:ir})),ue={name:"alt",type:"input",label:"Alternative description",enabled:!(C.hasAccessibilityOptions&&C.image.isDecorative)},Ze={name:"title",type:"input",label:"Image title"},tn={name:"dimensions",type:"sizeinput"},Je={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Co=C.classList.map(ir=>({name:"classes",type:"listbox",label:"Class",items:ir})),Er={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Fo=ir=>ir?{type:"grid",columns:2}:{type:"panel"};return Te([[F],P.toArray(),C.hasAccessibilityOptions&&C.hasDescription?[Je]:[],C.hasDescription?[ue]:[],C.hasImageTitle?[Ze]:[],C.hasDimensions?[tn]:[],[{...Fo(C.classList.isSome()&&C.hasImageCaption),items:Te([Co.toArray(),C.hasImageCaption?[Er]:[]])}]])},Kc={makeTab:C=>({title:"General",name:"general",items:uo(C)}),makeItems:uo},bs={makeTab:C=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},js=C=>({prevImage:In.findEntry(C.imageList,C.image.src),prevAlt:C.image.alt,open:!0}),Qo=C=>({src:{value:C.src,meta:{}},images:C.src,alt:C.alt,title:C.title,dimensions:{width:C.width,height:C.height},classes:C.class,caption:C.caption,style:C.style,vspace:C.vspace,border:C.border,hspace:C.hspace,borderstyle:C.borderStyle,fileinput:[],isDecorative:C.isDecorative}),yr=(C,F)=>({src:C.src.value,alt:(C.alt===null||C.alt.length===0)&&F?null:C.alt,title:C.title,width:C.dimensions.width,height:C.dimensions.height,class:C.classes,style:C.style,caption:C.caption,hspace:C.hspace,vspace:C.vspace,border:C.border,borderStyle:C.borderstyle,isDecorative:C.isDecorative}),Hr=(C,F)=>/^(?:[a-zA-Z]+:)?\/\//.test(F)?ze.none():C.prependURL.bind(P=>F.substring(0,P.length)!==P?ze.some(P+F):ze.none()),Fs=(C,F)=>{const P=F.getData();Hr(C,P.src.value).each(ue=>{F.setData({src:{value:ue,meta:P.src.meta}})})},Pr=(C,F,P)=>{C.hasDescription&&$t(P.alt)&&(F.alt=P.alt),C.hasAccessibilityOptions&&(F.isDecorative=P.isDecorative||F.isDecorative||!1),C.hasImageTitle&&$t(P.title)&&(F.title=P.title),C.hasDimensions&&($t(P.width)&&(F.dimensions.width=P.width),$t(P.height)&&(F.dimensions.height=P.height)),$t(P.class)&&In.findEntry(C.classList,P.class).each(ue=>{F.classes=ue.value}),C.hasImageCaption&&Vt(P.caption)&&(F.caption=P.caption),C.hasAdvTab&&($t(P.style)&&(F.style=P.style),$t(P.vspace)&&(F.vspace=P.vspace),$t(P.border)&&(F.border=P.border),$t(P.hspace)&&(F.hspace=P.hspace),$t(P.borderstyle)&&(F.borderstyle=P.borderstyle))},Lr=(C,F)=>{const P=F.getData(),ue=P.src.meta;if(ue!==void 0){const Ze=nt({},P);Pr(C,Ze,ue),F.setData(Ze)}},Ba=(C,F,P,ue)=>{const Ze=ue.getData(),tn=Ze.src.value,Je=Ze.src.meta||{};!Je.width&&!Je.height&&F.hasDimensions&&(Wo(tn)?C.imageSize(tn).then(Co=>{P.open&&ue.setData({dimensions:Co})}).catch(Co=>console.error(Co)):ue.setData({dimensions:{width:"",height:""}}))},kr=(C,F,P)=>{const ue=P.getData(),Ze=In.findEntry(C.imageList,ue.src.value);F.prevImage=Ze,P.setData({images:Ze.map(tn=>tn.value).getOr("")})},Yc=(C,F,P,ue)=>{Fs(F,ue),Lr(F,ue),Ba(C,F,P,ue),kr(F,P,ue)},Js=(C,F,P,ue)=>{const Ze=ue.getData(),tn=In.findEntry(F.imageList,Ze.images);tn.each(Je=>{Ze.alt===""||P.prevImage.map(Er=>Er.text===Ze.alt).getOr(!1)?Je.value===""?ue.setData({src:Je,alt:P.prevAlt}):ue.setData({src:Je,alt:Je.text}):ue.setData({src:Je})}),P.prevImage=tn,Yc(C,F,P,ue)},mc=(C,F,P,ue)=>{const Ze=ue.getData();ue.block("Uploading image"),v(Ze.fileinput).fold(()=>{ue.unblock()},tn=>{const Je=URL.createObjectURL(tn),Co=()=>{ue.unblock(),URL.revokeObjectURL(Je)},Er=Fo=>{ue.setData({src:{value:Fo,meta:{}}}),ue.showTab("general"),Yc(C,F,P,ue)};an(tn).then(Fo=>{const ir=C.createBlobCache(tn,Je,Fo);F.automaticUploads?C.uploadImage(ir).then(bo=>{Er(bo.url),Co()}).catch(bo=>{Co(),C.alertErr(bo)}):(C.addToBlobCache(ir),Er(ir.blobUri()),ue.unblock())})})},Sc=(C,F,P)=>(ue,Ze)=>{Ze.name==="src"?Yc(C,F,P,ue):Ze.name==="images"?Js(C,F,P,ue):Ze.name==="alt"?P.prevAlt=ue.getData().alt:Ze.name==="fileinput"?mc(C,F,P,ue):Ze.name==="isDecorative"&&ue.setEnabled("alt",!ue.getData().isDecorative)},Xc=C=>()=>{C.open=!1},rl=C=>C.hasAdvTab||C.hasUploadUrl||C.hasUploadHandler?{type:"tabpanel",tabs:Te([[Kc.makeTab(C)],C.hasAdvTab?[us.makeTab(C)]:[],C.hasUploadTab&&(C.hasUploadUrl||C.hasUploadHandler)?[bs.makeTab(C)]:[]])}:{type:"panel",items:Kc.makeItems(C)},D=(C,F,P)=>ue=>{const Ze=nt(Qo(F.image),ue.getData()),tn={...Ze,style:xo(P.normalizeCss,yr(Ze,!1))};C.execCommand("mceUpdateImage",!1,yr(tn,F.hasAccessibilityOptions)),C.editorUpload.uploadImagesAuto(),ue.close()},U=C=>F=>hn(C,F)?Bn(C.documentBaseURI.toAbsolute(F)).then(P=>({width:String(P.width),height:String(P.height)})):Promise.resolve({width:"",height:""}),ee=C=>(F,P,ue)=>{var Ze;return C.editorUpload.blobCache.create({blob:F,blobUri:P,name:(Ze=F.name)===null||Ze===void 0?void 0:Ze.replace(/\.[^\.]+$/,""),filename:F.name,base64:ue.split(",")[1]})},le=C=>F=>{C.editorUpload.blobCache.add(F)},De=C=>F=>{C.windowManager.alert(F)},vt=C=>F=>rt(C,F),eo=C=>F=>C.dom.parseStyle(F),jo=C=>(F,P)=>C.dom.serializeStyle(F,P),Yn=C=>F=>ot(C).upload([F],!1).then(P=>{var ue;return P.length===0?Promise.reject("Failed to upload image"):P[0].status===!1?Promise.reject((ue=P[0].error)===null||ue===void 0?void 0:ue.message):P[0]}),Eo=C=>{const F={imageSize:U(C),addToBlobCache:le(C),createBlobCache:ee(C),alertErr:De(C),normalizeCss:vt(C),parseStyle:eo(C),serializeStyle:jo(C),uploadImage:Yn(C)};return{open:()=>{fs(C).then(ue=>{const Ze=js(ue);return{title:"Insert/Edit Image",size:"normal",body:rl(ue),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Qo(ue.image),onSubmit:D(C,ue,F),onChange:Sc(F,ue,Ze),onClose:Xc(Ze)}}).then(C.windowManager.open)}}},Xn=C=>{C.addCommand("mceImage",Eo(C).open),C.addCommand("mceUpdateImage",(F,P)=>{C.undoManager.transact(()=>Oe(C,P))})},Cs=C=>{const F=C.attr("class");return rn(F)&&/\bimage\b/.test(F)},Nr=C=>F=>{let P=F.length;const ue=Ze=>{Ze.attr("contenteditable",C?"true":null)};for(;P--;){const Ze=F[P];Cs(Ze)&&(Ze.attr("contenteditable",C?"false":null),Ot.each(Ze.getAll("figcaption"),ue))}},Bc=C=>{C.on("PreInit",()=>{C.parser.addNodeFilter("figure",Nr(!0)),C.serializer.addNodeFilter("figure",Nr(!1))})},Pt=C=>F=>{const P=()=>{F.setEnabled(C.selection.isEditable())};return C.on("NodeChange",P),P(),()=>{C.off("NodeChange",P)}},ga=C=>{C.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Eo(C).open,onSetup:F=>{F.setActive(rn(ht(C)));const P=C.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",F.setActive).unbind,ue=Pt(C)(F);return()=>{P(),ue()}}}),C.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Eo(C).open,onSetup:Pt(C)}),C.ui.registry.addContextMenu("image",{update:F=>C.selection.isEditable()&&(xs(F)||ar(F)&&!_n(F))?["image"]:[]})};var $o=()=>{Po.add("image",C=>{gn(C),Bc(C),ga(C),Xn(C)})};$o()})();const Sq=ma({__proto__:null,default:mM},[mM]);var gM={};(function(){var Po=tinymce.util.Tools.resolve("tinymce.PluginManager");const Lo=(ye,$t)=>{ye.focus(),ye.undoManager.transact(()=>{ye.setContent($t)}),ye.selection.setCursorLocation(),ye.nodeChanged()},So=ye=>ye.getContent({source_view:!0}),zn=ye=>{const $t=So(ye);ye.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:$t},onSubmit:An=>{Lo(ye,An.getData().code),An.close()}})},Rn=ye=>{ye.addCommand("mceCodeEditor",()=>{zn(ye)})},io=ye=>{const $t=()=>ye.execCommand("mceCodeEditor");ye.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:$t}),ye.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:$t})};var sn=()=>{Po.add("code",ye=>(Rn(ye),io(ye),{}))};sn()})();const xq=ma({__proto__:null,default:gM},[gM]);var hM={};(function(){var Po=tinymce.util.Tools.resolve("tinymce.PluginManager");const Lo=(Q,ne)=>Q.dispatch("insertCustomChar",{chr:ne}),So=(Q,ne)=>{const ie=Lo(Q,ne).chr;Q.execCommand("mceInsertContent",!1,ie)},zn=(Q,ne,ie)=>{var Me;return ie(Q,ne.prototype)?!0:((Me=Q.constructor)===null||Me===void 0?void 0:Me.name)===ne.name},Rn=Q=>{const ne=typeof Q;return Q===null?"null":ne==="object"&&Array.isArray(Q)?"array":ne==="object"&&zn(Q,String,(ie,Me)=>Me.isPrototypeOf(ie))?"string":ne},io=Q=>ne=>Rn(ne)===Q,sn=Q=>ne=>typeof ne===Q,ye=Q=>ne=>Q===ne,$t=io("array"),An=ye(null),Pn=ye(void 0),Zn=Q=>Q==null,pt=Q=>!Zn(Q),Vt=sn("function"),rn=(Q=>()=>Q)(!1);class Re{constructor(ne,ie){this.tag=ne,this.value=ie}static some(ne){return new Re(!0,ne)}static none(){return Re.singletonNone}fold(ne,ie){return this.tag?ie(this.value):ne()}isSome(){return this.tag}isNone(){return!this.tag}map(ne){return this.tag?Re.some(ne(this.value)):Re.none()}bind(ne){return this.tag?ne(this.value):Re.none()}exists(ne){return this.tag&&ne(this.value)}forall(ne){return!this.tag||ne(this.value)}filter(ne){return!this.tag||ne(this.value)?this:Re.none()}getOr(ne){return this.tag?this.value:ne}or(ne){return this.tag?this:ne}getOrThunk(ne){return this.tag?this.value:ne()}orThunk(ne){return this.tag?this:ne()}getOrDie(ne){if(this.tag)return this.value;throw new Error(ne??"Called getOrDie on None")}static from(ne){return pt(ne)?Re.some(ne):Re.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ne){this.tag&&ne(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Re.singletonNone=new Re(!1);const jt=Array.prototype.push,tt=(Q,ne)=>{const ie=Q.length,Me=new Array(ie);for(let Pe=0;Pe<ie;Pe++){const un=Q[Pe];Me[Pe]=ne(un,Pe)}return Me},se=(Q,ne)=>{for(let ie=0,Me=Q.length;ie<Me;ie++){const Pe=Q[ie];ne(Pe,ie)}},ze=(Q,ne,ie)=>{for(let Me=0,Pe=Q.length;Me<Pe;Me++){const un=Q[Me];if(ne(un,Me))return Re.some(un);if(ie(un,Me))break}return Re.none()},mo=(Q,ne)=>ze(Q,ne,rn),Ke=Q=>{const ne=[];for(let ie=0,Me=Q.length;ie<Me;++ie){if(!$t(Q[ie]))throw new Error("Arr.flatten item "+ie+" was not an array, input: "+Q);jt.apply(ne,Q[ie])}return ne},$=(Q,ne)=>Ke(tt(Q,ne));var We=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ft=Q=>ne=>ne.options.get(Q),on=Q=>{const ne=Q.options.register,ie=Me=>Vt(Me)||$t(Me);ne("charmap",{processor:ie}),ne("charmap_append",{processor:ie})},mt=Ft("charmap"),Y=Ft("charmap_append"),Jn=We.isArray,Te="User Defined",gt=()=>[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}],v=Q=>We.grep(Q,ne=>Jn(ne)&&ne.length===2),Gt=Q=>Jn(Q)?v(Q):typeof Q=="function"?Q():[],Un=(Q,ne)=>{const ie=mt(Q);ie&&(ne=[{name:Te,characters:Gt(ie)}]);const Me=Y(Q);if(Me){const Pe=We.grep(ne,un=>un.name===Te);return Pe.length?(Pe[0].characters=[...Pe[0].characters,...Gt(Me)],ne):ne.concat({name:Te,characters:Gt(Me)})}return ne},To=Q=>{const ne=Un(Q,gt());return ne.length>1?[{name:"All",characters:$(ne,ie=>ie.characters)}].concat(ne):ne},st=Q=>({getCharMap:()=>To(Q),insertChar:Me=>{So(Q,Me)}}),kt=Q=>{let ne=Q;return{get:()=>ne,set:Pe=>{ne=Pe}}},Sn=(Q,ne)=>{let ie=null;const Me=()=>{An(ie)||(clearTimeout(ie),ie=null)};return{cancel:Me,throttle:(...un)=>{Me(),ie=setTimeout(()=>{ie=null,Q.apply(null,un)},ne)}}},Kn=(Q,ne,ie=0,Me)=>{const Pe=Q.indexOf(ne,ie);return Pe!==-1?Pn(Me)?!0:Pe+ne.length<=Me:!1},Yt=String.fromCodePoint,Mo=(Q,ne,ie)=>Kn(Yt(Q).toLowerCase(),ie)?!0:Kn(ne.toLowerCase(),ie)||Kn(ne.toLowerCase().replace(/\s+/g,""),ie),Ae=(Q,ne)=>{const ie=[],Me=ne.toLowerCase();return se(Q.characters,Pe=>{Mo(Pe[0],Pe[1],Me)&&ie.push(Pe)}),tt(ie,Pe=>({text:Pe[1],value:Yt(Pe[0]),icon:Yt(Pe[0])}))},Ve="pattern",Ln=(Q,ne)=>{const ie=()=>[{label:"Search",type:"input",name:Ve},{type:"collection",name:"results"}],Me=()=>tt(ne,xn=>({title:xn.name,name:xn.name,items:ie()})),Pe=()=>({type:"panel",items:ie()}),un=()=>({type:"tabpanel",tabs:Me()}),Wn=ne.length===1?kt(Te):kt("All"),Fe=(xn,cn)=>{mo(ne,ro=>ro.name===Wn.get()).each(ro=>{const en=Ae(ro,cn);xn.setData({results:en})})},bt=Sn(xn=>{const cn=xn.getData().pattern;Fe(xn,cn)},40),Mt=ne.length===1?Pe():un(),Bt={pattern:"",results:Ae(ne[0],"")},Bn={title:"Special Character",size:"normal",body:Mt,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:Bt,onAction:(xn,cn)=>{cn.name==="results"&&(So(Q,cn.value),xn.close())},onTabChange:(xn,cn)=>{Wn.set(cn.newTabName),bt.throttle(xn)},onChange:(xn,cn)=>{cn.name===Ve&&bt.throttle(xn)}};Q.windowManager.open(Bn).focus(Ve)},Wo=(Q,ne)=>{Q.addCommand("mceShowCharmap",()=>{Ln(Q,ne)})},Xt=(Q,ne)=>{Q.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(ie,Me)=>new Promise((Pe,un)=>{Pe(Ae(ne,ie))}),onAction:(ie,Me,Pe)=>{Q.selection.setRng(Me),Q.insertContent(Pe),ie.hide()}})},gn=Q=>ne=>{const ie=()=>{ne.setEnabled(Q.selection.isEditable())};return Q.on("NodeChange",ie),ie(),()=>{Q.off("NodeChange",ie)}},En=Q=>{const ne=()=>Q.execCommand("mceShowCharmap");Q.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:ne,onSetup:gn(Q)}),Q.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:ne,onSetup:gn(Q)})};var Vs=()=>{Po.add("charmap",Q=>{on(Q);const ne=To(Q);return Wo(Q,ne),En(Q),Xt(Q,ne[0]),st(Q)})};Vs()})();const Cq=ma({__proto__:null,default:hM},[hM]);var pM={};(function(){var Po=tinymce.util.Tools.resolve("tinymce.PluginManager"),Lo=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),So=tinymce.util.Tools.resolve("tinymce.util.Tools");const zn=Te=>gt=>gt.options.get(Te),Rn=Te=>{const gt=Te.options.register;gt("allow_html_in_named_anchor",{processor:"boolean",default:!1})},io=zn("allow_html_in_named_anchor"),sn="a:not([href])",ye=Te=>!Te,$t=Te=>Te.getAttribute("id")||Te.getAttribute("name")||"",An=Te=>Te.nodeName.toLowerCase()==="a",Pn=Te=>An(Te)&&!Te.getAttribute("href")&&$t(Te)!=="",Zn=Te=>Pn(Te)&&!Te.firstChild,pt=Te=>{const gt=Te.dom;Lo(gt).walk(Te.selection.getRng(),v=>{So.each(v,Gt=>{Zn(Gt)&&gt.remove(Gt,!1)})})},Vt=Te=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(Te),yn=Te=>Te.dom.getParent(Te.selection.getStart(),sn),rn=Te=>{const gt=yn(Te);return gt?$t(gt):""},Re=(Te,gt)=>{Te.undoManager.transact(()=>{io(Te)||Te.selection.collapse(!0),Te.selection.isCollapsed()?Te.insertContent(Te.dom.createHTML("a",{id:gt})):(pt(Te),Te.formatter.remove("namedAnchor",void 0,void 0,!0),Te.formatter.apply("namedAnchor",{value:gt}),Te.addVisual())})},jt=(Te,gt,v)=>{v.removeAttribute("name"),v.id=gt,Te.addVisual(),Te.undoManager.add()},tt=(Te,gt)=>{const v=yn(Te);v?jt(Te,gt,v):Re(Te,gt),Te.focus()},se=(Te,gt)=>Vt(gt)?(tt(Te,gt),!0):(Te.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),ze=Te=>{const gt=rn(Te);Te.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:gt},onSubmit:v=>{se(Te,v.getData().id)&&v.close()}})},mo=Te=>{Te.addCommand("mceAnchor",()=>{ze(Te)})},Ke=Te=>ye(Te.attr("href"))&&!ye(Te.attr("id")||Te.attr("name")),$=Te=>Ke(Te)&&!Te.firstChild,We=Te=>gt=>{for(let v=0;v<gt.length;v++){const Gt=gt[v];$(Gt)&&Gt.attr("contenteditable",Te)}},Ft=Te=>{Te.on("PreInit",()=>{Te.parser.addNodeFilter("a",We("false")),Te.serializer.addNodeFilter("a",We(null))})},on=Te=>{Te.formatter.register("namedAnchor",{inline:"a",selector:sn,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(gt,v,Gt)=>Pn(gt)})},mt=Te=>gt=>{const v=()=>{gt.setEnabled(Te.selection.isEditable())};return Te.on("NodeChange",v),v(),()=>{Te.off("NodeChange",v)}},Y=Te=>{const gt=()=>Te.execCommand("mceAnchor");Te.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:gt,onSetup:v=>{const Gt=Te.selection.selectorChangedWithUnbind("a:not([href])",v.setActive).unbind,Un=mt(Te)(v);return()=>{Gt(),Un()}}}),Te.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:gt,onSetup:mt(Te)})};var Jn=()=>{Po.add("anchor",Te=>{Rn(Te),Ft(Te),mo(Te),Y(Te),Te.on("PreInit",()=>{on(Te)})})};Jn()})();const Tq=ma({__proto__:null,default:pM},[pM]);var fM={};(function(){const Po=V=>{let j=V;return{get:()=>j,set:je=>{j=je}}};var Lo=tinymce.util.Tools.resolve("tinymce.PluginManager");const So=(V,j,we)=>{var Oe;return we(V,j.prototype)?!0:((Oe=V.constructor)===null||Oe===void 0?void 0:Oe.name)===j.name},zn=V=>{const j=typeof V;return V===null?"null":j==="object"&&Array.isArray(V)?"array":j==="object"&&So(V,String,(we,Oe)=>Oe.isPrototypeOf(we))?"string":j},Rn=V=>j=>zn(j)===V,io=V=>j=>typeof j===V,sn=Rn("string"),ye=Rn("array"),$t=io("boolean"),An=V=>V==null,Pn=V=>!An(V),Zn=io("number"),pt=()=>{},Vt=V=>()=>V,yn=Vt(!0),Re=Vt("[~|!-*+-\\/:;?@\\[-`{};----------------------------------------------]");class jt{constructor(j,we){this.tag=j,this.value=we}static some(j){return new jt(!0,j)}static none(){return jt.singletonNone}fold(j,we){return this.tag?we(this.value):j()}isSome(){return this.tag}isNone(){return!this.tag}map(j){return this.tag?jt.some(j(this.value)):jt.none()}bind(j){return this.tag?j(this.value):jt.none()}exists(j){return this.tag&&j(this.value)}forall(j){return!this.tag||j(this.value)}filter(j){return!this.tag||j(this.value)?this:jt.none()}getOr(j){return this.tag?this.value:j}or(j){return this.tag?this:j}getOrThunk(j){return this.tag?this.value:j()}orThunk(j){return this.tag?this:j()}getOrDie(j){if(this.tag)return this.value;throw new Error(j??"Called getOrDie on None")}static from(j){return Pn(j)?jt.some(j):jt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(j){this.tag&&j(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}jt.singletonNone=new jt(!1);const tt=Re;var se=tinymce.util.Tools.resolve("tinymce.Env"),ze=tinymce.util.Tools.resolve("tinymce.util.Tools");const mo=Array.prototype.slice,Ke=Array.prototype.push,$=(V,j)=>{const we=V.length,Oe=new Array(we);for(let je=0;je<we;je++){const it=V[je];Oe[je]=j(it,je)}return Oe},We=(V,j)=>{for(let we=0,Oe=V.length;we<Oe;we++){const je=V[we];j(je,we)}},Ft=(V,j)=>{for(let we=V.length-1;we>=0;we--){const Oe=V[we];j(Oe,we)}},on=(V,j)=>{if(V.length===0)return[];{let we=j(V[0]);const Oe=[];let je=[];for(let it=0,nt=V.length;it<nt;it++){const ot=V[it],Ot=j(ot);Ot!==we&&(Oe.push(je),je=[]),we=Ot,je.push(ot)}return je.length!==0&&Oe.push(je),Oe}},mt=(V,j,we)=>(We(V,(Oe,je)=>{we=j(we,Oe,je)}),we),Y=V=>{const j=[];for(let we=0,Oe=V.length;we<Oe;++we){if(!ye(V[we]))throw new Error("Arr.flatten item "+we+" was not an array, input: "+V);Ke.apply(j,V[we])}return j},Jn=(V,j)=>Y($(V,j)),Te=(V,j)=>{const we=mo.call(V,0);return we.sort(j),we},gt=Object.hasOwnProperty,v=(V,j)=>gt.call(V,j);typeof window<"u"||Function("return this;")();const Gt=9,Un=11,To=1,st=3,kt=V=>V.dom.nodeType,Kn=(V=>j=>kt(j)===V)(st),Yt=(V,j,we)=>{if(sn(we)||$t(we)||Zn(we))V.setAttribute(j,we+"");else throw console.error("Invalid call to Attribute.set. Key ",j,":: Value ",we,":: Element ",V),new Error("Attribute value was not simple")},Mo=(V,j,we)=>{Yt(V.dom,j,we)},Ae=(V,j)=>{const Oe=(j||document).createElement("div");if(Oe.innerHTML=V,!Oe.hasChildNodes()||Oe.childNodes.length>1){const je="HTML does not have a single root node";throw console.error(je,V),new Error(je)}return Wo(Oe.childNodes[0])},Ve=(V,j)=>{const Oe=(j||document).createElement(V);return Wo(Oe)},Ln=(V,j)=>{const Oe=(j||document).createTextNode(V);return Wo(Oe)},Wo=V=>{if(V==null)throw new Error("Node cannot be null or undefined");return{dom:V}},gn={fromHtml:Ae,fromTag:Ve,fromText:Ln,fromDom:Wo,fromPoint:(V,j,we)=>jt.from(V.dom.elementFromPoint(j,we)).map(Wo)},En=V=>V.nodeType!==To&&V.nodeType!==Gt&&V.nodeType!==Un||V.childElementCount===0,Vs=(V,j)=>{const we=j===void 0?document:j.dom;return En(we)?[]:$(we.querySelectorAll(V),gn.fromDom)},Q=V=>jt.from(V.dom.parentNode).map(gn.fromDom),ne=V=>$(V.dom.childNodes,gn.fromDom),ie=(V,j)=>({element:V,offset:j}),Me=(V,j)=>{const we=ne(V);return we.length>0&&j<we.length?ie(we[j],0):ie(V,j)},Pe=(V,j)=>{Q(V).each(Oe=>{Oe.dom.insertBefore(j.dom,V.dom)})},un=(V,j)=>{V.dom.appendChild(j.dom)},Wn=(V,j)=>{Pe(V,j),un(j,V)},Ee=((V,j)=>{const we=it=>{if(!V(it))throw new Error("Can only get "+j+" value of a "+j+" node");return Oe(it).getOr("")},Oe=it=>V(it)?jt.from(it.dom.nodeValue):jt.none();return{get:we,getOption:Oe,set:(it,nt)=>{if(!V(it))throw new Error("Can only set raw "+j+" value of a "+j+" node");it.dom.nodeValue=nt}}})(Kn,"text"),bt=V=>Ee.get(V),Mt=(V,j,we)=>(V.compareDocumentPosition(j)&we)!==0,Bt=(V,j)=>Mt(V,j,Node.DOCUMENT_POSITION_PRECEDING),Bn=(V,j)=>Vs(j,V);var ko=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const xn=(V,j)=>V.isBlock(j)||v(V.schema.getVoidElements(),j.nodeName),cn=(V,j)=>!V.isEditable(j),ro=(V,j)=>V.getContentEditable(j)==="true"&&j.parentNode&&!V.isEditable(j.parentNode),en=(V,j)=>!V.isBlock(j)&&v(V.schema.getWhitespaceElements(),j.nodeName),an=(V,j)=>xn(V,j)||cn(V,j)||en(V,j)||ro(V,j),_n=V=>V.nodeType===3,hn=()=>({sOffset:0,fOffset:0,elements:[]}),po=(V,j)=>Me(gn.fromDom(V),j),zs=(V,j,we,Oe,je,it=!0)=>{let nt=it?j(!1):we;for(;nt;){const ot=cn(V,nt);if(ot||en(V,nt)){if(ot?Oe.cef(nt):Oe.boundary(nt))break;nt=j(!0);continue}else if(xn(V,nt)){if(Oe.boundary(nt))break}else _n(nt)&&Oe.text(nt);if(nt===je)break;nt=j(!1)}},ws=(V,j,we,Oe,je)=>{var it;if(an(V,we))return;const nt=(it=V.getParent(Oe,V.isBlock))!==null&&it!==void 0?it:V.getRoot(),ot=new ko(we,nt),Ot=je?ot.next.bind(ot):ot.prev.bind(ot);zs(V,Ot,we,{boundary:yn,cef:yn,text:Jt=>{je?j.fOffset+=Jt.length:j.sOffset+=Jt.length,j.elements.push(gn.fromDom(Jt))}})},hs=(V,j,we,Oe,je,it=!0)=>{const nt=new ko(we,j),ot=[];let Ot=hn();ws(V,Ot,we,j,!1);const Jt=()=>(Ot.elements.length>0&&(ot.push(Ot),Ot=hn()),!1);return zs(V,nt.next.bind(nt),we,{boundary:Jt,cef:vn=>(Jt(),je&&ot.push(...je.cef(vn)),!1),text:vn=>{Ot.elements.push(gn.fromDom(vn)),je&&je.text(vn,Ot)}},Oe,it),Oe&&ws(V,Ot,Oe,j,!0),Jt(),ot},ns=(V,j)=>{const we=po(j.startContainer,j.startOffset),Oe=we.element.dom,je=po(j.endContainer,j.endOffset),it=je.element.dom;return hs(V,j.commonAncestorContainer,Oe,it,{text:(nt,ot)=>{nt===it?ot.fOffset+=nt.length-je.offset:nt===Oe&&(ot.sOffset+=we.offset)},cef:nt=>{const ot=Jn(Bn(gn.fromDom(nt),"*[contenteditable=true]"),Ot=>{const Jt=Ot.dom;return hs(V,Jt,Jt)});return Te(ot,(Ot,Jt)=>Bt(Ot.elements[0].dom,Jt.elements[0].dom)?1:-1)}},!1)},Do=(V,j)=>j.collapsed?[]:ns(V,j),Xe=(V,j)=>{const we=V.createRng();return we.selectNode(j),Do(V,we)},Cn=(V,j)=>Jn(j,we=>Xe(V,we)),Ko=(V,j,we=0,Oe=V.length)=>{const je=j.regex;je.lastIndex=we;const it=[];let nt;for(;nt=je.exec(V);){const ot=nt[j.matchIndex],Ot=nt.index+nt[0].indexOf(ot),Jt=Ot+ot.length;if(Jt>Oe)break;it.push({start:Ot,finish:Jt}),je.lastIndex=Jt}return it},Ds=(V,j)=>{const we=mt(V,(Oe,je)=>{const it=bt(je),nt=Oe.last,ot=nt+it.length,Ot=Jn(j,(Jt,vn)=>Jt.start<ot&&Jt.finish>nt?[{element:je,start:Math.max(nt,Jt.start)-nt,finish:Math.min(ot,Jt.finish)-nt,matchId:vn}]:[]);return{results:Oe.results.concat(Ot),last:ot}},{results:[],last:0}).results;return on(we,Oe=>Oe.matchId)},ps=(V,j)=>Jn(j,we=>{const Oe=we.elements,je=$(Oe,bt).join(""),it=Ko(je,V,we.sOffset,je.length-we.fOffset);return Ds(Oe,it)}),is=(V,j)=>{Ft(V,(we,Oe)=>{Ft(we,je=>{const it=gn.fromDom(j.cloneNode(!1));Mo(it,"data-mce-index",Oe);const nt=je.element.dom;if(nt.length===je.finish&&je.start===0)Wn(je.element,it);else{nt.length!==je.finish&&nt.splitText(je.finish);const ot=nt.splitText(je.start);Wn(gn.fromDom(ot),it)}})})},co=(V,j,we,Oe)=>{const je=Xe(V,we),it=ps(j,je);return is(it,Oe),it.length},Zs=(V,j,we,Oe)=>{const je=we.getBookmark(),it=V.select("td[data-mce-selected],th[data-mce-selected]"),nt=it.length>0?Cn(V,it):Do(V,we.getRng()),ot=ps(j,nt);return is(ot,Oe),we.moveToBookmark(je),ot.length},Ss=V=>V.getAttribute("data-mce-index"),dc=(V,j,we,Oe)=>{const je=V.dom.create("span",{"data-mce-bogus":1});je.className="mce-match-marker";const it=V.getBody();return Vo(V,j,!1),Oe?Zs(V.dom,we,V.selection,je):co(V.dom,we,it,je)},$s=V=>{var j;const we=V.parentNode;V.firstChild&&we.insertBefore(V.firstChild,V),(j=V.parentNode)===null||j===void 0||j.removeChild(V)},os=(V,j)=>{const we=[],Oe=ze.toArray(V.getBody().getElementsByTagName("span"));if(Oe.length)for(let je=0;je<Oe.length;je++){const it=Ss(Oe[je]);it===null||!it.length||it===j.toString()&&we.push(Oe[je])}return we},xs=(V,j,we)=>{const Oe=j.get();let je=Oe.index;const it=V.dom;we?je+1===Oe.count?je=0:je++:je-1===-1?je=Oe.count-1:je--,it.removeClass(os(V,Oe.index),"mce-match-marker-selected");const nt=os(V,je);return nt.length?(it.addClass(os(V,je),"mce-match-marker-selected"),V.selection.scrollIntoView(nt[0]),je):-1},ar=(V,j)=>{const we=j.parentNode;V.remove(j),we&&V.isEmpty(we)&&V.remove(we)},Ir=(V,j)=>{const Oe="("+V.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return j?`(?:^|\\s|${tt()})`+Oe+`(?=$|\\s|${tt()})`:Oe},No=(V,j,we,Oe,je,it)=>{const nt=V.selection,ot=Ir(we,je),Ot=nt.isForward(),Jt={regex:new RegExp(ot,Oe?"g":"gi"),matchIndex:1},vn=dc(V,j,Jt,it);if(se.browser.isSafari()&&nt.setRng(nt.getRng(),Ot),vn){const lo=xs(V,j,!0);j.set({index:lo,count:vn,text:we,matchCase:Oe,wholeWord:je,inSelection:it})}return vn},fo=(V,j)=>{const we=xs(V,j,!0);j.set({...j.get(),index:we})},xo=(V,j)=>{const we=xs(V,j,!1);j.set({...j.get(),index:we})},Us=V=>{const j=Ss(V);return j!==null&&j.length>0},Kr=(V,j,we,Oe,je)=>{const it=j.get(),nt=it.index;let ot,Ot=nt;Oe=Oe!==!1;const Jt=V.getBody(),vn=ze.grep(ze.toArray(Jt.getElementsByTagName("span")),Us);for(let lo=0;lo<vn.length;lo++){const Cr=Ss(vn[lo]);let lr=ot=parseInt(Cr,10);if(je||lr===it.index){for(we.length?(vn[lo].innerText=we,$s(vn[lo])):ar(V.dom,vn[lo]);vn[++lo];)if(lr=parseInt(Ss(vn[lo]),10),lr===ot)ar(V.dom,vn[lo]);else{lo--;break}Oe&&Ot--}else ot>nt&&vn[lo].setAttribute("data-mce-index",String(ot-1))}return j.set({...it,count:je?0:it.count-1,index:Ot}),Oe?fo(V,j):xo(V,j),!je&&j.get().count>0},Vo=(V,j,we)=>{let Oe,je;const it=j.get(),nt=ze.toArray(V.getBody().getElementsByTagName("span"));for(let ot=0;ot<nt.length;ot++){const Ot=Ss(nt[ot]);Ot!==null&&Ot.length&&(Ot===it.index.toString()&&(Oe||(Oe=nt[ot].firstChild),je=nt[ot].firstChild),$s(nt[ot]))}if(j.set({...it,index:-1,count:0,text:""}),Oe&&je){const ot=V.dom.createRng();return ot.setStart(Oe,0),ot.setEnd(je,je.data.length),we!==!1&&V.selection.setRng(ot),ot}else return},z=(V,j)=>j.get().count>1,N=(V,j)=>j.get().count>1,de=(V,j)=>({done:ot=>Vo(V,j,ot),find:(ot,Ot,Jt,vn=!1)=>No(V,j,ot,Ot,Jt,vn),next:()=>fo(V,j),prev:()=>xo(V,j),replace:(ot,Ot,Jt)=>Kr(V,j,ot,Ot,Jt)}),pe=V=>{const j=Po(jt.none()),we=()=>j.get().each(V);return{clear:()=>{we(),j.set(jt.none())},isSet:()=>j.get().isSome(),get:()=>j.get(),set:ot=>{we(),j.set(jt.some(ot))}}},rt=()=>{const V=pe(pt);return{...V,on:we=>V.get().each(we)}},ht=(V,j)=>{const we=rt();V.undoManager.add();const Oe=ze.trim(V.selection.getContent({format:"text"})),je=qt=>{qt.setEnabled("next",z(V,j)),qt.setEnabled("prev",N(V,j))},it=qt=>{const pn=qt.getData(),In=j.get();j.set({...In,matchCase:pn.matchcase,wholeWord:pn.wholewords,inSelection:pn.inselection})},nt=(qt,pn)=>{We(["replace","replaceall","prev","next"],us=>qt.setEnabled(us,!pn))},ot=(qt,pn)=>{pn.redial(Tr(qt,pn.getData()))},Ot=(qt,pn)=>{se.browser.isSafari()&&se.deviceType.isTouch()&&(pn==="find"||pn==="replace"||pn==="replaceall")&&qt.focus(pn)},Jt=qt=>{Vo(V,j,!1),nt(qt,!0),je(qt)},vn=qt=>{const pn=qt.getData(),In=j.get();if(!pn.findtext.length){Jt(qt);return}if(In.text===pn.findtext&&In.matchCase===pn.matchcase&&In.wholeWord===pn.wholewords)fo(V,j);else{const Xs=No(V,j,pn.findtext,pn.matchcase,pn.wholewords,pn.inselection);Xs<=0&&ot(!0,qt),nt(qt,Xs===0)}je(qt)},lo=j.get(),Cr={findtext:Oe,replacetext:"",wholewords:lo.wholeWord,matchcase:lo.matchCase,inselection:lo.inSelection},lr=qt=>{const pn=[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}];return qt&&pn.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),pn},Tr=(qt,pn)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:lr(qt)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:pn,onChange:(In,Xs)=>{qt&&ot(!1,In),Xs.name==="findtext"&&j.get().count>0&&Jt(In)},onAction:(In,Xs)=>{const us=In.getData();switch(Xs.name){case"find":vn(In);break;case"replace":Kr(V,j,us.replacetext)?je(In):Jt(In);break;case"replaceall":Kr(V,j,us.replacetext,!0,!0),Jt(In);break;case"prev":xo(V,j),je(In);break;case"next":fo(V,j),je(In);break;case"matchcase":case"wholewords":case"inselection":ot(!1,In),it(In),Jt(In);break}Ot(In,Xs.name)},onSubmit:In=>{vn(In),Ot(In,"find")},onClose:()=>{V.focus(),Vo(V,j),V.undoManager.add()}});we.set(V.windowManager.open(Tr(!1,Cr),{inline:"toolbar"}))},zt=(V,j)=>{V.addCommand("SearchReplace",()=>{ht(V,j)})},ao=(V,j)=>()=>{ht(V,j)},q=(V,j)=>{V.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:ao(V,j),icon:"search"}),V.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:ao(V,j),icon:"search"}),V.shortcuts.add("Meta+F","",ao(V,j))};var It=()=>{Lo.add("searchreplace",V=>{const j=Po({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return zt(V,j),q(V,j),de(V,j)})};It()})();const kq=ma({__proto__:null,default:fM},[fM]);var bM={};(function(){const Po=pt=>{let Vt=pt;return{get:()=>Vt,set:Re=>{Vt=Re}}};var Lo=tinymce.util.Tools.resolve("tinymce.PluginManager");const So=(pt,Vt)=>{pt.dispatch("VisualBlocks",{state:Vt})},zn=(pt,Vt,yn)=>{pt.dom.toggleClass(pt.getBody(),"mce-visualblocks"),yn.set(!yn.get()),So(pt,yn.get())},Rn=(pt,Vt,yn)=>{pt.addCommand("mceVisualBlocks",()=>{zn(pt,Vt,yn)})},io=pt=>Vt=>Vt.options.get(pt),sn=pt=>{const Vt=pt.options.register;Vt("visualblocks_default_state",{processor:"boolean",default:!1})},ye=io("visualblocks_default_state"),$t=(pt,Vt,yn)=>{pt.on("PreviewFormats AfterPreviewFormats",rn=>{yn.get()&&pt.dom.toggleClass(pt.getBody(),"mce-visualblocks",rn.type==="afterpreviewformats")}),pt.on("init",()=>{ye(pt)&&zn(pt,Vt,yn)})},An=(pt,Vt)=>yn=>{yn.setActive(Vt.get());const rn=Re=>yn.setActive(Re.state);return pt.on("VisualBlocks",rn),()=>pt.off("VisualBlocks",rn)},Pn=(pt,Vt)=>{const yn=()=>pt.execCommand("mceVisualBlocks");pt.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:yn,onSetup:An(pt,Vt)}),pt.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:yn,onSetup:An(pt,Vt)})};var Zn=()=>{Lo.add("visualblocks",(pt,Vt)=>{sn(pt);const yn=Po(!1);Rn(pt,Vt,yn),Pn(pt,yn),$t(pt,Vt,yn)})};Zn()})();const Eq=ma({__proto__:null,default:bM},[bM]);var vM={};(function(){const Po=M=>{let H=M;return{get:()=>H,set:ut=>{H=ut}}};var Lo=tinymce.util.Tools.resolve("tinymce.PluginManager");const So=M=>({isFullscreen:()=>M.get()!==null}),zn=(M,H,ae)=>{var ge;return ae(M,H.prototype)?!0:((ge=M.constructor)===null||ge===void 0?void 0:ge.name)===H.name},Rn=M=>{const H=typeof M;return M===null?"null":H==="object"&&Array.isArray(M)?"array":H==="object"&&zn(M,String,(ae,ge)=>ge.isPrototypeOf(ae))?"string":H},io=M=>H=>Rn(H)===M,sn=M=>H=>typeof H===M,ye=M=>H=>M===H,$t=io("string"),An=io("object"),Pn=io("array"),Zn=ye(null),pt=sn("boolean"),Vt=ye(void 0),yn=M=>M==null,rn=M=>!yn(M),Re=sn("function"),jt=sn("number"),tt=()=>{},se=(M,H)=>(...ae)=>M(H.apply(null,ae)),ze=(M,H)=>ae=>M(H(ae)),mo=M=>()=>M;function Ke(M,...H){return(...ae)=>{const ge=H.concat(ae);return M.apply(null,ge)}}const $=mo(!1),We=mo(!0);class Ft{constructor(H,ae){this.tag=H,this.value=ae}static some(H){return new Ft(!0,H)}static none(){return Ft.singletonNone}fold(H,ae){return this.tag?ae(this.value):H()}isSome(){return this.tag}isNone(){return!this.tag}map(H){return this.tag?Ft.some(H(this.value)):Ft.none()}bind(H){return this.tag?H(this.value):Ft.none()}exists(H){return this.tag&&H(this.value)}forall(H){return!this.tag||H(this.value)}filter(H){return!this.tag||H(this.value)?this:Ft.none()}getOr(H){return this.tag?this.value:H}or(H){return this.tag?this:H}getOrThunk(H){return this.tag?this.value:H()}orThunk(H){return this.tag?this:H()}getOrDie(H){if(this.tag)return this.value;throw new Error(H??"Called getOrDie on None")}static from(H){return rn(H)?Ft.some(H):Ft.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(H){this.tag&&H(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ft.singletonNone=new Ft(!1);const on=Array.prototype.push,mt=(M,H)=>{const ae=M.length,ge=new Array(ae);for(let ut=0;ut<ae;ut++){const dn=M[ut];ge[ut]=H(dn,ut)}return ge},Y=(M,H)=>{for(let ae=0,ge=M.length;ae<ge;ae++){const ut=M[ae];H(ut,ae)}},Jn=(M,H)=>{const ae=[];for(let ge=0,ut=M.length;ge<ut;ge++){const dn=M[ge];H(dn,ge)&&ae.push(dn)}return ae},Te=(M,H,ae)=>{for(let ge=0,ut=M.length;ge<ut;ge++){const dn=M[ge];if(H(dn,ge))return Ft.some(dn);if(ae(dn,ge))break}return Ft.none()},gt=(M,H)=>Te(M,H,$),v=M=>{const H=[];for(let ae=0,ge=M.length;ae<ge;++ae){if(!Pn(M[ae]))throw new Error("Arr.flatten item "+ae+" was not an array, input: "+M);on.apply(H,M[ae])}return H},Gt=(M,H)=>v(mt(M,H)),Un=(M,H)=>H>=0&&H<M.length?Ft.some(M[H]):Ft.none(),To=M=>Un(M,0),st=(M,H)=>{for(let ae=0;ae<M.length;ae++){const ge=H(M[ae],ae);if(ge.isSome())return ge}return Ft.none()},kt=(M,H,ae)=>M.isSome()&&H.isSome()?Ft.some(ae(M.getOrDie(),H.getOrDie())):Ft.none(),Sn=M=>{const H=Po(Ft.none()),ae=()=>H.get().each(M);return{clear:()=>{ae(),H.set(Ft.none())},isSet:()=>H.get().isSome(),get:()=>H.get(),set:er=>{ae(),H.set(Ft.some(er))}}},Kn=()=>Sn(M=>M.unbind()),Yt=()=>{const M=Sn(tt);return{...M,on:ae=>M.get().each(ae)}},Mo=(M,H)=>{let ae=null;return{cancel:()=>{Zn(ae)||(clearTimeout(ae),ae=null)},throttle:(...dn)=>{Zn(ae)&&(ae=setTimeout(()=>{ae=null,M.apply(null,dn)},H))}}},Ae=Object.keys,Ve=(M,H)=>{const ae=Ae(M);for(let ge=0,ut=ae.length;ge<ut;ge++){const dn=ae[ge],Yo=M[dn];H(Yo,dn)}},Ln=typeof window<"u"?window:Function("return this;")(),Wo=(M,H)=>{let ae=H??Ln;for(let ge=0;ge<M.length&&ae!==void 0&&ae!==null;++ge)ae=ae[M[ge]];return ae},Xt=(M,H)=>{const ae=M.split(".");return Wo(ae,H)},gn=(M,H)=>Xt(M,H),En=(M,H)=>{const ae=gn(M,H);if(ae==null)throw new Error(M+" not available on this browser");return ae},Vs=Object.getPrototypeOf,Q=M=>En("HTMLElement",M),ne=M=>{const H=Xt("ownerDocument.defaultView",M);return An(M)&&(Q(H).prototype.isPrototypeOf(M)||/^HTML\w*Element$/.test(Vs(M).constructor.name))},ie=9,Me=11,Pe=1,un=3,Wn=M=>M.dom.nodeType,Fe=M=>H=>Wn(H)===M,Ee=M=>bt(M)&&ne(M.dom),bt=Fe(Pe),Mt=Fe(un),Bt=Fe(ie),Bn=Fe(Me),ko=(M,H,ae)=>{if($t(ae)||pt(ae)||jt(ae))M.setAttribute(H,ae+"");else throw console.error("Invalid call to Attribute.set. Key ",H,":: Value ",ae,":: Element ",M),new Error("Attribute value was not simple")},xn=(M,H,ae)=>{ko(M.dom,H,ae)},cn=(M,H)=>{const ae=M.dom.getAttribute(H);return ae===null?void 0:ae},ro=(M,H)=>{M.dom.removeAttribute(H)},en=M=>M.dom.classList!==void 0,an=(M,H)=>en(M)&&M.dom.classList.contains(H),_n=(M,H,ae=0,ge)=>{const ut=M.indexOf(H,ae);return ut!==-1?Vt(ge)?!0:ut+H.length<=ge:!1},hn=M=>M.style!==void 0&&Re(M.style.getPropertyValue),po=(M,H)=>{const ge=(H||document).createElement("div");if(ge.innerHTML=M,!ge.hasChildNodes()||ge.childNodes.length>1){const ut="HTML does not have a single root node";throw console.error(ut,M),new Error(ut)}return hs(ge.childNodes[0])},zs=(M,H)=>{const ge=(H||document).createElement(M);return hs(ge)},ws=(M,H)=>{const ge=(H||document).createTextNode(M);return hs(ge)},hs=M=>{if(M==null)throw new Error("Node cannot be null or undefined");return{dom:M}},Do={fromHtml:po,fromTag:zs,fromText:ws,fromDom:hs,fromPoint:(M,H,ae)=>Ft.from(M.dom.elementFromPoint(H,ae)).map(hs)},Xe=(M,H)=>{const ae=M.dom;if(ae.nodeType!==Pe)return!1;{const ge=ae;if(ge.matches!==void 0)return ge.matches(H);if(ge.msMatchesSelector!==void 0)return ge.msMatchesSelector(H);if(ge.webkitMatchesSelector!==void 0)return ge.webkitMatchesSelector(H);if(ge.mozMatchesSelector!==void 0)return ge.mozMatchesSelector(H);throw new Error("Browser lacks native selectors")}},Cn=M=>M.nodeType!==Pe&&M.nodeType!==ie&&M.nodeType!==Me||M.childElementCount===0,Ko=(M,H)=>{const ae=document;return Cn(ae)?[]:mt(ae.querySelectorAll(M),Do.fromDom)},Ds=(M,H)=>M.dom===H.dom,ps=M=>Do.fromDom(M.dom.ownerDocument),is=M=>Bt(M)?M:ps(M),co=M=>Ft.from(M.dom.parentNode).map(Do.fromDom),Zs=(M,H)=>{const ae=Re(H)?H:$;let ge=M.dom;const ut=[];for(;ge.parentNode!==null&&ge.parentNode!==void 0;){const dn=ge.parentNode,Yo=Do.fromDom(dn);if(ut.push(Yo),ae(Yo)===!0)break;ge=dn}return ut},Ss=M=>{const H=ae=>Jn(ae,ge=>!Ds(M,ge));return co(M).map($s).map(H).getOr([])},dc=M=>Ft.from(M.dom.nextSibling).map(Do.fromDom),$s=M=>mt(M.dom.childNodes,Do.fromDom),os=M=>Bn(M)&&rn(M.dom.host),xs=Re(Element.prototype.attachShadow)&&Re(Node.prototype.getRootNode),ar=mo(xs),Ir=xs?M=>Do.fromDom(M.dom.getRootNode()):is,No=M=>{const H=Ir(M);return os(H)?Ft.some(H):Ft.none()},fo=M=>Do.fromDom(M.dom.host),xo=M=>{if(ar()&&rn(M.target)){const H=Do.fromDom(M.target);if(bt(H)&&Us(H)&&M.composed&&M.composedPath){const ae=M.composedPath();if(ae)return To(ae)}}return Ft.from(M.target)},Us=M=>rn(M.dom.shadowRoot),Kr=M=>{const H=Mt(M)?M.dom.parentNode:M.dom;if(H==null||H.ownerDocument===null)return!1;const ae=H.ownerDocument;return No(Do.fromDom(H)).fold(()=>ae.body.contains(H),ze(Kr,fo))},Vo=M=>{const H=M.dom.body;if(H==null)throw new Error("Body is not available yet");return Do.fromDom(H)},z=(M,H,ae)=>{if(!$t(ae))throw console.error("Invalid call to CSS.set. Property ",H,":: Value ",ae,":: Element ",M),new Error("CSS value must be a string: "+ae);hn(M)&&M.style.setProperty(H,ae)},N=(M,H,ae)=>{const ge=M.dom;z(ge,H,ae)},de=(M,H)=>{const ae=M.dom;Ve(H,(ge,ut)=>{z(ae,ut,ge)})},pe=(M,H)=>{const ae=M.dom,ut=window.getComputedStyle(ae).getPropertyValue(H);return ut===""&&!Kr(M)?rt(ae,H):ut},rt=(M,H)=>hn(M)?M.style.getPropertyValue(H):"",ht=(M,H,ae,ge,ut,dn,Yo)=>({target:M,x:H,y:ae,stop:ge,prevent:ut,kill:dn,raw:Yo}),zt=M=>{const H=Do.fromDom(xo(M).getOr(M.target)),ae=()=>M.stopPropagation(),ge=()=>M.preventDefault(),ut=se(ge,ae);return ht(H,M.clientX,M.clientY,ae,ge,ut,M)},ao=(M,H)=>ae=>{M(ae)&&H(zt(ae))},q=(M,H,ae,ge,ut)=>{const dn=ao(ae,ge);return M.dom.addEventListener(H,dn,ut),{unbind:Ke(V,M,H,dn,ut)}},It=(M,H,ae,ge)=>q(M,H,ae,ge,!1),V=(M,H,ae,ge)=>{M.dom.removeEventListener(H,ae,ge)},j=We,we=(M,H,ae)=>It(M,H,j,ae),Oe=M=>{let H=!1,ae;return(...ge)=>(H||(H=!0,ae=M.apply(null,ge)),ae)},je=(M,H,ae,ge)=>{const ut=M.isiOS()&&/ipad/i.test(ae)===!0,dn=M.isiOS()&&!ut,Yo=M.isiOS()||M.isAndroid(),er=Yo||ge("(pointer:coarse)"),Xo=ut||!dn&&Yo&&ge("(min-device-width:768px)"),wr=dn||Yo&&!Xo,vs=H.isSafari()&&M.isiOS()&&/safari/i.test(ae)===!1,Gs=!wr&&!Xo&&!vs;return{isiPad:mo(ut),isiPhone:mo(dn),isTablet:mo(Xo),isPhone:mo(wr),isTouch:mo(er),isAndroid:M.isAndroid,isiOS:M.isiOS,isWebView:mo(vs),isDesktop:mo(Gs)}},it=(M,H)=>{for(let ae=0;ae<M.length;ae++){const ge=M[ae];if(ge.test(H))return ge}},nt=(M,H)=>{const ae=it(M,H);if(!ae)return{major:0,minor:0};const ge=ut=>Number(H.replace(ae,"$"+ut));return Jt(ge(1),ge(2))},ot=(M,H)=>{const ae=String(H).toLowerCase();return M.length===0?Ot():nt(M,ae)},Ot=()=>Jt(0,0),Jt=(M,H)=>({major:M,minor:H}),vn={nu:Jt,detect:ot,unknown:Ot},lo=(M,H)=>st(H.brands,ae=>{const ge=ae.brand.toLowerCase();return gt(M,ut=>{var dn;return ge===((dn=ut.brand)===null||dn===void 0?void 0:dn.toLowerCase())}).map(ut=>({current:ut.name,version:vn.nu(parseInt(ae.version,10),0)}))}),Cr=(M,H)=>{const ae=String(H).toLowerCase();return gt(M,ge=>ge.search(ae))},lr=(M,H)=>Cr(M,H).map(ae=>{const ge=vn.detect(ae.versionRegexes,H);return{current:ae.name,version:ge}}),Tr=(M,H)=>Cr(M,H).map(ae=>{const ge=vn.detect(ae.versionRegexes,H);return{current:ae.name,version:ge}}),qt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pn=M=>H=>_n(H,M),In=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:M=>_n(M,"edge/")&&_n(M,"chrome")&&_n(M,"safari")&&_n(M,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,qt],search:M=>_n(M,"chrome")&&!_n(M,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:M=>_n(M,"msie")||_n(M,"trident")},{name:"Opera",versionRegexes:[qt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pn("firefox")},{name:"Safari",versionRegexes:[qt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:M=>(_n(M,"safari")||_n(M,"mobile/"))&&_n(M,"applewebkit")}],Xs=[{name:"Windows",search:pn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:M=>_n(M,"iphone")||_n(M,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pn("linux"),versionRegexes:[]},{name:"Solaris",search:pn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],us={browsers:mo(In),oses:mo(Xs)},fs="Edge",uo="Chromium",Ws="IE",Kc="Opera",Qn="Firefox",bs="Safari",js=()=>Qo({current:void 0,version:vn.unknown()}),Qo=M=>{const H=M.current,ae=M.version,ge=ut=>()=>H===ut;return{current:H,version:ae,isEdge:ge(fs),isChromium:ge(uo),isIE:ge(Ws),isOpera:ge(Kc),isFirefox:ge(Qn),isSafari:ge(bs)}},yr={unknown:js,nu:Qo},Hr="Windows",Fs="iOS",Pr="Android",Lr="Linux",Ba="macOS",kr="Solaris",Yc="FreeBSD",Js="ChromeOS",mc=()=>Sc({current:void 0,version:vn.unknown()}),Sc=M=>{const H=M.current,ae=M.version,ge=ut=>()=>H===ut;return{current:H,version:ae,isWindows:ge(Hr),isiOS:ge(Fs),isAndroid:ge(Pr),isMacOS:ge(Ba),isLinux:ge(Lr),isSolaris:ge(kr),isFreeBSD:ge(Yc),isChromeOS:ge(Js)}},Xc={unknown:mc,nu:Sc},D={detect:(M,H,ae)=>{const ge=us.browsers(),ut=us.oses(),dn=H.bind(Xo=>lo(ge,Xo)).orThunk(()=>lr(ge,M)).fold(yr.unknown,yr.nu),Yo=Tr(ut,M).fold(Xc.unknown,Xc.nu),er=je(Yo,dn,M,ae);return{browser:dn,os:Yo,deviceType:er}}},U=M=>window.matchMedia(M).matches;let ee=Oe(()=>D.detect(navigator.userAgent,Ft.from(navigator.userAgentData),U));const le=()=>ee(),De=(M,H)=>({left:M,top:H,translate:(ge,ut)=>De(M+ge,H+ut)}),vt=De,eo=M=>{const H=M!==void 0?M.dom:document,ae=H.body.scrollLeft||H.documentElement.scrollLeft,ge=H.body.scrollTop||H.documentElement.scrollTop;return vt(ae,ge)},jo=M=>{const H=M===void 0?window:M;return le().browser.isFirefox()?Ft.none():Ft.from(H.visualViewport)},Yn=(M,H,ae,ge)=>({x:M,y:H,width:ae,height:ge,right:M+ae,bottom:H+ge}),Eo=M=>{const H=M===void 0?window:M,ae=H.document,ge=eo(Do.fromDom(ae));return jo(H).fold(()=>{const ut=H.document.documentElement,dn=ut.clientWidth,Yo=ut.clientHeight;return Yn(ge.left,ge.top,dn,Yo)},ut=>Yn(Math.max(ut.pageLeft,ge.left),Math.max(ut.pageTop,ge.top),ut.width,ut.height))},Xn=(M,H,ae)=>jo(ae).map(ge=>{const ut=dn=>H(zt(dn));return ge.addEventListener(M,ut),{unbind:()=>ge.removeEventListener(M,ut)}}).getOrThunk(()=>({unbind:tt}));var Cs=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Nr=tinymce.util.Tools.resolve("tinymce.Env");const Bc=(M,H)=>{M.dispatch("FullscreenStateChanged",{state:H}),M.dispatch("ResizeEditor")},Pt=M=>H=>H.options.get(M),ga=M=>{const H=M.options.register;H("fullscreen_native",{processor:"boolean",default:!1})},$o=Pt("fullscreen_native"),C=M=>{const H=Do.fromDom(M.getElement());return No(H).map(fo).getOrThunk(()=>Vo(ps(H)))},F=M=>M.fullscreenElement!==void 0?M.fullscreenElement:M.msFullscreenElement!==void 0?M.msFullscreenElement:M.webkitFullscreenElement!==void 0?M.webkitFullscreenElement:null,P=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",ue=M=>{const H=M.dom;H.requestFullscreen?H.requestFullscreen():H.msRequestFullscreen?H.msRequestFullscreen():H.webkitRequestFullScreen&&H.webkitRequestFullScreen()},Ze=M=>{const H=M.dom;H.exitFullscreen?H.exitFullscreen():H.msExitFullscreen?H.msExitFullscreen():H.webkitCancelFullScreen&&H.webkitCancelFullScreen()},tn=M=>M.dom===F(ps(M).dom),Je=(M,H,ae)=>Jn(Zs(M,ae),H),Co=(M,H)=>Jn(Ss(M),H),Er=M=>Ko(M),Fo=(M,H,ae)=>Je(M,ge=>Xe(ge,H),ae),ir=(M,H)=>Co(M,ae=>Xe(ae,H)),bo="data-ephox-mobile-fullscreen-style",ha="display:none!important;",Yr="position:absolute!important;",Nn="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Qs="background-color:rgb(255,255,255)!important;",Oo=Nr.os.isAndroid(),Ic=M=>{const H=pe(M,"background-color");return H!==void 0&&H!==""?"background-color:"+H+"!important":Qs},Ro=(M,H,ae)=>{const ge=wr=>ir(wr,"*:not(.tox-silver-sink)"),ut=wr=>vs=>{const Gs=cn(vs,"style"),Pc=Gs===void 0?"no-styles":Gs.trim();Pc!==wr&&(xn(vs,bo,Pc),de(vs,M.parseStyle(wr)))},dn=Fo(H,"*"),Yo=Gt(dn,ge),er=Ic(ae);Y(Yo,ut(ha)),Y(dn,ut(Yr+Nn+er)),ut((Oo===!0?"":Yr)+Nn+er)(H)},Ia=M=>{const H=Er("["+bo+"]");Y(H,ae=>{const ge=cn(ae,bo);ge&&ge!=="no-styles"?de(ae,M.parseStyle(ge)):ro(ae,"style"),ro(ae,bo)})},ci=Cs.DOM,Ai=()=>Eo(window),Gn=M=>window.scrollTo(M.x,M.y),gc=jo().fold(()=>({bind:tt,unbind:tt}),M=>{const H=Yt(),ae=Kn(),ge=Kn(),ut=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},dn=()=>{window.requestAnimationFrame(()=>{H.on(wr=>de(wr,{top:M.offsetTop+"px",left:M.offsetLeft+"px",height:M.height+"px",width:M.width+"px"}))})},Yo=Mo(()=>{ut(),dn()},50);return{bind:wr=>{H.set(wr),Yo.throttle(),ae.set(Xn("resize",Yo.throttle)),ge.set(Xn("scroll",Yo.throttle))},unbind:()=>{H.on(()=>{ae.clear(),ge.clear()}),H.clear()}}}),Hc=(M,H)=>{const ae=document.body,ge=document.documentElement,ut=M.getContainer(),dn=Do.fromDom(ut),Yo=dc(dn).filter(ss=>Ee(ss)&&an(ss,"tox-silver-sink")),er=C(M),Xo=H.get(),wr=Do.fromDom(M.getBody()),vs=Nr.deviceType.isTouch(),Gs=ut.style,Pc=M.iframeElement,pa=Pc==null?void 0:Pc.style,Ls=ss=>{ss(ae,"tox-fullscreen"),ss(ge,"tox-fullscreen"),ss(ut,"tox-fullscreen"),No(dn).map(Vr=>fo(Vr).dom).each(Vr=>{ss(Vr,"tox-fullscreen"),ss(Vr,"tox-shadowhost")})},Lc=()=>{vs&&Ia(M.dom),Ls(ci.removeClass),gc.unbind(),Ft.from(H.get()).each(ss=>ss.fullscreenChangeHandler.unbind())};if(Xo)Xo.fullscreenChangeHandler.unbind(),$o(M)&&tn(er)&&Ze(ps(er)),pa.width=Xo.iframeWidth,pa.height=Xo.iframeHeight,Gs.width=Xo.containerWidth,Gs.height=Xo.containerHeight,Gs.top=Xo.containerTop,Gs.left=Xo.containerLeft,kt(Yo,Xo.sinkCssPosition,(ss,Vr)=>{N(ss,"position",Vr)}),Lc(),Gn(Xo.scrollPos),H.set(null),Bc(M,!1),M.off("remove",Lc);else{const ss=we(ps(er),P(),Jc=>{$o(M)&&!tn(er)&&H.get()!==null&&Hc(M,H)}),Vr={scrollPos:Ai(),containerWidth:Gs.width,containerHeight:Gs.height,containerTop:Gs.top,containerLeft:Gs.left,iframeWidth:pa.width,iframeHeight:pa.height,fullscreenChangeHandler:ss,sinkCssPosition:Yo.map(Jc=>pe(Jc,"position"))};vs&&Ro(M.dom,dn,wr),pa.width=pa.height="100%",Gs.width=Gs.height="",Ls(ci.addClass),Yo.each(Jc=>{N(Jc,"position","fixed")}),gc.bind(dn),M.on("remove",Lc),H.set(Vr),$o(M)&&ue(er),Bc(M,!0)}},Or=(M,H)=>{M.addCommand("mceFullScreen",()=>{Hc(M,H)})},xc=(M,H)=>ae=>{ae.setActive(H.get()!==null);const ge=ut=>ae.setActive(ut.state);return M.on("FullscreenStateChanged",ge),()=>M.off("FullscreenStateChanged",ge)},Tl=(M,H)=>{const ae=()=>M.execCommand("mceFullScreen");M.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:ae,onSetup:xc(M,H)}),M.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:ae,onSetup:xc(M,H)})};var kl=()=>{Lo.add("fullscreen",M=>{const H=Po(null);return M.inline||(ga(M),Or(M,H),Tl(M,H),M.addShortcut("Meta+Shift+F","","mceFullScreen")),So(H)})};kl()})();const Oq=ma({__proto__:null,default:vM},[vM]);var yM={};(function(){var Po=tinymce.util.Tools.resolve("tinymce.PluginManager");const Lo=Ke=>$=>$.options.get(Ke),So=Ke=>{const $=Ke.options.register;$("insertdatetime_dateformat",{processor:"string",default:Ke.translate("%Y-%m-%d")}),$("insertdatetime_timeformat",{processor:"string",default:Ke.translate("%H:%M:%S")}),$("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),$("insertdatetime_element",{processor:"boolean",default:!1})},zn=Lo("insertdatetime_dateformat"),Rn=Lo("insertdatetime_timeformat"),io=Lo("insertdatetime_formats"),sn=Lo("insertdatetime_element"),ye=Ke=>{const $=io(Ke);return $.length>0?$[0]:Rn(Ke)},$t="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),An="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Pn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Zn="January February March April May June July August September October November December".split(" "),pt=(Ke,$)=>{if(Ke=""+Ke,Ke.length<$)for(let We=0;We<$-Ke.length;We++)Ke="0"+Ke;return Ke},Vt=(Ke,$,We=new Date)=>($=$.replace("%D","%m/%d/%Y"),$=$.replace("%r","%I:%M:%S %p"),$=$.replace("%Y",""+We.getFullYear()),$=$.replace("%y",""+We.getYear()),$=$.replace("%m",pt(We.getMonth()+1,2)),$=$.replace("%d",pt(We.getDate(),2)),$=$.replace("%H",""+pt(We.getHours(),2)),$=$.replace("%M",""+pt(We.getMinutes(),2)),$=$.replace("%S",""+pt(We.getSeconds(),2)),$=$.replace("%I",""+((We.getHours()+11)%12+1)),$=$.replace("%p",We.getHours()<12?"AM":"PM"),$=$.replace("%B",""+Ke.translate(Zn[We.getMonth()])),$=$.replace("%b",""+Ke.translate(Pn[We.getMonth()])),$=$.replace("%A",""+Ke.translate(An[We.getDay()])),$=$.replace("%a",""+Ke.translate($t[We.getDay()])),$=$.replace("%%","%"),$),yn=(Ke,$,We,Ft)=>{const on=Ke.dom.create("time",{datetime:We},Ft);Ke.dom.replace(on,$),Ke.selection.select(on,!0),Ke.selection.collapse(!1)},rn=(Ke,$)=>{if(sn(Ke)){const We=Vt(Ke,$);let Ft;/%[HMSIp]/.test($)?Ft=Vt(Ke,"%Y-%m-%dT%H:%M"):Ft=Vt(Ke,"%Y-%m-%d");const on=Ke.dom.getParent(Ke.selection.getStart(),"time");on?yn(Ke,on,Ft,We):Ke.insertContent('<time datetime="'+Ft+'">'+We+"</time>")}else Ke.insertContent(Vt(Ke,$))},Re=Ke=>{Ke.addCommand("mceInsertDate",($,We)=>{rn(Ke,We??zn(Ke))}),Ke.addCommand("mceInsertTime",($,We)=>{rn(Ke,We??Rn(Ke))})},jt=Ke=>{let $=Ke;return{get:()=>$,set:on=>{$=on}}};var tt=tinymce.util.Tools.resolve("tinymce.util.Tools");const se=Ke=>$=>{const We=()=>{$.setEnabled(Ke.selection.isEditable())};return Ke.on("NodeChange",We),We(),()=>{Ke.off("NodeChange",We)}},ze=Ke=>{const $=io(Ke),We=jt(ye(Ke)),Ft=mt=>Ke.execCommand("mceInsertDate",!1,mt);Ke.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:mt=>mt===We.get(),fetch:mt=>{mt(tt.map($,Y=>({type:"choiceitem",text:Vt(Ke,Y),value:Y})))},onAction:mt=>{Ft(We.get())},onItemAction:(mt,Y)=>{We.set(Y),Ft(Y)},onSetup:se(Ke)});const on=mt=>()=>{We.set(mt),Ft(mt)};Ke.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>tt.map($,mt=>({type:"menuitem",text:Vt(Ke,mt),onAction:on(mt)})),onSetup:se(Ke)})};var mo=()=>{Po.add("insertdatetime",Ke=>{So(Ke),Re(Ke),ze(Ke)})};mo()})();const Aq=ma({__proto__:null,default:yM},[yM]);var wM={};(function(){var Po=tinymce.util.Tools.resolve("tinymce.PluginManager");const Lo=(z,N,de)=>{var pe;return de(z,N.prototype)?!0:((pe=z.constructor)===null||pe===void 0?void 0:pe.name)===N.name},So=z=>{const N=typeof z;return z===null?"null":N==="object"&&Array.isArray(z)?"array":N==="object"&&Lo(z,String,(de,pe)=>pe.isPrototypeOf(de))?"string":N},zn=z=>N=>So(N)===z,Rn=zn("string"),io=zn("object"),sn=zn("array"),ye=z=>z==null,$t=z=>!ye(z);class An{constructor(N,de){this.tag=N,this.value=de}static some(N){return new An(!0,N)}static none(){return An.singletonNone}fold(N,de){return this.tag?de(this.value):N()}isSome(){return this.tag}isNone(){return!this.tag}map(N){return this.tag?An.some(N(this.value)):An.none()}bind(N){return this.tag?N(this.value):An.none()}exists(N){return this.tag&&N(this.value)}forall(N){return!this.tag||N(this.value)}filter(N){return!this.tag||N(this.value)?this:An.none()}getOr(N){return this.tag?this.value:N}or(N){return this.tag?this:N}getOrThunk(N){return this.tag?this.value:N()}orThunk(N){return this.tag?this:N()}getOrDie(N){if(this.tag)return this.value;throw new Error(N??"Called getOrDie on None")}static from(N){return $t(N)?An.some(N):An.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(N){this.tag&&N(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}An.singletonNone=new An(!1);const Pn=Array.prototype.push,Zn=(z,N)=>{for(let de=0,pe=z.length;de<pe;de++){const rt=z[de];N(rt,de)}},pt=z=>{const N=[];for(let de=0,pe=z.length;de<pe;++de){if(!sn(z[de]))throw new Error("Arr.flatten item "+de+" was not an array, input: "+z);Pn.apply(N,z[de])}return N},Vt=z=>{let N=z;return{get:()=>N,set:rt=>{N=rt}}},yn=Object.keys,rn=Object.hasOwnProperty,Re=(z,N)=>{const de=yn(z);for(let pe=0,rt=de.length;pe<rt;pe++){const ht=de[pe],zt=z[ht];N(zt,ht)}},jt=(z,N)=>tt(z,N)?An.from(z[N]):An.none(),tt=(z,N)=>rn.call(z,N),se=z=>N=>N.options.get(z),ze=z=>{const N=z.options.register;N("audio_template_callback",{processor:"function"}),N("video_template_callback",{processor:"function"}),N("iframe_template_callback",{processor:"function"}),N("media_live_embeds",{processor:"boolean",default:!0}),N("media_filter_html",{processor:"boolean",default:!0}),N("media_url_resolver",{processor:"function"}),N("media_alt_source",{processor:"boolean",default:!0}),N("media_poster",{processor:"boolean",default:!0}),N("media_dimensions",{processor:"boolean",default:!0})},mo=se("audio_template_callback"),Ke=se("video_template_callback"),$=se("iframe_template_callback"),We=se("media_live_embeds"),Ft=se("media_filter_html"),on=se("media_url_resolver"),mt=se("media_alt_source"),Y=se("media_poster"),Jn=se("media_dimensions");var Te=tinymce.util.Tools.resolve("tinymce.util.Tools"),gt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),v=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Gt=gt.DOM,Un=z=>z.replace(/px$/,""),To=z=>{const N=z.attr("style"),de=N?Gt.parseStyle(N):{};return{type:"ephox-embed-iri",source:z.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:jt(de,"max-width").map(Un).getOr(""),height:jt(de,"max-height").map(Un).getOr("")}},st=(z,N)=>{let de={};const rt=v({validate:!1,forced_root_block:!1},N).parse(z);for(let ht=rt;ht;ht=ht.walk())if(ht.type===1){const zt=ht.name;if(ht.attr("data-ephox-embed-iri")){de=To(ht);break}else!de.source&&zt==="param"&&(de.source=ht.attr("movie")),(zt==="iframe"||zt==="object"||zt==="embed"||zt==="video"||zt==="audio")&&(de.type||(de.type=zt),de=Te.extend(ht.attributes.map,de)),zt==="source"&&(de.source?de.altsource||(de.altsource=ht.attr("src")):de.source=ht.attr("src")),zt==="img"&&!de.poster&&(de.poster=ht.attr("src"))}return de.source=de.source||de.src||"",de.altsource=de.altsource||"",de.poster=de.poster||"",de},kt=z=>{var N;const de={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},pe=(N=z.toLowerCase().split(".").pop())!==null&&N!==void 0?N:"";return jt(de,pe).getOr("")};var Sn=tinymce.util.Tools.resolve("tinymce.html.Node"),Kn=tinymce.util.Tools.resolve("tinymce.html.Serializer");const Yt=(z,N={})=>v({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...N},z),Mo=gt.DOM,Ae=z=>/^[0-9.]+$/.test(z)?z+"px":z,Ve=(z,N)=>{const de=N.attr("style"),pe=de?Mo.parseStyle(de):{};$t(z.width)&&(pe["max-width"]=Ae(z.width)),$t(z.height)&&(pe["max-height"]=Ae(z.height)),N.attr("style",Mo.serializeStyle(pe))},Ln=["source","altsource"],Wo=(z,N,de,pe)=>{let rt=0,ht=0;const zt=Yt(pe);zt.addNodeFilter("source",q=>rt=q.length);const ao=zt.parse(z);for(let q=ao;q;q=q.walk())if(q.type===1){const It=q.name;if(q.attr("data-ephox-embed-iri")){Ve(N,q);break}else{switch(It){case"video":case"object":case"embed":case"img":case"iframe":N.height!==void 0&&N.width!==void 0&&(q.attr("width",N.width),q.attr("height",N.height));break}if(de)switch(It){case"video":q.attr("poster",N.poster),q.attr("src",null);for(let j=rt;j<2;j++)if(N[Ln[j]]){const we=new Sn("source",1);we.attr("src",N[Ln[j]]),we.attr("type",N[Ln[j]+"mime"]||null),q.append(we)}break;case"iframe":q.attr("src",N.source);break;case"object":const V=q.getAll("img").length>0;if(N.poster&&!V){q.attr("src",N.poster);const j=new Sn("img",1);j.attr("src",N.poster),j.attr("width",N.width),j.attr("height",N.height),q.append(j)}break;case"source":if(ht<2&&(q.attr("src",N[Ln[ht]]),q.attr("type",N[Ln[ht]+"mime"]||null),!N[Ln[ht]])){q.remove();continue}ht++;break;case"img":N.poster||q.remove();break}}}return Kn({},pe).serialize(ao)},Xt=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],gn=z=>{const N=z.match(/^(https?:\/\/|www\.)(.+)$/i);return N&&N.length>1?N[1]==="www."?"https://":N[1]:"https://"},En=(z,N)=>{const de=gn(N),pe=z.regex.exec(N);let rt=de+z.url;if($t(pe))for(let ht=0;ht<pe.length;ht++)rt=rt.replace("$"+ht,()=>pe[ht]?pe[ht]:"");return rt.replace(/\?$/,"")},Vs=z=>{const N=Xt.filter(de=>de.regex.test(z));return N.length>0?Te.extend({},N[0],{url:En(N[0],z)}):null},Q=(z,N)=>{if(N)return N(z);{const de=z.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+z.source+'" width="'+z.width+'" height="'+z.height+'"'+de+"></iframe>"}},ne=z=>{let N='<object data="'+z.source+'" width="'+z.width+'" height="'+z.height+'" type="application/x-shockwave-flash">';return z.poster&&(N+='<img src="'+z.poster+'" width="'+z.width+'" height="'+z.height+'" />'),N+="</object>",N},ie=(z,N)=>N?N(z):'<audio controls="controls" src="'+z.source+'">'+(z.altsource?`
<source src="`+z.altsource+'"'+(z.altsourcemime?' type="'+z.altsourcemime+'"':"")+` />
`:"")+"</audio>",Me=(z,N)=>N?N(z):'<video width="'+z.width+'" height="'+z.height+'"'+(z.poster?' poster="'+z.poster+'"':"")+` controls="controls">
<source src="`+z.source+'"'+(z.sourcemime?' type="'+z.sourcemime+'"':"")+` />
`+(z.altsource?'<source src="'+z.altsource+'"'+(z.altsourcemime?' type="'+z.altsourcemime+'"':"")+` />
`:"")+"</video>",Pe=(z,N)=>{var de;const pe=Te.extend({},N);if(!pe.source&&(Te.extend(pe,st((de=pe.embed)!==null&&de!==void 0?de:"",z.schema)),!pe.source))return"";pe.altsource||(pe.altsource=""),pe.poster||(pe.poster=""),pe.source=z.convertURL(pe.source,"source"),pe.altsource=z.convertURL(pe.altsource,"source"),pe.sourcemime=kt(pe.source),pe.altsourcemime=kt(pe.altsource),pe.poster=z.convertURL(pe.poster,"poster");const rt=Vs(pe.source);if(rt&&(pe.source=rt.url,pe.type=rt.type,pe.allowfullscreen=rt.allowFullscreen,pe.width=pe.width||String(rt.w),pe.height=pe.height||String(rt.h)),pe.embed)return Wo(pe.embed,pe,!0,z.schema);{const ht=mo(z),zt=Ke(z),ao=$(z);return pe.width=pe.width||"300",pe.height=pe.height||"150",Te.each(pe,(q,It)=>{pe[It]=z.dom.encode(""+q)}),pe.type==="iframe"?Q(pe,ao):pe.sourcemime==="application/x-shockwave-flash"?ne(pe):pe.sourcemime.indexOf("audio")!==-1?ie(pe,ht):Me(pe,zt)}},un=z=>z.hasAttribute("data-mce-object")||z.hasAttribute("data-ephox-embed-iri"),Wn=z=>{z.on("click keyup touchend",()=>{const N=z.selection.getNode();N&&z.dom.hasClass(N,"mce-preview-object")&&z.dom.getAttrib(N,"data-mce-selected")&&N.setAttribute("data-mce-selected","2")}),z.on("ObjectResized",N=>{const de=N.target;if(de.getAttribute("data-mce-object")){let pe=de.getAttribute("data-mce-html");pe&&(pe=unescape(pe),de.setAttribute("data-mce-html",escape(Wo(pe,{width:String(N.width),height:String(N.height)},!1,z.schema))))}})},Fe={},Ee=(z,N,de)=>new Promise((pe,rt)=>{const ht=zt=>(zt.html&&(Fe[z.source]=zt),pe({url:z.source,html:zt.html?zt.html:N(z)}));Fe[z.source]?ht(Fe[z.source]):de({url:z.source},ht,rt)}),bt=(z,N)=>Promise.resolve({html:N(z),url:z.source}),Mt=z=>N=>Pe(z,N),Bt=(z,N)=>{const de=on(z);return de?Ee(N,Mt(z),de):bt(N,Mt(z))},Bn=z=>tt(Fe,z),ko=(z,N)=>jt(N,z).bind(de=>jt(de,"meta")),xn=(z,N,de)=>pe=>{const rt=()=>jt(z,pe),ht=()=>jt(N,pe),zt=It=>jt(It,"value").bind(V=>V.length>0?An.some(V):An.none()),ao=()=>rt().bind(It=>io(It)?zt(It).orThunk(ht):ht().orThunk(()=>An.from(It))),q=()=>ht().orThunk(()=>rt().bind(It=>io(It)?zt(It):An.from(It)));return{[pe]:(pe===de?ao():q()).getOr("")}},cn=(z,N)=>{const de={};return jt(z,"dimensions").each(pe=>{Zn(["width","height"],rt=>{jt(N,rt).orThunk(()=>jt(pe,rt)).each(ht=>de[rt]=ht)})}),de},ro=(z,N)=>{const de=N&&N!=="dimensions"?ko(N,z).getOr({}):{},pe=xn(z,de,N);return{...pe("source"),...pe("altsource"),...pe("poster"),...pe("embed"),...cn(z,de)}},en=z=>{const N={...z,source:{value:jt(z,"source").getOr("")},altsource:{value:jt(z,"altsource").getOr("")},poster:{value:jt(z,"poster").getOr("")}};return Zn(["width","height"],de=>{jt(z,de).each(pe=>{const rt=N.dimensions||{};rt[de]=pe,N.dimensions=rt})}),N},an=z=>N=>{const de=N&&N.msg?"Media embed handler error: "+N.msg:"Media embed handler threw unknown error.";z.notificationManager.open({type:"error",text:de})},_n=z=>{const N=z.selection.getNode(),de=un(N)?z.serializer.serialize(N,{selection:!0}):"",pe=st(de,z.schema),ht=(()=>{if(ws(pe.source,pe.type)){const zt=z.dom.getRect(N);return{width:zt.w.toString().replace(/px$/,""),height:zt.h.toString().replace(/px$/,"")}}else return{}})();return{embed:de,...pe,...ht}},hn=(z,N)=>de=>{if(Rn(de.url)&&de.url.trim().length>0){const pe=de.html,ht={...st(pe,N.schema),source:de.url,embed:pe};z.setData(en(ht))}},po=(z,N)=>{const de=z.dom.select("*[data-mce-object]");for(let pe=0;pe<N.length;pe++)for(let rt=de.length-1;rt>=0;rt--)N[pe]===de[rt]&&de.splice(rt,1);z.selection.select(de[0])},zs=(z,N)=>{const de=z.dom.select("*[data-mce-object]");z.insertContent(N),po(z,de),z.nodeChanged()},ws=(z,N)=>$t(N)&&N==="ephox-embed-iri"&&$t(Vs(z)),hs=(z,N)=>((pe,rt)=>pe.width!==rt.width||pe.height!==rt.height)(z,N)&&ws(N.source,z.type),ns=(z,N,de)=>{var pe;N.embed=hs(z,N)&&Jn(de)?Pe(de,{...N,embed:""}):Wo((pe=N.embed)!==null&&pe!==void 0?pe:"",N,!1,de.schema),N.embed&&(z.source===N.source||Bn(N.source))?zs(de,N.embed):Bt(de,N).then(rt=>{zs(de,rt.html)}).catch(an(de))},Do=z=>{const N=_n(z),de=Vt(N),pe=en(N),rt=(ot,Ot)=>{const Jt=ro(Ot.getData(),"source");ot.source!==Jt.source&&(hn(nt,z)({url:Jt.source,html:""}),Bt(z,Jt).then(hn(nt,z)).catch(an(z)))},ht=ot=>{var Ot;const Jt=ro(ot.getData()),vn=st((Ot=Jt.embed)!==null&&Ot!==void 0?Ot:"",z.schema);ot.setData(en(vn))},zt=(ot,Ot,Jt)=>{const vn=ro(ot.getData(),Ot),lo=hs(Jt,vn)&&Jn(z)?{...vn,embed:""}:vn,Cr=Pe(z,lo);ot.setData(en({...lo,embed:Cr}))},ao=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],q=Jn(z)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],It={title:"General",name:"general",items:pt([ao,q])},j={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},we=[];mt(z)&&we.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),Y(z)&&we.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const Oe={title:"Advanced",name:"advanced",items:we},je=[It,j];we.length>0&&je.push(Oe);const it={type:"tabpanel",tabs:je},nt=z.windowManager.open({title:"Insert/Edit Media",size:"normal",body:it,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:ot=>{const Ot=ro(ot.getData());ns(de.get(),Ot,z),ot.close()},onChange:(ot,Ot)=>{switch(Ot.name){case"source":rt(de.get(),ot);break;case"embed":ht(ot);break;case"dimensions":case"altsource":case"poster":zt(ot,Ot.name,de.get());break}de.set(ro(ot.getData()))},initialData:pe})},Xe=z=>({showDialog:()=>{Do(z)}}),Cn=z=>{const N=()=>{Do(z)};z.addCommand("mceMedia",N)},Ko=(z,N,de)=>z.length>=N.length&&z.substr(de,de+N.length)===N,Ds=(z,N)=>Ko(z,N,0);var ps=tinymce.util.Tools.resolve("tinymce.Env");const is=z=>{const N=z.name;return N==="iframe"||N==="video"||N==="audio"},co=(z,N,de,pe=null)=>{const rt=z.attr(de);return $t(rt)?rt:tt(N,de)?null:pe},Zs=(z,N,de)=>{const pe=N.name==="img"||z.name==="video",rt=pe?"300":null,ht=z.name==="audio"?"30":"150",zt=pe?ht:null;N.attr({width:co(z,de,"width",rt),height:co(z,de,"height",zt)})},Ss=(z,N,de,pe)=>{const rt=Yt(z.schema).parse(pe,{context:N});for(;rt.firstChild;)de.append(rt.firstChild)},dc=(z,N)=>{const de=N.name,pe=new Sn("img",1);return os(z,N,pe),Zs(N,pe,{}),pe.attr({style:N.attr("style"),src:ps.transparentSrc,"data-mce-object":de,class:"mce-object mce-object-"+de}),pe},$s=(z,N)=>{var de;const pe=N.name,rt=new Sn("span",1);rt.attr({contentEditable:"false",style:N.attr("style"),"data-mce-object":pe,class:"mce-preview-object mce-object-"+pe}),os(z,N,rt);const ht=z.dom.parseStyle((de=N.attr("style"))!==null&&de!==void 0?de:""),zt=new Sn(pe,1);if(Zs(N,zt,ht),zt.attr({src:N.attr("src"),style:N.attr("style"),class:N.attr("class")}),pe==="iframe")zt.attr({allowfullscreen:N.attr("allowfullscreen"),frameborder:"0",sandbox:N.attr("sandbox")});else{Zn(["controls","crossorigin","currentTime","loop","muted","poster","preload"],V=>{zt.attr(V,N.attr(V))});const It=rt.attr("data-mce-html");$t(It)&&Ss(z,pe,zt,unescape(It))}const ao=new Sn("span",1);return ao.attr("class","mce-shim"),rt.append(zt),rt.append(ao),rt},os=(z,N,de)=>{var pe;const rt=(pe=N.attributes)!==null&&pe!==void 0?pe:[];let ht=rt.length;for(;ht--;){const It=rt[ht].name;let V=rt[ht].value;It!=="width"&&It!=="height"&&It!=="style"&&!Ds(It,"data-mce-")&&((It==="data"||It==="src")&&(V=z.convertURL(V,It)),de.attr("data-mce-p-"+It,V))}const zt=Kn({inner:!0},z.schema),ao=new Sn("div",1);Zn(N.children(),It=>ao.append(It));const q=zt.serialize(ao);q&&(de.attr("data-mce-html",escape(q)),de.empty())},xs=z=>{const N=z.attr("class");return Rn(N)&&/\btiny-pageembed\b/.test(N)},ar=z=>{let N=z;for(;N=N.parent;)if(N.attr("data-ephox-embed-iri")||xs(N))return!0;return!1},Ir=z=>N=>{let de=N.length,pe;for(;de--;)pe=N[de],pe.parent&&(pe.parent.attr("data-mce-object")||(is(pe)&&We(z)?ar(pe)||pe.replace($s(z,pe)):ar(pe)||pe.replace(dc(z,pe))))},No=(z,N,de)=>{const pe=z.options.get,rt=pe("xss_sanitization"),ht=Ft(z);return Yt(z.schema,{sanitize:rt,validate:ht}).parse(de,{context:N})},fo=z=>{z.on("PreInit",()=>{const{schema:N,serializer:de,parser:pe}=z,rt=N.getBoolAttrs();Zn("webkitallowfullscreen mozallowfullscreen".split(" "),ht=>{rt[ht]={}}),Re({embed:["wmode"]},(ht,zt)=>{const ao=N.getElementRule(zt);ao&&Zn(ht,q=>{ao.attributes[q]={},ao.attributesOrder.push(q)})}),pe.addNodeFilter("iframe,video,audio,object,embed",Ir(z)),de.addAttributeFilter("data-mce-object",(ht,zt)=>{var ao;let q=ht.length;for(;q--;){const It=ht[q];if(!It.parent)continue;const V=It.attr(zt),j=new Sn(V,1);if(V!=="audio"){const it=It.attr("class");it&&it.indexOf("mce-preview-object")!==-1&&It.firstChild?j.attr({width:It.firstChild.attr("width"),height:It.firstChild.attr("height")}):j.attr({width:It.attr("width"),height:It.attr("height")})}j.attr({style:It.attr("style")});const we=(ao=It.attributes)!==null&&ao!==void 0?ao:[];let Oe=we.length;for(;Oe--;){const it=we[Oe].name;it.indexOf("data-mce-p-")===0&&j.attr(it.substr(11),we[Oe].value)}const je=It.attr("data-mce-html");if(je){const it=No(z,V,unescape(je));Zn(it.children(),nt=>j.append(nt))}It.replace(j)}})}),z.on("SetContent",()=>{const N=z.dom;Zn(N.select("span.mce-preview-object"),de=>{N.select("span.mce-shim",de).length===0&&N.add(de,"span",{class:"mce-shim"})})})},xo=z=>{z.on("ResolveName",N=>{let de;N.target.nodeType===1&&(de=N.target.getAttribute("data-mce-object"))&&(N.name=de)})},Us=z=>N=>{const de=()=>{N.setEnabled(z.selection.isEditable())};return z.on("NodeChange",de),de(),()=>{z.off("NodeChange",de)}},Kr=z=>{const N=()=>z.execCommand("mceMedia");z.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:N,onSetup:de=>{const pe=z.selection;de.setActive(un(pe.getNode()));const rt=pe.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",de.setActive).unbind,ht=Us(z)(de);return()=>{rt(),ht()}}}),z.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:N,onSetup:Us(z)})};var Vo=()=>{Po.add("media",z=>(ze(z),Cn(z),Kr(z),xo(z),fo(z),Wn(z),Xe(z)))};Vo()})();const _q=ma({__proto__:null,default:wM},[wM]);var SM={};(function(){const Po=Fe=>{let Ee=Fe;return{get:()=>Ee,set:Bt=>{Ee=Bt}}};var Lo=tinymce.util.Tools.resolve("tinymce.PluginManager");let So=0;const zn=Fe=>{const bt=new Date().getTime(),Mt=Math.floor(Math.random()*1e9);return So++,Fe+"_"+Mt+So+String(bt)},Rn=Fe=>({addTab:bt=>{var Mt;const Bt=(Mt=bt.name)!==null&&Mt!==void 0?Mt:zn("tab-name"),Bn=Fe.get();Bn[Bt]=bt,Fe.set(Bn)}}),io=(Fe,Ee)=>{Fe.addCommand("mceHelp",Ee)},sn=Fe=>Ee=>Ee.options.get(Fe),ye=Fe=>{const Ee=Fe.options.register;Ee("help_tabs",{processor:"array"})},$t=sn("help_tabs"),An=sn("forced_plugins"),Pn=(Fe,Ee)=>{Fe.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:Ee}),Fe.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:Ee})},Zn=(Fe,Ee,bt)=>{var Mt;return bt(Fe,Ee.prototype)?!0:((Mt=Fe.constructor)===null||Mt===void 0?void 0:Mt.name)===Ee.name},pt=Fe=>{const Ee=typeof Fe;return Fe===null?"null":Ee==="object"&&Array.isArray(Fe)?"array":Ee==="object"&&Zn(Fe,String,(bt,Mt)=>Mt.isPrototypeOf(bt))?"string":Ee},Vt=Fe=>Ee=>pt(Ee)===Fe,yn=Fe=>Ee=>typeof Ee===Fe,rn=Fe=>Ee=>Fe===Ee,Re=Vt("string"),jt=rn(void 0),tt=Fe=>Fe==null,se=Fe=>!tt(Fe),ze=yn("function"),Ke=(Fe=>()=>Fe)(!1);class ${constructor(Ee,bt){this.tag=Ee,this.value=bt}static some(Ee){return new $(!0,Ee)}static none(){return $.singletonNone}fold(Ee,bt){return this.tag?bt(this.value):Ee()}isSome(){return this.tag}isNone(){return!this.tag}map(Ee){return this.tag?$.some(Ee(this.value)):$.none()}bind(Ee){return this.tag?Ee(this.value):$.none()}exists(Ee){return this.tag&&Ee(this.value)}forall(Ee){return!this.tag||Ee(this.value)}filter(Ee){return!this.tag||Ee(this.value)?this:$.none()}getOr(Ee){return this.tag?this.value:Ee}or(Ee){return this.tag?this:Ee}getOrThunk(Ee){return this.tag?this.value:Ee()}orThunk(Ee){return this.tag?this:Ee()}getOrDie(Ee){if(this.tag)return this.value;throw new Error(Ee??"Called getOrDie on None")}static from(Ee){return se(Ee)?$.some(Ee):$.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ee){this.tag&&Ee(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}$.singletonNone=new $(!1);const We=Array.prototype.slice,Ft=Array.prototype.indexOf,on=(Fe,Ee)=>Ft.call(Fe,Ee),mt=(Fe,Ee)=>on(Fe,Ee)>-1,Y=(Fe,Ee)=>{const bt=Fe.length,Mt=new Array(bt);for(let Bt=0;Bt<bt;Bt++){const Bn=Fe[Bt];Mt[Bt]=Ee(Bn,Bt)}return Mt},Jn=(Fe,Ee)=>{const bt=[];for(let Mt=0,Bt=Fe.length;Mt<Bt;Mt++){const Bn=Fe[Mt];Ee(Bn,Mt)&&bt.push(Bn)}return bt},Te=(Fe,Ee,bt)=>{for(let Mt=0,Bt=Fe.length;Mt<Bt;Mt++){const Bn=Fe[Mt];if(Ee(Bn,Mt))return $.some(Bn);if(bt(Bn,Mt))break}return $.none()},gt=(Fe,Ee)=>Te(Fe,Ee,Ke),v=(Fe,Ee)=>{const bt=We.call(Fe,0);return bt.sort(Ee),bt},Gt=Object.keys,Un=Object.hasOwnProperty,To=(Fe,Ee)=>st(Fe,Ee)?$.from(Fe[Ee]):$.none(),st=(Fe,Ee)=>Un.call(Fe,Ee),kt=Fe=>{const Ee=[],bt=Mt=>{Ee.push(Mt)};for(let Mt=0;Mt<Fe.length;Mt++)Fe[Mt].each(bt);return Ee};var Sn=tinymce.util.Tools.resolve("tinymce.Resource"),Kn=tinymce.util.Tools.resolve("tinymce.util.I18n");const Yt=(Fe,Ee)=>Sn.load(`tinymce.html-i18n.help-keynav.${Ee}`,`${Fe}/js/i18n/keynav/${Ee}.js`),Mo=Fe=>Yt(Fe,Kn.getCode()).catch(()=>Yt(Fe,"en")),Ae=(Fe,Ee)=>{Fe.on("init",()=>{Mo(Ee)})},Ve=async Fe=>({name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:await Mo(Fe)}]});var Ln=tinymce.util.Tools.resolve("tinymce.Env");const Wo=Fe=>{const Ee=Ln.os.isMacOS()||Ln.os.isiOS(),Bt=Ee?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},Bn=Fe.split("+"),ko=Y(Bn,xn=>{const cn=xn.toLowerCase().trim();return st(Bt,cn)?Bt[cn]:xn});return Ee?ko.join("").replace(/\s/,""):ko.join("+")},Xt=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],gn=()=>{const Fe=Y(Xt,bt=>{const Mt=Y(bt.shortcuts,Wo).join(" or ");return[bt.action,Mt]});return{name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:Fe}]}},En=Y([{key:"accordion",name:"Accordion"},{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"advcode",name:"Advanced Code Editor",type:"premium"},{key:"advtable",name:"Advanced Tables",type:"premium"},{key:"advtemplate",name:"Advanced Templates",type:"premium",slug:"advanced-templates"},{key:"ai",name:"AI Assistant",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"editimage",name:"Enhanced Image Editing",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium",slug:"advanced-typography"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"export",name:"Export",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium",slug:"inline-css"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"rtc",name:"Real-Time Collaboration",type:"premium",slug:"rtc-introduction"},{key:"tinymcespellchecker",name:"Spell Checker Pro",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],Fe=>({...Fe,type:Fe.type||"opensource",slug:Fe.slug||Fe.key})),Vs=Fe=>{const Ee=()=>{const ro=Jn(En,({type:_n})=>_n==="premium"),en=v(Y(ro,_n=>_n.name),(_n,hn)=>_n.localeCompare(hn)),an=Y(en,_n=>`<li>${_n}</li>`).join("");return"<div><p><b>"+Kn.translate("Premium plugins:")+"</b></p><ul>"+an+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=help_dialog_plugin_tab&utm_source=tiny&utm_medium=referral&utm_term=read_more&utm_content=premium_plugin_heading" rel="noopener" target="_blank" data-alloy-tabstop="true" tabindex="-1">'+Kn.translate("Learn more...")+"</a></li></ul></div>"},bt=ro=>`<a data-alloy-tabstop="true" tabindex="-1" href="${ro.url}" target="_blank" rel="noopener">${ro.name}</a>`,Mt=(ro,en)=>{const an=ro.plugins[en].getMetadata;if(ze(an)){const _n=an();return{name:_n.name,html:bt(_n)}}else return{name:en,html:en}},Bt=(ro,en)=>gt(En,an=>an.key===en).fold(()=>Mt(ro,en),an=>{const _n=an.type==="premium"?`${an.name}*`:an.name,hn=bt({name:_n,url:`https://www.tiny.cloud/docs/tinymce/6/${an.slug}/`});return{name:_n,html:hn}}),Bn=ro=>{const en=Gt(ro.plugins),an=An(ro);return jt(an)?en:Jn(en,_n=>!mt(an,_n))},ko=ro=>{const en=Bn(ro),an=v(Y(en,ws=>Bt(ro,ws)),(ws,hs)=>ws.name.localeCompare(hs.name)),_n=Y(an,ws=>"<li>"+ws.html+"</li>"),hn=_n.length,po=_n.join("");return"<p><b>"+Kn.translate(["Plugins installed ({0}):",hn])+"</b></p><ul>"+po+"</ul>"};return{name:"plugins",title:"Plugins",items:[{type:"htmlpanel",presets:"document",html:[(ro=>ro==null?"":"<div>"+ko(ro)+"</div>")(Fe),Ee()].join("")}]}};var Q=tinymce.util.Tools.resolve("tinymce.EditorManager");const ne=()=>{const bt='<a data-alloy-tabstop="true" tabindex="-1" href="https://www.tiny.cloud/docs/tinymce/6/changelog/?utm_campaign=help_dialog_version_tab&utm_source=tiny&utm_medium=referral" rel="noopener" target="_blank">TinyMCE '+((Bt,Bn)=>Bt.indexOf("@")===0?"X.X.X":Bt+"."+Bn)(Q.majorVersion,Q.minorVersion)+"</a>";return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+Kn.translate(["You are using {0}",bt])+"</p>",presets:"document"}]}},ie=(Fe,Ee)=>{const bt={},Mt=Y(Fe,Bt=>{var Bn;if(Re(Bt))return st(Ee,Bt)&&(bt[Bt]=Ee[Bt]),Bt;{const ko=(Bn=Bt.name)!==null&&Bn!==void 0?Bn:zn("tab-name");return bt[ko]=Bt,ko}});return{tabs:bt,names:Mt}},Me=Fe=>{const Ee=Gt(Fe),bt=Ee.indexOf("versions");return bt!==-1&&(Ee.splice(bt,1),Ee.push("versions")),{tabs:Fe,names:Ee}},Pe=async(Fe,Ee,bt)=>{const Mt=gn(),Bt=await Ve(bt),Bn=Vs(Fe),ko=ne(),xn={[Mt.name]:Mt,[Bt.name]:Bt,[Bn.name]:Bn,[ko.name]:ko,...Ee.get()};return $.from($t(Fe)).fold(()=>Me(xn),cn=>ie(cn,xn))},un=(Fe,Ee,bt)=>()=>{Pe(Fe,Ee,bt).then(({tabs:Mt,names:Bt})=>{const Bn=Y(Bt,cn=>To(Mt,cn)),xn={type:"tabpanel",tabs:kt(Bn)};Fe.windowManager.open({title:"Help",size:"medium",body:xn,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})})};var Wn=()=>{Lo.add("help",(Fe,Ee)=>{const bt=Po({}),Mt=Rn(bt);ye(Fe);const Bt=un(Fe,bt,Ee);return Pn(Fe,Bt),io(Fe,Bt),Fe.shortcuts.add("Alt+0","Open help dialog","mceHelp"),Ae(Fe,Ee),Mt})};Wn()})();const Mq=ma({__proto__:null,default:SM},[SM]);var xM={};(function(){var Po=tinymce.util.Tools.resolve("tinymce.PluginManager");const So=(Q=>ne=>Q===ne)(null),zn=Q=>Q,Rn=(Q,ne)=>{const ie=Q.length,Me=new Array(ie);for(let Pe=0;Pe<ie;Pe++){const un=Q[Pe];Me[Pe]=ne(un,Pe)}return Me},sn={aletter:"[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]",midnumlet:"[-'\\.]",midletter:"[:]",midnum:"[+*/,;;]",numeric:"[0-9---------------------------------]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[------------------------------------------------------------------------------------------------------]",format:"[----\uFEFF-]",katakana:"[-------]",extendnumlet:"[=_--<>]",punctuation:"[~|!-*+-\\/:;?@\\[-`{};----------------------------------------------]"},ye={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},$t=[new RegExp(sn.aletter),new RegExp(sn.midnumlet),new RegExp(sn.midletter),new RegExp(sn.midnum),new RegExp(sn.numeric),new RegExp(sn.cr),new RegExp(sn.lf),new RegExp(sn.newline),new RegExp(sn.extend),new RegExp(sn.format),new RegExp(sn.katakana),new RegExp(sn.extendnumlet),new RegExp("@")],An="",Pn=new RegExp("^"+sn.punctuation+"$"),Zn=/^\s+$/,pt=$t,Vt=ye.OTHER,yn=Q=>{let ne=Vt;const ie=pt.length;for(let Me=0;Me<ie;++Me){const Pe=pt[Me];if(Pe&&Pe.test(Q)){ne=Me;break}}return ne},rn=Q=>{const ne={};return ie=>{if(ne[ie])return ne[ie];{const Me=Q(ie);return ne[ie]=Me,Me}}},Re=Q=>{const ne=rn(yn);return Rn(Q,ne)},jt=(Q,ne)=>{const ie=Q[ne],Me=Q[ne+1];if(ne<0||ne>Q.length-1&&ne!==0||ie===ye.ALETTER&&Me===ye.ALETTER)return!1;const Pe=Q[ne+2];if(ie===ye.ALETTER&&(Me===ye.MIDLETTER||Me===ye.MIDNUMLET||Me===ye.AT)&&Pe===ye.ALETTER)return!1;const un=Q[ne-1];return(ie===ye.MIDLETTER||ie===ye.MIDNUMLET||Me===ye.AT)&&Me===ye.ALETTER&&un===ye.ALETTER||(ie===ye.NUMERIC||ie===ye.ALETTER)&&(Me===ye.NUMERIC||Me===ye.ALETTER)||(ie===ye.MIDNUM||ie===ye.MIDNUMLET)&&Me===ye.NUMERIC&&un===ye.NUMERIC||ie===ye.NUMERIC&&(Me===ye.MIDNUM||Me===ye.MIDNUMLET)&&Pe===ye.NUMERIC||(ie===ye.EXTEND||ie===ye.FORMAT)&&(Me===ye.ALETTER||Me===ye.NUMERIC||Me===ye.KATAKANA||Me===ye.EXTEND||Me===ye.FORMAT)||(Me===ye.EXTEND||Me===ye.FORMAT&&(Pe===ye.ALETTER||Pe===ye.NUMERIC||Pe===ye.KATAKANA||Pe===ye.EXTEND||Pe===ye.FORMAT))&&(ie===ye.ALETTER||ie===ye.NUMERIC||ie===ye.KATAKANA||ie===ye.EXTEND||ie===ye.FORMAT)||ie===ye.CR&&Me===ye.LF?!1:ie===ye.NEWLINE||ie===ye.CR||ie===ye.LF||Me===ye.NEWLINE||Me===ye.CR||Me===ye.LF?!0:!(ie===ye.KATAKANA&&Me===ye.KATAKANA||Me===ye.EXTENDNUMLET&&(ie===ye.ALETTER||ie===ye.NUMERIC||ie===ye.KATAKANA||ie===ye.EXTENDNUMLET)||ie===ye.EXTENDNUMLET&&(Me===ye.ALETTER||Me===ye.NUMERIC||Me===ye.KATAKANA)||ie===ye.AT)},tt=An,se=Zn,ze=Pn,mo=Q=>Q==="http"||Q==="https",Ke=(Q,ne)=>{let ie;for(ie=ne;ie<Q.length&&!se.test(Q[ie]);ie++);return ie},$=(Q,ne)=>{const ie=Ke(Q,ne+1);return Q.slice(ne+1,ie).join(tt).substr(0,3)==="://"?ie:ne},We=(Q,ne,ie,Me)=>{const Pe=[],un=[];let Wn=[];for(let Fe=0;Fe<ie.length;++Fe)if(Wn.push(Q[Fe]),jt(ie,Fe)){const Ee=ne[Fe];if((Me.includeWhitespace||!se.test(Ee))&&(Me.includePunctuation||!ze.test(Ee))){const bt=Fe-Wn.length+1,Mt=Fe+1,Bt=ne.slice(bt,Mt).join(tt);if(mo(Bt)){const Bn=$(ne,Fe),ko=Q.slice(Mt,Bn);Array.prototype.push.apply(Wn,ko),Fe=Bn}Pe.push(Wn),un.push({start:bt,end:Mt})}Wn=[]}return{words:Pe,indices:un}},Ft=()=>({includeWhitespace:!1,includePunctuation:!1}),on=(Q,ne,ie)=>{ie={...Ft(),...ie};const Me=Rn(Q,ne),Pe=Re(Me);return We(Q,Me,Pe,ie)},Y=(Q,ne,ie)=>on(Q,ne,ie).words,Jn=Q=>Q.replace(/\uFEFF/g,"");var Te=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const gt=(Q,ne)=>{const ie=ne.getBlockElements(),Me=ne.getVoidElements(),Pe=bt=>ie[bt.nodeName]||Me[bt.nodeName],un=[];let Wn="";const Fe=new Te(Q,Q);let Ee;for(;Ee=Fe.next();)Ee.nodeType===3?Wn+=Jn(Ee.data):Pe(Ee)&&Wn.length&&(un.push(Wn),Wn="");return Wn.length&&un.push(Wn),un},v=Q=>Q.replace(/\u200B/g,""),Gt=Q=>Q.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,Un=(Q,ne)=>{const ie=v(gt(Q,ne).join(`
`));return Y(ie.split(""),zn).length},To=(Q,ne)=>{const ie=gt(Q,ne).join("");return Gt(ie)},st=(Q,ne)=>{const ie=gt(Q,ne).join("").replace(/\s/g,"");return Gt(ie)},kt=(Q,ne)=>()=>ne(Q.getBody(),Q.schema),Sn=(Q,ne)=>()=>ne(Q.selection.getRng().cloneContents(),Q.schema),Kn=Q=>kt(Q,Un),Yt=Q=>({body:{getWordCount:Kn(Q),getCharacterCount:kt(Q,To),getCharacterCountWithoutSpaces:kt(Q,st)},selection:{getWordCount:Sn(Q,Un),getCharacterCount:Sn(Q,To),getCharacterCountWithoutSpaces:Sn(Q,st)},getCount:Kn(Q)}),Mo=(Q,ne)=>{Q.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(ne.body.getWordCount()),String(ne.selection.getWordCount())],["Characters (no spaces)",String(ne.body.getCharacterCountWithoutSpaces()),String(ne.selection.getCharacterCountWithoutSpaces())],["Characters",String(ne.body.getCharacterCount()),String(ne.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},Ae=(Q,ne)=>{Q.addCommand("mceWordCount",()=>Mo(Q,ne))},Ve=(Q,ne)=>{let ie=null;return{cancel:()=>{So(ie)||(clearTimeout(ie),ie=null)},throttle:(...un)=>{So(ie)&&(ie=setTimeout(()=>{ie=null,Q.apply(null,un)},ne))}}};var Ln=tinymce.util.Tools.resolve("tinymce.util.Delay");const Wo=(Q,ne)=>{Q.dispatch("wordCountUpdate",{wordCount:{words:ne.body.getWordCount(),characters:ne.body.getCharacterCount(),charactersWithoutSpaces:ne.body.getCharacterCountWithoutSpaces()}})},Xt=(Q,ne)=>{Wo(Q,ne)},gn=(Q,ne,ie)=>{const Me=Ve(()=>Xt(Q,ne),ie);Q.on("init",()=>{Xt(Q,ne),Ln.setEditorTimeout(Q,()=>{Q.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",Me.throttle)},0),Q.on("remove",Me.cancel)})},En=Q=>{const ne=()=>Q.execCommand("mceWordCount");Q.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:ne}),Q.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:ne})};var Vs=(Q=300)=>{Po.add("wordcount",ne=>{const ie=Yt(ne);return Ae(ne,ie),En(ne),gn(ne,ie,Q),ie})};Vs()})();const Dq=ma({__proto__:null,default:xM},[xM]);export{fq as a,vq as b,yq as c,wq as d,Sq as e,xq as f,Cq as g,Tq as h,pq as i,kq as j,Eq as k,Oq as l,Aq as m,_q as n,Mq as o,Dq as p,bq as q};
